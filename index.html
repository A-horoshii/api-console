<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>Google Drive</title>
    <script>
      window.Polymer = {
        dom: 'shadow'
      };
      (function() {
        'use strict';
        var onload = function() {
          if (!window.HTMLImports) {
            document.dispatchEvent(
              new CustomEvent('WebComponentsReady', {bubbles: true})
            );
          }
        };
        var webComponentsSupported = (
          'registerElement' in document &&
          'import' in document.createElement('link') &&
          'content' in document.createElement('template')
        );
        if (!webComponentsSupported) {
          var script = document.createElement('script');
          script.async = true;
          script.src = 'bower_components/webcomponentsjs/webcomponents-lite.min.js';
          script.onload = onload;
          document.head.appendChild(script);
        } else {
          onload();
        }
      })();
    </script>
    </head>
<body><div hidden="" by-polymer-bundler=""><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><link rel="import" href="polymer/polymer.html">
<link rel="import" href="iron-pages/iron-pages.html">
<link rel="import" href="raml-path-to-object/raml-path-to-object.html">
<link rel="import" href="raml-path-selector/raml-path-selector.html">
<link rel="import" href="raml-aware/raml-aware.html">
<link rel="import" href="paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="paper-header-panel/paper-header-panel.html">
<link rel="import" href="paper-toolbar/paper-toolbar.html">
<link rel="import" href="paper-toast/paper-toast.html">
<link rel="import" href="api-console-ext-comm/api-console-ext-comm.html">
<link rel="import" href="raml-documentation-panel/raml-documentation-panel.html">
<link rel="import" href="iron-scroll-target-behavior/iron-scroll-target-behavior.html">
<link rel="import" href="fetch-polyfill/fetch-polyfill.html">
<link rel="import" href="promise-polyfill/promise-polyfill.html">
<link rel="import" href="headers-parser-behavior/headers-parser-behavior.html">
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The API Console main stylesheet.
It is a Polymer's custom style element. It will propagate variables and mixins on all elements;
-->
<style is="custom-style">

:root {
  --primary-color: var(--arc-color-primary, #00a2df);
  --secondary-color: var(--arc-color-secondary, #506773);
  --primary-background-color: var(--arc-color-primary-background, #fff);
  --accent-color: var(--arc-accent-color, #cc143c);

  /* THEME */
  --arc-font-common-base: {
    font-family: var(--arc-font-family, 'Roboto', 'Noto', sans-serif);
    -webkit-font-smoothing: antialiased;
  };

  --arc-font-common-code: {
    font-family: var(--arc-font-family-code, 'Roboto Mono', 'Consolas', 'Menlo', monospace);
    -webkit-font-smoothing: antialiased;
  };

  --arc-font-common-expensive-kerning: {
    text-rendering: optimizeLegibility;
  };

  --arc-font-common-nowrap: {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  };

  --arc-font-display1: {
    @apply(--arc-font-common-base);

    font-size: 34px;
    font-weight: 400;
    letter-spacing: -.01em;
    line-height: 40px;
  };

  --arc-font-headline: {
    @apply(--arc-font-common-base);

    font-weight: 400;
    letter-spacing: -.012em;
    font-size: 24px;
    line-height: 32px;
  };

  --arc-font-title: {
    @apply(--arc-font-common-base);
    @apply(--arc-font-common-nowrap);

    font-weight: 500;
    font-size: 20px;
    line-height: 28px;
  };

  --arc-font-subhead: {
    @apply(--arc-font-common-base);

    font-weight: 400;
    font-size: 16px;
    line-height: 24px;
  };

  --arc-font-body2: {
    @apply(--arc-font-common-base);

    font-size: 14px;
    font-weight: 500;
    line-height: 24px;
  };

  --arc-font-body1: {
    @apply(--arc-font-common-base);

    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
  };

  --arc-font-caption: {
    @apply(--arc-font-common-base);
    @apply(--arc-font-common-nowrap);

    font-size: 12px;
    font-weight: 400;
    letter-spacing: 0.011em;
    line-height: 20px;
  };

  --select-text: {
    @apply(--arc-font-common-base);
    -webkit-user-select: text;
    cursor: text;
  };

  --arc-link: {
    @apply(--arc-font-common-base);
    color: var(--arc-link-color, #00A1DF);
  };

  --arc-font-code1: {
    @apply(--arc-font-common-code);

    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
  };

  /* Mixin applied to all the "missing info" paragraphs. By deafult all elements this kind are the <p> elements. But it may vary. */
  --no-info-message: {
    @apply(--arc-font-body1);
    font-style: italic;
  };

    /* Mixin applied to all labels that are form elements */
  --form-label: {
    font-weight: 500;
  };

  --input-line-color:  var(--primary-color);

    /* Mixin applied to all code blocks that highlights schemas / types / etc. All code block uses the `prism-theme-default`. */
  --code-block: {
    @apply(--arc-font-common-code);
  };

  --arc-code-mirror-background-color: var(--code-mirror-background-color, #f5f2f0);

  --code-mirror: {
    background-color: var(--arc-code-mirror-background-color, #f5f2f0);
  };

  --code-mirror-editor: {
    background-color: var(--arc-code-mirror-background-color, #f5f2f0);
    z-index: 0;
    display: block;
  }

  --code-mirror-wrapper: {
    display: block;
    height: 100%;
  };

  --paper-toolbar-background: var(--arc-toolbar-background, #121314);

  --paper-toolbar-title: {
    margin-left: 0px;
  };

    /* Paper tabs styling */
  --paper-tabs-selection-bar-color: var(--arc-tabs-selection-bar-color, --primary-color);
  --paper-tab-ink: var(--arc-tab-ink-color, --primary-color);
  --tabs-selection-width: var(--arc-tabs-selection-width, 2px);

  --paper-tabs-selection-bar: {
    border-width: var(--tabs-selection-width);
    border-color: var(--arc-tabs-selection-bar-border-color, --primary-color);
  };

  --paper-tabs-content: {
    @apply(--arc-font-common-base);

    height: calc(100% - var(--tabs-selection-width));
    border-bottom: var(--tabs-selection-width) solid var(--arc-tabs-content-border-bottom-color, rgba(39,47,51,.1));
    font-style: normal;
    color: var(--arc-tabs-content-selected-color, rgba(0,0,0,0.87));
  };

  --paper-tab-content-unselected: {
    color: var(--arc-tabs-content-color, rgba(0,0,0,0.78));
  };

    /* Documentaion */
  --raml-docs-main-content: {
    margin-bottom: var(--raml-docs-main-content-margin-bottom, 20px);
  };

    /* Inputs */
  --paper-input-container-color: var(--arc-input-container-color, rgba(0, 0, 0, 0.24));
    /* Inline docs */
  --inline-docs-color: var(--arc-inline-docs-color, rgba(0, 0, 0, 0.32));
  --raml-request-parameters-editor-docs-color: var(--inline-docs-color);
  --raml-headers-form-docs-color: var(--inline-docs-color);

  --raml-request-parameters-editor-subheader: {
    @apply(--arc-font-subhead);
    @apply(--arc-request-parameters-editor-subheader);
  };

  /*Table*/
    /* PATH selector */
  --raml-docs-tree-item-selected-background: var(--arc-navigation-selected-background-color, rgb(3, 169, 244));
  --raml-docs-tree-item-selected-color: var(--arc-navigation-selected-color, #fff);

    /* Request panel */
  --raml-request-panel: {
    margin-bottom: 20px;
    max-width: 900px;
    margin-left: 16px;
    margin-right: 12px;
    @apply(--arc-request-panel);
  };

  --response-view: {
    margin-bottom: 20px;
    max-width: 900px;
    margin-left: 16px;
    margin-right: 12px;
    @apply(--arc-response-view);
  };

  --request-form-panels: {
    margin: 0 0 12px 16px;
    @apply(--arc-request-form-panels);
  };

  --raml-request-url-editor: {
    @apply(--request-form-panels);
    @apply(--arc-request-url-editor);
  };

  --raml-request-parameters-editor: {
    @apply(--request-form-panels);
    @apply(--arc-request-parameters-editor);
  };

  --raml-body-editor-panel: {
    @apply(--request-form-panels);
    @apply(--arc-body-editor-panel);
  };

  --raml-docs-response-panel: {
    @apply(--arc-docs-response-panel);
  };

  --raml-docs-method-viewer: {
    margin-right: 12px;
    @apply(--arc-docs-method-viewer);
  };

  --raml-request-headers-editor: {
    @apply(--request-form-panels);
    @apply(--arc-request-headers-editor);
  };

  --authorization-panel: {
    @apply(--request-form-panels);
    @apply(--arc-authorization-panel);
  };

  --raml-documentation-panel: {
    padding: 0;
    @apply(--request-form-panels);
    @apply(--arc-documentation-panel);
  };

  --raml-summary-view: {
    @apply(--request-form-panels);
    margin-right: var(--arc-summary-view-margin-right, 12px);
    @apply(--arc-summary-view);
  };

  --raml-path-selector: {
    overflow: auto;
    background-color: transparent;
    @apply(--layout-flex);
    @apply(--arc-navigation);
  };

  --raml-docs-response-panel-docs-content: {
    padding: 8px;
    margin-left: 0px;
    @apply(--arc-docs-response-panel-docs-content);
  };

  /* Documentation panels */
  --params-table-header-background-color: var(--arc-params-table-header-background-color, #616161);
  --params-table-subheader-background-color: var(--arc-params-table-subheader-background-color, #EEEEEE);
  --params-table-row-border-color: var(--arc-params-table-row-border-color, #e0e0e0);
  --params-table-row-subproperty-border-color: var(--arc-params-table-subproperty-border-color, #e0e0e0);
  --params-table-header-color: var(--arc-params-table-header-color, #FAFAFA);

  --inline-documentation-color: var(--arc-inline-documentation-color, #1a237e);
  --raml-headers-form-docs-color: var(--arc-headers-form-docs-color, #1a237e);

  --response-error-view: {
    margin-top: var(--response-error-view-margin-top, 24px);
    @apply(--arc-response-error-view);
  };

  --code-type-text-value-color: #0d47a1;
  --code-type-number-value-color: #03a9f4;
  --code-type-boolean-value-color: #0288d1;
  --code-type-null-value-color: #0288d1;
  --code-punctuation-value-color: #757575;
  --code-type-link-color: #757575;
  --code-array-index-color: rgba(1, 87, 155, 0.57);
  --code-background-color: #F4F5F6;

  /* max width of the documentation main panel */
  --raml-docs-main-content-width: 1200px;

  --paper-checkbox-label: {
    @apply(--arc-font-body1);
    @apply(--arc-checkbox-label);
  };

  /* Label of the Type name in the body parameters list view */
  --docs-body-parameters-table-type-name: {
    @apply(--arc-font-common-base);
    font-size: 16px;
    font-weight: 100;
    margin: 0;
    padding: 0;
    @apply(--arc-parameters-type-name);
  };

  /* Applied to links in RAML docs */
  --raml-docs-link: {
    @apply(--arc-font-body1);
    @apply(--arc-link);
  };

  /* buttons */
  --paper-button: {
    @apply(--arc-font-common-base);
    font-size: var(--arc-button-font-size, 14px);
    @apply(--arc-button);
  };

  --toggle-button: {
    @apply(--arc-font-body1);
    color: var(--arc-toggle-button-color, #6B8A99);
    margin-right: 0;
    font-weight: normal;
    @apply(--arc-toggle-button);
  };

  --toggle-button-hover: {
    @apply(--arc-toggle-button-hover);
  };

  --action-button: {
    background-color: var(--arc-action-button-background-color, --primary-color);
    color: var(--primary-action-color, #fff);
  };

  --action-button-hover: {
    background-color: var(--arc-action-button-background-color, --primary-color);
    color: var(--primary-action-color, #fff);
  };

  --auth-button: {
    @apply(--arc-font-body1);
    background-color: var(--arc-auth-button-background-color, #D1344E);
    color: var(--arc-auth-button-color, #fff);
    @apply(--arc-auth-button);
  };

  --raml-docs-resource-viewer-navigation-wide-layout: {
    background-color: var(--arc-resource-viewer-navigation-wide-layout-background-color, #F4F5F6);
    margin: 0;
    border-left: 0;
    @apply(--arc-resource-viewer-navigation-wide-layout);
  };

  --sidebar-list-link: {
    @apply(--arc-font-body1);
    padding: 10px 12px;
    @apply(--arc-link);
  };
}

</style>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><link rel="import" href="raml-request-panel/raml-request-panel.html">
<link rel="import" href="response-view/response-view.html">
<link rel="import" href="paper-button/paper-button.html">
<link rel="import" href="iron-icon/iron-icon.html">
<link rel="import" href="arc-icons/arc-icons.html">
<link rel="import" href="paper-icon-button/paper-icon-button.html">
<!--
The request and response panel.

This element renders a view for the request panel (`raml-request-panel`). When
the response is ready it will display the response panel (`response-view`).

Additionally, the `api-console-request` element will display the "install
API console extension banner" when the user uses supported browser. The extension
is to proxt the HTTP request and avoid CORS problems.

@group RAML Elements
@element api-console-request
@demo demo/index.html
-->
<dom-module id="api-console-request">
  <template>
    <style>
    :host {
      display: block;
    }

    .extension-banner {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      display: none;
      padding: 0 24px;
      border-bottom: 1px rgba(0,0,0,0.12) solid;
      margin-bottom: 12px;
      color: rgba(0,0,0,0.54);
    }

    .extension-banner.active {
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    }
    </style>
    <div class="extension-banner">
      <p>For better experience install API console extension. Get it from <a target="_blank" href="https://chrome.google.com/webstore/detail/olkpohecoakpkpinafnpppponcfojioa">Chrome Web Store</a></p>
      <paper-icon-button icon="arc:close" on-tap="dismissExtensionBanner"></paper-icon-button>
    </div>
    <raml-request-panel narrow="{{narrow}}" method="{{selectedObject}}" redirect-url="[[redirectUrl]]" request="{{request}}" response="{{response}}" response-is-xhr="{{responseIsXhr}}" response-error="{{responseError}}" loading-time="{{loadingTime}}" timings="{{timings}}" redirect-timings="{{redirectTimings}}" redirects="{{redirects}}" source-message="{{sourceMessage}}" no-url-editor="{{noUrlEditor}}" on-api-console-request="_apiRequested"></raml-request-panel>
    <template is="dom-if" if="[[hasResponse]]">
      <response-view request="[[request]]" response="[[response]]" response-error="[[responseError]]" is-xhr="[[responseIsXhr]]" loading-time="{{loadingTime}}" redirects="[[redirects]]" redirect-timings="[[redirectTimings]]" response-timings="[[timings]]" sent-http-message="[[sourceMessage]]"></response-view>
    </template>
    <raml-aware raml="{{raml}}" scope="raml"></raml-aware>
    <paper-toast id="noAuth" text="The required authorization is not set." duration="3000"></paper-toast>
  </template>
  <script>
    Polymer({
      is: 'api-console-request',

      behaviors: [
        Polymer.IronScrollTargetBehavior,
        ArcBehaviors.HeadersParserBehavior
      ],

      properties: {
        /**
         * Current path to the resource / method / documentation.
         * This is updated when the user select a specific node in the RAML JSON structure that
         * represents one of this properties. When changed from the outside (by the app) it will
         * update the view to display selected path.
         */
        path: {
          type: String,
          notify: true
        },
        // Selected object in the navigation menu and parsed by the
        // `raml-path-selector` element
        selectedObject: {
          type: Object,
          observer: '_selectedObjectChanged'
        },
        // A parent endpoint of selected method object (if any).
        selectedParent: Object,
        // If true it will display a narrow layout.
        narrow: {
          type: Boolean,
          notify: true
        },
        // The RAML definition JSON object
        raml: {
          type: Object
        },
        // OAuth2 redirect URL
        redirectUrl: String,
        /**
         * Created by the transport `Request` object as defined in the Fetch
         * API spec.
         */
        request: Request,
        /**
         * Created by the transport the `Response` object as defined in the
         * Fetch API spec.
         */
        response: Response,
        // True if the response is made by the Fetch / XHR api.
        responseIsXhr: {
          type: Boolean,
          value: true
        },
        /**
         * An error object associated with the response when error.
         */
        responseError: Object,
        // Computed value, true, when the response object is set.
        hasResponse: {
          type: Boolean,
          value: false,
          computed: '_computeHasResponse(response)'
        },
        // Response full loading time.
        loadingTime: Number,
        /**
         * If the transport method is able to collect detailed information about request timings
         * then this value will be set. It's the `timings` property from the HAR 1.2 spec.
         */
        timings: Object,
        /**
         * If the transport method is able to collect detailed information about redirects timings
         * then this value will be set. It's a list of `timings` property from the HAR 1.2 spec.
         */
        redirectTimings: Array,
        /**
         * It will be set if the transport method can generate information about redirections.
         */
        redirects: Array,
        /**
         * Http message sent to the server.
         *
         * This information should be available only in case of advanced HTTP transport.
         */
        sourceMessage: String,
        // If true then the install extension banner will be always hidden.
        noExtensionBanner: Boolean,
        /// If true then current browser is Chrome
        isChrome: {
          type: Boolean,
          value: function() {
            return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
          }
        },
        // Main scroll target for the app.
        scrollTarget: HTMLElement,
        /**
         * Forces the console to send headers defined in this string overriding any used defined
         * header.
         * This should be an array of headers with `name` and `value` keys, e.g.:
         * ```
         * [{
         *   name: "x-token",
         *   value: "value"
         * }]
         * ```
         */
        appendHeaders: Array,
        /**
         * If set every request made from the console will be proxied by the service provided in this
         * value.
         * It will prefix entered URL with the proxy value. so the call to
         * `http://domain.com/path/?query=some+value` will become
         * `https://proxy.com/path/http://domain.com/path/?query=some+value`
         *
         * If the proxy require a to pass the URL as a query parameter define value as follows:
         * `https://proxy.com/path/?url=`. In this case be sure to set `proxy-encode-url`
         * attribute.
         */
        proxy: String,
        /**
         * If `proxy` is set, it will URL encode the request URL before appending it to the proxy URL.
         * `http://domain.com/path/?query=some+value` will become
         * `https://proxy.com/?url=http%3A%2F%2Fdomain.com%2Fpath%2F%3Fquery%3Dsome%2Bvalue`
         */
        proxyEncodeUrl: Boolean,
        /**
         * Location of the `bower_components` folder.
         * It should be a path from server's root path including bower_components.
         */
        bowerLocation: String,
        /**
         * Hides the URL editor from the view.
         * Note that the editor is still in the DOM. This property just hiddes
         * it.
         */
        noUrlEditor: Boolean
      },

      listeners: {
        'api-console-response-ready': '_onResponseReady'
      },

      ready: function() {
        this._setRedirectUrl();
        this._initExtensionBanner();
      },
      // Sets OAuth 2 redirect URL for the authorization panel
      _setRedirectUrl: function() {
        var a = document.createElement('a');
        var location = this.bowerLocation;
        if (!location) {
          location = 'bower_components/';
        }
        if (location && location[location.length - 1] !== '/') {
          location += '/';
        }
        a.href = location + 'oauth-authorization/oauth-popup.html';
        this.redirectUrl = a.href;
      },

      // Shows the extension banner if is Chrome and extension not detected.
      _initExtensionBanner: function() {
        if (this.isChrome) {
          this.async(function() {
            if (!this.noExtensionBanner) {
              this.openInstallExtensionBanner();
            }
          }, 1000);
        }
      },
      // Computes if there is a reponse object.
      _computeHasResponse: function(response) {
        return !!response;
      },

      /**
       * A handler for the API call.
       * This handler will only check if there is authorization required
       * and if the user is authorizaed.
       */
      _apiRequested: function(event) {
        var so = this.selectedObject;
        if (so && so.securedBy && so.securedBy.length) {
          if (!this.authorizationMethod || !this.authorizationSettings) {
            // check if headers ahs the authorization value.
            if (!event.detail.headers ||
              !/^authorization\s?:\s?.+$/im.test(event.detail.headers)) {
              this.$.noAuth.opened = true;
            }
          }
        }

        this._appendConsoleHeaders(event);
        this._appendProxy(event);
      },
      /**
       * Appends headers defined in the `appendHeaders` array.
       * @param {CustomEvent} event The `api-console-request` event.
       */
      _appendConsoleHeaders: function(event) {
        var headersToAdd = this.appendHeaders;
        if (headersToAdd) {
          var eventHeaders = event.detail.headers || '';
          for (var i = 0, len = headersToAdd.length; i < len; i++) {
            var header = headersToAdd[i];
            eventHeaders = this.replaceHeaderValue(eventHeaders, header.name, header.value);
          }
          event.detail.headers = eventHeaders;
        }
      },
      /**
       * Sets the proxy URL if the `proxy` property is set.
       * @param {CustomEvent} event The `api-console-request` event.
       */
      _appendProxy: function(event) {
        var proxy = this.proxy;
        if (!proxy) {
          return;
        }
        var url = this.proxyEncodeUrl ? encodeURIComponent(event.detail.url) : event.detail.url;
        url = proxy + url;
        event.detail.url = url;
      },

      _selectedObjectChanged: function() {
        this.set('request', undefined);
        this.set('response', undefined);
        this.set('responseError', undefined);
      },

      _onResponseReady: function() {
        this.async(function() {
          var panel = this.$$('response-view');
          var position = panel.offsetTop;
          this.scroll(0, position);
        }, 1);
      },
      // Closes the extension install banner
      dismissExtensionBanner: function() {
        this.$$('.extension-banner').classList.remove('active');
      },
      // Opens the extension install banner
      openInstallExtensionBanner: function() {
        this.$$('.extension-banner').classList.add('active');
      }
    });
  </script>
</dom-module>
<!--
# The API Console

The API console for RAML (Restful Api Modeling Language) documents.
The RAML Console allows browsing of API documentation and in-browser testing of API methods.

@element api-console
@demo demo/index.html
-->
<dom-module id="api-console">
  <template>
    <style>
     :host {
      --app-primary-color: #00A2DF;
      --app-secondary-color: black;
      display: block;
    }

    :host([manual-navigation]) raml-path-selector {
      @apply(--layout-fit);
      transition-property: -webkit-transform;
      transition-property: transform;
      -webkit-transition-duration: 0.24s;
      transition-duration: 0.24s;
      -webkit-transform: translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0);
      background-color: var(--api-console-manual-navigation-background-color, #fff);
      z-index: 1;
    }

    :host([manual-navigation]) raml-path-selector[opened] {
      transform: translate3d(0px, 0px, 0px);
    }

    *[hidden] {
      display: none !important;
    }

    iron-pages {
      height: 100%;
    }

    iron-pages>* {
      height: 100%;
    }

    .nav-content {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .nav-content > ::content > * {
      margin-left: 12px;
    }

    .drawer-content-wrapper {
      @apply(--layout-flex);
      @apply(--layout-vertical);
    }

    #drawer {
      --paper-header-panel-container: {
        @apply(--layout-horizontal);
      }
    }
    </style>
    <paper-drawer-panel responsive-width="860px" force-narrow="[[manualNavigation]]">
      <template is="dom-if" if="[[!manualNavigation]]">
        <paper-header-panel drawer="" id="drawer">
          <paper-toolbar>
            <div class="title">API console</div>
          </paper-toolbar>
          <div class="drawer-content-wrapper">
            <raml-path-selector narrow="[[narrow]]" raml="[[raml]]" selected-path="{{path}}" force-wide-layout="" first-level-opened="" resources-opened="" documentation-opened=""></raml-path-selector>
            <content select="[nav-addon]"></content>
          </div>
        </paper-header-panel>
      </template>
      <paper-header-panel main="">
        <paper-toolbar>
          <paper-icon-button icon="arc:menu" paper-drawer-toggle="" hidden$="[[manualNavigation]]"></paper-icon-button>
          <div class="title">[[raml.title]]</div>
          <span class="flex"></span>
          <div class="nav-content">
            <content select="[nav]"></content>
          </div>
        </paper-toolbar>
        <div>
          <template is="dom-if" if="[[manualNavigation]]">
            <raml-path-selector opened$="[[navigationOpened]]" narrow="[[narrow]]" raml="[[raml]]" selected-path="{{path}}" first-level-opened="" resources-opened="" documentation-opened=""></raml-path-selector>
          </template>
          <iron-pages selected="[[page]]" attr-for-selected="name" role="main" id="mainPages">
            <raml-documentation-panel name="docs" narrow="[[narrow]]" selected-object="[[selectedObject]]" selected-parent="[[selectedParent]]" path="{{path}}" scroll-target="[[scrollTarget]]" no-try-it="[[noTryIt]]" handle-path-events=""></raml-documentation-panel>
            <api-console-request no-extension-banner="[[noExtensionBanner]]" narrow="[[narrow]]" name="request" page="[[page]]" scroll-target="[[scrollTarget]]" selected-object="[[selectedObject]]" selected-parent="[[selectedParent]]" path="{{path}}" append-headers="[[_computeAppendHeaders(appendHeaders)]]" proxy="[[proxy]]" proxy-encode-url="[[proxyEncodeUrl]]" bower-location="[[bowerLocation]]" no-url-editor="{{noUrlEditor}}"></api-console-request>
          </iron-pages>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>
    <template is="dom-if" if="[[aware]]" restamp="true">
      <raml-aware raml="{{raml}}" scope="raml"></raml-aware>
    </template>
    <raml-path-to-object raml="[[raml]]" selected-path="{{path}}" selected-object="{{selectedObject}}" selected-parent="{{selectedParent}}"></raml-path-to-object>
    <api-console-ext-comm></api-console-ext-comm>
  </template>
  <script>
  Polymer({
    is: 'api-console',

    behaviors: [
      Polymer.IronScrollTargetBehavior,
      ArcBehaviors.HeadersParserBehavior
    ],
    /**
     * Fired when the element is ready to work and all DOM initialization have finished.
     *
     * @event api-console-ready
     */
    properties: {
      // Currently displayed page. Either `docs` or `request`
      page: {
        type: String,
        value: 'docs',
        notify: true
      },
      // RAML as the JSON produced by the parser. The `.specification` part of the output.
      raml: Object,
      /**
       * Path to a file with JSON data that should be read and contents of it
       * should be set to the `raml` attribute
       */
      jsonFile: String,
      // Current path in the RAML structure.
      path: {
        type: String,
        observer: '_pathChanged',
        notify: true
      },
      // If true it will display a narrow layout.
      narrow: {
        type: Boolean,
        notify: true
      },
      // Selected object in the navigation menu and parsed by the
      // `raml-path-selector` element
      selectedObject: Object,
      // A parent endpoint of selected method object (if any).
      selectedParent: Object,
      // If not set or false then the install extension banner will be allowed to be shown.
      noExtensionBanner: Boolean,
      /**
       * If set it will use the `raml-aware` element to set the RAML data.
       * Value of this attribute should be the same as the scope attribute
       * of the `raml-aware` element used to set the data.
       */
      aware: String,
      // An element that handles the scroll of the main document.
      scrollTarget: {
        type: HTMLElement,
        value: function() {
          return this.$$('paper-header-panel[main]').scroller;
        }
      },
      /**
       * Forces the console to send headers defined in this string overriding any used defined
       * header.
       * It can be useful if the console has to send any recognizable string to a server without
       * user knowing about it.
       * The headers should be a HTTP headers string.
       */
      appendHeaders: {
        type: String
      },
      /**
       * If set every request made from the console will be proxied by the service provided in this
       * value.
       * It will prefix entered URL with the proxy value. so the call to
       * `http://domain.com/path/?query=some+value` will become
       * `https://proxy.com/path/http://domain.com/path/?query=some+value`
       *
       * If the proxy require a to pass the URL as a query parameter define value as follows:
       * `https://proxy.com/path/?url=`. In this case be sure to set `proxy-encode-url`
       * attribute.
       */
      proxy: String,
      /**
       * If `proxy` is set, it will URL encode the request URL before appending it to the proxy URL.
       * `http://domain.com/path/?query=some+value` will become
       * `https://proxy.com/?url=http%3A%2F%2Fdomain.com%2Fpath%2F%3Fquery%3Dsome%2Bvalue`
       */
      proxyEncodeUrl: Boolean,
      /**
       * If set then the API console hide the "try it" button from the
       * method documentation view. The request and response panels still will
       * be available, but to enter this section you'll have to do it
       * programatically.
       */
      noTryIt: Boolean,
      /**
       * If set, the open navigation button will be always hidden.
       * The left hand side navigation will be hidden until `navigationOpened`
       * property is set.
       * The navigation will cover full screen, hiding the content.
       * This works best with `narrow` layout.
       */
      manualNavigation: {
        type: Boolean,
        reflectToAttribute: true,
        value: false
      },
      /**
       * True when navigation is or should be opened.
       */
      navigationOpened: {
        type: Boolean,
        notify: true,
        observer: '_navigationOpenedChanged'
      },
      /**
       * Location of the `bower_components` folder.
       * It should be a path from server's root path including bower_components.
       */
      bowerLocation: String,
      /**
       * Hides the URL editor from the view.
       * Note that the editor is still in the DOM. This property just hiddes
       * it.
       */
      noUrlEditor: Boolean
    },

    listeners: {
      'scroll-to': '_onScrollRequested',
      'raml-path-changed': '_innerPathChanged',
      'tryit-requested': '_tryitHandler'
    },

    observers: ['_ramlChanged(raml)', '_jsonFileChanged(jsonFile)'],

    attached: function() {
      this.listen(window, 'api-console-extension-installed', '_onExtensionInstalled');
    },

    detached: function() {
      this.unlisten(window, 'api-console-extension-installed', '_onExtensionInstalled');
    },

    ready: function() {
      this.fire('api-console-ready');
    },
    // Scrolls the document to required position.
    _onScrollRequested: function(e) {
      this.scroll(e.detail.x || 0, e.detail.y || 0);
    },
    // Handler for `raml-path-changed` that is fired from docs elements.
    _innerPathChanged: function(e) {
      this.set('path', e.detail.path);
    },
    // Handler for the extension installed event.
    _onExtensionInstalled: function() {
      this.set('noExtensionBanner', true);
    },
    /**
     * Handler for the `tryit-requested` event. Sets current screen to
     * `request`.
     */
    _tryitHandler: function() {
      this.page = 'request';
    },
    /**
     * Handler for path change.
     * It set's current `page` to the `docs` if it is not pointing to the
     * docs.
     */
    _pathChanged: function() {
      if (this.page !== 'docs') {
        this.page = 'docs';
      }
    },
    /**
     * Handler for the `raml` property change.
     * Sets the `path` to summary.
     */
    _ramlChanged: function() {
      this.path = 'summary';
    },

    _notify: function(message) {
      var t = document.createElement('paper-toast');
      t.text = message;
      t.opened = true;
      document.body.appendChild(t);
    },

    _jsonFileChanged: function(url) {
      var context = this;
      fetch(url)
      .then(function(response) {
        if (response.ok) {
          return response.json();
        }
      })
      .then(function(json) {
        context.set('raml', json);
        if (!json) {
          context._notify('Data unavailable under given URL.');
          context.fire('json-file-loaded-error');
        } else {
          context.fire('json-file-loaded');
        }
      })
      .catch(function(reason) {
        context._notify('Unable to download data. ' + reason.message);
      });
    },
    // Transforms HTTP headers string to headers map.
    _computeAppendHeaders: function(headers) {
      if (headers) {
        // Hardcoded text set to the attribute will contain "\n" as text and not LN.
        headers = headers.replace('\\n', '\n');
      }
      return this.headersToJSON(headers);
    },

    _navigationOpenedChanged: function(value) {
      if (value === undefined || !this.manualNavigation) {
        return;
      }
      if (value) {
        var context = this;
        this.__originallScrollTop = this.scrollTarget.scrollTop;
        this.scrollTarget.scrollTop = 0;
        this.__hideMainTimeout = setTimeout(function() {
          context.$.mainPages.setAttribute('hidden', true);
        }, 200);
      } else {
        if (this.__hideMainTimeout) {
          clearTimeout(this.__hideMainTimeout);
        }
        this.$.mainPages.removeAttribute('hidden');
        this.scrollTarget.scrollTop = this.__originallScrollTop;
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
A web components wrapper for the fetch polyfill from the https://github.com/github/fetch

Import it into the app and use the Fetch API

### Example
```
<link rel="import" href="bower_components/fetch-polyfill/fetch-polyfill.html">
```

After you import the element a `fetch` object in global namespace will be set.
The element is helpful if many web components require Fetch polyfill. When used
as an import it will be loaded only once.

Note that this code affects only those browsers that don't support fetch API.
At the moment Chrome and Firefox has native support.

@group Logic
@element fetch-polyfill
--><script>(function(self) {
  'use strict';

  if (self.fetch) {
    return
  }

  var support = {
    searchParams: 'URLSearchParams' in self,
    iterable: 'Symbol' in self && 'iterator' in Symbol,
    blob: 'FileReader' in self && 'Blob' in self && (function() {
      try {
        new Blob()
        return true
      } catch(e) {
        return false
      }
    })(),
    formData: 'FormData' in self,
    arrayBuffer: 'ArrayBuffer' in self
  }

  if (support.arrayBuffer) {
    var viewClasses = [
      '[object Int8Array]',
      '[object Uint8Array]',
      '[object Uint8ClampedArray]',
      '[object Int16Array]',
      '[object Uint16Array]',
      '[object Int32Array]',
      '[object Uint32Array]',
      '[object Float32Array]',
      '[object Float64Array]'
    ]

    var isDataView = function(obj) {
      return obj && DataView.prototype.isPrototypeOf(obj)
    }

    var isArrayBufferView = ArrayBuffer.isView || function(obj) {
      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
    }
  }

  function normalizeName(name) {
    if (typeof name !== 'string') {
      name = String(name)
    }
    if (/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
      throw new TypeError('Invalid character in header field name')
    }
    return name.toLowerCase()
  }

  function normalizeValue(value) {
    if (typeof value !== 'string') {
      value = String(value)
    }
    return value
  }

  // Build a destructive iterator for the value list
  function iteratorFor(items) {
    var iterator = {
      next: function() {
        var value = items.shift()
        return {done: value === undefined, value: value}
      }
    }

    if (support.iterable) {
      iterator[Symbol.iterator] = function() {
        return iterator
      }
    }

    return iterator
  }

  function Headers(headers) {
    this.map = {}

    if (headers instanceof Headers) {
      headers.forEach(function(value, name) {
        this.append(name, value)
      }, this)
    } else if (Array.isArray(headers)) {
      headers.forEach(function(header) {
        this.append(header[0], header[1])
      }, this)
    } else if (headers) {
      Object.getOwnPropertyNames(headers).forEach(function(name) {
        this.append(name, headers[name])
      }, this)
    }
  }

  Headers.prototype.append = function(name, value) {
    name = normalizeName(name)
    value = normalizeValue(value)
    var oldValue = this.map[name]
    this.map[name] = oldValue ? oldValue+','+value : value
  }

  Headers.prototype['delete'] = function(name) {
    delete this.map[normalizeName(name)]
  }

  Headers.prototype.get = function(name) {
    name = normalizeName(name)
    return this.has(name) ? this.map[name] : null
  }

  Headers.prototype.has = function(name) {
    return this.map.hasOwnProperty(normalizeName(name))
  }

  Headers.prototype.set = function(name, value) {
    this.map[normalizeName(name)] = normalizeValue(value)
  }

  Headers.prototype.forEach = function(callback, thisArg) {
    for (var name in this.map) {
      if (this.map.hasOwnProperty(name)) {
        callback.call(thisArg, this.map[name], name, this)
      }
    }
  }

  Headers.prototype.keys = function() {
    var items = []
    this.forEach(function(value, name) { items.push(name) })
    return iteratorFor(items)
  }

  Headers.prototype.values = function() {
    var items = []
    this.forEach(function(value) { items.push(value) })
    return iteratorFor(items)
  }

  Headers.prototype.entries = function() {
    var items = []
    this.forEach(function(value, name) { items.push([name, value]) })
    return iteratorFor(items)
  }

  if (support.iterable) {
    Headers.prototype[Symbol.iterator] = Headers.prototype.entries
  }

  function consumed(body) {
    if (body.bodyUsed) {
      return Promise.reject(new TypeError('Already read'))
    }
    body.bodyUsed = true
  }

  function fileReaderReady(reader) {
    return new Promise(function(resolve, reject) {
      reader.onload = function() {
        resolve(reader.result)
      }
      reader.onerror = function() {
        reject(reader.error)
      }
    })
  }

  function readBlobAsArrayBuffer(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsArrayBuffer(blob)
    return promise
  }

  function readBlobAsText(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsText(blob)
    return promise
  }

  function readArrayBufferAsText(buf) {
    var view = new Uint8Array(buf)
    var chars = new Array(view.length)

    for (var i = 0; i < view.length; i++) {
      chars[i] = String.fromCharCode(view[i])
    }
    return chars.join('')
  }

  function bufferClone(buf) {
    if (buf.slice) {
      return buf.slice(0)
    } else {
      var view = new Uint8Array(buf.byteLength)
      view.set(new Uint8Array(buf))
      return view.buffer
    }
  }

  function Body() {
    this.bodyUsed = false

    this._initBody = function(body) {
      this._bodyInit = body
      if (!body) {
        this._bodyText = ''
      } else if (typeof body === 'string') {
        this._bodyText = body
      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
        this._bodyBlob = body
      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
        this._bodyFormData = body
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this._bodyText = body.toString()
      } else if (support.arrayBuffer && support.blob && isDataView(body)) {
        this._bodyArrayBuffer = bufferClone(body.buffer)
        // IE 10-11 can't handle a DataView body.
        this._bodyInit = new Blob([this._bodyArrayBuffer])
      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
        this._bodyArrayBuffer = bufferClone(body)
      } else {
        throw new Error('unsupported BodyInit type')
      }

      if (!this.headers.get('content-type')) {
        if (typeof body === 'string') {
          this.headers.set('content-type', 'text/plain;charset=UTF-8')
        } else if (this._bodyBlob && this._bodyBlob.type) {
          this.headers.set('content-type', this._bodyBlob.type)
        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
        }
      }
    }

    if (support.blob) {
      this.blob = function() {
        var rejected = consumed(this)
        if (rejected) {
          return rejected
        }

        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob)
        } else if (this._bodyArrayBuffer) {
          return Promise.resolve(new Blob([this._bodyArrayBuffer]))
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as blob')
        } else {
          return Promise.resolve(new Blob([this._bodyText]))
        }
      }

      this.arrayBuffer = function() {
        if (this._bodyArrayBuffer) {
          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)
        } else {
          return this.blob().then(readBlobAsArrayBuffer)
        }
      }
    }

    this.text = function() {
      var rejected = consumed(this)
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return readBlobAsText(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as text')
      } else {
        return Promise.resolve(this._bodyText)
      }
    }

    if (support.formData) {
      this.formData = function() {
        return this.text().then(decode)
      }
    }

    this.json = function() {
      return this.text().then(JSON.parse)
    }

    return this
  }

  // HTTP methods whose capitalization should be normalized
  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']

  function normalizeMethod(method) {
    var upcased = method.toUpperCase()
    return (methods.indexOf(upcased) > -1) ? upcased : method
  }

  function Request(input, options) {
    options = options || {}
    var body = options.body

    if (input instanceof Request) {
      if (input.bodyUsed) {
        throw new TypeError('Already read')
      }
      this.url = input.url
      this.credentials = input.credentials
      if (!options.headers) {
        this.headers = new Headers(input.headers)
      }
      this.method = input.method
      this.mode = input.mode
      if (!body && input._bodyInit != null) {
        body = input._bodyInit
        input.bodyUsed = true
      }
    } else {
      this.url = String(input)
    }

    this.credentials = options.credentials || this.credentials || 'omit'
    if (options.headers || !this.headers) {
      this.headers = new Headers(options.headers)
    }
    this.method = normalizeMethod(options.method || this.method || 'GET')
    this.mode = options.mode || this.mode || null
    this.referrer = null

    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
      throw new TypeError('Body not allowed for GET or HEAD requests')
    }
    this._initBody(body)
  }

  Request.prototype.clone = function() {
    return new Request(this, { body: this._bodyInit })
  }

  function decode(body) {
    var form = new FormData()
    body.trim().split('&').forEach(function(bytes) {
      if (bytes) {
        var split = bytes.split('=')
        var name = split.shift().replace(/\+/g, ' ')
        var value = split.join('=').replace(/\+/g, ' ')
        form.append(decodeURIComponent(name), decodeURIComponent(value))
      }
    })
    return form
  }

  function parseHeaders(rawHeaders) {
    var headers = new Headers()
    rawHeaders.split(/\r?\n/).forEach(function(line) {
      var parts = line.split(':')
      var key = parts.shift().trim()
      if (key) {
        var value = parts.join(':').trim()
        headers.append(key, value)
      }
    })
    return headers
  }

  Body.call(Request.prototype)

  function Response(bodyInit, options) {
    if (!options) {
      options = {}
    }

    this.type = 'default'
    this.status = 'status' in options ? options.status : 200
    this.ok = this.status >= 200 && this.status < 300
    this.statusText = 'statusText' in options ? options.statusText : 'OK'
    this.headers = new Headers(options.headers)
    this.url = options.url || ''
    this._initBody(bodyInit)
  }

  Body.call(Response.prototype)

  Response.prototype.clone = function() {
    return new Response(this._bodyInit, {
      status: this.status,
      statusText: this.statusText,
      headers: new Headers(this.headers),
      url: this.url
    })
  }

  Response.error = function() {
    var response = new Response(null, {status: 0, statusText: ''})
    response.type = 'error'
    return response
  }

  var redirectStatuses = [301, 302, 303, 307, 308]

  Response.redirect = function(url, status) {
    if (redirectStatuses.indexOf(status) === -1) {
      throw new RangeError('Invalid status code')
    }

    return new Response(null, {status: status, headers: {location: url}})
  }

  self.Headers = Headers
  self.Request = Request
  self.Response = Response

  self.fetch = function(input, init) {
    return new Promise(function(resolve, reject) {
      var request = new Request(input, init)
      var xhr = new XMLHttpRequest()

      xhr.onload = function() {
        var options = {
          status: xhr.status,
          statusText: xhr.statusText,
          headers: parseHeaders(xhr.getAllResponseHeaders() || '')
        }
        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')
        var body = 'response' in xhr ? xhr.response : xhr.responseText
        resolve(new Response(body, options))
      }

      xhr.onerror = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.ontimeout = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.open(request.method, request.url, true)

      if (request.credentials === 'include') {
        xhr.withCredentials = true
      }

      if ('responseType' in xhr && support.blob) {
        xhr.responseType = 'blob'
      }

      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value)
      })

      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)
    })
  }
  self.fetch.polyfill = true
})(typeof self !== 'undefined' ? self : this);
</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>(function () {
function resolve() {
document.body.removeAttribute('unresolved');
}
if (window.WebComponents) {
addEventListener('WebComponentsReady', resolve);
} else {
if (document.readyState === 'interactive' || document.readyState === 'complete') {
resolve();
} else {
addEventListener('DOMContentLoaded', resolve);
}
}
}());window.Polymer = {
Settings: function () {
var settings = window.Polymer || {};
if (!settings.noUrlSettings) {
var parts = location.search.slice(1).split('&');
for (var i = 0, o; i < parts.length && (o = parts[i]); i++) {
o = o.split('=');
o[0] && (settings[o[0]] = o[1] || true);
}
}
settings.wantShadow = settings.dom === 'shadow';
settings.hasShadow = Boolean(Element.prototype.createShadowRoot);
settings.nativeShadow = settings.hasShadow && !window.ShadowDOMPolyfill;
settings.useShadow = settings.wantShadow && settings.hasShadow;
settings.hasNativeImports = Boolean('import' in document.createElement('link'));
settings.useNativeImports = settings.hasNativeImports;
settings.useNativeCustomElements = !window.CustomElements || window.CustomElements.useNative;
settings.useNativeShadow = settings.useShadow && settings.nativeShadow;
settings.usePolyfillProto = !settings.useNativeCustomElements && !Object.__proto__;
settings.hasNativeCSSProperties = !navigator.userAgent.match('AppleWebKit/601') && window.CSS && CSS.supports && CSS.supports('box-shadow', '0 0 0 var(--foo)');
settings.useNativeCSSProperties = settings.hasNativeCSSProperties && settings.lazyRegister && settings.useNativeCSSProperties;
settings.isIE = navigator.userAgent.match('Trident');
return settings;
}()
};(function () {
var userPolymer = window.Polymer;
window.Polymer = function (prototype) {
if (typeof prototype === 'function') {
prototype = prototype.prototype;
}
if (!prototype) {
prototype = {};
}
prototype = desugar(prototype);
var customCtor = prototype === prototype.constructor.prototype ? prototype.constructor : null;
var options = { prototype: prototype };
if (prototype.extends) {
options.extends = prototype.extends;
}
Polymer.telemetry._registrate(prototype);
var ctor = document.registerElement(prototype.is, options);
return customCtor || ctor;
};
var desugar = function (prototype) {
var base = Polymer.Base;
if (prototype.extends) {
base = Polymer.Base._getExtendedPrototype(prototype.extends);
}
prototype = Polymer.Base.chainObject(prototype, base);
prototype.registerCallback();
return prototype;
};
if (userPolymer) {
for (var i in userPolymer) {
Polymer[i] = userPolymer[i];
}
}
Polymer.Class = function (prototype) {
if (!prototype.factoryImpl) {
prototype.factoryImpl = function () {
};
}
return desugar(prototype).constructor;
};
}());
Polymer.telemetry = {
registrations: [],
_regLog: function (prototype) {
console.log('[' + prototype.is + ']: registered');
},
_registrate: function (prototype) {
this.registrations.push(prototype);
Polymer.log && this._regLog(prototype);
},
dumpRegistrations: function () {
this.registrations.forEach(this._regLog);
}
};Object.defineProperty(window, 'currentImport', {
enumerable: true,
configurable: true,
get: function () {
return (document._currentScript || document.currentScript || {}).ownerDocument;
}
});Polymer.RenderStatus = {
_ready: false,
_callbacks: [],
whenReady: function (cb) {
if (this._ready) {
cb();
} else {
this._callbacks.push(cb);
}
},
_makeReady: function () {
this._ready = true;
for (var i = 0; i < this._callbacks.length; i++) {
this._callbacks[i]();
}
this._callbacks = [];
},
_catchFirstRender: function () {
requestAnimationFrame(function () {
Polymer.RenderStatus._makeReady();
});
},
_afterNextRenderQueue: [],
_waitingNextRender: false,
afterNextRender: function (element, fn, args) {
this._watchNextRender();
this._afterNextRenderQueue.push([
element,
fn,
args
]);
},
hasRendered: function () {
return this._ready;
},
_watchNextRender: function () {
if (!this._waitingNextRender) {
this._waitingNextRender = true;
var fn = function () {
Polymer.RenderStatus._flushNextRender();
};
if (!this._ready) {
this.whenReady(fn);
} else {
requestAnimationFrame(fn);
}
}
},
_flushNextRender: function () {
var self = this;
setTimeout(function () {
self._flushRenderCallbacks(self._afterNextRenderQueue);
self._afterNextRenderQueue = [];
self._waitingNextRender = false;
});
},
_flushRenderCallbacks: function (callbacks) {
for (var i = 0, h; i < callbacks.length; i++) {
h = callbacks[i];
h[1].apply(h[0], h[2] || Polymer.nar);
}
}
};
if (window.HTMLImports) {
HTMLImports.whenReady(function () {
Polymer.RenderStatus._catchFirstRender();
});
} else {
Polymer.RenderStatus._catchFirstRender();
}
Polymer.ImportStatus = Polymer.RenderStatus;
Polymer.ImportStatus.whenLoaded = Polymer.ImportStatus.whenReady;(function () {
'use strict';
var settings = Polymer.Settings;
Polymer.Base = {
__isPolymerInstance__: true,
_addFeature: function (feature) {
this.mixin(this, feature);
},
registerCallback: function () {
if (settings.lazyRegister === 'max') {
if (this.beforeRegister) {
this.beforeRegister();
}
} else {
this._desugarBehaviors();
for (var i = 0, b; i < this.behaviors.length; i++) {
b = this.behaviors[i];
if (b.beforeRegister) {
b.beforeRegister.call(this);
}
}
if (this.beforeRegister) {
this.beforeRegister();
}
}
this._registerFeatures();
if (!settings.lazyRegister) {
this.ensureRegisterFinished();
}
},
createdCallback: function () {
if (settings.disableUpgradeEnabled) {
if (this.hasAttribute('disable-upgrade')) {
this._propertySetter = disableUpgradePropertySetter;
this._configValue = null;
this.__data__ = {};
return;
} else {
this.__hasInitialized = true;
}
}
this.__initialize();
},
__initialize: function () {
if (!this.__hasRegisterFinished) {
this._ensureRegisterFinished(this.__proto__);
}
Polymer.telemetry.instanceCount++;
this.root = this;
for (var i = 0, b; i < this.behaviors.length; i++) {
b = this.behaviors[i];
if (b.created) {
b.created.call(this);
}
}
if (this.created) {
this.created();
}
this._initFeatures();
},
ensureRegisterFinished: function () {
this._ensureRegisterFinished(this);
},
_ensureRegisterFinished: function (proto) {
if (proto.__hasRegisterFinished !== proto.is || !proto.is) {
if (settings.lazyRegister === 'max') {
proto._desugarBehaviors();
for (var i = 0, b; i < proto.behaviors.length; i++) {
b = proto.behaviors[i];
if (b.beforeRegister) {
b.beforeRegister.call(proto);
}
}
}
proto.__hasRegisterFinished = proto.is;
if (proto._finishRegisterFeatures) {
proto._finishRegisterFeatures();
}
for (var j = 0, pb; j < proto.behaviors.length; j++) {
pb = proto.behaviors[j];
if (pb.registered) {
pb.registered.call(proto);
}
}
if (proto.registered) {
proto.registered();
}
if (settings.usePolyfillProto && proto !== this) {
proto.extend(this, proto);
}
}
},
attachedCallback: function () {
var self = this;
Polymer.RenderStatus.whenReady(function () {
self.isAttached = true;
for (var i = 0, b; i < self.behaviors.length; i++) {
b = self.behaviors[i];
if (b.attached) {
b.attached.call(self);
}
}
if (self.attached) {
self.attached();
}
});
},
detachedCallback: function () {
var self = this;
Polymer.RenderStatus.whenReady(function () {
self.isAttached = false;
for (var i = 0, b; i < self.behaviors.length; i++) {
b = self.behaviors[i];
if (b.detached) {
b.detached.call(self);
}
}
if (self.detached) {
self.detached();
}
});
},
attributeChangedCallback: function (name, oldValue, newValue) {
this._attributeChangedImpl(name);
for (var i = 0, b; i < this.behaviors.length; i++) {
b = this.behaviors[i];
if (b.attributeChanged) {
b.attributeChanged.call(this, name, oldValue, newValue);
}
}
if (this.attributeChanged) {
this.attributeChanged(name, oldValue, newValue);
}
},
_attributeChangedImpl: function (name) {
this._setAttributeToProperty(this, name);
},
extend: function (target, source) {
if (target && source) {
var n$ = Object.getOwnPropertyNames(source);
for (var i = 0, n; i < n$.length && (n = n$[i]); i++) {
this.copyOwnProperty(n, source, target);
}
}
return target || source;
},
mixin: function (target, source) {
for (var i in source) {
target[i] = source[i];
}
return target;
},
copyOwnProperty: function (name, source, target) {
var pd = Object.getOwnPropertyDescriptor(source, name);
if (pd) {
Object.defineProperty(target, name, pd);
}
},
_logger: function (level, args) {
if (args.length === 1 && Array.isArray(args[0])) {
args = args[0];
}
switch (level) {
case 'log':
case 'warn':
case 'error':
console[level].apply(console, args);
break;
}
},
_log: function () {
var args = Array.prototype.slice.call(arguments, 0);
this._logger('log', args);
},
_warn: function () {
var args = Array.prototype.slice.call(arguments, 0);
this._logger('warn', args);
},
_error: function () {
var args = Array.prototype.slice.call(arguments, 0);
this._logger('error', args);
},
_logf: function () {
return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments, 0));
}
};
Polymer.Base._logPrefix = function () {
var color = window.chrome && !/edge/i.test(navigator.userAgent) || /firefox/i.test(navigator.userAgent);
return color ? [
'%c[%s::%s]:',
'font-weight: bold; background-color:#EEEE00;'
] : ['[%s::%s]:'];
}();
Polymer.Base.chainObject = function (object, inherited) {
if (object && inherited && object !== inherited) {
if (!Object.__proto__) {
object = Polymer.Base.extend(Object.create(inherited), object);
}
object.__proto__ = inherited;
}
return object;
};
Polymer.Base = Polymer.Base.chainObject(Polymer.Base, HTMLElement.prototype);
Polymer.BaseDescriptors = {};
var disableUpgradePropertySetter;
if (settings.disableUpgradeEnabled) {
disableUpgradePropertySetter = function (property, value) {
this.__data__[property] = value;
};
var origAttributeChangedCallback = Polymer.Base.attributeChangedCallback;
Polymer.Base.attributeChangedCallback = function (name, oldValue, newValue) {
if (!this.__hasInitialized && name === 'disable-upgrade') {
this.__hasInitialized = true;
this._propertySetter = Polymer.Bind._modelApi._propertySetter;
this._configValue = Polymer.Base._configValue;
this.__initialize();
}
origAttributeChangedCallback.call(this, name, oldValue, newValue);
};
}
if (window.CustomElements) {
Polymer.instanceof = CustomElements.instanceof;
} else {
Polymer.instanceof = function (obj, ctor) {
return obj instanceof ctor;
};
}
Polymer.isInstance = function (obj) {
return Boolean(obj && obj.__isPolymerInstance__);
};
Polymer.telemetry.instanceCount = 0;
}());(function () {
var modules = {};
var lcModules = {};
var findModule = function (id) {
return modules[id] || lcModules[id.toLowerCase()];
};
var DomModule = function () {
return document.createElement('dom-module');
};
DomModule.prototype = Object.create(HTMLElement.prototype);
Polymer.Base.mixin(DomModule.prototype, {
createdCallback: function () {
this.register();
},
register: function (id) {
id = id || this.id || this.getAttribute('name') || this.getAttribute('is');
if (id) {
this.id = id;
modules[id] = this;
lcModules[id.toLowerCase()] = this;
}
},
import: function (id, selector) {
if (id) {
var m = findModule(id);
if (!m) {
forceDomModulesUpgrade();
m = findModule(id);
}
if (m && selector) {
m = m.querySelector(selector);
}
return m;
}
}
});
Object.defineProperty(DomModule.prototype, 'constructor', {
value: DomModule,
configurable: true,
writable: true
});
var cePolyfill = window.CustomElements && !CustomElements.useNative;
document.registerElement('dom-module', DomModule);
function forceDomModulesUpgrade() {
if (cePolyfill) {
var script = document._currentScript || document.currentScript;
var doc = script && script.ownerDocument || document;
var modules = doc.querySelectorAll('dom-module');
for (var i = modules.length - 1, m; i >= 0 && (m = modules[i]); i--) {
if (m.__upgraded__) {
return;
} else {
CustomElements.upgrade(m);
}
}
}
}
}());Polymer.Base._addFeature({
_prepIs: function () {
if (!this.is) {
var module = (document._currentScript || document.currentScript).parentNode;
if (module.localName === 'dom-module') {
var id = module.id || module.getAttribute('name') || module.getAttribute('is');
this.is = id;
}
}
if (this.is) {
this.is = this.is.toLowerCase();
}
}
});Polymer.Base._addFeature({
behaviors: [],
_desugarBehaviors: function () {
if (this.behaviors.length) {
this.behaviors = this._desugarSomeBehaviors(this.behaviors);
}
},
_desugarSomeBehaviors: function (behaviors) {
var behaviorSet = [];
behaviors = this._flattenBehaviorsList(behaviors);
for (var i = behaviors.length - 1; i >= 0; i--) {
var b = behaviors[i];
if (behaviorSet.indexOf(b) === -1) {
this._mixinBehavior(b);
behaviorSet.unshift(b);
}
}
return behaviorSet;
},
_flattenBehaviorsList: function (behaviors) {
var flat = [];
for (var i = 0; i < behaviors.length; i++) {
var b = behaviors[i];
if (b instanceof Array) {
flat = flat.concat(this._flattenBehaviorsList(b));
} else if (b) {
flat.push(b);
} else {
this._warn(this._logf('_flattenBehaviorsList', 'behavior is null, check for missing or 404 import'));
}
}
return flat;
},
_mixinBehavior: function (b) {
var n$ = Object.getOwnPropertyNames(b);
var useAssignment = b._noAccessors;
for (var i = 0, n; i < n$.length && (n = n$[i]); i++) {
if (!Polymer.Base._behaviorProperties[n] && !this.hasOwnProperty(n)) {
if (useAssignment) {
this[n] = b[n];
} else {
this.copyOwnProperty(n, b, this);
}
}
}
},
_prepBehaviors: function () {
this._prepFlattenedBehaviors(this.behaviors);
},
_prepFlattenedBehaviors: function (behaviors) {
for (var i = 0, l = behaviors.length; i < l; i++) {
this._prepBehavior(behaviors[i]);
}
this._prepBehavior(this);
},
_marshalBehaviors: function () {
for (var i = 0; i < this.behaviors.length; i++) {
this._marshalBehavior(this.behaviors[i]);
}
this._marshalBehavior(this);
}
});
Polymer.Base._behaviorProperties = {
hostAttributes: true,
beforeRegister: true,
registered: true,
properties: true,
observers: true,
listeners: true,
created: true,
attached: true,
detached: true,
attributeChanged: true,
ready: true,
_noAccessors: true
};Polymer.Base._addFeature({
_getExtendedPrototype: function (tag) {
return this._getExtendedNativePrototype(tag);
},
_nativePrototypes: {},
_getExtendedNativePrototype: function (tag) {
var p = this._nativePrototypes[tag];
if (!p) {
p = Object.create(this.getNativePrototype(tag));
var p$ = Object.getOwnPropertyNames(Polymer.Base);
for (var i = 0, n; i < p$.length && (n = p$[i]); i++) {
if (!Polymer.BaseDescriptors[n]) {
p[n] = Polymer.Base[n];
}
}
Object.defineProperties(p, Polymer.BaseDescriptors);
this._nativePrototypes[tag] = p;
}
return p;
},
getNativePrototype: function (tag) {
return Object.getPrototypeOf(document.createElement(tag));
}
});Polymer.Base._addFeature({
_prepConstructor: function () {
this._factoryArgs = this.extends ? [
this.extends,
this.is
] : [this.is];
var ctor = function () {
return this._factory(arguments);
};
if (this.hasOwnProperty('extends')) {
ctor.extends = this.extends;
}
Object.defineProperty(this, 'constructor', {
value: ctor,
writable: true,
configurable: true
});
ctor.prototype = this;
},
_factory: function (args) {
var elt = document.createElement.apply(document, this._factoryArgs);
if (this.factoryImpl) {
this.factoryImpl.apply(elt, args);
}
return elt;
}
});Polymer.nob = Object.create(null);
Polymer.Base._addFeature({
getPropertyInfo: function (property) {
var info = this._getPropertyInfo(property, this.properties);
if (!info) {
for (var i = 0; i < this.behaviors.length; i++) {
info = this._getPropertyInfo(property, this.behaviors[i].properties);
if (info) {
return info;
}
}
}
return info || Polymer.nob;
},
_getPropertyInfo: function (property, properties) {
var p = properties && properties[property];
if (typeof p === 'function') {
p = properties[property] = { type: p };
}
if (p) {
p.defined = true;
}
return p;
},
_prepPropertyInfo: function () {
this._propertyInfo = {};
for (var i = 0; i < this.behaviors.length; i++) {
this._addPropertyInfo(this._propertyInfo, this.behaviors[i].properties);
}
this._addPropertyInfo(this._propertyInfo, this.properties);
this._addPropertyInfo(this._propertyInfo, this._propertyEffects);
},
_addPropertyInfo: function (target, source) {
if (source) {
var t, s;
for (var i in source) {
t = target[i];
s = source[i];
if (i[0] === '_' && !s.readOnly) {
continue;
}
if (!target[i]) {
target[i] = {
type: typeof s === 'function' ? s : s.type,
readOnly: s.readOnly,
attribute: Polymer.CaseMap.camelToDashCase(i)
};
} else {
if (!t.type) {
t.type = s.type;
}
if (!t.readOnly) {
t.readOnly = s.readOnly;
}
}
}
}
}
});
(function () {
var propertiesDesc = {
configurable: true,
writable: true,
enumerable: true,
value: {}
};
Polymer.BaseDescriptors.properties = propertiesDesc;
Object.defineProperty(Polymer.Base, 'properties', propertiesDesc);
}());Polymer.CaseMap = {
_caseMap: {},
_rx: {
dashToCamel: /-[a-z]/g,
camelToDash: /([A-Z])/g
},
dashToCamelCase: function (dash) {
return this._caseMap[dash] || (this._caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(this._rx.dashToCamel, function (m) {
return m[1].toUpperCase();
}));
},
camelToDashCase: function (camel) {
return this._caseMap[camel] || (this._caseMap[camel] = camel.replace(this._rx.camelToDash, '-$1').toLowerCase());
}
};Polymer.Base._addFeature({
_addHostAttributes: function (attributes) {
if (!this._aggregatedAttributes) {
this._aggregatedAttributes = {};
}
if (attributes) {
this.mixin(this._aggregatedAttributes, attributes);
}
},
_marshalHostAttributes: function () {
if (this._aggregatedAttributes) {
this._applyAttributes(this, this._aggregatedAttributes);
}
},
_applyAttributes: function (node, attr$) {
for (var n in attr$) {
if (!this.hasAttribute(n) && n !== 'class') {
var v = attr$[n];
this.serializeValueToAttribute(v, n, this);
}
}
},
_marshalAttributes: function () {
this._takeAttributesToModel(this);
},
_takeAttributesToModel: function (model) {
if (this.hasAttributes()) {
for (var i in this._propertyInfo) {
var info = this._propertyInfo[i];
if (this.hasAttribute(info.attribute)) {
this._setAttributeToProperty(model, info.attribute, i, info);
}
}
}
},
_setAttributeToProperty: function (model, attribute, property, info) {
if (!this._serializing) {
property = property || Polymer.CaseMap.dashToCamelCase(attribute);
info = info || this._propertyInfo && this._propertyInfo[property];
if (info && !info.readOnly) {
var v = this.getAttribute(attribute);
model[property] = this.deserialize(v, info.type);
}
}
},
_serializing: false,
reflectPropertyToAttribute: function (property, attribute, value) {
this._serializing = true;
value = value === undefined ? this[property] : value;
this.serializeValueToAttribute(value, attribute || Polymer.CaseMap.camelToDashCase(property));
this._serializing = false;
},
serializeValueToAttribute: function (value, attribute, node) {
var str = this.serialize(value);
node = node || this;
if (str === undefined) {
node.removeAttribute(attribute);
} else {
node.setAttribute(attribute, str);
}
},
deserialize: function (value, type) {
switch (type) {
case Number:
value = Number(value);
break;
case Boolean:
value = value != null;
break;
case Object:
try {
value = JSON.parse(value);
} catch (x) {
}
break;
case Array:
try {
value = JSON.parse(value);
} catch (x) {
value = null;
console.warn('Polymer::Attributes: couldn`t decode Array as JSON');
}
break;
case Date:
value = new Date(value);
break;
case String:
default:
break;
}
return value;
},
serialize: function (value) {
switch (typeof value) {
case 'boolean':
return value ? '' : undefined;
case 'object':
if (value instanceof Date) {
return value.toString();
} else if (value) {
try {
return JSON.stringify(value);
} catch (x) {
return '';
}
}
default:
return value != null ? value : undefined;
}
}
});Polymer.version = "1.9.1";Polymer.Base._addFeature({
_registerFeatures: function () {
this._prepIs();
this._prepBehaviors();
this._prepConstructor();
this._prepPropertyInfo();
},
_prepBehavior: function (b) {
this._addHostAttributes(b.hostAttributes);
},
_marshalBehavior: function (b) {
},
_initFeatures: function () {
this._marshalHostAttributes();
this._marshalBehaviors();
}
});</script>











<script>(function () {
function resolveCss(cssText, ownerDocument) {
return cssText.replace(CSS_URL_RX, function (m, pre, url, post) {
return pre + '\'' + resolve(url.replace(/["']/g, ''), ownerDocument) + '\'' + post;
});
}
function resolveAttrs(element, ownerDocument) {
for (var name in URL_ATTRS) {
var a$ = URL_ATTRS[name];
for (var i = 0, l = a$.length, a, at, v; i < l && (a = a$[i]); i++) {
if (name === '*' || element.localName === name) {
at = element.attributes[a];
v = at && at.value;
if (v && v.search(BINDING_RX) < 0) {
at.value = a === 'style' ? resolveCss(v, ownerDocument) : resolve(v, ownerDocument);
}
}
}
}
}
function resolve(url, ownerDocument) {
if (url && ABS_URL.test(url)) {
return url;
}
var resolver = getUrlResolver(ownerDocument);
resolver.href = url;
return resolver.href || url;
}
var tempDoc;
var tempDocBase;
function resolveUrl(url, baseUri) {
if (!tempDoc) {
tempDoc = document.implementation.createHTMLDocument('temp');
tempDocBase = tempDoc.createElement('base');
tempDoc.head.appendChild(tempDocBase);
}
tempDocBase.href = baseUri;
return resolve(url, tempDoc);
}
function getUrlResolver(ownerDocument) {
return ownerDocument.body.__urlResolver || (ownerDocument.body.__urlResolver = ownerDocument.createElement('a'));
}
function pathFromUrl(url) {
return url.substring(0, url.lastIndexOf('/') + 1);
}
var CSS_URL_RX = /(url\()([^)]*)(\))/g;
var URL_ATTRS = {
'*': [
'href',
'src',
'style',
'url'
],
form: ['action']
};
var ABS_URL = /(^\/)|(^#)|(^[\w-\d]*:)/;
var BINDING_RX = /\{\{|\[\[/;
Polymer.ResolveUrl = {
resolveCss: resolveCss,
resolveAttrs: resolveAttrs,
resolveUrl: resolveUrl,
pathFromUrl: pathFromUrl
};
Polymer.rootPath = Polymer.Settings.rootPath || pathFromUrl(document.baseURI || window.location.href);
}());Polymer.Base._addFeature({
_prepTemplate: function () {
var module;
if (this._template === undefined) {
module = Polymer.DomModule.import(this.is);
this._template = module && module.querySelector('template');
}
if (module) {
var assetPath = module.getAttribute('assetpath') || '';
var importURL = Polymer.ResolveUrl.resolveUrl(assetPath, module.ownerDocument.baseURI);
this._importPath = Polymer.ResolveUrl.pathFromUrl(importURL);
} else {
this._importPath = '';
}
if (this._template && this._template.hasAttribute('is')) {
this._warn(this._logf('_prepTemplate', 'top-level Polymer template ' + 'must not be a type-extension, found', this._template, 'Move inside simple <template>.'));
}
if (this._template && !this._template.content && window.HTMLTemplateElement && HTMLTemplateElement.decorate) {
HTMLTemplateElement.decorate(this._template);
}
},
_stampTemplate: function () {
if (this._template) {
this.root = this.instanceTemplate(this._template);
}
},
instanceTemplate: function (template) {
var dom = document.importNode(template._content || template.content, true);
return dom;
}
});(function () {
var baseAttachedCallback = Polymer.Base.attachedCallback;
Polymer.Base._addFeature({
_hostStack: [],
ready: function () {
},
_registerHost: function (host) {
this.dataHost = host = host || Polymer.Base._hostStack[Polymer.Base._hostStack.length - 1];
if (host && host._clients) {
host._clients.push(this);
}
this._clients = null;
this._clientsReadied = false;
},
_beginHosting: function () {
Polymer.Base._hostStack.push(this);
if (!this._clients) {
this._clients = [];
}
},
_endHosting: function () {
Polymer.Base._hostStack.pop();
},
_tryReady: function () {
this._readied = false;
if (this._canReady()) {
this._ready();
}
},
_canReady: function () {
return !this.dataHost || this.dataHost._clientsReadied;
},
_ready: function () {
this._beforeClientsReady();
if (this._template) {
this._setupRoot();
this._readyClients();
}
this._clientsReadied = true;
this._clients = null;
this._afterClientsReady();
this._readySelf();
},
_readyClients: function () {
this._beginDistribute();
var c$ = this._clients;
if (c$) {
for (var i = 0, l = c$.length, c; i < l && (c = c$[i]); i++) {
c._ready();
}
}
this._finishDistribute();
},
_readySelf: function () {
for (var i = 0, b; i < this.behaviors.length; i++) {
b = this.behaviors[i];
if (b.ready) {
b.ready.call(this);
}
}
if (this.ready) {
this.ready();
}
this._readied = true;
if (this._attachedPending) {
this._attachedPending = false;
this.attachedCallback();
}
},
_beforeClientsReady: function () {
},
_afterClientsReady: function () {
},
_beforeAttached: function () {
},
attachedCallback: function () {
if (this._readied) {
this._beforeAttached();
baseAttachedCallback.call(this);
} else {
this._attachedPending = true;
}
}
});
}());Polymer.ArraySplice = function () {
function newSplice(index, removed, addedCount) {
return {
index: index,
removed: removed,
addedCount: addedCount
};
}
var EDIT_LEAVE = 0;
var EDIT_UPDATE = 1;
var EDIT_ADD = 2;
var EDIT_DELETE = 3;
function ArraySplice() {
}
ArraySplice.prototype = {
calcEditDistances: function (current, currentStart, currentEnd, old, oldStart, oldEnd) {
var rowCount = oldEnd - oldStart + 1;
var columnCount = currentEnd - currentStart + 1;
var distances = new Array(rowCount);
for (var i = 0; i < rowCount; i++) {
distances[i] = new Array(columnCount);
distances[i][0] = i;
}
for (var j = 0; j < columnCount; j++)
distances[0][j] = j;
for (i = 1; i < rowCount; i++) {
for (j = 1; j < columnCount; j++) {
if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))
distances[i][j] = distances[i - 1][j - 1];
else {
var north = distances[i - 1][j] + 1;
var west = distances[i][j - 1] + 1;
distances[i][j] = north < west ? north : west;
}
}
}
return distances;
},
spliceOperationsFromEditDistances: function (distances) {
var i = distances.length - 1;
var j = distances[0].length - 1;
var current = distances[i][j];
var edits = [];
while (i > 0 || j > 0) {
if (i == 0) {
edits.push(EDIT_ADD);
j--;
continue;
}
if (j == 0) {
edits.push(EDIT_DELETE);
i--;
continue;
}
var northWest = distances[i - 1][j - 1];
var west = distances[i - 1][j];
var north = distances[i][j - 1];
var min;
if (west < north)
min = west < northWest ? west : northWest;
else
min = north < northWest ? north : northWest;
if (min == northWest) {
if (northWest == current) {
edits.push(EDIT_LEAVE);
} else {
edits.push(EDIT_UPDATE);
current = northWest;
}
i--;
j--;
} else if (min == west) {
edits.push(EDIT_DELETE);
i--;
current = west;
} else {
edits.push(EDIT_ADD);
j--;
current = north;
}
}
edits.reverse();
return edits;
},
calcSplices: function (current, currentStart, currentEnd, old, oldStart, oldEnd) {
var prefixCount = 0;
var suffixCount = 0;
var minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);
if (currentStart == 0 && oldStart == 0)
prefixCount = this.sharedPrefix(current, old, minLength);
if (currentEnd == current.length && oldEnd == old.length)
suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);
currentStart += prefixCount;
oldStart += prefixCount;
currentEnd -= suffixCount;
oldEnd -= suffixCount;
if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)
return [];
if (currentStart == currentEnd) {
var splice = newSplice(currentStart, [], 0);
while (oldStart < oldEnd)
splice.removed.push(old[oldStart++]);
return [splice];
} else if (oldStart == oldEnd)
return [newSplice(currentStart, [], currentEnd - currentStart)];
var ops = this.spliceOperationsFromEditDistances(this.calcEditDistances(current, currentStart, currentEnd, old, oldStart, oldEnd));
splice = undefined;
var splices = [];
var index = currentStart;
var oldIndex = oldStart;
for (var i = 0; i < ops.length; i++) {
switch (ops[i]) {
case EDIT_LEAVE:
if (splice) {
splices.push(splice);
splice = undefined;
}
index++;
oldIndex++;
break;
case EDIT_UPDATE:
if (!splice)
splice = newSplice(index, [], 0);
splice.addedCount++;
index++;
splice.removed.push(old[oldIndex]);
oldIndex++;
break;
case EDIT_ADD:
if (!splice)
splice = newSplice(index, [], 0);
splice.addedCount++;
index++;
break;
case EDIT_DELETE:
if (!splice)
splice = newSplice(index, [], 0);
splice.removed.push(old[oldIndex]);
oldIndex++;
break;
}
}
if (splice) {
splices.push(splice);
}
return splices;
},
sharedPrefix: function (current, old, searchLength) {
for (var i = 0; i < searchLength; i++)
if (!this.equals(current[i], old[i]))
return i;
return searchLength;
},
sharedSuffix: function (current, old, searchLength) {
var index1 = current.length;
var index2 = old.length;
var count = 0;
while (count < searchLength && this.equals(current[--index1], old[--index2]))
count++;
return count;
},
calculateSplices: function (current, previous) {
return this.calcSplices(current, 0, current.length, previous, 0, previous.length);
},
equals: function (currentValue, previousValue) {
return currentValue === previousValue;
}
};
return new ArraySplice();
}();Polymer.domInnerHTML = function () {
var escapeAttrRegExp = /[&\u00A0"]/g;
var escapeDataRegExp = /[&\u00A0<>]/g;
function escapeReplace(c) {
switch (c) {
case '&':
return '&amp;';
case '<':
return '&lt;';
case '>':
return '&gt;';
case '"':
return '&quot;';
case '\xA0':
return '&nbsp;';
}
}
function escapeAttr(s) {
return s.replace(escapeAttrRegExp, escapeReplace);
}
function escapeData(s) {
return s.replace(escapeDataRegExp, escapeReplace);
}
function makeSet(arr) {
var set = {};
for (var i = 0; i < arr.length; i++) {
set[arr[i]] = true;
}
return set;
}
var voidElements = makeSet([
'area',
'base',
'br',
'col',
'command',
'embed',
'hr',
'img',
'input',
'keygen',
'link',
'meta',
'param',
'source',
'track',
'wbr'
]);
var plaintextParents = makeSet([
'style',
'script',
'xmp',
'iframe',
'noembed',
'noframes',
'plaintext',
'noscript'
]);
function getOuterHTML(node, parentNode, composed) {
switch (node.nodeType) {
case Node.ELEMENT_NODE:
var tagName = node.localName;
var s = '<' + tagName;
var attrs = node.attributes;
for (var i = 0, attr; attr = attrs[i]; i++) {
s += ' ' + attr.name + '="' + escapeAttr(attr.value) + '"';
}
s += '>';
if (voidElements[tagName]) {
return s;
}
return s + getInnerHTML(node, composed) + '</' + tagName + '>';
case Node.TEXT_NODE:
var data = node.data;
if (parentNode && plaintextParents[parentNode.localName]) {
return data;
}
return escapeData(data);
case Node.COMMENT_NODE:
return '<!--' + node.data + '-- >';
default:
console.error(node);
throw new Error('not implemented');
}
}
function getInnerHTML(node, composed) {
if (node instanceof HTMLTemplateElement)
node = node.content;
var s = '';
var c$ = Polymer.dom(node).childNodes;
for (var i = 0, l = c$.length, child; i < l && (child = c$[i]); i++) {
s += getOuterHTML(child, node, composed);
}
return s;
}
return { getInnerHTML: getInnerHTML };
}();(function () {
'use strict';
var nativeInsertBefore = Element.prototype.insertBefore;
var nativeAppendChild = Element.prototype.appendChild;
var nativeRemoveChild = Element.prototype.removeChild;
Polymer.TreeApi = {
arrayCopyChildNodes: function (parent) {
var copy = [], i = 0;
for (var n = parent.firstChild; n; n = n.nextSibling) {
copy[i++] = n;
}
return copy;
},
arrayCopyChildren: function (parent) {
var copy = [], i = 0;
for (var n = parent.firstElementChild; n; n = n.nextElementSibling) {
copy[i++] = n;
}
return copy;
},
arrayCopy: function (a$) {
var l = a$.length;
var copy = new Array(l);
for (var i = 0; i < l; i++) {
copy[i] = a$[i];
}
return copy;
}
};
Polymer.TreeApi.Logical = {
hasParentNode: function (node) {
return Boolean(node.__dom && node.__dom.parentNode);
},
hasChildNodes: function (node) {
return Boolean(node.__dom && node.__dom.childNodes !== undefined);
},
getChildNodes: function (node) {
return this.hasChildNodes(node) ? this._getChildNodes(node) : node.childNodes;
},
_getChildNodes: function (node) {
if (!node.__dom.childNodes) {
node.__dom.childNodes = [];
for (var n = node.__dom.firstChild; n; n = n.__dom.nextSibling) {
node.__dom.childNodes.push(n);
}
}
return node.__dom.childNodes;
},
getParentNode: function (node) {
return node.__dom && node.__dom.parentNode !== undefined ? node.__dom.parentNode : node.parentNode;
},
getFirstChild: function (node) {
return node.__dom && node.__dom.firstChild !== undefined ? node.__dom.firstChild : node.firstChild;
},
getLastChild: function (node) {
return node.__dom && node.__dom.lastChild !== undefined ? node.__dom.lastChild : node.lastChild;
},
getNextSibling: function (node) {
return node.__dom && node.__dom.nextSibling !== undefined ? node.__dom.nextSibling : node.nextSibling;
},
getPreviousSibling: function (node) {
return node.__dom && node.__dom.previousSibling !== undefined ? node.__dom.previousSibling : node.previousSibling;
},
getFirstElementChild: function (node) {
return node.__dom && node.__dom.firstChild !== undefined ? this._getFirstElementChild(node) : node.firstElementChild;
},
_getFirstElementChild: function (node) {
var n = node.__dom.firstChild;
while (n && n.nodeType !== Node.ELEMENT_NODE) {
n = n.__dom.nextSibling;
}
return n;
},
getLastElementChild: function (node) {
return node.__dom && node.__dom.lastChild !== undefined ? this._getLastElementChild(node) : node.lastElementChild;
},
_getLastElementChild: function (node) {
var n = node.__dom.lastChild;
while (n && n.nodeType !== Node.ELEMENT_NODE) {
n = n.__dom.previousSibling;
}
return n;
},
getNextElementSibling: function (node) {
return node.__dom && node.__dom.nextSibling !== undefined ? this._getNextElementSibling(node) : node.nextElementSibling;
},
_getNextElementSibling: function (node) {
var n = node.__dom.nextSibling;
while (n && n.nodeType !== Node.ELEMENT_NODE) {
n = n.__dom.nextSibling;
}
return n;
},
getPreviousElementSibling: function (node) {
return node.__dom && node.__dom.previousSibling !== undefined ? this._getPreviousElementSibling(node) : node.previousElementSibling;
},
_getPreviousElementSibling: function (node) {
var n = node.__dom.previousSibling;
while (n && n.nodeType !== Node.ELEMENT_NODE) {
n = n.__dom.previousSibling;
}
return n;
},
saveChildNodes: function (node) {
if (!this.hasChildNodes(node)) {
node.__dom = node.__dom || {};
node.__dom.firstChild = node.firstChild;
node.__dom.lastChild = node.lastChild;
node.__dom.childNodes = [];
for (var n = node.firstChild; n; n = n.nextSibling) {
n.__dom = n.__dom || {};
n.__dom.parentNode = node;
node.__dom.childNodes.push(n);
n.__dom.nextSibling = n.nextSibling;
n.__dom.previousSibling = n.previousSibling;
}
}
},
recordInsertBefore: function (node, container, ref_node) {
container.__dom.childNodes = null;
if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
for (var n = node.firstChild; n; n = n.nextSibling) {
this._linkNode(n, container, ref_node);
}
} else {
this._linkNode(node, container, ref_node);
}
},
_linkNode: function (node, container, ref_node) {
node.__dom = node.__dom || {};
container.__dom = container.__dom || {};
if (ref_node) {
ref_node.__dom = ref_node.__dom || {};
}
node.__dom.previousSibling = ref_node ? ref_node.__dom.previousSibling : container.__dom.lastChild;
if (node.__dom.previousSibling) {
node.__dom.previousSibling.__dom.nextSibling = node;
}
node.__dom.nextSibling = ref_node || null;
if (node.__dom.nextSibling) {
node.__dom.nextSibling.__dom.previousSibling = node;
}
node.__dom.parentNode = container;
if (ref_node) {
if (ref_node === container.__dom.firstChild) {
container.__dom.firstChild = node;
}
} else {
container.__dom.lastChild = node;
if (!container.__dom.firstChild) {
container.__dom.firstChild = node;
}
}
container.__dom.childNodes = null;
},
recordRemoveChild: function (node, container) {
node.__dom = node.__dom || {};
container.__dom = container.__dom || {};
if (node === container.__dom.firstChild) {
container.__dom.firstChild = node.__dom.nextSibling;
}
if (node === container.__dom.lastChild) {
container.__dom.lastChild = node.__dom.previousSibling;
}
var p = node.__dom.previousSibling;
var n = node.__dom.nextSibling;
if (p) {
p.__dom.nextSibling = n;
}
if (n) {
n.__dom.previousSibling = p;
}
node.__dom.parentNode = node.__dom.previousSibling = node.__dom.nextSibling = undefined;
container.__dom.childNodes = null;
}
};
Polymer.TreeApi.Composed = {
getChildNodes: function (node) {
return Polymer.TreeApi.arrayCopyChildNodes(node);
},
getParentNode: function (node) {
return node.parentNode;
},
clearChildNodes: function (node) {
node.textContent = '';
},
insertBefore: function (parentNode, newChild, refChild) {
return nativeInsertBefore.call(parentNode, newChild, refChild || null);
},
appendChild: function (parentNode, newChild) {
return nativeAppendChild.call(parentNode, newChild);
},
removeChild: function (parentNode, node) {
return nativeRemoveChild.call(parentNode, node);
}
};
}());Polymer.DomApi = function () {
'use strict';
var Settings = Polymer.Settings;
var TreeApi = Polymer.TreeApi;
var DomApi = function (node) {
this.node = needsToWrap ? DomApi.wrap(node) : node;
};
var needsToWrap = Settings.hasShadow && !Settings.nativeShadow;
DomApi.wrap = window.wrap ? window.wrap : function (node) {
return node;
};
DomApi.prototype = {
flush: function () {
Polymer.dom.flush();
},
deepContains: function (node) {
if (this.node.contains(node)) {
return true;
}
var n = node;
var doc = node.ownerDocument;
while (n && n !== doc && n !== this.node) {
n = Polymer.dom(n).parentNode || n.host;
}
return n === this.node;
},
queryDistributedElements: function (selector) {
var c$ = this.getEffectiveChildNodes();
var list = [];
for (var i = 0, l = c$.length, c; i < l && (c = c$[i]); i++) {
if (c.nodeType === Node.ELEMENT_NODE && DomApi.matchesSelector.call(c, selector)) {
list.push(c);
}
}
return list;
},
getEffectiveChildNodes: function () {
var list = [];
var c$ = this.childNodes;
for (var i = 0, l = c$.length, c; i < l && (c = c$[i]); i++) {
if (c.localName === CONTENT) {
var d$ = dom(c).getDistributedNodes();
for (var j = 0; j < d$.length; j++) {
list.push(d$[j]);
}
} else {
list.push(c);
}
}
return list;
},
observeNodes: function (callback) {
if (callback) {
if (!this.observer) {
this.observer = this.node.localName === CONTENT ? new DomApi.DistributedNodesObserver(this) : new DomApi.EffectiveNodesObserver(this);
}
return this.observer.addListener(callback);
}
},
unobserveNodes: function (handle) {
if (this.observer) {
this.observer.removeListener(handle);
}
},
notifyObserver: function () {
if (this.observer) {
this.observer.notify();
}
},
_query: function (matcher, node, halter) {
node = node || this.node;
var list = [];
this._queryElements(TreeApi.Logical.getChildNodes(node), matcher, halter, list);
return list;
},
_queryElements: function (elements, matcher, halter, list) {
for (var i = 0, l = elements.length, c; i < l && (c = elements[i]); i++) {
if (c.nodeType === Node.ELEMENT_NODE) {
if (this._queryElement(c, matcher, halter, list)) {
return true;
}
}
}
},
_queryElement: function (node, matcher, halter, list) {
var result = matcher(node);
if (result) {
list.push(node);
}
if (halter && halter(result)) {
return result;
}
this._queryElements(TreeApi.Logical.getChildNodes(node), matcher, halter, list);
}
};
var CONTENT = DomApi.CONTENT = 'content';
var dom = DomApi.factory = function (node) {
node = node || document;
if (!node.__domApi) {
node.__domApi = new DomApi.ctor(node);
}
return node.__domApi;
};
DomApi.hasApi = function (node) {
return Boolean(node.__domApi);
};
DomApi.ctor = DomApi;
Polymer.dom = function (obj, patch) {
if (obj instanceof Event) {
return Polymer.EventApi.factory(obj);
} else {
return DomApi.factory(obj, patch);
}
};
var p = Element.prototype;
DomApi.matchesSelector = p.matches || p.matchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector || p.webkitMatchesSelector;
return DomApi;
}();(function () {
'use strict';
var Settings = Polymer.Settings;
var DomApi = Polymer.DomApi;
var dom = DomApi.factory;
var TreeApi = Polymer.TreeApi;
var getInnerHTML = Polymer.domInnerHTML.getInnerHTML;
var CONTENT = DomApi.CONTENT;
if (Settings.useShadow) {
return;
}
var nativeCloneNode = Element.prototype.cloneNode;
var nativeImportNode = Document.prototype.importNode;
Polymer.Base.mixin(DomApi.prototype, {
_lazyDistribute: function (host) {
if (host.shadyRoot && host.shadyRoot._distributionClean) {
host.shadyRoot._distributionClean = false;
Polymer.dom.addDebouncer(host.debounce('_distribute', host._distributeContent));
}
},
appendChild: function (node) {
return this.insertBefore(node);
},
insertBefore: function (node, ref_node) {
if (ref_node && TreeApi.Logical.getParentNode(ref_node) !== this.node) {
throw Error('The ref_node to be inserted before is not a child ' + 'of this node');
}
if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {
var parent = TreeApi.Logical.getParentNode(node);
if (parent) {
if (DomApi.hasApi(parent)) {
dom(parent).notifyObserver();
}
this._removeNode(node);
} else {
this._removeOwnerShadyRoot(node);
}
}
if (!this._addNode(node, ref_node)) {
if (ref_node) {
ref_node = ref_node.localName === CONTENT ? this._firstComposedNode(ref_node) : ref_node;
}
var container = this.node._isShadyRoot ? this.node.host : this.node;
if (ref_node) {
TreeApi.Composed.insertBefore(container, node, ref_node);
} else {
TreeApi.Composed.appendChild(container, node);
}
}
this.notifyObserver();
return node;
},
_addNode: function (node, ref_node) {
var root = this.getOwnerRoot();
if (root) {
var ipAdded = this._maybeAddInsertionPoint(node, this.node);
if (!root._invalidInsertionPoints) {
root._invalidInsertionPoints = ipAdded;
}
this._addNodeToHost(root.host, node);
}
if (TreeApi.Logical.hasChildNodes(this.node)) {
TreeApi.Logical.recordInsertBefore(node, this.node, ref_node);
}
var handled = this._maybeDistribute(node) || this.node.shadyRoot;
if (handled) {
if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
while (node.firstChild) {
TreeApi.Composed.removeChild(node, node.firstChild);
}
} else {
var parent = TreeApi.Composed.getParentNode(node);
if (parent) {
TreeApi.Composed.removeChild(parent, node);
}
}
}
return handled;
},
removeChild: function (node) {
if (TreeApi.Logical.getParentNode(node) !== this.node) {
throw Error('The node to be removed is not a child of this node: ' + node);
}
if (!this._removeNode(node)) {
var container = this.node._isShadyRoot ? this.node.host : this.node;
var parent = TreeApi.Composed.getParentNode(node);
if (container === parent) {
TreeApi.Composed.removeChild(container, node);
}
}
this.notifyObserver();
return node;
},
_removeNode: function (node) {
var logicalParent = TreeApi.Logical.hasParentNode(node) && TreeApi.Logical.getParentNode(node);
var distributed;
var root = this._ownerShadyRootForNode(node);
if (logicalParent) {
distributed = dom(node)._maybeDistributeParent();
TreeApi.Logical.recordRemoveChild(node, logicalParent);
if (root && this._removeDistributedChildren(root, node)) {
root._invalidInsertionPoints = true;
this._lazyDistribute(root.host);
}
}
this._removeOwnerShadyRoot(node);
if (root) {
this._removeNodeFromHost(root.host, node);
}
return distributed;
},
replaceChild: function (node, ref_node) {
this.insertBefore(node, ref_node);
this.removeChild(ref_node);
return node;
},
_hasCachedOwnerRoot: function (node) {
return Boolean(node._ownerShadyRoot !== undefined);
},
getOwnerRoot: function () {
return this._ownerShadyRootForNode(this.node);
},
_ownerShadyRootForNode: function (node) {
if (!node) {
return;
}
var root = node._ownerShadyRoot;
if (root === undefined) {
if (node._isShadyRoot) {
root = node;
} else {
var parent = TreeApi.Logical.getParentNode(node);
if (parent) {
root = parent._isShadyRoot ? parent : this._ownerShadyRootForNode(parent);
} else {
root = null;
}
}
if (root || document.documentElement.contains(node)) {
node._ownerShadyRoot = root;
}
}
return root;
},
_maybeDistribute: function (node) {
var fragContent = node.nodeType === Node.DOCUMENT_FRAGMENT_NODE && !node.__noContent && dom(node).querySelector(CONTENT);
var wrappedContent = fragContent && TreeApi.Logical.getParentNode(fragContent).nodeType !== Node.DOCUMENT_FRAGMENT_NODE;
var hasContent = fragContent || node.localName === CONTENT;
if (hasContent) {
var root = this.getOwnerRoot();
if (root) {
this._lazyDistribute(root.host);
}
}
var needsDist = this._nodeNeedsDistribution(this.node);
if (needsDist) {
this._lazyDistribute(this.node);
}
return needsDist || hasContent && !wrappedContent;
},
_maybeAddInsertionPoint: function (node, parent) {
var added;
if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE && !node.__noContent) {
var c$ = dom(node).querySelectorAll(CONTENT);
for (var i = 0, n, np, na; i < c$.length && (n = c$[i]); i++) {
np = TreeApi.Logical.getParentNode(n);
if (np === node) {
np = parent;
}
na = this._maybeAddInsertionPoint(n, np);
added = added || na;
}
} else if (node.localName === CONTENT) {
TreeApi.Logical.saveChildNodes(parent);
TreeApi.Logical.saveChildNodes(node);
added = true;
}
return added;
},
_updateInsertionPoints: function (host) {
var i$ = host.shadyRoot._insertionPoints = dom(host.shadyRoot).querySelectorAll(CONTENT);
for (var i = 0, c; i < i$.length; i++) {
c = i$[i];
TreeApi.Logical.saveChildNodes(c);
TreeApi.Logical.saveChildNodes(TreeApi.Logical.getParentNode(c));
}
},
_nodeNeedsDistribution: function (node) {
return node && node.shadyRoot && DomApi.hasInsertionPoint(node.shadyRoot);
},
_addNodeToHost: function (host, node) {
if (host._elementAdd) {
host._elementAdd(node);
}
},
_removeNodeFromHost: function (host, node) {
if (host._elementRemove) {
host._elementRemove(node);
}
},
_removeDistributedChildren: function (root, container) {
var hostNeedsDist;
var ip$ = root._insertionPoints;
for (var i = 0; i < ip$.length; i++) {
var content = ip$[i];
if (this._contains(container, content)) {
var dc$ = dom(content).getDistributedNodes();
for (var j = 0; j < dc$.length; j++) {
hostNeedsDist = true;
var node = dc$[j];
var parent = TreeApi.Composed.getParentNode(node);
if (parent) {
TreeApi.Composed.removeChild(parent, node);
}
}
}
}
return hostNeedsDist;
},
_contains: function (container, node) {
while (node) {
if (node == container) {
return true;
}
node = TreeApi.Logical.getParentNode(node);
}
},
_removeOwnerShadyRoot: function (node) {
if (this._hasCachedOwnerRoot(node)) {
var c$ = TreeApi.Logical.getChildNodes(node);
for (var i = 0, l = c$.length, n; i < l && (n = c$[i]); i++) {
this._removeOwnerShadyRoot(n);
}
}
node._ownerShadyRoot = undefined;
},
_firstComposedNode: function (content) {
var n$ = dom(content).getDistributedNodes();
for (var i = 0, l = n$.length, n, p$; i < l && (n = n$[i]); i++) {
p$ = dom(n).getDestinationInsertionPoints();
if (p$[p$.length - 1] === content) {
return n;
}
}
},
querySelector: function (selector) {
var result = this._query(function (n) {
return DomApi.matchesSelector.call(n, selector);
}, this.node, function (n) {
return Boolean(n);
})[0];
return result || null;
},
querySelectorAll: function (selector) {
return this._query(function (n) {
return DomApi.matchesSelector.call(n, selector);
}, this.node);
},
getDestinationInsertionPoints: function () {
return this.node._destinationInsertionPoints || [];
},
getDistributedNodes: function () {
return this.node._distributedNodes || [];
},
_clear: function () {
while (this.childNodes.length) {
this.removeChild(this.childNodes[0]);
}
},
setAttribute: function (name, value) {
this.node.setAttribute(name, value);
this._maybeDistributeParent();
},
removeAttribute: function (name) {
this.node.removeAttribute(name);
this._maybeDistributeParent();
},
_maybeDistributeParent: function () {
if (this._nodeNeedsDistribution(this.parentNode)) {
this._lazyDistribute(this.parentNode);
return true;
}
},
cloneNode: function (deep) {
var n = nativeCloneNode.call(this.node, false);
if (deep) {
var c$ = this.childNodes;
var d = dom(n);
for (var i = 0, nc; i < c$.length; i++) {
nc = dom(c$[i]).cloneNode(true);
d.appendChild(nc);
}
}
return n;
},
importNode: function (externalNode, deep) {
var doc = this.node instanceof Document ? this.node : this.node.ownerDocument;
var n = nativeImportNode.call(doc, externalNode, false);
if (deep) {
var c$ = TreeApi.Logical.getChildNodes(externalNode);
var d = dom(n);
for (var i = 0, nc; i < c$.length; i++) {
nc = dom(doc).importNode(c$[i], true);
d.appendChild(nc);
}
}
return n;
},
_getComposedInnerHTML: function () {
return getInnerHTML(this.node, true);
}
});
Object.defineProperties(DomApi.prototype, {
activeElement: {
get: function () {
var active = document.activeElement;
if (!active) {
return null;
}
var isShadyRoot = !!this.node._isShadyRoot;
if (this.node !== document) {
if (!isShadyRoot) {
return null;
}
if (this.node.host === active || !this.node.host.contains(active)) {
return null;
}
}
var activeRoot = dom(active).getOwnerRoot();
while (activeRoot && activeRoot !== this.node) {
active = activeRoot.host;
activeRoot = dom(active).getOwnerRoot();
}
if (this.node === document) {
return activeRoot ? null : active;
} else {
return activeRoot === this.node ? active : null;
}
},
configurable: true
},
childNodes: {
get: function () {
var c$ = TreeApi.Logical.getChildNodes(this.node);
return Array.isArray(c$) ? c$ : TreeApi.arrayCopyChildNodes(this.node);
},
configurable: true
},
children: {
get: function () {
if (TreeApi.Logical.hasChildNodes(this.node)) {
return Array.prototype.filter.call(this.childNodes, function (n) {
return n.nodeType === Node.ELEMENT_NODE;
});
} else {
return TreeApi.arrayCopyChildren(this.node);
}
},
configurable: true
},
parentNode: {
get: function () {
return TreeApi.Logical.getParentNode(this.node);
},
configurable: true
},
firstChild: {
get: function () {
return TreeApi.Logical.getFirstChild(this.node);
},
configurable: true
},
lastChild: {
get: function () {
return TreeApi.Logical.getLastChild(this.node);
},
configurable: true
},
nextSibling: {
get: function () {
return TreeApi.Logical.getNextSibling(this.node);
},
configurable: true
},
previousSibling: {
get: function () {
return TreeApi.Logical.getPreviousSibling(this.node);
},
configurable: true
},
firstElementChild: {
get: function () {
return TreeApi.Logical.getFirstElementChild(this.node);
},
configurable: true
},
lastElementChild: {
get: function () {
return TreeApi.Logical.getLastElementChild(this.node);
},
configurable: true
},
nextElementSibling: {
get: function () {
return TreeApi.Logical.getNextElementSibling(this.node);
},
configurable: true
},
previousElementSibling: {
get: function () {
return TreeApi.Logical.getPreviousElementSibling(this.node);
},
configurable: true
},
textContent: {
get: function () {
var nt = this.node.nodeType;
if (nt === Node.TEXT_NODE || nt === Node.COMMENT_NODE) {
return this.node.textContent;
} else {
var tc = [];
for (var i = 0, cn = this.childNodes, c; c = cn[i]; i++) {
if (c.nodeType !== Node.COMMENT_NODE) {
tc.push(c.textContent);
}
}
return tc.join('');
}
},
set: function (text) {
var nt = this.node.nodeType;
if (nt === Node.TEXT_NODE || nt === Node.COMMENT_NODE) {
this.node.textContent = text;
} else {
this._clear();
if (text) {
this.appendChild(document.createTextNode(text));
}
}
},
configurable: true
},
innerHTML: {
get: function () {
var nt = this.node.nodeType;
if (nt === Node.TEXT_NODE || nt === Node.COMMENT_NODE) {
return null;
} else {
return getInnerHTML(this.node);
}
},
set: function (text) {
var nt = this.node.nodeType;
if (nt !== Node.TEXT_NODE || nt !== Node.COMMENT_NODE) {
this._clear();
var d = document.createElement('div');
d.innerHTML = text;
var c$ = TreeApi.arrayCopyChildNodes(d);
for (var i = 0; i < c$.length; i++) {
this.appendChild(c$[i]);
}
}
},
configurable: true
}
});
DomApi.hasInsertionPoint = function (root) {
return Boolean(root && root._insertionPoints.length);
};
}());(function () {
'use strict';
var Settings = Polymer.Settings;
var TreeApi = Polymer.TreeApi;
var DomApi = Polymer.DomApi;
if (!Settings.useShadow) {
return;
}
Polymer.Base.mixin(DomApi.prototype, {
querySelectorAll: function (selector) {
return TreeApi.arrayCopy(this.node.querySelectorAll(selector));
},
getOwnerRoot: function () {
var n = this.node;
while (n) {
if (n.nodeType === Node.DOCUMENT_FRAGMENT_NODE && n.host) {
return n;
}
n = n.parentNode;
}
},
importNode: function (externalNode, deep) {
var doc = this.node instanceof Document ? this.node : this.node.ownerDocument;
return doc.importNode(externalNode, deep);
},
getDestinationInsertionPoints: function () {
var n$ = this.node.getDestinationInsertionPoints && this.node.getDestinationInsertionPoints();
return n$ ? TreeApi.arrayCopy(n$) : [];
},
getDistributedNodes: function () {
var n$ = this.node.getDistributedNodes && this.node.getDistributedNodes();
return n$ ? TreeApi.arrayCopy(n$) : [];
}
});
Object.defineProperties(DomApi.prototype, {
activeElement: {
get: function () {
var node = DomApi.wrap(this.node);
var activeElement = node.activeElement;
return node.contains(activeElement) ? activeElement : null;
},
configurable: true
},
childNodes: {
get: function () {
return TreeApi.arrayCopyChildNodes(this.node);
},
configurable: true
},
children: {
get: function () {
return TreeApi.arrayCopyChildren(this.node);
},
configurable: true
},
textContent: {
get: function () {
return this.node.textContent;
},
set: function (value) {
return this.node.textContent = value;
},
configurable: true
},
innerHTML: {
get: function () {
return this.node.innerHTML;
},
set: function (value) {
return this.node.innerHTML = value;
},
configurable: true
}
});
var forwardMethods = function (m$) {
for (var i = 0; i < m$.length; i++) {
forwardMethod(m$[i]);
}
};
var forwardMethod = function (method) {
DomApi.prototype[method] = function () {
return this.node[method].apply(this.node, arguments);
};
};
forwardMethods([
'cloneNode',
'appendChild',
'insertBefore',
'removeChild',
'replaceChild',
'setAttribute',
'removeAttribute',
'querySelector'
]);
var forwardProperties = function (f$) {
for (var i = 0; i < f$.length; i++) {
forwardProperty(f$[i]);
}
};
var forwardProperty = function (name) {
Object.defineProperty(DomApi.prototype, name, {
get: function () {
return this.node[name];
},
configurable: true
});
};
forwardProperties([
'parentNode',
'firstChild',
'lastChild',
'nextSibling',
'previousSibling',
'firstElementChild',
'lastElementChild',
'nextElementSibling',
'previousElementSibling'
]);
}());Polymer.Base.mixin(Polymer.dom, {
_flushGuard: 0,
_FLUSH_MAX: 100,
_needsTakeRecords: !Polymer.Settings.useNativeCustomElements,
_debouncers: [],
_staticFlushList: [],
_finishDebouncer: null,
flush: function () {
this._flushGuard = 0;
this._prepareFlush();
while (this._debouncers.length && this._flushGuard < this._FLUSH_MAX) {
while (this._debouncers.length) {
this._debouncers.shift().complete();
}
if (this._finishDebouncer) {
this._finishDebouncer.complete();
}
this._prepareFlush();
this._flushGuard++;
}
if (this._flushGuard >= this._FLUSH_MAX) {
console.warn('Polymer.dom.flush aborted. Flush may not be complete.');
}
},
_prepareFlush: function () {
if (this._needsTakeRecords) {
CustomElements.takeRecords();
}
for (var i = 0; i < this._staticFlushList.length; i++) {
this._staticFlushList[i]();
}
},
addStaticFlush: function (fn) {
this._staticFlushList.push(fn);
},
removeStaticFlush: function (fn) {
var i = this._staticFlushList.indexOf(fn);
if (i >= 0) {
this._staticFlushList.splice(i, 1);
}
},
addDebouncer: function (debouncer) {
this._debouncers.push(debouncer);
this._finishDebouncer = Polymer.Debounce(this._finishDebouncer, this._finishFlush);
},
_finishFlush: function () {
Polymer.dom._debouncers = [];
}
});Polymer.EventApi = function () {
'use strict';
var DomApi = Polymer.DomApi.ctor;
var Settings = Polymer.Settings;
DomApi.Event = function (event) {
this.event = event;
};
if (Settings.useShadow) {
DomApi.Event.prototype = {
get rootTarget() {
return this.event.path[0];
},
get localTarget() {
return this.event.target;
},
get path() {
var path = this.event.path;
if (!Array.isArray(path)) {
path = Array.prototype.slice.call(path);
}
return path;
}
};
} else {
DomApi.Event.prototype = {
get rootTarget() {
return this.event.target;
},
get localTarget() {
var current = this.event.currentTarget;
var currentRoot = current && Polymer.dom(current).getOwnerRoot();
var p$ = this.path;
for (var i = 0; i < p$.length; i++) {
if (Polymer.dom(p$[i]).getOwnerRoot() === currentRoot) {
return p$[i];
}
}
},
get path() {
if (!this.event._path) {
var path = [];
var current = this.rootTarget;
while (current) {
path.push(current);
var insertionPoints = Polymer.dom(current).getDestinationInsertionPoints();
if (insertionPoints.length) {
for (var i = 0; i < insertionPoints.length - 1; i++) {
path.push(insertionPoints[i]);
}
current = insertionPoints[insertionPoints.length - 1];
} else {
current = Polymer.dom(current).parentNode || current.host;
}
}
path.push(window);
this.event._path = path;
}
return this.event._path;
}
};
}
var factory = function (event) {
if (!event.__eventApi) {
event.__eventApi = new DomApi.Event(event);
}
return event.__eventApi;
};
return { factory: factory };
}();(function () {
'use strict';
var DomApi = Polymer.DomApi.ctor;
var useShadow = Polymer.Settings.useShadow;
Object.defineProperty(DomApi.prototype, 'classList', {
get: function () {
if (!this._classList) {
this._classList = new DomApi.ClassList(this);
}
return this._classList;
},
configurable: true
});
DomApi.ClassList = function (host) {
this.domApi = host;
this.node = host.node;
};
DomApi.ClassList.prototype = {
add: function () {
this.node.classList.add.apply(this.node.classList, arguments);
this._distributeParent();
},
remove: function () {
this.node.classList.remove.apply(this.node.classList, arguments);
this._distributeParent();
},
toggle: function () {
this.node.classList.toggle.apply(this.node.classList, arguments);
this._distributeParent();
},
_distributeParent: function () {
if (!useShadow) {
this.domApi._maybeDistributeParent();
}
},
contains: function () {
return this.node.classList.contains.apply(this.node.classList, arguments);
}
};
}());(function () {
'use strict';
var DomApi = Polymer.DomApi.ctor;
var Settings = Polymer.Settings;
DomApi.EffectiveNodesObserver = function (domApi) {
this.domApi = domApi;
this.node = this.domApi.node;
this._listeners = [];
};
DomApi.EffectiveNodesObserver.prototype = {
addListener: function (callback) {
if (!this._isSetup) {
this._setup();
this._isSetup = true;
}
var listener = {
fn: callback,
_nodes: []
};
this._listeners.push(listener);
this._scheduleNotify();
return listener;
},
removeListener: function (handle) {
var i = this._listeners.indexOf(handle);
if (i >= 0) {
this._listeners.splice(i, 1);
handle._nodes = [];
}
if (!this._hasListeners()) {
this._cleanup();
this._isSetup = false;
}
},
_setup: function () {
this._observeContentElements(this.domApi.childNodes);
},
_cleanup: function () {
this._unobserveContentElements(this.domApi.childNodes);
},
_hasListeners: function () {
return Boolean(this._listeners.length);
},
_scheduleNotify: function () {
if (this._debouncer) {
this._debouncer.stop();
}
this._debouncer = Polymer.Debounce(this._debouncer, this._notify);
this._debouncer.context = this;
Polymer.dom.addDebouncer(this._debouncer);
},
notify: function () {
if (this._hasListeners()) {
this._scheduleNotify();
}
},
_notify: function () {
this._beforeCallListeners();
this._callListeners();
},
_beforeCallListeners: function () {
this._updateContentElements();
},
_updateContentElements: function () {
this._observeContentElements(this.domApi.childNodes);
},
_observeContentElements: function (elements) {
for (var i = 0, n; i < elements.length && (n = elements[i]); i++) {
if (this._isContent(n)) {
n.__observeNodesMap = n.__observeNodesMap || new WeakMap();
if (!n.__observeNodesMap.has(this)) {
n.__observeNodesMap.set(this, this._observeContent(n));
}
}
}
},
_observeContent: function (content) {
var self = this;
var h = Polymer.dom(content).observeNodes(function () {
self._scheduleNotify();
});
h._avoidChangeCalculation = true;
return h;
},
_unobserveContentElements: function (elements) {
for (var i = 0, n, h; i < elements.length && (n = elements[i]); i++) {
if (this._isContent(n)) {
h = n.__observeNodesMap.get(this);
if (h) {
Polymer.dom(n).unobserveNodes(h);
n.__observeNodesMap.delete(this);
}
}
}
},
_isContent: function (node) {
return node.localName === 'content';
},
_callListeners: function () {
var o$ = this._listeners;
var nodes = this._getEffectiveNodes();
for (var i = 0, o; i < o$.length && (o = o$[i]); i++) {
var info = this._generateListenerInfo(o, nodes);
if (info || o._alwaysNotify) {
this._callListener(o, info);
}
}
},
_getEffectiveNodes: function () {
return this.domApi.getEffectiveChildNodes();
},
_generateListenerInfo: function (listener, newNodes) {
if (listener._avoidChangeCalculation) {
return true;
}
var oldNodes = listener._nodes;
var info = {
target: this.node,
addedNodes: [],
removedNodes: []
};
var splices = Polymer.ArraySplice.calculateSplices(newNodes, oldNodes);
for (var i = 0, s; i < splices.length && (s = splices[i]); i++) {
for (var j = 0, n; j < s.removed.length && (n = s.removed[j]); j++) {
info.removedNodes.push(n);
}
}
for (i = 0, s; i < splices.length && (s = splices[i]); i++) {
for (j = s.index; j < s.index + s.addedCount; j++) {
info.addedNodes.push(newNodes[j]);
}
}
listener._nodes = newNodes;
if (info.addedNodes.length || info.removedNodes.length) {
return info;
}
},
_callListener: function (listener, info) {
return listener.fn.call(this.node, info);
},
enableShadowAttributeTracking: function () {
}
};
if (Settings.useShadow) {
var baseSetup = DomApi.EffectiveNodesObserver.prototype._setup;
var baseCleanup = DomApi.EffectiveNodesObserver.prototype._cleanup;
Polymer.Base.mixin(DomApi.EffectiveNodesObserver.prototype, {
_setup: function () {
if (!this._observer) {
var self = this;
this._mutationHandler = function (mxns) {
if (mxns && mxns.length) {
self._scheduleNotify();
}
};
this._observer = new MutationObserver(this._mutationHandler);
this._boundFlush = function () {
self._flush();
};
Polymer.dom.addStaticFlush(this._boundFlush);
this._observer.observe(this.node, { childList: true });
}
baseSetup.call(this);
},
_cleanup: function () {
this._observer.disconnect();
this._observer = null;
this._mutationHandler = null;
Polymer.dom.removeStaticFlush(this._boundFlush);
baseCleanup.call(this);
},
_flush: function () {
if (this._observer) {
this._mutationHandler(this._observer.takeRecords());
}
},
enableShadowAttributeTracking: function () {
if (this._observer) {
this._makeContentListenersAlwaysNotify();
this._observer.disconnect();
this._observer.observe(this.node, {
childList: true,
attributes: true,
subtree: true
});
var root = this.domApi.getOwnerRoot();
var host = root && root.host;
if (host && Polymer.dom(host).observer) {
Polymer.dom(host).observer.enableShadowAttributeTracking();
}
}
},
_makeContentListenersAlwaysNotify: function () {
for (var i = 0, h; i < this._listeners.length; i++) {
h = this._listeners[i];
h._alwaysNotify = h._isContentListener;
}
}
});
}
}());(function () {
'use strict';
var DomApi = Polymer.DomApi.ctor;
var Settings = Polymer.Settings;
DomApi.DistributedNodesObserver = function (domApi) {
DomApi.EffectiveNodesObserver.call(this, domApi);
};
DomApi.DistributedNodesObserver.prototype = Object.create(DomApi.EffectiveNodesObserver.prototype);
Polymer.Base.mixin(DomApi.DistributedNodesObserver.prototype, {
_setup: function () {
},
_cleanup: function () {
},
_beforeCallListeners: function () {
},
_getEffectiveNodes: function () {
return this.domApi.getDistributedNodes();
}
});
if (Settings.useShadow) {
Polymer.Base.mixin(DomApi.DistributedNodesObserver.prototype, {
_setup: function () {
if (!this._observer) {
var root = this.domApi.getOwnerRoot();
var host = root && root.host;
if (host) {
var self = this;
this._observer = Polymer.dom(host).observeNodes(function () {
self._scheduleNotify();
});
this._observer._isContentListener = true;
if (this._hasAttrSelect()) {
Polymer.dom(host).observer.enableShadowAttributeTracking();
}
}
}
},
_hasAttrSelect: function () {
var select = this.node.getAttribute('select');
return select && select.match(/[[.]+/);
},
_cleanup: function () {
var root = this.domApi.getOwnerRoot();
var host = root && root.host;
if (host) {
Polymer.dom(host).unobserveNodes(this._observer);
}
this._observer = null;
}
});
}
}());(function () {
var DomApi = Polymer.DomApi;
var TreeApi = Polymer.TreeApi;
Polymer.Base._addFeature({
_prepShady: function () {
this._useContent = this._useContent || Boolean(this._template);
},
_setupShady: function () {
this.shadyRoot = null;
if (!this.__domApi) {
this.__domApi = null;
}
if (!this.__dom) {
this.__dom = null;
}
if (!this._ownerShadyRoot) {
this._ownerShadyRoot = undefined;
}
},
_poolContent: function () {
if (this._useContent) {
TreeApi.Logical.saveChildNodes(this);
}
},
_setupRoot: function () {
if (this._useContent) {
this._createLocalRoot();
if (!this.dataHost) {
upgradeLogicalChildren(TreeApi.Logical.getChildNodes(this));
}
}
},
_createLocalRoot: function () {
this.shadyRoot = this.root;
this.shadyRoot._distributionClean = false;
this.shadyRoot._hasDistributed = false;
this.shadyRoot._isShadyRoot = true;
this.shadyRoot._dirtyRoots = [];
var i$ = this.shadyRoot._insertionPoints = !this._notes || this._notes._hasContent ? this.shadyRoot.querySelectorAll('content') : [];
TreeApi.Logical.saveChildNodes(this.shadyRoot);
for (var i = 0, c; i < i$.length; i++) {
c = i$[i];
TreeApi.Logical.saveChildNodes(c);
TreeApi.Logical.saveChildNodes(c.parentNode);
}
this.shadyRoot.host = this;
},
distributeContent: function (updateInsertionPoints) {
if (this.shadyRoot) {
this.shadyRoot._invalidInsertionPoints = this.shadyRoot._invalidInsertionPoints || updateInsertionPoints;
var host = getTopDistributingHost(this);
Polymer.dom(this)._lazyDistribute(host);
}
},
_distributeContent: function () {
if (this._useContent && !this.shadyRoot._distributionClean) {
if (this.shadyRoot._invalidInsertionPoints) {
Polymer.dom(this)._updateInsertionPoints(this);
this.shadyRoot._invalidInsertionPoints = false;
}
this._beginDistribute();
this._distributeDirtyRoots();
this._finishDistribute();
}
},
_beginDistribute: function () {
if (this._useContent && DomApi.hasInsertionPoint(this.shadyRoot)) {
this._resetDistribution();
this._distributePool(this.shadyRoot, this._collectPool());
}
},
_distributeDirtyRoots: function () {
var c$ = this.shadyRoot._dirtyRoots;
for (var i = 0, l = c$.length, c; i < l && (c = c$[i]); i++) {
c._distributeContent();
}
this.shadyRoot._dirtyRoots = [];
},
_finishDistribute: function () {
if (this._useContent) {
this.shadyRoot._distributionClean = true;
if (DomApi.hasInsertionPoint(this.shadyRoot)) {
this._composeTree();
notifyContentObservers(this.shadyRoot);
} else {
if (!this.shadyRoot._hasDistributed) {
TreeApi.Composed.clearChildNodes(this);
this.appendChild(this.shadyRoot);
} else {
var children = this._composeNode(this);
this._updateChildNodes(this, children);
}
}
if (!this.shadyRoot._hasDistributed) {
notifyInitialDistribution(this);
}
this.shadyRoot._hasDistributed = true;
}
},
elementMatches: function (selector, node) {
node = node || this;
return DomApi.matchesSelector.call(node, selector);
},
_resetDistribution: function () {
var children = TreeApi.Logical.getChildNodes(this);
for (var i = 0; i < children.length; i++) {
var child = children[i];
if (child._destinationInsertionPoints) {
child._destinationInsertionPoints = undefined;
}
if (isInsertionPoint(child)) {
clearDistributedDestinationInsertionPoints(child);
}
}
var root = this.shadyRoot;
var p$ = root._insertionPoints;
for (var j = 0; j < p$.length; j++) {
p$[j]._distributedNodes = [];
}
},
_collectPool: function () {
var pool = [];
var children = TreeApi.Logical.getChildNodes(this);
for (var i = 0; i < children.length; i++) {
var child = children[i];
if (isInsertionPoint(child)) {
pool.push.apply(pool, child._distributedNodes);
} else {
pool.push(child);
}
}
return pool;
},
_distributePool: function (node, pool) {
var p$ = node._insertionPoints;
for (var i = 0, l = p$.length, p; i < l && (p = p$[i]); i++) {
this._distributeInsertionPoint(p, pool);
maybeRedistributeParent(p, this);
}
},
_distributeInsertionPoint: function (content, pool) {
var anyDistributed = false;
for (var i = 0, l = pool.length, node; i < l; i++) {
node = pool[i];
if (!node) {
continue;
}
if (this._matchesContentSelect(node, content)) {
distributeNodeInto(node, content);
pool[i] = undefined;
anyDistributed = true;
}
}
if (!anyDistributed) {
var children = TreeApi.Logical.getChildNodes(content);
for (var j = 0; j < children.length; j++) {
distributeNodeInto(children[j], content);
}
}
},
_composeTree: function () {
this._updateChildNodes(this, this._composeNode(this));
var p$ = this.shadyRoot._insertionPoints;
for (var i = 0, l = p$.length, p, parent; i < l && (p = p$[i]); i++) {
parent = TreeApi.Logical.getParentNode(p);
if (!parent._useContent && parent !== this && parent !== this.shadyRoot) {
this._updateChildNodes(parent, this._composeNode(parent));
}
}
},
_composeNode: function (node) {
var children = [];
var c$ = TreeApi.Logical.getChildNodes(node.shadyRoot || node);
for (var i = 0; i < c$.length; i++) {
var child = c$[i];
if (isInsertionPoint(child)) {
var distributedNodes = child._distributedNodes;
for (var j = 0; j < distributedNodes.length; j++) {
var distributedNode = distributedNodes[j];
if (isFinalDestination(child, distributedNode)) {
children.push(distributedNode);
}
}
} else {
children.push(child);
}
}
return children;
},
_updateChildNodes: function (container, children) {
var composed = TreeApi.Composed.getChildNodes(container);
var splices = Polymer.ArraySplice.calculateSplices(children, composed);
for (var i = 0, d = 0, s; i < splices.length && (s = splices[i]); i++) {
for (var j = 0, n; j < s.removed.length && (n = s.removed[j]); j++) {
if (TreeApi.Composed.getParentNode(n) === container) {
TreeApi.Composed.removeChild(container, n);
}
composed.splice(s.index + d, 1);
}
d -= s.addedCount;
}
for (var i = 0, s, next; i < splices.length && (s = splices[i]); i++) {
next = composed[s.index];
for (j = s.index, n; j < s.index + s.addedCount; j++) {
n = children[j];
TreeApi.Composed.insertBefore(container, n, next);
composed.splice(j, 0, n);
}
}
},
_matchesContentSelect: function (node, contentElement) {
var select = contentElement.getAttribute('select');
if (!select) {
return true;
}
select = select.trim();
if (!select) {
return true;
}
if (!(node instanceof Element)) {
return false;
}
var validSelectors = /^(:not\()?[*.#[a-zA-Z_|]/;
if (!validSelectors.test(select)) {
return false;
}
return this.elementMatches(select, node);
},
_elementAdd: function () {
},
_elementRemove: function () {
}
});
var domHostDesc = {
get: function () {
var root = Polymer.dom(this).getOwnerRoot();
return root && root.host;
},
configurable: true
};
Object.defineProperty(Polymer.Base, 'domHost', domHostDesc);
Polymer.BaseDescriptors.domHost = domHostDesc;
function distributeNodeInto(child, insertionPoint) {
insertionPoint._distributedNodes.push(child);
var points = child._destinationInsertionPoints;
if (!points) {
child._destinationInsertionPoints = [insertionPoint];
} else {
points.push(insertionPoint);
}
}
function clearDistributedDestinationInsertionPoints(content) {
var e$ = content._distributedNodes;
if (e$) {
for (var i = 0; i < e$.length; i++) {
var d = e$[i]._destinationInsertionPoints;
if (d) {
d.splice(d.indexOf(content) + 1, d.length);
}
}
}
}
function maybeRedistributeParent(content, host) {
var parent = TreeApi.Logical.getParentNode(content);
if (parent && parent.shadyRoot && DomApi.hasInsertionPoint(parent.shadyRoot) && parent.shadyRoot._distributionClean) {
parent.shadyRoot._distributionClean = false;
host.shadyRoot._dirtyRoots.push(parent);
}
}
function isFinalDestination(insertionPoint, node) {
var points = node._destinationInsertionPoints;
return points && points[points.length - 1] === insertionPoint;
}
function isInsertionPoint(node) {
return node.localName == 'content';
}
function getTopDistributingHost(host) {
while (host && hostNeedsRedistribution(host)) {
host = host.domHost;
}
return host;
}
function hostNeedsRedistribution(host) {
var c$ = TreeApi.Logical.getChildNodes(host);
for (var i = 0, c; i < c$.length; i++) {
c = c$[i];
if (c.localName && c.localName === 'content') {
return host.domHost;
}
}
}
function notifyContentObservers(root) {
for (var i = 0, c; i < root._insertionPoints.length; i++) {
c = root._insertionPoints[i];
if (DomApi.hasApi(c)) {
Polymer.dom(c).notifyObserver();
}
}
}
function notifyInitialDistribution(host) {
if (DomApi.hasApi(host)) {
Polymer.dom(host).notifyObserver();
}
}
var needsUpgrade = window.CustomElements && !CustomElements.useNative;
function upgradeLogicalChildren(children) {
if (needsUpgrade && children) {
for (var i = 0; i < children.length; i++) {
CustomElements.upgrade(children[i]);
}
}
}
}());if (Polymer.Settings.useShadow) {
Polymer.Base._addFeature({
_poolContent: function () {
},
_beginDistribute: function () {
},
distributeContent: function () {
},
_distributeContent: function () {
},
_finishDistribute: function () {
},
_createLocalRoot: function () {
this.createShadowRoot();
this.shadowRoot.appendChild(this.root);
this.root = this.shadowRoot;
}
});
}Polymer.Async = {
_currVal: 0,
_lastVal: 0,
_callbacks: [],
_twiddleContent: 0,
_twiddle: document.createTextNode(''),
run: function (callback, waitTime) {
if (waitTime > 0) {
return ~setTimeout(callback, waitTime);
} else {
this._twiddle.textContent = this._twiddleContent++;
this._callbacks.push(callback);
return this._currVal++;
}
},
cancel: function (handle) {
if (handle < 0) {
clearTimeout(~handle);
} else {
var idx = handle - this._lastVal;
if (idx >= 0) {
if (!this._callbacks[idx]) {
throw 'invalid async handle: ' + handle;
}
this._callbacks[idx] = null;
}
}
},
_atEndOfMicrotask: function () {
var len = this._callbacks.length;
for (var i = 0; i < len; i++) {
var cb = this._callbacks[i];
if (cb) {
try {
cb();
} catch (e) {
i++;
this._callbacks.splice(0, i);
this._lastVal += i;
this._twiddle.textContent = this._twiddleContent++;
throw e;
}
}
}
this._callbacks.splice(0, len);
this._lastVal += len;
}
};
new window.MutationObserver(function () {
Polymer.Async._atEndOfMicrotask();
}).observe(Polymer.Async._twiddle, { characterData: true });Polymer.Debounce = function () {
var Async = Polymer.Async;
var Debouncer = function (context) {
this.context = context;
var self = this;
this.boundComplete = function () {
self.complete();
};
};
Debouncer.prototype = {
go: function (callback, wait) {
var h;
this.finish = function () {
Async.cancel(h);
};
h = Async.run(this.boundComplete, wait);
this.callback = callback;
},
stop: function () {
if (this.finish) {
this.finish();
this.finish = null;
this.callback = null;
}
},
complete: function () {
if (this.finish) {
var callback = this.callback;
this.stop();
callback.call(this.context);
}
}
};
function debounce(debouncer, callback, wait) {
if (debouncer) {
debouncer.stop();
} else {
debouncer = new Debouncer(this);
}
debouncer.go(callback, wait);
return debouncer;
}
return debounce;
}();Polymer.Base._addFeature({
_setupDebouncers: function () {
this._debouncers = {};
},
debounce: function (jobName, callback, wait) {
return this._debouncers[jobName] = Polymer.Debounce.call(this, this._debouncers[jobName], callback, wait);
},
isDebouncerActive: function (jobName) {
var debouncer = this._debouncers[jobName];
return !!(debouncer && debouncer.finish);
},
flushDebouncer: function (jobName) {
var debouncer = this._debouncers[jobName];
if (debouncer) {
debouncer.complete();
}
},
cancelDebouncer: function (jobName) {
var debouncer = this._debouncers[jobName];
if (debouncer) {
debouncer.stop();
}
}
});Polymer.DomModule = document.createElement('dom-module');
Polymer.Base._addFeature({
_registerFeatures: function () {
this._prepIs();
this._prepBehaviors();
this._prepConstructor();
this._prepTemplate();
this._prepShady();
this._prepPropertyInfo();
},
_prepBehavior: function (b) {
this._addHostAttributes(b.hostAttributes);
},
_initFeatures: function () {
this._registerHost();
if (this._template) {
this._poolContent();
this._beginHosting();
this._stampTemplate();
this._endHosting();
}
this._marshalHostAttributes();
this._setupDebouncers();
this._marshalBehaviors();
this._tryReady();
},
_marshalBehavior: function (b) {
}
});</script>






<script>(function () {
Polymer.nar = [];
var disableUpgradeEnabled = Polymer.Settings.disableUpgradeEnabled;
Polymer.Annotations = {
parseAnnotations: function (template, stripWhiteSpace) {
var list = [];
var content = template._content || template.content;
this._parseNodeAnnotations(content, list, stripWhiteSpace || template.hasAttribute('strip-whitespace'));
return list;
},
_parseNodeAnnotations: function (node, list, stripWhiteSpace) {
return node.nodeType === Node.TEXT_NODE ? this._parseTextNodeAnnotation(node, list) : this._parseElementAnnotations(node, list, stripWhiteSpace);
},
_bindingRegex: function () {
var IDENT = '(?:' + '[a-zA-Z_$][\\w.:$\\-*]*' + ')';
var NUMBER = '(?:' + '[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';
var SQUOTE_STRING = '(?:' + '\'(?:[^\'\\\\]|\\\\.)*\'' + ')';
var DQUOTE_STRING = '(?:' + '"(?:[^"\\\\]|\\\\.)*"' + ')';
var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';
var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' + STRING + '\\s*' + ')';
var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\s*' + ARGUMENT + ')*' + ')';
var ARGUMENT_LIST = '(?:' + '\\(\\s*' + '(?:' + ARGUMENTS + '?' + ')' + '\\)\\s*' + ')';
var BINDING = '(' + IDENT + '\\s*' + ARGUMENT_LIST + '?' + ')';
var OPEN_BRACKET = '(\\[\\[|{{)' + '\\s*';
var CLOSE_BRACKET = '(?:]]|}})';
var NEGATE = '(?:(!)\\s*)?';
var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;
return new RegExp(EXPRESSION, 'g');
}(),
_parseBindings: function (text) {
var re = this._bindingRegex;
var parts = [];
var lastIndex = 0;
var m;
while ((m = re.exec(text)) !== null) {
if (m.index > lastIndex) {
parts.push({ literal: text.slice(lastIndex, m.index) });
}
var mode = m[1][0];
var negate = Boolean(m[2]);
var value = m[3].trim();
var customEvent, notifyEvent, colon;
if (mode == '{' && (colon = value.indexOf('::')) > 0) {
notifyEvent = value.substring(colon + 2);
value = value.substring(0, colon);
customEvent = true;
}
parts.push({
compoundIndex: parts.length,
value: value,
mode: mode,
negate: negate,
event: notifyEvent,
customEvent: customEvent
});
lastIndex = re.lastIndex;
}
if (lastIndex && lastIndex < text.length) {
var literal = text.substring(lastIndex);
if (literal) {
parts.push({ literal: literal });
}
}
if (parts.length) {
return parts;
}
},
_literalFromParts: function (parts) {
var s = '';
for (var i = 0; i < parts.length; i++) {
var literal = parts[i].literal;
s += literal || '';
}
return s;
},
_parseTextNodeAnnotation: function (node, list) {
var parts = this._parseBindings(node.textContent);
if (parts) {
node.textContent = this._literalFromParts(parts) || ' ';
var annote = {
bindings: [{
kind: 'text',
name: 'textContent',
parts: parts,
isCompound: parts.length !== 1
}]
};
list.push(annote);
return annote;
}
},
_parseElementAnnotations: function (element, list, stripWhiteSpace) {
var annote = {
bindings: [],
events: []
};
if (element.localName === 'content') {
list._hasContent = true;
}
this._parseChildNodesAnnotations(element, annote, list, stripWhiteSpace);
if (element.attributes) {
this._parseNodeAttributeAnnotations(element, annote, list);
if (this.prepElement) {
this.prepElement(element);
}
}
if (annote.bindings.length || annote.events.length || annote.id) {
list.push(annote);
}
return annote;
},
_parseChildNodesAnnotations: function (root, annote, list, stripWhiteSpace) {
if (root.firstChild) {
var node = root.firstChild;
var i = 0;
while (node) {
var next = node.nextSibling;
if (node.localName === 'template' && !node.hasAttribute('preserve-content')) {
this._parseTemplate(node, i, list, annote, stripWhiteSpace);
}
if (node.localName == 'slot') {
node = this._replaceSlotWithContent(node);
}
if (node.nodeType === Node.TEXT_NODE) {
var n = next;
while (n && n.nodeType === Node.TEXT_NODE) {
node.textContent += n.textContent;
next = n.nextSibling;
root.removeChild(n);
n = next;
}
if (stripWhiteSpace && !node.textContent.trim()) {
root.removeChild(node);
i--;
}
}
if (node.parentNode) {
var childAnnotation = this._parseNodeAnnotations(node, list, stripWhiteSpace);
if (childAnnotation) {
childAnnotation.parent = annote;
childAnnotation.index = i;
}
}
node = next;
i++;
}
}
},
_replaceSlotWithContent: function (slot) {
var content = slot.ownerDocument.createElement('content');
while (slot.firstChild) {
content.appendChild(slot.firstChild);
}
var attrs = slot.attributes;
for (var i = 0; i < attrs.length; i++) {
var attr = attrs[i];
content.setAttribute(attr.name, attr.value);
}
var name = slot.getAttribute('name');
if (name) {
content.setAttribute('select', '[slot=\'' + name + '\']');
}
slot.parentNode.replaceChild(content, slot);
return content;
},
_parseTemplate: function (node, index, list, parent, stripWhiteSpace) {
var content = document.createDocumentFragment();
content._notes = this.parseAnnotations(node, stripWhiteSpace);
content.appendChild(node.content);
list.push({
bindings: Polymer.nar,
events: Polymer.nar,
templateContent: content,
parent: parent,
index: index
});
},
_parseNodeAttributeAnnotations: function (node, annotation) {
var attrs = Array.prototype.slice.call(node.attributes);
for (var i = attrs.length - 1, a; a = attrs[i]; i--) {
var n = a.name;
var v = a.value;
var b;
if (n.slice(0, 3) === 'on-') {
node.removeAttribute(n);
annotation.events.push({
name: n.slice(3),
value: v
});
} else if (b = this._parseNodeAttributeAnnotation(node, n, v)) {
annotation.bindings.push(b);
} else if (n === 'id') {
annotation.id = v;
}
}
},
_parseNodeAttributeAnnotation: function (node, name, value) {
var parts = this._parseBindings(value);
if (parts) {
var origName = name;
var kind = 'property';
if (name[name.length - 1] == '$') {
name = name.slice(0, -1);
kind = 'attribute';
}
var literal = this._literalFromParts(parts);
if (literal && kind == 'attribute') {
node.setAttribute(name, literal);
}
if (node.localName === 'input' && origName === 'value') {
node.setAttribute(origName, '');
}
if (disableUpgradeEnabled && origName === 'disable-upgrade$') {
node.setAttribute(name, '');
}
node.removeAttribute(origName);
var propertyName = Polymer.CaseMap.dashToCamelCase(name);
if (kind === 'property') {
name = propertyName;
}
return {
kind: kind,
name: name,
propertyName: propertyName,
parts: parts,
literal: literal,
isCompound: parts.length !== 1
};
}
},
findAnnotatedNode: function (root, annote) {
var parent = annote.parent && Polymer.Annotations.findAnnotatedNode(root, annote.parent);
if (parent) {
for (var n = parent.firstChild, i = 0; n; n = n.nextSibling) {
if (annote.index === i++) {
return n;
}
}
} else {
return root;
}
}
};
}());Polymer.Path = {
root: function (path) {
var dotIndex = path.indexOf('.');
if (dotIndex === -1) {
return path;
}
return path.slice(0, dotIndex);
},
isDeep: function (path) {
return path.indexOf('.') !== -1;
},
isAncestor: function (base, path) {
return base.indexOf(path + '.') === 0;
},
isDescendant: function (base, path) {
return path.indexOf(base + '.') === 0;
},
translate: function (base, newBase, path) {
return newBase + path.slice(base.length);
},
matches: function (base, wildcard, path) {
return base === path || this.isAncestor(base, path) || Boolean(wildcard) && this.isDescendant(base, path);
}
};Polymer.Base._addFeature({
_prepAnnotations: function () {
if (!this._template) {
this._notes = [];
} else {
var self = this;
Polymer.Annotations.prepElement = function (element) {
self._prepElement(element);
};
if (this._template._content && this._template._content._notes) {
this._notes = this._template._content._notes;
} else {
this._notes = Polymer.Annotations.parseAnnotations(this._template);
this._processAnnotations(this._notes);
}
Polymer.Annotations.prepElement = null;
}
},
_processAnnotations: function (notes) {
for (var i = 0; i < notes.length; i++) {
var note = notes[i];
for (var j = 0; j < note.bindings.length; j++) {
var b = note.bindings[j];
for (var k = 0; k < b.parts.length; k++) {
var p = b.parts[k];
if (!p.literal) {
var signature = this._parseMethod(p.value);
if (signature) {
p.signature = signature;
} else {
p.model = Polymer.Path.root(p.value);
}
}
}
}
if (note.templateContent) {
this._processAnnotations(note.templateContent._notes);
var pp = note.templateContent._parentProps = this._discoverTemplateParentProps(note.templateContent._notes);
var bindings = [];
for (var prop in pp) {
var name = '_parent_' + prop;
bindings.push({
index: note.index,
kind: 'property',
name: name,
propertyName: name,
parts: [{
mode: '{',
model: prop,
value: prop
}]
});
}
note.bindings = note.bindings.concat(bindings);
}
}
},
_discoverTemplateParentProps: function (notes) {
var pp = {};
for (var i = 0, n; i < notes.length && (n = notes[i]); i++) {
for (var j = 0, b$ = n.bindings, b; j < b$.length && (b = b$[j]); j++) {
for (var k = 0, p$ = b.parts, p; k < p$.length && (p = p$[k]); k++) {
if (p.signature) {
var args = p.signature.args;
for (var kk = 0; kk < args.length; kk++) {
var model = args[kk].model;
if (model) {
pp[model] = true;
}
}
if (p.signature.dynamicFn) {
pp[p.signature.method] = true;
}
} else {
if (p.model) {
pp[p.model] = true;
}
}
}
}
if (n.templateContent) {
var tpp = n.templateContent._parentProps;
Polymer.Base.mixin(pp, tpp);
}
}
return pp;
},
_prepElement: function (element) {
Polymer.ResolveUrl.resolveAttrs(element, this._template.ownerDocument);
},
_findAnnotatedNode: Polymer.Annotations.findAnnotatedNode,
_marshalAnnotationReferences: function () {
if (this._template) {
this._marshalIdNodes();
this._marshalAnnotatedNodes();
this._marshalAnnotatedListeners();
}
},
_configureAnnotationReferences: function () {
var notes = this._notes;
var nodes = this._nodes;
for (var i = 0; i < notes.length; i++) {
var note = notes[i];
var node = nodes[i];
this._configureTemplateContent(note, node);
this._configureCompoundBindings(note, node);
}
},
_configureTemplateContent: function (note, node) {
if (note.templateContent) {
node._content = note.templateContent;
}
},
_configureCompoundBindings: function (note, node) {
var bindings = note.bindings;
for (var i = 0; i < bindings.length; i++) {
var binding = bindings[i];
if (binding.isCompound) {
var storage = node.__compoundStorage__ || (node.__compoundStorage__ = {});
var parts = binding.parts;
var literals = new Array(parts.length);
for (var j = 0; j < parts.length; j++) {
literals[j] = parts[j].literal;
}
var name = binding.name;
storage[name] = literals;
if (binding.literal && binding.kind == 'property') {
if (node._configValue) {
node._configValue(name, binding.literal);
} else {
node[name] = binding.literal;
}
}
}
}
},
_marshalIdNodes: function () {
this.$ = {};
for (var i = 0, l = this._notes.length, a; i < l && (a = this._notes[i]); i++) {
if (a.id) {
this.$[a.id] = this._findAnnotatedNode(this.root, a);
}
}
},
_marshalAnnotatedNodes: function () {
if (this._notes && this._notes.length) {
var r = new Array(this._notes.length);
for (var i = 0; i < this._notes.length; i++) {
r[i] = this._findAnnotatedNode(this.root, this._notes[i]);
}
this._nodes = r;
}
},
_marshalAnnotatedListeners: function () {
for (var i = 0, l = this._notes.length, a; i < l && (a = this._notes[i]); i++) {
if (a.events && a.events.length) {
var node = this._findAnnotatedNode(this.root, a);
for (var j = 0, e$ = a.events, e; j < e$.length && (e = e$[j]); j++) {
this.listen(node, e.name, e.value);
}
}
}
}
});Polymer.Base._addFeature({
listeners: {},
_listenListeners: function (listeners) {
var node, name, eventName;
for (eventName in listeners) {
if (eventName.indexOf('.') < 0) {
node = this;
name = eventName;
} else {
name = eventName.split('.');
node = this.$[name[0]];
name = name[1];
}
this.listen(node, name, listeners[eventName]);
}
},
listen: function (node, eventName, methodName) {
var handler = this._recallEventHandler(this, eventName, node, methodName);
if (!handler) {
handler = this._createEventHandler(node, eventName, methodName);
}
if (handler._listening) {
return;
}
this._listen(node, eventName, handler);
handler._listening = true;
},
_boundListenerKey: function (eventName, methodName) {
return eventName + ':' + methodName;
},
_recordEventHandler: function (host, eventName, target, methodName, handler) {
var hbl = host.__boundListeners;
if (!hbl) {
hbl = host.__boundListeners = new WeakMap();
}
var bl = hbl.get(target);
if (!bl) {
bl = {};
if (!Polymer.Settings.isIE || target != window) {
hbl.set(target, bl);
}
}
var key = this._boundListenerKey(eventName, methodName);
bl[key] = handler;
},
_recallEventHandler: function (host, eventName, target, methodName) {
var hbl = host.__boundListeners;
if (!hbl) {
return;
}
var bl = hbl.get(target);
if (!bl) {
return;
}
var key = this._boundListenerKey(eventName, methodName);
return bl[key];
},
_createEventHandler: function (node, eventName, methodName) {
var host = this;
var handler = function (e) {
if (host[methodName]) {
host[methodName](e, e.detail);
} else {
host._warn(host._logf('_createEventHandler', 'listener method `' + methodName + '` not defined'));
}
};
handler._listening = false;
this._recordEventHandler(host, eventName, node, methodName, handler);
return handler;
},
unlisten: function (node, eventName, methodName) {
var handler = this._recallEventHandler(this, eventName, node, methodName);
if (handler) {
this._unlisten(node, eventName, handler);
handler._listening = false;
}
},
_listen: function (node, eventName, handler) {
node.addEventListener(eventName, handler);
},
_unlisten: function (node, eventName, handler) {
node.removeEventListener(eventName, handler);
}
});(function () {
'use strict';
var wrap = Polymer.DomApi.wrap;
var HAS_NATIVE_TA = typeof document.head.style.touchAction === 'string';
var GESTURE_KEY = '__polymerGestures';
var HANDLED_OBJ = '__polymerGesturesHandled';
var TOUCH_ACTION = '__polymerGesturesTouchAction';
var TAP_DISTANCE = 25;
var TRACK_DISTANCE = 5;
var TRACK_LENGTH = 2;
var MOUSE_TIMEOUT = 2500;
var MOUSE_EVENTS = [
'mousedown',
'mousemove',
'mouseup',
'click'
];
var MOUSE_WHICH_TO_BUTTONS = [
0,
1,
4,
2
];
var MOUSE_HAS_BUTTONS = function () {
try {
return new MouseEvent('test', { buttons: 1 }).buttons === 1;
} catch (e) {
return false;
}
}();
var SUPPORTS_PASSIVE = false;
(function () {
try {
var opts = Object.defineProperty({}, 'passive', {
get: function () {
SUPPORTS_PASSIVE = true;
}
});
window.addEventListener('test', null, opts);
window.removeEventListener('test', null, opts);
} catch (e) {
}
}());
var IS_TOUCH_ONLY = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);
var mouseCanceller = function (mouseEvent) {
var sc = mouseEvent.sourceCapabilities;
if (sc && !sc.firesTouchEvents) {
return;
}
mouseEvent[HANDLED_OBJ] = { skip: true };
if (mouseEvent.type === 'click') {
var path = Polymer.dom(mouseEvent).path;
for (var i = 0; i < path.length; i++) {
if (path[i] === POINTERSTATE.mouse.target) {
return;
}
}
mouseEvent.preventDefault();
mouseEvent.stopPropagation();
}
};
function setupTeardownMouseCanceller(setup) {
var events = IS_TOUCH_ONLY ? ['click'] : MOUSE_EVENTS;
for (var i = 0, en; i < events.length; i++) {
en = events[i];
if (setup) {
document.addEventListener(en, mouseCanceller, true);
} else {
document.removeEventListener(en, mouseCanceller, true);
}
}
}
function ignoreMouse(ev) {
if (!POINTERSTATE.mouse.mouseIgnoreJob) {
setupTeardownMouseCanceller(true);
}
var unset = function () {
setupTeardownMouseCanceller();
POINTERSTATE.mouse.target = null;
POINTERSTATE.mouse.mouseIgnoreJob = null;
};
POINTERSTATE.mouse.target = Polymer.dom(ev).rootTarget;
POINTERSTATE.mouse.mouseIgnoreJob = Polymer.Debounce(POINTERSTATE.mouse.mouseIgnoreJob, unset, MOUSE_TIMEOUT);
}
function hasLeftMouseButton(ev) {
var type = ev.type;
if (MOUSE_EVENTS.indexOf(type) === -1) {
return false;
}
if (type === 'mousemove') {
var buttons = ev.buttons === undefined ? 1 : ev.buttons;
if (ev instanceof window.MouseEvent && !MOUSE_HAS_BUTTONS) {
buttons = MOUSE_WHICH_TO_BUTTONS[ev.which] || 0;
}
return Boolean(buttons & 1);
} else {
var button = ev.button === undefined ? 0 : ev.button;
return button === 0;
}
}
function isSyntheticClick(ev) {
if (ev.type === 'click') {
if (ev.detail === 0) {
return true;
}
var t = Gestures.findOriginalTarget(ev);
var bcr = t.getBoundingClientRect();
var x = ev.pageX, y = ev.pageY;
return !(x >= bcr.left && x <= bcr.right && (y >= bcr.top && y <= bcr.bottom));
}
return false;
}
var POINTERSTATE = {
mouse: {
target: null,
mouseIgnoreJob: null
},
touch: {
x: 0,
y: 0,
id: -1,
scrollDecided: false
}
};
function firstTouchAction(ev) {
var path = Polymer.dom(ev).path;
var ta = 'auto';
for (var i = 0, n; i < path.length; i++) {
n = path[i];
if (n[TOUCH_ACTION]) {
ta = n[TOUCH_ACTION];
break;
}
}
return ta;
}
function trackDocument(stateObj, movefn, upfn) {
stateObj.movefn = movefn;
stateObj.upfn = upfn;
document.addEventListener('mousemove', movefn);
document.addEventListener('mouseup', upfn);
}
function untrackDocument(stateObj) {
document.removeEventListener('mousemove', stateObj.movefn);
document.removeEventListener('mouseup', stateObj.upfn);
stateObj.movefn = null;
stateObj.upfn = null;
}
document.addEventListener('touchend', ignoreMouse, SUPPORTS_PASSIVE ? { passive: true } : false);
var Gestures = {
gestures: {},
recognizers: [],
deepTargetFind: function (x, y) {
var node = document.elementFromPoint(x, y);
var next = node;
while (next && next.shadowRoot) {
next = next.shadowRoot.elementFromPoint(x, y);
if (next) {
node = next;
}
}
return node;
},
findOriginalTarget: function (ev) {
if (ev.path) {
return ev.path[0];
}
return ev.target;
},
handleNative: function (ev) {
var handled;
var type = ev.type;
var node = wrap(ev.currentTarget);
var gobj = node[GESTURE_KEY];
if (!gobj) {
return;
}
var gs = gobj[type];
if (!gs) {
return;
}
if (!ev[HANDLED_OBJ]) {
ev[HANDLED_OBJ] = {};
if (type.slice(0, 5) === 'touch') {
var t = ev.changedTouches[0];
if (type === 'touchstart') {
if (ev.touches.length === 1) {
POINTERSTATE.touch.id = t.identifier;
}
}
if (POINTERSTATE.touch.id !== t.identifier) {
return;
}
if (!HAS_NATIVE_TA) {
if (type === 'touchstart' || type === 'touchmove') {
Gestures.handleTouchAction(ev);
}
}
}
}
handled = ev[HANDLED_OBJ];
if (handled.skip) {
return;
}
var recognizers = Gestures.recognizers;
for (var i = 0, r; i < recognizers.length; i++) {
r = recognizers[i];
if (gs[r.name] && !handled[r.name]) {
if (r.flow && r.flow.start.indexOf(ev.type) > -1 && r.reset) {
r.reset();
}
}
}
for (i = 0, r; i < recognizers.length; i++) {
r = recognizers[i];
if (gs[r.name] && !handled[r.name]) {
handled[r.name] = true;
r[type](ev);
}
}
},
handleTouchAction: function (ev) {
var t = ev.changedTouches[0];
var type = ev.type;
if (type === 'touchstart') {
POINTERSTATE.touch.x = t.clientX;
POINTERSTATE.touch.y = t.clientY;
POINTERSTATE.touch.scrollDecided = false;
} else if (type === 'touchmove') {
if (POINTERSTATE.touch.scrollDecided) {
return;
}
POINTERSTATE.touch.scrollDecided = true;
var ta = firstTouchAction(ev);
var prevent = false;
var dx = Math.abs(POINTERSTATE.touch.x - t.clientX);
var dy = Math.abs(POINTERSTATE.touch.y - t.clientY);
if (!ev.cancelable) {
} else if (ta === 'none') {
prevent = true;
} else if (ta === 'pan-x') {
prevent = dy > dx;
} else if (ta === 'pan-y') {
prevent = dx > dy;
}
if (prevent) {
ev.preventDefault();
} else {
Gestures.prevent('track');
}
}
},
add: function (node, evType, handler) {
node = wrap(node);
var recognizer = this.gestures[evType];
var deps = recognizer.deps;
var name = recognizer.name;
var gobj = node[GESTURE_KEY];
if (!gobj) {
node[GESTURE_KEY] = gobj = {};
}
for (var i = 0, dep, gd; i < deps.length; i++) {
dep = deps[i];
if (IS_TOUCH_ONLY && MOUSE_EVENTS.indexOf(dep) > -1 && dep !== 'click') {
continue;
}
gd = gobj[dep];
if (!gd) {
gobj[dep] = gd = { _count: 0 };
}
if (gd._count === 0) {
node.addEventListener(dep, this.handleNative);
}
gd[name] = (gd[name] || 0) + 1;
gd._count = (gd._count || 0) + 1;
}
node.addEventListener(evType, handler);
if (recognizer.touchAction) {
this.setTouchAction(node, recognizer.touchAction);
}
},
remove: function (node, evType, handler) {
node = wrap(node);
var recognizer = this.gestures[evType];
var deps = recognizer.deps;
var name = recognizer.name;
var gobj = node[GESTURE_KEY];
if (gobj) {
for (var i = 0, dep, gd; i < deps.length; i++) {
dep = deps[i];
gd = gobj[dep];
if (gd && gd[name]) {
gd[name] = (gd[name] || 1) - 1;
gd._count = (gd._count || 1) - 1;
if (gd._count === 0) {
node.removeEventListener(dep, this.handleNative);
}
}
}
}
node.removeEventListener(evType, handler);
},
register: function (recog) {
this.recognizers.push(recog);
for (var i = 0; i < recog.emits.length; i++) {
this.gestures[recog.emits[i]] = recog;
}
},
findRecognizerByEvent: function (evName) {
for (var i = 0, r; i < this.recognizers.length; i++) {
r = this.recognizers[i];
for (var j = 0, n; j < r.emits.length; j++) {
n = r.emits[j];
if (n === evName) {
return r;
}
}
}
return null;
},
setTouchAction: function (node, value) {
if (HAS_NATIVE_TA) {
node.style.touchAction = value;
}
node[TOUCH_ACTION] = value;
},
fire: function (target, type, detail) {
var ev = Polymer.Base.fire(type, detail, {
node: target,
bubbles: true,
cancelable: true
});
if (ev.defaultPrevented) {
var preventer = detail.preventer || detail.sourceEvent;
if (preventer && preventer.preventDefault) {
preventer.preventDefault();
}
}
},
prevent: function (evName) {
var recognizer = this.findRecognizerByEvent(evName);
if (recognizer.info) {
recognizer.info.prevent = true;
}
},
resetMouseCanceller: function () {
if (POINTERSTATE.mouse.mouseIgnoreJob) {
POINTERSTATE.mouse.mouseIgnoreJob.complete();
}
}
};
Gestures.register({
name: 'downup',
deps: [
'mousedown',
'touchstart',
'touchend'
],
flow: {
start: [
'mousedown',
'touchstart'
],
end: [
'mouseup',
'touchend'
]
},
emits: [
'down',
'up'
],
info: {
movefn: null,
upfn: null
},
reset: function () {
untrackDocument(this.info);
},
mousedown: function (e) {
if (!hasLeftMouseButton(e)) {
return;
}
var t = Gestures.findOriginalTarget(e);
var self = this;
var movefn = function movefn(e) {
if (!hasLeftMouseButton(e)) {
self.fire('up', t, e);
untrackDocument(self.info);
}
};
var upfn = function upfn(e) {
if (hasLeftMouseButton(e)) {
self.fire('up', t, e);
}
untrackDocument(self.info);
};
trackDocument(this.info, movefn, upfn);
this.fire('down', t, e);
},
touchstart: function (e) {
this.fire('down', Gestures.findOriginalTarget(e), e.changedTouches[0], e);
},
touchend: function (e) {
this.fire('up', Gestures.findOriginalTarget(e), e.changedTouches[0], e);
},
fire: function (type, target, event, preventer) {
Gestures.fire(target, type, {
x: event.clientX,
y: event.clientY,
sourceEvent: event,
preventer: preventer,
prevent: function (e) {
return Gestures.prevent(e);
}
});
}
});
Gestures.register({
name: 'track',
touchAction: 'none',
deps: [
'mousedown',
'touchstart',
'touchmove',
'touchend'
],
flow: {
start: [
'mousedown',
'touchstart'
],
end: [
'mouseup',
'touchend'
]
},
emits: ['track'],
info: {
x: 0,
y: 0,
state: 'start',
started: false,
moves: [],
addMove: function (move) {
if (this.moves.length > TRACK_LENGTH) {
this.moves.shift();
}
this.moves.push(move);
},
movefn: null,
upfn: null,
prevent: false
},
reset: function () {
this.info.state = 'start';
this.info.started = false;
this.info.moves = [];
this.info.x = 0;
this.info.y = 0;
this.info.prevent = false;
untrackDocument(this.info);
},
hasMovedEnough: function (x, y) {
if (this.info.prevent) {
return false;
}
if (this.info.started) {
return true;
}
var dx = Math.abs(this.info.x - x);
var dy = Math.abs(this.info.y - y);
return dx >= TRACK_DISTANCE || dy >= TRACK_DISTANCE;
},
mousedown: function (e) {
if (!hasLeftMouseButton(e)) {
return;
}
var t = Gestures.findOriginalTarget(e);
var self = this;
var movefn = function movefn(e) {
var x = e.clientX, y = e.clientY;
if (self.hasMovedEnough(x, y)) {
self.info.state = self.info.started ? e.type === 'mouseup' ? 'end' : 'track' : 'start';
if (self.info.state === 'start') {
Gestures.prevent('tap');
}
self.info.addMove({
x: x,
y: y
});
if (!hasLeftMouseButton(e)) {
self.info.state = 'end';
untrackDocument(self.info);
}
self.fire(t, e);
self.info.started = true;
}
};
var upfn = function upfn(e) {
if (self.info.started) {
movefn(e);
}
untrackDocument(self.info);
};
trackDocument(this.info, movefn, upfn);
this.info.x = e.clientX;
this.info.y = e.clientY;
},
touchstart: function (e) {
var ct = e.changedTouches[0];
this.info.x = ct.clientX;
this.info.y = ct.clientY;
},
touchmove: function (e) {
var t = Gestures.findOriginalTarget(e);
var ct = e.changedTouches[0];
var x = ct.clientX, y = ct.clientY;
if (this.hasMovedEnough(x, y)) {
if (this.info.state === 'start') {
Gestures.prevent('tap');
}
this.info.addMove({
x: x,
y: y
});
this.fire(t, ct);
this.info.state = 'track';
this.info.started = true;
}
},
touchend: function (e) {
var t = Gestures.findOriginalTarget(e);
var ct = e.changedTouches[0];
if (this.info.started) {
this.info.state = 'end';
this.info.addMove({
x: ct.clientX,
y: ct.clientY
});
this.fire(t, ct, e);
}
},
fire: function (target, touch, preventer) {
var secondlast = this.info.moves[this.info.moves.length - 2];
var lastmove = this.info.moves[this.info.moves.length - 1];
var dx = lastmove.x - this.info.x;
var dy = lastmove.y - this.info.y;
var ddx, ddy = 0;
if (secondlast) {
ddx = lastmove.x - secondlast.x;
ddy = lastmove.y - secondlast.y;
}
return Gestures.fire(target, 'track', {
state: this.info.state,
x: touch.clientX,
y: touch.clientY,
dx: dx,
dy: dy,
ddx: ddx,
ddy: ddy,
sourceEvent: touch,
preventer: preventer,
hover: function () {
return Gestures.deepTargetFind(touch.clientX, touch.clientY);
}
});
}
});
Gestures.register({
name: 'tap',
deps: [
'mousedown',
'click',
'touchstart',
'touchend'
],
flow: {
start: [
'mousedown',
'touchstart'
],
end: [
'click',
'touchend'
]
},
emits: ['tap'],
info: {
x: NaN,
y: NaN,
prevent: false
},
reset: function () {
this.info.x = NaN;
this.info.y = NaN;
this.info.prevent = false;
},
save: function (e) {
this.info.x = e.clientX;
this.info.y = e.clientY;
},
mousedown: function (e) {
if (hasLeftMouseButton(e)) {
this.save(e);
}
},
click: function (e) {
if (hasLeftMouseButton(e)) {
this.forward(e);
}
},
touchstart: function (e) {
this.save(e.changedTouches[0], e);
},
touchend: function (e) {
this.forward(e.changedTouches[0], e);
},
forward: function (e, preventer) {
var dx = Math.abs(e.clientX - this.info.x);
var dy = Math.abs(e.clientY - this.info.y);
var t = Gestures.findOriginalTarget(e);
if (isNaN(dx) || isNaN(dy) || dx <= TAP_DISTANCE && dy <= TAP_DISTANCE || isSyntheticClick(e)) {
if (!this.info.prevent) {
Gestures.fire(t, 'tap', {
x: e.clientX,
y: e.clientY,
sourceEvent: e,
preventer: preventer
});
}
}
}
});
var DIRECTION_MAP = {
x: 'pan-x',
y: 'pan-y',
none: 'none',
all: 'auto'
};
Polymer.Base._addFeature({
_setupGestures: function () {
this.__polymerGestures = null;
},
_listen: function (node, eventName, handler) {
if (Gestures.gestures[eventName]) {
Gestures.add(node, eventName, handler);
} else {
node.addEventListener(eventName, handler);
}
},
_unlisten: function (node, eventName, handler) {
if (Gestures.gestures[eventName]) {
Gestures.remove(node, eventName, handler);
} else {
node.removeEventListener(eventName, handler);
}
},
setScrollDirection: function (direction, node) {
node = node || this;
Gestures.setTouchAction(node, DIRECTION_MAP[direction] || 'auto');
}
});
Polymer.Gestures = Gestures;
}());(function () {
'use strict';
Polymer.Base._addFeature({
$$: function (slctr) {
return Polymer.dom(this.root).querySelector(slctr);
},
toggleClass: function (name, bool, node) {
node = node || this;
if (arguments.length == 1) {
bool = !node.classList.contains(name);
}
if (bool) {
Polymer.dom(node).classList.add(name);
} else {
Polymer.dom(node).classList.remove(name);
}
},
toggleAttribute: function (name, bool, node) {
node = node || this;
if (arguments.length == 1) {
bool = !node.hasAttribute(name);
}
if (bool) {
Polymer.dom(node).setAttribute(name, '');
} else {
Polymer.dom(node).removeAttribute(name);
}
},
classFollows: function (name, toElement, fromElement) {
if (fromElement) {
Polymer.dom(fromElement).classList.remove(name);
}
if (toElement) {
Polymer.dom(toElement).classList.add(name);
}
},
attributeFollows: function (name, toElement, fromElement) {
if (fromElement) {
Polymer.dom(fromElement).removeAttribute(name);
}
if (toElement) {
Polymer.dom(toElement).setAttribute(name, '');
}
},
getEffectiveChildNodes: function () {
return Polymer.dom(this).getEffectiveChildNodes();
},
getEffectiveChildren: function () {
var list = Polymer.dom(this).getEffectiveChildNodes();
return list.filter(function (n) {
return n.nodeType === Node.ELEMENT_NODE;
});
},
getEffectiveTextContent: function () {
var cn = this.getEffectiveChildNodes();
var tc = [];
for (var i = 0, c; c = cn[i]; i++) {
if (c.nodeType !== Node.COMMENT_NODE) {
tc.push(Polymer.dom(c).textContent);
}
}
return tc.join('');
},
queryEffectiveChildren: function (slctr) {
var e$ = Polymer.dom(this).queryDistributedElements(slctr);
return e$ && e$[0];
},
queryAllEffectiveChildren: function (slctr) {
return Polymer.dom(this).queryDistributedElements(slctr);
},
getContentChildNodes: function (slctr) {
var content = Polymer.dom(this.root).querySelector(slctr || 'content');
return content ? Polymer.dom(content).getDistributedNodes() : [];
},
getContentChildren: function (slctr) {
return this.getContentChildNodes(slctr).filter(function (n) {
return n.nodeType === Node.ELEMENT_NODE;
});
},
fire: function (type, detail, options) {
options = options || Polymer.nob;
var node = options.node || this;
detail = detail === null || detail === undefined ? {} : detail;
var bubbles = options.bubbles === undefined ? true : options.bubbles;
var cancelable = Boolean(options.cancelable);
var useCache = options._useCache;
var event = this._getEvent(type, bubbles, cancelable, useCache);
event.detail = detail;
if (useCache) {
this.__eventCache[type] = null;
}
node.dispatchEvent(event);
if (useCache) {
this.__eventCache[type] = event;
}
return event;
},
__eventCache: {},
_getEvent: function (type, bubbles, cancelable, useCache) {
var event = useCache && this.__eventCache[type];
if (!event || (event.bubbles != bubbles || event.cancelable != cancelable)) {
event = new Event(type, {
bubbles: Boolean(bubbles),
cancelable: cancelable
});
}
return event;
},
async: function (callback, waitTime) {
var self = this;
return Polymer.Async.run(function () {
callback.call(self);
}, waitTime);
},
cancelAsync: function (handle) {
Polymer.Async.cancel(handle);
},
arrayDelete: function (path, item) {
var index;
if (Array.isArray(path)) {
index = path.indexOf(item);
if (index >= 0) {
return path.splice(index, 1);
}
} else {
var arr = this._get(path);
index = arr.indexOf(item);
if (index >= 0) {
return this.splice(path, index, 1);
}
}
},
transform: function (transform, node) {
node = node || this;
node.style.webkitTransform = transform;
node.style.transform = transform;
},
translate3d: function (x, y, z, node) {
node = node || this;
this.transform('translate3d(' + x + ',' + y + ',' + z + ')', node);
},
importHref: function (href, onload, onerror, optAsync) {
var link = document.createElement('link');
link.rel = 'import';
link.href = href;
var list = Polymer.Base.importHref.imported = Polymer.Base.importHref.imported || {};
var cached = list[link.href];
var imprt = cached || link;
var self = this;
var loadListener = function (e) {
e.target.__firedLoad = true;
e.target.removeEventListener('load', loadListener);
e.target.removeEventListener('error', errorListener);
return onload.call(self, e);
};
var errorListener = function (e) {
e.target.__firedError = true;
e.target.removeEventListener('load', loadListener);
e.target.removeEventListener('error', errorListener);
return onerror.call(self, e);
};
if (onload) {
imprt.addEventListener('load', loadListener);
}
if (onerror) {
imprt.addEventListener('error', errorListener);
}
if (cached) {
if (cached.__firedLoad) {
cached.dispatchEvent(new Event('load'));
}
if (cached.__firedError) {
cached.dispatchEvent(new Event('error'));
}
} else {
list[link.href] = link;
optAsync = Boolean(optAsync);
if (optAsync) {
link.setAttribute('async', '');
}
document.head.appendChild(link);
}
return imprt;
},
create: function (tag, props) {
var elt = document.createElement(tag);
if (props) {
for (var n in props) {
elt[n] = props[n];
}
}
return elt;
},
isLightDescendant: function (node) {
return this !== node && this.contains(node) && Polymer.dom(this).getOwnerRoot() === Polymer.dom(node).getOwnerRoot();
},
isLocalDescendant: function (node) {
return this.root === Polymer.dom(node).getOwnerRoot();
}
});
if (!Polymer.Settings.useNativeCustomElements) {
var importHref = Polymer.Base.importHref;
Polymer.Base.importHref = function (href, onload, onerror, optAsync) {
CustomElements.ready = false;
var loadFn = function (e) {
CustomElements.upgradeDocumentTree(document);
CustomElements.ready = true;
if (onload) {
return onload.call(this, e);
}
};
return importHref.call(this, href, loadFn, onerror, optAsync);
};
}
}());Polymer.Bind = {
prepareModel: function (model) {
Polymer.Base.mixin(model, this._modelApi);
},
_modelApi: {
_notifyChange: function (source, event, value) {
value = value === undefined ? this[source] : value;
event = event || Polymer.CaseMap.camelToDashCase(source) + '-changed';
this.fire(event, { value: value }, {
bubbles: false,
cancelable: false,
_useCache: Polymer.Settings.eventDataCache || !Polymer.Settings.isIE
});
},
_propertySetter: function (property, value, effects, fromAbove) {
var old = this.__data__[property];
if (old !== value && (old === old || value === value)) {
this.__data__[property] = value;
if (typeof value == 'object') {
this._clearPath(property);
}
if (this._propertyChanged) {
this._propertyChanged(property, value, old);
}
if (effects) {
this._effectEffects(property, value, effects, old, fromAbove);
}
}
return old;
},
__setProperty: function (property, value, quiet, node) {
node = node || this;
var effects = node._propertyEffects && node._propertyEffects[property];
if (effects) {
node._propertySetter(property, value, effects, quiet);
} else if (node[property] !== value) {
node[property] = value;
}
},
_effectEffects: function (property, value, effects, old, fromAbove) {
for (var i = 0, l = effects.length, fx; i < l && (fx = effects[i]); i++) {
fx.fn.call(this, property, this[property], fx.effect, old, fromAbove);
}
},
_clearPath: function (path) {
for (var prop in this.__data__) {
if (Polymer.Path.isDescendant(path, prop)) {
this.__data__[prop] = undefined;
}
}
}
},
ensurePropertyEffects: function (model, property) {
if (!model._propertyEffects) {
model._propertyEffects = {};
}
var fx = model._propertyEffects[property];
if (!fx) {
fx = model._propertyEffects[property] = [];
}
return fx;
},
addPropertyEffect: function (model, property, kind, effect) {
var fx = this.ensurePropertyEffects(model, property);
var propEffect = {
kind: kind,
effect: effect,
fn: Polymer.Bind['_' + kind + 'Effect']
};
fx.push(propEffect);
return propEffect;
},
createBindings: function (model) {
var fx$ = model._propertyEffects;
if (fx$) {
for (var n in fx$) {
var fx = fx$[n];
fx.sort(this._sortPropertyEffects);
this._createAccessors(model, n, fx);
}
}
},
_sortPropertyEffects: function () {
var EFFECT_ORDER = {
'compute': 0,
'annotation': 1,
'annotatedComputation': 2,
'reflect': 3,
'notify': 4,
'observer': 5,
'complexObserver': 6,
'function': 7
};
return function (a, b) {
return EFFECT_ORDER[a.kind] - EFFECT_ORDER[b.kind];
};
}(),
_createAccessors: function (model, property, effects) {
var defun = {
get: function () {
return this.__data__[property];
}
};
var setter = function (value) {
this._propertySetter(property, value, effects);
};
var info = model.getPropertyInfo && model.getPropertyInfo(property);
if (info && info.readOnly) {
if (!info.computed) {
model['_set' + this.upper(property)] = setter;
}
} else {
defun.set = setter;
}
Object.defineProperty(model, property, defun);
},
upper: function (name) {
return name[0].toUpperCase() + name.substring(1);
},
_addAnnotatedListener: function (model, index, property, path, event, negated) {
if (!model._bindListeners) {
model._bindListeners = [];
}
var fn = this._notedListenerFactory(property, path, Polymer.Path.isDeep(path), negated);
var eventName = event || Polymer.CaseMap.camelToDashCase(property) + '-changed';
model._bindListeners.push({
index: index,
property: property,
path: path,
changedFn: fn,
event: eventName
});
},
_isEventBogus: function (e, target) {
return e.path && e.path[0] !== target;
},
_notedListenerFactory: function (property, path, isStructured, negated) {
return function (target, value, targetPath) {
if (targetPath) {
var newPath = Polymer.Path.translate(property, path, targetPath);
this._notifyPath(newPath, value);
} else {
value = target[property];
if (negated) {
value = !value;
}
if (!isStructured) {
this[path] = value;
} else {
if (this.__data__[path] != value) {
this.set(path, value);
}
}
}
};
},
prepareInstance: function (inst) {
inst.__data__ = Object.create(null);
},
setupBindListeners: function (inst) {
var b$ = inst._bindListeners;
for (var i = 0, l = b$.length, info; i < l && (info = b$[i]); i++) {
var node = inst._nodes[info.index];
this._addNotifyListener(node, inst, info.event, info.changedFn);
}
},
_addNotifyListener: function (element, context, event, changedFn) {
element.addEventListener(event, function (e) {
return context._notifyListener(changedFn, e);
});
}
};Polymer.Base.mixin(Polymer.Bind, {
_shouldAddListener: function (effect) {
return effect.name && effect.kind != 'attribute' && effect.kind != 'text' && !effect.isCompound && effect.parts[0].mode === '{';
},
_annotationEffect: function (source, value, effect) {
if (source != effect.value) {
value = this._get(effect.value);
this.__data__[effect.value] = value;
}
this._applyEffectValue(effect, value);
},
_reflectEffect: function (source, value, effect) {
this.reflectPropertyToAttribute(source, effect.attribute, value);
},
_notifyEffect: function (source, value, effect, old, fromAbove) {
if (!fromAbove) {
this._notifyChange(source, effect.event, value);
}
},
_functionEffect: function (source, value, fn, old, fromAbove) {
fn.call(this, source, value, old, fromAbove);
},
_observerEffect: function (source, value, effect, old) {
var fn = this[effect.method];
if (fn) {
fn.call(this, value, old);
} else {
this._warn(this._logf('_observerEffect', 'observer method `' + effect.method + '` not defined'));
}
},
_complexObserverEffect: function (source, value, effect) {
var fn = this[effect.method];
if (fn) {
var args = Polymer.Bind._marshalArgs(this.__data__, effect, source, value);
if (args) {
fn.apply(this, args);
}
} else if (effect.dynamicFn) {
} else {
this._warn(this._logf('_complexObserverEffect', 'observer method `' + effect.method + '` not defined'));
}
},
_computeEffect: function (source, value, effect) {
var fn = this[effect.method];
if (fn) {
var args = Polymer.Bind._marshalArgs(this.__data__, effect, source, value);
if (args) {
var computedvalue = fn.apply(this, args);
this.__setProperty(effect.name, computedvalue);
}
} else if (effect.dynamicFn) {
} else {
this._warn(this._logf('_computeEffect', 'compute method `' + effect.method + '` not defined'));
}
},
_annotatedComputationEffect: function (source, value, effect) {
var computedHost = this._rootDataHost || this;
var fn = computedHost[effect.method];
if (fn) {
var args = Polymer.Bind._marshalArgs(this.__data__, effect, source, value);
if (args) {
var computedvalue = fn.apply(computedHost, args);
this._applyEffectValue(effect, computedvalue);
}
} else if (effect.dynamicFn) {
} else {
computedHost._warn(computedHost._logf('_annotatedComputationEffect', 'compute method `' + effect.method + '` not defined'));
}
},
_marshalArgs: function (model, effect, path, value) {
var values = [];
var args = effect.args;
var bailoutEarly = args.length > 1 || effect.dynamicFn;
for (var i = 0, l = args.length; i < l; i++) {
var arg = args[i];
var name = arg.name;
var v;
if (arg.literal) {
v = arg.value;
} else if (path === name) {
v = value;
} else {
v = model[name];
if (v === undefined && arg.structured) {
v = Polymer.Base._get(name, model);
}
}
if (bailoutEarly && v === undefined) {
return;
}
if (arg.wildcard) {
var matches = Polymer.Path.isAncestor(path, name);
values[i] = {
path: matches ? path : name,
value: matches ? value : v,
base: v
};
} else {
values[i] = v;
}
}
return values;
}
});Polymer.Base._addFeature({
_addPropertyEffect: function (property, kind, effect) {
var prop = Polymer.Bind.addPropertyEffect(this, property, kind, effect);
prop.pathFn = this['_' + prop.kind + 'PathEffect'];
},
_prepEffects: function () {
Polymer.Bind.prepareModel(this);
this._addAnnotationEffects(this._notes);
},
_prepBindings: function () {
Polymer.Bind.createBindings(this);
},
_addPropertyEffects: function (properties) {
if (properties) {
for (var p in properties) {
var prop = properties[p];
if (prop.observer) {
this._addObserverEffect(p, prop.observer);
}
if (prop.computed) {
prop.readOnly = true;
this._addComputedEffect(p, prop.computed);
}
if (prop.notify) {
this._addPropertyEffect(p, 'notify', { event: Polymer.CaseMap.camelToDashCase(p) + '-changed' });
}
if (prop.reflectToAttribute) {
var attr = Polymer.CaseMap.camelToDashCase(p);
if (attr[0] === '-') {
this._warn(this._logf('_addPropertyEffects', 'Property ' + p + ' cannot be reflected to attribute ' + attr + ' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'));
} else {
this._addPropertyEffect(p, 'reflect', { attribute: attr });
}
}
if (prop.readOnly) {
Polymer.Bind.ensurePropertyEffects(this, p);
}
}
}
},
_addComputedEffect: function (name, expression) {
var sig = this._parseMethod(expression);
var dynamicFn = sig.dynamicFn;
for (var i = 0, arg; i < sig.args.length && (arg = sig.args[i]); i++) {
this._addPropertyEffect(arg.model, 'compute', {
method: sig.method,
args: sig.args,
trigger: arg,
name: name,
dynamicFn: dynamicFn
});
}
if (dynamicFn) {
this._addPropertyEffect(sig.method, 'compute', {
method: sig.method,
args: sig.args,
trigger: null,
name: name,
dynamicFn: dynamicFn
});
}
},
_addObserverEffect: function (property, observer) {
this._addPropertyEffect(property, 'observer', {
method: observer,
property: property
});
},
_addComplexObserverEffects: function (observers) {
if (observers) {
for (var i = 0, o; i < observers.length && (o = observers[i]); i++) {
this._addComplexObserverEffect(o);
}
}
},
_addComplexObserverEffect: function (observer) {
var sig = this._parseMethod(observer);
if (!sig) {
throw new Error('Malformed observer expression \'' + observer + '\'');
}
var dynamicFn = sig.dynamicFn;
for (var i = 0, arg; i < sig.args.length && (arg = sig.args[i]); i++) {
this._addPropertyEffect(arg.model, 'complexObserver', {
method: sig.method,
args: sig.args,
trigger: arg,
dynamicFn: dynamicFn
});
}
if (dynamicFn) {
this._addPropertyEffect(sig.method, 'complexObserver', {
method: sig.method,
args: sig.args,
trigger: null,
dynamicFn: dynamicFn
});
}
},
_addAnnotationEffects: function (notes) {
for (var i = 0, note; i < notes.length && (note = notes[i]); i++) {
var b$ = note.bindings;
for (var j = 0, binding; j < b$.length && (binding = b$[j]); j++) {
this._addAnnotationEffect(binding, i);
}
}
},
_addAnnotationEffect: function (note, index) {
if (Polymer.Bind._shouldAddListener(note)) {
Polymer.Bind._addAnnotatedListener(this, index, note.name, note.parts[0].value, note.parts[0].event, note.parts[0].negate);
}
for (var i = 0; i < note.parts.length; i++) {
var part = note.parts[i];
if (part.signature) {
this._addAnnotatedComputationEffect(note, part, index);
} else if (!part.literal) {
if (note.kind === 'attribute' && note.name[0] === '-') {
this._warn(this._logf('_addAnnotationEffect', 'Cannot set attribute ' + note.name + ' because "-" is not a valid attribute starting character'));
} else {
this._addPropertyEffect(part.model, 'annotation', {
kind: note.kind,
index: index,
name: note.name,
propertyName: note.propertyName,
value: part.value,
isCompound: note.isCompound,
compoundIndex: part.compoundIndex,
event: part.event,
customEvent: part.customEvent,
negate: part.negate
});
}
}
}
},
_addAnnotatedComputationEffect: function (note, part, index) {
var sig = part.signature;
if (sig.static) {
this.__addAnnotatedComputationEffect('__static__', index, note, part, null);
} else {
for (var i = 0, arg; i < sig.args.length && (arg = sig.args[i]); i++) {
if (!arg.literal) {
this.__addAnnotatedComputationEffect(arg.model, index, note, part, arg);
}
}
if (sig.dynamicFn) {
this.__addAnnotatedComputationEffect(sig.method, index, note, part, null);
}
}
},
__addAnnotatedComputationEffect: function (property, index, note, part, trigger) {
this._addPropertyEffect(property, 'annotatedComputation', {
index: index,
isCompound: note.isCompound,
compoundIndex: part.compoundIndex,
kind: note.kind,
name: note.name,
negate: part.negate,
method: part.signature.method,
args: part.signature.args,
trigger: trigger,
dynamicFn: part.signature.dynamicFn
});
},
_parseMethod: function (expression) {
var m = expression.match(/([^\s]+?)\(([\s\S]*)\)/);
if (m) {
var sig = {
method: m[1],
static: true
};
if (this.getPropertyInfo(sig.method) !== Polymer.nob) {
sig.static = false;
sig.dynamicFn = true;
}
if (m[2].trim()) {
var args = m[2].replace(/\\,/g, '&comma;').split(',');
return this._parseArgs(args, sig);
} else {
sig.args = Polymer.nar;
return sig;
}
}
},
_parseArgs: function (argList, sig) {
sig.args = argList.map(function (rawArg) {
var arg = this._parseArg(rawArg);
if (!arg.literal) {
sig.static = false;
}
return arg;
}, this);
return sig;
},
_parseArg: function (rawArg) {
var arg = rawArg.trim().replace(/&comma;/g, ',').replace(/\\(.)/g, '$1');
var a = { name: arg };
var fc = arg[0];
if (fc === '-') {
fc = arg[1];
}
if (fc >= '0' && fc <= '9') {
fc = '#';
}
switch (fc) {
case '\'':
case '"':
a.value = arg.slice(1, -1);
a.literal = true;
break;
case '#':
a.value = Number(arg);
a.literal = true;
break;
}
if (!a.literal) {
a.model = Polymer.Path.root(arg);
a.structured = Polymer.Path.isDeep(arg);
if (a.structured) {
a.wildcard = arg.slice(-2) == '.*';
if (a.wildcard) {
a.name = arg.slice(0, -2);
}
}
}
return a;
},
_marshalInstanceEffects: function () {
Polymer.Bind.prepareInstance(this);
if (this._bindListeners) {
Polymer.Bind.setupBindListeners(this);
}
},
_applyEffectValue: function (info, value) {
var node = this._nodes[info.index];
var property = info.name;
value = this._computeFinalAnnotationValue(node, property, value, info);
if (info.kind == 'attribute') {
this.serializeValueToAttribute(value, property, node);
} else {
var pinfo = node._propertyInfo && node._propertyInfo[property];
if (pinfo && pinfo.readOnly) {
return;
}
this.__setProperty(property, value, Polymer.Settings.suppressBindingNotifications, node);
}
},
_computeFinalAnnotationValue: function (node, property, value, info) {
if (info.negate) {
value = !value;
}
if (info.isCompound) {
var storage = node.__compoundStorage__[property];
storage[info.compoundIndex] = value;
value = storage.join('');
}
if (info.kind !== 'attribute') {
if (property === 'className') {
value = this._scopeElementClass(node, value);
}
if (property === 'textContent' || node.localName == 'input' && property == 'value') {
value = value == undefined ? '' : value;
}
}
return value;
},
_executeStaticEffects: function () {
if (this._propertyEffects && this._propertyEffects.__static__) {
this._effectEffects('__static__', null, this._propertyEffects.__static__);
}
}
});(function () {
var usePolyfillProto = Polymer.Settings.usePolyfillProto;
var avoidInstanceProperties = Boolean(Object.getOwnPropertyDescriptor(document.documentElement, 'properties'));
Polymer.Base._addFeature({
_setupConfigure: function (initialConfig) {
this._config = {};
this._handlers = [];
this._aboveConfig = null;
if (initialConfig) {
for (var i in initialConfig) {
if (initialConfig[i] !== undefined) {
this._config[i] = initialConfig[i];
}
}
}
},
_marshalAttributes: function () {
this._takeAttributesToModel(this._config);
},
_attributeChangedImpl: function (name) {
var model = this._clientsReadied ? this : this._config;
this._setAttributeToProperty(model, name);
},
_configValue: function (name, value) {
var info = this._propertyInfo[name];
if (!info || !info.readOnly) {
this._config[name] = value;
}
},
_beforeClientsReady: function () {
this._configure();
},
_configure: function () {
this._configureAnnotationReferences();
this._configureInstanceProperties();
this._aboveConfig = this.mixin({}, this._config);
var config = {};
for (var i = 0; i < this.behaviors.length; i++) {
this._configureProperties(this.behaviors[i].properties, config);
}
this._configureProperties(avoidInstanceProperties ? this.__proto__.properties : this.properties, config);
this.mixin(config, this._aboveConfig);
this._config = config;
if (this._clients && this._clients.length) {
this._distributeConfig(this._config);
}
},
_configureInstanceProperties: function () {
for (var i in this._propertyEffects) {
if (!usePolyfillProto && this.hasOwnProperty(i)) {
this._configValue(i, this[i]);
delete this[i];
}
}
},
_configureProperties: function (properties, config) {
for (var i in properties) {
var c = properties[i];
if (c.value !== undefined) {
var value = c.value;
if (typeof value == 'function') {
value = value.call(this, this._config);
}
config[i] = value;
}
}
},
_distributeConfig: function (config) {
var fx$ = this._propertyEffects;
if (fx$) {
for (var p in config) {
var fx = fx$[p];
if (fx) {
for (var i = 0, l = fx.length, x; i < l && (x = fx[i]); i++) {
if (x.kind === 'annotation') {
var node = this._nodes[x.effect.index];
var name = x.effect.propertyName;
var isAttr = x.effect.kind == 'attribute';
var hasEffect = node._propertyEffects && node._propertyEffects[name];
if (node._configValue && (hasEffect || !isAttr)) {
var value = p === x.effect.value ? config[p] : this._get(x.effect.value, config);
value = this._computeFinalAnnotationValue(node, name, value, x.effect);
if (isAttr) {
value = node.deserialize(this.serialize(value), node._propertyInfo[name].type);
}
node._configValue(name, value);
}
}
}
}
}
}
},
_afterClientsReady: function () {
this.importPath = this._importPath;
this.rootPath = Polymer.rootPath;
this._executeStaticEffects();
this._applyConfig(this._config, this._aboveConfig);
this._flushHandlers();
},
_applyConfig: function (config, aboveConfig) {
for (var n in config) {
if (this[n] === undefined) {
this.__setProperty(n, config[n], n in aboveConfig);
}
}
},
_notifyListener: function (fn, e) {
if (!Polymer.Bind._isEventBogus(e, e.target)) {
var value, path;
if (e.detail) {
value = e.detail.value;
path = e.detail.path;
}
if (!this._clientsReadied) {
this._queueHandler([
fn,
e.target,
value,
path
]);
} else {
return fn.call(this, e.target, value, path);
}
}
},
_queueHandler: function (args) {
this._handlers.push(args);
},
_flushHandlers: function () {
var h$ = this._handlers;
for (var i = 0, l = h$.length, h; i < l && (h = h$[i]); i++) {
h[0].call(this, h[1], h[2], h[3]);
}
this._handlers = [];
}
});
}());(function () {
'use strict';
var Path = Polymer.Path;
Polymer.Base._addFeature({
notifyPath: function (path, value, fromAbove) {
var info = {};
var v = this._get(path, this, info);
if (arguments.length === 1) {
value = v;
}
if (info.path) {
this._notifyPath(info.path, value, fromAbove);
}
},
_notifyPath: function (path, value, fromAbove) {
var old = this._propertySetter(path, value);
if (old !== value && (old === old || value === value)) {
this._pathEffector(path, value);
if (!fromAbove) {
this._notifyPathUp(path, value);
}
return true;
}
},
_getPathParts: function (path) {
if (Array.isArray(path)) {
var parts = [];
for (var i = 0; i < path.length; i++) {
var args = path[i].toString().split('.');
for (var j = 0; j < args.length; j++) {
parts.push(args[j]);
}
}
return parts;
} else {
return path.toString().split('.');
}
},
set: function (path, value, root) {
var prop = root || this;
var parts = this._getPathParts(path);
var array;
var last = parts[parts.length - 1];
if (parts.length > 1) {
for (var i = 0; i < parts.length - 1; i++) {
var part = parts[i];
if (array && part[0] == '#') {
prop = Polymer.Collection.get(array).getItem(part);
} else {
prop = prop[part];
if (array && parseInt(part, 10) == part) {
parts[i] = Polymer.Collection.get(array).getKey(prop);
}
}
if (!prop) {
return;
}
array = Array.isArray(prop) ? prop : null;
}
if (array) {
var coll = Polymer.Collection.get(array);
var old, key;
if (last[0] == '#') {
key = last;
old = coll.getItem(key);
last = array.indexOf(old);
coll.setItem(key, value);
} else if (parseInt(last, 10) == last) {
old = prop[last];
key = coll.getKey(old);
parts[i] = key;
coll.setItem(key, value);
}
}
prop[last] = value;
if (!root) {
this._notifyPath(parts.join('.'), value);
}
} else {
prop[path] = value;
}
},
get: function (path, root) {
return this._get(path, root);
},
_get: function (path, root, info) {
var prop = root || this;
var parts = this._getPathParts(path);
var array;
for (var i = 0; i < parts.length; i++) {
if (!prop) {
return;
}
var part = parts[i];
if (array && part[0] == '#') {
prop = Polymer.Collection.get(array).getItem(part);
} else {
prop = prop[part];
if (info && array && parseInt(part, 10) == part) {
parts[i] = Polymer.Collection.get(array).getKey(prop);
}
}
array = Array.isArray(prop) ? prop : null;
}
if (info) {
info.path = parts.join('.');
}
return prop;
},
_pathEffector: function (path, value) {
var model = Path.root(path);
var fx$ = this._propertyEffects && this._propertyEffects[model];
if (fx$) {
for (var i = 0, fx; i < fx$.length && (fx = fx$[i]); i++) {
var fxFn = fx.pathFn;
if (fxFn) {
fxFn.call(this, path, value, fx.effect);
}
}
}
if (this._boundPaths) {
this._notifyBoundPaths(path, value);
}
},
_annotationPathEffect: function (path, value, effect) {
if (Path.matches(effect.value, false, path)) {
Polymer.Bind._annotationEffect.call(this, path, value, effect);
} else if (!effect.negate && Path.isDescendant(effect.value, path)) {
var node = this._nodes[effect.index];
if (node && node._notifyPath) {
var newPath = Path.translate(effect.value, effect.name, path);
node._notifyPath(newPath, value, true);
}
}
},
_complexObserverPathEffect: function (path, value, effect) {
if (Path.matches(effect.trigger.name, effect.trigger.wildcard, path)) {
Polymer.Bind._complexObserverEffect.call(this, path, value, effect);
}
},
_computePathEffect: function (path, value, effect) {
if (Path.matches(effect.trigger.name, effect.trigger.wildcard, path)) {
Polymer.Bind._computeEffect.call(this, path, value, effect);
}
},
_annotatedComputationPathEffect: function (path, value, effect) {
if (Path.matches(effect.trigger.name, effect.trigger.wildcard, path)) {
Polymer.Bind._annotatedComputationEffect.call(this, path, value, effect);
}
},
linkPaths: function (to, from) {
this._boundPaths = this._boundPaths || {};
if (from) {
this._boundPaths[to] = from;
} else {
this.unlinkPaths(to);
}
},
unlinkPaths: function (path) {
if (this._boundPaths) {
delete this._boundPaths[path];
}
},
_notifyBoundPaths: function (path, value) {
for (var a in this._boundPaths) {
var b = this._boundPaths[a];
if (Path.isDescendant(a, path)) {
this._notifyPath(Path.translate(a, b, path), value);
} else if (Path.isDescendant(b, path)) {
this._notifyPath(Path.translate(b, a, path), value);
}
}
},
_notifyPathUp: function (path, value) {
var rootName = Path.root(path);
var dashCaseName = Polymer.CaseMap.camelToDashCase(rootName);
var eventName = dashCaseName + this._EVENT_CHANGED;
this.fire(eventName, {
path: path,
value: value
}, {
bubbles: false,
_useCache: Polymer.Settings.eventDataCache || !Polymer.Settings.isIE
});
},
_EVENT_CHANGED: '-changed',
notifySplices: function (path, splices) {
var info = {};
var array = this._get(path, this, info);
this._notifySplices(array, info.path, splices);
},
_notifySplices: function (array, path, splices) {
var change = {
keySplices: Polymer.Collection.applySplices(array, splices),
indexSplices: splices
};
var splicesPath = path + '.splices';
this._notifyPath(splicesPath, change);
this._notifyPath(path + '.length', array.length);
this.__data__[splicesPath] = {
keySplices: null,
indexSplices: null
};
},
_notifySplice: function (array, path, index, added, removed) {
this._notifySplices(array, path, [{
index: index,
addedCount: added,
removed: removed,
object: array,
type: 'splice'
}]);
},
push: function (path) {
var info = {};
var array = this._get(path, this, info);
var args = Array.prototype.slice.call(arguments, 1);
var len = array.length;
var ret = array.push.apply(array, args);
if (args.length) {
this._notifySplice(array, info.path, len, args.length, []);
}
return ret;
},
pop: function (path) {
var info = {};
var array = this._get(path, this, info);
var hadLength = Boolean(array.length);
var args = Array.prototype.slice.call(arguments, 1);
var ret = array.pop.apply(array, args);
if (hadLength) {
this._notifySplice(array, info.path, array.length, 0, [ret]);
}
return ret;
},
splice: function (path, start) {
var info = {};
var array = this._get(path, this, info);
if (start < 0) {
start = array.length - Math.floor(-start);
} else {
start = Math.floor(start);
}
if (!start) {
start = 0;
}
var args = Array.prototype.slice.call(arguments, 1);
var ret = array.splice.apply(array, args);
var addedCount = Math.max(args.length - 2, 0);
if (addedCount || ret.length) {
this._notifySplice(array, info.path, start, addedCount, ret);
}
return ret;
},
shift: function (path) {
var info = {};
var array = this._get(path, this, info);
var hadLength = Boolean(array.length);
var args = Array.prototype.slice.call(arguments, 1);
var ret = array.shift.apply(array, args);
if (hadLength) {
this._notifySplice(array, info.path, 0, 0, [ret]);
}
return ret;
},
unshift: function (path) {
var info = {};
var array = this._get(path, this, info);
var args = Array.prototype.slice.call(arguments, 1);
var ret = array.unshift.apply(array, args);
if (args.length) {
this._notifySplice(array, info.path, 0, args.length, []);
}
return ret;
},
prepareModelNotifyPath: function (model) {
this.mixin(model, {
fire: Polymer.Base.fire,
_getEvent: Polymer.Base._getEvent,
__eventCache: Polymer.Base.__eventCache,
notifyPath: Polymer.Base.notifyPath,
_get: Polymer.Base._get,
_EVENT_CHANGED: Polymer.Base._EVENT_CHANGED,
_notifyPath: Polymer.Base._notifyPath,
_notifyPathUp: Polymer.Base._notifyPathUp,
_pathEffector: Polymer.Base._pathEffector,
_annotationPathEffect: Polymer.Base._annotationPathEffect,
_complexObserverPathEffect: Polymer.Base._complexObserverPathEffect,
_annotatedComputationPathEffect: Polymer.Base._annotatedComputationPathEffect,
_computePathEffect: Polymer.Base._computePathEffect,
_notifyBoundPaths: Polymer.Base._notifyBoundPaths,
_getPathParts: Polymer.Base._getPathParts
});
}
});
}());Polymer.Base._addFeature({
resolveUrl: function (url) {
return Polymer.ResolveUrl.resolveUrl(url, this._importPath);
}
});Polymer.CssParse = function () {
return {
parse: function (text) {
text = this._clean(text);
return this._parseCss(this._lex(text), text);
},
_clean: function (cssText) {
return cssText.replace(this._rx.comments, '').replace(this._rx.port, '');
},
_lex: function (text) {
var root = {
start: 0,
end: text.length
};
var n = root;
for (var i = 0, l = text.length; i < l; i++) {
switch (text[i]) {
case this.OPEN_BRACE:
if (!n.rules) {
n.rules = [];
}
var p = n;
var previous = p.rules[p.rules.length - 1];
n = {
start: i + 1,
parent: p,
previous: previous
};
p.rules.push(n);
break;
case this.CLOSE_BRACE:
n.end = i + 1;
n = n.parent || root;
break;
}
}
return root;
},
_parseCss: function (node, text) {
var t = text.substring(node.start, node.end - 1);
node.parsedCssText = node.cssText = t.trim();
if (node.parent) {
var ss = node.previous ? node.previous.end : node.parent.start;
t = text.substring(ss, node.start - 1);
t = this._expandUnicodeEscapes(t);
t = t.replace(this._rx.multipleSpaces, ' ');
t = t.substring(t.lastIndexOf(';') + 1);
var s = node.parsedSelector = node.selector = t.trim();
node.atRule = s.indexOf(this.AT_START) === 0;
if (node.atRule) {
if (s.indexOf(this.MEDIA_START) === 0) {
node.type = this.types.MEDIA_RULE;
} else if (s.match(this._rx.keyframesRule)) {
node.type = this.types.KEYFRAMES_RULE;
node.keyframesName = node.selector.split(this._rx.multipleSpaces).pop();
}
} else {
if (s.indexOf(this.VAR_START) === 0) {
node.type = this.types.MIXIN_RULE;
} else {
node.type = this.types.STYLE_RULE;
}
}
}
var r$ = node.rules;
if (r$) {
for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {
this._parseCss(r, text);
}
}
return node;
},
_expandUnicodeEscapes: function (s) {
return s.replace(/\\([0-9a-f]{1,6})\s/gi, function () {
var code = arguments[1], repeat = 6 - code.length;
while (repeat--) {
code = '0' + code;
}
return '\\' + code;
});
},
stringify: function (node, preserveProperties, text) {
text = text || '';
var cssText = '';
if (node.cssText || node.rules) {
var r$ = node.rules;
if (r$ && !this._hasMixinRules(r$)) {
for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {
cssText = this.stringify(r, preserveProperties, cssText);
}
} else {
cssText = preserveProperties ? node.cssText : this.removeCustomProps(node.cssText);
cssText = cssText.trim();
if (cssText) {
cssText = '  ' + cssText + '\n';
}
}
}
if (cssText) {
if (node.selector) {
text += node.selector + ' ' + this.OPEN_BRACE + '\n';
}
text += cssText;
if (node.selector) {
text += this.CLOSE_BRACE + '\n\n';
}
}
return text;
},
_hasMixinRules: function (rules) {
return rules[0].selector.indexOf(this.VAR_START) === 0;
},
removeCustomProps: function (cssText) {
cssText = this.removeCustomPropAssignment(cssText);
return this.removeCustomPropApply(cssText);
},
removeCustomPropAssignment: function (cssText) {
return cssText.replace(this._rx.customProp, '').replace(this._rx.mixinProp, '');
},
removeCustomPropApply: function (cssText) {
return cssText.replace(this._rx.mixinApply, '').replace(this._rx.varApply, '');
},
types: {
STYLE_RULE: 1,
KEYFRAMES_RULE: 7,
MEDIA_RULE: 4,
MIXIN_RULE: 1000
},
OPEN_BRACE: '{',
CLOSE_BRACE: '}',
_rx: {
comments: /\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,
port: /@import[^;]*;/gim,
customProp: /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,
mixinProp: /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,
mixinApply: /@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,
varApply: /[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,
keyframesRule: /^@[^\s]*keyframes/,
multipleSpaces: /\s+/g
},
VAR_START: '--',
MEDIA_START: '@media',
AT_START: '@'
};
}();Polymer.StyleUtil = function () {
var settings = Polymer.Settings;
return {
NATIVE_VARIABLES: Polymer.Settings.useNativeCSSProperties,
MODULE_STYLES_SELECTOR: 'style, link[rel=import][type~=css], template',
INCLUDE_ATTR: 'include',
toCssText: function (rules, callback) {
if (typeof rules === 'string') {
rules = this.parser.parse(rules);
}
if (callback) {
this.forEachRule(rules, callback);
}
return this.parser.stringify(rules, this.NATIVE_VARIABLES);
},
forRulesInStyles: function (styles, styleRuleCallback, keyframesRuleCallback) {
if (styles) {
for (var i = 0, l = styles.length, s; i < l && (s = styles[i]); i++) {
this.forEachRuleInStyle(s, styleRuleCallback, keyframesRuleCallback);
}
}
},
forActiveRulesInStyles: function (styles, styleRuleCallback, keyframesRuleCallback) {
if (styles) {
for (var i = 0, l = styles.length, s; i < l && (s = styles[i]); i++) {
this.forEachRuleInStyle(s, styleRuleCallback, keyframesRuleCallback, true);
}
}
},
rulesForStyle: function (style) {
if (!style.__cssRules && style.textContent) {
style.__cssRules = this.parser.parse(style.textContent);
}
return style.__cssRules;
},
isKeyframesSelector: function (rule) {
return rule.parent && rule.parent.type === this.ruleTypes.KEYFRAMES_RULE;
},
forEachRuleInStyle: function (style, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {
var rules = this.rulesForStyle(style);
var styleCallback, keyframeCallback;
if (styleRuleCallback) {
styleCallback = function (rule) {
styleRuleCallback(rule, style);
};
}
if (keyframesRuleCallback) {
keyframeCallback = function (rule) {
keyframesRuleCallback(rule, style);
};
}
this.forEachRule(rules, styleCallback, keyframeCallback, onlyActiveRules);
},
forEachRule: function (node, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {
if (!node) {
return;
}
var skipRules = false;
if (onlyActiveRules) {
if (node.type === this.ruleTypes.MEDIA_RULE) {
var matchMedia = node.selector.match(this.rx.MEDIA_MATCH);
if (matchMedia) {
if (!window.matchMedia(matchMedia[1]).matches) {
skipRules = true;
}
}
}
}
if (node.type === this.ruleTypes.STYLE_RULE) {
styleRuleCallback(node);
} else if (keyframesRuleCallback && node.type === this.ruleTypes.KEYFRAMES_RULE) {
keyframesRuleCallback(node);
} else if (node.type === this.ruleTypes.MIXIN_RULE) {
skipRules = true;
}
var r$ = node.rules;
if (r$ && !skipRules) {
for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {
this.forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);
}
}
},
applyCss: function (cssText, moniker, target, contextNode) {
var style = this.createScopeStyle(cssText, moniker);
return this.applyStyle(style, target, contextNode);
},
applyStyle: function (style, target, contextNode) {
target = target || document.head;
var after = contextNode && contextNode.nextSibling || target.firstChild;
this.__lastHeadApplyNode = style;
return target.insertBefore(style, after);
},
createScopeStyle: function (cssText, moniker) {
var style = document.createElement('style');
if (moniker) {
style.setAttribute('scope', moniker);
}
style.textContent = cssText;
return style;
},
__lastHeadApplyNode: null,
applyStylePlaceHolder: function (moniker) {
var placeHolder = document.createComment(' Shady DOM styles for ' + moniker + ' ');
var after = this.__lastHeadApplyNode ? this.__lastHeadApplyNode.nextSibling : null;
var scope = document.head;
scope.insertBefore(placeHolder, after || scope.firstChild);
this.__lastHeadApplyNode = placeHolder;
return placeHolder;
},
cssFromModules: function (moduleIds, warnIfNotFound) {
var modules = moduleIds.trim().split(' ');
var cssText = '';
for (var i = 0; i < modules.length; i++) {
cssText += this.cssFromModule(modules[i], warnIfNotFound);
}
return cssText;
},
cssFromModule: function (moduleId, warnIfNotFound) {
var m = Polymer.DomModule.import(moduleId);
if (m && !m._cssText) {
m._cssText = this.cssFromElement(m);
}
if (!m && warnIfNotFound) {
console.warn('Could not find style data in module named', moduleId);
}
return m && m._cssText || '';
},
cssFromElement: function (element) {
var cssText = '';
var content = element.content || element;
var e$ = Polymer.TreeApi.arrayCopy(content.querySelectorAll(this.MODULE_STYLES_SELECTOR));
for (var i = 0, e; i < e$.length; i++) {
e = e$[i];
if (e.localName === 'template') {
if (!e.hasAttribute('preserve-content')) {
cssText += this.cssFromElement(e);
}
} else {
if (e.localName === 'style') {
var include = e.getAttribute(this.INCLUDE_ATTR);
if (include) {
cssText += this.cssFromModules(include, true);
}
e = e.__appliedElement || e;
e.parentNode.removeChild(e);
cssText += this.resolveCss(e.textContent, element.ownerDocument);
} else if (e.import && e.import.body) {
cssText += this.resolveCss(e.import.body.textContent, e.import);
}
}
}
return cssText;
},
styleIncludesToTemplate: function (targetTemplate) {
var styles = targetTemplate.content.querySelectorAll('style[include]');
for (var i = 0, s; i < styles.length; i++) {
s = styles[i];
s.parentNode.insertBefore(this._includesToFragment(s.getAttribute('include')), s);
}
},
_includesToFragment: function (styleIncludes) {
var includeArray = styleIncludes.trim().split(' ');
var frag = document.createDocumentFragment();
for (var i = 0; i < includeArray.length; i++) {
var t = Polymer.DomModule.import(includeArray[i], 'template');
if (t) {
this._addStylesToFragment(frag, t.content);
}
}
return frag;
},
_addStylesToFragment: function (frag, source) {
var s$ = source.querySelectorAll('style');
for (var i = 0, s; i < s$.length; i++) {
s = s$[i];
var include = s.getAttribute('include');
if (include) {
frag.appendChild(this._includesToFragment(include));
}
if (s.textContent) {
frag.appendChild(s.cloneNode(true));
}
}
},
isTargetedBuild: function (buildType) {
return settings.useNativeShadow ? buildType === 'shadow' : buildType === 'shady';
},
cssBuildTypeForModule: function (module) {
var dm = Polymer.DomModule.import(module);
if (dm) {
return this.getCssBuildType(dm);
}
},
getCssBuildType: function (element) {
return element.getAttribute('css-build');
},
_findMatchingParen: function (text, start) {
var level = 0;
for (var i = start, l = text.length; i < l; i++) {
switch (text[i]) {
case '(':
level++;
break;
case ')':
if (--level === 0) {
return i;
}
break;
}
}
return -1;
},
processVariableAndFallback: function (str, callback) {
var start = str.indexOf('var(');
if (start === -1) {
return callback(str, '', '', '');
}
var end = this._findMatchingParen(str, start + 3);
var inner = str.substring(start + 4, end);
var prefix = str.substring(0, start);
var suffix = this.processVariableAndFallback(str.substring(end + 1), callback);
var comma = inner.indexOf(',');
if (comma === -1) {
return callback(prefix, inner.trim(), '', suffix);
}
var value = inner.substring(0, comma).trim();
var fallback = inner.substring(comma + 1).trim();
return callback(prefix, value, fallback, suffix);
},
rx: {
VAR_ASSIGN: /(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,
MIXIN_MATCH: /(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,
VAR_CONSUMED: /(--[\w-]+)\s*([:,;)]|$)/gi,
ANIMATION_MATCH: /(animation\s*:)|(animation-name\s*:)/,
MEDIA_MATCH: /@media[^(]*(\([^)]*\))/,
IS_VAR: /^--/,
BRACKETED: /\{[^}]*\}/g,
HOST_PREFIX: '(?:^|[^.#[:])',
HOST_SUFFIX: '($|[.:[\\s>+~])'
},
resolveCss: Polymer.ResolveUrl.resolveCss,
parser: Polymer.CssParse,
ruleTypes: Polymer.CssParse.types
};
}();Polymer.StyleTransformer = function () {
var styleUtil = Polymer.StyleUtil;
var settings = Polymer.Settings;
var api = {
dom: function (node, scope, useAttr, shouldRemoveScope) {
this._transformDom(node, scope || '', useAttr, shouldRemoveScope);
},
_transformDom: function (node, selector, useAttr, shouldRemoveScope) {
if (node.setAttribute) {
this.element(node, selector, useAttr, shouldRemoveScope);
}
var c$ = Polymer.dom(node).childNodes;
for (var i = 0; i < c$.length; i++) {
this._transformDom(c$[i], selector, useAttr, shouldRemoveScope);
}
},
element: function (element, scope, useAttr, shouldRemoveScope) {
if (useAttr) {
if (shouldRemoveScope) {
element.removeAttribute(SCOPE_NAME);
} else {
element.setAttribute(SCOPE_NAME, scope);
}
} else {
if (scope) {
if (element.classList) {
if (shouldRemoveScope) {
element.classList.remove(SCOPE_NAME);
element.classList.remove(scope);
} else {
element.classList.add(SCOPE_NAME);
element.classList.add(scope);
}
} else if (element.getAttribute) {
var c = element.getAttribute(CLASS);
if (shouldRemoveScope) {
if (c) {
element.setAttribute(CLASS, c.replace(SCOPE_NAME, '').replace(scope, ''));
}
} else {
element.setAttribute(CLASS, (c ? c + ' ' : '') + SCOPE_NAME + ' ' + scope);
}
}
}
}
},
elementStyles: function (element, callback) {
var styles = element._styles;
var cssText = '';
var cssBuildType = element.__cssBuild;
var passthrough = settings.useNativeShadow || cssBuildType === 'shady';
var cb;
if (passthrough) {
var self = this;
cb = function (rule) {
rule.selector = self._slottedToContent(rule.selector);
rule.selector = rule.selector.replace(ROOT, ':host > *');
if (callback) {
callback(rule);
}
};
}
for (var i = 0, l = styles.length, s; i < l && (s = styles[i]); i++) {
var rules = styleUtil.rulesForStyle(s);
cssText += passthrough ? styleUtil.toCssText(rules, cb) : this.css(rules, element.is, element.extends, callback, element._scopeCssViaAttr) + '\n\n';
}
return cssText.trim();
},
css: function (rules, scope, ext, callback, useAttr) {
var hostScope = this._calcHostScope(scope, ext);
scope = this._calcElementScope(scope, useAttr);
var self = this;
return styleUtil.toCssText(rules, function (rule) {
if (!rule.isScoped) {
self.rule(rule, scope, hostScope);
rule.isScoped = true;
}
if (callback) {
callback(rule, scope, hostScope);
}
});
},
_calcElementScope: function (scope, useAttr) {
if (scope) {
return useAttr ? CSS_ATTR_PREFIX + scope + CSS_ATTR_SUFFIX : CSS_CLASS_PREFIX + scope;
} else {
return '';
}
},
_calcHostScope: function (scope, ext) {
return ext ? '[is=' + scope + ']' : scope;
},
rule: function (rule, scope, hostScope) {
this._transformRule(rule, this._transformComplexSelector, scope, hostScope);
},
_transformRule: function (rule, transformer, scope, hostScope) {
rule.selector = rule.transformedSelector = this._transformRuleCss(rule, transformer, scope, hostScope);
},
_transformRuleCss: function (rule, transformer, scope, hostScope) {
var p$ = rule.selector.split(COMPLEX_SELECTOR_SEP);
if (!styleUtil.isKeyframesSelector(rule)) {
for (var i = 0, l = p$.length, p; i < l && (p = p$[i]); i++) {
p$[i] = transformer.call(this, p, scope, hostScope);
}
}
return p$.join(COMPLEX_SELECTOR_SEP);
},
_transformComplexSelector: function (selector, scope, hostScope) {
var stop = false;
var hostContext = false;
var self = this;
selector = selector.trim();
selector = this._slottedToContent(selector);
selector = selector.replace(ROOT, ':host > *');
selector = selector.replace(CONTENT_START, HOST + ' $1');
selector = selector.replace(SIMPLE_SELECTOR_SEP, function (m, c, s) {
if (!stop) {
var info = self._transformCompoundSelector(s, c, scope, hostScope);
stop = stop || info.stop;
hostContext = hostContext || info.hostContext;
c = info.combinator;
s = info.value;
} else {
s = s.replace(SCOPE_JUMP, ' ');
}
return c + s;
});
if (hostContext) {
selector = selector.replace(HOST_CONTEXT_PAREN, function (m, pre, paren, post) {
return pre + paren + ' ' + hostScope + post + COMPLEX_SELECTOR_SEP + ' ' + pre + hostScope + paren + post;
});
}
return selector;
},
_transformCompoundSelector: function (selector, combinator, scope, hostScope) {
var jumpIndex = selector.search(SCOPE_JUMP);
var hostContext = false;
if (selector.indexOf(HOST_CONTEXT) >= 0) {
hostContext = true;
} else if (selector.indexOf(HOST) >= 0) {
selector = this._transformHostSelector(selector, hostScope);
} else if (jumpIndex !== 0) {
selector = scope ? this._transformSimpleSelector(selector, scope) : selector;
}
if (selector.indexOf(CONTENT) >= 0) {
combinator = '';
}
var stop;
if (jumpIndex >= 0) {
selector = selector.replace(SCOPE_JUMP, ' ');
stop = true;
}
return {
value: selector,
combinator: combinator,
stop: stop,
hostContext: hostContext
};
},
_transformSimpleSelector: function (selector, scope) {
var p$ = selector.split(PSEUDO_PREFIX);
p$[0] += scope;
return p$.join(PSEUDO_PREFIX);
},
_transformHostSelector: function (selector, hostScope) {
var m = selector.match(HOST_PAREN);
var paren = m && m[2].trim() || '';
if (paren) {
if (!paren[0].match(SIMPLE_SELECTOR_PREFIX)) {
var typeSelector = paren.split(SIMPLE_SELECTOR_PREFIX)[0];
if (typeSelector === hostScope) {
return paren;
} else {
return SELECTOR_NO_MATCH;
}
} else {
return selector.replace(HOST_PAREN, function (m, host, paren) {
return hostScope + paren;
});
}
} else {
return selector.replace(HOST, hostScope);
}
},
documentRule: function (rule) {
rule.selector = rule.parsedSelector;
this.normalizeRootSelector(rule);
if (!settings.useNativeShadow) {
this._transformRule(rule, this._transformDocumentSelector);
}
},
normalizeRootSelector: function (rule) {
rule.selector = rule.selector.replace(ROOT, 'html');
},
_transformDocumentSelector: function (selector) {
return selector.match(SCOPE_JUMP) ? this._transformComplexSelector(selector, SCOPE_DOC_SELECTOR) : this._transformSimpleSelector(selector.trim(), SCOPE_DOC_SELECTOR);
},
_slottedToContent: function (cssText) {
return cssText.replace(SLOTTED_PAREN, CONTENT + '> $1');
},
SCOPE_NAME: 'style-scope'
};
var SCOPE_NAME = api.SCOPE_NAME;
var SCOPE_DOC_SELECTOR = ':not([' + SCOPE_NAME + '])' + ':not(.' + SCOPE_NAME + ')';
var COMPLEX_SELECTOR_SEP = ',';
var SIMPLE_SELECTOR_SEP = /(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g;
var SIMPLE_SELECTOR_PREFIX = /[[.:#*]/;
var HOST = ':host';
var ROOT = ':root';
var HOST_PAREN = /(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/;
var HOST_CONTEXT = ':host-context';
var HOST_CONTEXT_PAREN = /(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/;
var CONTENT = '::content';
var SCOPE_JUMP = /::content|::shadow|\/deep\//;
var CSS_CLASS_PREFIX = '.';
var CSS_ATTR_PREFIX = '[' + SCOPE_NAME + '~=';
var CSS_ATTR_SUFFIX = ']';
var PSEUDO_PREFIX = ':';
var CLASS = 'class';
var CONTENT_START = new RegExp('^(' + CONTENT + ')');
var SELECTOR_NO_MATCH = 'should_not_match';
var SLOTTED_PAREN = /(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g;
return api;
}();Polymer.StyleExtends = function () {
var styleUtil = Polymer.StyleUtil;
return {
hasExtends: function (cssText) {
return Boolean(cssText.match(this.rx.EXTEND));
},
transform: function (style) {
var rules = styleUtil.rulesForStyle(style);
var self = this;
styleUtil.forEachRule(rules, function (rule) {
self._mapRuleOntoParent(rule);
if (rule.parent) {
var m;
while (m = self.rx.EXTEND.exec(rule.cssText)) {
var extend = m[1];
var extendor = self._findExtendor(extend, rule);
if (extendor) {
self._extendRule(rule, extendor);
}
}
}
rule.cssText = rule.cssText.replace(self.rx.EXTEND, '');
});
return styleUtil.toCssText(rules, function (rule) {
if (rule.selector.match(self.rx.STRIP)) {
rule.cssText = '';
}
}, true);
},
_mapRuleOntoParent: function (rule) {
if (rule.parent) {
var map = rule.parent.map || (rule.parent.map = {});
var parts = rule.selector.split(',');
for (var i = 0, p; i < parts.length; i++) {
p = parts[i];
map[p.trim()] = rule;
}
return map;
}
},
_findExtendor: function (extend, rule) {
return rule.parent && rule.parent.map && rule.parent.map[extend] || this._findExtendor(extend, rule.parent);
},
_extendRule: function (target, source) {
if (target.parent !== source.parent) {
this._cloneAndAddRuleToParent(source, target.parent);
}
target.extends = target.extends || [];
target.extends.push(source);
source.selector = source.selector.replace(this.rx.STRIP, '');
source.selector = (source.selector && source.selector + ',\n') + target.selector;
if (source.extends) {
source.extends.forEach(function (e) {
this._extendRule(target, e);
}, this);
}
},
_cloneAndAddRuleToParent: function (rule, parent) {
rule = Object.create(rule);
rule.parent = parent;
if (rule.extends) {
rule.extends = rule.extends.slice();
}
parent.rules.push(rule);
},
rx: {
EXTEND: /@extends\(([^)]*)\)\s*?;/gim,
STRIP: /%[^,]*$/
}
};
}();Polymer.ApplyShim = function () {
'use strict';
var styleUtil = Polymer.StyleUtil;
var MIXIN_MATCH = styleUtil.rx.MIXIN_MATCH;
var VAR_ASSIGN = styleUtil.rx.VAR_ASSIGN;
var BAD_VAR = /var\(\s*(--[^,]*),\s*(--[^)]*)\)/g;
var APPLY_NAME_CLEAN = /;\s*/m;
var INITIAL_INHERIT = /^\s*(initial)|(inherit)\s*$/;
var MIXIN_VAR_SEP = '_-_';
var mixinMap = {};
function mapSet(name, props) {
name = name.trim();
mixinMap[name] = {
properties: props,
dependants: {}
};
}
function mapGet(name) {
name = name.trim();
return mixinMap[name];
}
function replaceInitialOrInherit(property, value) {
var match = INITIAL_INHERIT.exec(value);
if (match) {
if (match[1]) {
value = ApplyShim._getInitialValueForProperty(property);
} else {
value = 'apply-shim-inherit';
}
}
return value;
}
function cssTextToMap(text) {
var props = text.split(';');
var property, value;
var out = {};
for (var i = 0, p, sp; i < props.length; i++) {
p = props[i];
if (p) {
sp = p.split(':');
if (sp.length > 1) {
property = sp[0].trim();
value = replaceInitialOrInherit(property, sp.slice(1).join(':'));
out[property] = value;
}
}
}
return out;
}
function invalidateMixinEntry(mixinEntry) {
var currentProto = ApplyShim.__currentElementProto;
var currentElementName = currentProto && currentProto.is;
for (var elementName in mixinEntry.dependants) {
if (elementName !== currentElementName) {
mixinEntry.dependants[elementName].__applyShimInvalid = true;
}
}
}
function produceCssProperties(matchText, propertyName, valueProperty, valueMixin) {
if (valueProperty) {
styleUtil.processVariableAndFallback(valueProperty, function (prefix, value) {
if (value && mapGet(value)) {
valueMixin = '@apply ' + value + ';';
}
});
}
if (!valueMixin) {
return matchText;
}
var mixinAsProperties = consumeCssProperties(valueMixin);
var prefix = matchText.slice(0, matchText.indexOf('--'));
var mixinValues = cssTextToMap(mixinAsProperties);
var combinedProps = mixinValues;
var mixinEntry = mapGet(propertyName);
var oldProps = mixinEntry && mixinEntry.properties;
if (oldProps) {
combinedProps = Object.create(oldProps);
combinedProps = Polymer.Base.mixin(combinedProps, mixinValues);
} else {
mapSet(propertyName, combinedProps);
}
var out = [];
var p, v;
var needToInvalidate = false;
for (p in combinedProps) {
v = mixinValues[p];
if (v === undefined) {
v = 'initial';
}
if (oldProps && !(p in oldProps)) {
needToInvalidate = true;
}
out.push(propertyName + MIXIN_VAR_SEP + p + ': ' + v);
}
if (needToInvalidate) {
invalidateMixinEntry(mixinEntry);
}
if (mixinEntry) {
mixinEntry.properties = combinedProps;
}
if (valueProperty) {
prefix = matchText + ';' + prefix;
}
return prefix + out.join('; ') + ';';
}
function fixVars(matchText, varA, varB) {
return 'var(' + varA + ',' + 'var(' + varB + '))';
}
function atApplyToCssProperties(mixinName, fallbacks) {
mixinName = mixinName.replace(APPLY_NAME_CLEAN, '');
var vars = [];
var mixinEntry = mapGet(mixinName);
if (!mixinEntry) {
mapSet(mixinName, {});
mixinEntry = mapGet(mixinName);
}
if (mixinEntry) {
var currentProto = ApplyShim.__currentElementProto;
if (currentProto) {
mixinEntry.dependants[currentProto.is] = currentProto;
}
var p, parts, f;
for (p in mixinEntry.properties) {
f = fallbacks && fallbacks[p];
parts = [
p,
': var(',
mixinName,
MIXIN_VAR_SEP,
p
];
if (f) {
parts.push(',', f);
}
parts.push(')');
vars.push(parts.join(''));
}
}
return vars.join('; ');
}
function consumeCssProperties(text) {
var m;
while (m = MIXIN_MATCH.exec(text)) {
var matchText = m[0];
var mixinName = m[1];
var idx = m.index;
var applyPos = idx + matchText.indexOf('@apply');
var afterApplyPos = idx + matchText.length;
var textBeforeApply = text.slice(0, applyPos);
var textAfterApply = text.slice(afterApplyPos);
var defaults = cssTextToMap(textBeforeApply);
var replacement = atApplyToCssProperties(mixinName, defaults);
text = [
textBeforeApply,
replacement,
textAfterApply
].join('');
MIXIN_MATCH.lastIndex = idx + replacement.length;
}
return text;
}
var ApplyShim = {
_measureElement: null,
_map: mixinMap,
_separator: MIXIN_VAR_SEP,
transform: function (styles, elementProto) {
this.__currentElementProto = elementProto;
styleUtil.forRulesInStyles(styles, this._boundFindDefinitions);
styleUtil.forRulesInStyles(styles, this._boundFindApplications);
if (elementProto) {
elementProto.__applyShimInvalid = false;
}
this.__currentElementProto = null;
},
_findDefinitions: function (rule) {
var cssText = rule.parsedCssText;
cssText = cssText.replace(BAD_VAR, fixVars);
cssText = cssText.replace(VAR_ASSIGN, produceCssProperties);
rule.cssText = cssText;
if (rule.selector === ':root') {
rule.selector = ':host > *';
}
},
_findApplications: function (rule) {
rule.cssText = consumeCssProperties(rule.cssText);
},
transformRule: function (rule) {
this._findDefinitions(rule);
this._findApplications(rule);
},
_getInitialValueForProperty: function (property) {
if (!this._measureElement) {
this._measureElement = document.createElement('meta');
this._measureElement.style.all = 'initial';
document.head.appendChild(this._measureElement);
}
return window.getComputedStyle(this._measureElement).getPropertyValue(property);
}
};
ApplyShim._boundTransformRule = ApplyShim.transformRule.bind(ApplyShim);
ApplyShim._boundFindDefinitions = ApplyShim._findDefinitions.bind(ApplyShim);
ApplyShim._boundFindApplications = ApplyShim._findApplications.bind(ApplyShim);
return ApplyShim;
}();(function () {
var prepElement = Polymer.Base._prepElement;
var nativeShadow = Polymer.Settings.useNativeShadow;
var styleUtil = Polymer.StyleUtil;
var styleTransformer = Polymer.StyleTransformer;
var styleExtends = Polymer.StyleExtends;
var applyShim = Polymer.ApplyShim;
var settings = Polymer.Settings;
Polymer.Base._addFeature({
_prepElement: function (element) {
if (this._encapsulateStyle && this.__cssBuild !== 'shady') {
styleTransformer.element(element, this.is, this._scopeCssViaAttr);
}
prepElement.call(this, element);
},
_prepStyles: function () {
if (this._encapsulateStyle === undefined) {
this._encapsulateStyle = !nativeShadow;
}
if (!nativeShadow) {
this._scopeStyle = styleUtil.applyStylePlaceHolder(this.is);
}
this.__cssBuild = styleUtil.cssBuildTypeForModule(this.is);
},
_prepShimStyles: function () {
if (this._template) {
var hasTargetedCssBuild = styleUtil.isTargetedBuild(this.__cssBuild);
if (settings.useNativeCSSProperties && this.__cssBuild === 'shadow' && hasTargetedCssBuild) {
if (settings.preserveStyleIncludes) {
styleUtil.styleIncludesToTemplate(this._template);
}
return;
}
this._styles = this._styles || this._collectStyles();
if (settings.useNativeCSSProperties && !this.__cssBuild) {
applyShim.transform(this._styles, this);
}
var cssText = settings.useNativeCSSProperties && hasTargetedCssBuild ? this._styles.length && this._styles[0].textContent.trim() : styleTransformer.elementStyles(this);
this._prepStyleProperties();
if (!this._needsStyleProperties() && cssText) {
styleUtil.applyCss(cssText, this.is, nativeShadow ? this._template.content : null, this._scopeStyle);
}
} else {
this._styles = [];
}
},
_collectStyles: function () {
var styles = [];
var cssText = '', m$ = this.styleModules;
if (m$) {
for (var i = 0, l = m$.length, m; i < l && (m = m$[i]); i++) {
cssText += styleUtil.cssFromModule(m);
}
}
cssText += styleUtil.cssFromModule(this.is);
var p = this._template && this._template.parentNode;
if (this._template && (!p || p.id.toLowerCase() !== this.is)) {
cssText += styleUtil.cssFromElement(this._template);
}
if (cssText) {
var style = document.createElement('style');
style.textContent = cssText;
if (styleExtends.hasExtends(style.textContent)) {
cssText = styleExtends.transform(style);
}
styles.push(style);
}
return styles;
},
_elementAdd: function (node) {
if (this._encapsulateStyle) {
if (node.__styleScoped) {
node.__styleScoped = false;
} else {
styleTransformer.dom(node, this.is, this._scopeCssViaAttr);
}
}
},
_elementRemove: function (node) {
if (this._encapsulateStyle) {
styleTransformer.dom(node, this.is, this._scopeCssViaAttr, true);
}
},
scopeSubtree: function (container, shouldObserve) {
if (nativeShadow) {
return;
}
var self = this;
var scopify = function (node) {
if (node.nodeType === Node.ELEMENT_NODE) {
var className = node.getAttribute('class');
node.setAttribute('class', self._scopeElementClass(node, className));
var n$ = node.querySelectorAll('*');
for (var i = 0, n; i < n$.length && (n = n$[i]); i++) {
className = n.getAttribute('class');
n.setAttribute('class', self._scopeElementClass(n, className));
}
}
};
scopify(container);
if (shouldObserve) {
var mo = new MutationObserver(function (mxns) {
for (var i = 0, m; i < mxns.length && (m = mxns[i]); i++) {
if (m.addedNodes) {
for (var j = 0; j < m.addedNodes.length; j++) {
scopify(m.addedNodes[j]);
}
}
}
});
mo.observe(container, {
childList: true,
subtree: true
});
return mo;
}
}
});
}());Polymer.StyleProperties = function () {
'use strict';
var matchesSelector = Polymer.DomApi.matchesSelector;
var styleUtil = Polymer.StyleUtil;
var styleTransformer = Polymer.StyleTransformer;
var IS_IE = navigator.userAgent.match('Trident');
var settings = Polymer.Settings;
return {
decorateStyles: function (styles, scope) {
var self = this, props = {}, keyframes = [], ruleIndex = 0;
var scopeSelector = styleTransformer._calcHostScope(scope.is, scope.extends);
styleUtil.forRulesInStyles(styles, function (rule, style) {
self.decorateRule(rule);
rule.index = ruleIndex++;
self.whenHostOrRootRule(scope, rule, style, function (info) {
if (rule.parent.type === styleUtil.ruleTypes.MEDIA_RULE) {
scope.__notStyleScopeCacheable = true;
}
if (info.isHost) {
var hostContextOrFunction = info.selector.split(' ').some(function (s) {
return s.indexOf(scopeSelector) === 0 && s.length !== scopeSelector.length;
});
scope.__notStyleScopeCacheable = scope.__notStyleScopeCacheable || hostContextOrFunction;
}
});
self.collectPropertiesInCssText(rule.propertyInfo.cssText, props);
}, function onKeyframesRule(rule) {
keyframes.push(rule);
});
styles._keyframes = keyframes;
var names = [];
for (var i in props) {
names.push(i);
}
return names;
},
decorateRule: function (rule) {
if (rule.propertyInfo) {
return rule.propertyInfo;
}
var info = {}, properties = {};
var hasProperties = this.collectProperties(rule, properties);
if (hasProperties) {
info.properties = properties;
rule.rules = null;
}
info.cssText = this.collectCssText(rule);
rule.propertyInfo = info;
return info;
},
collectProperties: function (rule, properties) {
var info = rule.propertyInfo;
if (info) {
if (info.properties) {
Polymer.Base.mixin(properties, info.properties);
return true;
}
} else {
var m, rx = this.rx.VAR_ASSIGN;
var cssText = rule.parsedCssText;
var value;
var any;
while (m = rx.exec(cssText)) {
value = (m[2] || m[3]).trim();
if (value !== 'inherit') {
properties[m[1].trim()] = value;
}
any = true;
}
return any;
}
},
collectCssText: function (rule) {
return this.collectConsumingCssText(rule.parsedCssText);
},
collectConsumingCssText: function (cssText) {
return cssText.replace(this.rx.BRACKETED, '').replace(this.rx.VAR_ASSIGN, '');
},
collectPropertiesInCssText: function (cssText, props) {
var m;
while (m = this.rx.VAR_CONSUMED.exec(cssText)) {
var name = m[1];
if (m[2] !== ':') {
props[name] = true;
}
}
},
reify: function (props) {
var names = Object.getOwnPropertyNames(props);
for (var i = 0, n; i < names.length; i++) {
n = names[i];
props[n] = this.valueForProperty(props[n], props);
}
},
valueForProperty: function (property, props) {
if (property) {
if (property.indexOf(';') >= 0) {
property = this.valueForProperties(property, props);
} else {
var self = this;
var fn = function (prefix, value, fallback, suffix) {
var propertyValue = self.valueForProperty(props[value], props);
if (!propertyValue || propertyValue === 'initial') {
propertyValue = self.valueForProperty(props[fallback] || fallback, props) || fallback;
} else if (propertyValue === 'apply-shim-inherit') {
propertyValue = 'inherit';
}
return prefix + (propertyValue || '') + suffix;
};
property = styleUtil.processVariableAndFallback(property, fn);
}
}
return property && property.trim() || '';
},
valueForProperties: function (property, props) {
var parts = property.split(';');
for (var i = 0, p, m; i < parts.length; i++) {
if (p = parts[i]) {
this.rx.MIXIN_MATCH.lastIndex = 0;
m = this.rx.MIXIN_MATCH.exec(p);
if (m) {
p = this.valueForProperty(props[m[1]], props);
} else {
var colon = p.indexOf(':');
if (colon !== -1) {
var pp = p.substring(colon);
pp = pp.trim();
pp = this.valueForProperty(pp, props) || pp;
p = p.substring(0, colon) + pp;
}
}
parts[i] = p && p.lastIndexOf(';') === p.length - 1 ? p.slice(0, -1) : p || '';
}
}
return parts.join(';');
},
applyProperties: function (rule, props) {
var output = '';
if (!rule.propertyInfo) {
this.decorateRule(rule);
}
if (rule.propertyInfo.cssText) {
output = this.valueForProperties(rule.propertyInfo.cssText, props);
}
rule.cssText = output;
},
applyKeyframeTransforms: function (rule, keyframeTransforms) {
var input = rule.cssText;
var output = rule.cssText;
if (rule.hasAnimations == null) {
rule.hasAnimations = this.rx.ANIMATION_MATCH.test(input);
}
if (rule.hasAnimations) {
var transform;
if (rule.keyframeNamesToTransform == null) {
rule.keyframeNamesToTransform = [];
for (var keyframe in keyframeTransforms) {
transform = keyframeTransforms[keyframe];
output = transform(input);
if (input !== output) {
input = output;
rule.keyframeNamesToTransform.push(keyframe);
}
}
} else {
for (var i = 0; i < rule.keyframeNamesToTransform.length; ++i) {
transform = keyframeTransforms[rule.keyframeNamesToTransform[i]];
input = transform(input);
}
output = input;
}
}
rule.cssText = output;
},
propertyDataFromStyles: function (styles, element) {
var props = {}, self = this;
var o = [];
styleUtil.forActiveRulesInStyles(styles, function (rule) {
if (!rule.propertyInfo) {
self.decorateRule(rule);
}
var selectorToMatch = rule.transformedSelector || rule.parsedSelector;
if (element && rule.propertyInfo.properties && selectorToMatch) {
if (matchesSelector.call(element, selectorToMatch)) {
self.collectProperties(rule, props);
addToBitMask(rule.index, o);
}
}
});
return {
properties: props,
key: o
};
},
_rootSelector: /:root|:host\s*>\s*\*/,
_checkRoot: function (hostScope, selector) {
return Boolean(selector.match(this._rootSelector)) || hostScope === 'html' && selector.indexOf('html') > -1;
},
whenHostOrRootRule: function (scope, rule, style, callback) {
if (!rule.propertyInfo) {
self.decorateRule(rule);
}
if (!rule.propertyInfo.properties) {
return;
}
var hostScope = scope.is ? styleTransformer._calcHostScope(scope.is, scope.extends) : 'html';
var parsedSelector = rule.parsedSelector;
var isRoot = this._checkRoot(hostScope, parsedSelector);
var isHost = !isRoot && parsedSelector.indexOf(':host') === 0;
var cssBuild = scope.__cssBuild || style.__cssBuild;
if (cssBuild === 'shady') {
isRoot = parsedSelector === hostScope + ' > *.' + hostScope || parsedSelector.indexOf('html') > -1;
isHost = !isRoot && parsedSelector.indexOf(hostScope) === 0;
}
if (!isRoot && !isHost) {
return;
}
var selectorToMatch = hostScope;
if (isHost) {
if (settings.useNativeShadow && !rule.transformedSelector) {
rule.transformedSelector = styleTransformer._transformRuleCss(rule, styleTransformer._transformComplexSelector, scope.is, hostScope);
}
selectorToMatch = rule.transformedSelector || rule.parsedSelector;
}
if (isRoot && hostScope === 'html') {
selectorToMatch = rule.transformedSelector || rule.parsedSelector;
}
callback({
selector: selectorToMatch,
isHost: isHost,
isRoot: isRoot
});
},
hostAndRootPropertiesForScope: function (scope) {
var hostProps = {}, rootProps = {}, self = this;
styleUtil.forActiveRulesInStyles(scope._styles, function (rule, style) {
self.whenHostOrRootRule(scope, rule, style, function (info) {
var element = scope._element || scope;
if (matchesSelector.call(element, info.selector)) {
if (info.isHost) {
self.collectProperties(rule, hostProps);
} else {
self.collectProperties(rule, rootProps);
}
}
});
});
return {
rootProps: rootProps,
hostProps: hostProps
};
},
transformStyles: function (element, properties, scopeSelector) {
var self = this;
var hostSelector = styleTransformer._calcHostScope(element.is, element.extends);
var rxHostSelector = element.extends ? '\\' + hostSelector.slice(0, -1) + '\\]' : hostSelector;
var hostRx = new RegExp(this.rx.HOST_PREFIX + rxHostSelector + this.rx.HOST_SUFFIX);
var keyframeTransforms = this._elementKeyframeTransforms(element, scopeSelector);
return styleTransformer.elementStyles(element, function (rule) {
self.applyProperties(rule, properties);
if (!settings.useNativeShadow && !Polymer.StyleUtil.isKeyframesSelector(rule) && rule.cssText) {
self.applyKeyframeTransforms(rule, keyframeTransforms);
self._scopeSelector(rule, hostRx, hostSelector, element._scopeCssViaAttr, scopeSelector);
}
});
},
_elementKeyframeTransforms: function (element, scopeSelector) {
var keyframesRules = element._styles._keyframes;
var keyframeTransforms = {};
if (!settings.useNativeShadow && keyframesRules) {
for (var i = 0, keyframesRule = keyframesRules[i]; i < keyframesRules.length; keyframesRule = keyframesRules[++i]) {
this._scopeKeyframes(keyframesRule, scopeSelector);
keyframeTransforms[keyframesRule.keyframesName] = this._keyframesRuleTransformer(keyframesRule);
}
}
return keyframeTransforms;
},
_keyframesRuleTransformer: function (keyframesRule) {
return function (cssText) {
return cssText.replace(keyframesRule.keyframesNameRx, keyframesRule.transformedKeyframesName);
};
},
_scopeKeyframes: function (rule, scopeId) {
rule.keyframesNameRx = new RegExp(rule.keyframesName, 'g');
rule.transformedKeyframesName = rule.keyframesName + '-' + scopeId;
rule.transformedSelector = rule.transformedSelector || rule.selector;
rule.selector = rule.transformedSelector.replace(rule.keyframesName, rule.transformedKeyframesName);
},
_scopeSelector: function (rule, hostRx, hostSelector, viaAttr, scopeId) {
rule.transformedSelector = rule.transformedSelector || rule.selector;
var selector = rule.transformedSelector;
var scope = viaAttr ? '[' + styleTransformer.SCOPE_NAME + '~=' + scopeId + ']' : '.' + scopeId;
var parts = selector.split(',');
for (var i = 0, l = parts.length, p; i < l && (p = parts[i]); i++) {
parts[i] = p.match(hostRx) ? p.replace(hostSelector, scope) : scope + ' ' + p;
}
rule.selector = parts.join(',');
},
applyElementScopeSelector: function (element, selector, old, viaAttr) {
var c = viaAttr ? element.getAttribute(styleTransformer.SCOPE_NAME) : element.getAttribute('class') || '';
var v = old ? c.replace(old, selector) : (c ? c + ' ' : '') + this.XSCOPE_NAME + ' ' + selector;
if (c !== v) {
if (viaAttr) {
element.setAttribute(styleTransformer.SCOPE_NAME, v);
} else {
element.setAttribute('class', v);
}
}
},
applyElementStyle: function (element, properties, selector, style) {
var cssText = style ? style.textContent || '' : this.transformStyles(element, properties, selector);
var s = element._customStyle;
if (s && !settings.useNativeShadow && s !== style) {
s._useCount--;
if (s._useCount <= 0 && s.parentNode) {
s.parentNode.removeChild(s);
}
}
if (settings.useNativeShadow) {
if (element._customStyle) {
element._customStyle.textContent = cssText;
style = element._customStyle;
} else if (cssText) {
style = styleUtil.applyCss(cssText, selector, element.root, element._scopeStyle);
}
} else {
if (!style) {
if (cssText) {
style = styleUtil.applyCss(cssText, selector, null, element._scopeStyle);
}
} else if (!style.parentNode) {
if (IS_IE && cssText.indexOf('@media') > -1) {
style.textContent = cssText;
}
styleUtil.applyStyle(style, null, element._scopeStyle);
}
}
if (style) {
style._useCount = style._useCount || 0;
if (element._customStyle != style) {
style._useCount++;
}
element._customStyle = style;
}
return style;
},
mixinCustomStyle: function (props, customStyle) {
var v;
for (var i in customStyle) {
v = customStyle[i];
if (v || v === 0) {
props[i] = v;
}
}
},
updateNativeStyleProperties: function (element, properties) {
var oldPropertyNames = element.__customStyleProperties;
if (oldPropertyNames) {
for (var i = 0; i < oldPropertyNames.length; i++) {
element.style.removeProperty(oldPropertyNames[i]);
}
}
var propertyNames = [];
for (var p in properties) {
if (properties[p] !== null) {
element.style.setProperty(p, properties[p]);
propertyNames.push(p);
}
}
element.__customStyleProperties = propertyNames;
},
rx: styleUtil.rx,
XSCOPE_NAME: 'x-scope'
};
function addToBitMask(n, bits) {
var o = parseInt(n / 32);
var v = 1 << n % 32;
bits[o] = (bits[o] || 0) | v;
}
}();(function () {
Polymer.StyleCache = function () {
this.cache = {};
};
Polymer.StyleCache.prototype = {
MAX: 100,
store: function (is, data, keyValues, keyStyles) {
data.keyValues = keyValues;
data.styles = keyStyles;
var s$ = this.cache[is] = this.cache[is] || [];
s$.push(data);
if (s$.length > this.MAX) {
s$.shift();
}
},
retrieve: function (is, keyValues, keyStyles) {
var cache = this.cache[is];
if (cache) {
for (var i = cache.length - 1, data; i >= 0; i--) {
data = cache[i];
if (keyStyles === data.styles && this._objectsEqual(keyValues, data.keyValues)) {
return data;
}
}
}
},
clear: function () {
this.cache = {};
},
_objectsEqual: function (target, source) {
var t, s;
for (var i in target) {
t = target[i], s = source[i];
if (!(typeof t === 'object' && t ? this._objectsStrictlyEqual(t, s) : t === s)) {
return false;
}
}
if (Array.isArray(target)) {
return target.length === source.length;
}
return true;
},
_objectsStrictlyEqual: function (target, source) {
return this._objectsEqual(target, source) && this._objectsEqual(source, target);
}
};
}());Polymer.StyleDefaults = function () {
var styleProperties = Polymer.StyleProperties;
var StyleCache = Polymer.StyleCache;
var nativeVariables = Polymer.Settings.useNativeCSSProperties;
var api = {
_styles: [],
_properties: null,
customStyle: {},
_styleCache: new StyleCache(),
_element: Polymer.DomApi.wrap(document.documentElement),
addStyle: function (style) {
this._styles.push(style);
this._properties = null;
},
get _styleProperties() {
if (!this._properties) {
styleProperties.decorateStyles(this._styles, this);
this._styles._scopeStyleProperties = null;
this._properties = styleProperties.hostAndRootPropertiesForScope(this).rootProps;
styleProperties.mixinCustomStyle(this._properties, this.customStyle);
styleProperties.reify(this._properties);
}
return this._properties;
},
hasStyleProperties: function () {
return Boolean(this._properties);
},
_needsStyleProperties: function () {
},
_computeStyleProperties: function () {
return this._styleProperties;
},
updateStyles: function (properties) {
this._properties = null;
if (properties) {
Polymer.Base.mixin(this.customStyle, properties);
}
this._styleCache.clear();
for (var i = 0, s; i < this._styles.length; i++) {
s = this._styles[i];
s = s.__importElement || s;
s._apply();
}
if (nativeVariables) {
styleProperties.updateNativeStyleProperties(document.documentElement, this.customStyle);
}
}
};
return api;
}();(function () {
'use strict';
var serializeValueToAttribute = Polymer.Base.serializeValueToAttribute;
var propertyUtils = Polymer.StyleProperties;
var styleTransformer = Polymer.StyleTransformer;
var styleDefaults = Polymer.StyleDefaults;
var nativeShadow = Polymer.Settings.useNativeShadow;
var nativeVariables = Polymer.Settings.useNativeCSSProperties;
Polymer.Base._addFeature({
_prepStyleProperties: function () {
if (!nativeVariables) {
this._ownStylePropertyNames = this._styles && this._styles.length ? propertyUtils.decorateStyles(this._styles, this) : null;
}
},
customStyle: null,
getComputedStyleValue: function (property) {
if (!nativeVariables && !this._styleProperties) {
this._computeStyleProperties();
}
return !nativeVariables && this._styleProperties && this._styleProperties[property] || getComputedStyle(this).getPropertyValue(property);
},
_setupStyleProperties: function () {
this.customStyle = {};
this._styleCache = null;
this._styleProperties = null;
this._scopeSelector = null;
this._ownStyleProperties = null;
this._customStyle = null;
},
_needsStyleProperties: function () {
return Boolean(!nativeVariables && this._ownStylePropertyNames && this._ownStylePropertyNames.length);
},
_validateApplyShim: function () {
if (this.__applyShimInvalid) {
Polymer.ApplyShim.transform(this._styles, this.__proto__);
var cssText = styleTransformer.elementStyles(this);
if (nativeShadow) {
var templateStyle = this._template.content.querySelector('style');
if (templateStyle) {
templateStyle.textContent = cssText;
}
} else {
var shadyStyle = this._scopeStyle && this._scopeStyle.nextSibling;
if (shadyStyle) {
shadyStyle.textContent = cssText;
}
}
}
},
_beforeAttached: function () {
if ((!this._scopeSelector || this.__stylePropertiesInvalid) && this._needsStyleProperties()) {
this.__stylePropertiesInvalid = false;
this._updateStyleProperties();
}
},
_findStyleHost: function () {
var e = this, root;
while (root = Polymer.dom(e).getOwnerRoot()) {
if (Polymer.isInstance(root.host)) {
return root.host;
}
e = root.host;
}
return styleDefaults;
},
_updateStyleProperties: function () {
var info, scope = this._findStyleHost();
if (!scope._styleProperties) {
scope._computeStyleProperties();
}
if (!scope._styleCache) {
scope._styleCache = new Polymer.StyleCache();
}
var scopeData = propertyUtils.propertyDataFromStyles(scope._styles, this);
var scopeCacheable = !this.__notStyleScopeCacheable;
if (scopeCacheable) {
scopeData.key.customStyle = this.customStyle;
info = scope._styleCache.retrieve(this.is, scopeData.key, this._styles);
}
var scopeCached = Boolean(info);
if (scopeCached) {
this._styleProperties = info._styleProperties;
} else {
this._computeStyleProperties(scopeData.properties);
}
this._computeOwnStyleProperties();
if (!scopeCached) {
info = styleCache.retrieve(this.is, this._ownStyleProperties, this._styles);
}
var globalCached = Boolean(info) && !scopeCached;
var style = this._applyStyleProperties(info);
if (!scopeCached) {
style = style && nativeShadow ? style.cloneNode(true) : style;
info = {
style: style,
_scopeSelector: this._scopeSelector,
_styleProperties: this._styleProperties
};
if (scopeCacheable) {
scopeData.key.customStyle = {};
this.mixin(scopeData.key.customStyle, this.customStyle);
scope._styleCache.store(this.is, info, scopeData.key, this._styles);
}
if (!globalCached) {
styleCache.store(this.is, Object.create(info), this._ownStyleProperties, this._styles);
}
}
},
_computeStyleProperties: function (scopeProps) {
var scope = this._findStyleHost();
if (!scope._styleProperties) {
scope._computeStyleProperties();
}
var props = Object.create(scope._styleProperties);
var hostAndRootProps = propertyUtils.hostAndRootPropertiesForScope(this);
this.mixin(props, hostAndRootProps.hostProps);
scopeProps = scopeProps || propertyUtils.propertyDataFromStyles(scope._styles, this).properties;
this.mixin(props, scopeProps);
this.mixin(props, hostAndRootProps.rootProps);
propertyUtils.mixinCustomStyle(props, this.customStyle);
propertyUtils.reify(props);
this._styleProperties = props;
},
_computeOwnStyleProperties: function () {
var props = {};
for (var i = 0, n; i < this._ownStylePropertyNames.length; i++) {
n = this._ownStylePropertyNames[i];
props[n] = this._styleProperties[n];
}
this._ownStyleProperties = props;
},
_scopeCount: 0,
_applyStyleProperties: function (info) {
var oldScopeSelector = this._scopeSelector;
this._scopeSelector = info ? info._scopeSelector : this.is + '-' + this.__proto__._scopeCount++;
var style = propertyUtils.applyElementStyle(this, this._styleProperties, this._scopeSelector, info && info.style);
if (!nativeShadow) {
propertyUtils.applyElementScopeSelector(this, this._scopeSelector, oldScopeSelector, this._scopeCssViaAttr);
}
return style;
},
serializeValueToAttribute: function (value, attribute, node) {
node = node || this;
if (attribute === 'class' && !nativeShadow) {
var host = node === this ? this.domHost || this.dataHost : this;
if (host) {
value = host._scopeElementClass(node, value);
}
}
node = this.shadyRoot && this.shadyRoot._hasDistributed ? Polymer.dom(node) : node;
serializeValueToAttribute.call(this, value, attribute, node);
},
_scopeElementClass: function (element, selector) {
if (!nativeShadow && !this._scopeCssViaAttr) {
selector = (selector ? selector + ' ' : '') + SCOPE_NAME + ' ' + this.is + (element._scopeSelector ? ' ' + XSCOPE_NAME + ' ' + element._scopeSelector : '');
}
return selector;
},
updateStyles: function (properties) {
if (properties) {
this.mixin(this.customStyle, properties);
}
if (nativeVariables) {
propertyUtils.updateNativeStyleProperties(this, this.customStyle);
} else {
if (this.isAttached) {
if (this._needsStyleProperties()) {
this._updateStyleProperties();
} else {
this._styleProperties = null;
}
} else {
this.__stylePropertiesInvalid = true;
}
if (this._styleCache) {
this._styleCache.clear();
}
this._updateRootStyles();
}
},
_updateRootStyles: function (root) {
root = root || this.root;
var c$ = Polymer.dom(root)._query(function (e) {
return e.shadyRoot || e.shadowRoot;
});
for (var i = 0, l = c$.length, c; i < l && (c = c$[i]); i++) {
if (c.updateStyles) {
c.updateStyles();
}
}
}
});
Polymer.updateStyles = function (properties) {
styleDefaults.updateStyles(properties);
Polymer.Base._updateRootStyles(document);
};
var styleCache = new Polymer.StyleCache();
Polymer.customStyleCache = styleCache;
var SCOPE_NAME = styleTransformer.SCOPE_NAME;
var XSCOPE_NAME = propertyUtils.XSCOPE_NAME;
}());Polymer.Base._addFeature({
_registerFeatures: function () {
this._prepIs();
if (this.factoryImpl) {
this._prepConstructor();
}
this._prepStyles();
},
_finishRegisterFeatures: function () {
this._prepTemplate();
this._prepShimStyles();
this._prepAnnotations();
this._prepEffects();
this._prepBehaviors();
this._prepPropertyInfo();
this._prepBindings();
this._prepShady();
},
_prepBehavior: function (b) {
this._addPropertyEffects(b.properties);
this._addComplexObserverEffects(b.observers);
this._addHostAttributes(b.hostAttributes);
},
_initFeatures: function () {
this._setupGestures();
this._setupConfigure(this.__data__);
this._setupStyleProperties();
this._setupDebouncers();
this._setupShady();
this._registerHost();
if (this._template) {
this._validateApplyShim();
this._poolContent();
this._beginHosting();
this._stampTemplate();
this._endHosting();
this._marshalAnnotationReferences();
}
this._marshalInstanceEffects();
this._marshalBehaviors();
this._marshalHostAttributes();
this._marshalAttributes();
this._tryReady();
},
_marshalBehavior: function (b) {
if (b.listeners) {
this._listenListeners(b.listeners);
}
}
});(function () {
var propertyUtils = Polymer.StyleProperties;
var styleUtil = Polymer.StyleUtil;
var cssParse = Polymer.CssParse;
var styleDefaults = Polymer.StyleDefaults;
var styleTransformer = Polymer.StyleTransformer;
var applyShim = Polymer.ApplyShim;
var debounce = Polymer.Debounce;
var settings = Polymer.Settings;
var updateDebouncer;
Polymer({
is: 'custom-style',
extends: 'style',
_template: null,
properties: { include: String },
ready: function () {
this.__appliedElement = this.__appliedElement || this;
this.__cssBuild = styleUtil.getCssBuildType(this);
if (this.__appliedElement !== this) {
this.__appliedElement.__cssBuild = this.__cssBuild;
}
this._tryApply();
},
attached: function () {
this._tryApply();
},
_tryApply: function () {
if (!this._appliesToDocument) {
if (this.parentNode && this.parentNode.localName !== 'dom-module') {
this._appliesToDocument = true;
var e = this.__appliedElement;
if (!settings.useNativeCSSProperties) {
this.__needsUpdateStyles = styleDefaults.hasStyleProperties();
styleDefaults.addStyle(e);
}
if (e.textContent || this.include) {
this._apply(true);
} else {
var self = this;
var observer = new MutationObserver(function () {
observer.disconnect();
self._apply(true);
});
observer.observe(e, { childList: true });
}
}
}
},
_updateStyles: function () {
Polymer.updateStyles();
},
_apply: function (initialApply) {
var e = this.__appliedElement;
if (this.include) {
e.textContent = styleUtil.cssFromModules(this.include, true) + e.textContent;
}
if (!e.textContent) {
return;
}
var buildType = this.__cssBuild;
var targetedBuild = styleUtil.isTargetedBuild(buildType);
if (settings.useNativeCSSProperties && targetedBuild) {
return;
}
var styleRules = styleUtil.rulesForStyle(e);
if (!targetedBuild) {
styleUtil.forEachRule(styleRules, function (rule) {
styleTransformer.documentRule(rule);
});
if (settings.useNativeCSSProperties && !buildType) {
applyShim.transform([e]);
}
}
if (settings.useNativeCSSProperties) {
e.textContent = styleUtil.toCssText(styleRules);
} else {
var self = this;
var fn = function fn() {
self._flushCustomProperties();
};
if (initialApply) {
Polymer.RenderStatus.whenReady(fn);
} else {
fn();
}
}
},
_flushCustomProperties: function () {
if (this.__needsUpdateStyles) {
this.__needsUpdateStyles = false;
updateDebouncer = debounce(updateDebouncer, this._updateStyles);
} else {
this._applyCustomProperties();
}
},
_applyCustomProperties: function () {
var element = this.__appliedElement;
this._computeStyleProperties();
var props = this._styleProperties;
var rules = styleUtil.rulesForStyle(element);
if (!rules) {
return;
}
element.textContent = styleUtil.toCssText(rules, function (rule) {
var css = rule.cssText = rule.parsedCssText;
if (rule.propertyInfo && rule.propertyInfo.cssText) {
css = cssParse.removeCustomPropAssignment(css);
rule.cssText = propertyUtils.valueForProperties(css, props);
}
});
}
});
}());Polymer.Templatizer = {
properties: { __hideTemplateChildren__: { observer: '_showHideChildren' } },
_instanceProps: Polymer.nob,
_parentPropPrefix: '_parent_',
templatize: function (template) {
this._templatized = template;
if (!template._content) {
template._content = template.content;
}
if (template._content._ctor) {
this.ctor = template._content._ctor;
this._prepParentProperties(this.ctor.prototype, template);
return;
}
var archetype = Object.create(Polymer.Base);
this._customPrepAnnotations(archetype, template);
this._prepParentProperties(archetype, template);
archetype._prepEffects();
this._customPrepEffects(archetype);
archetype._prepBehaviors();
archetype._prepPropertyInfo();
archetype._prepBindings();
archetype._notifyPathUp = this._notifyPathUpImpl;
archetype._scopeElementClass = this._scopeElementClassImpl;
archetype.listen = this._listenImpl;
archetype._showHideChildren = this._showHideChildrenImpl;
archetype.__setPropertyOrig = this.__setProperty;
archetype.__setProperty = this.__setPropertyImpl;
var _constructor = this._constructorImpl;
var ctor = function TemplateInstance(model, host) {
_constructor.call(this, model, host);
};
ctor.prototype = archetype;
archetype.constructor = ctor;
template._content._ctor = ctor;
this.ctor = ctor;
},
_getRootDataHost: function () {
return this.dataHost && this.dataHost._rootDataHost || this.dataHost;
},
_showHideChildrenImpl: function (hide) {
var c = this._children;
for (var i = 0; i < c.length; i++) {
var n = c[i];
if (Boolean(hide) != Boolean(n.__hideTemplateChildren__)) {
if (n.nodeType === Node.TEXT_NODE) {
if (hide) {
n.__polymerTextContent__ = n.textContent;
n.textContent = '';
} else {
n.textContent = n.__polymerTextContent__;
}
} else if (n.style) {
if (hide) {
n.__polymerDisplay__ = n.style.display;
n.style.display = 'none';
} else {
n.style.display = n.__polymerDisplay__;
}
}
}
n.__hideTemplateChildren__ = hide;
}
},
__setPropertyImpl: function (property, value, fromAbove, node) {
if (node && node.__hideTemplateChildren__ && property == 'textContent') {
property = '__polymerTextContent__';
}
this.__setPropertyOrig(property, value, fromAbove, node);
},
_debounceTemplate: function (fn) {
Polymer.dom.addDebouncer(this.debounce('_debounceTemplate', fn));
},
_flushTemplates: function () {
Polymer.dom.flush();
},
_customPrepEffects: function (archetype) {
var parentProps = archetype._parentProps;
for (var prop in parentProps) {
archetype._addPropertyEffect(prop, 'function', this._createHostPropEffector(prop));
}
for (prop in this._instanceProps) {
archetype._addPropertyEffect(prop, 'function', this._createInstancePropEffector(prop));
}
},
_customPrepAnnotations: function (archetype, template) {
archetype._template = template;
var c = template._content;
if (!c._notes) {
var rootDataHost = archetype._rootDataHost;
if (rootDataHost) {
Polymer.Annotations.prepElement = function () {
rootDataHost._prepElement();
};
}
c._notes = Polymer.Annotations.parseAnnotations(template);
Polymer.Annotations.prepElement = null;
this._processAnnotations(c._notes);
}
archetype._notes = c._notes;
archetype._parentProps = c._parentProps;
},
_prepParentProperties: function (archetype, template) {
var parentProps = this._parentProps = archetype._parentProps;
if (this._forwardParentProp && parentProps) {
var proto = archetype._parentPropProto;
var prop;
if (!proto) {
for (prop in this._instanceProps) {
delete parentProps[prop];
}
proto = archetype._parentPropProto = Object.create(null);
if (template != this) {
Polymer.Bind.prepareModel(proto);
Polymer.Base.prepareModelNotifyPath(proto);
}
for (prop in parentProps) {
var parentProp = this._parentPropPrefix + prop;
var effects = [
{
kind: 'function',
effect: this._createForwardPropEffector(prop),
fn: Polymer.Bind._functionEffect
},
{
kind: 'notify',
fn: Polymer.Bind._notifyEffect,
effect: { event: Polymer.CaseMap.camelToDashCase(parentProp) + '-changed' }
}
];
proto._propertyEffects = proto._propertyEffects || {};
proto._propertyEffects[parentProp] = effects;
Polymer.Bind._createAccessors(proto, parentProp, effects);
}
}
var self = this;
if (template != this) {
Polymer.Bind.prepareInstance(template);
template._forwardParentProp = function (source, value) {
self._forwardParentProp(source, value);
};
}
this._extendTemplate(template, proto);
template._pathEffector = function (path, value, fromAbove) {
return self._pathEffectorImpl(path, value, fromAbove);
};
}
},
_createForwardPropEffector: function (prop) {
return function (source, value) {
this._forwardParentProp(prop, value);
};
},
_createHostPropEffector: function (prop) {
var prefix = this._parentPropPrefix;
return function (source, value) {
this.dataHost._templatized[prefix + prop] = value;
};
},
_createInstancePropEffector: function (prop) {
return function (source, value, old, fromAbove) {
if (!fromAbove) {
this.dataHost._forwardInstanceProp(this, prop, value);
}
};
},
_extendTemplate: function (template, proto) {
var n$ = Object.getOwnPropertyNames(proto);
if (proto._propertySetter) {
template._propertySetter = proto._propertySetter;
}
for (var i = 0, n; i < n$.length && (n = n$[i]); i++) {
var val = template[n];
if (val && n == '_propertyEffects') {
var pe = Polymer.Base.mixin({}, val);
template._propertyEffects = Polymer.Base.mixin(pe, proto._propertyEffects);
} else {
var pd = Object.getOwnPropertyDescriptor(proto, n);
Object.defineProperty(template, n, pd);
if (val !== undefined) {
template._propertySetter(n, val);
}
}
}
},
_showHideChildren: function (hidden) {
},
_forwardInstancePath: function (inst, path, value) {
},
_forwardInstanceProp: function (inst, prop, value) {
},
_notifyPathUpImpl: function (path, value) {
var dataHost = this.dataHost;
var root = Polymer.Path.root(path);
dataHost._forwardInstancePath.call(dataHost, this, path, value);
if (root in dataHost._parentProps) {
dataHost._templatized._notifyPath(dataHost._parentPropPrefix + path, value);
}
},
_pathEffectorImpl: function (path, value, fromAbove) {
if (this._forwardParentPath) {
if (path.indexOf(this._parentPropPrefix) === 0) {
var subPath = path.substring(this._parentPropPrefix.length);
var model = Polymer.Path.root(subPath);
if (model in this._parentProps) {
this._forwardParentPath(subPath, value);
}
}
}
Polymer.Base._pathEffector.call(this._templatized, path, value, fromAbove);
},
_constructorImpl: function (model, host) {
this._rootDataHost = host._getRootDataHost();
this._setupConfigure(model);
this._registerHost(host);
this._beginHosting();
this.root = this.instanceTemplate(this._template);
this.root.__noContent = !this._notes._hasContent;
this.root.__styleScoped = true;
this._endHosting();
this._marshalAnnotatedNodes();
this._marshalInstanceEffects();
this._marshalAnnotatedListeners();
var children = [];
for (var n = this.root.firstChild; n; n = n.nextSibling) {
children.push(n);
n._templateInstance = this;
}
this._children = children;
if (host.__hideTemplateChildren__) {
this._showHideChildren(true);
}
this._tryReady();
},
_listenImpl: function (node, eventName, methodName) {
var model = this;
var host = this._rootDataHost;
var handler = host._createEventHandler(node, eventName, methodName);
var decorated = function (e) {
e.model = model;
handler(e);
};
host._listen(node, eventName, decorated);
},
_scopeElementClassImpl: function (node, value) {
var host = this._rootDataHost;
if (host) {
return host._scopeElementClass(node, value);
}
return value;
},
stamp: function (model) {
model = model || {};
if (this._parentProps) {
var templatized = this._templatized;
for (var prop in this._parentProps) {
if (model[prop] === undefined) {
model[prop] = templatized[this._parentPropPrefix + prop];
}
}
}
return new this.ctor(model, this);
},
modelForElement: function (el) {
var model;
while (el) {
if (model = el._templateInstance) {
if (model.dataHost != this) {
el = model.dataHost;
} else {
return model;
}
} else {
el = el.parentNode;
}
}
}
};Polymer({
is: 'dom-template',
extends: 'template',
_template: null,
behaviors: [Polymer.Templatizer],
ready: function () {
this.templatize(this);
}
});Polymer._collections = new WeakMap();
Polymer.Collection = function (userArray) {
Polymer._collections.set(userArray, this);
this.userArray = userArray;
this.store = userArray.slice();
this.initMap();
};
Polymer.Collection.prototype = {
constructor: Polymer.Collection,
initMap: function () {
var omap = this.omap = new WeakMap();
var pmap = this.pmap = {};
var s = this.store;
for (var i = 0; i < s.length; i++) {
var item = s[i];
if (item && typeof item == 'object') {
omap.set(item, i);
} else {
pmap[item] = i;
}
}
},
add: function (item) {
var key = this.store.push(item) - 1;
if (item && typeof item == 'object') {
this.omap.set(item, key);
} else {
this.pmap[item] = key;
}
return '#' + key;
},
removeKey: function (key) {
if (key = this._parseKey(key)) {
this._removeFromMap(this.store[key]);
delete this.store[key];
}
},
_removeFromMap: function (item) {
if (item && typeof item == 'object') {
this.omap.delete(item);
} else {
delete this.pmap[item];
}
},
remove: function (item) {
var key = this.getKey(item);
this.removeKey(key);
return key;
},
getKey: function (item) {
var key;
if (item && typeof item == 'object') {
key = this.omap.get(item);
} else {
key = this.pmap[item];
}
if (key != undefined) {
return '#' + key;
}
},
getKeys: function () {
return Object.keys(this.store).map(function (key) {
return '#' + key;
});
},
_parseKey: function (key) {
if (key && key[0] == '#') {
return key.slice(1);
}
},
setItem: function (key, item) {
if (key = this._parseKey(key)) {
var old = this.store[key];
if (old) {
this._removeFromMap(old);
}
if (item && typeof item == 'object') {
this.omap.set(item, key);
} else {
this.pmap[item] = key;
}
this.store[key] = item;
}
},
getItem: function (key) {
if (key = this._parseKey(key)) {
return this.store[key];
}
},
getItems: function () {
var items = [], store = this.store;
for (var key in store) {
items.push(store[key]);
}
return items;
},
_applySplices: function (splices) {
var keyMap = {}, key;
for (var i = 0, s; i < splices.length && (s = splices[i]); i++) {
s.addedKeys = [];
for (var j = 0; j < s.removed.length; j++) {
key = this.getKey(s.removed[j]);
keyMap[key] = keyMap[key] ? null : -1;
}
for (j = 0; j < s.addedCount; j++) {
var item = this.userArray[s.index + j];
key = this.getKey(item);
key = key === undefined ? this.add(item) : key;
keyMap[key] = keyMap[key] ? null : 1;
s.addedKeys.push(key);
}
}
var removed = [];
var added = [];
for (key in keyMap) {
if (keyMap[key] < 0) {
this.removeKey(key);
removed.push(key);
}
if (keyMap[key] > 0) {
added.push(key);
}
}
return [{
removed: removed,
added: added
}];
}
};
Polymer.Collection.get = function (userArray) {
return Polymer._collections.get(userArray) || new Polymer.Collection(userArray);
};
Polymer.Collection.applySplices = function (userArray, splices) {
var coll = Polymer._collections.get(userArray);
return coll ? coll._applySplices(splices) : null;
};Polymer({
is: 'dom-repeat',
extends: 'template',
_template: null,
properties: {
items: { type: Array },
as: {
type: String,
value: 'item'
},
indexAs: {
type: String,
value: 'index'
},
sort: {
type: Function,
observer: '_sortChanged'
},
filter: {
type: Function,
observer: '_filterChanged'
},
observe: {
type: String,
observer: '_observeChanged'
},
delay: Number,
renderedItemCount: {
type: Number,
notify: !Polymer.Settings.suppressTemplateNotifications,
readOnly: true
},
initialCount: {
type: Number,
observer: '_initializeChunking'
},
targetFramerate: {
type: Number,
value: 20
},
notifyDomChange: { type: Boolean },
_targetFrameTime: {
type: Number,
computed: '_computeFrameTime(targetFramerate)'
}
},
behaviors: [Polymer.Templatizer],
observers: ['_itemsChanged(items.*)'],
created: function () {
this._instances = [];
this._pool = [];
this._limit = Infinity;
var self = this;
this._boundRenderChunk = function () {
self._renderChunk();
};
},
detached: function () {
this.__isDetached = true;
for (var i = 0; i < this._instances.length; i++) {
this._detachInstance(i);
}
},
attached: function () {
if (this.__isDetached) {
this.__isDetached = false;
var refNode;
var parentNode = Polymer.dom(this).parentNode;
if (parentNode.localName == this.is) {
refNode = parentNode;
parentNode = Polymer.dom(parentNode).parentNode;
} else {
refNode = this;
}
var parent = Polymer.dom(parentNode);
for (var i = 0; i < this._instances.length; i++) {
this._attachInstance(i, parent, refNode);
}
}
},
ready: function () {
this._instanceProps = { __key__: true };
this._instanceProps[this.as] = true;
this._instanceProps[this.indexAs] = true;
if (!this.ctor) {
this.templatize(this);
}
},
_sortChanged: function (sort) {
var dataHost = this._getRootDataHost();
this._sortFn = sort && (typeof sort == 'function' ? sort : function () {
return dataHost[sort].apply(dataHost, arguments);
});
this._needFullRefresh = true;
if (this.items) {
this._debounceTemplate(this._render);
}
},
_filterChanged: function (filter) {
var dataHost = this._getRootDataHost();
this._filterFn = filter && (typeof filter == 'function' ? filter : function () {
return dataHost[filter].apply(dataHost, arguments);
});
this._needFullRefresh = true;
if (this.items) {
this._debounceTemplate(this._render);
}
},
_computeFrameTime: function (rate) {
return Math.ceil(1000 / rate);
},
_initializeChunking: function () {
if (this.initialCount) {
this._limit = this.initialCount;
this._chunkCount = this.initialCount;
this._lastChunkTime = performance.now();
}
},
_tryRenderChunk: function () {
if (this.items && this._limit < this.items.length) {
this.debounce('renderChunk', this._requestRenderChunk);
}
},
_requestRenderChunk: function () {
requestAnimationFrame(this._boundRenderChunk);
},
_renderChunk: function () {
var currChunkTime = performance.now();
var ratio = this._targetFrameTime / (currChunkTime - this._lastChunkTime);
this._chunkCount = Math.round(this._chunkCount * ratio) || 1;
this._limit += this._chunkCount;
this._lastChunkTime = currChunkTime;
this._debounceTemplate(this._render);
},
_observeChanged: function () {
this._observePaths = this.observe && this.observe.replace('.*', '.').split(' ');
},
_itemsChanged: function (change) {
if (change.path == 'items') {
if (Array.isArray(this.items)) {
this.collection = Polymer.Collection.get(this.items);
} else if (!this.items) {
this.collection = null;
} else {
this._error(this._logf('dom-repeat', 'expected array for `items`,' + ' found', this.items));
}
this._keySplices = [];
this._indexSplices = [];
this._needFullRefresh = true;
this._initializeChunking();
this._debounceTemplate(this._render);
} else if (change.path == 'items.splices') {
this._keySplices = this._keySplices.concat(change.value.keySplices);
this._indexSplices = this._indexSplices.concat(change.value.indexSplices);
this._debounceTemplate(this._render);
} else {
var subpath = change.path.slice(6);
this._forwardItemPath(subpath, change.value);
this._checkObservedPaths(subpath);
}
},
_checkObservedPaths: function (path) {
if (this._observePaths) {
path = path.substring(path.indexOf('.') + 1);
var paths = this._observePaths;
for (var i = 0; i < paths.length; i++) {
if (path.indexOf(paths[i]) === 0) {
this._needFullRefresh = true;
if (this.delay) {
this.debounce('render', this._render, this.delay);
} else {
this._debounceTemplate(this._render);
}
return;
}
}
}
},
render: function () {
this._needFullRefresh = true;
this._debounceTemplate(this._render);
this._flushTemplates();
},
_render: function () {
if (this._needFullRefresh) {
this._applyFullRefresh();
this._needFullRefresh = false;
} else if (this._keySplices.length) {
if (this._sortFn) {
this._applySplicesUserSort(this._keySplices);
} else {
if (this._filterFn) {
this._applyFullRefresh();
} else {
this._applySplicesArrayOrder(this._indexSplices);
}
}
} else {
}
this._keySplices = [];
this._indexSplices = [];
var keyToIdx = this._keyToInstIdx = {};
for (var i = this._instances.length - 1; i >= 0; i--) {
var inst = this._instances[i];
if (inst.isPlaceholder && i < this._limit) {
inst = this._insertInstance(i, inst.__key__);
} else if (!inst.isPlaceholder && i >= this._limit) {
inst = this._downgradeInstance(i, inst.__key__);
}
keyToIdx[inst.__key__] = i;
if (!inst.isPlaceholder) {
inst.__setProperty(this.indexAs, i, true);
}
}
this._pool.length = 0;
this._setRenderedItemCount(this._instances.length);
if (!Polymer.Settings.suppressTemplateNotifications || this.notifyDomChange) {
this.fire('dom-change');
}
this._tryRenderChunk();
},
_applyFullRefresh: function () {
var c = this.collection;
var keys;
if (this._sortFn) {
keys = c ? c.getKeys() : [];
} else {
keys = [];
var items = this.items;
if (items) {
for (var i = 0; i < items.length; i++) {
keys.push(c.getKey(items[i]));
}
}
}
var self = this;
if (this._filterFn) {
keys = keys.filter(function (a) {
return self._filterFn(c.getItem(a));
});
}
if (this._sortFn) {
keys.sort(function (a, b) {
return self._sortFn(c.getItem(a), c.getItem(b));
});
}
for (i = 0; i < keys.length; i++) {
var key = keys[i];
var inst = this._instances[i];
if (inst) {
inst.__key__ = key;
if (!inst.isPlaceholder && i < this._limit) {
inst.__setProperty(this.as, c.getItem(key), true);
}
} else if (i < this._limit) {
this._insertInstance(i, key);
} else {
this._insertPlaceholder(i, key);
}
}
for (var j = this._instances.length - 1; j >= i; j--) {
this._detachAndRemoveInstance(j);
}
},
_numericSort: function (a, b) {
return a - b;
},
_applySplicesUserSort: function (splices) {
var c = this.collection;
var keyMap = {};
var key;
for (var i = 0, s; i < splices.length && (s = splices[i]); i++) {
for (var j = 0; j < s.removed.length; j++) {
key = s.removed[j];
keyMap[key] = keyMap[key] ? null : -1;
}
for (j = 0; j < s.added.length; j++) {
key = s.added[j];
keyMap[key] = keyMap[key] ? null : 1;
}
}
var removedIdxs = [];
var addedKeys = [];
for (key in keyMap) {
if (keyMap[key] === -1) {
removedIdxs.push(this._keyToInstIdx[key]);
}
if (keyMap[key] === 1) {
addedKeys.push(key);
}
}
if (removedIdxs.length) {
removedIdxs.sort(this._numericSort);
for (i = removedIdxs.length - 1; i >= 0; i--) {
var idx = removedIdxs[i];
if (idx !== undefined) {
this._detachAndRemoveInstance(idx);
}
}
}
var self = this;
if (addedKeys.length) {
if (this._filterFn) {
addedKeys = addedKeys.filter(function (a) {
return self._filterFn(c.getItem(a));
});
}
addedKeys.sort(function (a, b) {
return self._sortFn(c.getItem(a), c.getItem(b));
});
var start = 0;
for (i = 0; i < addedKeys.length; i++) {
start = this._insertRowUserSort(start, addedKeys[i]);
}
}
},
_insertRowUserSort: function (start, key) {
var c = this.collection;
var item = c.getItem(key);
var end = this._instances.length - 1;
var idx = -1;
while (start <= end) {
var mid = start + end >> 1;
var midKey = this._instances[mid].__key__;
var cmp = this._sortFn(c.getItem(midKey), item);
if (cmp < 0) {
start = mid + 1;
} else if (cmp > 0) {
end = mid - 1;
} else {
idx = mid;
break;
}
}
if (idx < 0) {
idx = end + 1;
}
this._insertPlaceholder(idx, key);
return idx;
},
_applySplicesArrayOrder: function (splices) {
for (var i = 0, s; i < splices.length && (s = splices[i]); i++) {
for (var j = 0; j < s.removed.length; j++) {
this._detachAndRemoveInstance(s.index);
}
for (j = 0; j < s.addedKeys.length; j++) {
this._insertPlaceholder(s.index + j, s.addedKeys[j]);
}
}
},
_detachInstance: function (idx) {
var inst = this._instances[idx];
if (!inst.isPlaceholder) {
for (var i = 0; i < inst._children.length; i++) {
var el = inst._children[i];
Polymer.dom(inst.root).appendChild(el);
}
return inst;
}
},
_attachInstance: function (idx, parent, refNode) {
var inst = this._instances[idx];
if (!inst.isPlaceholder) {
parent.insertBefore(inst.root, refNode);
}
},
_detachAndRemoveInstance: function (idx) {
var inst = this._detachInstance(idx);
if (inst) {
this._pool.push(inst);
}
this._instances.splice(idx, 1);
},
_insertPlaceholder: function (idx, key) {
this._instances.splice(idx, 0, {
isPlaceholder: true,
__key__: key
});
},
_stampInstance: function (idx, key) {
var model = { __key__: key };
model[this.as] = this.collection.getItem(key);
model[this.indexAs] = idx;
return this.stamp(model);
},
_insertInstance: function (idx, key) {
var inst = this._pool.pop();
if (inst) {
inst.__setProperty(this.as, this.collection.getItem(key), true);
inst.__setProperty('__key__', key, true);
} else {
inst = this._stampInstance(idx, key);
}
var beforeRow = this._instances[idx + 1];
var beforeNode = beforeRow && !beforeRow.isPlaceholder ? beforeRow._children[0] : this;
var parentNode = Polymer.dom(this).parentNode;
if (parentNode.localName == this.is) {
if (beforeNode == this) {
beforeNode = parentNode;
}
parentNode = Polymer.dom(parentNode).parentNode;
}
Polymer.dom(parentNode).insertBefore(inst.root, beforeNode);
this._instances[idx] = inst;
return inst;
},
_downgradeInstance: function (idx, key) {
var inst = this._detachInstance(idx);
if (inst) {
this._pool.push(inst);
}
inst = {
isPlaceholder: true,
__key__: key
};
this._instances[idx] = inst;
return inst;
},
_showHideChildren: function (hidden) {
for (var i = 0; i < this._instances.length; i++) {
if (!this._instances[i].isPlaceholder)
this._instances[i]._showHideChildren(hidden);
}
},
_forwardInstanceProp: function (inst, prop, value) {
if (prop == this.as) {
var idx;
if (this._sortFn || this._filterFn) {
idx = this.items.indexOf(this.collection.getItem(inst.__key__));
} else {
idx = inst[this.indexAs];
}
this.set('items.' + idx, value);
}
},
_forwardInstancePath: function (inst, path, value) {
if (path.indexOf(this.as + '.') === 0) {
this._notifyPath('items.' + inst.__key__ + '.' + path.slice(this.as.length + 1), value);
}
},
_forwardParentProp: function (prop, value) {
var i$ = this._instances;
for (var i = 0, inst; i < i$.length && (inst = i$[i]); i++) {
if (!inst.isPlaceholder) {
inst.__setProperty(prop, value, true);
}
}
},
_forwardParentPath: function (path, value) {
var i$ = this._instances;
for (var i = 0, inst; i < i$.length && (inst = i$[i]); i++) {
if (!inst.isPlaceholder) {
inst._notifyPath(path, value, true);
}
}
},
_forwardItemPath: function (path, value) {
if (this._keyToInstIdx) {
var dot = path.indexOf('.');
var key = path.substring(0, dot < 0 ? path.length : dot);
var idx = this._keyToInstIdx[key];
var inst = this._instances[idx];
if (inst && !inst.isPlaceholder) {
if (dot >= 0) {
path = this.as + '.' + path.substring(dot + 1);
inst._notifyPath(path, value, true);
} else {
inst.__setProperty(this.as, value, true);
}
}
}
},
itemForElement: function (el) {
var instance = this.modelForElement(el);
return instance && instance[this.as];
},
keyForElement: function (el) {
var instance = this.modelForElement(el);
return instance && instance.__key__;
},
indexForElement: function (el) {
var instance = this.modelForElement(el);
return instance && instance[this.indexAs];
}
});Polymer({
is: 'array-selector',
_template: null,
properties: {
items: {
type: Array,
observer: 'clearSelection'
},
multi: {
type: Boolean,
value: false,
observer: 'clearSelection'
},
selected: {
type: Object,
notify: true
},
selectedItem: {
type: Object,
notify: true
},
toggle: {
type: Boolean,
value: false
}
},
clearSelection: function () {
if (Array.isArray(this.selected)) {
for (var i = 0; i < this.selected.length; i++) {
this.unlinkPaths('selected.' + i);
}
} else {
this.unlinkPaths('selected');
this.unlinkPaths('selectedItem');
}
if (this.multi) {
if (!this.selected || this.selected.length) {
this.selected = [];
this._selectedColl = Polymer.Collection.get(this.selected);
}
} else {
this.selected = null;
this._selectedColl = null;
}
this.selectedItem = null;
},
isSelected: function (item) {
if (this.multi) {
return this._selectedColl.getKey(item) !== undefined;
} else {
return this.selected == item;
}
},
deselect: function (item) {
if (this.multi) {
if (this.isSelected(item)) {
var skey = this._selectedColl.getKey(item);
this.arrayDelete('selected', item);
this.unlinkPaths('selected.' + skey);
}
} else {
this.selected = null;
this.selectedItem = null;
this.unlinkPaths('selected');
this.unlinkPaths('selectedItem');
}
},
select: function (item) {
var icol = Polymer.Collection.get(this.items);
var key = icol.getKey(item);
if (this.multi) {
if (this.isSelected(item)) {
if (this.toggle) {
this.deselect(item);
}
} else {
this.push('selected', item);
var skey = this._selectedColl.getKey(item);
this.linkPaths('selected.' + skey, 'items.' + key);
}
} else {
if (this.toggle && item == this.selected) {
this.deselect();
} else {
this.selected = item;
this.selectedItem = item;
this.linkPaths('selected', 'items.' + key);
this.linkPaths('selectedItem', 'items.' + key);
}
}
}
});Polymer({
is: 'dom-if',
extends: 'template',
_template: null,
properties: {
'if': {
type: Boolean,
value: false,
observer: '_queueRender'
},
restamp: {
type: Boolean,
value: false,
observer: '_queueRender'
},
notifyDomChange: { type: Boolean }
},
behaviors: [Polymer.Templatizer],
_queueRender: function () {
this._debounceTemplate(this._render);
},
detached: function () {
var parentNode = this.parentNode;
if (parentNode && parentNode.localName == this.is) {
parentNode = Polymer.dom(parentNode).parentNode;
}
if (!parentNode || parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE && (!Polymer.Settings.hasShadow || !(parentNode instanceof ShadowRoot))) {
this._teardownInstance();
}
},
attached: function () {
if (this.if && this.ctor) {
this.async(this._ensureInstance);
}
},
render: function () {
this._flushTemplates();
},
_render: function () {
if (this.if) {
if (!this.ctor) {
this.templatize(this);
}
this._ensureInstance();
this._showHideChildren();
} else if (this.restamp) {
this._teardownInstance();
}
if (!this.restamp && this._instance) {
this._showHideChildren();
}
if (this.if != this._lastIf) {
if (!Polymer.Settings.suppressTemplateNotifications || this.notifyDomChange) {
this.fire('dom-change');
}
this._lastIf = this.if;
}
},
_ensureInstance: function () {
var refNode;
var parentNode = Polymer.dom(this).parentNode;
if (parentNode && parentNode.localName == this.is) {
refNode = parentNode;
parentNode = Polymer.dom(parentNode).parentNode;
} else {
refNode = this;
}
if (parentNode) {
if (!this._instance) {
this._instance = this.stamp();
var root = this._instance.root;
Polymer.dom(parentNode).insertBefore(root, refNode);
} else {
var c$ = this._instance._children;
if (c$ && c$.length) {
var lastChild = Polymer.dom(refNode).previousSibling;
if (lastChild !== c$[c$.length - 1]) {
for (var i = 0, n; i < c$.length && (n = c$[i]); i++) {
Polymer.dom(parentNode).insertBefore(n, refNode);
}
}
}
}
}
},
_teardownInstance: function () {
if (this._instance) {
var c$ = this._instance._children;
if (c$ && c$.length) {
var parent = Polymer.dom(Polymer.dom(c$[0]).parentNode);
for (var i = 0, n; i < c$.length && (n = c$[i]); i++) {
parent.removeChild(n);
}
}
this._instance = null;
}
},
_showHideChildren: function () {
var hidden = this.__hideTemplateChildren__ || !this.if;
if (this._instance) {
this._instance._showHideChildren(hidden);
}
},
_forwardParentProp: function (prop, value) {
if (this._instance) {
this._instance.__setProperty(prop, value, true);
}
},
_forwardParentPath: function (path, value) {
if (this._instance) {
this._instance._notifyPath(path, value, true);
}
}
});Polymer({
is: 'dom-bind',
properties: { notifyDomChange: { type: Boolean } },
extends: 'template',
_template: null,
created: function () {
var self = this;
Polymer.RenderStatus.whenReady(function () {
if (document.readyState == 'loading') {
document.addEventListener('DOMContentLoaded', function () {
self._markImportsReady();
});
} else {
self._markImportsReady();
}
});
},
_ensureReady: function () {
if (!this._readied) {
this._readySelf();
}
},
_markImportsReady: function () {
this._importsReady = true;
this._ensureReady();
},
_registerFeatures: function () {
this._prepConstructor();
},
_insertChildren: function () {
var refNode;
var parentNode = Polymer.dom(this).parentNode;
if (parentNode.localName == this.is) {
refNode = parentNode;
parentNode = Polymer.dom(parentNode).parentNode;
} else {
refNode = this;
}
Polymer.dom(parentNode).insertBefore(this.root, refNode);
},
_removeChildren: function () {
if (this._children) {
for (var i = 0; i < this._children.length; i++) {
this.root.appendChild(this._children[i]);
}
}
},
_initFeatures: function () {
},
_scopeElementClass: function (element, selector) {
if (this.dataHost) {
return this.dataHost._scopeElementClass(element, selector);
} else {
return selector;
}
},
_configureInstanceProperties: function () {
},
_prepConfigure: function () {
var config = {};
for (var prop in this._propertyEffects) {
config[prop] = this[prop];
}
var setupConfigure = this._setupConfigure;
this._setupConfigure = function () {
setupConfigure.call(this, config);
};
},
attached: function () {
if (this._importsReady) {
this.render();
}
},
detached: function () {
this._removeChildren();
},
render: function () {
this._ensureReady();
if (!this._children) {
this._template = this;
this._prepAnnotations();
this._prepEffects();
this._prepBehaviors();
this._prepConfigure();
this._prepBindings();
this._prepPropertyInfo();
Polymer.Base._initFeatures.call(this);
this._children = Polymer.TreeApi.arrayCopyChildNodes(this.root);
}
this._insertChildren();
if (!Polymer.Settings.suppressTemplateNotifications || this.notifyDomChange) {
this.fire('dom-change');
}
}
});</script>









<script>/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function MakePromise (asap) {
  function Promise(fn) {
		if (typeof this !== 'object' || typeof fn !== 'function') throw new TypeError();
		this._state = null;
		this._value = null;
		this._deferreds = []

		doResolve(fn, resolve.bind(this), reject.bind(this));
	}

	function handle(deferred) {
		var me = this;
		if (this._state === null) {
			this._deferreds.push(deferred);
			return
		}
		asap(function() {
			var cb = me._state ? deferred.onFulfilled : deferred.onRejected
			if (typeof cb !== 'function') {
				(me._state ? deferred.resolve : deferred.reject)(me._value);
				return;
			}
			var ret;
			try {
				ret = cb(me._value);
			}
			catch (e) {
				deferred.reject(e);
				return;
			}
			deferred.resolve(ret);
		})
	}

	function resolve(newValue) {
		try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
			if (newValue === this) throw new TypeError();
			if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {
				var then = newValue.then;
				if (typeof then === 'function') {
					doResolve(then.bind(newValue), resolve.bind(this), reject.bind(this));
					return;
				}
			}
			this._state = true;
			this._value = newValue;
			finale.call(this);
		} catch (e) { reject.call(this, e); }
	}

	function reject(newValue) {
		this._state = false;
		this._value = newValue;
		finale.call(this);
	}

	function finale() {
		for (var i = 0, len = this._deferreds.length; i < len; i++) {
			handle.call(this, this._deferreds[i]);
		}
		this._deferreds = null;
	}

	/**
	 * Take a potentially misbehaving resolver function and make sure
	 * onFulfilled and onRejected are only called once.
	 *
	 * Makes no guarantees about asynchrony.
	 */
	function doResolve(fn, onFulfilled, onRejected) {
		var done = false;
		try {
			fn(function (value) {
				if (done) return;
				done = true;
				onFulfilled(value);
			}, function (reason) {
				if (done) return;
				done = true;
				onRejected(reason);
			})
		} catch (ex) {
			if (done) return;
			done = true;
			onRejected(ex);
		}
	}

	Promise.prototype['catch'] = function (onRejected) {
		return this.then(null, onRejected);
	};

	Promise.prototype.then = function(onFulfilled, onRejected) {
		var me = this;
		return new Promise(function(resolve, reject) {
      handle.call(me, {
        onFulfilled: onFulfilled,
        onRejected: onRejected,
        resolve: resolve,
        reject: reject
      });
		})
	};

	Promise.resolve = function (value) {
		if (value && typeof value === 'object' && value.constructor === Promise) {
			return value;
		}

		return new Promise(function (resolve) {
			resolve(value);
		});
	};

	Promise.reject = function (value) {
		return new Promise(function (resolve, reject) {
			reject(value);
		});
	};

	
  return Promise;
}

if (typeof module !== 'undefined') {
  module.exports = MakePromise;
}

</script>
<script>
if (!window.Promise) {
  window.Promise = MakePromise(Polymer.Base.async);
}
</script>
<script>/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
Promise.all = Promise.all || function () {
  var args = Array.prototype.slice.call(arguments.length === 1 && Array.isArray(arguments[0]) ? arguments[0] : arguments);

  return new Promise(function (resolve, reject) {
    if (args.length === 0) return resolve([]);
    var remaining = args.length;
    function res(i, val) {
      try {
        if (val && (typeof val === 'object' || typeof val === 'function')) {
          var then = val.then;
          if (typeof then === 'function') {
            then.call(val, function (val) { res(i, val) }, reject);
            return;
          }
        }
        args[i] = val;
        if (--remaining === 0) {
          resolve(args);
        }
      } catch (ex) {
        reject(ex);
      }
    }
    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

Promise.race = Promise.race || function(values) {
  // TODO(bradfordcsmith): To be consistent with the ECMAScript spec, this
  //     method should take any iterable, not just an array.
  var forcedArray = /** @type {!Array<!Thenable>} */ (values);
  return new Promise(function (resolve, reject) {
    for(var i = 0, len = forcedArray.length; i < len; i++) {
      forcedArray[i].then(resolve, reject);
    }
  });
};

</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--

The `iron-location` element manages binding to and from the current URL.

iron-location is the first, and lowest level element in the Polymer team's
routing system. This is a beta release of iron-location as we continue work
on higher level elements, and as such iron-location may undergo breaking
changes.

#### Properties

When the URL is: `/search?query=583#details` iron-location's properties will be:

  - path: `'/search'`
  - query: `'query=583'`
  - hash: `'details'`

These bindings are bidirectional. Modifying them will in turn modify the URL.

iron-location is only active while it is attached to the document.

#### Links

While iron-location is active in the document it will intercept clicks on links
within your site, updating the URL pushing the updated URL out through the
databinding system. iron-location only intercepts clicks with the intent to
open in the same window, so middle mouse clicks and ctrl/cmd clicks work fine.

You can customize this behavior with the `urlSpaceRegex`.

#### Dwell Time

iron-location protects against accidental history spamming by only adding
entries to the user's history if the URL stays unchanged for `dwellTime`
milliseconds.

@demo demo/index.html

 -->
<script>
  (function() {
    'use strict';

    Polymer({
      is: 'iron-location',
      properties: {
        /**
         * The pathname component of the URL.
         */
        path: {
          type: String,
          notify: true,
          value: function() {
            return window.decodeURIComponent(window.location.pathname);
          }
        },
        /**
         * The query string portion of the URL.
         */
        query: {
          type: String,
          notify: true,
          value: function() {
            return window.location.search.slice(1);
          }
        },
        /**
         * The hash component of the URL.
         */
        hash: {
          type: String,
          notify: true,
          value: function() {
            return window.decodeURIComponent(window.location.hash.slice(1));
          }
        },
        /**
         * If the user was on a URL for less than `dwellTime` milliseconds, it
         * won't be added to the browser's history, but instead will be replaced
         * by the next entry.
         *
         * This is to prevent large numbers of entries from clogging up the user's
         * browser history. Disable by setting to a negative number.
         */
        dwellTime: {
          type: Number,
          value: 2000
        },

        /**
         * A regexp that defines the set of URLs that should be considered part
         * of this web app.
         *
         * Clicking on a link that matches this regex won't result in a full page
         * navigation, but will instead just update the URL state in place.
         *
         * This regexp is given everything after the origin in an absolute
         * URL. So to match just URLs that start with /search/ do:
         *     url-space-regex="^/search/"
         *
         * @type {string|RegExp}
         */
        urlSpaceRegex: {
          type: String,
          value: ''
        },

        /**
         * urlSpaceRegex, but coerced into a regexp.
         *
         * @type {RegExp}
         */
        _urlSpaceRegExp: {
          computed: '_makeRegExp(urlSpaceRegex)'
        },

        _lastChangedAt: {
          type: Number
        },

        _initialized: {
          type: Boolean,
          value: false
        }
      },
      hostAttributes: {
        hidden: true
      },
      observers: [
        '_updateUrl(path, query, hash)'
      ],
      attached: function() {
        this.listen(window, 'hashchange', '_hashChanged');
        this.listen(window, 'location-changed', '_urlChanged');
        this.listen(window, 'popstate', '_urlChanged');
        this.listen(/** @type {!HTMLBodyElement} */(document.body), 'click', '_globalOnClick');
        // Give a 200ms grace period to make initial redirects without any
        // additions to the user's history.
        this._lastChangedAt = window.performance.now() - (this.dwellTime - 200);

        this._initialized = true;
        this._urlChanged();
      },
      detached: function() {
        this.unlisten(window, 'hashchange', '_hashChanged');
        this.unlisten(window, 'location-changed', '_urlChanged');
        this.unlisten(window, 'popstate', '_urlChanged');
        this.unlisten(/** @type {!HTMLBodyElement} */(document.body), 'click', '_globalOnClick');
        this._initialized = false;
      },
      _hashChanged: function() {
        this.hash = window.decodeURIComponent(window.location.hash.substring(1));
      },
      _urlChanged: function() {
        // We want to extract all info out of the updated URL before we
        // try to write anything back into it.
        //
        // i.e. without _dontUpdateUrl we'd overwrite the new path with the old
        // one when we set this.hash. Likewise for query.
        this._dontUpdateUrl = true;
        this._hashChanged();
        this.path = window.decodeURIComponent(window.location.pathname);
        this.query = window.location.search.substring(1);
        this._dontUpdateUrl = false;
        this._updateUrl();
      },
      _getUrl: function() {
        var partiallyEncodedPath = window.encodeURI(
            this.path).replace(/\#/g, '%23').replace(/\?/g, '%3F');
        var partiallyEncodedQuery = '';
        if (this.query) {
          partiallyEncodedQuery = '?' + this.query.replace(/\#/g, '%23');
        }
        var partiallyEncodedHash = '';
        if (this.hash) {
          partiallyEncodedHash = '#' + window.encodeURI(this.hash);
        }
        return (
            partiallyEncodedPath + partiallyEncodedQuery + partiallyEncodedHash);
      },
      _updateUrl: function() {
        if (this._dontUpdateUrl || !this._initialized) {
          return;
        }
        if (this.path === window.decodeURIComponent(window.location.pathname) &&
            this.query === window.location.search.substring(1) &&
            this.hash === window.decodeURIComponent(
                window.location.hash.substring(1))) {
          // Nothing to do, the current URL is a representation of our properties.
          return;
        }
        var newUrl = this._getUrl();
        // Need to use a full URL in case the containing page has a base URI.
        var fullNewUrl = new URL(
            newUrl, window.location.protocol + '//' + window.location.host).href;
        var now = window.performance.now();
        var shouldReplace =
            this._lastChangedAt + this.dwellTime > now;
        this._lastChangedAt = now;
        if (shouldReplace) {
          window.history.replaceState({}, '', fullNewUrl);
        } else {
          window.history.pushState({}, '', fullNewUrl);
        }
        this.fire('location-changed', {}, {node: window});
      },
      /**
       * A necessary evil so that links work as expected. Does its best to
       * bail out early if possible.
       *
       * @param {MouseEvent} event .
       */
      _globalOnClick: function(event) {
        // If another event handler has stopped this event then there's nothing
        // for us to do. This can happen e.g. when there are multiple
        // iron-location elements in a page.
        if (event.defaultPrevented) {
          return;
        }
        var href = this._getSameOriginLinkHref(event);
        if (!href) {
          return;
        }
        event.preventDefault();
        // If the navigation is to the current page we shouldn't add a history
        // entry or fire a change event.
        if (href === window.location.href) {
          return;
        }
        window.history.pushState({}, '', href);
        this.fire('location-changed', {}, {node: window});
      },
      /**
       * Returns the absolute URL of the link (if any) that this click event
       * is clicking on, if we can and should override the resulting full
       * page navigation. Returns null otherwise.
       *
       * @param {MouseEvent} event .
       * @return {string?} .
       */
      _getSameOriginLinkHref: function(event) {
        // We only care about left-clicks.
        if (event.button !== 0) {
          return null;
        }
        // We don't want modified clicks, where the intent is to open the page
        // in a new tab.
        if (event.metaKey || event.ctrlKey) {
          return null;
        }
        var eventPath = Polymer.dom(event).path;
        var anchor = null;
        for (var i = 0; i < eventPath.length; i++) {
          var element = eventPath[i];
          if (element.tagName === 'A' && element.href) {
            anchor = element;
            break;
          }
        }

        // If there's no link there's nothing to do.
        if (!anchor) {
          return null;
        }

        // Target blank is a new tab, don't intercept.
        if (anchor.target === '_blank') {
          return null;
        }
        // If the link is for an existing parent frame, don't intercept.
        if ((anchor.target === '_top' ||
             anchor.target === '_parent') &&
            window.top !== window) {
          return null;
        }

        var href = anchor.href;

        // It only makes sense for us to intercept same-origin navigations.
        // pushState/replaceState don't work with cross-origin links.
        var url;
        if (document.baseURI != null) {
          url = new URL(href, /** @type {string} */(document.baseURI));
        } else {
          url = new URL(href);
        }

        var origin;

        // IE Polyfill
        if (window.location.origin) {
          origin = window.location.origin;
        } else {
          origin = window.location.protocol + '//' + window.location.hostname;

          if (window.location.port) {
            origin += ':' + window.location.port;
          }
        }

        if (url.origin !== origin) {
          return null;
        }
        var normalizedHref = url.pathname + url.search + url.hash;

        // If we've been configured not to handle this url... don't handle it!
        if (this._urlSpaceRegExp &&
            !this._urlSpaceRegExp.test(normalizedHref)) {
          return null;
        }
        // Need to use a full URL in case the containing page has a base URI.
        var fullNormalizedHref = new URL(
            normalizedHref, window.location.href).href;
        return fullNormalizedHref;
      },
      _makeRegExp: function(urlSpaceRegex) {
        return RegExp(urlSpaceRegex);
      }
    });
  })();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  'use strict';

  Polymer({
    is: 'iron-query-params',
    properties: {
      paramsString: {
        type: String,
        notify: true,
        observer: 'paramsStringChanged',
      },
      paramsObject: {
        type: Object,
        notify: true,
        value: function() {
          return {};
        }
      },
      _dontReact: {
        type: Boolean,
        value: false
      }
    },
    hostAttributes: {
      hidden: true
    },
    observers: [
      'paramsObjectChanged(paramsObject.*)'
    ],
    paramsStringChanged: function() {
      this._dontReact = true;
      this.paramsObject = this._decodeParams(this.paramsString);
      this._dontReact = false;
    },
    paramsObjectChanged: function() {
      if (this._dontReact) {
        return;
      }
      this.paramsString = this._encodeParams(this.paramsObject)
          .replace(/%3F/g, '?').replace(/%2F/g, '/').replace(/'/g, '%27');
    },
    _encodeParams: function(params) {
      var encodedParams = [];
      for (var key in params) {
        var value = params[key];
        if (value === '') {
          encodedParams.push(encodeURIComponent(key));
        } else if (value) {
          encodedParams.push(
              encodeURIComponent(key) +
              '=' +
              encodeURIComponent(value.toString())
          );
        }
      }
      return encodedParams.join('&');
    },
    _decodeParams: function(paramString) {
      var params = {};

      // Work around a bug in decodeURIComponent where + is not
      // converted to spaces:
      paramString = (paramString || '').replace(/\+/g, '%20');

      var paramList = paramString.split('&');
      for (var i = 0; i < paramList.length; i++) {
        var param = paramList[i].split('=');
        if (param[0]) {
          params[decodeURIComponent(param[0])] =
              decodeURIComponent(param[1] || '');
        }
      }
      return params;
    }
  });
</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  (function() {
    'use strict';

    /**
     * Provides bidirectional mapping between `path` and `queryParams` and a
     * app-route compatible `route` object.
     *
     * For more information, see the docs for `app-route-converter`.
     *
     * @polymerBehavior
     */
    Polymer.AppRouteConverterBehavior = {
      properties: {
        /**
         * A model representing the deserialized path through the route tree, as
         * well as the current queryParams.
         *
         * A route object is the kernel of the routing system. It is intended to
         * be fed into consuming elements such as `app-route`.
         *
         * @type {?Object}
         */
        route: {
          type: Object,
          notify: true
        },

        /**
         * A set of key/value pairs that are universally accessible to branches of
         * the route tree.
         *
         * @type {?Object}
         */
        queryParams: {
          type: Object,
          notify: true
        },

        /**
         * The serialized path through the route tree. This corresponds to the
         * `window.location.pathname` value, and will update to reflect changes
         * to that value.
         */
        path: {
          type: String,
          notify: true,
        }
      },

      observers: [
        '_locationChanged(path, queryParams)',
        '_routeChanged(route.prefix, route.path)',
        '_routeQueryParamsChanged(route.__queryParams)'
      ],

      created: function() {
        this.linkPaths('route.__queryParams', 'queryParams');
        this.linkPaths('queryParams', 'route.__queryParams');
      },

      /**
       * Handler called when the path or queryParams change.
       */
      _locationChanged: function() {
        if (this.route &&
            this.route.path === this.path &&
            this.queryParams === this.route.__queryParams) {
          return;
        }
        this.route = {
          prefix: '',
          path: this.path,
          __queryParams: this.queryParams
        };
      },

      /**
       * Handler called when the route prefix and route path change.
       */
      _routeChanged: function() {
        if (!this.route) {
          return;
        }

        this.path = this.route.prefix + this.route.path;
      },

      /**
       * Handler called when the route queryParams change.
       *
       * @param  {Object} queryParams A set of key/value pairs that are
       * universally accessible to branches of the route tree.
       */
      _routeQueryParamsChanged: function(queryParams) {
        if (!this.route) {
          return;
        }
        this.queryParams = queryParams;
      }
    };
  })();
</script>
<!--
`app-location` is an element that provides synchronization between the
browser location bar and the state of an app. When created, `app-location`
elements will automatically watch the global location for changes. As changes
occur, `app-location` produces and updates an object called `route`. This
`route` object is suitable for passing into a `app-route`, and other similar
elements.

An example of the public API of a route object that describes the URL
`https://elements.polymer-project.org/elements/app-location`:

    {
      prefix: '',
      path: '/elements/app-location'
    }

Example Usage:

    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{data}}"></app-route>

As you can see above, the `app-location` element produces a `route` and that
property is then bound into the `app-route` element. The bindings are two-
directional, so when changes to the `route` object occur within `app-route`,
they automatically reflect back to the global location.

### Hashes vs Paths

By default `app-location` routes using the pathname portion of the URL. This has
broad browser support but it does require cooperation of the backend server. An
`app-location` can be configured to use the hash part of a URL instead using
the `use-hash-as-path` attribute, like so:

    <app-location route="{{route}}" use-hash-as-path></app-location>

### Integrating with other routing code

There is no standard event that is fired when window.location is modified.
`app-location` fires a `location-changed` event on `window` when it updates the
location. It also listens for that same event, and re-reads the URL when it's
fired. This makes it very easy to interop with other routing code.

So for example if you want to navigate to `/new_path` imperatively you could
call `window.location.pushState` or `window.location.replaceState` followed by
firing a `location-changed` event on `window`. i.e.

    window.history.pushState({}, null, '/new_path');
    window.dispatchEvent(new CustomEvent('location-changed'));

@element app-location
@demo demo/index.html
-->
<dom-module id="app-location" assetpath="bower_components/app-route/">
  <template>
    <iron-location path="{{__path}}" query="{{__query}}" hash="{{__hash}}" url-space-regex="{{urlSpaceRegex}}">
    </iron-location>
    <iron-query-params params-string="{{__query}}" params-object="{{queryParams}}">
    </iron-query-params>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'app-location',

        properties: {
          /**
           * A model representing the deserialized path through the route tree, as
           * well as the current queryParams.
           */
          route: {
            type: Object,
            notify: true
          },

          /**
           * In many scenarios, it is convenient to treat the `hash` as a stand-in
           * alternative to the `path`. For example, if deploying an app to a static
           * web server (e.g., Github Pages) - where one does not have control over
           * server-side routing - it is usually a better experience to use the hash
           * to represent paths through one's app.
           *
           * When this property is set to true, the `hash` will be used in place of

           * the `path` for generating a `route`.
           */
          useHashAsPath: {
            type: Boolean,
            value: false
          },

          /**
           * A regexp that defines the set of URLs that should be considered part
           * of this web app.
           *
           * Clicking on a link that matches this regex won't result in a full page
           * navigation, but will instead just update the URL state in place.
           *
           * This regexp is given everything after the origin in an absolute
           * URL. So to match just URLs that start with /search/ do:
           *     url-space-regex="^/search/"
           *
           * @type {string|RegExp}
           */
          urlSpaceRegex: {
            type: String,
            notify: true
          },

          /**
           * A set of key/value pairs that are universally accessible to branches
           * of the route tree.
           */
          __queryParams: {
            type: Object
          },

          /**
           * The pathname component of the current URL.
           */
          __path: {
            type: String
          },

          /**
           * The query string portion of the current URL.
           */
          __query: {
            type: String
          },

          /**
           * The hash portion of the current URL.
           */
          __hash: {
            type: String
          },

          /**
           * The route path, which will be either the hash or the path, depending
           * on useHashAsPath.
           */
          path: {
            type: String,
            observer: '__onPathChanged'
          }
        },

        behaviors: [Polymer.AppRouteConverterBehavior],

        observers: [
          '__computeRoutePath(useHashAsPath, __hash, __path)'
        ],

        __computeRoutePath: function() {
          this.path = this.useHashAsPath ? this.__hash : this.__path;
        },

        __onPathChanged: function() {
          if (!this._readied) {
            return;
          }

          if (this.useHashAsPath) {
            this.__hash = this.path;
          } else {
            this.__path = this.path;
          }
        }
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /**
   * `IronResizableBehavior` is a behavior that can be used in Polymer elements to
   * coordinate the flow of resize events between "resizers" (elements that control the
   * size or hidden state of their children) and "resizables" (elements that need to be
   * notified when they are resized or un-hidden by their parents in order to take
   * action on their new measurements).
   *
   * Elements that perform measurement should add the `IronResizableBehavior` behavior to
   * their element definition and listen for the `iron-resize` event on themselves.
   * This event will be fired when they become showing after having been hidden,
   * when they are resized explicitly by another resizable, or when the window has been
   * resized.
   *
   * Note, the `iron-resize` event is non-bubbling.
   *
   * @polymerBehavior Polymer.IronResizableBehavior
   * @demo demo/index.html
   **/
  Polymer.IronResizableBehavior = {
    properties: {
      /**
       * The closest ancestor element that implements `IronResizableBehavior`.
       */
      _parentResizable: {
        type: Object,
        observer: '_parentResizableChanged'
      },

      /**
       * True if this element is currently notifying its descendant elements of
       * resize.
       */
      _notifyingDescendant: {
        type: Boolean,
        value: false
      }
    },

    listeners: {
      'iron-request-resize-notifications': '_onIronRequestResizeNotifications'
    },

    created: function() {
      // We don't really need property effects on these, and also we want them
      // to be created before the `_parentResizable` observer fires:
      this._interestedResizables = [];
      this._boundNotifyResize = this.notifyResize.bind(this);
    },

    attached: function() {
      this.fire('iron-request-resize-notifications', null, {
        node: this,
        bubbles: true,
        cancelable: true
      });

      if (!this._parentResizable) {
        window.addEventListener('resize', this._boundNotifyResize);
        this.notifyResize();
      }
    },

    detached: function() {
      if (this._parentResizable) {
        this._parentResizable.stopResizeNotificationsFor(this);
      } else {
        window.removeEventListener('resize', this._boundNotifyResize);
      }

      this._parentResizable = null;
    },

    /**
     * Can be called to manually notify a resizable and its descendant
     * resizables of a resize change.
     */
    notifyResize: function() {
      if (!this.isAttached) {
        return;
      }

      this._interestedResizables.forEach(function(resizable) {
        if (this.resizerShouldNotify(resizable)) {
          this._notifyDescendant(resizable);
        }
      }, this);

      this._fireResize();
    },

    /**
     * Used to assign the closest resizable ancestor to this resizable
     * if the ancestor detects a request for notifications.
     */
    assignParentResizable: function(parentResizable) {
      this._parentResizable = parentResizable;
    },

    /**
     * Used to remove a resizable descendant from the list of descendants
     * that should be notified of a resize change.
     */
    stopResizeNotificationsFor: function(target) {
      var index = this._interestedResizables.indexOf(target);

      if (index > -1) {
        this._interestedResizables.splice(index, 1);
        this.unlisten(target, 'iron-resize', '_onDescendantIronResize');
      }
    },

    /**
     * This method can be overridden to filter nested elements that should or
     * should not be notified by the current element. Return true if an element
     * should be notified, or false if it should not be notified.
     *
     * @param {HTMLElement} element A candidate descendant element that
     * implements `IronResizableBehavior`.
     * @return {boolean} True if the `element` should be notified of resize.
     */
    resizerShouldNotify: function(element) { return true; },

    _onDescendantIronResize: function(event) {
      if (this._notifyingDescendant) {
        event.stopPropagation();
        return;
      }

      // NOTE(cdata): In ShadowDOM, event retargeting makes echoing of the
      // otherwise non-bubbling event "just work." We do it manually here for
      // the case where Polymer is not using shadow roots for whatever reason:
      if (!Polymer.Settings.useShadow) {
        this._fireResize();
      }
    },

    _fireResize: function() {
      this.fire('iron-resize', null, {
        node: this,
        bubbles: false
      });
    },

    _onIronRequestResizeNotifications: function(event) {
      var target = event.path ? event.path[0] : event.target;

      if (target === this) {
        return;
      }

      if (this._interestedResizables.indexOf(target) === -1) {
        this._interestedResizables.push(target);
        this.listen(target, 'iron-resize', '_onDescendantIronResize');
      }

      target.assignParentResizable(this);
      this._notifyDescendant(target);

      event.stopPropagation();
    },

    _parentResizableChanged: function(parentResizable) {
      if (parentResizable) {
        window.removeEventListener('resize', this._boundNotifyResize);
      }
    },

    _notifyDescendant: function(descendant) {
      // NOTE(cdata): In IE10, attached is fired on children first, so it's
      // important not to notify them if the parent is not attached yet (or
      // else they will get redundantly notified when the parent attaches).
      if (!this.isAttached) {
        return;
      }

      this._notifyingDescendant = true;
      descendant.notifyResize();
      this._notifyingDescendant = false;
    }
  };
</script>

<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * @param {!Function} selectCallback
   * @constructor
   */
  Polymer.IronSelection = function(selectCallback) {
    this.selection = [];
    this.selectCallback = selectCallback;
  };

  Polymer.IronSelection.prototype = {

    /**
     * Retrieves the selected item(s).
     *
     * @method get
     * @returns Returns the selected item(s). If the multi property is true,
     * `get` will return an array, otherwise it will return
     * the selected item or undefined if there is no selection.
     */
    get: function() {
      return this.multi ? this.selection.slice() : this.selection[0];
    },

    /**
     * Clears all the selection except the ones indicated.
     *
     * @method clear
     * @param {Array} excludes items to be excluded.
     */
    clear: function(excludes) {
      this.selection.slice().forEach(function(item) {
        if (!excludes || excludes.indexOf(item) < 0) {
          this.setItemSelected(item, false);
        }
      }, this);
    },

    /**
     * Indicates if a given item is selected.
     *
     * @method isSelected
     * @param {*} item The item whose selection state should be checked.
     * @returns Returns true if `item` is selected.
     */
    isSelected: function(item) {
      return this.selection.indexOf(item) >= 0;
    },

    /**
     * Sets the selection state for a given item to either selected or deselected.
     *
     * @method setItemSelected
     * @param {*} item The item to select.
     * @param {boolean} isSelected True for selected, false for deselected.
     */
    setItemSelected: function(item, isSelected) {
      if (item != null) {
        if (isSelected !== this.isSelected(item)) {
          // proceed to update selection only if requested state differs from current
          if (isSelected) {
            this.selection.push(item);
          } else {
            var i = this.selection.indexOf(item);
            if (i >= 0) {
              this.selection.splice(i, 1);
            }
          }
          if (this.selectCallback) {
            this.selectCallback(item, isSelected);
          }
        }
      }
    },

    /**
     * Sets the selection state for a given item. If the `multi` property
     * is true, then the selected state of `item` will be toggled; otherwise
     * the `item` will be selected.
     *
     * @method select
     * @param {*} item The item to select.
     */
    select: function(item) {
      if (this.multi) {
        this.toggle(item);
      } else if (this.get() !== item) {
        this.setItemSelected(this.get(), false);
        this.setItemSelected(item, true);
      }
    },

    /**
     * Toggles the selection state for `item`.
     *
     * @method toggle
     * @param {*} item The item to toggle.
     */
    toggle: function(item) {
      this.setItemSelected(item, !this.isSelected(item));
    }

  };

</script>
<script>

  /** @polymerBehavior */
  Polymer.IronSelectableBehavior = {

      /**
       * Fired when iron-selector is activated (selected or deselected).
       * It is fired before the selected items are changed.
       * Cancel the event to abort selection.
       *
       * @event iron-activate
       */

      /**
       * Fired when an item is selected
       *
       * @event iron-select
       */

      /**
       * Fired when an item is deselected
       *
       * @event iron-deselect
       */

      /**
       * Fired when the list of selectable items changes (e.g., items are
       * added or removed). The detail of the event is a mutation record that
       * describes what changed.
       *
       * @event iron-items-changed
       */

    properties: {

      /**
       * If you want to use an attribute value or property of an element for
       * `selected` instead of the index, set this to the name of the attribute
       * or property. Hyphenated values are converted to camel case when used to
       * look up the property of a selectable element. Camel cased values are
       * *not* converted to hyphenated values for attribute lookup. It's
       * recommended that you provide the hyphenated form of the name so that
       * selection works in both cases. (Use `attr-or-property-name` instead of
       * `attrOrPropertyName`.)
       */
      attrForSelected: {
        type: String,
        value: null
      },

      /**
       * Gets or sets the selected element. The default is to use the index of the item.
       * @type {string|number}
       */
      selected: {
        type: String,
        notify: true
      },

      /**
       * Returns the currently selected item.
       *
       * @type {?Object}
       */
      selectedItem: {
        type: Object,
        readOnly: true,
        notify: true
      },

      /**
       * The event that fires from items when they are selected. Selectable
       * will listen for this event from items and update the selection state.
       * Set to empty string to listen to no events.
       */
      activateEvent: {
        type: String,
        value: 'tap',
        observer: '_activateEventChanged'
      },

      /**
       * This is a CSS selector string.  If this is set, only items that match the CSS selector
       * are selectable.
       */
      selectable: String,

      /**
       * The class to set on elements when selected.
       */
      selectedClass: {
        type: String,
        value: 'iron-selected'
      },

      /**
       * The attribute to set on elements when selected.
       */
      selectedAttribute: {
        type: String,
        value: null
      },

      /**
       * Default fallback if the selection based on selected with `attrForSelected`
       * is not found.
       */
      fallbackSelection: {
        type: String,
        value: null
      },

      /**
       * The list of items from which a selection can be made.
       */
      items: {
        type: Array,
        readOnly: true,
        notify: true,
        value: function() {
          return [];
        }
      },

      /**
       * The set of excluded elements where the key is the `localName`
       * of the element that will be ignored from the item list.
       *
       * @default {template: 1}
       */
      _excludedLocalNames: {
        type: Object,
        value: function() {
          return {
            'template': 1
          };
        }
      }
    },

    observers: [
      '_updateAttrForSelected(attrForSelected)',
      '_updateSelected(selected)',
      '_checkFallback(fallbackSelection)'
    ],

    created: function() {
      this._bindFilterItem = this._filterItem.bind(this);
      this._selection = new Polymer.IronSelection(this._applySelection.bind(this));
    },

    attached: function() {
      this._observer = this._observeItems(this);
      this._updateItems();
      if (!this._shouldUpdateSelection) {
        this._updateSelected();
      }
      this._addListener(this.activateEvent);
    },

    detached: function() {
      if (this._observer) {
        Polymer.dom(this).unobserveNodes(this._observer);
      }
      this._removeListener(this.activateEvent);
    },

    /**
     * Returns the index of the given item.
     *
     * @method indexOf
     * @param {Object} item
     * @returns Returns the index of the item
     */
    indexOf: function(item) {
      return this.items.indexOf(item);
    },

    /**
     * Selects the given value.
     *
     * @method select
     * @param {string|number} value the value to select.
     */
    select: function(value) {
      this.selected = value;
    },

    /**
     * Selects the previous item.
     *
     * @method selectPrevious
     */
    selectPrevious: function() {
      var length = this.items.length;
      var index = (Number(this._valueToIndex(this.selected)) - 1 + length) % length;
      this.selected = this._indexToValue(index);
    },

    /**
     * Selects the next item.
     *
     * @method selectNext
     */
    selectNext: function() {
      var index = (Number(this._valueToIndex(this.selected)) + 1) % this.items.length;
      this.selected = this._indexToValue(index);
    },

    /**
     * Selects the item at the given index.
     *
     * @method selectIndex
     */
    selectIndex: function(index) {
      this.select(this._indexToValue(index));
    },

    /**
     * Force a synchronous update of the `items` property.
     *
     * NOTE: Consider listening for the `iron-items-changed` event to respond to
     * updates to the set of selectable items after updates to the DOM list and
     * selection state have been made.
     *
     * WARNING: If you are using this method, you should probably consider an
     * alternate approach. Synchronously querying for items is potentially
     * slow for many use cases. The `items` property will update asynchronously
     * on its own to reflect selectable items in the DOM.
     */
    forceSynchronousItemUpdate: function() {
      this._updateItems();
    },

    get _shouldUpdateSelection() {
      return this.selected != null;
    },

    _checkFallback: function() {
      if (this._shouldUpdateSelection) {
        this._updateSelected();
      }
    },

    _addListener: function(eventName) {
      this.listen(this, eventName, '_activateHandler');
    },

    _removeListener: function(eventName) {
      this.unlisten(this, eventName, '_activateHandler');
    },

    _activateEventChanged: function(eventName, old) {
      this._removeListener(old);
      this._addListener(eventName);
    },

    _updateItems: function() {
      var nodes = Polymer.dom(this).queryDistributedElements(this.selectable || '*');
      nodes = Array.prototype.filter.call(nodes, this._bindFilterItem);
      this._setItems(nodes);
    },

    _updateAttrForSelected: function() {
      if (this._shouldUpdateSelection) {
        this.selected = this._indexToValue(this.indexOf(this.selectedItem));
      }
    },

    _updateSelected: function() {
      this._selectSelected(this.selected);
    },

    _selectSelected: function(selected) {
      this._selection.select(this._valueToItem(this.selected));
      // Check for items, since this array is populated only when attached
      // Since Number(0) is falsy, explicitly check for undefined
      if (this.fallbackSelection && this.items.length && (this._selection.get() === undefined)) {
        this.selected = this.fallbackSelection;
      }
    },

    _filterItem: function(node) {
      return !this._excludedLocalNames[node.localName];
    },

    _valueToItem: function(value) {
      return (value == null) ? null : this.items[this._valueToIndex(value)];
    },

    _valueToIndex: function(value) {
      if (this.attrForSelected) {
        for (var i = 0, item; item = this.items[i]; i++) {
          if (this._valueForItem(item) == value) {
            return i;
          }
        }
      } else {
        return Number(value);
      }
    },

    _indexToValue: function(index) {
      if (this.attrForSelected) {
        var item = this.items[index];
        if (item) {
          return this._valueForItem(item);
        }
      } else {
        return index;
      }
    },

    _valueForItem: function(item) {
      var propValue = item[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];
      return propValue != undefined ? propValue : item.getAttribute(this.attrForSelected);
    },

    _applySelection: function(item, isSelected) {
      if (this.selectedClass) {
        this.toggleClass(this.selectedClass, isSelected, item);
      }
      if (this.selectedAttribute) {
        this.toggleAttribute(this.selectedAttribute, isSelected, item);
      }
      this._selectionChange();
      this.fire('iron-' + (isSelected ? 'select' : 'deselect'), {item: item});
    },

    _selectionChange: function() {
      this._setSelectedItem(this._selection.get());
    },

    // observe items change under the given node.
    _observeItems: function(node) {
      return Polymer.dom(node).observeNodes(function(mutation) {
        this._updateItems();

        if (this._shouldUpdateSelection) {
          this._updateSelected();
        }

        // Let other interested parties know about the change so that
        // we don't have to recreate mutation observers everywhere.
        this.fire('iron-items-changed', mutation, {
          bubbles: false,
          cancelable: false
        });
      });
    },

    _activateHandler: function(e) {
      var t = e.target;
      var items = this.items;
      while (t && t != this) {
        var i = items.indexOf(t);
        if (i >= 0) {
          var value = this._indexToValue(i);
          this._itemActivate(value, t);
          return;
        }
        t = t.parentNode;
      }
    },

    _itemActivate: function(value, item) {
      if (!this.fire('iron-activate',
          {selected: value, item: item}, {cancelable: true}).defaultPrevented) {
        this.select(value);
      }
    }

  };

</script>
<!--
`iron-pages` is used to select one of its children to show. One use is to cycle through a list of
children "pages".

Example:

    <iron-pages selected="0">
      <div>One</div>
      <div>Two</div>
      <div>Three</div>
    </iron-pages>

    <script>
      document.addEventListener('click', function(e) {
        var pages = document.querySelector('iron-pages');
        pages.selectNext();
      });
    </script>

@group Iron Elements
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="iron-pages" assetpath="bower_components/iron-pages/">

  <template>
    <style>
      :host {
        display: block;
      }

      :host > ::content > :not(.iron-selected) {
        display: none !important;
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({

      is: 'iron-pages',

      behaviors: [
        Polymer.IronResizableBehavior,
        Polymer.IronSelectableBehavior
      ],

      properties: {

        // as the selected page is the only one visible, activateEvent
        // is both non-sensical and problematic; e.g. in cases where a user
        // handler attempts to change the page and the activateEvent
        // handler immediately changes it back
        activateEvent: {
          type: String,
          value: null
        }

      },

      observers: [
        '_selectedPageChanged(selected)'
      ],

      _selectedPageChanged: function(selected, old) {
        this.async(this.notifyResize);
      }
    });

  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
if (!Object.keys) {
  //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys
  Object.keys = (function() {
    'use strict';
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    var hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString');
    var dontEnums = [
      'toString',
      'toLocaleString',
      'valueOf',
      'hasOwnProperty',
      'isPrototypeOf',
      'propertyIsEnumerable',
      'constructor'
    ];
    var dontEnumsLength = dontEnums.length;
    return function(obj) {
      if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {
        throw new TypeError('Object.keys called on non-object');
      }
      var result = [];
      var prop;
      var i;
      for (prop in obj) {
        if (hasOwnProperty.call(obj, prop)) {
          result.push(prop);
        }
      }
      if (hasDontEnumBug) {
        for (i = 0; i < dontEnumsLength; i++) {
          if (hasOwnProperty.call(obj, dontEnums[i])) {
            result.push(dontEnums[i]);
          }
        }
      }
      return result;
    };
  }());
}
/**
 * Common properties and methods for all RAML elements.
 *
 * @polymerBehavior Polymer.RamlBehavior
 */
Polymer.RamlBehavior = {
  properties: {
    // The RAML definition as JSON object. It can be obtained from RAML JS parser.
    raml: Object,
    // RAML base types
    baseTypes: {
      type: Array,
      value: function() {
        return ['object', 'array','integer', 'string','number','boolean',
          'datetime','file', 'null','any'];
      }
    }
  },
  // Trurns true if the `obj` is empty.
  isEmpty: function(obj) {
    if (!obj && typeof obj !== 'number') {
      return true;
    }
    if ((obj instanceof Array) && !obj.length) {
      return true;
    }
    if ((obj instanceof Object) && !Object.keys(obj).length) {
      return true;
    }
    return false;
  }
};
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<raml-aware>` Element that is aware of the RAML content.

The element contains the same RAML data as other elements whenever their
location in the document. The RAML data are encapsulated in `scope` attribute.
By default the `scope` is `default`. If you create two `<raml-aware>`s with
different scopes then changing one raml will not affect the other.

Setting a RAML data on a `<raml-aware>` will notify other awares with the same
scopes about the change and update their RAML data so it can be transfered
between different parts of application on even different web components.

### Example
```html
<raml-aware raml="{{raml}}" scope="request"></raml-aware>
<raml-aware raml="{{importRaml}}" scope="import"></raml-aware>
```
```javascript
var r1 = document.querySelector('raml-aware[scope="request"]');
var r2 = document.querySelector('raml-aware[scope="import"]');
r1.raml = {};
r2.raml = null;
assert(r1.raml !== r2.raml);
```

@group RAML Elements
@element raml-aware
@demo demo/index.html
@hero hero.svg
-->
<script>
(function() {
  'use strict';
  var RAMLAware = {
    defaultScope: 'default',
    ramlAwares: [],
    /**
     * Store for RAML definitions.
     * @type {Object<String, Object>} The key is a scope (`default` by default)
     * and the value is the RAML definition for this scope.
     */
    raml: {},
    attachRamlAware: function(aware) {
      if (this.ramlAwares.indexOf(aware) === -1) {
        this.ramlAwares.push(aware);
        this.scopeChanged(aware);
      }
    },

    detachRamlAware: function(aware) {
      var index = this.ramlAwares.indexOf(aware);
      if (index !== -1) {
        this.ramlAwares.splice(index, 1);
      } else {
        console.warn('The aware wasn\'t attached!');
      }
    },
    /**
     * [setRaml description]
     * @param {HTMLElement} srcAware The aware that notified about the change
     */
    setRaml: function(srcAware) {
      var scope = srcAware.scope || this.defaultScope;
      var raml = srcAware.raml || undefined;
      this.raml[scope] = raml;
      var defaultScope = this.defaultScope;
      this.ramlAwares.forEach(function(aware) {
        if (aware === srcAware) {
          return;
        }
        var localScope = aware.scope || defaultScope;
        if (localScope !== scope) {
          return;
        }
        aware.raml = raml;
      });
    },

    scopeChanged: function(aware) {
      var scope = aware.scope || this.defaultScope;
      aware.raml = this.raml[scope];
    }
  };

  Polymer({
    is: 'raml-aware',
    properties: {
      /**
       * Scope for the RAML file.
       * Different awares may have different scope and keep different RAML objects.
       * It can be useful when one aware supports request panel and another
       * RAML import for example. In this case first one may have scope not set
       * (`default` scope) and second one `import` scope. Then both RAMLs are
       * encapsulated to the scope.
       */
      scope: String,
      // The RAML definition.
      raml: {
        type: Object,
        notify: true
      }
    },

    observers: [
      '_scopeChanged(scope)',
      '_ramlChanged(raml.*)',
    ],

    attached: function() {
      RAMLAware.attachRamlAware(this);
    },

    detached: function() {
      RAMLAware.detachRamlAware(this);
    },
    // Update RAML data for selected scope.
    _scopeChanged: function() {
      RAMLAware.scopeChanged(this);
    },
    // Notifies other awares about RAML change.
    _ramlChanged: function() {
      RAMLAware.setRaml(this);
    }
  });
})();
</script>
<!--
The `<raml-path-to-object>` is a convenient way of getting information about
currently selected path.
Selected path is a result of `raml-path-selector` element.

The element will give additional information about the path:
- what type of data it represents (type, documentation, resource, method, summary)
- the object pointed by the path
- in case of resources / methods - parent resource (if available).

The element will assign information listed above to it's properties so you can
listen for changes directly on the element. However, the element will fire a
custom event when any property change. See events list for more details.

If the `auto` property is set then it will set a listeners for the
`raml-selected-path-changed` event and fire back one of the events supported by
this element as descrived below in the event section.

### Usage

```html
<raml-path-selector></raml-path-selector>
<raml-path-to-object auto></raml-path-to-object>

<script>
// You can construct path manually, but there's an element for that!
var selector = document.querySelector('raml-path-selector');
var object = document.querySelector('raml-path-to-object');

// Sets the (enhanced) RAML object on the element
// See https://elements.advancedrestclient.com/elements/raml-json-enhance
window.addEventListener('raml-json-enhance-ready', function(e) {
  selector.raml = e.detail.json;
  object.raml =  e.detail.json;
});

// Fired when the object for the path is computed.
// Though, it's a synchronous operation so the `selectedObject` can be read
// from the `object` element right after assigning the path value.
window.addEventListener('raml-selected-object-changed', function(e) {
  var selectedObject = e.detail.selectedObject;
  // Assign to request or documentation panel.
});

// This event's boubbles so it's safe to listen on `window` object.
window.addEventListener('raml-is-resource-changed', function(e) {
  var isResource = e.detail.state;
  // if true then selected object is a resource.
});
</script>
```

In the Polymer powered application:
```
<raml-path-selector raml="[[raml]]" selected-path="{{selectedPath}}"></raml-path-selector>
<raml-path-to-object
  selected-path="{{selectedPath}}"
  selected-object="{{selectedObject}}"
  is-method="{{isMethod}}"
  is-resource="{{isResource}}"
  is-documentation="{{isDocumentation}}"
  is-type="{{isType}}"
  is-summary="{{isSummary}}"></raml-path-to-object>
```

@group RAML Elements
@element raml-path-to-object
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="raml-path-to-object" assetpath="bower_components/raml-path-to-object/">
  <template>
    <style>
     :host {
      display: none;
    }
    </style>
    <template is="dom-if" if="[[aware]]" restamp="true">
      <raml-aware raml="{{raml}}" scope="[[aware]]"></raml-aware>
    </template>
  </template>
  <script>
  Polymer({
    is: 'raml-path-to-object',
    behaviors: [Polymer.RamlBehavior],
    /**
     * Fired when selected object is a method description
     *
     * @event raml-is-method-changed
     * @param {Boolean} state `true` if selected object is a method and `false`
     * otherwise
     */
    /**
     * Fired when selected object is a resource description.
     *
     * @event raml-is-resource-changed
     * @param {Boolean} state `true` if selected object is a resource and
     * `false` otherwise
     */
    /**
     * Fired when selected object is a documentation description
     *
     * @event raml-is-documentation-changed
     * @param {Boolean} state `true` if selected object is a documentation and
     * `false` otherwise
     */
    /**
     * Fired when selected object is a summary.
     *
     * @event raml-is-summary-changed
     * @param {Boolean} state `true` if selected object is a summary and
     * `false` otherwise
     */
    /**
     * Fired when selected object is a type description.
     *
     * @event raml-is-type-changed
     * @param {Boolean} state `true` if selected object is a type and `false`
     * otherwise
     */
    /**
     * Fired when the object from the path has been computed.
     *
     * @event raml-selected-object-changed
     * @param {Object} selectedObject The object on which the path points to.
     */
    /**
     * Fired when computed value for the parent of the selected object changed.
     * This can change only for the resources and methods.
     *
     * @event raml-selected-parent-changed
     * @param {Boolean} selectedParent Computed parent object of the
     * `selectedObject`.
     */
    properties: {
      // Currently selected path by the path selector (or anhy other)
      selectedPath: String,
      // An object read from path.
      selectedObject: {
        type: Object,
        notify: true,
        readOnly: true
      },
      // Parent of the selected object (if any is possible)
      selectedParent: {
        type: Object,
        notify: true,
        readOnly: true
      },
      // True if the selected object is a method definition
      isMethod: {
        type: Boolean,
        value: false,
        notify: true,
        readOnly: true
      },
      // True if the selected object is a resource definition
      isResource: {
        type: Boolean,
        value: false,
        notify: true,
        readOnly: true
      },
      // True if the selected object is a documentation definition
      isDocumentation: {
        type: Boolean,
        value: false,
        notify: true,
        readOnly: true
      },
      // True if the selected object is a summary of the api
      isSummary: {
        type: Boolean,
        readOnly: true,
        notify: true,
        value: false
      },
      // True if the selected object is a type definition
      isType: {
        type: Boolean,
        readOnly: true,
        notify: true,
        value: false
      },
      // Name of the `<raml-aware>` scope, so it will fill the raml property.
      aware: String,
      // If true, then it will listen for change events instead using data binding
      auto: {
        type: Boolean,
        value: false,
        observer: '_autoChanged'
      }
    },

    observers: [
      '_ramlChanged(raml.*)',
      '_pathChanged(selectedPath, raml)',
      '_fireSelectedObject(selectedObject.*)',
      '_fireSelectedParent(selectedParent.*)',
      '_fireIsMethodState(isMethod)',
      '_fireIsResourceState(isResource)',
      '_fireIsDocumentationState(isDocumentation)',
      '_fireIsSummaryState(isSummary)',
      '_fireIsTypeState(isType)'
    ],

    attached: function() {
      this._eventTarget = Polymer.dom(this).host || document;
      this._autoChanged(this.auto);
    },

    _autoChanged: function(state) {
      if (state) {
        this._attacheListeners();
      } else {
        this._detachListeners();
      }
    },

    _attacheListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this._detachListeners();
      this.listen(this._eventTarget, 'raml-selected-path-changed',
        '_pathChangeHandler');
    },

    _detachListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this.unlisten(this._eventTarget, 'raml-selected-path-changed',
        '_pathChangeHandler');
    },

    _pathChangeHandler: function(e, detail) {
      this.set('selectedPath', detail.path);
    },

    // Restore properties to the original state
    clear: function() {
      this._setSelectedObject(undefined);
      this._setIsMethod(false);
      this._setIsResource(false);
      this._setIsDocumentation(false);
      this._setIsSummary(false);
      this._setIsType(false);
      this._cachedRegexps = {};
    },
    // Handler for the raml change. Resets the data.
    _ramlChanged: function() {
      this.clear();
    },
    // Called when path changes and raml is set.
    _pathChanged: function(path, raml) {
      if (!raml || !path) {
        return this.clear();
      }

      this._analysePath(path);
      var obj = this._computeObject(path);
      if (!obj) {
        return this.clear();
      }
      this._setSelectedObject(obj);
      this._selectParent(path);
    },

    _analysePath: function(path) {
      var _path;
      if (path.indexOf('.') !== -1) {
        var parts = path.split('.');
        parts.pop(); // Last array index
        _path = parts.pop();
      } else {
        _path = path;
      }

      var method = false;
      var doc = false;
      var resource = false;
      var type = false;
      var summary = false;
      switch (_path) {
        case 'resources':
          resource = true;
          break;
        case 'methods':
          method = true;
          break;
        case 'documentation':
          doc = true;
          break;
        case 'types':
          type = true;
          break;
        case 'summary':
          summary = true;
          break;
        default:
          return this.clear();
      }
      this._setIsMethod(method);
      this._setIsResource(resource);
      this._setIsDocumentation(doc);
      this._setIsSummary(summary);
      this._setIsType(type);
    },

    _selectParent: function(path) {
      if (!(this.isMethod || this.isResource || this.isSummary || this.isType)) {
        // No parent.
        return this._setSelectedParent(undefined);
      }
      var parts = path.split('.');
      parts.splice(parts.length - 2, 2);
      var parentPath = parts.join('.');
      if (!parentPath) {
        return this._setSelectedParent(undefined);
      }
      var obj = this.get('raml.' + parentPath);
      if (!obj) {
        return this._setSelectedParent(undefined);
      }
      this._setSelectedParent(obj);
    },
    /**
     * Inserts dependencies definitions to current node.
     * It will update query parameters, uri parameters, security schemas etc with it's definitions.
     *
     * As a result, instead of array of ID's in the `is` property, full definition of trait will
     * be inserted. `uriParameters` will be added as a `uriParameters` property. Ans so on.
     *
     * This function must be called after type of object has been determined.
     * @param {String} path A path to the object.
     */
    _computeObject: function(path) {
      if (this.isDocumentation) {
        // No dependencies here
        return this.get('raml.' + path);
      }
      if (this.isSummary) {
        return this.raml;
      }
      if (this.isType) {
        var names = Object.getOwnPropertyNames(this.raml.types);
        var match = path.match(/(\d+)/);
        var index = Number(match[1]);
        try {
          return this.raml.types[names[index]];
        } catch (e) {
          console.error('Unknown type in types list', names[index]);
        }
        return;
      }
      var current = this.get('raml.' + path);
      return current;
    },

    _fireSelectedObject: function() {
      this.fire('raml-selected-object-changed', {
        selectedObject: this.selectedObject
      });
    },

    _fireSelectedParent: function() {
      this.fire('raml-selected-parent-changed', {
        selectedParent: this.selectedParent
      });
    },

    _fireIsMethodState: function(isMethod) {
      this.fire('raml-is-method-changed', {
        state: isMethod
      });
    },

    _fireIsResourceState: function(isResource) {
      this.fire('raml-is-resource-changed', {
        state: isResource
      });
    },

    _fireIsDocumentationState: function(isDocumentation) {
      this.fire('raml-is-documentation-changed', {
        state: isDocumentation
      });
    },

    _fireIsSummaryState: function(isSummary) {
      this.fire('raml-is-summary-changed', {
        state: isSummary
      });
    },

    _fireIsTypeState: function(isType) {
      this.fire('raml-is-type-changed', {
        state: isType
      });
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  (function() {
    'use strict';

    /**
     * Chrome uses an older version of DOM Level 3 Keyboard Events
     *
     * Most keys are labeled as text, but some are Unicode codepoints.
     * Values taken from: http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221/keyset.html#KeySet-Set
     */
    var KEY_IDENTIFIER = {
      'U+0008': 'backspace',
      'U+0009': 'tab',
      'U+001B': 'esc',
      'U+0020': 'space',
      'U+007F': 'del'
    };

    /**
     * Special table for KeyboardEvent.keyCode.
     * KeyboardEvent.keyIdentifier is better, and KeyBoardEvent.key is even better
     * than that.
     *
     * Values from: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.keyCode#Value_of_keyCode
     */
    var KEY_CODE = {
      8: 'backspace',
      9: 'tab',
      13: 'enter',
      27: 'esc',
      33: 'pageup',
      34: 'pagedown',
      35: 'end',
      36: 'home',
      32: 'space',
      37: 'left',
      38: 'up',
      39: 'right',
      40: 'down',
      46: 'del',
      106: '*'
    };

    /**
     * MODIFIER_KEYS maps the short name for modifier keys used in a key
     * combo string to the property name that references those same keys
     * in a KeyboardEvent instance.
     */
    var MODIFIER_KEYS = {
      'shift': 'shiftKey',
      'ctrl': 'ctrlKey',
      'alt': 'altKey',
      'meta': 'metaKey'
    };

    /**
     * KeyboardEvent.key is mostly represented by printable character made by
     * the keyboard, with unprintable keys labeled nicely.
     *
     * However, on OS X, Alt+char can make a Unicode character that follows an
     * Apple-specific mapping. In this case, we fall back to .keyCode.
     */
    var KEY_CHAR = /[a-z0-9*]/;

    /**
     * Matches a keyIdentifier string.
     */
    var IDENT_CHAR = /U\+/;

    /**
     * Matches arrow keys in Gecko 27.0+
     */
    var ARROW_KEY = /^arrow/;

    /**
     * Matches space keys everywhere (notably including IE10's exceptional name
     * `spacebar`).
     */
    var SPACE_KEY = /^space(bar)?/;

    /**
     * Matches ESC key.
     *
     * Value from: http://w3c.github.io/uievents-key/#key-Escape
     */
    var ESC_KEY = /^escape$/;

    /**
     * Transforms the key.
     * @param {string} key The KeyBoardEvent.key
     * @param {Boolean} [noSpecialChars] Limits the transformation to
     * alpha-numeric characters.
     */
    function transformKey(key, noSpecialChars) {
      var validKey = '';
      if (key) {
        var lKey = key.toLowerCase();
        if (lKey === ' ' || SPACE_KEY.test(lKey)) {
          validKey = 'space';
        } else if (ESC_KEY.test(lKey)) {
          validKey = 'esc';
        } else if (lKey.length == 1) {
          if (!noSpecialChars || KEY_CHAR.test(lKey)) {
            validKey = lKey;
          }
        } else if (ARROW_KEY.test(lKey)) {
          validKey = lKey.replace('arrow', '');
        } else if (lKey == 'multiply') {
          // numpad '*' can map to Multiply on IE/Windows
          validKey = '*';
        } else {
          validKey = lKey;
        }
      }
      return validKey;
    }

    function transformKeyIdentifier(keyIdent) {
      var validKey = '';
      if (keyIdent) {
        if (keyIdent in KEY_IDENTIFIER) {
          validKey = KEY_IDENTIFIER[keyIdent];
        } else if (IDENT_CHAR.test(keyIdent)) {
          keyIdent = parseInt(keyIdent.replace('U+', '0x'), 16);
          validKey = String.fromCharCode(keyIdent).toLowerCase();
        } else {
          validKey = keyIdent.toLowerCase();
        }
      }
      return validKey;
    }

    function transformKeyCode(keyCode) {
      var validKey = '';
      if (Number(keyCode)) {
        if (keyCode >= 65 && keyCode <= 90) {
          // ascii a-z
          // lowercase is 32 offset from uppercase
          validKey = String.fromCharCode(32 + keyCode);
        } else if (keyCode >= 112 && keyCode <= 123) {
          // function keys f1-f12
          validKey = 'f' + (keyCode - 112);
        } else if (keyCode >= 48 && keyCode <= 57) {
          // top 0-9 keys
          validKey = String(keyCode - 48);
        } else if (keyCode >= 96 && keyCode <= 105) {
          // num pad 0-9
          validKey = String(keyCode - 96);
        } else {
          validKey = KEY_CODE[keyCode];
        }
      }
      return validKey;
    }

    /**
      * Calculates the normalized key for a KeyboardEvent.
      * @param {KeyboardEvent} keyEvent
      * @param {Boolean} [noSpecialChars] Set to true to limit keyEvent.key
      * transformation to alpha-numeric chars. This is useful with key
      * combinations like shift + 2, which on FF for MacOS produces
      * keyEvent.key = @
      * To get 2 returned, set noSpecialChars = true
      * To get @ returned, set noSpecialChars = false
     */
    function normalizedKeyForEvent(keyEvent, noSpecialChars) {
      // Fall back from .key, to .detail.key for artifical keyboard events,
      // and then to deprecated .keyIdentifier and .keyCode.
      if (keyEvent.key) {
        return transformKey(keyEvent.key, noSpecialChars);
      }
      if (keyEvent.detail && keyEvent.detail.key) {
        return transformKey(keyEvent.detail.key, noSpecialChars);
      }
      return transformKeyIdentifier(keyEvent.keyIdentifier) ||
        transformKeyCode(keyEvent.keyCode) || '';
    }

    function keyComboMatchesEvent(keyCombo, event) {
      // For combos with modifiers we support only alpha-numeric keys
      var keyEvent = normalizedKeyForEvent(event, keyCombo.hasModifiers);
      return keyEvent === keyCombo.key &&
        (!keyCombo.hasModifiers || (
          !!event.shiftKey === !!keyCombo.shiftKey &&
          !!event.ctrlKey === !!keyCombo.ctrlKey &&
          !!event.altKey === !!keyCombo.altKey &&
          !!event.metaKey === !!keyCombo.metaKey)
        );
    }

    function parseKeyComboString(keyComboString) {
      if (keyComboString.length === 1) {
        return {
          combo: keyComboString,
          key: keyComboString,
          event: 'keydown'
        };
      }
      return keyComboString.split('+').reduce(function(parsedKeyCombo, keyComboPart) {
        var eventParts = keyComboPart.split(':');
        var keyName = eventParts[0];
        var event = eventParts[1];

        if (keyName in MODIFIER_KEYS) {
          parsedKeyCombo[MODIFIER_KEYS[keyName]] = true;
          parsedKeyCombo.hasModifiers = true;
        } else {
          parsedKeyCombo.key = keyName;
          parsedKeyCombo.event = event || 'keydown';
        }

        return parsedKeyCombo;
      }, {
        combo: keyComboString.split(':').shift()
      });
    }

    function parseEventString(eventString) {
      return eventString.trim().split(' ').map(function(keyComboString) {
        return parseKeyComboString(keyComboString);
      });
    }

    /**
     * `Polymer.IronA11yKeysBehavior` provides a normalized interface for processing
     * keyboard commands that pertain to [WAI-ARIA best practices](http://www.w3.org/TR/wai-aria-practices/#kbd_general_binding).
     * The element takes care of browser differences with respect to Keyboard events
     * and uses an expressive syntax to filter key presses.
     *
     * Use the `keyBindings` prototype property to express what combination of keys
     * will trigger the callback. A key binding has the format
     * `"KEY+MODIFIER:EVENT": "callback"` (`"KEY": "callback"` or
     * `"KEY:EVENT": "callback"` are valid as well). Some examples:
     *
     *      keyBindings: {
     *        'space': '_onKeydown', // same as 'space:keydown'
     *        'shift+tab': '_onKeydown',
     *        'enter:keypress': '_onKeypress',
     *        'esc:keyup': '_onKeyup'
     *      }
     *
     * The callback will receive with an event containing the following information in `event.detail`:
     *
     *      _onKeydown: function(event) {
     *        console.log(event.detail.combo); // KEY+MODIFIER, e.g. "shift+tab"
     *        console.log(event.detail.key); // KEY only, e.g. "tab"
     *        console.log(event.detail.event); // EVENT, e.g. "keydown"
     *        console.log(event.detail.keyboardEvent); // the original KeyboardEvent
     *      }
     *
     * Use the `keyEventTarget` attribute to set up event handlers on a specific
     * node.
     *
     * See the [demo source code](https://github.com/PolymerElements/iron-a11y-keys-behavior/blob/master/demo/x-key-aware.html)
     * for an example.
     *
     * @demo demo/index.html
     * @polymerBehavior
     */
    Polymer.IronA11yKeysBehavior = {
      properties: {
        /**
         * The EventTarget that will be firing relevant KeyboardEvents. Set it to
         * `null` to disable the listeners.
         * @type {?EventTarget}
         */
        keyEventTarget: {
          type: Object,
          value: function() {
            return this;
          }
        },

        /**
         * If true, this property will cause the implementing element to
         * automatically stop propagation on any handled KeyboardEvents.
         */
        stopKeyboardEventPropagation: {
          type: Boolean,
          value: false
        },

        _boundKeyHandlers: {
          type: Array,
          value: function() {
            return [];
          }
        },

        // We use this due to a limitation in IE10 where instances will have
        // own properties of everything on the "prototype".
        _imperativeKeyBindings: {
          type: Object,
          value: function() {
            return {};
          }
        }
      },

      observers: [
        '_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)'
      ],


      /**
       * To be used to express what combination of keys  will trigger the relative
       * callback. e.g. `keyBindings: { 'esc': '_onEscPressed'}`
       * @type {!Object}
       */
      keyBindings: {},

      registered: function() {
        this._prepKeyBindings();
      },

      attached: function() {
        this._listenKeyEventListeners();
      },

      detached: function() {
        this._unlistenKeyEventListeners();
      },

      /**
       * Can be used to imperatively add a key binding to the implementing
       * element. This is the imperative equivalent of declaring a keybinding
       * in the `keyBindings` prototype property.
       */
      addOwnKeyBinding: function(eventString, handlerName) {
        this._imperativeKeyBindings[eventString] = handlerName;
        this._prepKeyBindings();
        this._resetKeyEventListeners();
      },

      /**
       * When called, will remove all imperatively-added key bindings.
       */
      removeOwnKeyBindings: function() {
        this._imperativeKeyBindings = {};
        this._prepKeyBindings();
        this._resetKeyEventListeners();
      },

      /**
       * Returns true if a keyboard event matches `eventString`.
       *
       * @param {KeyboardEvent} event
       * @param {string} eventString
       * @return {boolean}
       */
      keyboardEventMatchesKeys: function(event, eventString) {
        var keyCombos = parseEventString(eventString);
        for (var i = 0; i < keyCombos.length; ++i) {
          if (keyComboMatchesEvent(keyCombos[i], event)) {
            return true;
          }
        }
        return false;
      },

      _collectKeyBindings: function() {
        var keyBindings = this.behaviors.map(function(behavior) {
          return behavior.keyBindings;
        });

        if (keyBindings.indexOf(this.keyBindings) === -1) {
          keyBindings.push(this.keyBindings);
        }

        return keyBindings;
      },

      _prepKeyBindings: function() {
        this._keyBindings = {};

        this._collectKeyBindings().forEach(function(keyBindings) {
          for (var eventString in keyBindings) {
            this._addKeyBinding(eventString, keyBindings[eventString]);
          }
        }, this);

        for (var eventString in this._imperativeKeyBindings) {
          this._addKeyBinding(eventString, this._imperativeKeyBindings[eventString]);
        }

        // Give precedence to combos with modifiers to be checked first.
        for (var eventName in this._keyBindings) {
          this._keyBindings[eventName].sort(function (kb1, kb2) {
            var b1 = kb1[0].hasModifiers;
            var b2 = kb2[0].hasModifiers;
            return (b1 === b2) ? 0 : b1 ? -1 : 1;
          })
        }
      },

      _addKeyBinding: function(eventString, handlerName) {
        parseEventString(eventString).forEach(function(keyCombo) {
          this._keyBindings[keyCombo.event] =
            this._keyBindings[keyCombo.event] || [];

          this._keyBindings[keyCombo.event].push([
            keyCombo,
            handlerName
          ]);
        }, this);
      },

      _resetKeyEventListeners: function() {
        this._unlistenKeyEventListeners();

        if (this.isAttached) {
          this._listenKeyEventListeners();
        }
      },

      _listenKeyEventListeners: function() {
        if (!this.keyEventTarget) {
          return;
        }
        Object.keys(this._keyBindings).forEach(function(eventName) {
          var keyBindings = this._keyBindings[eventName];
          var boundKeyHandler = this._onKeyBindingEvent.bind(this, keyBindings);

          this._boundKeyHandlers.push([this.keyEventTarget, eventName, boundKeyHandler]);

          this.keyEventTarget.addEventListener(eventName, boundKeyHandler);
        }, this);
      },

      _unlistenKeyEventListeners: function() {
        var keyHandlerTuple;
        var keyEventTarget;
        var eventName;
        var boundKeyHandler;

        while (this._boundKeyHandlers.length) {
          // My kingdom for block-scope binding and destructuring assignment..
          keyHandlerTuple = this._boundKeyHandlers.pop();
          keyEventTarget = keyHandlerTuple[0];
          eventName = keyHandlerTuple[1];
          boundKeyHandler = keyHandlerTuple[2];

          keyEventTarget.removeEventListener(eventName, boundKeyHandler);
        }
      },

      _onKeyBindingEvent: function(keyBindings, event) {
        if (this.stopKeyboardEventPropagation) {
          event.stopPropagation();
        }

        // if event has been already prevented, don't do anything
        if (event.defaultPrevented) {
          return;
        }

        for (var i = 0; i < keyBindings.length; i++) {
          var keyCombo = keyBindings[i][0];
          var handlerName = keyBindings[i][1];
          if (keyComboMatchesEvent(keyCombo, event)) {
            this._triggerKeyHandler(keyCombo, handlerName, event);
            // exit the loop if eventDefault was prevented
            if (event.defaultPrevented) {
              return;
            }
          }
        }
      },

      _triggerKeyHandler: function(keyCombo, handlerName, keyboardEvent) {
        var detail = Object.create(keyCombo);
        detail.keyboardEvent = keyboardEvent;
        var event = new CustomEvent(keyCombo.event, {
          detail: detail,
          cancelable: true
        });
        this[handlerName].call(this, event);
        if (event.defaultPrevented) {
          keyboardEvent.preventDefault();
        }
      }
    };
  })();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * @demo demo/index.html
   * @polymerBehavior
   */
  Polymer.IronControlState = {

    properties: {

      /**
       * If true, the element currently has focus.
       */
      focused: {
        type: Boolean,
        value: false,
        notify: true,
        readOnly: true,
        reflectToAttribute: true
      },

      /**
       * If true, the user cannot interact with this element.
       */
      disabled: {
        type: Boolean,
        value: false,
        notify: true,
        observer: '_disabledChanged',
        reflectToAttribute: true
      },

      _oldTabIndex: {
        type: Number
      },

      _boundFocusBlurHandler: {
        type: Function,
        value: function() {
          return this._focusBlurHandler.bind(this);
        }
      }

    },

    observers: [
      '_changedControlState(focused, disabled)'
    ],

    ready: function() {
      this.addEventListener('focus', this._boundFocusBlurHandler, true);
      this.addEventListener('blur', this._boundFocusBlurHandler, true);
    },

    _focusBlurHandler: function(event) {
      // NOTE(cdata):  if we are in ShadowDOM land, `event.target` will
      // eventually become `this` due to retargeting; if we are not in
      // ShadowDOM land, `event.target` will eventually become `this` due
      // to the second conditional which fires a synthetic event (that is also
      // handled). In either case, we can disregard `event.path`.

      if (event.target === this) {
        this._setFocused(event.type === 'focus');
      } else if (!this.shadowRoot) {
        var target = /** @type {Node} */(Polymer.dom(event).localTarget);
        if (!this.isLightDescendant(target)) {
          this.fire(event.type, {sourceEvent: event}, {
            node: this,
            bubbles: event.bubbles,
            cancelable: event.cancelable
          });
        }
      }
    },

    _disabledChanged: function(disabled, old) {
      this.setAttribute('aria-disabled', disabled ? 'true' : 'false');
      this.style.pointerEvents = disabled ? 'none' : '';
      if (disabled) {
        this._oldTabIndex = this.tabIndex;
        this._setFocused(false);
        this.tabIndex = -1;
        this.blur();
      } else if (this._oldTabIndex !== undefined) {
        this.tabIndex = this._oldTabIndex;
      }
    },

    _changedControlState: function() {
      // _controlStateChanged is abstract, follow-on behaviors may implement it
      if (this._controlStateChanged) {
        this._controlStateChanged();
      }
    }

  };

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
/**
`Polymer.IronFitBehavior` fits an element in another element using `max-height` and `max-width`, and
optionally centers it in the window or another element.

The element will only be sized and/or positioned if it has not already been sized and/or positioned
by CSS.

CSS properties               | Action
-----------------------------|-------------------------------------------
`position` set               | Element is not centered horizontally or vertically
`top` or `bottom` set        | Element is not vertically centered
`left` or `right` set        | Element is not horizontally centered
`max-height` set             | Element respects `max-height`
`max-width` set              | Element respects `max-width`

`Polymer.IronFitBehavior` can position an element into another element using
`verticalAlign` and `horizontalAlign`. This will override the element's css position.

      <div class="container">
        <iron-fit-impl vertical-align="top" horizontal-align="auto">
          Positioned into the container
        </iron-fit-impl>
      </div>

Use `noOverlap` to position the element around another element without overlapping it.

      <div class="container">
        <iron-fit-impl no-overlap vertical-align="auto" horizontal-align="auto">
          Positioned around the container
        </iron-fit-impl>
      </div>

Use `horizontalOffset, verticalOffset` to offset the element from its `positionTarget`;
`Polymer.IronFitBehavior` will collapse these in order to keep the element
within `fitInto` boundaries, while preserving the element's CSS margin values.

      <div class="container">
        <iron-fit-impl vertical-align="top" vertical-offset="20">
          With vertical offset
        </iron-fit-impl>
      </div>


@demo demo/index.html
@polymerBehavior
*/

  Polymer.IronFitBehavior = {

    properties: {

      /**
       * The element that will receive a `max-height`/`width`. By default it is the same as `this`,
       * but it can be set to a child element. This is useful, for example, for implementing a
       * scrolling region inside the element.
       * @type {!Element}
       */
      sizingTarget: {
        type: Object,
        value: function() {
          return this;
        }
      },

      /**
       * The element to fit `this` into.
       */
      fitInto: {
        type: Object,
        value: window
      },

      /**
       * Will position the element around the positionTarget without overlapping it.
       */
      noOverlap: {
        type: Boolean
      },

      /**
       * The element that should be used to position the element. If not set, it will
       * default to the parent node.
       * @type {!Element}
       */
      positionTarget: {
        type: Element
      },

      /**
       * The orientation against which to align the element horizontally
       * relative to the `positionTarget`. Possible values are "left", "right", "auto".
       */
      horizontalAlign: {
        type: String
      },

      /**
       * The orientation against which to align the element vertically
       * relative to the `positionTarget`. Possible values are "top", "bottom", "auto".
       */
      verticalAlign: {
        type: String
      },

      /**
       * If true, it will use `horizontalAlign` and `verticalAlign` values as preferred alignment
       * and if there's not enough space, it will pick the values which minimize the cropping.
       */
      dynamicAlign: {
        type: Boolean
      },

      /**
       * A pixel value that will be added to the position calculated for the
       * given `horizontalAlign`, in the direction of alignment. You can think
       * of it as increasing or decreasing the distance to the side of the
       * screen given by `horizontalAlign`.
       *
       * If `horizontalAlign` is "left", this offset will increase or decrease
       * the distance to the left side of the screen: a negative offset will
       * move the dropdown to the left; a positive one, to the right.
       *
       * Conversely if `horizontalAlign` is "right", this offset will increase
       * or decrease the distance to the right side of the screen: a negative
       * offset will move the dropdown to the right; a positive one, to the left.
       */
      horizontalOffset: {
        type: Number,
        value: 0,
        notify: true
      },

      /**
       * A pixel value that will be added to the position calculated for the
       * given `verticalAlign`, in the direction of alignment. You can think
       * of it as increasing or decreasing the distance to the side of the
       * screen given by `verticalAlign`.
       *
       * If `verticalAlign` is "top", this offset will increase or decrease
       * the distance to the top side of the screen: a negative offset will
       * move the dropdown upwards; a positive one, downwards.
       *
       * Conversely if `verticalAlign` is "bottom", this offset will increase
       * or decrease the distance to the bottom side of the screen: a negative
       * offset will move the dropdown downwards; a positive one, upwards.
       */
      verticalOffset: {
        type: Number,
        value: 0,
        notify: true
      },

      /**
       * Set to true to auto-fit on attach.
       */
      autoFitOnAttach: {
        type: Boolean,
        value: false
      },

      /** @type {?Object} */
      _fitInfo: {
        type: Object
      }
    },

    get _fitWidth() {
      var fitWidth;
      if (this.fitInto === window) {
        fitWidth = this.fitInto.innerWidth;
      } else {
        fitWidth = this.fitInto.getBoundingClientRect().width;
      }
      return fitWidth;
    },

    get _fitHeight() {
      var fitHeight;
      if (this.fitInto === window) {
        fitHeight = this.fitInto.innerHeight;
      } else {
        fitHeight = this.fitInto.getBoundingClientRect().height;
      }
      return fitHeight;
    },

    get _fitLeft() {
      var fitLeft;
      if (this.fitInto === window) {
        fitLeft = 0;
      } else {
        fitLeft = this.fitInto.getBoundingClientRect().left;
      }
      return fitLeft;
    },

    get _fitTop() {
      var fitTop;
      if (this.fitInto === window) {
        fitTop = 0;
      } else {
        fitTop = this.fitInto.getBoundingClientRect().top;
      }
      return fitTop;
    },

    /**
     * The element that should be used to position the element,
     * if no position target is configured.
     */
    get _defaultPositionTarget() {
      var parent = Polymer.dom(this).parentNode;

      if (parent && parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
        parent = parent.host;
      }

      return parent;
    },

    /**
     * The horizontal align value, accounting for the RTL/LTR text direction.
     */
    get _localeHorizontalAlign() {
      if (this._isRTL) {
        // In RTL, "left" becomes "right".
        if (this.horizontalAlign === 'right') {
          return 'left';
        }
        if (this.horizontalAlign === 'left') {
          return 'right';
        }
      }
      return this.horizontalAlign;
    },

    attached: function() {
      // Memoize this to avoid expensive calculations & relayouts.
      // Make sure we do it only once
      if (typeof this._isRTL === 'undefined') {
        this._isRTL = window.getComputedStyle(this).direction == 'rtl';
      }
          
      this.positionTarget = this.positionTarget || this._defaultPositionTarget;
      if (this.autoFitOnAttach) {
        if (window.getComputedStyle(this).display === 'none') {
          setTimeout(function() {
            this.fit();
          }.bind(this));
        } else {
          this.fit();
        }
      }
    },

    /**
     * Positions and fits the element into the `fitInto` element.
     */
    fit: function() {
      this.position();
      this.constrain();
      this.center();
    },

    /**
     * Memoize information needed to position and size the target element.
     * @suppress {deprecated}
     */
    _discoverInfo: function() {
      if (this._fitInfo) {
        return;
      }
      var target = window.getComputedStyle(this);
      var sizer = window.getComputedStyle(this.sizingTarget);

      this._fitInfo = {
        inlineStyle: {
          top: this.style.top || '',
          left: this.style.left || '',
          position: this.style.position || ''
        },
        sizerInlineStyle: {
          maxWidth: this.sizingTarget.style.maxWidth || '',
          maxHeight: this.sizingTarget.style.maxHeight || '',
          boxSizing: this.sizingTarget.style.boxSizing || ''
        },
        positionedBy: {
          vertically: target.top !== 'auto' ? 'top' : (target.bottom !== 'auto' ?
            'bottom' : null),
          horizontally: target.left !== 'auto' ? 'left' : (target.right !== 'auto' ?
            'right' : null)
        },
        sizedBy: {
          height: sizer.maxHeight !== 'none',
          width: sizer.maxWidth !== 'none',
          minWidth: parseInt(sizer.minWidth, 10) || 0,
          minHeight: parseInt(sizer.minHeight, 10) || 0
        },
        margin: {
          top: parseInt(target.marginTop, 10) || 0,
          right: parseInt(target.marginRight, 10) || 0,
          bottom: parseInt(target.marginBottom, 10) || 0,
          left: parseInt(target.marginLeft, 10) || 0
        }
      };
    },

    /**
     * Resets the target element's position and size constraints, and clear
     * the memoized data.
     */
    resetFit: function() {
      var info = this._fitInfo || {};
      for (var property in info.sizerInlineStyle) {
        this.sizingTarget.style[property] = info.sizerInlineStyle[property];
      }
      for (var property in info.inlineStyle) {
        this.style[property] = info.inlineStyle[property];
      }

      this._fitInfo = null;
    },

    /**
     * Equivalent to calling `resetFit()` and `fit()`. Useful to call this after
     * the element or the `fitInto` element has been resized, or if any of the
     * positioning properties (e.g. `horizontalAlign, verticalAlign`) is updated.
     * It preserves the scroll position of the sizingTarget.
     */
    refit: function() {
      var scrollLeft = this.sizingTarget.scrollLeft;
      var scrollTop = this.sizingTarget.scrollTop;
      this.resetFit();
      this.fit();
      this.sizingTarget.scrollLeft = scrollLeft;
      this.sizingTarget.scrollTop = scrollTop;
    },

    /**
     * Positions the element according to `horizontalAlign, verticalAlign`.
     */
    position: function() {
      if (!this.horizontalAlign && !this.verticalAlign) {
        // needs to be centered, and it is done after constrain.
        return;
      }
      this._discoverInfo();

      this.style.position = 'fixed';
      // Need border-box for margin/padding.
      this.sizingTarget.style.boxSizing = 'border-box';
      // Set to 0, 0 in order to discover any offset caused by parent stacking contexts.
      this.style.left = '0px';
      this.style.top = '0px';

      var rect = this.getBoundingClientRect();
      var positionRect = this.__getNormalizedRect(this.positionTarget);
      var fitRect = this.__getNormalizedRect(this.fitInto);

      var margin = this._fitInfo.margin;

      // Consider the margin as part of the size for position calculations.
      var size = {
        width: rect.width + margin.left + margin.right,
        height: rect.height + margin.top + margin.bottom
      };

      var position = this.__getPosition(this._localeHorizontalAlign, this.verticalAlign, size, positionRect, fitRect);

      var left = position.left + margin.left;
      var top = position.top + margin.top;

      // We first limit right/bottom within fitInto respecting the margin,
      // then use those values to limit top/left.
      var right = Math.min(fitRect.right - margin.right, left + rect.width);
      var bottom = Math.min(fitRect.bottom - margin.bottom, top + rect.height);

      // Keep left/top within fitInto respecting the margin.
      left = Math.max(fitRect.left + margin.left,
        Math.min(left, right - this._fitInfo.sizedBy.minWidth));
      top = Math.max(fitRect.top + margin.top,
        Math.min(top, bottom - this._fitInfo.sizedBy.minHeight));

      // Use right/bottom to set maxWidth/maxHeight, and respect minWidth/minHeight.
      this.sizingTarget.style.maxWidth = Math.max(right - left, this._fitInfo.sizedBy.minWidth) + 'px';
      this.sizingTarget.style.maxHeight = Math.max(bottom - top, this._fitInfo.sizedBy.minHeight) + 'px';

      // Remove the offset caused by any stacking context.
      this.style.left = (left - rect.left) + 'px';
      this.style.top = (top - rect.top) + 'px';
    },

    /**
     * Constrains the size of the element to `fitInto` by setting `max-height`
     * and/or `max-width`.
     */
    constrain: function() {
      if (this.horizontalAlign || this.verticalAlign) {
        return;
      }
      this._discoverInfo();

      var info = this._fitInfo;
      // position at (0px, 0px) if not already positioned, so we can measure the natural size.
      if (!info.positionedBy.vertically) {
        this.style.position = 'fixed';
        this.style.top = '0px';
      }
      if (!info.positionedBy.horizontally) {
        this.style.position = 'fixed';
        this.style.left = '0px';
      }

      // need border-box for margin/padding
      this.sizingTarget.style.boxSizing = 'border-box';
      // constrain the width and height if not already set
      var rect = this.getBoundingClientRect();
      if (!info.sizedBy.height) {
        this.__sizeDimension(rect, info.positionedBy.vertically, 'top', 'bottom', 'Height');
      }
      if (!info.sizedBy.width) {
        this.__sizeDimension(rect, info.positionedBy.horizontally, 'left', 'right', 'Width');
      }
    },

    /**
     * @protected
     * @deprecated
     */
    _sizeDimension: function(rect, positionedBy, start, end, extent) {
      this.__sizeDimension(rect, positionedBy, start, end, extent);
    },

    /**
     * @private
     */
    __sizeDimension: function(rect, positionedBy, start, end, extent) {
      var info = this._fitInfo;
      var fitRect = this.__getNormalizedRect(this.fitInto);
      var max = extent === 'Width' ? fitRect.width : fitRect.height;
      var flip = (positionedBy === end);
      var offset = flip ? max - rect[end] : rect[start];
      var margin = info.margin[flip ? start : end];
      var offsetExtent = 'offset' + extent;
      var sizingOffset = this[offsetExtent] - this.sizingTarget[offsetExtent];
      this.sizingTarget.style['max' + extent] = (max - margin - offset - sizingOffset) + 'px';
    },

    /**
     * Centers horizontally and vertically if not already positioned. This also sets
     * `position:fixed`.
     */
    center: function() {
      if (this.horizontalAlign || this.verticalAlign) {
        return;
      }
      this._discoverInfo();

      var positionedBy = this._fitInfo.positionedBy;
      if (positionedBy.vertically && positionedBy.horizontally) {
        // Already positioned.
        return;
      }
      // Need position:fixed to center
      this.style.position = 'fixed';
      // Take into account the offset caused by parents that create stacking
      // contexts (e.g. with transform: translate3d). Translate to 0,0 and
      // measure the bounding rect.
      if (!positionedBy.vertically) {
        this.style.top = '0px';
      }
      if (!positionedBy.horizontally) {
        this.style.left = '0px';
      }
      // It will take in consideration margins and transforms
      var rect = this.getBoundingClientRect();
      var fitRect = this.__getNormalizedRect(this.fitInto);
      if (!positionedBy.vertically) {
        var top = fitRect.top - rect.top + (fitRect.height - rect.height) / 2;
        this.style.top = top + 'px';
      }
      if (!positionedBy.horizontally) {
        var left = fitRect.left - rect.left + (fitRect.width - rect.width) / 2;
        this.style.left = left + 'px';
      }
    },

    __getNormalizedRect: function(target) {
      if (target === document.documentElement || target === window) {
        return {
          top: 0,
          left: 0,
          width: window.innerWidth,
          height: window.innerHeight,
          right: window.innerWidth,
          bottom: window.innerHeight
        };
      }
      return target.getBoundingClientRect();
    },

    __getCroppedArea: function(position, size, fitRect) {
      var verticalCrop = Math.min(0, position.top) + Math.min(0, fitRect.bottom - (position.top + size.height));
      var horizontalCrop = Math.min(0, position.left) + Math.min(0, fitRect.right - (position.left + size.width));
      return Math.abs(verticalCrop) * size.width + Math.abs(horizontalCrop) * size.height;
    },


    __getPosition: function(hAlign, vAlign, size, positionRect, fitRect) {
      // All the possible configurations.
      // Ordered as top-left, top-right, bottom-left, bottom-right.
      var positions = [{
        verticalAlign: 'top',
        horizontalAlign: 'left',
        top: positionRect.top + this.verticalOffset,
        left: positionRect.left + this.horizontalOffset
      }, {
        verticalAlign: 'top',
        horizontalAlign: 'right',
        top: positionRect.top + this.verticalOffset,
        left: positionRect.right - size.width - this.horizontalOffset
      }, {
        verticalAlign: 'bottom',
        horizontalAlign: 'left',
        top: positionRect.bottom - size.height - this.verticalOffset,
        left: positionRect.left + this.horizontalOffset
      }, {
        verticalAlign: 'bottom',
        horizontalAlign: 'right',
        top: positionRect.bottom - size.height - this.verticalOffset,
        left: positionRect.right - size.width - this.horizontalOffset
      }];

      if (this.noOverlap) {
        // Duplicate.
        for (var i = 0, l = positions.length; i < l; i++) {
          var copy = {};
          for (var key in positions[i]) {
            copy[key] = positions[i][key];
          }
          positions.push(copy);
        }
        // Horizontal overlap only.
        positions[0].top = positions[1].top += positionRect.height;
        positions[2].top = positions[3].top -= positionRect.height;
        // Vertical overlap only.
        positions[4].left = positions[6].left += positionRect.width;
        positions[5].left = positions[7].left -= positionRect.width;
      }

      // Consider auto as null for coding convenience.
      vAlign = vAlign === 'auto' ? null : vAlign;
      hAlign = hAlign === 'auto' ? null : hAlign;

      var position;
      for (var i = 0; i < positions.length; i++) {
        var pos = positions[i];

        // If both vAlign and hAlign are defined, return exact match.
        // For dynamicAlign and noOverlap we'll have more than one candidate, so
        // we'll have to check the croppedArea to make the best choice.
        if (!this.dynamicAlign && !this.noOverlap &&
            pos.verticalAlign === vAlign && pos.horizontalAlign === hAlign) {
          position = pos;
          break;
        }

        // Align is ok if alignment preferences are respected. If no preferences,
        // it is considered ok.
        var alignOk = (!vAlign || pos.verticalAlign === vAlign) &&
                      (!hAlign || pos.horizontalAlign === hAlign);

        // Filter out elements that don't match the alignment (if defined).
        // With dynamicAlign, we need to consider all the positions to find the
        // one that minimizes the cropped area.
        if (!this.dynamicAlign && !alignOk) {
          continue;
        }

        position = position || pos;
        pos.croppedArea = this.__getCroppedArea(pos, size, fitRect);
        var diff = pos.croppedArea - position.croppedArea;
        // Check which crops less. If it crops equally, check if align is ok.
        if (diff < 0 || (diff === 0 && alignOk)) {
          position = pos;
        }
        // If not cropped and respects the align requirements, keep it.
        // This allows to prefer positions overlapping horizontally over the
        // ones overlapping vertically.
        if (position.croppedArea === 0 && alignOk) {
          break;
        }
      }

      return position;
    }

  };
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`iron-overlay-backdrop` is a backdrop used by `Polymer.IronOverlayBehavior`. It should be a
singleton.

### Styling

The following custom properties and mixins are available for styling.

Custom property | Description | Default
-------------------------------------------|------------------------|---------
`--iron-overlay-backdrop-background-color` | Backdrop background color                                     | #000
`--iron-overlay-backdrop-opacity`          | Backdrop opacity                                              | 0.6
`--iron-overlay-backdrop`                  | Mixin applied to `iron-overlay-backdrop`.                      | {}
`--iron-overlay-backdrop-opened`           | Mixin applied to `iron-overlay-backdrop` when it is displayed | {}
-->

<dom-module id="iron-overlay-backdrop" assetpath="bower_components/iron-overlay-behavior/">

  <template>
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply(--iron-overlay-backdrop);
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply(--iron-overlay-backdrop-opened);
      }
    </style>

    <content></content>
  </template>

</dom-module>

<script>
(function() {
'use strict';

  Polymer({

    is: 'iron-overlay-backdrop',

    properties: {

      /**
       * Returns true if the backdrop is opened.
       */
      opened: {
        reflectToAttribute: true,
        type: Boolean,
        value: false,
        observer: '_openedChanged'
      }

    },

    listeners: {
      'transitionend': '_onTransitionend'
    },

    created: function() {
      // Used to cancel previous requestAnimationFrame calls when opened changes.
      this.__openedRaf = null;
    },

    attached: function() {
      this.opened && this._openedChanged(this.opened);
    },

    /**
     * Appends the backdrop to document body if needed.
     */
    prepare: function() {
      if (this.opened && !this.parentNode) {
        Polymer.dom(document.body).appendChild(this);
      }
    },

    /**
     * Shows the backdrop.
     */
    open: function() {
      this.opened = true;
    },

    /**
     * Hides the backdrop.
     */
    close: function() {
      this.opened = false;
    },

    /**
     * Removes the backdrop from document body if needed.
     */
    complete: function() {
      if (!this.opened && this.parentNode === document.body) {
        Polymer.dom(this.parentNode).removeChild(this);
      }
    },

    _onTransitionend: function(event) {
      if (event && event.target === this) {
        this.complete();
      }
    },

    /**
     * @param {boolean} opened
     * @private
     */
    _openedChanged: function(opened) {
      if (opened) {
        // Auto-attach.
        this.prepare();
      } else {
        // Animation might be disabled via the mixin or opacity custom property.
        // If it is disabled in other ways, it's up to the user to call complete.
        var cs = window.getComputedStyle(this);
        if (cs.transitionDuration === '0s' || cs.opacity == 0) {
          this.complete();
        }
      }

      if (!this.isAttached) {
        return;
      }

      // Always cancel previous requestAnimationFrame.
      if (this.__openedRaf) {
        window.cancelAnimationFrame(this.__openedRaf);
        this.__openedRaf = null;
      }
      // Force relayout to ensure proper transitions.
      this.scrollTop = this.scrollTop;
      this.__openedRaf = window.requestAnimationFrame(function() {
        this.__openedRaf = null;
        this.toggleClass('opened', this.opened);
      }.bind(this));
    }
  });

})();

</script>
<script>

  /**
   * @struct
   * @constructor
   * @private
   */
  Polymer.IronOverlayManagerClass = function() {
    /**
     * Used to keep track of the opened overlays.
     * @private {Array<Element>}
     */
    this._overlays = [];

    /**
     * iframes have a default z-index of 100,
     * so this default should be at least that.
     * @private {number}
     */
    this._minimumZ = 101;

    /**
     * Memoized backdrop element.
     * @private {Element|null}
     */
    this._backdropElement = null;

    // Enable document-wide tap recognizer.
    // NOTE: Use useCapture=true to avoid accidentally prevention of the closing
    // of an overlay via event.stopPropagation(). The only way to prevent
    // closing of an overlay should be through its APIs.
    // NOTE: enable tap on <html> to workaround Polymer/polymer#4459
    Polymer.Gestures.add(document.documentElement, 'tap', null);
    document.addEventListener('tap', this._onCaptureClick.bind(this), true);
    document.addEventListener('focus', this._onCaptureFocus.bind(this), true);
    document.addEventListener('keydown', this._onCaptureKeyDown.bind(this), true);
  };

  Polymer.IronOverlayManagerClass.prototype = {

    constructor: Polymer.IronOverlayManagerClass,

    /**
     * The shared backdrop element.
     * @type {!Element} backdropElement
     */
    get backdropElement() {
      if (!this._backdropElement) {
        this._backdropElement = document.createElement('iron-overlay-backdrop');
      }
      return this._backdropElement;
    },

    /**
     * The deepest active element.
     * @type {!Element} activeElement the active element
     */
    get deepActiveElement() {
      // document.activeElement can be null
      // https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement
      // In case of null, default it to document.body.
      var active = document.activeElement || document.body;
      while (active.root && Polymer.dom(active.root).activeElement) {
        active = Polymer.dom(active.root).activeElement;
      }
      return active;
    },

    /**
     * Brings the overlay at the specified index to the front.
     * @param {number} i
     * @private
     */
    _bringOverlayAtIndexToFront: function(i) {
      var overlay = this._overlays[i];
      if (!overlay) {
        return;
      }
      var lastI = this._overlays.length - 1;
      var currentOverlay = this._overlays[lastI];
      // Ensure always-on-top overlay stays on top.
      if (currentOverlay && this._shouldBeBehindOverlay(overlay, currentOverlay)) {
        lastI--;
      }
      // If already the top element, return.
      if (i >= lastI) {
        return;
      }
      // Update z-index to be on top.
      var minimumZ = Math.max(this.currentOverlayZ(), this._minimumZ);
      if (this._getZ(overlay) <= minimumZ) {
        this._applyOverlayZ(overlay, minimumZ);
      }

      // Shift other overlays behind the new on top.
      while (i < lastI) {
        this._overlays[i] = this._overlays[i + 1];
        i++;
      }
      this._overlays[lastI] = overlay;
    },

    /**
     * Adds the overlay and updates its z-index if it's opened, or removes it if it's closed.
     * Also updates the backdrop z-index.
     * @param {!Element} overlay
     */
    addOrRemoveOverlay: function(overlay) {
      if (overlay.opened) {
        this.addOverlay(overlay);
      } else {
        this.removeOverlay(overlay);
      }
    },

    /**
     * Tracks overlays for z-index and focus management.
     * Ensures the last added overlay with always-on-top remains on top.
     * @param {!Element} overlay
     */
    addOverlay: function(overlay) {
      var i = this._overlays.indexOf(overlay);
      if (i >= 0) {
        this._bringOverlayAtIndexToFront(i);
        this.trackBackdrop();
        return;
      }
      var insertionIndex = this._overlays.length;
      var currentOverlay = this._overlays[insertionIndex - 1];
      var minimumZ = Math.max(this._getZ(currentOverlay), this._minimumZ);
      var newZ = this._getZ(overlay);

      // Ensure always-on-top overlay stays on top.
      if (currentOverlay && this._shouldBeBehindOverlay(overlay, currentOverlay)) {
        // This bumps the z-index of +2.
        this._applyOverlayZ(currentOverlay, minimumZ);
        insertionIndex--;
        // Update minimumZ to match previous overlay's z-index.
        var previousOverlay = this._overlays[insertionIndex - 1];
        minimumZ = Math.max(this._getZ(previousOverlay), this._minimumZ);
      }

      // Update z-index and insert overlay.
      if (newZ <= minimumZ) {
        this._applyOverlayZ(overlay, minimumZ);
      }
      this._overlays.splice(insertionIndex, 0, overlay);

      this.trackBackdrop();
    },

    /**
     * @param {!Element} overlay
     */
    removeOverlay: function(overlay) {
      var i = this._overlays.indexOf(overlay);
      if (i === -1) {
        return;
      }
      this._overlays.splice(i, 1);

      this.trackBackdrop();
    },

    /**
     * Returns the current overlay.
     * @return {Element|undefined}
     */
    currentOverlay: function() {
      var i = this._overlays.length - 1;
      return this._overlays[i];
    },

    /**
     * Returns the current overlay z-index.
     * @return {number}
     */
    currentOverlayZ: function() {
      return this._getZ(this.currentOverlay());
    },

    /**
     * Ensures that the minimum z-index of new overlays is at least `minimumZ`.
     * This does not effect the z-index of any existing overlays.
     * @param {number} minimumZ
     */
    ensureMinimumZ: function(minimumZ) {
      this._minimumZ = Math.max(this._minimumZ, minimumZ);
    },

    focusOverlay: function() {
      var current = /** @type {?} */ (this.currentOverlay());
      if (current) {
        current._applyFocus();
      }
    },

    /**
     * Updates the backdrop z-index.
     */
    trackBackdrop: function() {
      var overlay = this._overlayWithBackdrop();
      // Avoid creating the backdrop if there is no overlay with backdrop.
      if (!overlay && !this._backdropElement) {
        return;
      }
      this.backdropElement.style.zIndex = this._getZ(overlay) - 1;
      this.backdropElement.opened = !!overlay;
    },

    /**
     * @return {Array<Element>}
     */
    getBackdrops: function() {
      var backdrops = [];
      for (var i = 0; i < this._overlays.length; i++) {
        if (this._overlays[i].withBackdrop) {
          backdrops.push(this._overlays[i]);
        }
      }
      return backdrops;
    },

    /**
     * Returns the z-index for the backdrop.
     * @return {number}
     */
    backdropZ: function() {
      return this._getZ(this._overlayWithBackdrop()) - 1;
    },

    /**
     * Returns the first opened overlay that has a backdrop.
     * @return {Element|undefined}
     * @private
     */
    _overlayWithBackdrop: function() {
      for (var i = 0; i < this._overlays.length; i++) {
        if (this._overlays[i].withBackdrop) {
          return this._overlays[i];
        }
      }
    },

    /**
     * Calculates the minimum z-index for the overlay.
     * @param {Element=} overlay
     * @private
     */
    _getZ: function(overlay) {
      var z = this._minimumZ;
      if (overlay) {
        var z1 = Number(overlay.style.zIndex || window.getComputedStyle(overlay).zIndex);
        // Check if is a number
        // Number.isNaN not supported in IE 10+
        if (z1 === z1) {
          z = z1;
        }
      }
      return z;
    },

    /**
     * @param {!Element} element
     * @param {number|string} z
     * @private
     */
    _setZ: function(element, z) {
      element.style.zIndex = z;
    },

    /**
     * @param {!Element} overlay
     * @param {number} aboveZ
     * @private
     */
    _applyOverlayZ: function(overlay, aboveZ) {
      this._setZ(overlay, aboveZ + 2);
    },

    /**
     * Returns the deepest overlay in the path.
     * @param {Array<Element>=} path
     * @return {Element|undefined}
     * @suppress {missingProperties}
     * @private
     */
    _overlayInPath: function(path) {
      path = path || [];
      for (var i = 0; i < path.length; i++) {
        if (path[i]._manager === this) {
          return path[i];
        }
      }
    },

    /**
     * Ensures the click event is delegated to the right overlay.
     * @param {!Event} event
     * @private
     */
    _onCaptureClick: function(event) {
      var overlay = /** @type {?} */ (this.currentOverlay());
      // Check if clicked outside of top overlay.
      if (overlay && this._overlayInPath(Polymer.dom(event).path) !== overlay) {
        overlay._onCaptureClick(event);
      }
    },

    /**
     * Ensures the focus event is delegated to the right overlay.
     * @param {!Event} event
     * @private
     */
    _onCaptureFocus: function(event) {
      var overlay = /** @type {?} */ (this.currentOverlay());
      if (overlay) {
        overlay._onCaptureFocus(event);
      }
    },

    /**
     * Ensures TAB and ESC keyboard events are delegated to the right overlay.
     * @param {!Event} event
     * @private
     */
    _onCaptureKeyDown: function(event) {
      var overlay = /** @type {?} */ (this.currentOverlay());
      if (overlay) {
        if (Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(event, 'esc')) {
          overlay._onCaptureEsc(event);
        } else if (Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(event, 'tab')) {
          overlay._onCaptureTab(event);
        }
      }
    },

    /**
     * Returns if the overlay1 should be behind overlay2.
     * @param {!Element} overlay1
     * @param {!Element} overlay2
     * @return {boolean}
     * @suppress {missingProperties}
     * @private
     */
    _shouldBeBehindOverlay: function(overlay1, overlay2) {
      return !overlay1.alwaysOnTop && overlay2.alwaysOnTop;
    }
  };

  Polymer.IronOverlayManager = new Polymer.IronOverlayManagerClass();
</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  (function() {
    'use strict';

    var p = Element.prototype;
    var matches = p.matches || p.matchesSelector || p.mozMatchesSelector ||
      p.msMatchesSelector || p.oMatchesSelector || p.webkitMatchesSelector;

    Polymer.IronFocusablesHelper = {

      /**
       * Returns a sorted array of tabbable nodes, including the root node.
       * It searches the tabbable nodes in the light and shadow dom of the chidren,
       * sorting the result by tabindex.
       * @param {!Node} node
       * @return {Array<HTMLElement>}
       */
      getTabbableNodes: function(node) {
        var result = [];
        // If there is at least one element with tabindex > 0, we need to sort
        // the final array by tabindex.
        var needsSortByTabIndex = this._collectTabbableNodes(node, result);
        if (needsSortByTabIndex) {
          return this._sortByTabIndex(result);
        }
        return result;
      },

      /**
       * Returns if a element is focusable.
       * @param {!HTMLElement} element
       * @return {boolean}
       */
      isFocusable: function(element) {
        // From http://stackoverflow.com/a/1600194/4228703:
        // There isn't a definite list, it's up to the browser. The only
        // standard we have is DOM Level 2 HTML https://www.w3.org/TR/DOM-Level-2-HTML/html.html,
        // according to which the only elements that have a focus() method are
        // HTMLInputElement,  HTMLSelectElement, HTMLTextAreaElement and
        // HTMLAnchorElement. This notably omits HTMLButtonElement and
        // HTMLAreaElement.
        // Referring to these tests with tabbables in different browsers
        // http://allyjs.io/data-tables/focusable.html

        // Elements that cannot be focused if they have [disabled] attribute.
        if (matches.call(element, 'input, select, textarea, button, object')) {
          return matches.call(element, ':not([disabled])');
        }
        // Elements that can be focused even if they have [disabled] attribute.
        return matches.call(element,
          'a[href], area[href], iframe, [tabindex], [contentEditable]');
      },

      /**
       * Returns if a element is tabbable. To be tabbable, a element must be
       * focusable, visible, and with a tabindex !== -1.
       * @param {!HTMLElement} element
       * @return {boolean}
       */
      isTabbable: function(element) {
        return this.isFocusable(element) &&
          matches.call(element, ':not([tabindex="-1"])') &&
          this._isVisible(element);
      },

      /**
       * Returns the normalized element tabindex. If not focusable, returns -1.
       * It checks for the attribute "tabindex" instead of the element property
       * `tabIndex` since browsers assign different values to it.
       * e.g. in Firefox `<div contenteditable>` has `tabIndex = -1`
       * @param {!HTMLElement} element
       * @return {!number}
       * @private
       */
      _normalizedTabIndex: function(element) {
        if (this.isFocusable(element)) {
          var tabIndex = element.getAttribute('tabindex') || 0;
          return Number(tabIndex);
        }
        return -1;
      },

      /**
       * Searches for nodes that are tabbable and adds them to the `result` array.
       * Returns if the `result` array needs to be sorted by tabindex.
       * @param {!Node} node The starting point for the search; added to `result`
       * if tabbable.
       * @param {!Array<HTMLElement>} result
       * @return {boolean}
       * @private
       */
      _collectTabbableNodes: function(node, result) {
        // If not an element or not visible, no need to explore children.
        if (node.nodeType !== Node.ELEMENT_NODE || !this._isVisible(node)) {
          return false;
        }
        var element = /** @type {HTMLElement} */ (node);
        var tabIndex = this._normalizedTabIndex(element);
        var needsSortByTabIndex = tabIndex > 0;
        if (tabIndex >= 0) {
          result.push(element);
        }

        // In ShadowDOM v1, tab order is affected by the order of distrubution.
        // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];
        // in ShadowDOM v0 tab order is not affected by the distrubution order,
        // in fact getTabbableNodes(#root) returns [#B, #A].
        //  <div id="root">
        //   <!-- shadow -- >
        //     <slot name="a">
        //     <slot name="b">
        //   <!-- /shadow -- >
        //   <input id="A" slot="a">
        //   <input id="B" slot="b" tabindex="1">
        //  </div>
        // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.
        var children;
        if (element.localName === 'content') {
          children = Polymer.dom(element).getDistributedNodes();
        } else {
          // Use shadow root if possible, will check for distributed nodes.
          children = Polymer.dom(element.root || element).children;
        }
        for (var i = 0; i < children.length; i++) {
          // Ensure method is always invoked to collect tabbable children.
          var needsSort = this._collectTabbableNodes(children[i], result);
          needsSortByTabIndex = needsSortByTabIndex || needsSort;
        }
        return needsSortByTabIndex;
      },

      /**
       * Returns false if the element has `visibility: hidden` or `display: none`
       * @param {!HTMLElement} element
       * @return {boolean}
       * @private
       */
      _isVisible: function(element) {
        // Check inline style first to save a re-flow. If looks good, check also
        // computed style.
        var style = element.style;
        if (style.visibility !== 'hidden' && style.display !== 'none') {
          style = window.getComputedStyle(element);
          return (style.visibility !== 'hidden' && style.display !== 'none');
        }
        return false;
      },

      /**
       * Sorts an array of tabbable elements by tabindex. Returns a new array.
       * @param {!Array<HTMLElement>} tabbables
       * @return {Array<HTMLElement>}
       * @private
       */
      _sortByTabIndex: function(tabbables) {
        // Implement a merge sort as Array.prototype.sort does a non-stable sort
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort
        var len = tabbables.length;
        if (len < 2) {
          return tabbables;
        }
        var pivot = Math.ceil(len / 2);
        var left = this._sortByTabIndex(tabbables.slice(0, pivot));
        var right = this._sortByTabIndex(tabbables.slice(pivot));
        return this._mergeSortByTabIndex(left, right);
      },

      /**
       * Merge sort iterator, merges the two arrays into one, sorted by tab index.
       * @param {!Array<HTMLElement>} left
       * @param {!Array<HTMLElement>} right
       * @return {Array<HTMLElement>}
       * @private
       */
      _mergeSortByTabIndex: function(left, right) {
        var result = [];
        while ((left.length > 0) && (right.length > 0)) {
          if (this._hasLowerTabOrder(left[0], right[0])) {
            result.push(right.shift());
          } else {
            result.push(left.shift());
          }
        }

        return result.concat(left, right);
      },

      /**
       * Returns if element `a` has lower tab order compared to element `b`
       * (both elements are assumed to be focusable and tabbable).
       * Elements with tabindex = 0 have lower tab order compared to elements
       * with tabindex > 0.
       * If both have same tabindex, it returns false.
       * @param {!HTMLElement} a
       * @param {!HTMLElement} b
       * @return {boolean}
       * @private
       */
      _hasLowerTabOrder: function(a, b) {
        // Normalize tabIndexes
        // e.g. in Firefox `<div contenteditable>` has `tabIndex = -1`
        var ati = Math.max(a.tabIndex, 0);
        var bti = Math.max(b.tabIndex, 0);
        return (ati === 0 || bti === 0) ? bti > ati : ati > bti;
      }
    };
  })();
</script>
<script>
(function() {
  'use strict';

  /** @polymerBehavior */
  Polymer.IronOverlayBehaviorImpl = {

    properties: {

      /**
       * True if the overlay is currently displayed.
       */
      opened: {
        observer: '_openedChanged',
        type: Boolean,
        value: false,
        notify: true
      },

      /**
       * True if the overlay was canceled when it was last closed.
       */
      canceled: {
        observer: '_canceledChanged',
        readOnly: true,
        type: Boolean,
        value: false
      },

      /**
       * Set to true to display a backdrop behind the overlay. It traps the focus
       * within the light DOM of the overlay.
       */
      withBackdrop: {
        observer: '_withBackdropChanged',
        type: Boolean
      },

      /**
       * Set to true to disable auto-focusing the overlay or child nodes with
       * the `autofocus` attribute` when the overlay is opened.
       */
      noAutoFocus: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to disable canceling the overlay with the ESC key.
       */
      noCancelOnEscKey: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to disable canceling the overlay by clicking outside it.
       */
      noCancelOnOutsideClick: {
        type: Boolean,
        value: false
      },

      /**
       * Contains the reason(s) this overlay was last closed (see `iron-overlay-closed`).
       * `IronOverlayBehavior` provides the `canceled` reason; implementers of the
       * behavior can provide other reasons in addition to `canceled`.
       */
      closingReason: {
        // was a getter before, but needs to be a property so other
        // behaviors can override this.
        type: Object
      },

      /**
       * Set to true to enable restoring of focus when overlay is closed.
       */
      restoreFocusOnClose: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to keep overlay always on top.
       */
      alwaysOnTop: {
        type: Boolean
      },

      /**
       * Shortcut to access to the overlay manager.
       * @private
       * @type {Polymer.IronOverlayManagerClass}
       */
      _manager: {
        type: Object,
        value: Polymer.IronOverlayManager
      },

      /**
       * The node being focused.
       * @type {?Node}
       */
      _focusedChild: {
        type: Object
      }

    },

    listeners: {
      'iron-resize': '_onIronResize'
    },

    /**
     * The backdrop element.
     * @type {Element}
     */
    get backdropElement() {
      return this._manager.backdropElement;
    },

    /**
     * Returns the node to give focus to.
     * @type {Node}
     */
    get _focusNode() {
      return this._focusedChild || Polymer.dom(this).querySelector('[autofocus]') || this;
    },

    /**
     * Array of nodes that can receive focus (overlay included), ordered by `tabindex`.
     * This is used to retrieve which is the first and last focusable nodes in order
     * to wrap the focus for overlays `with-backdrop`.
     *
     * If you know what is your content (specifically the first and last focusable children),
     * you can override this method to return only `[firstFocusable, lastFocusable];`
     * @type {Array<Node>}
     * @protected
     */
    get _focusableNodes() {
      return Polymer.IronFocusablesHelper.getTabbableNodes(this);
    },

    ready: function() {
      // Used to skip calls to notifyResize and refit while the overlay is animating.
      this.__isAnimating = false;
      // with-backdrop needs tabindex to be set in order to trap the focus.
      // If it is not set, IronOverlayBehavior will set it, and remove it if with-backdrop = false.
      this.__shouldRemoveTabIndex = false;
      // Used for wrapping the focus on TAB / Shift+TAB.
      this.__firstFocusableNode = this.__lastFocusableNode = null;
      // Used by __onNextAnimationFrame to cancel any previous callback.
      this.__raf = null;
      // Focused node before overlay gets opened. Can be restored on close.
      this.__restoreFocusNode = null;
      this._ensureSetup();
    },

    attached: function() {
      // Call _openedChanged here so that position can be computed correctly.
      if (this.opened) {
        this._openedChanged(this.opened);
      }
      this._observer = Polymer.dom(this).observeNodes(this._onNodesChange);
    },

    detached: function() {
      Polymer.dom(this).unobserveNodes(this._observer);
      this._observer = null;
      if (this.__raf) {
        window.cancelAnimationFrame(this.__raf);
        this.__raf = null;
      }
      this._manager.removeOverlay(this);
    },

    /**
     * Toggle the opened state of the overlay.
     */
    toggle: function() {
      this._setCanceled(false);
      this.opened = !this.opened;
    },

    /**
     * Open the overlay.
     */
    open: function() {
      this._setCanceled(false);
      this.opened = true;
    },

    /**
     * Close the overlay.
     */
    close: function() {
      this._setCanceled(false);
      this.opened = false;
    },

    /**
     * Cancels the overlay.
     * @param {Event=} event The original event
     */
    cancel: function(event) {
      var cancelEvent = this.fire('iron-overlay-canceled', event, {cancelable: true});
      if (cancelEvent.defaultPrevented) {
        return;
      }

      this._setCanceled(true);
      this.opened = false;
    },

    /**
     * Invalidates the cached tabbable nodes. To be called when any of the focusable
     * content changes (e.g. a button is disabled).
     */
    invalidateTabbables: function() {
      this.__firstFocusableNode = this.__lastFocusableNode = null;
    },

    _ensureSetup: function() {
      if (this._overlaySetup) {
        return;
      }
      this._overlaySetup = true;
      this.style.outline = 'none';
      this.style.display = 'none';
    },

    /**
     * Called when `opened` changes.
     * @param {boolean=} opened
     * @protected
     */
    _openedChanged: function(opened) {
      if (opened) {
        this.removeAttribute('aria-hidden');
      } else {
        this.setAttribute('aria-hidden', 'true');
      }

      // Defer any animation-related code on attached
      // (_openedChanged gets called again on attached).
      if (!this.isAttached) {
        return;
      }

      this.__isAnimating = true;

      // Use requestAnimationFrame for non-blocking rendering.
      this.__onNextAnimationFrame(this.__openedChanged);
    },

    _canceledChanged: function() {
      this.closingReason = this.closingReason || {};
      this.closingReason.canceled = this.canceled;
    },

    _withBackdropChanged: function() {
      // If tabindex is already set, no need to override it.
      if (this.withBackdrop && !this.hasAttribute('tabindex')) {
        this.setAttribute('tabindex', '-1');
        this.__shouldRemoveTabIndex = true;
      } else if (this.__shouldRemoveTabIndex) {
        this.removeAttribute('tabindex');
        this.__shouldRemoveTabIndex = false;
      }
      if (this.opened && this.isAttached) {
        this._manager.trackBackdrop();
      }
    },

    /**
     * tasks which must occur before opening; e.g. making the element visible.
     * @protected
     */
    _prepareRenderOpened: function() {
      // Store focused node.
      this.__restoreFocusNode = this._manager.deepActiveElement;

      // Needed to calculate the size of the overlay so that transitions on its size
      // will have the correct starting points.
      this._preparePositioning();
      this.refit();
      this._finishPositioning();

      // Safari will apply the focus to the autofocus element when displayed
      // for the first time, so we make sure to return the focus where it was.
      if (this.noAutoFocus && document.activeElement === this._focusNode) {
        this._focusNode.blur();
        this.__restoreFocusNode.focus();
      }
    },

    /**
     * Tasks which cause the overlay to actually open; typically play an animation.
     * @protected
     */
    _renderOpened: function() {
      this._finishRenderOpened();
    },

    /**
     * Tasks which cause the overlay to actually close; typically play an animation.
     * @protected
     */
    _renderClosed: function() {
      this._finishRenderClosed();
    },

    /**
     * Tasks to be performed at the end of open action. Will fire `iron-overlay-opened`.
     * @protected
     */
    _finishRenderOpened: function() {
      this.notifyResize();
      this.__isAnimating = false;

      this.fire('iron-overlay-opened');
    },

    /**
     * Tasks to be performed at the end of close action. Will fire `iron-overlay-closed`.
     * @protected
     */
    _finishRenderClosed: function() {
      // Hide the overlay.
      this.style.display = 'none';
      // Reset z-index only at the end of the animation.
      this.style.zIndex = '';
      this.notifyResize();
      this.__isAnimating = false;
      this.fire('iron-overlay-closed', this.closingReason);
    },

    _preparePositioning: function() {
      this.style.transition = this.style.webkitTransition = 'none';
      this.style.transform = this.style.webkitTransform = 'none';
      this.style.display = '';
    },

    _finishPositioning: function() {
      // First, make it invisible & reactivate animations.
      this.style.display = 'none';
      // Force reflow before re-enabling animations so that they don't start.
      // Set scrollTop to itself so that Closure Compiler doesn't remove this.
      this.scrollTop = this.scrollTop;
      this.style.transition = this.style.webkitTransition = '';
      this.style.transform = this.style.webkitTransform = '';
      // Now that animations are enabled, make it visible again
      this.style.display = '';
      // Force reflow, so that following animations are properly started.
      // Set scrollTop to itself so that Closure Compiler doesn't remove this.
      this.scrollTop = this.scrollTop;
    },

    /**
     * Applies focus according to the opened state.
     * @protected
     */
    _applyFocus: function() {
      if (this.opened) {
        if (!this.noAutoFocus) {
          this._focusNode.focus();
        }
      }
      else {
        this._focusNode.blur();
        this._focusedChild = null;
        // Restore focus.
        if (this.restoreFocusOnClose && this.__restoreFocusNode) {
          this.__restoreFocusNode.focus();
        }
        this.__restoreFocusNode = null;
        // If many overlays get closed at the same time, one of them would still
        // be the currentOverlay even if already closed, and would call _applyFocus
        // infinitely, so we check for this not to be the current overlay.
        var currentOverlay = this._manager.currentOverlay();
        if (currentOverlay && this !== currentOverlay) {
          currentOverlay._applyFocus();
        }
      }
    },

    /**
     * Cancels (closes) the overlay. Call when click happens outside the overlay.
     * @param {!Event} event
     * @protected
     */
    _onCaptureClick: function(event) {
      if (!this.noCancelOnOutsideClick) {
        this.cancel(event);
      }
    },

    /**
     * Keeps track of the focused child. If withBackdrop, traps focus within overlay.
     * @param {!Event} event
     * @protected
     */
    _onCaptureFocus: function (event) {
      if (!this.withBackdrop) {
        return;
      }
      var path = Polymer.dom(event).path;
      if (path.indexOf(this) === -1) {
        event.stopPropagation();
        this._applyFocus();
      } else {
        this._focusedChild = path[0];
      }
    },

    /**
     * Handles the ESC key event and cancels (closes) the overlay.
     * @param {!Event} event
     * @protected
     */
    _onCaptureEsc: function(event) {
      if (!this.noCancelOnEscKey) {
        this.cancel(event);
      }
    },

    /**
     * Handles TAB key events to track focus changes.
     * Will wrap focus for overlays withBackdrop.
     * @param {!Event} event
     * @protected
     */
    _onCaptureTab: function(event) {
      if (!this.withBackdrop) {
        return;
      }
      this.__ensureFirstLastFocusables();
      // TAB wraps from last to first focusable.
      // Shift + TAB wraps from first to last focusable.
      var shift = event.shiftKey;
      var nodeToCheck = shift ? this.__firstFocusableNode : this.__lastFocusableNode;
      var nodeToSet = shift ? this.__lastFocusableNode : this.__firstFocusableNode;
      var shouldWrap = false;
      if (nodeToCheck === nodeToSet) {
        // If nodeToCheck is the same as nodeToSet, it means we have an overlay
        // with 0 or 1 focusables; in either case we still need to trap the
        // focus within the overlay.
        shouldWrap = true;
      } else {
        // In dom=shadow, the manager will receive focus changes on the main
        // root but not the ones within other shadow roots, so we can't rely on
        // _focusedChild, but we should check the deepest active element.
        var focusedNode = this._manager.deepActiveElement;
        // If the active element is not the nodeToCheck but the overlay itself,
        // it means the focus is about to go outside the overlay, hence we
        // should prevent that (e.g. user opens the overlay and hit Shift+TAB).
        shouldWrap = (focusedNode === nodeToCheck || focusedNode === this);
      }

      if (shouldWrap) {
        // When the overlay contains the last focusable element of the document
        // and it's already focused, pressing TAB would move the focus outside
        // the document (e.g. to the browser search bar). Similarly, when the
        // overlay contains the first focusable element of the document and it's
        // already focused, pressing Shift+TAB would move the focus outside the
        // document (e.g. to the browser search bar).
        // In both cases, we would not receive a focus event, but only a blur.
        // In order to achieve focus wrapping, we prevent this TAB event and
        // force the focus. This will also prevent the focus to temporarily move
        // outside the overlay, which might cause scrolling.
        event.preventDefault();
        this._focusedChild = nodeToSet;
        this._applyFocus();
      }
    },

    /**
     * Refits if the overlay is opened and not animating.
     * @protected
     */
    _onIronResize: function() {
      if (this.opened && !this.__isAnimating) {
        this.__onNextAnimationFrame(this.refit);
      }
    },

    /**
     * Will call notifyResize if overlay is opened.
     * Can be overridden in order to avoid multiple observers on the same node.
     * @protected
     */
    _onNodesChange: function() {
      if (this.opened && !this.__isAnimating) {
        // It might have added focusable nodes, so invalidate cached values.
        this.invalidateTabbables();
        this.notifyResize();
      }
    },

    /**
     * Will set first and last focusable nodes if any of them is not set.
     * @private
     */
    __ensureFirstLastFocusables: function() {
      if (!this.__firstFocusableNode || !this.__lastFocusableNode) {
        var focusableNodes = this._focusableNodes;
        this.__firstFocusableNode = focusableNodes[0];
        this.__lastFocusableNode = focusableNodes[focusableNodes.length - 1];
      }
    },

    /**
     * Tasks executed when opened changes: prepare for the opening, move the
     * focus, update the manager, render opened/closed.
     * @private
     */
    __openedChanged: function() {
      if (this.opened) {
        // Make overlay visible, then add it to the manager.
        this._prepareRenderOpened();
        this._manager.addOverlay(this);
        // Move the focus to the child node with [autofocus].
        this._applyFocus();

        this._renderOpened();
      } else {
        // Remove overlay, then restore the focus before actually closing.
        this._manager.removeOverlay(this);
        this._applyFocus();

        this._renderClosed();
      }
    },

    /**
     * Executes a callback on the next animation frame, overriding any previous
     * callback awaiting for the next animation frame. e.g.
     * `__onNextAnimationFrame(callback1) && __onNextAnimationFrame(callback2)`;
     * `callback1` will never be invoked.
     * @param {!Function} callback Its `this` parameter is the overlay itself.
     * @private
     */
    __onNextAnimationFrame: function(callback) {
      if (this.__raf) {
        window.cancelAnimationFrame(this.__raf);
      }
      var self = this;
      this.__raf = window.requestAnimationFrame(function nextAnimationFrame() {
        self.__raf = null;
        callback.call(self);
      });
    }

  };

  /**
  Use `Polymer.IronOverlayBehavior` to implement an element that can be hidden or shown, and displays
  on top of other content. It includes an optional backdrop, and can be used to implement a variety
  of UI controls including dialogs and drop downs. Multiple overlays may be displayed at once.

  See the [demo source code](https://github.com/PolymerElements/iron-overlay-behavior/blob/master/demo/simple-overlay.html)
  for an example.

  ### Closing and canceling

  An overlay may be hidden by closing or canceling. The difference between close and cancel is user
  intent. Closing generally implies that the user acknowledged the content on the overlay. By default,
  it will cancel whenever the user taps outside it or presses the escape key. This behavior is
  configurable with the `no-cancel-on-esc-key` and the `no-cancel-on-outside-click` properties.
  `close()` should be called explicitly by the implementer when the user interacts with a control
  in the overlay element. When the dialog is canceled, the overlay fires an 'iron-overlay-canceled'
  event. Call `preventDefault` on this event to prevent the overlay from closing.

  ### Positioning

  By default the element is sized and positioned to fit and centered inside the window. You can
  position and size it manually using CSS. See `Polymer.IronFitBehavior`.

  ### Backdrop

  Set the `with-backdrop` attribute to display a backdrop behind the overlay. The backdrop is
  appended to `<body>` and is of type `<iron-overlay-backdrop>`. See its doc page for styling
  options.

  In addition, `with-backdrop` will wrap the focus within the content in the light DOM.
  Override the [`_focusableNodes` getter](#Polymer.IronOverlayBehavior:property-_focusableNodes)
  to achieve a different behavior.

  ### Limitations

  The element is styled to appear on top of other content by setting its `z-index` property. You
  must ensure no element has a stacking context with a higher `z-index` than its parent stacking
  context. You should place this element as a child of `<body>` whenever possible.

  @demo demo/index.html
  @polymerBehavior
  */
  Polymer.IronOverlayBehavior = [Polymer.IronFitBehavior, Polymer.IronResizableBehavior, Polymer.IronOverlayBehaviorImpl];

  /**
   * Fired after the overlay opens.
   * @event iron-overlay-opened
   */

  /**
   * Fired when the overlay is canceled, but before it is closed.
   * @event iron-overlay-canceled
   * @param {Event} event The closing of the overlay can be prevented
   * by calling `event.preventDefault()`. The `event.detail` is the original event that
   * originated the canceling (e.g. ESC keyboard event or click event outside the overlay).
   */

  /**
   * Fired after the overlay closes.
   * @event iron-overlay-closed
   * @param {Event} event The `event.detail` is the `closingReason` property
   * (contains `canceled`, whether the overlay was canceled).
   */

})();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`iron-meta` is a generic element you can use for sharing information across the DOM tree.
It uses [monostate pattern](http://c2.com/cgi/wiki?MonostatePattern) such that any
instance of iron-meta has access to the shared
information. You can use `iron-meta` to share whatever you want (or create an extension
[like x-meta] for enhancements).

The `iron-meta` instances containing your actual data can be loaded in an import,
or constructed in any way you see fit. The only requirement is that you create them
before you try to access them.

Examples:

If I create an instance like this:

    <iron-meta key="info" value="foo/bar"></iron-meta>

Note that value="foo/bar" is the metadata I've defined. I could define more
attributes or use child nodes to define additional metadata.

Now I can access that element (and it's metadata) from any iron-meta instance
via the byKey method, e.g.

    meta.byKey('info');

Pure imperative form would be like:

    document.createElement('iron-meta').byKey('info');

Or, in a Polymer element, you can include a meta in your template:

    <iron-meta id="meta"></iron-meta>
    ...
    this.$.meta.byKey('info');

@group Iron Elements
@demo demo/index.html
@hero hero.svg
@element iron-meta
-->

<script>

  (function() {

    // monostate data
    var metaDatas = {};
    var metaArrays = {};
    var singleton = null;

    Polymer.IronMeta = Polymer({

      is: 'iron-meta',

      properties: {

        /**
         * The type of meta-data.  All meta-data of the same type is stored
         * together.
         */
        type: {
          type: String,
          value: 'default',
          observer: '_typeChanged'
        },

        /**
         * The key used to store `value` under the `type` namespace.
         */
        key: {
          type: String,
          observer: '_keyChanged'
        },

        /**
         * The meta-data to store or retrieve.
         */
        value: {
          type: Object,
          notify: true,
          observer: '_valueChanged'
        },

        /**
         * If true, `value` is set to the iron-meta instance itself.
         */
         self: {
          type: Boolean,
          observer: '_selfChanged'
        },

        /**
         * Array of all meta-data values for the given type.
         */
        list: {
          type: Array,
          notify: true
        }

      },

      hostAttributes: {
        hidden: true
      },

      /**
       * Only runs if someone invokes the factory/constructor directly
       * e.g. `new Polymer.IronMeta()`
       *
       * @param {{type: (string|undefined), key: (string|undefined), value}=} config
       */
      factoryImpl: function(config) {
        if (config) {
          for (var n in config) {
            switch(n) {
              case 'type':
              case 'key':
              case 'value':
                this[n] = config[n];
                break;
            }
          }
        }
      },

      created: function() {
        // TODO(sjmiles): good for debugging?
        this._metaDatas = metaDatas;
        this._metaArrays = metaArrays;
      },

      _keyChanged: function(key, old) {
        this._resetRegistration(old);
      },

      _valueChanged: function(value) {
        this._resetRegistration(this.key);
      },

      _selfChanged: function(self) {
        if (self) {
          this.value = this;
        }
      },

      _typeChanged: function(type) {
        this._unregisterKey(this.key);
        if (!metaDatas[type]) {
          metaDatas[type] = {};
        }
        this._metaData = metaDatas[type];
        if (!metaArrays[type]) {
          metaArrays[type] = [];
        }
        this.list = metaArrays[type];
        this._registerKeyValue(this.key, this.value);
      },

      /**
       * Retrieves meta data value by key.
       *
       * @method byKey
       * @param {string} key The key of the meta-data to be returned.
       * @return {*}
       */
      byKey: function(key) {
        return this._metaData && this._metaData[key];
      },

      _resetRegistration: function(oldKey) {
        this._unregisterKey(oldKey);
        this._registerKeyValue(this.key, this.value);
      },

      _unregisterKey: function(key) {
        this._unregister(key, this._metaData, this.list);
      },

      _registerKeyValue: function(key, value) {
        this._register(key, value, this._metaData, this.list);
      },

      _register: function(key, value, data, list) {
        if (key && data && value !== undefined) {
          data[key] = value;
          list.push(value);
        }
      },

      _unregister: function(key, data, list) {
        if (key && data) {
          if (key in data) {
            var value = data[key];
            delete data[key];
            this.arrayDelete(list, value);
          }
        }
      }

    });

    Polymer.IronMeta.getIronMeta = function getIronMeta() {
       if (singleton === null) {
         singleton = new Polymer.IronMeta();
       }
       return singleton;
     };

    /**
    `iron-meta-query` can be used to access infomation stored in `iron-meta`.

    Examples:

    If I create an instance like this:

        <iron-meta key="info" value="foo/bar"></iron-meta>

    Note that value="foo/bar" is the metadata I've defined. I could define more
    attributes or use child nodes to define additional metadata.

    Now I can access that element (and it's metadata) from any `iron-meta-query` instance:

         var value = new Polymer.IronMetaQuery({key: 'info'}).value;

    @group Polymer Iron Elements
    @element iron-meta-query
    */
    Polymer.IronMetaQuery = Polymer({

      is: 'iron-meta-query',

      properties: {

        /**
         * The type of meta-data.  All meta-data of the same type is stored
         * together.
         */
        type: {
          type: String,
          value: 'default',
          observer: '_typeChanged'
        },

        /**
         * Specifies a key to use for retrieving `value` from the `type`
         * namespace.
         */
        key: {
          type: String,
          observer: '_keyChanged'
        },

        /**
         * The meta-data to store or retrieve.
         */
        value: {
          type: Object,
          notify: true,
          readOnly: true
        },

        /**
         * Array of all meta-data values for the given type.
         */
        list: {
          type: Array,
          notify: true
        }

      },

      /**
       * Actually a factory method, not a true constructor. Only runs if
       * someone invokes it directly (via `new Polymer.IronMeta()`);
       *
       * @param {{type: (string|undefined), key: (string|undefined)}=} config
       */
      factoryImpl: function(config) {
        if (config) {
          for (var n in config) {
            switch(n) {
              case 'type':
              case 'key':
                this[n] = config[n];
                break;
            }
          }
        }
      },

      created: function() {
        // TODO(sjmiles): good for debugging?
        this._metaDatas = metaDatas;
        this._metaArrays = metaArrays;
      },

      _keyChanged: function(key) {
        this._setValue(this._metaData && this._metaData[key]);
      },

      _typeChanged: function(type) {
        this._metaData = metaDatas[type];
        this.list = metaArrays[type];
        if (this.key) {
          this._keyChanged(this.key);
        }
      },

      /**
       * Retrieves meta data value by key.
       * @param {string} key The key of the meta-data to be returned.
       * @return {*}
       */
      byKey: function(key) {
        return this._metaData && this._metaData[key];
      }

    });

  })();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * `Polymer.NeonAnimatableBehavior` is implemented by elements containing animations for use with
   * elements implementing `Polymer.NeonAnimationRunnerBehavior`.
   * @polymerBehavior
   */
  Polymer.NeonAnimatableBehavior = {

    properties: {

      /**
       * Animation configuration. See README for more info.
       */
      animationConfig: {
        type: Object
      },

      /**
       * Convenience property for setting an 'entry' animation. Do not set `animationConfig.entry`
       * manually if using this. The animated node is set to `this` if using this property.
       */
      entryAnimation: {
        observer: '_entryAnimationChanged',
        type: String
      },

      /**
       * Convenience property for setting an 'exit' animation. Do not set `animationConfig.exit`
       * manually if using this. The animated node is set to `this` if using this property.
       */
      exitAnimation: {
        observer: '_exitAnimationChanged',
        type: String
      }

    },

    _entryAnimationChanged: function() {
      this.animationConfig = this.animationConfig || {};
      this.animationConfig['entry'] = [{
        name: this.entryAnimation,
        node: this
      }];
    },

    _exitAnimationChanged: function() {
      this.animationConfig = this.animationConfig || {};
      this.animationConfig['exit'] = [{
        name: this.exitAnimation,
        node: this
      }];
    },

    _copyProperties: function(config1, config2) {
      // shallowly copy properties from config2 to config1
      for (var property in config2) {
        config1[property] = config2[property];
      }
    },

    _cloneConfig: function(config) {
      var clone = {
        isClone: true
      };
      this._copyProperties(clone, config);
      return clone;
    },

    _getAnimationConfigRecursive: function(type, map, allConfigs) {
      if (!this.animationConfig) {
        return;
      }

      if(this.animationConfig.value && typeof this.animationConfig.value === 'function') {
      	this._warn(this._logf('playAnimation', "Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));
      	return;
      }

      // type is optional
      var thisConfig;
      if (type) {
        thisConfig = this.animationConfig[type];
      } else {
        thisConfig = this.animationConfig;
      }

      if (!Array.isArray(thisConfig)) {
        thisConfig = [thisConfig];
      }

      // iterate animations and recurse to process configurations from child nodes
      if (thisConfig) {
        for (var config, index = 0; config = thisConfig[index]; index++) {
          if (config.animatable) {
            config.animatable._getAnimationConfigRecursive(config.type || type, map, allConfigs);
          } else {
            if (config.id) {
              var cachedConfig = map[config.id];
              if (cachedConfig) {
                // merge configurations with the same id, making a clone lazily
                if (!cachedConfig.isClone) {
                  map[config.id] = this._cloneConfig(cachedConfig)
                  cachedConfig = map[config.id];
                }
                this._copyProperties(cachedConfig, config);
              } else {
                // put any configs with an id into a map
                map[config.id] = config;
              }
            } else {
              allConfigs.push(config);
            }
          }
        }
      }
    },

    /**
     * An element implementing `Polymer.NeonAnimationRunnerBehavior` calls this method to configure
     * an animation with an optional type. Elements implementing `Polymer.NeonAnimatableBehavior`
     * should define the property `animationConfig`, which is either a configuration object
     * or a map of animation type to array of configuration objects.
     */
    getAnimationConfig: function(type) {
      var map = {};
      var allConfigs = [];
      this._getAnimationConfigRecursive(type, map, allConfigs);
      // append the configurations saved in the map to the array
      for (var key in map) {
        allConfigs.push(map[key]);
      }
      return allConfigs;
    }

  };

</script>
<script>

  /**
   * `Polymer.NeonAnimationRunnerBehavior` adds a method to run animations.
   *
   * @polymerBehavior Polymer.NeonAnimationRunnerBehavior
   */
  Polymer.NeonAnimationRunnerBehaviorImpl = {

    _configureAnimations: function(configs) {
      var results = [];
      if (configs.length > 0) {
        for (var config, index = 0; config = configs[index]; index++) {
          var neonAnimation = document.createElement(config.name);
          // is this element actually a neon animation?
          if (neonAnimation.isNeonAnimation) {
            var result = null;
            // configuration or play could fail if polyfills aren't loaded
            try {
              result = neonAnimation.configure(config);
              // Check if we have an Effect rather than an Animation
              if (typeof result.cancel != 'function') { 
                result = document.timeline.play(result);
              }
            } catch (e) {
              result = null;
              console.warn('Couldnt play', '(', config.name, ').', e);
            }
            if (result) {
              results.push({
                neonAnimation: neonAnimation,
                config: config,
                animation: result,
              });
            }
          } else {
            console.warn(this.is + ':', config.name, 'not found!');
          }
        }
      }
      return results;
    },

    _shouldComplete: function(activeEntries) {
      var finished = true;
      for (var i = 0; i < activeEntries.length; i++) {
        if (activeEntries[i].animation.playState != 'finished') {
          finished = false;
          break;
        }
      }
      return finished;
    },

    _complete: function(activeEntries) {
      for (var i = 0; i < activeEntries.length; i++) {
        activeEntries[i].neonAnimation.complete(activeEntries[i].config);
      }
      for (var i = 0; i < activeEntries.length; i++) {
        activeEntries[i].animation.cancel();
      }
    },

    /**
     * Plays an animation with an optional `type`.
     * @param {string=} type
     * @param {!Object=} cookie
     */
    playAnimation: function(type, cookie) {
      var configs = this.getAnimationConfig(type);
      if (!configs) {
        return;
      }
      this._active = this._active || {};
      if (this._active[type]) {
        this._complete(this._active[type]);
        delete this._active[type];
      }

      var activeEntries = this._configureAnimations(configs);

      if (activeEntries.length == 0) {
        this.fire('neon-animation-finish', cookie, {bubbles: false});
        return;
      }

      this._active[type] = activeEntries;

      for (var i = 0; i < activeEntries.length; i++) {
        activeEntries[i].animation.onfinish = function() {
          if (this._shouldComplete(activeEntries)) {
            this._complete(activeEntries);
            delete this._active[type];
            this.fire('neon-animation-finish', cookie, {bubbles: false});
          }
        }.bind(this);
      }
    },

    /**
     * Cancels the currently running animations.
     */
    cancelAnimation: function() {
      for (var k in this._animations) {
        this._animations[k].cancel();
      }
      this._animations = {};
    }
  };

  /** @polymerBehavior Polymer.NeonAnimationRunnerBehavior */
  Polymer.NeonAnimationRunnerBehavior = [
    Polymer.NeonAnimatableBehavior,
    Polymer.NeonAnimationRunnerBehaviorImpl
  ];
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * Use `Polymer.NeonAnimationBehavior` to implement an animation.
   * @polymerBehavior
   */
  Polymer.NeonAnimationBehavior = {

    properties: {

      /**
       * Defines the animation timing.
       */
      animationTiming: {
        type: Object,
        value: function() {
          return {
            duration: 500,
            easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
            fill: 'both'
          }
        }
      }

    },

    /**
     * Can be used to determine that elements implement this behavior.
     */
    isNeonAnimation: true,

    /**
     * Do any animation configuration here.
     */
    // configure: function(config) {
    // },

    /**
     * Returns the animation timing by mixing in properties from `config` to the defaults defined
     * by the animation.
     */
    timingFromConfig: function(config) {
      if (config.timing) {
        for (var property in config.timing) {
          this.animationTiming[property] = config.timing[property];
        }
      }
      return this.animationTiming;
    },

    /**
     * Sets `transform` and `transformOrigin` properties along with the prefixed versions.
     */
    setPrefixedProperty: function(node, property, value) {
      var map = {
        'transform': ['webkitTransform'],
        'transformOrigin': ['mozTransformOrigin', 'webkitTransformOrigin']
      };
      var prefixes = map[property];
      for (var prefix, index = 0; prefix = prefixes[index]; index++) {
        node.style[prefix] = value;
      }
      node.style[property] = value;
    },

    /**
     * Called when the animation finishes.
     */
    complete: function() {}

  };

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>// Copyright 2014 Google Inc. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
//     You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//     See the License for the specific language governing permissions and
// limitations under the License.

!function(a,b){var c={},d={},e={},f=null;!function(a,b){function c(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function d(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=x}function e(){return a.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function f(b,c,e){var f=new d;return c&&(f.fill="both",f.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof f[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==v.indexOf(b[c]))return;if("direction"==c&&-1==w.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;f[c]=b[c]}}):f.duration=b,f}function g(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function h(b,c){return b=a.numericTimingToObject(b),f(b,c)}function i(a,b,c,d){return a<0||a>1||c<0||c>1?x:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(e<=0){var g=0;return a>0?g=b/a:!b&&c>0&&(g=d/c),g*e}if(e>=1){var h=0;return c<1?h=(d-1)/(c-1):1==c&&a<1&&(h=(b-1)/(a-1)),1+h*(e-1)}for(var i=0,j=1;i<j;){var k=(i+j)/2,l=f(a,c,k);if(Math.abs(e-l)<1e-5)return f(b,d,k);l<e?i=k:j=k}return f(b,d,k)}}function j(a,b){return function(c){if(c>=1)return 1;var d=1/a;return(c+=b*d)-c%d}}function k(a){C||(C=document.createElement("div").style),C.animationTimingFunction="",C.animationTimingFunction=a;var b=C.animationTimingFunction;if(""==b&&e())throw new TypeError(a+" is not a valid value for easing");return b}function l(a){if("linear"==a)return x;var b=E.exec(a);if(b)return i.apply(this,b.slice(1).map(Number));var c=F.exec(a);return c?j(Number(c[1]),{start:y,middle:z,end:A}[c[2]]):B[a]||x}function m(a){return Math.abs(n(a)/a.playbackRate)}function n(a){return 0===a.duration||0===a.iterations?0:a.duration*a.iterations}function o(a,b,c){if(null==b)return G;var d=c.delay+a+c.endDelay;return b<Math.min(c.delay,d)?H:b>=Math.min(c.delay+a,d)?I:J}function p(a,b,c,d,e){switch(d){case H:return"backwards"==b||"both"==b?0:null;case J:return c-e;case I:return"forwards"==b||"both"==b?a:null;case G:return null}}function q(a,b,c,d,e){var f=e;return 0===a?b!==H&&(f+=c):f+=d/a,f}function r(a,b,c,d,e,f){var g=a===1/0?b%1:a%1;return 0!==g||c!==I||0===d||0===e&&0!==f||(g=1),g}function s(a,b,c,d){return a===I&&b===1/0?1/0:1===c?Math.floor(d)-1:Math.floor(d)}function t(a,b,c){var d=a;if("normal"!==a&&"reverse"!==a){var e=b;"alternate-reverse"===a&&(e+=1),d="normal",e!==1/0&&e%2!=0&&(d="reverse")}return"normal"===d?c:1-c}function u(a,b,c){var d=o(a,b,c),e=p(a,c.fill,b,d,c.delay);if(null===e)return null;var f=q(c.duration,d,c.iterations,e,c.iterationStart),g=r(f,c.iterationStart,d,c.iterations,e,c.duration),h=s(d,c.iterations,g,f),i=t(c.direction,h,g);return c._easingFunction(i)}var v="backwards|forwards|both|none".split("|"),w="reverse|alternate|alternate-reverse".split("|"),x=function(a){return a};d.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){if((isNaN(a)||a<0)&&e())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){if("auto"!=a&&(isNaN(a)||a<0)&&e())throw new TypeError("duration must be non-negative or auto, received: "+a);this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._easingFunction=l(k(a)),this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){if((isNaN(a)||a<0)&&e())throw new TypeError("iterations must be non-negative, received: "+a);this._setMember("iterations",a)},get iterations(){return this._iterations}};var y=1,z=.5,A=0,B={ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"step-start":j(1,y),"step-middle":j(1,z),"step-end":j(1,A)},C=null,D="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",E=new RegExp("cubic-bezier\\("+D+","+D+","+D+","+D+"\\)"),F=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,G=0,H=1,I=2,J=3;a.cloneTimingInput=c,a.makeTiming=f,a.numericTimingToObject=g,a.normalizeTimingInput=h,a.calculateActiveDuration=m,a.calculateIterationProgress=u,a.calculatePhase=o,a.normalizeEasing=k,a.parseEasingFunction=l}(c),function(a,b){function c(a,b){return a in k?k[a][b]||b:b}function d(a){return"display"===a||0===a.lastIndexOf("animation",0)||0===a.lastIndexOf("transition",0)}function e(a,b,e){if(!d(a)){var f=h[a];if(f){i.style[a]=b;for(var g in f){var j=f[g],k=i.style[j];e[j]=c(j,k)}}else e[a]=c(a,b)}}function f(a){var b=[];for(var c in a)if(!(c in["easing","offset","composite"])){var d=a[c];Array.isArray(d)||(d=[d]);for(var e,f=d.length,g=0;g<f;g++)e={},e.offset="offset"in a?a.offset:1==f?1:g/(f-1),"easing"in a&&(e.easing=a.easing),"composite"in a&&(e.composite=a.composite),e[c]=d[g],b.push(e)}return b.sort(function(a,b){return a.offset-b.offset}),b}function g(b){function c(){var a=d.length;null==d[a-1].offset&&(d[a-1].offset=1),a>1&&null==d[0].offset&&(d[0].offset=0);for(var b=0,c=d[0].offset,e=1;e<a;e++){var f=d[e].offset;if(null!=f){for(var g=1;g<e-b;g++)d[b+g].offset=c+(f-c)*g/(e-b);b=e,c=f}}}if(null==b)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||(b=f(b));for(var d=b.map(function(b){var c={};for(var d in b){var f=b[d];if("offset"==d){if(null!=f){if(f=Number(f),!isFinite(f))throw new TypeError("Keyframe offsets must be numbers.");if(f<0||f>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==d){if("add"==f||"accumulate"==f)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=f)throw new TypeError("Invalid composite mode "+f+".")}else f="easing"==d?a.normalizeEasing(f):""+f;e(d,f,c)}return void 0==c.offset&&(c.offset=null),void 0==c.easing&&(c.easing="linear"),c}),g=!0,h=-1/0,i=0;i<d.length;i++){var j=d[i].offset;if(null!=j){if(j<h)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");h=j}else g=!1}return d=d.filter(function(a){return a.offset>=0&&a.offset<=1}),g||c(),d}var h={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},i=document.createElementNS("http://www.w3.org/1999/xhtml","div"),j={thin:"1px",medium:"3px",thick:"5px"},k={borderBottomWidth:j,borderLeftWidth:j,borderRightWidth:j,borderTopWidth:j,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:j,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.convertToArrayForm=f,a.normalizeKeyframes=g}(c),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),!(g<h&&(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,1))},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b,c){function d(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function e(c){var d=[];for(var e in c)for(var f=c[e],g=0;g<f.length-1;g++){var h=g,i=g+1,j=f[h].offset,k=f[i].offset,l=j,m=k;0==g&&(l=-1/0,0==k&&(i=h)),g==f.length-2&&(m=1/0,1==j&&(h=i)),d.push({applyFrom:l,applyTo:m,startOffset:f[h].offset,endOffset:f[i].offset,easingFunction:a.parseEasingFunction(f[h].easing),property:e,interpolation:b.propertyInterpolation(e,f[h].value,f[i].value)})}return d.sort(function(a,b){return a.startOffset-b.startOffset}),d}b.convertEffectInput=function(c){var f=a.normalizeKeyframes(c),g=d(f),h=e(g);return function(a,c){if(null!=c)h.filter(function(a){return c>=a.applyFrom&&c<a.applyTo}).forEach(function(d){var e=c-d.startOffset,f=d.endOffset-d.startOffset,g=0==f?0:d.easingFunction(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d),function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a,b,c){h[c]=h[c]||[],h[c].push([a,b])}function f(a,b,c){for(var f=0;f<c.length;f++){e(a,b,d(c[f]))}}function g(c,e,f){var g=c;/-/.test(c)&&!a.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(g=d(c)),"initial"!=e&&"initial"!=f||("initial"==e&&(e=i[g]),"initial"==f&&(f=i[g]));for(var j=e==f?[]:h[g],k=0;j&&k<j.length;k++){var l=j[k][0](e),m=j[k][0](f);if(void 0!==l&&void 0!==m){var n=j[k][1](l,m);if(n){var o=b.Interpolation.apply(null,n);return function(a){return 0==a?e:1==a?f:o(a)}}}}return b.Interpolation(!1,!0,function(a){return a?f:e})}var h={};b.addPropertiesHandler=f;var i={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};b.propertyInterpolation=g}(c,d),function(a,b,c){function d(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateIterationProgress(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d}b.KeyframeEffect=function(c,e,f,g){var h,i=d(a.normalizeTimingInput(f)),j=b.convertEffectInput(e),k=function(){j(c,h)};return k._update=function(a){return null!==(h=i(a))},k._clear=function(){j(c,null)},k._hasSameTarget=function(a){return c===a},k._target=c,k._totalDuration=i._totalDuration,k._id=g,k}}(c,d),function(a,b){a.apply=function(b,c,d){b.style[a.propertyName(c)]=d},a.clear=function(b,c){b.style[a.propertyName(c)]=""}}(d),function(a){window.Element.prototype.animate=function(b,c){var d="";return c&&c.id&&(d=c.id),a.timeline._play(a.KeyframeEffect(this,b,c,d))}}(d),function(a,b){function c(a,b,d){if("number"==typeof a&&"number"==typeof b)return a*(1-d)+b*d;if("boolean"==typeof a&&"boolean"==typeof b)return d<.5?a:b;if(a.length==b.length){for(var e=[],f=0;f<a.length;f++)e.push(c(a[f],b[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+b}a.Interpolation=function(a,b,d){return function(e){return d(c(a,b,e))}}}(d),function(a,b,c){a.sequenceNumber=0;var d=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this.id="",b&&b._id&&(this.id=b._id),this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(a,!0),b.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var c=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)),null!=c&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,b.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),b.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var b=new d(this,this._currentTime,a),c=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){c.forEach(function(a){a.call(b.target,b)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,b){this._idle||this._paused||(null==this._startTime?b&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),b&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var a=this._effect._target;return a._activeAnimations||(a._activeAnimations=[]),a._activeAnimations},_markTarget:function(){var a=this._targetAnimations();-1===a.indexOf(this)&&a.push(this)},_unmarkTarget:function(){var a=this._targetAnimations(),b=a.indexOf(this);-1!==b&&a.splice(b,1)}}}(c,d),function(a,b,c){function d(a){var b=j;j=[],a<q.currentTime&&(a=q.currentTime),q._animations.sort(e),q._animations=h(a,!0,q._animations)[0],b.forEach(function(b){b[1](a)}),g(),l=void 0}function e(a,b){return a._sequenceNumber-b._sequenceNumber}function f(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function g(){o.forEach(function(a){a()}),o.length=0}function h(a,c,d){p=!0,n=!1,b.timeline.currentTime=a,m=!1;var e=[],f=[],g=[],h=[];return d.forEach(function(b){b._tick(a,c),b._inEffect?(f.push(b._effect),b._markTarget()):(e.push(b._effect),b._unmarkTarget()),b._needsTick&&(m=!0);var d=b._inEffect||b._needsTick;b._inTimeline=d,d?g.push(b):h.push(b)}),o.push.apply(o,e),o.push.apply(o,f),m&&requestAnimationFrame(function(){}),p=!1,[g,h]}var i=window.requestAnimationFrame,j=[],k=0;window.requestAnimationFrame=function(a){var b=k++;return 0==j.length&&i(d),j.push([b,a]),b},window.cancelAnimationFrame=function(a){j.forEach(function(b){b[0]==a&&(b[1]=function(){})})},f.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.applyDirtiedAnimation(d),d}};var l=void 0,m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n},b.applyDirtiedAnimation=function(a){if(!p){a._markTarget();var c=a._targetAnimations();c.sort(e),h(b.timeline.currentTime,!1,c.slice())[1].forEach(function(a){var b=q._animations.indexOf(a);-1!==b&&q._animations.splice(b,1)}),g()}};var o=[],p=!1,q=new f;b.timeline=q}(c,d),function(a){function b(a,b){var c=a.exec(b);if(c)return c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]}function c(a,b){b=b.replace(/^\s*/,"");var c=a(b);if(c)return[c[0],c[1].replace(/^\s*/,"")]}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],!(g=b(d,e))||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(c--,0==c&&d++,c<=0))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){return a(c)||[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}if(""==c)return d}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;k<j;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);if(e&&e[0].length)return[d,e[1]]}function c(c){var d=a.consumeRepeated(b,/^,/,c);if(d&&""==d[1])return d[0]}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a,b){function c(a){return a.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a))return Number(a)}function f(a,b){return[a,b,c]}function g(a,b){if(0!=a)return i(0,1/0)(a,b)}function h(a,b){return[a,b,function(a){return Math.round(d(1,1/0,a))}]}function i(a,b){return function(e,f){return[e,f,function(e){return c(d(a,b,e))}]}}function j(a){var b=a.trim().split(/\s*[\s,]\s*/);if(0!==b.length){for(var c=[],d=0;d<b.length;d++){var f=e(b[d]);if(void 0===f)return;c.push(f)}return c}}function k(a,b){if(a.length==b.length)return[a,b,function(a){return a.map(c).join(" ")}]}function l(a,b){return[a,b,Math.round]}a.clamp=d,a.addPropertiesHandler(j,k,["stroke-dasharray"]),a.addPropertiesHandler(e,i(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(e,i(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(e,g,["flex-grow","flex-shrink"]),a.addPropertiesHandler(e,h,["orphans","widows"]),a.addPropertiesHandler(e,l,["z-index"]),a.parseNumber=e,a.parseNumberList=j,a.mergeNumbers=f,a.numberToString=c}(d),function(a,b){function c(a,b){if("visible"==a||"visible"==b)return[0,1,function(c){return c<=0?a:c>=1?b:"visible"}]}a.addPropertiesHandler(String,c,["visibility"])}(d),function(a,b){function c(a){a=a.trim(),f.fillStyle="#000",f.fillStyle=a;var b=f.fillStyle;if(f.fillStyle="#fff",f.fillStyle=a,b==f.fillStyle){f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1).data;f.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function d(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;d<3;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=e.height=1;var f=e.getContext("2d");a.addPropertiesHandler(c,d,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,c),a.mergeColors=d}(d),function(a,b){function c(a,b){if("0"==(b=b.trim().toLowerCase())&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(a){return c[a]=null,"U"+a});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(a,b){return e(a,b,!0)}function e(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(a){var b=l(a);if(b&&""==b[1])return b[0]},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(d,f),function(a,b){function c(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function d(b){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,c,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],b);if(d&&4==d[0].length)return d[0]}function e(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function f(a){return"rect("+a+")"}var g=a.mergeWrappedNestedRepeated.bind(null,f,e,", ");a.parseBox=d,a.mergeBoxes=g,a.addPropertiesHandler(d,g,["clip"])}(d),function(a,b){function c(a){return function(b){var c=0;return a.map(function(a){return a===k?b[c++]:a})}}function d(a){return a}function e(b){if("none"==(b=b.toLowerCase().trim()))return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=n[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var k=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(void 0===(p=q?{A:function(b){return"0"==b.trim()?m:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:m,n:k[0],t:l}[r]))return;k.push(p)}if(e.push({t:g,d:k}),d.lastIndex==b.length)return e}}function f(a){return a.toFixed(6).replace(".000000","")}function g(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var e=a.makeMatrixDecomposition(c)}return null==d[0]||null==e[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),e[0].push(1),[d,e,function(b){var c=a.quat(d[0][3],e[0][3],b[5]);return a.composeMatrix(b[0],b[1],b[2],c,b[4]).map(f).join(",")}])}function h(a){return a.replace(/[xy]/,"")}function i(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function j(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var f=0;f<b.length;f++){var j=b[f].t,k=b[f].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var m=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var f=0;f<b.length;f++){var j,s=b[f].t,t=c[f].t,u=b[f].d,v=c[f].d,w=n[s],x=n[t];if(m(s,t)){if(!d)return;var r=g([b[f]],[c[f]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&h(s)==h(t))j=h(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||i(s)!=i(t)){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=i(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C="number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var k=null,l={px:0},m={deg:0},n={matrix:["NNNNNN",[k,k,0,0,k,k,0,0,0,0,1,0,k,k,0,1],d],matrix3d:["NNNNNNNNNNNNNNNN",d],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",c([k,k,1]),d],scalex:["N",c([k,1,1]),c([k,1])],scaley:["N",c([1,k,1]),c([1,k])],scalez:["N",c([1,1,k])],scale3d:["NNN",d],skew:["Aa",null,d],skewx:["A",null,c([k,m])],skewy:["A",null,c([m,k])],translate:["Tt",c([k,k,l]),d],translatex:["T",c([k,l,l]),c([k,l])],translatey:["T",c([l,k,l]),c([l,k])],translatez:["L",c([l,l,k])],translate3d:["TTL",d]};a.addPropertiesHandler(e,j,["transform"])}(d),function(a,b){function c(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(d[a]=b)})}var d={};c("transform",["webkitTransform","msTransform"]),c("transformOrigin",["webkitTransformOrigin"]),c("perspective",["webkitPerspective"]),c("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return d[a]||a}}(d)}(),function(){if(void 0===document.createElement("div").animate([]).oncancel){var a;if(window.performance&&performance.now)var a=function(){return performance.now()};else var a=function(){return Date.now()};var b=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(d,e){var f=c.call(this,d,e);f._cancelHandlers=[],f.oncancel=null;var g=f.cancel;f.cancel=function(){g.call(this);var c=new b(this,null,a()),d=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){d.forEach(function(a){a.call(c.target,c)})},0)};var h=f.addEventListener;f.addEventListener=function(a,b){"function"==typeof b&&"cancel"==a?this._cancelHandlers.push(b):h.call(this,a,b)};var i=f.removeEventListener;return f.removeEventListener=function(a,b){if("cancel"==a){var c=this._cancelHandlers.indexOf(b);c>=0&&this._cancelHandlers.splice(c,1)}else i.call(this,a,b)},f}}}(),function(a){var b=document.documentElement,c=null,d=!1;try{var e=getComputedStyle(b).getPropertyValue("opacity"),f="0"==e?"1":"0";c=b.animate({opacity:[f,f]},{duration:1}),c.currentTime=0,d=getComputedStyle(b).getPropertyValue("opacity")==f}catch(a){}finally{c&&c.cancel()}if(!d){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(b,c){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||null===b||(b=a.convertToArrayForm(b)),g.call(this,b,c)}}}(c),function(a,b,c){function d(a){var c=b.timeline;c.currentTime=a,c._discardAnimations(),0==c._animations.length?f=!1:requestAnimationFrame(d)}var e=window.requestAnimationFrame;window.requestAnimationFrame=function(a){return e(function(c){b.timeline._updateAnimationsPromises(),a(c),b.timeline._updateAnimationsPromises()})},b.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},b.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){b.animationsWithPromises=b.animationsWithPromises.filter(function(a){return a._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(a){return"finished"!=a.playState&&"idle"!=a.playState})},_play:function(a){var c=new b.Animation(a,this);return this._animations.push(c),b.restartWebAnimationsNextTick(),c._updatePromises(),c._animation.play(),c._updatePromises(),c},play:function(a){return a&&a.remove(),this._play(a)}};var f=!1;b.restartWebAnimationsNextTick=function(){f||(f=!0,requestAnimationFrame(d))};var g=new b.AnimationTimeline;b.timeline=g;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return g}})}catch(a){}try{window.document.timeline=g}catch(a){}}(0,e),function(a,b,c){b.animationsWithPromises=[],b.Animation=function(b,c){if(this.id="",b&&b._id&&(this.id=b._id),this.effect=b,b&&(b._animation=this),!c)throw new Error("Animation with null timeline is not supported");this._timeline=c,this._sequenceNumber=a.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},b.Animation.prototype={_updatePromises:function(){var a=this._oldPlayState,b=this.playState;return this._readyPromise&&b!==a&&("idle"==b?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==a?this._resolveReadyPromise():"pending"==b&&(this._readyPromise=void 0)),this._finishedPromise&&b!==a&&("idle"==b?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==b?this._resolveFinishedPromise():"finished"==a&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var a,c,d,e,f=!!this._animation;f&&(a=this.playbackRate,c=this._paused,d=this.startTime,e=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=b.newUnderlyingAnimationForKeyframeEffect(this.effect),b.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=b.newUnderlyingAnimationForGroup(this.effect),b.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&b.bindAnimationForCustomEffect(this),f&&(1!=a&&(this.playbackRate=a),null!==d?this.startTime=d:null!==e?this.currentTime=e:null!==this._holdTime&&(this.currentTime=this._holdTime),c&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var a=this.effect._timing.delay;this._childAnimations.forEach(function(c){this._arrangeChildren(c,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c.effect))}.bind(this))}},_setExternalAnimation:function(a){if(this.effect&&this._isGroup)for(var b=0;b<this.effect.children.length;b++)this.effect.children[b]._animation=a,this._childAnimations[b]._setExternalAnimation(a)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var a=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(c){var d=b.timeline._play(c);this._childAnimations.push(d),d.playbackRate=this.playbackRate,this._paused&&d.pause(),c._animation=this.effect._animation,this._arrangeChildren(d,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c))}.bind(this))}},_arrangeChildren:function(a,b){null===this.startTime?a.currentTime=this.currentTime-b/this.playbackRate:a.startTime!==this.startTime+b/this.playbackRate&&(a.startTime=this.startTime+b/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(a,b){this._resolveFinishedPromise=function(){a(this)},this._rejectFinishedPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._readyPromise=new Promise(function(a,b){this._resolveReadyPromise=function(){a(this)},this._rejectReadyPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._animation.onfinish},set onfinish(a){this._animation.onfinish="function"==typeof a?function(b){b.target=this,a.call(this,b)}.bind(this):a},get oncancel(){return this._animation.oncancel},set oncancel(a){this._animation.oncancel="function"==typeof a?function(b){b.target=this,a.call(this,b)}.bind(this):a},get currentTime(){this._updatePromises();var a=this._animation.currentTime;return this._updatePromises(),a},set currentTime(a){this._updatePromises(),this._animation.currentTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.currentTime=a-c}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(a){this._updatePromises(),this._animation.startTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.startTime=a+c}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(a){this._updatePromises();var b=this.currentTime;this._animation.playbackRate=a,this._forEachChild(function(b){b.playbackRate=a}),null!==b&&(this.currentTime=b),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),b.awaitStartTime(this),this._forEachChild(function(a){var b=a.currentTime;a.play(),a.currentTime=b}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(a){a.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var a=this.currentTime;this._animation.reverse(),this._forEachChild(function(a){a.reverse()}),null!==a&&(this.currentTime=a),this._updatePromises()},addEventListener:function(a,b){var c=b;"function"==typeof b&&(c=function(a){a.target=this,b.call(this,a)}.bind(this),b._wrapper=c),this._animation.addEventListener(a,c)},removeEventListener:function(a,b){this._animation.removeEventListener(a,b&&b._wrapper||b)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(b){var c=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(a){b.call(this,a,c),this.effect instanceof window.SequenceEffect&&(c+=a.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var d=this.effect._timing,e=this.currentTime;null!==e&&(e=a.calculateIterationProgress(a.calculateActiveDuration(d),e,d)),(null==e||isNaN(e))&&this._removeChildAnimations()}}},window.Animation=b.Animation}(c,e),function(a,b,c){function d(b){this._frames=a.normalizeKeyframes(b)}function e(){for(var a=!1;i.length;)i.shift()._updateChildren(),a=!0;return a}var f=function(a){if(a._animation=void 0,a instanceof window.SequenceEffect||a instanceof window.GroupEffect)for(var b=0;b<a.children.length;b++)f(a.children[b])};b.removeMulti=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d._parent?(-1==b.indexOf(d._parent)&&b.push(d._parent),d._parent.children.splice(d._parent.children.indexOf(d),1),d._parent=null,f(d)):d._animation&&d._animation.effect==d&&(d._animation.cancel(),d._animation.effect=new KeyframeEffect(null,[]),d._animation._callback&&(d._animation._callback._animation=null),d._animation._rebuildUnderlyingAnimation(),f(d))}for(c=0;c<b.length;c++)b[c]._rebuild()},b.KeyframeEffect=function(b,c,e,f){return this.target=b,this._parent=null,e=a.numericTimingToObject(e),this._timingInput=a.cloneTimingInput(e),this._timing=a.normalizeTimingInput(e),this.timing=a.makeTiming(e,!1,this),this.timing._effect=this,"function"==typeof c?(a.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=c):this._normalizedKeyframes=new d(c),this._keyframes=c,this.activeDuration=a.calculateActiveDuration(this._timing),this._id=f,this},b.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(a){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=a,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");var b=new KeyframeEffect(this.target,[],a.cloneTimingInput(this._timingInput),this._id);return b._normalizedKeyframes=this._normalizedKeyframes,b._keyframes=this._keyframes,b},remove:function(){b.removeMulti([this])}};var g=Element.prototype.animate;Element.prototype.animate=function(a,c){var d="";return c&&c.id&&(d=c.id),b.timeline._play(new b.KeyframeEffect(this,a,c,d))};var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");b.newUnderlyingAnimationForKeyframeEffect=function(a){if(a){var b=a.target||h,c=a._keyframes;"function"==typeof c&&(c=[]);var d=a._timingInput;d.id=a._id}else var b=h,c=[],d=0;return g.apply(b,[c,d])},b.bindAnimationForKeyframeEffect=function(a){a.effect&&"function"==typeof a.effect._normalizedKeyframes&&b.bindAnimationForCustomEffect(a)};var i=[];b.awaitStartTime=function(a){null===a.startTime&&a._isGroup&&(0==i.length&&requestAnimationFrame(e),i.push(a))};var j=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){b.timeline._updateAnimationsPromises();var a=j.apply(this,arguments);return e()&&(a=j.apply(this,arguments)),b.timeline._updateAnimationsPromises(),a}}),window.KeyframeEffect=b.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(a){return null!==a.effect&&a.effect.target==this}.bind(this))}}(c,e),function(a,b,c){function d(a){a._registered||(a._registered=!0,g.push(a),h||(h=!0,requestAnimationFrame(e)))}function e(a){var b=g;g=[],b.sort(function(a,b){return a._sequenceNumber-b._sequenceNumber}),b=b.filter(function(a){a();var b=a._animation?a._animation.playState:"idle";return"running"!=b&&"pending"!=b&&(a._registered=!1),a._registered}),g.push.apply(g,b),g.length?(h=!0,requestAnimationFrame(e)):h=!1}var f=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);b.bindAnimationForCustomEffect=function(b){var c,e=b.effect.target,g="function"==typeof b.effect.getFrames();c=g?b.effect.getFrames():b.effect._onsample;var h=b.effect.timing,i=null;h=a.normalizeTimingInput(h);var j=function(){var d=j._animation?j._animation.currentTime:null;null!==d&&(d=a.calculateIterationProgress(a.calculateActiveDuration(h),d,h),isNaN(d)&&(d=null)),d!==i&&(g?c(d,e,b.effect):c(d,b.effect,b.effect._animation)),i=d};j._animation=b,j._registered=!1,j._sequenceNumber=f++,b._callback=j,d(j)};var g=[],h=!1;b.Animation.prototype._register=function(){this._callback&&d(this._callback)}}(c,e),function(a,b,c){function d(a){return a._timing.delay+a.activeDuration+a._timing.endDelay}function e(b,c,d){this._id=d,this._parent=null,this.children=b||[],this._reparent(this.children),c=a.numericTimingToObject(c),this._timingInput=a.cloneTimingInput(c),this._timing=a.normalizeTimingInput(c,!0),this.timing=a.makeTiming(c,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){e.apply(this,arguments)},window.GroupEffect=function(){e.apply(this,arguments)},e.prototype={_isAncestor:function(a){for(var b=this;null!==b;){if(b==a)return!0;b=b._parent}return!1},_rebuild:function(){for(var a=this;a;)"auto"===a.timing.duration&&(a._timing.duration=a.activeDuration),a=a._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(a){b.removeMulti(a);for(var c=0;c<a.length;c++)a[c]._parent=this},_putChild:function(a,b){for(var c=b?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",d=0;d<a.length;d++)if(this._isAncestor(a[d]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:c};for(var d=0;d<a.length;d++)b?this.children.push(a[d]):this.children.unshift(a[d]);this._reparent(a),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var b=a.cloneTimingInput(this._timingInput),c=[],d=0;d<this.children.length;d++)c.push(this.children[d].clone());return this instanceof GroupEffect?new GroupEffect(c,b):new SequenceEffect(c,b)},remove:function(){b.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a+=d(b)}),Math.max(a,0)}}),window.GroupEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a=Math.max(a,d(b))}),a}}),b.newUnderlyingAnimationForGroup=function(c){var d,e=null,f=function(b){var c=d._wrapper;if(c&&"pending"!=c.playState&&c.effect)return null==b?void c._removeChildAnimations():0==b&&c.playbackRate<0&&(e||(e=a.normalizeTimingInput(c.effect.timing)),b=a.calculateIterationProgress(a.calculateActiveDuration(e),-1,e),isNaN(b)||null==b)?(c._forEachChild(function(a){a.currentTime=-1}),void c._removeChildAnimations()):void 0},g=new KeyframeEffect(null,[],c._timing,c._id);return g.onsample=f,d=b.timeline._play(g)},b.bindAnimationForGroup=function(a){a._animation._wrapper=a,a._isGroup=!0,b.awaitStartTime(a),a._constructChildAnimations(),a._setExternalAnimation(a)},b.groupChildDuration=d}(c,e),b.true=a}({},function(){return this}());
//# sourceMappingURL=web-animations-next-lite.min.js.map</script>
<!--
`<opaque-animation>` makes an element `opacity:1` for the duration of the animation. Used to prevent
webkit/safari from drawing a frame before an animation for elements that animate from display:none.
-->

<script>

  Polymer({

    is: 'opaque-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      this._effect = new KeyframeEffect(node, [
        {'opacity': '1'},
        {'opacity': '1'}
      ], this.timingFromConfig(config));
      node.style.opacity = '0';
      return this._effect;
    },

    complete: function(config) {
      config.node.style.opacity = '';
    }

  });

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  (function() {
    'use strict';
    /**
     * Used to calculate the scroll direction during touch events.
     * @type {!Object}
     */
    var lastTouchPosition = {
      pageX: 0,
      pageY: 0
    };
    /**
     * Used to avoid computing event.path and filter scrollable nodes (better perf).
     * @type {?EventTarget}
     */
    var lastRootTarget = null;
    /**
     * @type {!Array<Node>}
     */
    var lastScrollableNodes = [];

    var scrollEvents = [
      // Modern `wheel` event for mouse wheel scrolling:
      'wheel',
      // Older, non-standard `mousewheel` event for some FF:
      'mousewheel',
      // IE:
      'DOMMouseScroll',
      // Touch enabled devices
      'touchstart',
      'touchmove'
    ];

    /**
     * The IronDropdownScrollManager is intended to provide a central source
     * of authority and control over which elements in a document are currently
     * allowed to scroll.
     */

    Polymer.IronDropdownScrollManager = {

      /**
       * The current element that defines the DOM boundaries of the
       * scroll lock. This is always the most recently locking element.
       */
      get currentLockingElement() {
        return this._lockingElements[this._lockingElements.length - 1];
      },

      /**
       * Returns true if the provided element is "scroll locked", which is to
       * say that it cannot be scrolled via pointer or keyboard interactions.
       *
       * @param {HTMLElement} element An HTML element instance which may or may
       * not be scroll locked.
       */
      elementIsScrollLocked: function(element) {
        var currentLockingElement = this.currentLockingElement;

        if (currentLockingElement === undefined)
          return false;

        var scrollLocked;

        if (this._hasCachedLockedElement(element)) {
          return true;
        }

        if (this._hasCachedUnlockedElement(element)) {
          return false;
        }

        scrollLocked = !!currentLockingElement &&
          currentLockingElement !== element &&
          !this._composedTreeContains(currentLockingElement, element);

        if (scrollLocked) {
          this._lockedElementCache.push(element);
        } else {
          this._unlockedElementCache.push(element);
        }

        return scrollLocked;
      },

      /**
       * Push an element onto the current scroll lock stack. The most recently
       * pushed element and its children will be considered scrollable. All
       * other elements will not be scrollable.
       *
       * Scroll locking is implemented as a stack so that cases such as
       * dropdowns within dropdowns are handled well.
       *
       * @param {HTMLElement} element The element that should lock scroll.
       */
      pushScrollLock: function(element) {
        // Prevent pushing the same element twice
        if (this._lockingElements.indexOf(element) >= 0) {
          return;
        }

        if (this._lockingElements.length === 0) {
          this._lockScrollInteractions();
        }

        this._lockingElements.push(element);

        this._lockedElementCache = [];
        this._unlockedElementCache = [];
      },

      /**
       * Remove an element from the scroll lock stack. The element being
       * removed does not need to be the most recently pushed element. However,
       * the scroll lock constraints only change when the most recently pushed
       * element is removed.
       *
       * @param {HTMLElement} element The element to remove from the scroll
       * lock stack.
       */
      removeScrollLock: function(element) {
        var index = this._lockingElements.indexOf(element);

        if (index === -1) {
          return;
        }

        this._lockingElements.splice(index, 1);

        this._lockedElementCache = [];
        this._unlockedElementCache = [];

        if (this._lockingElements.length === 0) {
          this._unlockScrollInteractions();
        }
      },

      _lockingElements: [],

      _lockedElementCache: null,

      _unlockedElementCache: null,

      _hasCachedLockedElement: function(element) {
        return this._lockedElementCache.indexOf(element) > -1;
      },

      _hasCachedUnlockedElement: function(element) {
        return this._unlockedElementCache.indexOf(element) > -1;
      },

      _composedTreeContains: function(element, child) {
        // NOTE(cdata): This method iterates over content elements and their
        // corresponding distributed nodes to implement a contains-like method
        // that pierces through the composed tree of the ShadowDOM. Results of
        // this operation are cached (elsewhere) on a per-scroll-lock basis, to
        // guard against potentially expensive lookups happening repeatedly as
        // a user scrolls / touchmoves.
        var contentElements;
        var distributedNodes;
        var contentIndex;
        var nodeIndex;

        if (element.contains(child)) {
          return true;
        }

        contentElements = Polymer.dom(element).querySelectorAll('content');

        for (contentIndex = 0; contentIndex < contentElements.length; ++contentIndex) {

          distributedNodes = Polymer.dom(contentElements[contentIndex]).getDistributedNodes();

          for (nodeIndex = 0; nodeIndex < distributedNodes.length; ++nodeIndex) {

            if (this._composedTreeContains(distributedNodes[nodeIndex], child)) {
              return true;
            }
          }
        }

        return false;
      },

      _scrollInteractionHandler: function(event) {
        // Avoid canceling an event with cancelable=false, e.g. scrolling is in
        // progress and cannot be interrupted.
        if (event.cancelable && this._shouldPreventScrolling(event)) {
          event.preventDefault();
        }
        // If event has targetTouches (touch event), update last touch position.
        if (event.targetTouches) {
          var touch = event.targetTouches[0];
          lastTouchPosition.pageX = touch.pageX;
          lastTouchPosition.pageY = touch.pageY;
        }
      },

      _lockScrollInteractions: function() {
        this._boundScrollHandler = this._boundScrollHandler ||
          this._scrollInteractionHandler.bind(this);
        for (var i = 0, l = scrollEvents.length; i < l; i++) {
          // NOTE: browsers that don't support objects as third arg will
          // interpret it as boolean, hence useCapture = true in this case. 
          document.addEventListener(scrollEvents[i], this._boundScrollHandler, {
            capture: true,
            passive: false
          });
        }
      },

      _unlockScrollInteractions: function() {
        for (var i = 0, l = scrollEvents.length; i < l; i++) {
          // NOTE: browsers that don't support objects as third arg will
          // interpret it as boolean, hence useCapture = true in this case.
          document.removeEventListener(scrollEvents[i], this._boundScrollHandler, {
            capture: true,
            passive: false
          });
        }
      },

      /**
       * Returns true if the event causes scroll outside the current locking
       * element, e.g. pointer/keyboard interactions, or scroll "leaking"
       * outside the locking element when it is already at its scroll boundaries.
       * @param {!Event} event
       * @return {boolean}
       * @private
       */
      _shouldPreventScrolling: function(event) {

        // Update if root target changed. For touch events, ensure we don't
        // update during touchmove.
        var target = Polymer.dom(event).rootTarget;
        if (event.type !== 'touchmove' && lastRootTarget !== target) {
          lastRootTarget = target;
          lastScrollableNodes = this._getScrollableNodes(Polymer.dom(event).path);
        }

        // Prevent event if no scrollable nodes.
        if (!lastScrollableNodes.length) {
          return true;
        }
        // Don't prevent touchstart event inside the locking element when it has
        // scrollable nodes.
        if (event.type === 'touchstart') {
          return false;
        }
        // Get deltaX/Y.
        var info = this._getScrollInfo(event);
        // Prevent if there is no child that can scroll.
        return !this._getScrollingNode(lastScrollableNodes, info.deltaX, info.deltaY);
      },

      /**
       * Returns an array of scrollable nodes up to the current locking element,
       * which is included too if scrollable.
       * @param {!Array<Node>} nodes
       * @return {Array<Node>} scrollables
       * @private
       */
      _getScrollableNodes: function(nodes) {
        var scrollables = [];
        var lockingIndex = nodes.indexOf(this.currentLockingElement);
        // Loop from root target to locking element (included).
        for (var i = 0; i <= lockingIndex; i++) {
          // Skip non-Element nodes.
          if (nodes[i].nodeType !== Node.ELEMENT_NODE) {
            continue;
          }
          var node = /** @type {!Element} */ (nodes[i]);
          // Check inline style before checking computed style.
          var style = node.style;
          if (style.overflow !== 'scroll' && style.overflow !== 'auto') {
            style = window.getComputedStyle(node);
          }
          if (style.overflow === 'scroll' || style.overflow === 'auto') {
            scrollables.push(node);
          }
        }
        return scrollables;
      },

      /**
       * Returns the node that is scrolling. If there is no scrolling,
       * returns undefined.
       * @param {!Array<Node>} nodes
       * @param {number} deltaX Scroll delta on the x-axis
       * @param {number} deltaY Scroll delta on the y-axis
       * @return {Node|undefined}
       * @private
       */
      _getScrollingNode: function(nodes, deltaX, deltaY) {
        // No scroll.
        if (!deltaX && !deltaY) {
          return;
        }
        // Check only one axis according to where there is more scroll.
        // Prefer vertical to horizontal.
        var verticalScroll = Math.abs(deltaY) >= Math.abs(deltaX);
        for (var i = 0; i < nodes.length; i++) {
          var node = nodes[i];
          var canScroll = false;
          if (verticalScroll) {
            // delta < 0 is scroll up, delta > 0 is scroll down.
            canScroll = deltaY < 0 ? node.scrollTop > 0 :
              node.scrollTop < node.scrollHeight - node.clientHeight;
          } else {
            // delta < 0 is scroll left, delta > 0 is scroll right.
            canScroll = deltaX < 0 ? node.scrollLeft > 0 :
              node.scrollLeft < node.scrollWidth - node.clientWidth;
          }
          if (canScroll) {
            return node;
          }
        }
      },

      /**
       * Returns scroll `deltaX` and `deltaY`.
       * @param {!Event} event The scroll event
       * @return {{deltaX: number, deltaY: number}} Object containing the
       * x-axis scroll delta (positive: scroll right, negative: scroll left,
       * 0: no scroll), and the y-axis scroll delta (positive: scroll down,
       * negative: scroll up, 0: no scroll).
       * @private
       */
      _getScrollInfo: function(event) {
        var info = {
          deltaX: event.deltaX,
          deltaY: event.deltaY
        };
        // Already available.
        if ('deltaX' in event) {
          // do nothing, values are already good.
        }
        // Safari has scroll info in `wheelDeltaX/Y`.
        else if ('wheelDeltaX' in event) {
          info.deltaX = -event.wheelDeltaX;
          info.deltaY = -event.wheelDeltaY;
        }
        // Firefox has scroll info in `detail` and `axis`.
        else if ('axis' in event) {
          info.deltaX = event.axis === 1 ? event.detail : 0;
          info.deltaY = event.axis === 2 ? event.detail : 0;
        }
        // On mobile devices, calculate scroll direction.
        else if (event.targetTouches) {
          var touch = event.targetTouches[0];
          // Touch moves from right to left => scrolling goes right.
          info.deltaX = lastTouchPosition.pageX - touch.pageX;
          // Touch moves from down to up => scrolling goes down.
          info.deltaY = lastTouchPosition.pageY - touch.pageY;
        }
        return info;
      }
    };
  })();
</script>
<!--
`<iron-dropdown>` is a generalized element that is useful when you have
hidden content (`.dropdown-content`) that is revealed due to some change in
state that should cause it to do so.

Note that this is a low-level element intended to be used as part of other
composite elements that cause dropdowns to be revealed.

Examples of elements that might be implemented using an `iron-dropdown`
include comboboxes, menubuttons, selects. The list goes on.

The `<iron-dropdown>` element exposes attributes that allow the position
of the `.dropdown-content` relative to the `.dropdown-trigger` to be
configured.

    <iron-dropdown horizontal-align="right" vertical-align="top">
      <div class="dropdown-content">Hello!</div>
    </iron-dropdown>

In the above example, the `<div>` with class `.dropdown-content` will be
hidden until the dropdown element has `opened` set to true, or when the `open`
method is called on the element.

@demo demo/index.html
-->

<dom-module id="iron-dropdown" assetpath="bower_components/iron-dropdown/">
  <template>
    <style>
      :host {
        position: fixed;
      }

      #contentWrapper ::content > * {
        overflow: auto;
      }

      #contentWrapper.animating ::content > * {
        overflow: hidden;
      }
    </style>

    <div id="contentWrapper">
      <content id="content" select=".dropdown-content"></content>
    </div>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'iron-dropdown',

        behaviors: [
          Polymer.IronControlState,
          Polymer.IronA11yKeysBehavior,
          Polymer.IronOverlayBehavior,
          Polymer.NeonAnimationRunnerBehavior
        ],

        properties: {
          /**
           * The orientation against which to align the dropdown content
           * horizontally relative to the dropdown trigger.
           * Overridden from `Polymer.IronFitBehavior`.
           */
          horizontalAlign: {
            type: String,
            value: 'left',
            reflectToAttribute: true
          },

          /**
           * The orientation against which to align the dropdown content
           * vertically relative to the dropdown trigger.
           * Overridden from `Polymer.IronFitBehavior`.
           */
          verticalAlign: {
            type: String,
            value: 'top',
            reflectToAttribute: true
          },

          /**
           * An animation config. If provided, this will be used to animate the
           * opening of the dropdown. Pass an Array for multiple animations.
           * See `neon-animation` documentation for more animation configuration
           * details.
           */
          openAnimationConfig: {
            type: Object
          },

          /**
           * An animation config. If provided, this will be used to animate the
           * closing of the dropdown. Pass an Array for multiple animations.
           * See `neon-animation` documentation for more animation configuration
           * details.
           */
          closeAnimationConfig: {
            type: Object
          },

          /**
           * If provided, this will be the element that will be focused when
           * the dropdown opens.
           */
          focusTarget: {
            type: Object
          },

          /**
           * Set to true to disable animations when opening and closing the
           * dropdown.
           */
          noAnimations: {
            type: Boolean,
            value: false
          },

          /**
           * By default, the dropdown will constrain scrolling on the page
           * to itself when opened.
           * Set to true in order to prevent scroll from being constrained
           * to the dropdown when it opens.
           */
          allowOutsideScroll: {
            type: Boolean,
            value: false
          },

          /**
           * Callback for scroll events.
           * @type {Function}
           * @private
           */
          _boundOnCaptureScroll: {
            type: Function,
            value: function() {
              return this._onCaptureScroll.bind(this);
            }
          }
        },

        listeners: {
          'neon-animation-finish': '_onNeonAnimationFinish'
        },

        observers: [
          '_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)'
        ],

        /**
         * The element that is contained by the dropdown, if any.
         */
        get containedElement() {
          return Polymer.dom(this.$.content).getDistributedNodes()[0];
        },

        /**
         * The element that should be focused when the dropdown opens.
         * @deprecated
         */
        get _focusTarget() {
          return this.focusTarget || this.containedElement;
        },

        ready: function() {
          // Memoized scrolling position, used to block scrolling outside.
          this._scrollTop = 0;
          this._scrollLeft = 0;
          // Used to perform a non-blocking refit on scroll.
          this._refitOnScrollRAF = null;
        },

        attached: function () {
          if (!this.sizingTarget || this.sizingTarget === this) {
            this.sizingTarget = this.containedElement || this;
          }
        },

        detached: function() {
          this.cancelAnimation();
          document.removeEventListener('scroll', this._boundOnCaptureScroll);
          Polymer.IronDropdownScrollManager.removeScrollLock(this);
        },

        /**
         * Called when the value of `opened` changes.
         * Overridden from `IronOverlayBehavior`
         */
        _openedChanged: function() {
          if (this.opened && this.disabled) {
            this.cancel();
          } else {
            this.cancelAnimation();
            this._updateAnimationConfig();
            this._saveScrollPosition();
            if (this.opened) {
              document.addEventListener('scroll', this._boundOnCaptureScroll);
              !this.allowOutsideScroll && Polymer.IronDropdownScrollManager.pushScrollLock(this);
            } else {
              document.removeEventListener('scroll', this._boundOnCaptureScroll);
              Polymer.IronDropdownScrollManager.removeScrollLock(this);
            }
            Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this, arguments);
          }
        },

        /**
         * Overridden from `IronOverlayBehavior`.
         */
        _renderOpened: function() {
          if (!this.noAnimations && this.animationConfig.open) {
            this.$.contentWrapper.classList.add('animating');
            this.playAnimation('open');
          } else {
            Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this, arguments);
          }
        },

        /**
         * Overridden from `IronOverlayBehavior`.
         */
        _renderClosed: function() {

          if (!this.noAnimations && this.animationConfig.close) {
            this.$.contentWrapper.classList.add('animating');
            this.playAnimation('close');
          } else {
            Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this, arguments);
          }
        },

        /**
         * Called when animation finishes on the dropdown (when opening or
         * closing). Responsible for "completing" the process of opening or
         * closing the dropdown by positioning it or setting its display to
         * none.
         */
        _onNeonAnimationFinish: function() {
          this.$.contentWrapper.classList.remove('animating');
          if (this.opened) {
            this._finishRenderOpened();
          } else {
            this._finishRenderClosed();
          }
        },

        _onCaptureScroll: function() {
          if (!this.allowOutsideScroll) {
            this._restoreScrollPosition();
          } else {
            this._refitOnScrollRAF && window.cancelAnimationFrame(this._refitOnScrollRAF);
            this._refitOnScrollRAF = window.requestAnimationFrame(this.refit.bind(this));
          }
        },

        /**
         * Memoizes the scroll position of the outside scrolling element.
         * @private
         */
        _saveScrollPosition: function() {
          if (document.scrollingElement) {
            this._scrollTop = document.scrollingElement.scrollTop;
            this._scrollLeft = document.scrollingElement.scrollLeft;
          } else {
            // Since we don't know if is the body or html, get max.
            this._scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
            this._scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
          }
        },

        /**
         * Resets the scroll position of the outside scrolling element.
         * @private
         */
        _restoreScrollPosition: function() {
          if (document.scrollingElement) {
            document.scrollingElement.scrollTop = this._scrollTop;
            document.scrollingElement.scrollLeft = this._scrollLeft;
          } else {
            // Since we don't know if is the body or html, set both.
            document.documentElement.scrollTop = this._scrollTop;
            document.documentElement.scrollLeft = this._scrollLeft;
            document.body.scrollTop = this._scrollTop;
            document.body.scrollLeft = this._scrollLeft;
          }
        },

        /**
         * Constructs the final animation config from different properties used
         * to configure specific parts of the opening and closing animations.
         */
        _updateAnimationConfig: function() {
          // Update the animation node to be the containedElement.
          var animationNode = this.containedElement;
          var animations = [].concat(this.openAnimationConfig || []).concat(this.closeAnimationConfig || []);
          for (var i = 0; i < animations.length; i++) {
            animations[i].node = animationNode;
          }
          this.animationConfig = {
            open: this.openAnimationConfig,
            close: this.closeAnimationConfig
          };
        },

        /**
         * Updates the overlay position based on configured horizontal
         * and vertical alignment.
         */
        _updateOverlayPosition: function() {
          if (this.isAttached) {
            // This triggers iron-resize, and iron-overlay-behavior will call refit if needed.
            this.notifyResize();
          }
        },

        /**
         * Apply focus to focusTarget or containedElement
         */
        _applyFocus: function () {
          var focusTarget = this.focusTarget || this.containedElement;
          if (focusTarget && this.opened && !this.noAutoFocus) {
            focusTarget.focus();
          } else {
            Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this, arguments);
          }
        }
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`<fade-in-animation>` animates the opacity of an element from 0 to 1.

Configuration:
```
{
  name: 'fade-in-animation',
  node: <node>
  timing: <animation-timing>
}
```
-->

<script>

  Polymer({

    is: 'fade-in-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      this._effect = new KeyframeEffect(node, [
        {'opacity': '0'},
        {'opacity': '1'}
      ], this.timingFromConfig(config));
      return this._effect;
    }

  });

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`<fade-out-animation>` animates the opacity of an element from 1 to 0.

Configuration:
```
{
  name: 'fade-out-animation',
  node: <node>
  timing: <animation-timing>
}
```
-->

<script>

  Polymer({

    is: 'fade-out-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      this._effect = new KeyframeEffect(node, [
        {'opacity': '1'},
        {'opacity': '0'}
      ], this.timingFromConfig(config));
      return this._effect;
    }

  });

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><style is="custom-style">

  :root {

    /* Material Design color palette for Google products */

    --google-red-100: #f4c7c3;
    --google-red-300: #e67c73;
    --google-red-500: #db4437;
    --google-red-700: #c53929;

    --google-blue-100: #c6dafc;
    --google-blue-300: #7baaf7;
    --google-blue-500: #4285f4;
    --google-blue-700: #3367d6;

    --google-green-100: #b7e1cd;
    --google-green-300: #57bb8a;
    --google-green-500: #0f9d58;
    --google-green-700: #0b8043;

    --google-yellow-100: #fce8b2;
    --google-yellow-300: #f7cb4d;
    --google-yellow-500: #f4b400;
    --google-yellow-700: #f09300;

    --google-grey-100: #f5f5f5;
    --google-grey-300: #e0e0e0;
    --google-grey-500: #9e9e9e;
    --google-grey-700: #616161;
    
    /* Material Design color palette from online spec document */

    --paper-red-50: #ffebee;
    --paper-red-100: #ffcdd2;
    --paper-red-200: #ef9a9a;
    --paper-red-300: #e57373;
    --paper-red-400: #ef5350;
    --paper-red-500: #f44336;
    --paper-red-600: #e53935;
    --paper-red-700: #d32f2f;
    --paper-red-800: #c62828;
    --paper-red-900: #b71c1c;
    --paper-red-a100: #ff8a80;
    --paper-red-a200: #ff5252;
    --paper-red-a400: #ff1744;
    --paper-red-a700: #d50000;
 
    --paper-pink-50: #fce4ec;
    --paper-pink-100: #f8bbd0;
    --paper-pink-200: #f48fb1;
    --paper-pink-300: #f06292;
    --paper-pink-400: #ec407a;
    --paper-pink-500: #e91e63;
    --paper-pink-600: #d81b60;
    --paper-pink-700: #c2185b;
    --paper-pink-800: #ad1457;
    --paper-pink-900: #880e4f;
    --paper-pink-a100: #ff80ab;
    --paper-pink-a200: #ff4081;
    --paper-pink-a400: #f50057;
    --paper-pink-a700: #c51162;
 
    --paper-purple-50: #f3e5f5;
    --paper-purple-100: #e1bee7;
    --paper-purple-200: #ce93d8;
    --paper-purple-300: #ba68c8;
    --paper-purple-400: #ab47bc;
    --paper-purple-500: #9c27b0;
    --paper-purple-600: #8e24aa;
    --paper-purple-700: #7b1fa2;
    --paper-purple-800: #6a1b9a;
    --paper-purple-900: #4a148c;
    --paper-purple-a100: #ea80fc;
    --paper-purple-a200: #e040fb;
    --paper-purple-a400: #d500f9;
    --paper-purple-a700: #aa00ff;
 
    --paper-deep-purple-50: #ede7f6;
    --paper-deep-purple-100: #d1c4e9;
    --paper-deep-purple-200: #b39ddb;
    --paper-deep-purple-300: #9575cd;
    --paper-deep-purple-400: #7e57c2;
    --paper-deep-purple-500: #673ab7;
    --paper-deep-purple-600: #5e35b1;
    --paper-deep-purple-700: #512da8;
    --paper-deep-purple-800: #4527a0;
    --paper-deep-purple-900: #311b92;
    --paper-deep-purple-a100: #b388ff;
    --paper-deep-purple-a200: #7c4dff;
    --paper-deep-purple-a400: #651fff;
    --paper-deep-purple-a700: #6200ea;
 
    --paper-indigo-50: #e8eaf6;
    --paper-indigo-100: #c5cae9;
    --paper-indigo-200: #9fa8da;
    --paper-indigo-300: #7986cb;
    --paper-indigo-400: #5c6bc0;
    --paper-indigo-500: #3f51b5;
    --paper-indigo-600: #3949ab;
    --paper-indigo-700: #303f9f;
    --paper-indigo-800: #283593;
    --paper-indigo-900: #1a237e;
    --paper-indigo-a100: #8c9eff;
    --paper-indigo-a200: #536dfe;
    --paper-indigo-a400: #3d5afe;
    --paper-indigo-a700: #304ffe;
 
    --paper-blue-50: #e3f2fd;
    --paper-blue-100: #bbdefb;
    --paper-blue-200: #90caf9;
    --paper-blue-300: #64b5f6;
    --paper-blue-400: #42a5f5;
    --paper-blue-500: #2196f3;
    --paper-blue-600: #1e88e5;
    --paper-blue-700: #1976d2;
    --paper-blue-800: #1565c0;
    --paper-blue-900: #0d47a1;
    --paper-blue-a100: #82b1ff;
    --paper-blue-a200: #448aff;
    --paper-blue-a400: #2979ff;
    --paper-blue-a700: #2962ff;
 
    --paper-light-blue-50: #e1f5fe;
    --paper-light-blue-100: #b3e5fc;
    --paper-light-blue-200: #81d4fa;
    --paper-light-blue-300: #4fc3f7;
    --paper-light-blue-400: #29b6f6;
    --paper-light-blue-500: #03a9f4;
    --paper-light-blue-600: #039be5;
    --paper-light-blue-700: #0288d1;
    --paper-light-blue-800: #0277bd;
    --paper-light-blue-900: #01579b;
    --paper-light-blue-a100: #80d8ff;
    --paper-light-blue-a200: #40c4ff;
    --paper-light-blue-a400: #00b0ff;
    --paper-light-blue-a700: #0091ea;
 
    --paper-cyan-50: #e0f7fa;
    --paper-cyan-100: #b2ebf2;
    --paper-cyan-200: #80deea;
    --paper-cyan-300: #4dd0e1;
    --paper-cyan-400: #26c6da;
    --paper-cyan-500: #00bcd4;
    --paper-cyan-600: #00acc1;
    --paper-cyan-700: #0097a7;
    --paper-cyan-800: #00838f;
    --paper-cyan-900: #006064;
    --paper-cyan-a100: #84ffff;
    --paper-cyan-a200: #18ffff;
    --paper-cyan-a400: #00e5ff;
    --paper-cyan-a700: #00b8d4;
 
    --paper-teal-50: #e0f2f1;
    --paper-teal-100: #b2dfdb;
    --paper-teal-200: #80cbc4;
    --paper-teal-300: #4db6ac;
    --paper-teal-400: #26a69a;
    --paper-teal-500: #009688;
    --paper-teal-600: #00897b;
    --paper-teal-700: #00796b;
    --paper-teal-800: #00695c;
    --paper-teal-900: #004d40;
    --paper-teal-a100: #a7ffeb;
    --paper-teal-a200: #64ffda;
    --paper-teal-a400: #1de9b6;
    --paper-teal-a700: #00bfa5;
 
    --paper-green-50: #e8f5e9;
    --paper-green-100: #c8e6c9;
    --paper-green-200: #a5d6a7;
    --paper-green-300: #81c784;
    --paper-green-400: #66bb6a;
    --paper-green-500: #4caf50;
    --paper-green-600: #43a047;
    --paper-green-700: #388e3c;
    --paper-green-800: #2e7d32;
    --paper-green-900: #1b5e20;
    --paper-green-a100: #b9f6ca;
    --paper-green-a200: #69f0ae;
    --paper-green-a400: #00e676;
    --paper-green-a700: #00c853;
 
    --paper-light-green-50: #f1f8e9;
    --paper-light-green-100: #dcedc8;
    --paper-light-green-200: #c5e1a5;
    --paper-light-green-300: #aed581;
    --paper-light-green-400: #9ccc65;
    --paper-light-green-500: #8bc34a;
    --paper-light-green-600: #7cb342;
    --paper-light-green-700: #689f38;
    --paper-light-green-800: #558b2f;
    --paper-light-green-900: #33691e;
    --paper-light-green-a100: #ccff90;
    --paper-light-green-a200: #b2ff59;
    --paper-light-green-a400: #76ff03;
    --paper-light-green-a700: #64dd17;
 
    --paper-lime-50: #f9fbe7;
    --paper-lime-100: #f0f4c3;
    --paper-lime-200: #e6ee9c;
    --paper-lime-300: #dce775;
    --paper-lime-400: #d4e157;
    --paper-lime-500: #cddc39;
    --paper-lime-600: #c0ca33;
    --paper-lime-700: #afb42b;
    --paper-lime-800: #9e9d24;
    --paper-lime-900: #827717;
    --paper-lime-a100: #f4ff81;
    --paper-lime-a200: #eeff41;
    --paper-lime-a400: #c6ff00;
    --paper-lime-a700: #aeea00;
 
    --paper-yellow-50: #fffde7;
    --paper-yellow-100: #fff9c4;
    --paper-yellow-200: #fff59d;
    --paper-yellow-300: #fff176;
    --paper-yellow-400: #ffee58;
    --paper-yellow-500: #ffeb3b;
    --paper-yellow-600: #fdd835;
    --paper-yellow-700: #fbc02d;
    --paper-yellow-800: #f9a825;
    --paper-yellow-900: #f57f17;
    --paper-yellow-a100: #ffff8d;
    --paper-yellow-a200: #ffff00;
    --paper-yellow-a400: #ffea00;
    --paper-yellow-a700: #ffd600;
 
    --paper-amber-50: #fff8e1;
    --paper-amber-100: #ffecb3;
    --paper-amber-200: #ffe082;
    --paper-amber-300: #ffd54f;
    --paper-amber-400: #ffca28;
    --paper-amber-500: #ffc107;
    --paper-amber-600: #ffb300;
    --paper-amber-700: #ffa000;
    --paper-amber-800: #ff8f00;
    --paper-amber-900: #ff6f00;
    --paper-amber-a100: #ffe57f;
    --paper-amber-a200: #ffd740;
    --paper-amber-a400: #ffc400;
    --paper-amber-a700: #ffab00;
 
    --paper-orange-50: #fff3e0;
    --paper-orange-100: #ffe0b2;
    --paper-orange-200: #ffcc80;
    --paper-orange-300: #ffb74d;
    --paper-orange-400: #ffa726;
    --paper-orange-500: #ff9800;
    --paper-orange-600: #fb8c00;
    --paper-orange-700: #f57c00;
    --paper-orange-800: #ef6c00;
    --paper-orange-900: #e65100;
    --paper-orange-a100: #ffd180;
    --paper-orange-a200: #ffab40;
    --paper-orange-a400: #ff9100;
    --paper-orange-a700: #ff6500;
 
    --paper-deep-orange-50: #fbe9e7;
    --paper-deep-orange-100: #ffccbc;
    --paper-deep-orange-200: #ffab91;
    --paper-deep-orange-300: #ff8a65;
    --paper-deep-orange-400: #ff7043;
    --paper-deep-orange-500: #ff5722;
    --paper-deep-orange-600: #f4511e;
    --paper-deep-orange-700: #e64a19;
    --paper-deep-orange-800: #d84315;
    --paper-deep-orange-900: #bf360c;
    --paper-deep-orange-a100: #ff9e80;
    --paper-deep-orange-a200: #ff6e40;
    --paper-deep-orange-a400: #ff3d00;
    --paper-deep-orange-a700: #dd2c00;
 
    --paper-brown-50: #efebe9;
    --paper-brown-100: #d7ccc8;
    --paper-brown-200: #bcaaa4;
    --paper-brown-300: #a1887f;
    --paper-brown-400: #8d6e63;
    --paper-brown-500: #795548;
    --paper-brown-600: #6d4c41;
    --paper-brown-700: #5d4037;
    --paper-brown-800: #4e342e;
    --paper-brown-900: #3e2723;
 
    --paper-grey-50: #fafafa;
    --paper-grey-100: #f5f5f5;
    --paper-grey-200: #eeeeee;
    --paper-grey-300: #e0e0e0;
    --paper-grey-400: #bdbdbd;
    --paper-grey-500: #9e9e9e;
    --paper-grey-600: #757575;
    --paper-grey-700: #616161;
    --paper-grey-800: #424242;
    --paper-grey-900: #212121;
 
    --paper-blue-grey-50: #eceff1;
    --paper-blue-grey-100: #cfd8dc;
    --paper-blue-grey-200: #b0bec5;
    --paper-blue-grey-300: #90a4ae;
    --paper-blue-grey-400: #78909c;
    --paper-blue-grey-500: #607d8b;
    --paper-blue-grey-600: #546e7a;
    --paper-blue-grey-700: #455a64;
    --paper-blue-grey-800: #37474f;
    --paper-blue-grey-900: #263238;

    /* opacity for dark text on a light background */
    --dark-divider-opacity: 0.12;
    --dark-disabled-opacity: 0.38; /* or hint text or icon */
    --dark-secondary-opacity: 0.54;
    --dark-primary-opacity: 0.87;

    /* opacity for light text on a dark background */
    --light-divider-opacity: 0.12;
    --light-disabled-opacity: 0.3; /* or hint text or icon */
    --light-secondary-opacity: 0.7;
    --light-primary-opacity: 1.0;

  }

</style>
<!-- Taken from https://www.google.com/design/spec/style/color.html#color-ui-color-application -->

<style is="custom-style">

  :root {
    /*
     * You can use these generic variables in your elements for easy theming.
     * For example, if all your elements use `--primary-text-color` as its main
     * color, then switching from a light to a dark theme is just a matter of
     * changing the value of `--primary-text-color` in your application.
     */
    --primary-text-color: var(--light-theme-text-color);
    --primary-background-color: var(--light-theme-background-color);
    --secondary-text-color: var(--light-theme-secondary-color);
    --disabled-text-color: var(--light-theme-disabled-color);
    --divider-color: var(--light-theme-divider-color);
    --error-color: var(--paper-deep-orange-a700);

    /*
     * Primary and accent colors. Also see color.html for more colors.
     */
    --primary-color: var(--paper-indigo-500);
    --light-primary-color: var(--paper-indigo-100);
    --dark-primary-color: var(--paper-indigo-700);

    --accent-color: var(--paper-pink-a200);
    --light-accent-color: var(--paper-pink-a100);
    --dark-accent-color: var(--paper-pink-a400);


    /*
     * Material Design Light background theme
     */
    --light-theme-background-color: #ffffff;
    --light-theme-base-color: #000000;
    --light-theme-text-color: var(--paper-grey-900);
    --light-theme-secondary-color: #737373;  /* for secondary text and icons */
    --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
    --light-theme-divider-color: #dbdbdb;

    /*
     * Material Design Dark background theme
     */
    --dark-theme-background-color: var(--paper-grey-900);
    --dark-theme-base-color: #ffffff;
    --dark-theme-text-color: #ffffff;
    --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
    --dark-theme-disabled-color: #646464;  /* disabled/hint text */
    --dark-theme-divider-color: #3c3c3c;

    /*
     * Deprecated values because of their confusing names.
     */
    --text-primary-color: var(--dark-theme-text-color);
    --default-primary-color: var(--primary-color);

  }

</style>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><style is="custom-style">

  :root {

    --shadow-transition: {
      transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    };

    --shadow-none: {
      box-shadow: none;
    };

    /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

    --shadow-elevation-2dp: {
      box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                  0 1px 5px 0 rgba(0, 0, 0, 0.12),
                  0 3px 1px -2px rgba(0, 0, 0, 0.2);
    };

    --shadow-elevation-3dp: {
      box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                  0 1px 8px 0 rgba(0, 0, 0, 0.12),
                  0 3px 3px -2px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-4dp: {
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                  0 1px 10px 0 rgba(0, 0, 0, 0.12),
                  0 2px 4px -1px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-6dp: {
      box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                  0 1px 18px 0 rgba(0, 0, 0, 0.12),
                  0 3px 5px -1px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-8dp: {
      box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                  0 3px 14px 2px rgba(0, 0, 0, 0.12),
                  0 5px 5px -3px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-12dp: {
      box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                  0 4px 22px 3px rgba(0, 0, 0, 0.12),
                  0 6px 7px -4px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-16dp: {
      box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                  0  6px 30px 5px rgba(0, 0, 0, 0.12),
                  0  8px 10px -5px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-24dp: {
      box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                  0 9px 46px 8px rgba(0, 0, 0, 0.12),
                  0 11px 15px -7px rgba(0, 0, 0, 0.4);
    };
  }

</style>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  Polymer({
    is: 'paper-menu-grow-height-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var height = rect.height;

      this._effect = new KeyframeEffect(node, [{
        height: (height / 2) + 'px'
      }, {
        height: height + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  });

  Polymer({
    is: 'paper-menu-grow-width-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var width = rect.width;

      this._effect = new KeyframeEffect(node, [{
        width: (width / 2) + 'px'
      }, {
        width: width + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  });

  Polymer({
    is: 'paper-menu-shrink-width-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var width = rect.width;

      this._effect = new KeyframeEffect(node, [{
        width: width + 'px'
      }, {
        width: width - (width / 20) + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  });

  Polymer({
    is: 'paper-menu-shrink-height-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var height = rect.height;
      var top = rect.top;

      this.setPrefixedProperty(node, 'transformOrigin', '0 0');

      this._effect = new KeyframeEffect(node, [{
        height: height + 'px',
        transform: 'translateY(0)'
      }, {
        height: height / 2 + 'px',
        transform: 'translateY(-20px)'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  });
</script>


<!--
Material design: [Dropdown buttons](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)

`paper-menu-button` allows one to compose a designated "trigger" element with
another element that represents "content", to create a dropdown menu that
displays the "content" when the "trigger" is clicked.

The child element with the class `dropdown-trigger` will be used as the
"trigger" element. The child element with the class `dropdown-content` will be
used as the "content" element.

The `paper-menu-button` is sensitive to its content's `iron-select` events. If
the "content" element triggers an `iron-select` event, the `paper-menu-button`
will close automatically.

Example:

    <paper-menu-button>
      <paper-icon-button icon="menu" class="dropdown-trigger"></paper-icon-button>
      <paper-menu class="dropdown-content">
        <paper-item>Share</paper-item>
        <paper-item>Settings</paper-item>
        <paper-item>Help</paper-item>
      </paper-menu>
    </paper-menu-button>

### Styling

The following custom properties and mixins are also available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-menu-button-dropdown-background` | Background color of the paper-menu-button dropdown | `--primary-background-color`
`--paper-menu-button` | Mixin applied to the paper-menu-button | `{}`
`--paper-menu-button-disabled` | Mixin applied to the paper-menu-button when disabled | `{}`
`--paper-menu-button-dropdown` | Mixin applied to the paper-menu-button dropdown | `{}`
`--paper-menu-button-content` | Mixin applied to the paper-menu-button content | `{}`

@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-menu-button" assetpath="bower_components/paper-menu-button/">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;

        @apply(--paper-menu-button);
      }

      :host([disabled]) {
        cursor: auto;
        color: var(--disabled-text-color);

        @apply(--paper-menu-button-disabled);
      }

      iron-dropdown {
        @apply(--paper-menu-button-dropdown);
      }

      .dropdown-content {
        @apply(--shadow-elevation-2dp);

        position: relative;
        border-radius: 2px;
        background-color: var(--paper-menu-button-dropdown-background, --primary-background-color);

        @apply(--paper-menu-button-content);
      }

      :host([vertical-align="top"]) .dropdown-content {
        margin-bottom: 20px;
        margin-top: -10px;
        top: 10px;
      }

      :host([vertical-align="bottom"]) .dropdown-content {
        bottom: 10px;
        margin-bottom: -10px;
        margin-top: 20px;
      }
      
      #trigger {
        cursor: pointer;
      }
    </style>

    <div id="trigger" on-tap="toggle">
      <content select=".dropdown-trigger"></content>
    </div>

    <iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled">
      <div class="dropdown-content">
        <content id="content" select=".dropdown-content"></content>
      </div>
    </iron-dropdown>
  </template>

  <script>
    (function() {
      'use strict';

      var config = {
        ANIMATION_CUBIC_BEZIER: 'cubic-bezier(.3,.95,.5,1)',
        MAX_ANIMATION_TIME_MS: 400
      };

      var PaperMenuButton = Polymer({
        is: 'paper-menu-button',

        /**
         * Fired when the dropdown opens.
         *
         * @event paper-dropdown-open
         */

        /**
         * Fired when the dropdown closes.
         *
         * @event paper-dropdown-close
         */

        behaviors: [
          Polymer.IronA11yKeysBehavior,
          Polymer.IronControlState
        ],

        properties: {
          /**
           * True if the content is currently displayed.
           */
          opened: {
            type: Boolean,
            value: false,
            notify: true,
            observer: '_openedChanged'
          },

          /**
           * The orientation against which to align the menu dropdown
           * horizontally relative to the dropdown trigger.
           */
          horizontalAlign: {
            type: String,
            value: 'left',
            reflectToAttribute: true
          },

          /**
           * The orientation against which to align the menu dropdown
           * vertically relative to the dropdown trigger.
           */
          verticalAlign: {
            type: String,
            value: 'top',
            reflectToAttribute: true
          },

          /**
           * If true, the `horizontalAlign` and `verticalAlign` properties will
           * be considered preferences instead of strict requirements when
           * positioning the dropdown and may be changed if doing so reduces
           * the area of the dropdown falling outside of `fitInto`.
           */
          dynamicAlign: {
            type: Boolean
          },

          /**
           * A pixel value that will be added to the position calculated for the
           * given `horizontalAlign`. Use a negative value to offset to the
           * left, or a positive value to offset to the right.
           */
          horizontalOffset: {
            type: Number,
            value: 0,
            notify: true
          },

          /**
           * A pixel value that will be added to the position calculated for the
           * given `verticalAlign`. Use a negative value to offset towards the
           * top, or a positive value to offset towards the bottom.
           */
          verticalOffset: {
            type: Number,
            value: 0,
            notify: true
          },

          /**
           * If true, the dropdown will be positioned so that it doesn't overlap
           * the button.
           */
          noOverlap: {
            type: Boolean
          },

          /**
           * Set to true to disable animations when opening and closing the
           * dropdown.
           */
          noAnimations: {
            type: Boolean,
            value: false
          },

          /**
           * Set to true to disable automatically closing the dropdown after
           * a selection has been made.
           */
          ignoreSelect: {
            type: Boolean,
            value: false
          },

          /**
           * Set to true to enable automatically closing the dropdown after an
           * item has been activated, even if the selection did not change.
           */
          closeOnActivate: {
            type: Boolean,
            value: false
          },

          /**
           * An animation config. If provided, this will be used to animate the
           * opening of the dropdown.
           */
          openAnimationConfig: {
            type: Object,
            value: function() {
              return [{
                name: 'fade-in-animation',
                timing: {
                  delay: 100,
                  duration: 200
                }
              }, {
                name: 'paper-menu-grow-width-animation',
                timing: {
                  delay: 100,
                  duration: 150,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }, {
                name: 'paper-menu-grow-height-animation',
                timing: {
                  delay: 100,
                  duration: 275,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }];
            }
          },

          /**
           * An animation config. If provided, this will be used to animate the
           * closing of the dropdown.
           */
          closeAnimationConfig: {
            type: Object,
            value: function() {
              return [{
                name: 'fade-out-animation',
                timing: {
                  duration: 150
                }
              }, {
                name: 'paper-menu-shrink-width-animation',
                timing: {
                  delay: 100,
                  duration: 50,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }, {
                name: 'paper-menu-shrink-height-animation',
                timing: {
                  duration: 200,
                  easing: 'ease-in'
                }
              }];
            }
          },

          /**
           * By default, the dropdown will constrain scrolling on the page
           * to itself when opened.
           * Set to true in order to prevent scroll from being constrained
           * to the dropdown when it opens.
           */
          allowOutsideScroll: {
            type: Boolean,
            value: false
          },

          /**
           * Whether focus should be restored to the button when the menu closes.
           */
          restoreFocusOnClose: {
            type: Boolean,
            value: true
          },

          /**
           * This is the element intended to be bound as the focus target
           * for the `iron-dropdown` contained by `paper-menu-button`.
           */
          _dropdownContent: {
            type: Object
          }
        },

        hostAttributes: {
          role: 'group',
          'aria-haspopup': 'true'
        },

        listeners: {
          'iron-activate': '_onIronActivate',
          'iron-select': '_onIronSelect'
        },

        /**
         * The content element that is contained by the menu button, if any.
         */
        get contentElement() {
          return Polymer.dom(this.$.content).getDistributedNodes()[0];
        },

        /**
         * Toggles the drowpdown content between opened and closed.
         */
        toggle: function() {
          if (this.opened) {
            this.close();
          } else {
            this.open();
          }
        },

        /**
         * Make the dropdown content appear as an overlay positioned relative
         * to the dropdown trigger.
         */
        open: function() {
          if (this.disabled) {
            return;
          }

          this.$.dropdown.open();
        },

        /**
         * Hide the dropdown content.
         */
        close: function() {
          this.$.dropdown.close();
        },

        /**
         * When an `iron-select` event is received, the dropdown should
         * automatically close on the assumption that a value has been chosen.
         *
         * @param {CustomEvent} event A CustomEvent instance with type
         * set to `"iron-select"`.
         */
        _onIronSelect: function(event) {
          if (!this.ignoreSelect) {
            this.close();
          }
        },

        /**
         * Closes the dropdown when an `iron-activate` event is received if
         * `closeOnActivate` is true.
         *
         * @param {CustomEvent} event A CustomEvent of type 'iron-activate'.
         */
        _onIronActivate: function(event) {
          if (this.closeOnActivate) {
            this.close();
          }
        },

        /**
         * When the dropdown opens, the `paper-menu-button` fires `paper-open`.
         * When the dropdown closes, the `paper-menu-button` fires `paper-close`.
         *
         * @param {boolean} opened True if the dropdown is opened, otherwise false.
         * @param {boolean} oldOpened The previous value of `opened`.
         */
        _openedChanged: function(opened, oldOpened) {
          if (opened) {
            // TODO(cdata): Update this when we can measure changes in distributed
            // children in an idiomatic way.
            // We poke this property in case the element has changed. This will
            // cause the focus target for the `iron-dropdown` to be updated as
            // necessary:
            this._dropdownContent = this.contentElement;
            this.fire('paper-dropdown-open');
          } else if (oldOpened != null) {
            this.fire('paper-dropdown-close');
          }
        },

        /**
         * If the dropdown is open when disabled becomes true, close the
         * dropdown.
         *
         * @param {boolean} disabled True if disabled, otherwise false.
         */
        _disabledChanged: function(disabled) {
          Polymer.IronControlState._disabledChanged.apply(this, arguments);
          if (disabled && this.opened) {
            this.close();
          }
        },

        __onIronOverlayCanceled: function(event) {
          var uiEvent = event.detail;
          var target = Polymer.dom(uiEvent).rootTarget;
          var trigger = this.$.trigger;
          var path = Polymer.dom(uiEvent).path;

          if (path.indexOf(trigger) > -1) {
            event.preventDefault();
          }
        }
      });

      Object.keys(config).forEach(function (key) {
        PaperMenuButton[key] = config[key];
      });

      Polymer.PaperMenuButton = PaperMenuButton;
    })();
  </script>
</dom-module>
<!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Material design: [Surface reaction](https://www.google.com/design/spec/animation/responsive-interaction.html#responsive-interaction-surface-reaction)

`paper-ripple` provides a visual effect that other paper elements can
use to simulate a rippling effect emanating from the point of contact.  The
effect can be visualized as a concentric circle with motion.

Example:

    <div style="position:relative">
      <paper-ripple></paper-ripple>
    </div>

Note, it's important that the parent container of the ripple be relative position, otherwise
the ripple will emanate outside of the desired container.

`paper-ripple` listens to "mousedown" and "mouseup" events so it would display ripple
effect when touches on it.  You can also defeat the default behavior and
manually route the down and up actions to the ripple element.  Note that it is
important if you call `downAction()` you will have to make sure to call
`upAction()` so that `paper-ripple` would end the animation loop.

Example:

    <paper-ripple id="ripple" style="pointer-events: none;"></paper-ripple>
    ...
    downAction: function(e) {
      this.$.ripple.downAction({detail: {x: e.x, y: e.y}});
    },
    upAction: function(e) {
      this.$.ripple.upAction();
    }

Styling ripple effect:

  Use CSS color property to style the ripple:

    paper-ripple {
      color: #4285f4;
    }

  Note that CSS color property is inherited so it is not required to set it on
  the `paper-ripple` element directly.

By default, the ripple is centered on the point of contact.  Apply the `recenters`
attribute to have the ripple grow toward the center of its container.

    <paper-ripple recenters></paper-ripple>

You can also  center the ripple inside its container from the start.

    <paper-ripple center></paper-ripple>

Apply `circle` class to make the rippling effect within a circle.

    <paper-ripple class="circle"></paper-ripple>

@group Paper Elements
@element paper-ripple
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-ripple" assetpath="bower_components/paper-ripple/">

  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
  </template>
</dom-module>
<script>
  (function() {
    var Utility = {
      distance: function(x1, y1, x2, y2) {
        var xDelta = (x1 - x2);
        var yDelta = (y1 - y2);

        return Math.sqrt(xDelta * xDelta + yDelta * yDelta);
      },

      now: window.performance && window.performance.now ?
          window.performance.now.bind(window.performance) : Date.now
    };

    /**
     * @param {HTMLElement} element
     * @constructor
     */
    function ElementMetrics(element) {
      this.element = element;
      this.width = this.boundingRect.width;
      this.height = this.boundingRect.height;

      this.size = Math.max(this.width, this.height);
    }

    ElementMetrics.prototype = {
      get boundingRect () {
        return this.element.getBoundingClientRect();
      },

      furthestCornerDistanceFrom: function(x, y) {
        var topLeft = Utility.distance(x, y, 0, 0);
        var topRight = Utility.distance(x, y, this.width, 0);
        var bottomLeft = Utility.distance(x, y, 0, this.height);
        var bottomRight = Utility.distance(x, y, this.width, this.height);

        return Math.max(topLeft, topRight, bottomLeft, bottomRight);
      }
    };

    /**
     * @param {HTMLElement} element
     * @constructor
     */
    function Ripple(element) {
      this.element = element;
      this.color = window.getComputedStyle(element).color;

      this.wave = document.createElement('div');
      this.waveContainer = document.createElement('div');
      this.wave.style.backgroundColor = this.color;
      this.wave.classList.add('wave');
      this.waveContainer.classList.add('wave-container');
      Polymer.dom(this.waveContainer).appendChild(this.wave);

      this.resetInteractionState();
    }

    Ripple.MAX_RADIUS = 300;

    Ripple.prototype = {
      get recenters() {
        return this.element.recenters;
      },

      get center() {
        return this.element.center;
      },

      get mouseDownElapsed() {
        var elapsed;

        if (!this.mouseDownStart) {
          return 0;
        }

        elapsed = Utility.now() - this.mouseDownStart;

        if (this.mouseUpStart) {
          elapsed -= this.mouseUpElapsed;
        }

        return elapsed;
      },

      get mouseUpElapsed() {
        return this.mouseUpStart ?
          Utility.now () - this.mouseUpStart : 0;
      },

      get mouseDownElapsedSeconds() {
        return this.mouseDownElapsed / 1000;
      },

      get mouseUpElapsedSeconds() {
        return this.mouseUpElapsed / 1000;
      },

      get mouseInteractionSeconds() {
        return this.mouseDownElapsedSeconds + this.mouseUpElapsedSeconds;
      },

      get initialOpacity() {
        return this.element.initialOpacity;
      },

      get opacityDecayVelocity() {
        return this.element.opacityDecayVelocity;
      },

      get radius() {
        var width2 = this.containerMetrics.width * this.containerMetrics.width;
        var height2 = this.containerMetrics.height * this.containerMetrics.height;
        var waveRadius = Math.min(
          Math.sqrt(width2 + height2),
          Ripple.MAX_RADIUS
        ) * 1.1 + 5;

        var duration = 1.1 - 0.2 * (waveRadius / Ripple.MAX_RADIUS);
        var timeNow = this.mouseInteractionSeconds / duration;
        var size = waveRadius * (1 - Math.pow(80, -timeNow));

        return Math.abs(size);
      },

      get opacity() {
        if (!this.mouseUpStart) {
          return this.initialOpacity;
        }

        return Math.max(
          0,
          this.initialOpacity - this.mouseUpElapsedSeconds * this.opacityDecayVelocity
        );
      },

      get outerOpacity() {
        // Linear increase in background opacity, capped at the opacity
        // of the wavefront (waveOpacity).
        var outerOpacity = this.mouseUpElapsedSeconds * 0.3;
        var waveOpacity = this.opacity;

        return Math.max(
          0,
          Math.min(outerOpacity, waveOpacity)
        );
      },

      get isOpacityFullyDecayed() {
        return this.opacity < 0.01 &&
          this.radius >= Math.min(this.maxRadius, Ripple.MAX_RADIUS);
      },

      get isRestingAtMaxRadius() {
        return this.opacity >= this.initialOpacity &&
          this.radius >= Math.min(this.maxRadius, Ripple.MAX_RADIUS);
      },

      get isAnimationComplete() {
        return this.mouseUpStart ?
          this.isOpacityFullyDecayed : this.isRestingAtMaxRadius;
      },

      get translationFraction() {
        return Math.min(
          1,
          this.radius / this.containerMetrics.size * 2 / Math.sqrt(2)
        );
      },

      get xNow() {
        if (this.xEnd) {
          return this.xStart + this.translationFraction * (this.xEnd - this.xStart);
        }

        return this.xStart;
      },

      get yNow() {
        if (this.yEnd) {
          return this.yStart + this.translationFraction * (this.yEnd - this.yStart);
        }

        return this.yStart;
      },

      get isMouseDown() {
        return this.mouseDownStart && !this.mouseUpStart;
      },

      resetInteractionState: function() {
        this.maxRadius = 0;
        this.mouseDownStart = 0;
        this.mouseUpStart = 0;

        this.xStart = 0;
        this.yStart = 0;
        this.xEnd = 0;
        this.yEnd = 0;
        this.slideDistance = 0;

        this.containerMetrics = new ElementMetrics(this.element);
      },

      draw: function() {
        var scale;
        var translateString;
        var dx;
        var dy;

        this.wave.style.opacity = this.opacity;

        scale = this.radius / (this.containerMetrics.size / 2);
        dx = this.xNow - (this.containerMetrics.width / 2);
        dy = this.yNow - (this.containerMetrics.height / 2);


        // 2d transform for safari because of border-radius and overflow:hidden clipping bug.
        // https://bugs.webkit.org/show_bug.cgi?id=98538
        this.waveContainer.style.webkitTransform = 'translate(' + dx + 'px, ' + dy + 'px)';
        this.waveContainer.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0)';
        this.wave.style.webkitTransform = 'scale(' + scale + ',' + scale + ')';
        this.wave.style.transform = 'scale3d(' + scale + ',' + scale + ',1)';
      },

      /** @param {Event=} event */
      downAction: function(event) {
        var xCenter = this.containerMetrics.width / 2;
        var yCenter = this.containerMetrics.height / 2;

        this.resetInteractionState();
        this.mouseDownStart = Utility.now();

        if (this.center) {
          this.xStart = xCenter;
          this.yStart = yCenter;
          this.slideDistance = Utility.distance(
            this.xStart, this.yStart, this.xEnd, this.yEnd
          );
        } else {
          this.xStart = event ?
              event.detail.x - this.containerMetrics.boundingRect.left :
              this.containerMetrics.width / 2;
          this.yStart = event ?
              event.detail.y - this.containerMetrics.boundingRect.top :
              this.containerMetrics.height / 2;
        }

        if (this.recenters) {
          this.xEnd = xCenter;
          this.yEnd = yCenter;
          this.slideDistance = Utility.distance(
            this.xStart, this.yStart, this.xEnd, this.yEnd
          );
        }

        this.maxRadius = this.containerMetrics.furthestCornerDistanceFrom(
          this.xStart,
          this.yStart
        );

        this.waveContainer.style.top =
          (this.containerMetrics.height - this.containerMetrics.size) / 2 + 'px';
        this.waveContainer.style.left =
          (this.containerMetrics.width - this.containerMetrics.size) / 2 + 'px';

        this.waveContainer.style.width = this.containerMetrics.size + 'px';
        this.waveContainer.style.height = this.containerMetrics.size + 'px';
      },

      /** @param {Event=} event */
      upAction: function(event) {
        if (!this.isMouseDown) {
          return;
        }

        this.mouseUpStart = Utility.now();
      },

      remove: function() {
        Polymer.dom(this.waveContainer.parentNode).removeChild(
          this.waveContainer
        );
      }
    };

    Polymer({
      is: 'paper-ripple',

      behaviors: [
        Polymer.IronA11yKeysBehavior
      ],

      properties: {
        /**
         * The initial opacity set on the wave.
         *
         * @attribute initialOpacity
         * @type number
         * @default 0.25
         */
        initialOpacity: {
          type: Number,
          value: 0.25
        },

        /**
         * How fast (opacity per second) the wave fades out.
         *
         * @attribute opacityDecayVelocity
         * @type number
         * @default 0.8
         */
        opacityDecayVelocity: {
          type: Number,
          value: 0.8
        },

        /**
         * If true, ripples will exhibit a gravitational pull towards
         * the center of their container as they fade away.
         *
         * @attribute recenters
         * @type boolean
         * @default false
         */
        recenters: {
          type: Boolean,
          value: false
        },

        /**
         * If true, ripples will center inside its container
         *
         * @attribute recenters
         * @type boolean
         * @default false
         */
        center: {
          type: Boolean,
          value: false
        },

        /**
         * A list of the visual ripples.
         *
         * @attribute ripples
         * @type Array
         * @default []
         */
        ripples: {
          type: Array,
          value: function() {
            return [];
          }
        },

        /**
         * True when there are visible ripples animating within the
         * element.
         */
        animating: {
          type: Boolean,
          readOnly: true,
          reflectToAttribute: true,
          value: false
        },

        /**
         * If true, the ripple will remain in the "down" state until `holdDown`
         * is set to false again.
         */
        holdDown: {
          type: Boolean,
          value: false,
          observer: '_holdDownChanged'
        },

        /**
         * If true, the ripple will not generate a ripple effect
         * via pointer interaction.
         * Calling ripple's imperative api like `simulatedRipple` will
         * still generate the ripple effect.
         */
        noink: {
          type: Boolean,
          value: false
        },

        _animating: {
          type: Boolean
        },

        _boundAnimate: {
          type: Function,
          value: function() {
            return this.animate.bind(this);
          }
        }
      },

      get target () {
        return this.keyEventTarget;
      },

      keyBindings: {
        'enter:keydown': '_onEnterKeydown',
        'space:keydown': '_onSpaceKeydown',
        'space:keyup': '_onSpaceKeyup'
      },

      attached: function() {
        // Set up a11yKeysBehavior to listen to key events on the target,
        // so that space and enter activate the ripple even if the target doesn't
        // handle key events. The key handlers deal with `noink` themselves.
        if (this.parentNode.nodeType == 11) { // DOCUMENT_FRAGMENT_NODE
          this.keyEventTarget = Polymer.dom(this).getOwnerRoot().host;
        } else {
          this.keyEventTarget = this.parentNode;
        }
        var keyEventTarget = /** @type {!EventTarget} */ (this.keyEventTarget);
        this.listen(keyEventTarget, 'up', 'uiUpAction');
        this.listen(keyEventTarget, 'down', 'uiDownAction');
      },

      detached: function() {
        this.unlisten(this.keyEventTarget, 'up', 'uiUpAction');
        this.unlisten(this.keyEventTarget, 'down', 'uiDownAction');
        this.keyEventTarget = null;
      },

      get shouldKeepAnimating () {
        for (var index = 0; index < this.ripples.length; ++index) {
          if (!this.ripples[index].isAnimationComplete) {
            return true;
          }
        }

        return false;
      },

      simulatedRipple: function() {
        this.downAction(null);

        // Please see polymer/polymer#1305
        this.async(function() {
          this.upAction();
        }, 1);
      },

      /**
       * Provokes a ripple down effect via a UI event,
       * respecting the `noink` property.
       * @param {Event=} event
       */
      uiDownAction: function(event) {
        if (!this.noink) {
          this.downAction(event);
        }
      },

      /**
       * Provokes a ripple down effect via a UI event,
       * *not* respecting the `noink` property.
       * @param {Event=} event
       */
      downAction: function(event) {
        if (this.holdDown && this.ripples.length > 0) {
          return;
        }

        var ripple = this.addRipple();

        ripple.downAction(event);

        if (!this._animating) {
          this._animating = true;
          this.animate();
        }
      },

      /**
       * Provokes a ripple up effect via a UI event,
       * respecting the `noink` property.
       * @param {Event=} event
       */
      uiUpAction: function(event) {
        if (!this.noink) {
          this.upAction(event);
        }
      },

      /**
       * Provokes a ripple up effect via a UI event,
       * *not* respecting the `noink` property.
       * @param {Event=} event
       */
      upAction: function(event) {
        if (this.holdDown) {
          return;
        }

        this.ripples.forEach(function(ripple) {
          ripple.upAction(event);
        });

        this._animating = true;
        this.animate();
      },

      onAnimationComplete: function() {
        this._animating = false;
        this.$.background.style.backgroundColor = null;
        this.fire('transitionend');
      },

      addRipple: function() {
        var ripple = new Ripple(this);

        Polymer.dom(this.$.waves).appendChild(ripple.waveContainer);
        this.$.background.style.backgroundColor = ripple.color;
        this.ripples.push(ripple);

        this._setAnimating(true);

        return ripple;
      },

      removeRipple: function(ripple) {
        var rippleIndex = this.ripples.indexOf(ripple);

        if (rippleIndex < 0) {
          return;
        }

        this.ripples.splice(rippleIndex, 1);

        ripple.remove();

        if (!this.ripples.length) {
          this._setAnimating(false);
        }
      },

      /**
       * This conflicts with Element#antimate().
       * https://developer.mozilla.org/en-US/docs/Web/API/Element/animate
       * @suppress {checkTypes}
       */
      animate: function() {
        if (!this._animating) {
          return;
        }
        var index;
        var ripple;

        for (index = 0; index < this.ripples.length; ++index) {
          ripple = this.ripples[index];

          ripple.draw();

          this.$.background.style.opacity = ripple.outerOpacity;

          if (ripple.isOpacityFullyDecayed && !ripple.isRestingAtMaxRadius) {
            this.removeRipple(ripple);
          }
        }

        if (!this.shouldKeepAnimating && this.ripples.length === 0) {
          this.onAnimationComplete();
        } else {
          window.requestAnimationFrame(this._boundAnimate);
        }
      },

      _onEnterKeydown: function() {
        this.uiDownAction();
        this.async(this.uiUpAction, 1);
      },

      _onSpaceKeydown: function() {
        this.uiDownAction();
      },

      _onSpaceKeyup: function() {
        this.uiUpAction();
      },

      // note: holdDown does not respect noink since it can be a focus based
      // effect.
      _holdDownChanged: function(newVal, oldVal) {
        if (oldVal === undefined) {
          return;
        }
        if (newVal) {
          this.downAction();
        } else {
          this.upAction();
        }
      }

      /**
      Fired when the animation finishes.
      This is useful if you want to wait until
      the ripple animation finishes to perform some action.

      @event transitionend
      @param {{node: Object}} detail Contains the animated node.
      */
    });
  })();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
The `<iron-flex-layout>` component provides simple ways to use
[CSS flexible box layout](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes),
also known as flexbox. This component provides two different ways to use flexbox:

1. [Layout classes](https://github.com/PolymerElements/iron-flex-layout/tree/master/iron-flex-layout-classes.html).
The layout class stylesheet provides a simple set of class-based flexbox rules, that
let you specify layout properties directly in markup. You must include this file
in every element that needs to use them.

    Sample use:

    ```
    <custom-element-demo>
      <template>
        <script src="../webcomponentsjs/webcomponents-lite.js"></script>
        <next-code-block></next-code-block>
      </template>
    </custom-element-demo>
    ```

    ```html
    <link rel="import" href="iron-flex-layout-classes.html">
    <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    <style>
      .test { width: 100px; }
    </style>
    <div class="layout horizontal center-center">
      <div class="test">horizontal layout center alignment</div>
    </div>
    ```

2. [Custom CSS mixins](https://github.com/PolymerElements/iron-flex-layout/blob/master/iron-flex-layout.html).
The mixin stylesheet includes custom CSS mixins that can be applied inside a CSS rule using the `@apply` function.

Please note that the old [/deep/ layout classes](https://github.com/PolymerElements/iron-flex-layout/tree/master/classes)
are deprecated, and should not be used. To continue using layout properties
directly in markup, please switch to using the new `dom-module`-based
[layout classes](https://github.com/PolymerElements/iron-flex-layout/tree/master/iron-flex-layout-classes.html).
Please note that the new version does not use `/deep/`, and therefore requires you
to import the `dom-modules` in every element that needs to use them.

A complete [guide](https://elements.polymer-project.org/guides/flex-layout) to `<iron-flex-layout>` is available.

@group Iron Elements
@pseudoElement iron-flex-layout
@demo demo/index.html
-->

<style>
  /* IE 10 support for HTML5 hidden attr */
  [hidden] {
    display: none !important;
  }
</style>

<style is="custom-style">
  :root {

    --layout: {
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    };

    --layout-inline: {
      display: -ms-inline-flexbox;
      display: -webkit-inline-flex;
      display: inline-flex;
    };

    --layout-horizontal: {
      @apply(--layout);

      -ms-flex-direction: row;
      -webkit-flex-direction: row;
      flex-direction: row;
    };

    --layout-horizontal-reverse: {
      @apply(--layout);

      -ms-flex-direction: row-reverse;
      -webkit-flex-direction: row-reverse;
      flex-direction: row-reverse;
    };

    --layout-vertical: {
      @apply(--layout);

      -ms-flex-direction: column;
      -webkit-flex-direction: column;
      flex-direction: column;
    };

    --layout-vertical-reverse: {
      @apply(--layout);

      -ms-flex-direction: column-reverse;
      -webkit-flex-direction: column-reverse;
      flex-direction: column-reverse;
    };

    --layout-wrap: {
      -ms-flex-wrap: wrap;
      -webkit-flex-wrap: wrap;
      flex-wrap: wrap;
    };

    --layout-no-wrap: {
      -ms-flex-wrap: nowrap;
      -webkit-flex-wrap: nowrap;
      flex-wrap: nowrap;
    };

    --layout-wrap-reverse: {
      -ms-flex-wrap: wrap-reverse;
      -webkit-flex-wrap: wrap-reverse;
      flex-wrap: wrap-reverse;
    };

    --layout-flex-auto: {
      -ms-flex: 1 1 auto;
      -webkit-flex: 1 1 auto;
      flex: 1 1 auto;
    };

    --layout-flex-none: {
      -ms-flex: none;
      -webkit-flex: none;
      flex: none;
    };

    --layout-flex: {
      -ms-flex: 1 1 0.000000001px;
      -webkit-flex: 1;
      flex: 1;
      -webkit-flex-basis: 0.000000001px;
      flex-basis: 0.000000001px;
    };

    --layout-flex-2: {
      -ms-flex: 2;
      -webkit-flex: 2;
      flex: 2;
    };

    --layout-flex-3: {
      -ms-flex: 3;
      -webkit-flex: 3;
      flex: 3;
    };

    --layout-flex-4: {
      -ms-flex: 4;
      -webkit-flex: 4;
      flex: 4;
    };

    --layout-flex-5: {
      -ms-flex: 5;
      -webkit-flex: 5;
      flex: 5;
    };

    --layout-flex-6: {
      -ms-flex: 6;
      -webkit-flex: 6;
      flex: 6;
    };

    --layout-flex-7: {
      -ms-flex: 7;
      -webkit-flex: 7;
      flex: 7;
    };

    --layout-flex-8: {
      -ms-flex: 8;
      -webkit-flex: 8;
      flex: 8;
    };

    --layout-flex-9: {
      -ms-flex: 9;
      -webkit-flex: 9;
      flex: 9;
    };

    --layout-flex-10: {
      -ms-flex: 10;
      -webkit-flex: 10;
      flex: 10;
    };

    --layout-flex-11: {
      -ms-flex: 11;
      -webkit-flex: 11;
      flex: 11;
    };

    --layout-flex-12: {
      -ms-flex: 12;
      -webkit-flex: 12;
      flex: 12;
    };

    /* alignment in cross axis */

    --layout-start: {
      -ms-flex-align: start;
      -webkit-align-items: flex-start;
      align-items: flex-start;
    };

    --layout-center: {
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
    };

    --layout-end: {
      -ms-flex-align: end;
      -webkit-align-items: flex-end;
      align-items: flex-end;
    };

    --layout-baseline: {
      -ms-flex-align: baseline;
      -webkit-align-items: baseline;
      align-items: baseline;
    };

    /* alignment in main axis */

    --layout-start-justified: {
      -ms-flex-pack: start;
      -webkit-justify-content: flex-start;
      justify-content: flex-start;
    };

    --layout-center-justified: {
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      justify-content: center;
    };

    --layout-end-justified: {
      -ms-flex-pack: end;
      -webkit-justify-content: flex-end;
      justify-content: flex-end;
    };

    --layout-around-justified: {
      -ms-flex-pack: distribute;
      -webkit-justify-content: space-around;
      justify-content: space-around;
    };

    --layout-justified: {
      -ms-flex-pack: justify;
      -webkit-justify-content: space-between;
      justify-content: space-between;
    };

    --layout-center-center: {
      @apply(--layout-center);
      @apply(--layout-center-justified);
    };

    /* self alignment */

    --layout-self-start: {
      -ms-align-self: flex-start;
      -webkit-align-self: flex-start;
      align-self: flex-start;
    };

    --layout-self-center: {
      -ms-align-self: center;
      -webkit-align-self: center;
      align-self: center;
    };

    --layout-self-end: {
      -ms-align-self: flex-end;
      -webkit-align-self: flex-end;
      align-self: flex-end;
    };

    --layout-self-stretch: {
      -ms-align-self: stretch;
      -webkit-align-self: stretch;
      align-self: stretch;
    };

    --layout-self-baseline: {
      -ms-align-self: baseline;
      -webkit-align-self: baseline;
      align-self: baseline;
    };

    /* multi-line alignment in main axis */

    --layout-start-aligned: {
      -ms-flex-line-pack: start;  /* IE10 */
      -ms-align-content: flex-start;
      -webkit-align-content: flex-start;
      align-content: flex-start;
    };

    --layout-end-aligned: {
      -ms-flex-line-pack: end;  /* IE10 */
      -ms-align-content: flex-end;
      -webkit-align-content: flex-end;
      align-content: flex-end;
    };

    --layout-center-aligned: {
      -ms-flex-line-pack: center;  /* IE10 */
      -ms-align-content: center;
      -webkit-align-content: center;
      align-content: center;
    };

    --layout-between-aligned: {
      -ms-flex-line-pack: justify;  /* IE10 */
      -ms-align-content: space-between;
      -webkit-align-content: space-between;
      align-content: space-between;
    };

    --layout-around-aligned: {
      -ms-flex-line-pack: distribute;  /* IE10 */
      -ms-align-content: space-around;
      -webkit-align-content: space-around;
      align-content: space-around;
    };

    /*******************************
              Other Layout
    *******************************/

    --layout-block: {
      display: block;
    };

    --layout-invisible: {
      visibility: hidden !important;
    };

    --layout-relative: {
      position: relative;
    };

    --layout-fit: {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    };

    --layout-scroll: {
      -webkit-overflow-scrolling: touch;
      overflow: auto;
    };

    --layout-fullbleed: {
      margin: 0;
      height: 100vh;
    };

    /* fixed position */

    --layout-fixed-top: {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
    };

    --layout-fixed-right: {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
    };

    --layout-fixed-bottom: {
      position: fixed;
      right: 0;
      bottom: 0;
      left: 0;
    };

    --layout-fixed-left: {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
    };

  }

</style>
<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`iron-media-query` can be used to data bind to a CSS media query.
The `query` property is a bare CSS media query.
The `query-matches` property is a boolean representing whether the page matches that media query.

Example:

    <iron-media-query query="(min-width: 600px)" query-matches="{{queryMatches}}"></iron-media-query>

@group Iron Elements
@demo demo/index.html
@hero hero.svg
@element iron-media-query
-->

<script>

  Polymer({

    is: 'iron-media-query',

    properties: {

      /**
       * The Boolean return value of the media query.
       */
      queryMatches: {
        type: Boolean,
        value: false,
        readOnly: true,
        notify: true
      },

      /**
       * The CSS media query to evaluate.
       */
      query: {
        type: String,
        observer: 'queryChanged'
      },

      /**
       * If true, the query attribute is assumed to be a complete media query
       * string rather than a single media feature.
       */
      full: {
        type: Boolean,
        value: false
      },

      /**
       * @type {function(MediaQueryList)}
       */
      _boundMQHandler: {
        value: function() {
          return this.queryHandler.bind(this);
        }
      },

      /**
       * @type {MediaQueryList}
       */
      _mq: {
        value: null
      }
    },

    attached: function() {
      this.style.display = 'none';
      this.queryChanged();
    },

    detached: function() {
      this._remove();
    },

    _add: function() {
      if (this._mq) {
        this._mq.addListener(this._boundMQHandler);
      }
    },

    _remove: function() {
      if (this._mq) {
        this._mq.removeListener(this._boundMQHandler);
      }
      this._mq = null;
    },

    queryChanged: function() {
      this._remove();
      var query = this.query;
      if (!query) {
        return;
      }
      if (!this.full && query[0] !== '(') {
        query = '(' + query + ')';
      }
      this._mq = window.matchMedia(query);
      this._add();
      this.queryHandler(this._mq);
    },

    queryHandler: function(mq) {
      this._setQueryMatches(mq.matches);
    }

  });

</script>
<!--
@license
Copyright 2016 Pawel Psztyc, The ARC team
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--

The `iron-icon` element displays an icon. By default an icon renders as a 24px square.

Example using src:

    <iron-icon src="star.png"></iron-icon>

Example setting size to 32px x 32px:

    <iron-icon class="big" src="big_star.png"></iron-icon>

    <style is="custom-style">
      .big {
        --iron-icon-height: 32px;
        --iron-icon-width: 32px;
      }
    </style>

The iron elements include several sets of icons.
To use the default set of icons, import `iron-icons.html` and use the `icon` attribute to specify an icon:

    <link rel="import" href="/components/iron-icons/iron-icons.html">

    <iron-icon icon="menu"></iron-icon>

To use a different built-in set of icons, import the specific `iron-icons/<iconset>-icons.html`, and
specify the icon as `<iconset>:<icon>`. For example, to use a communication icon, you would
use:

    <link rel="import" href="/components/iron-icons/communication-icons.html">

    <iron-icon icon="communication:email"></iron-icon>

You can also create custom icon sets of bitmap or SVG icons.

Example of using an icon named `cherry` from a custom iconset with the ID `fruit`:

    <iron-icon icon="fruit:cherry"></iron-icon>

See [iron-iconset](iron-iconset) and [iron-iconset-svg](iron-iconset-svg) for more information about
how to create a custom iconset.

See the [iron-icons demo](iron-icons?view=demo:demo/index.html) to see the icons available
in the various iconsets.

To load a subset of icons from one of the default `iron-icons` sets, you can
use the [poly-icon](https://poly-icon.appspot.com/) tool. It allows you
to select individual icons, and creates an iconset from them that you can
use directly in your elements.

### Styling

The following custom properties are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--iron-icon` | Mixin applied to the icon | {}
`--iron-icon-width` | Width of the icon | `24px`
`--iron-icon-height` | Height of the icon | `24px`
`--iron-icon-fill-color` | Fill color of the svg icon | `currentcolor`
`--iron-icon-stroke-color` | Stroke color of the svg icon | none

@group Iron Elements
@element iron-icon
@demo demo/index.html
@hero hero.svg
@homepage polymer.github.io
-->

<dom-module id="iron-icon" assetpath="bower_components/iron-icon/">
  <template>
    <style>
      :host {
        @apply(--layout-inline);
        @apply(--layout-center-center);
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply(--iron-icon);
      }
    </style>
  </template>

  <script>

    Polymer({

      is: 'iron-icon',

      properties: {

        /**
         * The name of the icon to use. The name should be of the form:
         * `iconset_name:icon_name`.
         */
        icon: {
          type: String
        },

        /**
         * The name of the theme to used, if one is specified by the
         * iconset.
         */
        theme: {
          type: String
        },

        /**
         * If using iron-icon without an iconset, you can set the src to be
         * the URL of an individual icon image file. Note that this will take
         * precedence over a given icon attribute.
         */
        src: {
          type: String
        },

        /**
         * @type {!Polymer.IronMeta}
         */
        _meta: {
          value: Polymer.Base.create('iron-meta', {type: 'iconset'})
        }

      },

      observers: [
        '_updateIcon(_meta, isAttached)',
        '_updateIcon(theme, isAttached)',
        '_srcChanged(src, isAttached)',
        '_iconChanged(icon, isAttached)'
      ],

      _DEFAULT_ICONSET: 'icons',

      _iconChanged: function(icon) {
        var parts = (icon || '').split(':');
        this._iconName = parts.pop();
        this._iconsetName = parts.pop() || this._DEFAULT_ICONSET;
        this._updateIcon();
      },

      _srcChanged: function(src) {
        this._updateIcon();
      },

      _usesIconset: function() {
        return this.icon || !this.src;
      },

      /** @suppress {visibility} */
      _updateIcon: function() {
        if (this._usesIconset()) {
          if (this._img && this._img.parentNode) {
            Polymer.dom(this.root).removeChild(this._img);
          }
          if (this._iconName === "") {
            if (this._iconset) {
              this._iconset.removeIcon(this);
            }
          } else if (this._iconsetName && this._meta) {
            this._iconset = /** @type {?Polymer.Iconset} */ (
              this._meta.byKey(this._iconsetName));
            if (this._iconset) {
              this._iconset.applyIcon(this, this._iconName, this.theme);
              this.unlisten(window, 'iron-iconset-added', '_updateIcon');
            } else {
              this.listen(window, 'iron-iconset-added', '_updateIcon');
            }
          }
        } else {
          if (this._iconset) {
            this._iconset.removeIcon(this);
          }
          if (!this._img) {
            this._img = document.createElement('img');
            this._img.style.width = '100%';
            this._img.style.height = '100%';
            this._img.draggable = false;
          }
          this._img.src = this.src;
          Polymer.dom(this.root).appendChild(this._img);
        }
      }

    });

  </script>

</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /**
   * The `iron-iconset-svg` element allows users to define their own icon sets
   * that contain svg icons. The svg icon elements should be children of the
   * `iron-iconset-svg` element. Multiple icons should be given distinct id's.
   *
   * Using svg elements to create icons has a few advantages over traditional
   * bitmap graphics like jpg or png. Icons that use svg are vector based so
   * they are resolution independent and should look good on any device. They
   * are stylable via css. Icons can be themed, colorized, and even animated.
   *
   * Example:
   *
   *     <iron-iconset-svg name="my-svg-icons" size="24">
   *       <svg>
   *         <defs>
   *           <g id="shape">
   *             <rect x="12" y="0" width="12" height="24" />
   *             <circle cx="12" cy="12" r="12" />
   *           </g>
   *         </defs>
   *       </svg>
   *     </iron-iconset-svg>
   *
   * This will automatically register the icon set "my-svg-icons" to the iconset
   * database.  To use these icons from within another element, make a
   * `iron-iconset` element and call the `byId` method
   * to retrieve a given iconset. To apply a particular icon inside an
   * element use the `applyIcon` method. For example:
   *
   *     iconset.applyIcon(iconNode, 'car');
   *
   * @element iron-iconset-svg
   * @demo demo/index.html
   * @implements {Polymer.Iconset}
   */
  Polymer({
    is: 'iron-iconset-svg',

    properties: {

      /**
       * The name of the iconset.
       */
      name: {
        type: String,
        observer: '_nameChanged'
      },

      /**
       * The size of an individual icon. Note that icons must be square.
       */
      size: {
        type: Number,
        value: 24
      },

      /**
       * Set to true to enable mirroring of icons where specified when they are
       * stamped. Icons that should be mirrored should be decorated with a
       * `mirror-in-rtl` attribute.
       *
       * NOTE: For performance reasons, direction will be resolved once per
       * document per iconset, so moving icons in and out of RTL subtrees will
       * not cause their mirrored state to change.
       */
      rtlMirroring: {
        type: Boolean,
        value: false
      }
    },

    attached: function() {
      this.style.display = 'none';
    },

    /**
     * Construct an array of all icon names in this iconset.
     *
     * @return {!Array} Array of icon names.
     */
    getIconNames: function() {
      this._icons = this._createIconMap();
      return Object.keys(this._icons).map(function(n) {
        return this.name + ':' + n;
      }, this);
    },

    /**
     * Applies an icon to the given element.
     *
     * An svg icon is prepended to the element's shadowRoot if it exists,
     * otherwise to the element itself.
     *
     * If RTL mirroring is enabled, and the icon is marked to be mirrored in
     * RTL, the element will be tested (once and only once ever for each
     * iconset) to determine the direction of the subtree the element is in.
     * This direction will apply to all future icon applications, although only
     * icons marked to be mirrored will be affected.
     *
     * @method applyIcon
     * @param {Element} element Element to which the icon is applied.
     * @param {string} iconName Name of the icon to apply.
     * @return {?Element} The svg element which renders the icon.
     */
    applyIcon: function(element, iconName) {
      // insert svg element into shadow root, if it exists
      element = element.root || element;
      // Remove old svg element
      this.removeIcon(element);
      // install new svg element
      var svg = this._cloneIcon(iconName,
          this.rtlMirroring && this._targetIsRTL(element));
      if (svg) {
        var pde = Polymer.dom(element);
        pde.insertBefore(svg, pde.childNodes[0]);
        return element._svgIcon = svg;
      }
      return null;
    },

    /**
     * Remove an icon from the given element by undoing the changes effected
     * by `applyIcon`.
     *
     * @param {Element} element The element from which the icon is removed.
     */
    removeIcon: function(element) {
      // Remove old svg element
      element = element.root || element;
      if (element._svgIcon) {
        Polymer.dom(element).removeChild(element._svgIcon);
        element._svgIcon = null;
      }
    },

    /**
     * Measures and memoizes the direction of the element. Note that this
     * measurement is only done once and the result is memoized for future
     * invocations.
     */
    _targetIsRTL: function(target) {
      if (this.__targetIsRTL == null) {
        if (target && target.nodeType !== Node.ELEMENT_NODE) {
          target = target.host;
        }

        this.__targetIsRTL = target &&
            window.getComputedStyle(target)['direction'] === 'rtl';
      }

      return this.__targetIsRTL;
    },

    /**
     *
     * When name is changed, register iconset metadata
     *
     */
    _nameChanged: function() {
      new Polymer.IronMeta({type: 'iconset', key: this.name, value: this});
      this.async(function() {
        this.fire('iron-iconset-added', this, {node: window});
      });
    },

    /**
     * Create a map of child SVG elements by id.
     *
     * @return {!Object} Map of id's to SVG elements.
     */
    _createIconMap: function() {
      // Objects chained to Object.prototype (`{}`) have members. Specifically,
      // on FF there is a `watch` method that confuses the icon map, so we
      // need to use a null-based object here.
      var icons = Object.create(null);
      Polymer.dom(this).querySelectorAll('[id]')
        .forEach(function(icon) {
          icons[icon.id] = icon;
        });
      return icons;
    },

    /**
     * Produce installable clone of the SVG element matching `id` in this
     * iconset, or `undefined` if there is no matching element.
     *
     * @return {Element} Returns an installable clone of the SVG element
     * matching `id`.
     */
    _cloneIcon: function(id, mirrorAllowed) {
      // create the icon map on-demand, since the iconset itself has no discrete
      // signal to know when it's children are fully parsed
      this._icons = this._icons || this._createIconMap();
      return this._prepareSvgClone(this._icons[id], this.size, mirrorAllowed);
    },

    /**
     * @param {Element} sourceSvg
     * @param {number} size
     * @param {Boolean} mirrorAllowed
     * @return {Element}
     */
    _prepareSvgClone: function(sourceSvg, size, mirrorAllowed) {
      if (sourceSvg) {
        var content = sourceSvg.cloneNode(true),
            svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg'),
            viewBox = content.getAttribute('viewBox') || '0 0 ' + size + ' ' + size,
            cssText = 'pointer-events: none; display: block; width: 100%; height: 100%;';

        if (mirrorAllowed && content.hasAttribute('mirror-in-rtl')) {
          cssText += '-webkit-transform:scale(-1,1);transform:scale(-1,1);';
        }

        svg.setAttribute('viewBox', viewBox);
        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
        // TODO(dfreedm): `pointer-events: none` works around https://crbug.com/370136
        // TODO(sjmiles): inline style may not be ideal, but avoids requiring a shadow-root
        svg.style.cssText = cssText;
        svg.appendChild(content).removeAttribute('id');
        return svg;
      }
      return null;
    }

  });

</script>
<!--
A set of icons for Advanced REST Client.
This library exists to not import all material/iron icons to the app but only those are required.

Include library into the document / element:
```
<link rel="import" href="../arc-icons/arc-icons.html">
```

To use an icon from this set you mys prefix `iron-icon` with the `arc`, followed by a colon, ":", and then the icon id.

Example using the directions-bus icon from the maps icon set:
```
<iron-icon icon="arc:assignment"></iron-icon>
```

@group UI Elements
@pseudoElement arc-icons
@demo demo/index.html
@hero hero.svg
-->
<iron-iconset-svg size="24" name="arc">
<svg>
  <defs>
    <g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></g>
    <g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g>
    <g id="anypoint-pin"><path d="M13.8993082,3.4355581l7.0314379,4.9234715c-0.5007572,0.1463709-1.0230217,0.2215881-1.5530128,0.2215881 c-0.1495934,0-0.3085251-0.007165-0.4723873-0.0212765L18.331007,8.5098438l-3.5253258,5.0346861l0.2431707,0.5228872 c0.6836739,1.4700317,0.6766796,3.1600895,0.0193348,4.6070614l-8.8596268-6.203578 c1.0200305-1.0022087,2.4050174-1.5794764,3.8621583-1.5794764c0.1502523,0,0.3099775,0.007226,0.474719,0.0214834 l0.5745583,0.0497179l3.1937542-4.5611515l0.3306684-0.4722414l-0.2429876-0.5227895 C14.1125107,4.7848282,13.9437037,4.1142516,13.8993082,3.4355581 M13.0516243,1.6212608 c-0.3259563,1.4169074-0.1637287,2.9012694,0.4429941,4.206656l-2.8629646,4.0887389 c-0.1869087-0.0161734-0.3740377-0.0252066-0.560935-0.0252066c-2.0491304,0-4.0655956,0.9663448-5.3301387,2.7723055 l10.6490097,7.4565134c1.3797503-1.9704952,1.5123148-4.439744,0.5659761-6.4745436l2.8639164-4.090107 c0.1860065,0.0160275,0.3722572,0.0249758,0.5582504,0.0249758c1.2482109,0,2.4841042-0.3585854,3.545845-1.0469103 L13.0516243,1.6212608L13.0516243,1.6212608z M10.0657015,18.3762074l-3.3737302,2.833107l1.5083604-4.1392517 l-0.8479404-0.5937347l-2.8796754,7.902401l6.4409375-5.4087868L10.0657015,18.3762074z M15.2397041,6.6955462 l-3.1956835,4.5639229c0.3131514,0.1211634,0.6159267,0.2716846,0.9053726,0.450428l3.022543-4.3166389 C15.703474,7.1812396,15.459754,6.9468703,15.2397041,6.6955462z"></path></g>
    <g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"></path></g>
    <g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></g>
    <g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g>
    <g id="arrow-drop-up"><path d="M7 14l5-5 5 5z"></path></g>
    <g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></g>
    <g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"></path></g>
    <g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"></path></g>
    <g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"></path></g>
    <g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g>
    <g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g>
    <g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g>
    <g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>
    <g id="clear-all"><path d="M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"></path></g>
    <g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>
    <g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"></path></g>
    <g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></g>
    <g id="collections-bookmark"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 10l-2.5-1.5L15 12V4h5v8z"></path></g>
    <g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></g>
    <g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g>
    <g id="desktop-windows"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z"></path></g>
    <g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></g>
    <g id="drive-color" transform="matrix(1.597046e-4,0,0,1.6517796e-4,1.3671875,2.9482084)"><polygon points="133156,76894 110963,115341 22194,115341 44385,76894 " style="fill:#3777e3"></polygon><polygon points="88772,0 44385,0 88772,76894 133156,76894 " style="fill:#ffcf63"></polygon><polygon points="66578,38447 44385,0 0,76894 22194,115341 " style="fill:#11a861"></polygon></g>
    <g id="drive" transform="matrix(1.597046e-4,0,0,1.6517796e-4,1.3671875,2.9482084)"><polygon points="22194,115341 44385,76894 133156,76894 110963,115341"></polygon><polygon points="88772,76894 133156,76894 88772,0 44385,0"></polygon><polygon points="0,76894 22194,115341 66578,38447 44385,0"></polygon></g>
    <g id="edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g>
    <g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g>
    <g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g>
    <g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g>
    <g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g>
    <g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path></g>
    <g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z"></path></g>
    <g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g>
    <g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"></path></g>
    <g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g>
    <g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></g>
    <g id="import-export"><path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"></path></g>
    <g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g>
    <g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"></path></g>
    <g id="insert-chart"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></g>
    <g id="keyboard-arrow-down"><path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"></path></g>
    <g id="keyboard-arrow-up"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></g>
    <g id="keyboard-arrow-right"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></g>
    <g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"></path></g>
    <g id="markdown" transform="matrix(0.04690339,0,0,0.04690339,0,5.225434)"><path d="m 123.38173,73.504 -50.39773,0 0,167.496 52.516,0 0,-93 50,60 47.62725,-60 0,93 49.87275,0 0,-167.496 -49.87276,0 L 175.5,135.5 Z M 39.998409,0 474.00159,0 C 496.08284,0 514,17.906303 514,39.994846 l 0,235.010304 C 514,297.09032 496.0921,315 474.00159,315 L 39.998409,315 C 17.917157,315 0,297.0937 0,275.00515 L 0,39.994846 C 0,17.909682 17.907898,0 39.998409,0 Z M 360,74.5 l -0.49739,0 -1e-5,86 -48.0026,0 74,80.5 74.00256,-80.99442 -49.97984,0 0,-85.50558 z m 0,0"></path></g>
    <g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g>
    <g id="mode-edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g>
    <g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g>
    <g id="new-releases"><path d="M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g>
    <g id="notifications-active"><path d="M7.58 4.08L6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z"></path></g>
    <g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g>
    <g id="rate-review"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z"></path></g>
    <g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g>
    <g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g>
    <g id="pin-drawer"><path d="M 15.462891 4.0332031 L 15.462891 20.007812 L 18.392578 20.007812 L 18.392578 4.0332031 L 15.462891 4.0332031 z M 6.9921875 6.0195312 L 5.5820312 7.4296875 L 10.162109 12.019531 L 5.5820312 16.609375 L 6.9921875 18.019531 L 12.992188 12.019531 L 6.9921875 6.0195312 z M 16.017578 11.873047 L 17.865234 11.873047 L 17.865234 19.509766 L 16.017578 19.509766 L 16.017578 11.873047 z"></path></g>
    <g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"></path></g>
    <g id="sentiment-very-dissatisfied"><path d="M11.99 2C6.47 2 2 6.47 2 12s4.47 10 9.99 10S22 17.53 22 12 17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4.18-12.24l-1.06 1.06-1.06-1.06L13 8.82l1.06 1.06L13 10.94 14.06 12l1.06-1.06L16.18 12l1.06-1.06-1.06-1.06 1.06-1.06zM7.82 12l1.06-1.06L9.94 12 11 10.94 9.94 9.88 11 8.82 9.94 7.76 8.88 8.82 7.82 7.76 6.76 8.82l1.06 1.06-1.06 1.06zM12 14c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5z"></path></g>
    <g id="sentiment-neutral"><path d="M9 14h6v1.5H9z"></path><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g>
    <g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></g>
    <g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></g>
    <g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></g>
    <g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g>
    <g id="shield" transform="translate(0,-1028.3622)"><circle r="11.962877" cy="1040.3993" cx="11.962877" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#1c8adb;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.40000001;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></circle><path d="m 5.7226134,1035.2177 -5.71610049,5.7162 c 0.25024909,5.9429 3.35576479,9.2981 8.15641339,11.1171 2.1658257,-2.1563 4.3267587,-4.3171 6.4790417,-6.5004 z" style="fill:url(&quot;#linearGradient5637&quot;);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" inkscape:connector-curvature="0"></path><path d="m 11.962898,1033.391 c -2.0501345,1.0013 -4.3555189,1.8135 -6.240256,1.8267 1.1575901,7.1589 1.8218083,9.9255 6.240256,12.1899 4.418427,-2.2644 5.082673,-5.031 6.240258,-12.1899 -1.884728,-0.013 -4.190132,-0.8254 -6.240258,-1.8267 z" style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" inkscape:connector-curvature="0"></path><path d="m 11.962878,1033.391 0,7.0084 5.261505,0 c 0.352779,-1.4257 0.64548,-3.121 0.978701,-5.1818 -1.884728,-0.013 -4.19008,-0.8254 -6.240206,-1.8266 z m 0,7.0084 -5.2615633,0 c 0.8727443,3.5268 2.1150231,5.3956 5.2615633,7.0082 l 0,-7.0082 z" style="fill:#000000;fill-opacity:0.13473056;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" inkscape:connector-curvature="0"></path></g>
    <g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"></path></g>
    <g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g>
    <g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path></g>
    <g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g>
    <g id="wrap-text"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3 3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></g>
    <g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></g>
  </defs></svg>
</iron-iconset-svg>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * @demo demo/index.html
   * @polymerBehavior Polymer.IronButtonState
   */
  Polymer.IronButtonStateImpl = {

    properties: {

      /**
       * If true, the user is currently holding down the button.
       */
      pressed: {
        type: Boolean,
        readOnly: true,
        value: false,
        reflectToAttribute: true,
        observer: '_pressedChanged'
      },

      /**
       * If true, the button toggles the active state with each tap or press
       * of the spacebar.
       */
      toggles: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },

      /**
       * If true, the button is a toggle and is currently in the active state.
       */
      active: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true
      },

      /**
       * True if the element is currently being pressed by a "pointer," which
       * is loosely defined as mouse or touch input (but specifically excluding
       * keyboard input).
       */
      pointerDown: {
        type: Boolean,
        readOnly: true,
        value: false
      },

      /**
       * True if the input device that caused the element to receive focus
       * was a keyboard.
       */
      receivedFocusFromKeyboard: {
        type: Boolean,
        readOnly: true
      },

      /**
       * The aria attribute to be set if the button is a toggle and in the
       * active state.
       */
      ariaActiveAttribute: {
        type: String,
        value: 'aria-pressed',
        observer: '_ariaActiveAttributeChanged'
      }
    },

    listeners: {
      down: '_downHandler',
      up: '_upHandler',
      tap: '_tapHandler'
    },

    observers: [
      '_focusChanged(focused)',
      '_activeChanged(active, ariaActiveAttribute)'
    ],

    keyBindings: {
      'enter:keydown': '_asyncClick',
      'space:keydown': '_spaceKeyDownHandler',
      'space:keyup': '_spaceKeyUpHandler',
    },

    _mouseEventRe: /^mouse/,

    _tapHandler: function() {
      if (this.toggles) {
       // a tap is needed to toggle the active state
        this._userActivate(!this.active);
      } else {
        this.active = false;
      }
    },

    _focusChanged: function(focused) {
      this._detectKeyboardFocus(focused);

      if (!focused) {
        this._setPressed(false);
      }
    },

    _detectKeyboardFocus: function(focused) {
      this._setReceivedFocusFromKeyboard(!this.pointerDown && focused);
    },

    // to emulate native checkbox, (de-)activations from a user interaction fire
    // 'change' events
    _userActivate: function(active) {
      if (this.active !== active) {
        this.active = active;
        this.fire('change');
      }
    },

    _downHandler: function(event) {
      this._setPointerDown(true);
      this._setPressed(true);
      this._setReceivedFocusFromKeyboard(false);
    },

    _upHandler: function() {
      this._setPointerDown(false);
      this._setPressed(false);
    },

    /**
     * @param {!KeyboardEvent} event .
     */
    _spaceKeyDownHandler: function(event) {
      var keyboardEvent = event.detail.keyboardEvent;
      var target = Polymer.dom(keyboardEvent).localTarget;

      // Ignore the event if this is coming from a focused light child, since that
      // element will deal with it.
      if (this.isLightDescendant(/** @type {Node} */(target)))
        return;

      keyboardEvent.preventDefault();
      keyboardEvent.stopImmediatePropagation();
      this._setPressed(true);
    },

    /**
     * @param {!KeyboardEvent} event .
     */
    _spaceKeyUpHandler: function(event) {
      var keyboardEvent = event.detail.keyboardEvent;
      var target = Polymer.dom(keyboardEvent).localTarget;

      // Ignore the event if this is coming from a focused light child, since that
      // element will deal with it.
      if (this.isLightDescendant(/** @type {Node} */(target)))
        return;

      if (this.pressed) {
        this._asyncClick();
      }
      this._setPressed(false);
    },

    // trigger click asynchronously, the asynchrony is useful to allow one
    // event handler to unwind before triggering another event
    _asyncClick: function() {
      this.async(function() {
        this.click();
      }, 1);
    },

    // any of these changes are considered a change to button state

    _pressedChanged: function(pressed) {
      this._changedButtonState();
    },

    _ariaActiveAttributeChanged: function(value, oldValue) {
      if (oldValue && oldValue != value && this.hasAttribute(oldValue)) {
        this.removeAttribute(oldValue);
      }
    },

    _activeChanged: function(active, ariaActiveAttribute) {
      if (this.toggles) {
        this.setAttribute(this.ariaActiveAttribute,
                          active ? 'true' : 'false');
      } else {
        this.removeAttribute(this.ariaActiveAttribute);
      }
      this._changedButtonState();
    },

    _controlStateChanged: function() {
      if (this.disabled) {
        this._setPressed(false);
      } else {
        this._changedButtonState();
      }
    },

    // provide hook for follow-on behaviors to react to button-state

    _changedButtonState: function() {
      if (this._buttonStateChanged) {
        this._buttonStateChanged(); // abstract
      }
    }

  };

  /** @polymerBehavior */
  Polymer.IronButtonState = [
    Polymer.IronA11yKeysBehavior,
    Polymer.IronButtonStateImpl
  ];

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /**
   * `Polymer.PaperRippleBehavior` dynamically implements a ripple
   * when the element has focus via pointer or keyboard.
   *
   * NOTE: This behavior is intended to be used in conjunction with and after
   * `Polymer.IronButtonState` and `Polymer.IronControlState`.
   *
   * @polymerBehavior Polymer.PaperRippleBehavior
   */
  Polymer.PaperRippleBehavior = {
    properties: {
      /**
       * If true, the element will not produce a ripple effect when interacted
       * with via the pointer.
       */
      noink: {
        type: Boolean,
        observer: '_noinkChanged'
      },

      /**
       * @type {Element|undefined}
       */
      _rippleContainer: {
        type: Object,
      }
    },

    /**
     * Ensures a `<paper-ripple>` element is available when the element is
     * focused.
     */
    _buttonStateChanged: function() {
      if (this.focused) {
        this.ensureRipple();
      }
    },

    /**
     * In addition to the functionality provided in `IronButtonState`, ensures
     * a ripple effect is created when the element is in a `pressed` state.
     */
    _downHandler: function(event) {
      Polymer.IronButtonStateImpl._downHandler.call(this, event);
      if (this.pressed) {
        this.ensureRipple(event);
      }
    },

    /**
     * Ensures this element contains a ripple effect. For startup efficiency
     * the ripple effect is dynamically on demand when needed.
     * @param {!Event=} optTriggeringEvent (optional) event that triggered the
     * ripple.
     */
    ensureRipple: function(optTriggeringEvent) {
      if (!this.hasRipple()) {
        this._ripple = this._createRipple();
        this._ripple.noink = this.noink;
        var rippleContainer = this._rippleContainer || this.root;
        if (rippleContainer) {
          Polymer.dom(rippleContainer).appendChild(this._ripple);
        }
        if (optTriggeringEvent) {
          // Check if the event happened inside of the ripple container
          // Fall back to host instead of the root because distributed text
          // nodes are not valid event targets
          var domContainer = Polymer.dom(this._rippleContainer || this);
          var target = Polymer.dom(optTriggeringEvent).rootTarget;
          if (domContainer.deepContains( /** @type {Node} */(target))) {
            this._ripple.uiDownAction(optTriggeringEvent);
          }
        }
      }
    },

    /**
     * Returns the `<paper-ripple>` element used by this element to create
     * ripple effects. The element's ripple is created on demand, when
     * necessary, and calling this method will force the
     * ripple to be created.
     */
    getRipple: function() {
      this.ensureRipple();
      return this._ripple;
    },

    /**
     * Returns true if this element currently contains a ripple effect.
     * @return {boolean}
     */
    hasRipple: function() {
      return Boolean(this._ripple);
    },

    /**
     * Create the element's ripple effect via creating a `<paper-ripple>`.
     * Override this method to customize the ripple element.
     * @return {!PaperRippleElement} Returns a `<paper-ripple>` element.
     */
    _createRipple: function() {
      return /** @type {!PaperRippleElement} */ (
          document.createElement('paper-ripple'));
    },

    _noinkChanged: function(noink) {
      if (this.hasRipple()) {
        this._ripple.noink = noink;
      }
    }
  };
</script>
<script>
  /**
   * `Polymer.PaperInkyFocusBehavior` implements a ripple when the element has keyboard focus.
   *
   * @polymerBehavior Polymer.PaperInkyFocusBehavior
   */
  Polymer.PaperInkyFocusBehaviorImpl = {
    observers: [
      '_focusedChanged(receivedFocusFromKeyboard)'
    ],

    _focusedChanged: function(receivedFocusFromKeyboard) {
      if (receivedFocusFromKeyboard) {
        this.ensureRipple();
      }
      if (this.hasRipple()) {
        this._ripple.holdDown = receivedFocusFromKeyboard;
      }
    },

    _createRipple: function() {
      var ripple = Polymer.PaperRippleBehavior._createRipple();
      ripple.id = 'ink';
      ripple.setAttribute('center', '');
      ripple.classList.add('circle');
      return ripple;
    }
  };

  /** @polymerBehavior Polymer.PaperInkyFocusBehavior */
  Polymer.PaperInkyFocusBehavior = [
    Polymer.IronButtonState,
    Polymer.IronControlState,
    Polymer.PaperRippleBehavior,
    Polymer.PaperInkyFocusBehaviorImpl
  ];
</script>
<!--
Material design: [Icon toggles](https://www.google.com/design/spec/components/buttons.html#buttons-toggle-buttons)

`paper-icon-button` is a button with an image placed at the center. When the user touches
the button, a ripple effect emanates from the center of the button.

`paper-icon-button` includes a default icon set.  Use `icon` to specify which icon
from the icon set to use.

    <paper-icon-button icon="menu"></paper-icon-button>

See [`iron-iconset`](iron-iconset) for more information about
how to use a custom icon set.

Example:

    <link href="path/to/iron-icons/iron-icons.html" rel="import">

    <paper-icon-button icon="favorite"></paper-icon-button>
    <paper-icon-button src="star.png"></paper-icon-button>

To use `paper-icon-button` as a link, wrap it in an anchor tag. Since `paper-icon-button`
will already receive focus, you may want to prevent the anchor tag from receiving focus
as well by setting its tabindex to -1.

    <a href="https://www.polymer-project.org" tabindex="-1">
      <paper-icon-button icon="polymer"></paper-icon-button>
    </a>

### Styling

Style the button with CSS as you would a normal DOM element. If you are using the icons
provided by `iron-icons`, they will inherit the foreground color of the button.

    /* make a red "favorite" button */
    <paper-icon-button icon="favorite" style="color: red;"></paper-icon-button>

By default, the ripple is the same color as the foreground at 25% opacity. You may
customize the color using the `--paper-icon-button-ink-color` custom property.

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-icon-button-disabled-text` | The color of the disabled button | `--disabled-text-color`
`--paper-icon-button-ink-color` | Selected/focus ripple color | `--primary-text-color`
`--paper-icon-button` | Mixin for a button | `{}`
`--paper-icon-button-disabled` | Mixin for a disabled button | `{}`
`--paper-icon-button-hover` | Mixin for button on hover | `{}`

@group Paper Elements
@element paper-icon-button
@demo demo/index.html
-->

<dom-module id="paper-icon-button" assetpath="bower_components/paper-icon-button/">
  <template strip-whitespace="">
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply(--paper-icon-button);
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, --primary-text-color);
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, --disabled-text-color);
        pointer-events: none;
        cursor: auto;

        @apply(--paper-icon-button-disabled);
      }

      :host(:hover) {
        @apply(--paper-icon-button-hover);
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }
    </style>

    <iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon>
  </template>

  <script>
    Polymer({
      is: 'paper-icon-button',

      hostAttributes: {
        role: 'button',
        tabindex: '0'
      },

      behaviors: [
        Polymer.PaperInkyFocusBehavior
      ],

      properties: {
        /**
         * The URL of an image for the icon. If the src property is specified,
         * the icon property should not be.
         */
        src: {
          type: String
        },

        /**
         * Specifies the icon name or index in the set of icons available in
         * the icon's icon set. If the icon property is specified,
         * the src property should not be.
         */
        icon: {
          type: String
        },

        /**
         * Specifies the alternate text for the button, for accessibility.
         */
        alt: {
          type: String,
          observer: "_altChanged"
        }
      },

      _altChanged: function(newValue, oldValue) {
        var label = this.getAttribute('aria-label');

        // Don't stomp over a user-set aria-label.
        if (!label || oldValue == label) {
          this.setAttribute('aria-label', newValue);
        }
      }
    });
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`iron-collapse` creates a collapsible block of content.  By default, the content
will be collapsed.  Use `opened` or `toggle()` to show/hide the content.

    <button on-click="toggle">toggle collapse</button>

    <iron-collapse id="collapse">
      <div>Content goes here...</div>
    </iron-collapse>

    ...

    toggle: function() {
      this.$.collapse.toggle();
    }

`iron-collapse` adjusts the max-height/max-width of the collapsible element to show/hide
the content.  So avoid putting padding/margin/border on the collapsible directly,
and instead put a div inside and style that.

    <style>
      .collapse-content {
        padding: 15px;
        border: 1px solid #dedede;
      }
    </style>

    <iron-collapse>
      <div class="collapse-content">
        <div>Content goes here...</div>
      </div>
    </iron-collapse>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--iron-collapse-transition-duration` | Animation transition duration | `300ms`

@group Iron Elements
@hero hero.svg
@demo demo/index.html
@element iron-collapse
-->

<dom-module id="iron-collapse" assetpath="bower_components/iron-collapse/">

  <template>

    <style>
      :host {
        display: block;
        transition-duration: var(--iron-collapse-transition-duration, 300ms);
        overflow: visible;
      }

      :host(.iron-collapse-closed) {
        display: none;
      }

      :host(:not(.iron-collapse-opened)) {
        overflow: hidden;
      }
    </style>

    <content></content>

  </template>

</dom-module>

<script>

  Polymer({

    is: 'iron-collapse',

    behaviors: [
      Polymer.IronResizableBehavior
    ],

    properties: {

      /**
       * If true, the orientation is horizontal; otherwise is vertical.
       *
       * @attribute horizontal
       */
      horizontal: {
        type: Boolean,
        value: false,
        observer: '_horizontalChanged'
      },

      /**
       * Set opened to true to show the collapse element and to false to hide it.
       *
       * @attribute opened
       */
      opened: {
        type: Boolean,
        value: false,
        notify: true,
        observer: '_openedChanged'
      },

      /**
       * When true, the element is transitioning its opened state. When false,
       * the element has finished opening/closing.
       *
       * @attribute transitioning
       */
      transitioning: {
        type: Boolean,
        notify: true,
        readOnly: true
      },

      /**
       * Set noAnimation to true to disable animations.
       *
       * @attribute noAnimation
       */
      noAnimation: {
        type: Boolean
      },

      /**
       * Stores the desired size of the collapse body.
       * @private
       */
      _desiredSize: {
        type: String,
        value: ''
      }
    },

    get dimension() {
      return this.horizontal ? 'width' : 'height';
    },

    /**
     * `maxWidth` or `maxHeight`.
     * @private
     */
    get _dimensionMax() {
      return this.horizontal ? 'maxWidth' : 'maxHeight';
    },

    /**
     * `max-width` or `max-height`.
     * @private
     */
    get _dimensionMaxCss() {
      return this.horizontal ? 'max-width' : 'max-height';
    },

    hostAttributes: {
      role: 'group',
      'aria-hidden': 'true',
      'aria-expanded': 'false'
    },

    listeners: {
      transitionend: '_onTransitionEnd'
    },

    /**
     * Toggle the opened state.
     *
     * @method toggle
     */
    toggle: function() {
      this.opened = !this.opened;
    },

    show: function() {
      this.opened = true;
    },

    hide: function() {
      this.opened = false;
    },

    /**
     * Updates the size of the element.
     * @param {string} size The new value for `maxWidth`/`maxHeight` as css property value, usually `auto` or `0px`.
     * @param {boolean=} animated if `true` updates the size with an animation, otherwise without.
     */
    updateSize: function(size, animated) {
      // Consider 'auto' as '', to take full size.
      size = size === 'auto' ? '' : size;

      var willAnimate = animated && !this.noAnimation &&
                        this.isAttached && this._desiredSize !== size;

      this._desiredSize = size;

      this._updateTransition(false);
      // If we can animate, must do some prep work.
      if (willAnimate) {
        // Animation will start at the current size.
        var startSize = this._calcSize();
        // For `auto` we must calculate what is the final size for the animation.
        // After the transition is done, _transitionEnd will set the size back to `auto`.
        if (size === '') {
          this.style[this._dimensionMax] = '';
          size = this._calcSize();
        }
        // Go to startSize without animation.
        this.style[this._dimensionMax] = startSize;
        // Force layout to ensure transition will go. Set scrollTop to itself
        // so that compilers won't remove it.
        this.scrollTop = this.scrollTop;
        // Enable animation.
        this._updateTransition(true);
        // If final size is the same as startSize it will not animate.
        willAnimate = (size !== startSize);
      }
      // Set the final size.
      this.style[this._dimensionMax] = size;
      // If it won't animate, call transitionEnd to set correct classes.
      if (!willAnimate) {
        this._transitionEnd();
      }
    },

    /**
     * enableTransition() is deprecated, but left over so it doesn't break existing code.
     * Please use `noAnimation` property instead.
     *
     * @method enableTransition
     * @deprecated since version 1.0.4
     */
    enableTransition: function(enabled) {
      Polymer.Base._warn('`enableTransition()` is deprecated, use `noAnimation` instead.');
      this.noAnimation = !enabled;
    },

    _updateTransition: function(enabled) {
      this.style.transitionDuration = (enabled && !this.noAnimation) ? '' : '0s';
    },

    _horizontalChanged: function() {
      this.style.transitionProperty = this._dimensionMaxCss;
      var otherDimension = this._dimensionMax === 'maxWidth' ? 'maxHeight' : 'maxWidth';
      this.style[otherDimension] = '';
      this.updateSize(this.opened ? 'auto' : '0px', false);
    },

    _openedChanged: function() {
      this.setAttribute('aria-expanded', this.opened);
      this.setAttribute('aria-hidden', !this.opened);

      this._setTransitioning(true);
      this.toggleClass('iron-collapse-closed', false);
      this.toggleClass('iron-collapse-opened', false);
      this.updateSize(this.opened ? 'auto' : '0px', true);

      // Focus the current collapse.
      if (this.opened) {
        this.focus();
      }
    },

    _transitionEnd: function() {
      this.style[this._dimensionMax] = this._desiredSize;
      this.toggleClass('iron-collapse-closed', !this.opened);
      this.toggleClass('iron-collapse-opened', this.opened);
      this._updateTransition(false);
      this.notifyResize();
      this._setTransitioning(false);
    },

    _onTransitionEnd: function(event) {
      if (Polymer.dom(event).rootTarget === this) {
        this._transitionEnd();
      }
    },

    _calcSize: function() {
      return this.getBoundingClientRect()[this.dimension] + 'px';
    }

  });

</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`PaperItemBehavior` is a convenience behavior shared by <paper-item> and
<paper-icon-item> that manages the shared control states and attributes of
the items.
-->

<script>
  /** @polymerBehavior Polymer.PaperItemBehavior */
  Polymer.PaperItemBehaviorImpl = {
    hostAttributes: {
      role: 'option',
      tabindex: '0'
    }
  };

  /** @polymerBehavior */
  Polymer.PaperItemBehavior = [
    Polymer.IronButtonState,
    Polymer.IronControlState,
    Polymer.PaperItemBehaviorImpl
  ];
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic" crossorigin="anonymous">
<style is="custom-style">

  :root {

    /* Shared Styles */
    --paper-font-common-base: {
      font-family: 'Roboto', 'Noto', sans-serif;
      -webkit-font-smoothing: antialiased;
    };

    --paper-font-common-code: {
      font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
      -webkit-font-smoothing: antialiased;
    };

    --paper-font-common-expensive-kerning: {
      text-rendering: optimizeLegibility;
    };

    --paper-font-common-nowrap: {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    };

    /* Material Font Styles */

    --paper-font-display4: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 112px;
      font-weight: 300;
      letter-spacing: -.044em;
      line-height: 120px;
    };

    --paper-font-display3: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 56px;
      font-weight: 400;
      letter-spacing: -.026em;
      line-height: 60px;
    };

    --paper-font-display2: {
      @apply(--paper-font-common-base);

      font-size: 45px;
      font-weight: 400;
      letter-spacing: -.018em;
      line-height: 48px;
    };

    --paper-font-display1: {
      @apply(--paper-font-common-base);

      font-size: 34px;
      font-weight: 400;
      letter-spacing: -.01em;
      line-height: 40px;
    };

    --paper-font-headline: {
      @apply(--paper-font-common-base);

      font-size: 24px;
      font-weight: 400;
      letter-spacing: -.012em;
      line-height: 32px;
    };

    --paper-font-title: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 20px;
      font-weight: 500;
      line-height: 28px;
    };

    --paper-font-subhead: {
      @apply(--paper-font-common-base);

      font-size: 16px;
      font-weight: 400;
      line-height: 24px;
    };

    --paper-font-body2: {
      @apply(--paper-font-common-base);

      font-size: 14px;
      font-weight: 500;
      line-height: 24px;
    };

    --paper-font-body1: {
      @apply(--paper-font-common-base);

      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
    };

    --paper-font-caption: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 12px;
      font-weight: 400;
      letter-spacing: 0.011em;
      line-height: 20px;
    };

    --paper-font-menu: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 13px;
      font-weight: 500;
      line-height: 24px;
    };

    --paper-font-button: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.018em;
      line-height: 24px;
      text-transform: uppercase;
    };

    --paper-font-code2: {
      @apply(--paper-font-common-code);

      font-size: 14px;
      font-weight: 700;
      line-height: 20px;
    };

    --paper-font-code1: {
      @apply(--paper-font-common-code);

      font-size: 14px;
      font-weight: 500;
      line-height: 20px;
    };

  }

</style>
<dom-module id="paper-item-shared-styles" assetpath="bower_components/paper-item/">
  <template>
    <style>
      :host, .paper-item {
        display: block;
        position: relative;
        min-height: var(--paper-item-min-height, 48px);
        padding: 0px 16px;
      }

      .paper-item {
        @apply(--paper-font-subhead);
        border:none;
        outline: none;
        background: white;
        width: 100%;
        text-align: left;
      }

      :host([hidden]), .paper-item[hidden] {
        display: none !important;
      }

      :host(.iron-selected), .paper-item.iron-selected {
        font-weight: var(--paper-item-selected-weight, bold);

        @apply(--paper-item-selected);
      }

      :host([disabled]), .paper-item[disabled] {
        color: var(--paper-item-disabled-color, --disabled-text-color);

        @apply(--paper-item-disabled);
      }

      :host(:focus), .paper-item:focus {
        position: relative;
        outline: 0;

        @apply(--paper-item-focused);
      }

      :host(:focus):before, .paper-item:focus:before {
        @apply(--layout-fit);

        background: currentColor;
        content: '';
        opacity: var(--dark-divider-opacity);
        pointer-events: none;

        @apply(--paper-item-focused-before);
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Lists](https://www.google.com/design/spec/components/lists.html)

`<paper-item>` is an interactive list item. By default, it is a horizontal flexbox.

    <paper-item>Item</paper-item>

Use this element with `<paper-item-body>` to make Material Design styled two-line and three-line
items.

    <paper-item>
      <paper-item-body two-line>
        <div>Show your status</div>
        <div secondary>Your status is visible to everyone</div>
      </paper-item-body>
      <iron-icon icon="warning"></iron-icon>
    </paper-item>

To use `paper-item` as a link, wrap it in an anchor tag. Since `paper-item` will
already receive focus, you may want to prevent the anchor tag from receiving
focus as well by setting its tabindex to -1.

    <a href="https://www.polymer-project.org/" tabindex="-1">
      <paper-item raised>Polymer Project</paper-item>
    </a>

If you are concerned about performance and want to use `paper-item` in a `paper-listbox`
with many items, you can just use a native `button` with the `paper-item` class
applied (provided you have correctly included the shared styles):

    <style is="custom-style" include="paper-item-shared-styles"></style>

    <paper-listbox>
      <button class="paper-item" role="option">Inbox</button>
      <button class="paper-item" role="option">Starred</button>
      <button class="paper-item" role="option">Sent mail</button>
    </paper-listbox>

### Styling

The following custom properties and mixins are available for styling:

Custom property               | Description                                  | Default
------------------------------|----------------------------------------------|----------
`--paper-item-min-height`     | Minimum height of the item                   | `48px`
`--paper-item`                | Mixin applied to the item                    | `{}`
`--paper-item-selected-weight`| The font weight of a selected item           | `bold`
`--paper-item-selected`       | Mixin applied to selected paper-items        | `{}`
`--paper-item-disabled-color` | The color for disabled paper-items           | `--disabled-text-color`
`--paper-item-disabled`       | Mixin applied to disabled paper-items        | `{}`
`--paper-item-focused`        | Mixin applied to focused paper-items         | `{}`
`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`

### Accessibility

This element has `role="listitem"` by default. Depending on usage, it may be more appropriate to set
`role="menuitem"`, `role="menuitemcheckbox"` or `role="menuitemradio"`.

    <paper-item role="menuitemcheckbox">
      <paper-item-body>
        Show your status
      </paper-item-body>
      <paper-checkbox></paper-checkbox>
    </paper-item>

@group Paper Elements
@element paper-item
@demo demo/index.html
-->

<dom-module id="paper-item" assetpath="bower_components/paper-item/">
  <template>
    <style include="paper-item-shared-styles"></style>
    <style>
      :host {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-font-subhead);

        @apply(--paper-item);
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({
      is: 'paper-item',

      behaviors: [
        Polymer.PaperItemBehavior
      ]
    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(g) {
  'use strict';

  g.RamlBehaviors = g.RamlBehaviors || {};
  /**
   * Common properties and methods for docs tree view.
   *
   * @polymerBehavior RamlBehaviors.RamlTreeItemBehavior
   */
  g.RamlBehaviors.RamlTreeItemBehavior = {
    properties: {
      // A path the item represents.
      path: {
        type: String,
        value: ''
      },
      // Currently selected path.
      selectedPath: String,
      // True if the item is selected
      isSelected: {
        type: Boolean,
        computed: '_computeIsSelected(selectedPath, path)'
      },
      // Indent index in the structure. 1 if this is first level of indent.
      indent: Number,
      // Number of pixels to indent the content.
      indentSize: Number,
      // Computed value of indent in pixels (with `px` suffix)
      _indentPixels: String
    },

    observers: [
      '__indentPixelsChanged(_indentPixels)',
      '_indentChnaged(indent, indentSize)'
    ],

    _indentChnaged: function(indent, indentSize) {
      if (!indent || !indentSize) {
        return this.set('_indentPixels', undefined);
      }
      var size = indent * indentSize;
      this.set('_indentPixels', size + 'px');
    },

    /**
     * Event handler for the click on an tree item.
     * It sends the `raml-path-selected` event so the tree selected can set
     * path.
     *
     * @param {Event} e Event fired by the HTML element. The element must have
     * data-path attribute with its correct path.
     */
    _selectPath: function(e) {
      var target = e.target;
      while (true) {
        if (!target || target === document.body) {
          return;
        }
        if (target.nodeName && target.nodeName === 'PAPER-ITEM') {
          break;
        }
        if (!target.parentNode) {
          return;
        }
        target = target.parentNode;
      }
      var path = target.dataset ? target.dataset.path : null;
      if (!path) {
        return;
      }
      this.fire('raml-path-selected', {
        path: path
      });
    },
    /**
     * Computes if the tree item should have the `selected` class
     * indicating that the item is currently selected.
     *
     * @param {String} selectedPath Currently selected path
     * @param {String} path Item's (element's) path
     * @param {Number} index Optional index of the item in the view.
     * If set it means that the item is a method of a resource.
     * @return {String} Either empty string or `selected` if the path match.
     */
    _computeItemSelectableClass: function(selectedPath, path, index) {
      if (index !== undefined) {
        path = path + '.methods.' + index;
      }
      if (path === selectedPath) {
        return 'selected';
      }
      return '';
    },

    // Computes if selected path equals current item path.
    _computeIsSelected: function(selectedPath, path) {
      if (!selectedPath || !path) {
        return false;
      }
      return selectedPath === path;
    },
    /**
     * Scrolls to the element if the element is not in view.
     */
    scrollElementIntoView: function() {
      if (this.scrollIntoViewIfNeeded) {
        this.scrollIntoViewIfNeeded();
      } else if (this.scrollIntoView) {
        this.scrollIntoView();
      }
    },

    __indentPixelsChanged(_indentPixels) {
      if (!_indentPixels) {
        _indentPixels = '0px';
      }
      this.customStyle['--indent-size-padding'] = _indentPixels;
      this.updateStyles();
    }
  };
})(window);
</script>
<dom-module id="raml-tree-item-styles" assetpath="bower_components/raml-path-selector/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--raml-docs-tree-item-element);
      background-color: var(--raml-docs-tree-item-element-background, transparent);

      --selection-color: var(--raml-path-selector-selection-color, #fafafa);
      --selection-background-color: var(--raml-path-selector-selection-background-color, #00A2DF);

      --paper-item-focused-before: {
        background-color: transparent;
      };

      --indent-size-padding: 0px;

      --method-display-box: {
        margin-right: 8px;
        display: block;
        background: var(--method-display-background-color, rgba(128, 128, 128, 0.12));
        color: var(--method-display-color, rgb(128, 128, 128));
        padding: 0px 4px;
        border-radius: 2px;
        font-size: 14px;
        text-transform: uppercase;
      };

      --method-display-box-hover: {
        background: var(--method-display-background-color-hover, --selection-color);
        color: var(--method-display-color-hover, --selection-background-color);
      };

      --method-display-box-selected: {
        background: var(--method-display-background-color-hover, --selection-color);
        color: var(--method-display-color-hover, --selection-background-color);
      };

      --method-display-box-get: {
        background: var(--method-display-get-background-color, rgba(0, 128, 0, 0.12));
        color: var(--method-display-get-color, rgb(0, 128, 0));
      };

      --method-display-box-post: {
        background: var(--method-display-post-background-color, rgba(33, 150, 243, 0.12));
        color: var(--method-display-post-color, rgb(33, 150, 243));
      };

      --method-display-box-put: {
        background: var(--method-display-put-background-color, rgba(255, 165, 0, 0.12));
        color: var(--method-display-put-color, rgb(255, 165, 0));
      };

      --method-display-box-delete: {
        background: var(--method-display-delete-background-color, rgba(244, 67, 54, 0.12));
        color: var(--method-display-delete-color, rgb(244, 67, 54));
      };

      --method-display-box-patch: {
        background: var(--method-display-patch-background-color, rgba(156, 39, 176, 0.12));
        color: var(--method-display-patch-color, rgb(156, 39, 176));
      };
    }

    :host(:focus),
    :focus {
      outline: var(--raml-docs-tree-outline, none);
    }

    paper-item {
      min-height: 44px;
      padding: 0px 16px;
      cursor: pointer;
      @apply(--raml-docs-tree-item);
      background-color: var(--raml-docs-tree-item-background, transparent);
      color: var(--raml-docs-tree-item-color, #6b6c6d);
      border-left: 4px transparent solid;
      transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
    }

    paper-item:not(.selected):hover,
    paper-item:not(.selected):active {
      background-color: var(--raml-docs-tree-item-hover-selector-color, --selection-background-color);
      color: var(--raml-docs-tree-item-color-hovered, --selection-color);
    }

    .selected {
      background-color: var(--raml-docs-tree-item-selected-selector-color, --selection-background-color);
      color: var(--raml-docs-tree-item-color-selected, --selection-color);
    }

    .indentable-content {
      padding-left: var(--indent-size-padding);
    }

    .enter-button {
      color: var(--raml-path-selector-toggle-icon-color, rgba(0, 0, 0, 0.54));
      transform: rotateZ(-90deg);
    }

    .method-name-item {
      padding-left: 24px;
    }

    .method {
      @apply(--method-display-box);
    }

    .method.get {
      @apply(--method-display-box-get);
    }

    .method.post {
      @apply(--method-display-box-post);
    }

    .method.put {
      @apply(--method-display-box-put);
    }

    .method.delete {
      @apply(--method-display-box-delete);
    }

    .method.patch {
      @apply(--method-display-box-patch);
    }

    paper-item:not(.selected):hover .method {
      @apply(--method-display-box-hover);
    }

    paper-item.selected .method {
      @apply(--method-display-box-selected);
    }

    .method-description {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .method-display {
      @apply(--layout-flex);
    }
    </style>
  </template>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(g) {
  'use strict';
  
  g.RamlBehaviors = g.RamlBehaviors || {};
  /**
   * Common properties and methods narrow full screen panels.
   *
   * @polymerBehavior RamlBehaviors.PathSelectorBehavior
   */
  g.RamlBehaviors.PathSelectorBehavior = {
    /**
     * Fired when the user requested "back" in the tree structure.
     *
     * @event raml-path-selector-nav-back
     */
    properties: {
      // Currently selected path.
      selectedPath: String,
      // If set this view is being displayed. It will animate entry or exit.
      opened: {
        type: Boolean,
        observer: '_openedChanged'
      }
    },

    // Fires the `raml-path-selector-nav-back` event.
    back: function() {
      this.fire('raml-path-selector-nav-back');
    },
    /**
     * Animates entry / exit for the panel.
     */
    _openedChanged: function(opened) {
      if (opened) {
        this.style.display = 'block';
        if (this.__closeTimer) {
          this.cancelAsync(this.__closeTimer);
          this.__closeTimer = undefined;
        }
        Polymer.RenderStatus.afterNextRender(this, function() {
          this.transform('translate3d(0, 0, 0)');
        });
      } else {
        this.transform('translate3d(100%, 0, 0)');
        this.__closeTimer = this.async(function() {
          this.style.display = 'none';
        }, 300);
      }
    }
  };
})(window);
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<raml-type-tree-item>` is an element that is a list item in types listing.

This element is intended to work with `<raml-path-selector>`.

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-tree-item-element` | Mixin applied to the element | `{}`
`--raml-docs-tree-item-element-background` | Background color of the element | `transparent`
`--raml-docs-tree-item` | Mixin applied to each tree item  | `{}`
`--raml-docs-tree-item-background` | Background color of the tree item.  | `transparent`
`--raml-docs-tree-item-hover-selector-color` | Selection color of hovered tree item  | `#F5F5F5`
`--raml-docs-tree-item-selected-selector-color` | Selection color of the selected item | `rgba(3, 169, 244, 0.24)`
`--raml-docs-tree-outline` | An outline of focused item | `none`

@element raml-type-tree-item
@demo demo/index.html
-->
<dom-module id="raml-type-tree-item" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="raml-tree-item-styles"></style>
    <paper-item data-path$="[[path]]" on-tap="_selectPath" class$="[[_computeItemSelectableClass(selectedPath, path)]]">
      <span class="indentable-content">[[_computeName(type.*)]]</span>
    </paper-item>
  </template>
  <script>
  Polymer({
    is: 'raml-type-tree-item',

    behaviors: [RamlBehaviors.RamlTreeItemBehavior],

    properties: {
      // A documentation item from the RAML's documentation node.
      type: Object
    },

    _computeName: function(record) {
      if (!record || !record.base) {
        return;
      }
      var type = record.base;
      return type.displayName || type.name || type.key;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><dom-module id="path-selector-styles" assetpath="bower_components/raml-path-selector/">
  <template>
    <style>
    :host {
      display: none;
      @apply(--layout-fit);
      background-color: #fff;

      transition-property: -webkit-transform;
      transition-property: transform;

      -webkit-transition-duration: 0.3s;
      transition-duration: 0.3s;

      -webkit-transform: translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0);

      z-index: 1;
    }

    .section-title {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      cursor: pointer;
    }

    .section-title h3 {
      @apply(--layout-flex);
      padding-left: 0;
    }

    .back-button {
      color: var(--raml-path-selector-back-icon-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
    }

    .back-button:hover {
      color: var(--raml-path-selector-back-icon-color-hover, rgba(0, 0, 0, 0.87));
    }
    </style>
  </template>
</dom-module>
<!--
The `path-selector-resource` is a full screen display for the resources selector.

See demo (with narrow layout enabled) for an example.

## Styling

Custom property | Description | Default
----------------|-------------|----------
`--raml-path-selector-back-icon-color` | Color of the "back" icon | `rgba(0, 0, 0, 0.54)`
`--raml-path-selector-back-icon-color-hover` | Color of the "back" icon when hovered | `rgba(0, 0, 0, 0.87)`

@element path-selector-resource
@demo demo/index.html
-->
<dom-module id="path-selector-resource" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="raml-tree-item-styles"></style>
    <style include="path-selector-styles"></style>
    <style>
    paper-item {
      white-space: nowrap;
    }
    </style>
    <template is="dom-if" if="[[opened]]">
      <div class="section-title">
        <paper-icon-button on-tap="back" class="back-button" icon="arc:chevron-left" noink="[[noink]]"></paper-icon-button>
        <h3>[[resourceName]]</h3>
      </div>
      <template is="dom-repeat" items="[[methods]]">
        <paper-item data-path$="[[path]].methods.[[index]]" on-tap="_selectPath" class$="method-name-item [[_computeItemSelectableClass(selectedPath, path, index)]]" title$="[[item.method]] [[item.description]]">
          <span class="indentable-content method-description">
            <span class$="[[_computeMethodClass(item.method)]]">[[item.method]]</span>
          <span class="method-display">[[item.displayName]]</span>
          </span>
        </paper-item>
      </template>
      <template is="dom-repeat" items="[[resources]]">
        <raml-resource-tree-item indent="1" indent-size="12" selected-path="[[selectedPath]]" resource="[[item]]" path="[[_computeSubresourcePath(path, index)]]" opened="[[itemsOpened]]" narrow=""></raml-resource-tree-item>
      </template>
    </template>
  </template>
  <script>
  Polymer({
    is: 'path-selector-resource',

    behaviors: [RamlBehaviors.RamlTreeItemBehavior, RamlBehaviors.PathSelectorBehavior],

    properties: {
      /**
       * List of types nodes.
       */
      resources: Array,
      // List of methods in this resource
      methods: Array,

      itemsOpened: Boolean,
      // Title to display.
      resourceName: {
        type: String,
        value: function() {
          return 'Resources';
        }
      },
      // Item's path in the recursive structure
      path: {
        type: String,
        value: function() {
          return '';
        }
      },
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    },

    /**
     * Computes CSS class name for the HTTP method label.
     *
     * @param {String} method an HTTP method name.
     * @return {String} CSS class name always starting with the `method` class.
     */
    _computeMethodClass: function(method) {
      if (!method) {
        return;
      }
      method = method.toLowerCase();
      var clazz = 'method ';
      switch (method) {
        case 'get':
        case 'post':
        case 'put':
        case 'delete':
        case 'patch':
          clazz += method;
          break;
      }
      return clazz;
    },

    // Computes a path for sub resource.
    _computeSubresourcePath: function(path, index) {
      var result = '';
      if (path) {
        result += path + '.';
      }
      result += path + 'resources.' + index;
      return result;
    }
  });
  </script>
</dom-module>
<!--
The `<raml-resource-tree-item>` is an element that displays a resource
part of the API structure tree. It contains the resource, it's methods and
sub-resources.

This element is intended to work with `<raml-path-selector>`.

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-tree-item-element` | Mixin applied to the element | `{}`
`--raml-docs-tree-item-element-background` | Background color of the element | `transparent`
`--raml-docs-tree-children-margin` | Resource's children left margin.  | `24px`
`--raml-docs-tree-item` | Mixin applied to each tree item  | `{}`
`--raml-docs-tree-item-background` | Background color of the tree item.  | `transparent`
`--raml-docs-tree-item-hover-selector-color` | Selection color of hovered tree item  | `#F5F5F5`
`--raml-docs-tree-item-selected-selector-color` | Selection color of the selected item | `rgba(3, 169, 244, 0.24)`
`--raml-docs-tree-item-selected-color` | Color of the selected item | `#000`
`--raml-docs-tree-outline` | An outline of focused item | `none`
`--method-display-background-color` | Background color of the method label box | `rgba(128, 128, 128, 0.12)`
`--method-display-color` | Font color of the method label box | `rgb(128, 128, 128)`
`--method-display-get-background-color` | Background color of the GET method label box | `rgba(0, 128, 0, 0.12)`
`--method-display-get-color` | Font color of the GET method label box | `rgb(0, 128, 0)`
`--method-display-post-background-color` | Background color of the POST method label box | `rgba(33, 150, 243, 0.12)`
`--method-display-post-color` | Font color of the POST method label box | `rgb(33, 150, 243)`
`--method-display-put-background-color` | Background color of the PUT method label box | `rgba(255, 165, 0, 0.12)`
`--method-display-put-color` | Font color of the PUT method label box | `rgb(255, 165, 0)`
`--method-display-delete-background-color` | Background color of the DELETE method label box | `rgba(244, 67, 54, 0.12)`
`--method-display-delete-color` | Font color of the DELETE method label box | `rgb(244, 67, 54)`
`--method-display-patch-background-color` | Background color of the PATCH method label box | `rgba(156, 39, 176, 0.12)`
`--method-display-patch-color` | Font color of the PATCH method label box | `rgb(156, 39, 176)`

@element raml-resource-tree-item
@demo demo/index.html
-->
<dom-module id="raml-resource-tree-item" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="raml-tree-item-styles">
    *:focus {
      outline: none;
    }

    .toggle-button {
      transition: transform 0.35s ease;
      transform: rotateZ(-90deg);
    }

    /* In shaggy DOM there must be an exact path for recursive elements */
    :host([opened])>paper-item>paper-icon-button.toggle-button {
      transform: rotateZ(0deg)
    }

    .resource-name {
      @apply(--layout-flex);
    }

    paper-item {
      white-space: nowrap;
    }

    :host([narrow]) .resource-details-item {
      padding-right: 0;
    }
    </style>
    <paper-item data-path$="[[path]]" on-tap="_selectPath" class$="indentable-content resource-details-item [[_computeItemSelectableClass(selectedPath, path)]]" title$="[[resourceTitle]]" id="resource">
      <paper-icon-button class="toggle-button" icon="arc:keyboard-arrow-down" on-tap="toggle" noink="[[noink]]"></paper-icon-button>
      <span class="resource-name">[[_getName(resource)]]</span>
      <paper-icon-button class="enter-button" icon="arc:keyboard-arrow-down" hidden$="[[!narrow]]" on-tap="_enterResource" noink="[[noink]]"></paper-icon-button>
    </paper-item>
    <iron-collapse id="collapse" opened="[[opened]]">
      <div class="children">
        <template is="dom-repeat" items="[[resource.methods]]">
          <paper-item data-path$="[[path]].methods.[[index]]" on-tap="_selectPath" class$="method-name-item [[_computeItemSelectableClass(selectedPath, path, index)]]" title$="[[item.description]]">
            <span class="indentable-content method-description">
              <span class$="[[_computeMethodClass(item.method)]]">[[item.method]]</span>
            <span class="method-display">[[item.displayName]]</span>
            </span>
          </paper-item>
        </template>
        <template is="dom-repeat" items="[[resource.resources]]">
          <raml-resource-tree-item indent="[[_computeIndent(indent)]]" indent-size="24" selected-path="[[selectedPath]]" resource="[[item]]" path="[[path]].resources.[[index]]" narrow="[[narrow]]" noink="[[noink]]"></raml-resource-tree-item>
        </template>
      </div>
    </iron-collapse>
    <path-selector-resource resource-name="[[_getName(resource)]]" resources="[[resource.resources]]" methods="[[resource.methods]]" selected-path="[[selectedPath]]" items-opened="[[opened]]" path="[[path]]" noink="[[noink]]"></path-selector-resource>
  </template>
  <script>
  Polymer({
    is: 'raml-resource-tree-item',
    behaviors: [RamlBehaviors.RamlTreeItemBehavior, Polymer.IronA11yKeysBehavior],
    properties: {
      // A resource object from the RAML definition
      resource: Object,
      // If set the item will have methods and 1st level subresources visible
      opened: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },
      // Title attribute of the resource item
      resourceTitle: {
        type: String,
        computed: '_computeResourceTitle(resource.*)'
      },
      // Computed value, true if method of this resource is selected.
      methodIsSelected: {
        type: Boolean,
        value: false,
        computed: '_computeIsSelectedMethod(isSelected, selectedPath, path, _isReady)'
      },
      // True when the element has been initialized
      _isReady: {
        type: Boolean,
        value: false
      },
      // True if rendered in narrow layout.
      narrow: {
        type: Boolean,
        reflectToAttribute: true,
        value: false
      },
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    },

    observers: [
      '_isSelectedChanged(isSelected, methodIsSelected, _isReady)',
      '_openedChanged(opened)'
    ],

    listeners: {
      'opened-changed': '_openedHandler',
      'raml-path-selector-nav-back': '_onNarrowPageBack'
    },

    keyBindings: {
      'left': '_onLeftKey',
      'right': '_onRightKey'
    },

    ready: function() {
      this._isReady = true;
    },

    // Returns a `displayName` or `relativeUri` for the resource.
    _getName: function(resource) {
      return resource.displayName || resource.relativeUri;
    },
    // Returns a `displayName` or method uppercased for the method.
    _getMethodName: function(item) {
      return item.displayName || item.method.toUpperCase();
    },
    // Toggles `opened` attribute
    toggle: function(e) {
      e.preventDefault();
      e.stopPropagation();
      this.opened = !this.opened;
    },
    // Compute resource's title attribute
    _computeResourceTitle: function() {
      var r = this.resource;
      if (!r || !r.relativeUri) {
        return '';
      }
      var result = r.relativeUri;
      if (r.description) {
        result += ': ' + r.description;
      }
      return result;
    },
    /**
     * Sets the `tabindex` property if the selection changes.
     */
    _isSelectedChanged: function(isSelected, methodIsSelected, ready) {
      if ((isSelected || methodIsSelected) && ready) {
        this.setAttribute('tabindex', '0');
        this.scrollElementIntoView();
        if (!this.opened) {
          this.set('opened', true);
        }
        this.focus();
      } else {
        this.setAttribute('tabindex', '-1');
      }
    },
    // Computes if any method of this resource is currently selected.
    _computeIsSelectedMethod: function(isSelected, selectedPath, path, ready) {
      if (isSelected === true || !selectedPath || !path || !ready) {
        return false;
      }
      if (selectedPath.indexOf(path + '.methods.') === 0) {
        return true;
      }
      return false;
    },
    /**
     * Fires an event to parent elements that this element has been opened and they should be
     * opened as well.
     */
    _openedChanged: function(opened) {
      if (opened) {
        this.fire('opened-changed', {
          value: true
        });
      }
    },
    /**
     * Handler for the `opened-changed` event from the child elements.
     * It opens this element if child was opened.
     */
    _openedHandler: function(event) {
      if (event.target === this) {
        return;
      }
      if (event.detail.value) {
        this.opened = true;
      }
    },
    /**
     * Handler that is called when the left key is pressed.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onLeftKey: function(event) {
      if (!this.isSelected) {
        return;
      }
      this.opened = false;
      event.detail.keyboardEvent.preventDefault();
    },
    /**
     * Handler that is called when the right key is pressed.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onRightKey: function(event) {
      if (!this.isSelected) {
        return;
      }
      this.opened = true;
      event.detail.keyboardEvent.preventDefault();
    },
    /**
     * Computes child resource indent leve.
     *
     * @param {Number} indent Current indent level
     * @return {Number} Child indent level.
     */
    _computeIndent: function(indent) {
      indent = Number(indent);
      if (indent !== indent) {
        indent = 0;
      }
      return ++indent;
    },

    /**
     * Computes CSS class name for the HTTP method label.
     *
     * @param {String} method an HTTP method name.
     * @return {String} CSS class name always starting with the `method` class.
     */
    _computeMethodClass: function(method) {
      if (!method) {
        return;
      }
      method = method.toLowerCase();
      var clazz = 'method ';
      switch (method) {
        case 'get':
        case 'post':
        case 'put':
        case 'delete':
        case 'patch':
          clazz += method;
          break;
      }
      return clazz;
    },

    _enterResource: function(e) {
      e.preventDefault();
      e.stopPropagation();
      var elm = this.$$('path-selector-resource');
      elm.opened = true;
    },

    _onNarrowPageBack: function(e) {
      e.preventDefault();
      e.stopPropagation();
      var elm = this.$$('path-selector-resource');
      elm.opened = false;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<raml-documentation-tree-item>` is an element that displays a list of
documentation part of the API structure tree.
It contains titles of the documentation array.

This element is intended to work with `<raml-path-selector>`.

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-tree-item-element` | Mixin applied to the element | `{}`
`--raml-docs-tree-item-element-background` | Background color of the element | `transparent`
`--raml-docs-tree-item` | Mixin applied to each tree item  | `{}`
`--raml-docs-tree-item-background` | Background color of the tree item.  | `transparent`
`--raml-docs-tree-item-hover-selector-color` | Selection color of hovered tree item  | `#F5F5F5`
`--raml-docs-tree-item-selected-selector-color` | Selection color of the selected item | `rgba(3, 169, 244, 0.24)`
`--raml-docs-tree-outline` | An outline of focused item | `none`

@element raml-documentation-tree-item
@demo demo/index.html
-->
<dom-module id="raml-documentation-tree-item" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="raml-tree-item-styles"></style>
    <paper-item data-path$="[[path]]" on-tap="_selectPath" class$="[[_computeItemSelectableClass(selectedPath, path)]]">
      <span class="indentable-content">[[doc.title]]</span>
    </paper-item>
  </template>
  <script>
  Polymer({
    is: 'raml-documentation-tree-item',

    behaviors: [RamlBehaviors.RamlTreeItemBehavior],

    properties: {
      // A documentation item from the RAML's documentation node.
      doc: Object
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `path-selector-documentation` is a full screen display for the documentation list.

See demo (with narrow layout enabled) for an example.

## Styling

Custom property | Description | Default
----------------|-------------|----------
`--raml-path-selector-back-icon-color` | Color of the "back" icon | `rgba(0, 0, 0, 0.54)`
`--raml-path-selector-back-icon-color-hover` | Color of the "back" icon when hovered | `rgba(0, 0, 0, 0.87)`

@element path-selector-documentation
@demo demo/index.html
-->
<dom-module id="path-selector-documentation" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="path-selector-styles"></style>
    <template is="dom-if" if="[[opened]]">
      <div class="section-title">
        <paper-icon-button on-tap="back" class="back-button" icon="arc:chevron-left" noink="[[noink]]"></paper-icon-button>
        <h3>Documentation</h3>
      </div>
      <template is="dom-repeat" items="[[documentation]]">
        <raml-documentation-tree-item indent="1" indent-size="24" selected-path="[[selectedPath]]" doc="[[item]]" path="documentation.[[index]]"></raml-documentation-tree-item>
      </template>
    </template>
  </template>
  <script>
  Polymer({
    is: 'path-selector-documentation',
    properties: {
      /**
       * List of documentation nodes.
       */
      documentation: Array,
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    },

    behaviors: [RamlBehaviors.PathSelectorBehavior]
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `path-selector-types` is a full screen display for the types.

See demo (with narrow layout enabled) for an example.

## Styling

Custom property | Description | Default
----------------|-------------|----------
`--raml-path-selector-back-icon-color` | Color of the "back" icon | `rgba(0, 0, 0, 0.54)`
`--raml-path-selector-back-icon-color-hover` | Color of the "back" icon when hovered | `rgba(0, 0, 0, 0.87)`

@element path-selector-types
@demo demo/index.html
-->
<dom-module id="path-selector-types" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="path-selector-styles"></style>
    <template is="dom-if" if="[[opened]]">
      <div class="section-title">
        <paper-icon-button on-tap="back" class="back-button" icon="arc:chevron-left" noink="[[noink]]"></paper-icon-button>
        <h3>Types</h3>
      </div>
      <template is="dom-repeat" items="[[types]]">
        <raml-type-tree-item indent="1" indent-size="24" selected-path="[[selectedPath]]" type="[[item]]" path="types.[[index]]"></raml-type-tree-item>
      </template>
    </template>
  </template>
  <script>
  Polymer({
    is: 'path-selector-types',

    behaviors: [RamlBehaviors.PathSelectorBehavior],

    properties: {
      /**
       * List of types nodes.
       */
      types: Array,
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    }
  });
  </script>
</dom-module>
<!--
The `<raml-structure-tree>` renders a list view for the `<raml-path-selector>`.
See docs for `<raml-path-selector>` for element's documentation.

## Styling

Custom property | Description | Default
----------------|-------------|----------
`--raml-structure-tree` | Mixin applied to this element | `{}`
`--arc-font-subhead` | Theme element, mixin applied to the tree section headers. The color will be overritten by the `--raml-path-selector-header-color` variable.  | ``
`--raml-path-selector-header-color` | Color of the section headers | `rgba(0, 0, 0, 0.54)`
`--raml-path-selector-headers` | Mixin applied to the tree section headers. This will ovveride all other values. | `{}`
`--raml-path-selector-toggle-icon-color` | Color of the toggle icon. | `rgba(0, 0, 0, 0.54)`
`--raml-path-selector-toggle-icon-hover-color` | Color of the toggle icon when hovered. | `rgba(0, 0, 0, 0.78)`

@element raml-structure-tree
@demo demo/index.html
-->
<dom-module id="raml-structure-tree" assetpath="bower_components/raml-path-selector/">
  <template>
    <style include="raml-tree-item-styles">
     :host {
      display: block;
      background-color: inherit;
      color: inherit;
      overflow: auto;
      position: relative;
      @apply(--raml-structure-tree);
    }

    h3 {
      @apply(--arc-font-subhead);
      color: var(--raml-path-selector-header-color, rgba(0, 0, 0, 0.54));
      padding-left: 14px;
      @apply(--raml-path-selector-headers);
    }

    *[hidden] {
      display: none;
    }

    .section-title {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      cursor: pointer;
    }

    .section-title h3 {
      @apply(--layout-flex);
      padding-left: 0;
      font-weight: 400;
    }

    .toggle-button {
      /*width: 32px;
      height: 32px;*/
      color: var(--raml-path-selector-toggle-icon-color, rgba(0, 0, 0, 0.54));
      transform: rotateZ(-90deg);
      transition: color 0.25s linear, transform 0.3s linear;
    }

    .toggle-button.opened {
      transform: rotateZ(0deg)
    }

    .toggle-button:hover {
      color: var(--raml-path-selector-toggle-icon-hover-color, rgba(0, 0, 0, 0.78));
    }
    </style>
    <paper-item on-tap="_selectSummary" class$="[[_computeItemSelectedClass(selectedPath, 'summary')]]" title="API sumamry">API summary</paper-item>
    <template is="dom-if" if="[[hasDocumentation]]">
      <section class="documentation">
        <div class="section-title">
          <paper-icon-button data-section="documentation" on-tap="_toggleSection" class$="toggle-button[[_computeToggleIconClass(documentationOpened)]]" icon="arc:keyboard-arrow-down" noink="[[noink]]"></paper-icon-button>
          <h3 data-section="documentation" on-tap="_toggleSection">Documentation</h3>
          <paper-icon-button class="enter-button" icon="arc:keyboard-arrow-down" hidden$="[[!narrow]]" data-section="documentation" on-tap="_enterSection" noink="[[noink]]"></paper-icon-button>
        </div>
        <iron-collapse opened="[[documentationOpened]]">
          <div>
            <template is="dom-repeat" items="[[raml.documentation]]">
              <raml-documentation-tree-item indent="1" indent-size="24" selected-path="[[selectedPath]]" doc="[[item]]" path="documentation.[[index]]"></raml-documentation-tree-item>
            </template>
          </div>
        </iron-collapse>
      </section>
    </template>

    <template is="dom-if" if="[[hasTypes]]">
      <section class="documentation">
        <div class="section-title">
          <paper-icon-button data-section="types" on-tap="_toggleSection" class$="toggle-button[[_computeToggleIconClass(typesOpened)]]" icon="arc:keyboard-arrow-down" noink="[[noink]]"></paper-icon-button>
          <h3 data-section="types" on-tap="_toggleSection">Types</h3>
          <paper-icon-button class="enter-button" icon="arc:keyboard-arrow-down" hidden$="[[!narrow]]" data-section="types" on-tap="_enterSection" noink="[[noink]]"></paper-icon-button>
        </div>
        <iron-collapse opened="[[typesOpened]]">
          <div>
            <template is="dom-repeat" items="[[_objectToArray(raml.types)]]">
              <raml-type-tree-item indent="1" indent-size="24" selected-path="[[selectedPath]]" type="[[item]]" path="types.[[index]]"></raml-type-tree-item>
            </template>
          </div>
        </iron-collapse>
      </section>
    </template>

    <template is="dom-if" if="[[hasResources]]">
      <section class="documentation">
        <div class="section-title">
          <paper-icon-button data-section="resources" on-tap="_toggleSection" class$="toggle-button[[_computeToggleIconClass(resourcesOpened)]]" icon="arc:keyboard-arrow-down" noink="[[noink]]"></paper-icon-button>
          <h3 data-section="resources" on-tap="_toggleSection">Resources</h3>
          <paper-icon-button class="enter-button" icon="arc:keyboard-arrow-down" hidden$="[[!narrow]]" data-section="resources" on-tap="_enterSection" noink="[[noink]]"></paper-icon-button>
        </div>
        <iron-collapse opened="[[resourcesOpened]]">
          <div>
            <template is="dom-repeat" items="[[raml.resources]]" resources="">
              <raml-resource-tree-item indent="1" indent-size="24" selected-path="[[selectedPath]]" resource="[[item]]" path="resources.[[index]]" opened="[[opened]]" narrow="[[narrow]]" noink="[[noink]]"></raml-resource-tree-item>
            </template>
          </div>
        </iron-collapse>
      </section>
    </template>
    <path-selector-documentation noink="[[noink]]" documentation="[[raml.documentation]]" selected-path="[[selectedPath]]"></path-selector-documentation>
    <path-selector-types noink="[[noink]]" types="[[_objectToArray(raml.types)]]" selected-path="[[selectedPath]]"></path-selector-types>
    <path-selector-resource noink="[[noink]]" resources="[[raml.resources]]" selected-path="[[selectedPath]]" items-opened="[[opened]]"></path-selector-resource>
  </template>
  <script>
  Polymer({
    is: 'raml-structure-tree',
    behaviors: [Polymer.RamlBehavior],

    /**
     * Fired when the path change.
     *
     * @event raml-selected-path-changed
     * @param {String} path The selected path
     */

    properties: {
      // Currently selected by the user path.
      selectedPath: {
        type: String,
        notify: true
      },
      // If true then the first level of resources will be opened by default.
      opened: {
        type: Boolean
      },
      // Is set to true when the RAML's `resources` array is not empty
      hasDocumentation: Boolean,
      // Is set to true when the RAML's `documentation` array is not empty
      hasResources: Boolean,
      /**
       * Set to true when the RAML's `types` array is not empty
       * and the path selector should render types list.
       */
      hasTypes: Boolean,
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },

      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      /**
       * If true then the documentation section will be exanded if the RAML
       * contains documentation.
       */
      documentationOpened: Boolean,
      /**
       * If true then the types list section will be exanded if the RAML
       * contains types.
       */
      typesOpened: Boolean,
      /**
       * If true then the resources list section will be exanded if the RAML
       * contains resources.
       */
      resourcesOpened: Boolean,
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    },

    hostAttributes: {
      role: 'listbox',
      tabindex: '0'
    },

    listeners: {
      'raml-path-selected': '_onPathSelected',
      'raml-path-selector-nav-back': '_onNarrowPageBack'
    },

    observers: [
      '_patchChanged(selectedPath)',
      '_ramlChanged(raml)'
    ],

    // Sets the `selectedPath` value form the `raml-path-selected` event.
    _onPathSelected: function(e) {
      e.stopPropagation();
      this.set('selectedPath', e.detail.path);
    },

    // Fires the `raml-selected-path-changed` event when the path changes.
    _patchChanged: function(selectedPath) {
      this.fire('raml-selected-path-changed', {
        path: selectedPath
      });
    },

    /**
     * Sets the path to the first available item.
     */
    _ramlChanged: function(raml) {
      if (!raml) {
        this.set('selectedPath', undefined);
      }
    },

    _computeItemSelectedClass: function(selectedPath, itemsPath) {
      return selectedPath === itemsPath ? 'selected' : '';
    },

    _selectSummary: function() {
      this.set('selectedPath', 'summary');
    },

    /**
     * Transforms Object to Array and sets a `key` property on each
     * array item as an original key name from the object.
     *
     * @param {Object} obj The object to translate to array
     * @return {Array|undefined} Array or undefined if not passed an object.
     */
    _objectToArray: function(obj) {
      if (!obj) {
        return;
      }
      var keys = Object.keys(obj);
      return keys.map(function(key) {
        var value = Object.assign({}, obj[key]);
        value.key = key;
        return value;
      });
    },
    /**
     * Computes toggle icon active CSS class name.
     *
     * @param {String} sectionOpened True if the correspoinding section is
     * opened.
     * @return {String} Toggle button active CSS class name.
     */
    _computeToggleIconClass: function(sectionOpened) {
      var clazz = '';
      if (sectionOpened) {
        clazz += ' opened';
      }
      return clazz;
    },
    // Toggles visibility of navigation sections.
    _toggleSection: function(e) {
      var section = this._getEventSection(e);
      var varName = section + 'Opened';
      this[varName] = !this[varName];
    },
    /**
     * Gets the value nof the `data-section` propery of the first
     * element that contain this property in even't path.
     *
     * This function throws an error if event's path is not defined or when
     * `data-section` wasn't found in any element in the path.
     *
     * @param {Event} e An event object associated with user action
     * @return {String} section name associated with click target
     * @throws It throws an arror if event's path is not defined or
     * if section is not set in any element in the path.
     */
    _getEventSection: function(e) {
      e = Polymer.dom(e);
      var path = e.path;
      if (!path || !path.length) {
        throw new Error('Event path not defined.');
      }
      var section;
      while (true) {
        var _target = path.shift();
        if (!_target) {
          var msg = 'Invalid node selection. No data-section found in path.';
          throw new Error(msg);
        }
        if (_target.dataset && _target.dataset.section) {
          section = _target.dataset.section;
          break;
        }
      }
      return section;
    },

    _getNavElementForSection: function(section) {
      var elm;
      switch (section) {
        case 'documentation':
          elm = this.$$('path-selector-documentation');
          break;
        case 'types':
          elm = this.$$('path-selector-types');
          break;
        case 'resources':
          elm = this.$$('path-selector-resource');
          break;
      }
      return elm;
    },

    _enterSection: function(e) {
      var section = this._getEventSection(e);
      var elm = this._getNavElementForSection(section);
      elm.opened = true;
      this._subpageSection = section;
    },

    _onNarrowPageBack: function() {
      var elm = this._getNavElementForSection(this._subpageSection);
      elm.opened = false;
    }
  });
  </script>
</dom-module>
<!--
Navigation element to select a path in the RAML structure. It displays RAML
API's structure in the tree view and allow to select a node and signal path
selected by the user.

The **selectedPath** is a property that is recognizable by most of the ARC
elements. It tells elements which view to render.
The path (or JSON path) is a string representing a path to the object in the
JSON structure. For example if selected view is to display a documentation for
the first method in the first resource in the RAML structure the path will
look like the following:
```
resources.0.methods.0
```

To better understand paths consider following RAML example
```yaml
#%RAML 1.0
title: Google Drive

types:
  type1: ...
  type2: ...
documentation:
  - title: Doc
    content: Documentation
/files:
  post: ...
  get: ...
  /{fileId}:
    path: ...
    get: ...
/apps:
  post: ...
  get: ...
```

##### The `summary` path
Represents a summary view of the RAML file. It's not a path in the JSON
structure (don't exists in RAML) but it's a virtual path to signal to display
the summary docs view.

##### The `resources` path

Path representing a resource documentation. Valid path requires presence of a
resource index in the RAML structure according to regexp:
```
(resource\.(\d+)-?)+
```
It can be recursive.

Examples:
- `resources.1` - second resource in the RAML structure, the `/apps` in example
- `resources.0.resources.0` - First sub-resource of the first resource, the `/files/{fileId}` in the example

##### The resources-methods path
Represents method documentation in the RAML. Valid path requires presence of a
mathod index in the resource structure according to regexp:
```
(resource\.(\d+)\.?)\.(method(\d+)\.?)
```
Examples:
- `resources.0.resources.0.methods.0` - First method in the first sub-resource of the first resource, the `PATCH /files/{fileId}` in the example
- `resources.1.methods.1` - Second method of the second resource, the `GET /apps` in the example


##### The `types` path
Represents a type documentation. Valid path requires presence of a
type index in the RAML structure according to regexp:
```
type\.(\d+)
```
Examples:
- `types.0` - First type in RAML structure, the `type1` in the example
- `types.1` - Second type in RAML structure, the `type2` in the example


##### The `documentation` path
Links to the documentation object in the RAML structure
```
documentation\.(\d+)
```
Examples:
- `documentation.0` - First element in the documentation list, the `Doc` documentation in the example.

See demo for working example.

## Usage
```html
<raml-path-selector first-level-opened resources-opened documentation-opened></raml-path-selector>
<raml-path-to-object></raml-path-to-object>

<script>
var selector = document.querySelector('raml-path-selector');
// This element is meant to work together with path selector.
var object = document.querySelector('raml-path-to-object');

// Sets the (enhanced) RAML object on the element
// See https://elements.advancedrestclient.com/elements/raml-json-enhance
window.addEventListener('raml-json-enhance-ready', function(e) {
  selector.raml = e.detail.json;
  object.raml =  e.detail.json;
});

// Fired when path selection changes
selector.addEventListener('selected-path-changed', function(e) {
  object.selectedPath = e.detail.value;
});

// Fired when the object for the path is computed.
// Though, it's a synchronous operation so the `selectedObject` can be read
// from the `object` element right after assigning the path value.
window.addEventListener('raml-selected-object-changed', function(e) {
  var selectedObject = e.detail.selectedObject;
  // Assign to request or documentation panel.
});
</script>
```

The tree items are collapsed by default. Use `first-level-opened`, `resources-opened`,
`documentation-opened` and `types-opened` attributes to control this behavior.

```
<raml-path-selector first-level-opened resources-opened documentation-opened></raml-path-selector>
```


## Responsive view
The element support `narrow` property to render additional controls for small screen.
In narrow layout the user can walk through the structure using separate screen for
each resource. In regular view only tree view is available. See demo for more
details.

## Styling
`<raml-path-selector>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-path-selector` | Mixin applied to the element | `{}`
`--raml-path-selector-background-color` | Background color of the element | `--primary-background-color`
`--raml-path-selector-color` | Font color applied to this element | `--primary-text-color`

See other elemets documentation more styling options.

@group RAML Elements
@element raml-path-selector
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="raml-path-selector" assetpath="bower_components/raml-path-selector/">
  <template>
    <style>
    :host {
      display: block;

      background-color: var(--raml-path-selector-background-color, --primary-background-color);
      color: var(--raml-path-selector-color, --primary-text-color);

      overflow: auto;
      @apply(--raml-path-selector);
    }
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <raml-structure-tree raml="[[raml]]" has-documentation="[[hasDocumentation]]" has-resources="[[hasResources]]" has-types="[[hasTypes]]" selected-path="{{selectedPath}}" opened="[[firstLevelOpened]]" narrow="[[_narrowValue]]" narrow-width="[[narrowWidth]]" documentation-opened="[[documentationOpened]]" types-opened="[[typesOpened]]" resources-opened="[[resourcesOpened]]" noink="[[noink]]"></raml-structure-tree>
    <template is="dom-if" if="[[aware]]" restamp="true">
      <raml-aware raml="{{raml}}" scope="[[aware]]"></raml-aware>
    </template>
  </template>
  <script>
  Polymer({
    is: 'raml-path-selector',
    behaviors: [Polymer.RamlBehavior],

    properties: {
      // Currently selected by the user path.
      selectedPath: {
        type: String,
        notify: true
      },
      // If true then the first level of resources will be opened by default.
      firstLevelOpened: {
        type: Boolean
      },
      /**
       * Computed value, true if the `documentation` array is not empty
       */
      hasDocumentation: {
        type: Boolean,
        readOnly: true
      },
      /**
       * Computed value, true if the `resources` array is not empty
       */
      hasResources: {
        type: Boolean,
        readOnly: true
      },
      /**
       * Computed value, true if the `types` object contains entries.
       */
      hasTypes: {
        type: Boolean,
        readOnly: true
      },
      // Name of the `<raml-aware>` scope, so it will fill the raml property.
      aware: String,
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      /**
       * If set it will override the narrow layout property and force
       * wide layout. Then it will also ignore the media queries settings.
       */
      forceWideLayout: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },
      // Computed value for the narrow view.
      _narrowValue: {
        type: Boolean,
        value: false,
        computed: '_computeNarrowValue(forceWideLayout, narrow)'
      },
      /**
       * If true then the documentation section will be exanded if the RAML
       * contains documentation.
       */
      documentationOpened: Boolean,
      /**
       * If true then the types list section will be exanded if the RAML
       * contains types.
       */
      typesOpened: Boolean,
      /**
       * If true then the resources list section will be exanded if the RAML
       * contains resources.
       */
      resourcesOpened: Boolean,
      /**
       * If true, the element will not produce a ripple effect when interacted with via the pointer.
       */
      noink: Boolean
    },

    observers: [
      '_ramlChanged(raml.*)'
    ],

    __resetVariables: function() {
      this._setHasDocumentation(undefined);
      this._setHasResources(undefined);
      this._setHasTypes(undefined);
    },
    /**
     * Instead of calling compute function for each property this
     * will compute initial variables state when RAML changed.
     */
    _ramlChanged: function(record) {
      this.__resetVariables();
      if (!record || !record.base) {
        return;
      }
      var raml = record.base;
      if (raml.documentation && raml.documentation.length) {
        this._setHasDocumentation(true);
      }
      if (raml.types && Object.keys(raml.types).length) {
        this._setHasTypes(true);
      }
      if (raml.resources && raml.resources.length) {
        this._setHasResources(true);
      }
    },
    /**
     * Computes the `narrowValue` property.
     * If `forceWideLayout` is set then it will always return `false`.
     * Otherwise it depends on the `narrow` value.
     */
    _computeNarrowValue: function(forceWideLayout, narrow) {
      if (forceWideLayout) {
        return false;
      }
      return narrow;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /** @polymerBehavior Polymer.IronMultiSelectableBehavior */
  Polymer.IronMultiSelectableBehaviorImpl = {
    properties: {

      /**
       * If true, multiple selections are allowed.
       */
      multi: {
        type: Boolean,
        value: false,
        observer: 'multiChanged'
      },

      /**
       * Gets or sets the selected elements. This is used instead of `selected` when `multi`
       * is true.
       */
      selectedValues: {
        type: Array,
        notify: true
      },

      /**
       * Returns an array of currently selected items.
       */
      selectedItems: {
        type: Array,
        readOnly: true,
        notify: true
      },

    },

    observers: [
      '_updateSelected(selectedValues.splices)'
    ],

    /**
     * Selects the given value. If the `multi` property is true, then the selected state of the
     * `value` will be toggled; otherwise the `value` will be selected.
     *
     * @method select
     * @param {string|number} value the value to select.
     */
    select: function(value) {
      if (this.multi) {
        if (this.selectedValues) {
          this._toggleSelected(value);
        } else {
          this.selectedValues = [value];
        }
      } else {
        this.selected = value;
      }
    },

    multiChanged: function(multi) {
      this._selection.multi = multi;
    },

    get _shouldUpdateSelection() {
      return this.selected != null ||
        (this.selectedValues != null && this.selectedValues.length);
    },

    _updateAttrForSelected: function() {
      if (!this.multi) {
        Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this);
      } else if (this._shouldUpdateSelection) {
        this.selectedValues = this.selectedItems.map(function(selectedItem) {
          return this._indexToValue(this.indexOf(selectedItem));
        }, this).filter(function(unfilteredValue) {
          return unfilteredValue != null;
        }, this);
      }
    },

    _updateSelected: function() {
      if (this.multi) {
        this._selectMulti(this.selectedValues);
      } else {
        this._selectSelected(this.selected);
      }
    },

    _selectMulti: function(values) {
      if (values) {
        var selectedItems = this._valuesToItems(values);
        // clear all but the current selected items
        this._selection.clear(selectedItems);
        // select only those not selected yet
        for (var i = 0; i < selectedItems.length; i++) {
          this._selection.setItemSelected(selectedItems[i], true);
        }
        // Check for items, since this array is populated only when attached
        if (this.fallbackSelection && this.items.length && !this._selection.get().length) {
          var fallback = this._valueToItem(this.fallbackSelection);
          if (fallback) {
            this.selectedValues = [this.fallbackSelection];
          }
        }
      } else {
        this._selection.clear();
      }
    },

    _selectionChange: function() {
      var s = this._selection.get();
      if (this.multi) {
        this._setSelectedItems(s);
      } else {
        this._setSelectedItems([s]);
        this._setSelectedItem(s);
      }
    },

    _toggleSelected: function(value) {
      var i = this.selectedValues.indexOf(value);
      var unselected = i < 0;
      if (unselected) {
        this.push('selectedValues',value);
      } else {
        this.splice('selectedValues',i,1);
      }
    },

    _valuesToItems: function(values) {
      return (values == null) ? null : values.map(function(value) {
        return this._valueToItem(value);
      }, this);
    }
  };

  /** @polymerBehavior */
  Polymer.IronMultiSelectableBehavior = [
    Polymer.IronSelectableBehavior,
    Polymer.IronMultiSelectableBehaviorImpl
  ];

</script>
<script>
  /**
  `iron-selector` is an element which can be used to manage a list of elements
  that can be selected.  Tapping on the item will make the item selected.  The `selected` indicates
  which item is being selected.  The default is to use the index of the item.

  Example:

      <iron-selector selected="0">
        <div>Item 1</div>
        <div>Item 2</div>
        <div>Item 3</div>
      </iron-selector>

  If you want to use the attribute value of an element for `selected` instead of the index,
  set `attrForSelected` to the name of the attribute.  For example, if you want to select item by
  `name`, set `attrForSelected` to `name`.

  Example:

      <iron-selector attr-for-selected="name" selected="foo">
        <div name="foo">Foo</div>
        <div name="bar">Bar</div>
        <div name="zot">Zot</div>
      </iron-selector>

  You can specify a default fallback with `fallbackSelection` in case the `selected` attribute does
  not match the `attrForSelected` attribute of any elements.

  Example:

        <iron-selector attr-for-selected="name" selected="non-existing"
                       fallback-selection="default">
          <div name="foo">Foo</div>
          <div name="bar">Bar</div>
          <div name="default">Default</div>
        </iron-selector>

  Note: When the selector is multi, the selection will set to `fallbackSelection` iff
  the number of matching elements is zero.

  `iron-selector` is not styled. Use the `iron-selected` CSS class to style the selected element.

  Example:

      <style>
        .iron-selected {
          background: #eee;
        }
      </style>

      ...

      <iron-selector selected="0">
        <div>Item 1</div>
        <div>Item 2</div>
        <div>Item 3</div>
      </iron-selector>

  @demo demo/index.html
  */

  Polymer({

    is: 'iron-selector',

    behaviors: [
      Polymer.IronMultiSelectableBehavior
    ]

  });

</script>
<!--
Material design: [Navigation drawer](https://www.google.com/design/spec/patterns/navigation-drawer.html)

`paper-drawer-panel` contains a drawer panel and a main panel.  The drawer
and the main panel are side-by-side with drawer on the left.  When the browser
window size is smaller than the `responsiveWidth`, `paper-drawer-panel`
changes to narrow layout.  In narrow layout, the drawer will be stacked on top
of the main panel.  The drawer will slide in/out to hide/reveal the main
panel.

Use the attribute `drawer` to indicate that the element is the drawer panel and
`main` to indicate that the element is the main panel.

Example:

    <paper-drawer-panel>
      <div drawer> Drawer panel... </div>
      <div main> Main panel... </div>
    </paper-drawer-panel>

The drawer and the main panels are not scrollable.  You can set CSS overflow
property on the elements to make them scrollable or use `paper-header-panel`.

Example:

    <paper-drawer-panel>
      <paper-header-panel drawer>
        <paper-toolbar></paper-toolbar>
        <div> Drawer content... </div>
      </paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar></paper-toolbar>
        <div> Main content... </div>
      </paper-header-panel>
    </paper-drawer-panel>

An element that should toggle the drawer will automatically do so if it's
given the `paper-drawer-toggle` attribute.  Also this element will automatically
be hidden in wide layout.

Example:

    <paper-drawer-panel>
      <paper-header-panel drawer>
        <paper-toolbar>
          <div>Application</div>
        </paper-toolbar>
        <div> Drawer content... </div>
      </paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <div>Title</div>
        </paper-toolbar>
        <div> Main content... </div>
      </paper-header-panel>
    </paper-drawer-panel>

To position the drawer to the right, add `right-drawer` attribute.

    <paper-drawer-panel right-drawer>
      <div drawer> Drawer panel... </div>
      <div main> Main panel... </div>
    </paper-drawer-panel>

### Styling

To change the main container:

    paper-drawer-panel {
      --paper-drawer-panel-main-container: {
        background-color: gray;
      };
    }

To change the drawer container when it's in the left side:

    paper-drawer-panel {
      --paper-drawer-panel-left-drawer-container: {
        background-color: white;
      };
    }

To change the drawer container when it's in the right side:

    paper-drawer-panel {
      --paper-drawer-panel-right-drawer-container: {
        background-color: white;
      };
    }

To customize the scrim:

    paper-drawer-panel {
      --paper-drawer-panel-scrim: {
        background-color: red;
      };
    }

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-drawer-panel-scrim-opacity` | Scrim opacity | 1
`--paper-drawer-panel-drawer-container` | Mixin applied to drawer container | {}
`--paper-drawer-panel-left-drawer-container` | Mixin applied to container when it's in the left side | {}
`--paper-drawer-panel-main-container` | Mixin applied to main container | {}
`--paper-drawer-panel-right-drawer-container` | Mixin applied to container when it's in the right side | {}
`--paper-drawer-panel-scrim` | Mixin applied to scrim | {}

@group Paper elements
@element paper-drawer-panel
@demo demo/index.html
@hero hero.svg
-->

<dom-module id="paper-drawer-panel" assetpath="bower_components/paper-drawer-panel/">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      iron-selector > #drawer {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background-color: white;

        -moz-box-sizing: border-box;
        box-sizing: border-box;

        @apply(--paper-drawer-panel-drawer-container);
      }

      .transition-drawer {
        transition: -webkit-transform ease-in-out 0.3s, width ease-in-out 0.3s, visibility 0.3s;
        transition: transform ease-in-out 0.3s, width ease-in-out 0.3s, visibility 0.3s;
      }

      .left-drawer > #drawer {
        @apply(--paper-drawer-panel-left-drawer-container);
      }

      .right-drawer > #drawer {
        left: auto;
        right: 0;

        @apply(--paper-drawer-panel-right-drawer-container);
      }

      iron-selector > #main {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;

        @apply(--paper-drawer-panel-main-container);
      }

      .transition > #main {
        transition: left ease-in-out 0.3s, padding ease-in-out 0.3s;
      }

      .right-drawer > #main {
        left: 0;
      }

      .right-drawer.transition > #main {
        transition: right ease-in-out 0.3s, padding ease-in-out 0.3s;
      }

      #main > ::content > [main] {
        height: 100%;
      }

      #drawer > ::content > [drawer] {
        height: 100%;
      }

      #scrim {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        visibility: hidden;
        opacity: 0;
        transition: opacity ease-in-out 0.38s, visibility ease-in-out 0.38s;
        background-color: rgba(0, 0, 0, 0.3);

        @apply(--paper-drawer-panel-scrim);
      }

      .narrow-layout > #drawer {
        will-change: transform;
      }

      .narrow-layout > #drawer.iron-selected {
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
      }

      .right-drawer.narrow-layout > #drawer.iron-selected {
        box-shadow: -2px 2px 4px rgba(0, 0, 0, 0.15);
      }

      .narrow-layout > #drawer > ::content > [drawer] {
        border: 0;
      }

      .left-drawer.narrow-layout > #drawer:not(.iron-selected) {
        visibility: hidden;

        -webkit-transform: translateX(-100%);
        transform: translateX(-100%);
      }

      .right-drawer.narrow-layout > #drawer:not(.iron-selected) {
        left: auto;
        visibility: hidden;

        -webkit-transform: translateX(100%);
        transform: translateX(100%);
      }

      .left-drawer.dragging > #drawer:not(.iron-selected),
      .left-drawer.peeking > #drawer:not(.iron-selected),
      .right-drawer.dragging > #drawer:not(.iron-selected),
      .right-drawer.peeking > #drawer:not(.iron-selected) {
        visibility: visible;
      }

      .narrow-layout > #main {
        padding: 0;
      }

      .right-drawer.narrow-layout > #main {
        left: 0;
        right: 0;
      }

      .narrow-layout > #main:not(.iron-selected) > #scrim,
      .dragging > #main > #scrim {
        visibility: visible;
        opacity: var(--paper-drawer-panel-scrim-opacity, 1);
      }

      .narrow-layout > #main > * {
        margin: 0;
        min-height: 100%;
        left: 0;
        right: 0;

        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }

      iron-selector:not(.narrow-layout) ::content [paper-drawer-toggle] {
        display: none;
      }
    </style>

    <iron-media-query id="mq" on-query-matches-changed="_onQueryMatchesChanged" query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]">
    </iron-media-query>

    <iron-selector attr-for-selected="id" class$="[[_computeIronSelectorClass(narrow, _transition, dragging, rightDrawer, peeking)]]" activate-event="" selected="[[selected]]">

      <div id="main" style$="[[_computeMainStyle(narrow, rightDrawer, drawerWidth)]]">
        <content select="[main]"></content>
        <div id="scrim" on-tap="closeDrawer"></div>
      </div>

      <div id="drawer" style$="[[_computeDrawerStyle(drawerWidth)]]">
        <content id="drawerContent" select="[drawer]"></content>
      </div>

    </iron-selector>
  </template>

  <script>
    (function() {
      'use strict';

      // this would be the only `paper-drawer-panel` in
      // the whole app that can be in `dragging` state
      var sharedPanel = null;

      function classNames(obj) {
        var classes = [];
        for (var key in obj) {
          if (obj.hasOwnProperty(key) && obj[key]) {
            classes.push(key);
          }
        }

        return classes.join(' ');
      }

      Polymer({

        is: 'paper-drawer-panel',

        behaviors: [Polymer.IronResizableBehavior],

        /**
         * Fired when the narrow layout changes.
         *
         * @event paper-responsive-change {{narrow: boolean}} detail -
         *     narrow: true if the panel is in narrow layout.
         */

        /**
         * Fired when the a panel is selected.
         *
         * Listening for this event is an alternative to observing changes in the `selected` attribute.
         * This event is fired both when a panel is selected.
         *
         * @event iron-select {{item: Object}} detail -
         *     item: The panel that the event refers to.
         */

        /**
         * Fired when a panel is deselected.
         *
         * Listening for this event is an alternative to observing changes in the `selected` attribute.
         * This event is fired both when a panel is deselected.
         *
         * @event iron-deselect {{item: Object}} detail -
         *     item: The panel that the event refers to.
         */
        properties: {

          /**
           * The panel to be selected when `paper-drawer-panel` changes to narrow
           * layout.
           */
          defaultSelected: {
            type: String,
            value: 'main'
          },

          /**
           * If true, swipe from the edge is disabled.
           */
          disableEdgeSwipe: {
            type: Boolean,
            value: false
          },

          /**
           * If true, swipe to open/close the drawer is disabled.
           */
          disableSwipe: {
            type: Boolean,
            value: false
          },

          /**
           * Whether the user is dragging the drawer interactively.
           */
          dragging: {
            type: Boolean,
            value: false,
            readOnly: true,
            notify: true
          },

          /**
           * Width of the drawer panel.
           */
          drawerWidth: {
            type: String,
            value: '256px'
          },

          /**
           * How many pixels on the side of the screen are sensitive to edge
           * swipes and peek.
           */
          edgeSwipeSensitivity: {
            type: Number,
            value: 30
          },

          /**
           * If true, ignore `responsiveWidth` setting and force the narrow layout.
           */
          forceNarrow: {
            type: Boolean,
            value: false
          },

          /**
           * Whether the browser has support for the transform CSS property.
           */
          hasTransform: {
            type: Boolean,
            value: function() {
              return 'transform' in this.style;
            }
          },

          /**
           * Whether the browser has support for the will-change CSS property.
           */
          hasWillChange: {
            type: Boolean,
            value: function() {
              return 'willChange' in this.style;
            }
          },

          /**
           * Returns true if the panel is in narrow layout.  This is useful if you
           * need to show/hide elements based on the layout.
           */
          narrow: {
            reflectToAttribute: true,
            type: Boolean,
            value: false,
            readOnly: true,
            notify: true
          },

          /**
           * Whether the drawer is peeking out from the edge.
           */
          peeking: {
            type: Boolean,
            value: false,
            readOnly: true,
            notify: true
          },

          /**
           * Max-width when the panel changes to narrow layout.
           */
          responsiveWidth: {
            type: String,
            value: '768px'
          },

          /**
           * If true, position the drawer to the right.
           */
          rightDrawer: {
            type: Boolean,
            value: false
          },

          /**
           * The panel that is being selected. `drawer` for the drawer panel and
           * `main` for the main panel.
           *
           * @type {string|null}
           */
          selected: {
            reflectToAttribute: true,
            notify: true,
            type: String,
            value: null
          },

          /**
           * The attribute on elements that should toggle the drawer on tap, also elements will
           * automatically be hidden in wide layout.
           */
          drawerToggleAttribute: {
            type: String,
            value: 'paper-drawer-toggle'
          },

          /**
           * The CSS selector for the element that should receive focus when the drawer is open.
           * By default, when the drawer opens, it focuses the first tabbable element. That is,
           * the first element that can receive focus.
           *
           * To disable this behavior, you can set `drawerFocusSelector` to `null` or an empty string.
           *
           */
          drawerFocusSelector: {
            type: String,
            value:
                'a[href]:not([tabindex="-1"]),'+
                'area[href]:not([tabindex="-1"]),'+
                'input:not([disabled]):not([tabindex="-1"]),'+
                'select:not([disabled]):not([tabindex="-1"]),'+
                'textarea:not([disabled]):not([tabindex="-1"]),'+
                'button:not([disabled]):not([tabindex="-1"]),'+
                'iframe:not([tabindex="-1"]),'+
                '[tabindex]:not([tabindex="-1"]),'+
                '[contentEditable=true]:not([tabindex="-1"])'
          },

          /**
           * Whether the transition is enabled.
           */
          _transition: {
            type: Boolean,
            value: false
          },

        },

        listeners: {
          tap: '_onTap',
          track: '_onTrack',
          down: '_downHandler',
          up: '_upHandler',
          transitionend: '_onTransitionEnd'
        },

        observers: [
          '_forceNarrowChanged(forceNarrow, defaultSelected)',
          '_toggleFocusListener(selected)'
        ],

        ready: function() {
          // Avoid transition at the beginning e.g. page loads and enable
          // transitions only after the element is rendered and ready.
          this._transition = true;
          this._boundFocusListener = this._didFocus.bind(this);
        },

        /**
         * Toggles the panel open and closed.
         *
         * @method togglePanel
         */
        togglePanel: function() {
          if (this._isMainSelected()) {
            this.openDrawer();
          } else {
            this.closeDrawer();
          }
        },

        /**
         * Opens the drawer.
         *
         * @method openDrawer
         */
        openDrawer: function() {
          requestAnimationFrame(function() {
            this.toggleClass("transition-drawer", true, this.$.drawer);
            this.selected = 'drawer';
          }.bind(this));
          
        },

        /**
         * Closes the drawer.
         *
         * @method closeDrawer
         */
        closeDrawer: function() {
          requestAnimationFrame(function() {
            this.toggleClass("transition-drawer", true, this.$.drawer);
            this.selected = 'main';
          }.bind(this));
        },

        _onTransitionEnd: function (e) {
          var target = Polymer.dom(e).localTarget;
          if (target !== this) {
            // ignore events coming from the light dom
            return;
          }
          if (e.propertyName === 'left' || e.propertyName === 'right') {
            this.notifyResize();
          }
          if (e.propertyName === 'transform') {
            requestAnimationFrame(function() {
              this.toggleClass("transition-drawer", false, this.$.drawer);
            }.bind(this));
            if (this.selected === 'drawer') {
              var focusedChild = this._getAutoFocusedNode();
              focusedChild && focusedChild.focus();
            }
          }
        },

        _computeIronSelectorClass: function(narrow, transition, dragging, rightDrawer, peeking) {
          return classNames({
            dragging: dragging,
            'narrow-layout': narrow,
            'right-drawer': rightDrawer,
            'left-drawer': !rightDrawer,
            transition: transition,
            peeking: peeking
          });
        },

        _computeDrawerStyle: function(drawerWidth) {
          return 'width:' + drawerWidth + ';';
        },

        _computeMainStyle: function(narrow, rightDrawer, drawerWidth) {
          var style = '';

          style += 'left:' + ((narrow || rightDrawer) ? '0' : drawerWidth) + ';';

          if (rightDrawer) {
            style += 'right:' + (narrow ? '' : drawerWidth) + ';';
          }

          return style;
        },

        _computeMediaQuery: function(forceNarrow, responsiveWidth) {
          return forceNarrow ? '' : '(max-width: ' + responsiveWidth + ')';
        },

        _computeSwipeOverlayHidden: function(narrow, disableEdgeSwipe) {
          return !narrow || disableEdgeSwipe;
        },

        _onTrack: function(event) {
          if (sharedPanel && this !== sharedPanel) {
            return;
          }
          switch (event.detail.state) {
            case 'start':
              this._trackStart(event);
              break;
            case 'track':
              this._trackX(event);
              break;
            case 'end':
              this._trackEnd(event);
              break;
          }
        },

        _responsiveChange: function(narrow) {
          this._setNarrow(narrow);

          this.selected = this.narrow ? this.defaultSelected : null;

          this.setScrollDirection(this._swipeAllowed() ? 'y' : 'all');
          this.fire('paper-responsive-change', {narrow: this.narrow});
        },

        _onQueryMatchesChanged: function(event) {
          this._responsiveChange(event.detail.value);
        },

        _forceNarrowChanged: function() {
          // set the narrow mode only if we reached the `responsiveWidth`
          this._responsiveChange(this.forceNarrow || this.$.mq.queryMatches);
        },

        _swipeAllowed: function() {
          return this.narrow && !this.disableSwipe;
        },

        _isMainSelected: function() {
          return this.selected === 'main';
        },

        _startEdgePeek: function() {
          this.width = this.$.drawer.offsetWidth;
          this._moveDrawer(this._translateXForDeltaX(this.rightDrawer ?
              -this.edgeSwipeSensitivity : this.edgeSwipeSensitivity));
          this._setPeeking(true);
        },

        _stopEdgePeek: function() {
          if (this.peeking) {
            this._setPeeking(false);
            this._moveDrawer(null);
          }
        },

        _downHandler: function(event) {
          if (!this.dragging && this._isMainSelected() && this._isEdgeTouch(event) && !sharedPanel) {
            this._startEdgePeek();
            // cancel selection
            event.preventDefault();
            // grab this panel
            sharedPanel = this;
          }
        },

        _upHandler: function() {
          this._stopEdgePeek();
          // release the panel
          sharedPanel = null;
        },

        _onTap: function(event) {
          var targetElement = Polymer.dom(event).localTarget;
          var isTargetToggleElement = targetElement &&
            this.drawerToggleAttribute &&
            targetElement.hasAttribute(this.drawerToggleAttribute);

          if (isTargetToggleElement) {
            this.togglePanel();
          }
        },

        _isEdgeTouch: function(event) {
          var x = event.detail.x;

          return !this.disableEdgeSwipe && this._swipeAllowed() &&
            (this.rightDrawer ?
              x >= this.offsetWidth - this.edgeSwipeSensitivity :
              x <= this.edgeSwipeSensitivity);
        },

        _trackStart: function(event) {
          if (this._swipeAllowed()) {
            sharedPanel = this;
            this._setDragging(true);

            if (this._isMainSelected()) {
              this._setDragging(this.peeking || this._isEdgeTouch(event));
            }

            if (this.dragging) {
              this.width = this.$.drawer.offsetWidth;
              this._transition = false;
            }
          }
        },

        _translateXForDeltaX: function(deltaX) {
          var isMain = this._isMainSelected();

          if (this.rightDrawer) {
            return Math.max(0, isMain ? this.width + deltaX : deltaX);
          } else {
            return Math.min(0, isMain ? deltaX - this.width : deltaX);
          }
        },

        _trackX: function(event) {
          if (this.dragging) {
            var dx = event.detail.dx;

            if (this.peeking) {
              if (Math.abs(dx) <= this.edgeSwipeSensitivity) {
                // Ignore trackx until we move past the edge peek.
                return;
              }
              this._setPeeking(false);
            }

            this._moveDrawer(this._translateXForDeltaX(dx));
          }
        },

        _trackEnd: function(event) {
          if (this.dragging) {
            var xDirection = event.detail.dx > 0;

            this._setDragging(false);
            this._transition = true;
            sharedPanel = null;
            this._moveDrawer(null);

            if (this.rightDrawer) {
              this[xDirection ? 'closeDrawer' : 'openDrawer']();
            } else {
              this[xDirection ? 'openDrawer' : 'closeDrawer']();
            }
          }
        },

        _transformForTranslateX: function(translateX) {
          if (translateX === null) {
            return '';
          }
          return this.hasWillChange ? 'translateX(' + translateX + 'px)' :
              'translate3d(' + translateX + 'px, 0, 0)';
        },

        _moveDrawer: function(translateX) {
          this.transform(this._transformForTranslateX(translateX), this.$.drawer);
        },

        _getDrawerContent: function() {
          return Polymer.dom(this.$.drawerContent).getDistributedNodes()[0];
        },

        _getAutoFocusedNode: function() {
          var drawerContent = this._getDrawerContent();

          return this.drawerFocusSelector ?
              Polymer.dom(drawerContent).querySelector(this.drawerFocusSelector) || drawerContent : null;
        },

        _toggleFocusListener: function(selected) {
          if (selected === 'drawer') {
            this.addEventListener('focus', this._boundFocusListener, true);
          } else {
            this.removeEventListener('focus', this._boundFocusListener, true);
          }
        },

        _didFocus: function(event) {
          var autoFocusedNode = this._getAutoFocusedNode();
          if (!autoFocusedNode) {
            return;
          }

          var path = Polymer.dom(event).path;
          var focusedChild = path[0];
          var drawerContent = this._getDrawerContent();
          var focusedChildCameFromDrawer = path.indexOf(drawerContent) !== -1;

          if (!focusedChildCameFromDrawer) {
            event.stopPropagation();
            autoFocusedNode.focus();
          }
        },

        _isDrawerClosed: function(narrow, selected) {
          return !narrow || selected !== 'drawer';
        }
      });

    }());
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`paper-header-panel` contains a header section and a content panel section.

__Important:__ The `paper-header-panel` will not display if its parent does not have a height.

Using layout classes, you can make the `paper-header-panel` fill the screen

    <body class="fullbleed layout vertical">
      <paper-header-panel class="flex">
        <paper-toolbar>
          <div>Hello World!</div>
        </paper-toolbar>
      </paper-header-panel>
    </body>

Special support is provided for scrolling modes when one uses a paper-toolbar or equivalent for the
header section.

Example:

    <paper-header-panel>
      <paper-toolbar>Header</paper-toolbar>
      <div>Content goes here...</div>
    </paper-header-panel>

If you want to use other than `paper-toolbar` for the header, add `paper-header` class to that
element.

Example:

    <paper-header-panel>
      <div class="paper-header">Header</div>
      <div>Content goes here...</div>
    </paper-header-panel>

To have the content fit to the main area, use the `fit` class.

    <paper-header-panel>
      <div class="paper-header">standard</div>
      <div class="fit">content fits 100% below the header</div>
    </paper-header-panel>

### Modes

Controls header and scrolling behavior. Options are `standard`, `seamed`, `waterfall`, `waterfall-tall`, `scroll` and
`cover`. Default is `standard`.

Mode | Description
----------------|-------------
`standard` | The header is a step above the panel. The header will consume the panel at the point of entry, preventing it from passing through to the opposite side.
`seamed` | The header is presented as seamed with the panel.
`waterfall` | Similar to standard mode, but header is initially presented as seamed with panel, but then separates to form the step.
`waterfall-tall` | The header is initially taller (`tall` class is added to the header). As the user scrolls, the header separates (forming an edge) while condensing (`tall` class is removed from the header).
`scroll` | The header keeps its seam with the panel, and is pushed off screen.
`cover` | The panel covers the whole `paper-header-panel` including the header. This allows user to style the panel in such a way that the panel is partially covering the header.

Example:

    <paper-header-panel mode="waterfall">
      <div class="paper-header">standard</div>
      <div class="content fit">content fits 100% below the header</div>
    </paper-header-panel>


### Styling

To change the shadow that shows up underneath the header:

    paper-header-panel {
      --paper-header-panel-shadow: {
          height: 6px;
          bottom: -6px;
          box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);
      };
    }

To change the panel container:

    paper-header-panel {
      --paper-header-panel-container: {
        border: 1px solid gray;
      };

To change the panel container in different modes:

    paper-header-panel {
      --paper-header-panel-standard-container: {
        border: 1px solid gray;
      };

      --paper-header-panel-seamed-container: {
        border: 1px solid gray;
      };

      --paper-header-panel-waterfall-container: {
        border: 1px solid gray;
      };

      --paper-header-panel-waterfall-tall-container: {
        border: 1px solid gray;
      };

      --paper-header-panel-scroll-container: {
        border: 1px solid gray;
      };

      --paper-header-panel-cover-container: {
        border: 1px solid gray;
      };
    }

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-header-panel` | Mixin applied to the element | `{}`
`--paper-header-panel-body` | Mixin applied to the element's body (i.e. everything below the toolbar) | `{}`
`--paper-header-panel-container` | Mixin applied to the container in any mode | `{}`
`--paper-header-panel-scroll-container` | Mixin applied to the container when in scroll mode | `{}`
`--paper-header-panel-cover-container` | Mixin applied to the container when in cover mode | `{}`
`--paper-header-panel-standard-container` | Mixin applied to the container when in standard mode | `{}`
`--paper-header-panel-seamed-container` | Mixin applied to the container when in seamed mode | `{}`
`--paper-header-panel-waterfall-container` | Mixin applied to the container when in waterfall mode | `{}`
`--paper-header-panel-waterfall-tall-container` | Mixin applied to the container when in tall waterfall mode | `{}`
`--paper-header-panel-shadow` | Mixin applied to the waterfall shadow | `{}`

@group Paper Elements
@element paper-header-panel
@demo demo/index.html
@hero hero.svg
-->

<dom-module id="paper-header-panel" assetpath="bower_components/paper-header-panel/">
  <template>
    <style>
      :host {
        @apply(--layout-vertical);

        position: relative;
        height: 100%;

        @apply(--paper-header-panel);
      }

      #mainContainer {
        @apply(--layout-flex);

        position: relative;
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }

      #mainPanel {
        @apply(--layout-vertical);
        @apply(--layout-flex);

        position: relative;
        min-height: 0;

        @apply(--paper-header-panel-body);
      }

      #mainContainer {
        @apply(--paper-header-panel-container);
      }

      /*
       * mode: scroll
       */
      :host([mode=scroll]) #mainContainer {
        @apply(--paper-header-panel-scroll-container);

        overflow: visible;
      }

      :host([mode=scroll]) {
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }

      /*
       * mode: cover
       */
      :host([mode=cover]) #mainContainer {
        @apply(--paper-header-panel-cover-container);

        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }

      :host([mode=cover]) #mainPanel {
        position: static;
      }

      /*
       * mode: standard
       */
      :host([mode=standard]) #mainContainer {
        @apply(--paper-header-panel-standard-container);
      }

      /*
       * mode: seamed
       */
      :host([mode=seamed]) #mainContainer {
        @apply(--paper-header-panel-seamed-container);
      }


      /*
       * mode: waterfall
       */
      :host([mode=waterfall]) #mainContainer {
        @apply(--paper-header-panel-waterfall-container);
      }

      /*
       * mode: waterfall-tall
       */
      :host([mode=waterfall-tall]) #mainContainer {
        @apply(--paper-header-panel-waterfall-tall-container);
      }

      #dropShadow {
        transition: opacity 0.5s;
        height: 6px;
        box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);

        @apply(--paper-header-panel-shadow);

        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        opacity: 0;
        pointer-events: none;
      }

      #dropShadow.has-shadow {
        opacity: 1;
      }
    </style>

    <content id="headerContent" select="paper-toolbar, .paper-header"></content>

    <div id="mainPanel">
      <div id="mainContainer" class$="[[_computeMainContainerClass(mode)]]">
        <content id="mainContent" select="*"></content>
      </div>
      <div id="dropShadow"></div>
    </div>
  </template>

  <script>
    (function() {
      'use strict';

      var SHADOW_WHEN_SCROLLING = 1;
      var SHADOW_ALWAYS = 2;
      var MODE_CONFIGS = {
        outerScroll: {
          'scroll': true
        },

        shadowMode: {
          'standard': SHADOW_ALWAYS,
          'waterfall': SHADOW_WHEN_SCROLLING,
          'waterfall-tall': SHADOW_WHEN_SCROLLING
        },

        tallMode: {
          'waterfall-tall': true
        }
      };

      Polymer({
        is: 'paper-header-panel',

        /**
         * Fired when the content has been scrolled.  `event.detail.target` returns
         * the scrollable element which you can use to access scroll info such as
         * `scrollTop`.
         *
         *     <paper-header-panel on-content-scroll="scrollHandler">
         *       ...
         *     </paper-header-panel>
         *
         *
         *     scrollHandler: function(event) {
         *       var scroller = event.detail.target;
         *       console.log(scroller.scrollTop);
         *     }
         *
         * @event content-scroll
         */

        properties: {
          /**
           * Controls header and scrolling behavior. Options are
           * `standard`, `seamed`, `waterfall`, `waterfall-tall`, `scroll` and
           * `cover`. Default is `standard`.
           *
           * `standard`: The header is a step above the panel. The header will consume the
           * panel at the point of entry, preventing it from passing through to the
           * opposite side.
           *
           * `seamed`: The header is presented as seamed with the panel.
           *
           * `waterfall`: Similar to standard mode, but header is initially presented as
           * seamed with panel, but then separates to form the step.
           *
           * `waterfall-tall`: The header is initially taller (`tall` class is added to
           * the header).  As the user scrolls, the header separates (forming an edge)
           * while condensing (`tall` class is removed from the header).
           *
           * `scroll`: The header keeps its seam with the panel, and is pushed off screen.
           *
           * `cover`: The panel covers the whole `paper-header-panel` including the
           * header. This allows user to style the panel in such a way that the panel is
           * partially covering the header.
           *
           *     <paper-header-panel mode="cover">
           *       <paper-toolbar class="tall">
           *         <paper-icon-button icon="menu"></paper-icon-button>
           *       </paper-toolbar>
           *       <div class="content"></div>
           *     </paper-header-panel>
           */
          mode: {
            type: String,
            value: 'standard',
            observer: '_modeChanged',
            reflectToAttribute: true
          },

          /**
           * If true, the drop-shadow is always shown no matter what mode is set to.
           */
          shadow: {
            type: Boolean,
            value: false
          },

          /**
           * The class used in waterfall-tall mode.  Change this if the header
           * accepts a different class for toggling height, e.g. "medium-tall"
           */
          tallClass: {
            type: String,
            value: 'tall'
          },

          /**
           * If true, the scroller is at the top
           */
          atTop: {
            type: Boolean,
            value: true,
            notify: true,
            readOnly: true,
            reflectToAttribute: true
          }
        },

        observers: [
          '_computeDropShadowHidden(atTop, mode, shadow)'
        ],

        ready: function() {
          this.scrollHandler = this._scroll.bind(this);
        },

        attached: function() {
          this._addListener();
          // Run `scroll` logic once to initialize class names, etc.
          this._keepScrollingState();
        },

        detached: function() {
          this._removeListener();
        },

        /**
         * Returns the header element
         *
         * @property header
         * @type Object
         */
        get header() {
          return Polymer.dom(this.$.headerContent).getDistributedNodes()[0];
        },

        /**
         * Returns the scrollable element.
         *
         * @property scroller
         * @type Object
         */
        get scroller() {
          return this._getScrollerForMode(this.mode);
        },

        /**
         * Returns true if the scroller has a visible shadow.
         *
         * @property visibleShadow
         * @type Boolean
         */
        get visibleShadow() {
          return this.$.dropShadow.classList.contains('has-shadow');
        },

        _computeDropShadowHidden: function(atTop, mode, shadow) {
          var shadowMode = MODE_CONFIGS.shadowMode[mode];

          if (this.shadow) {
            this.toggleClass('has-shadow', true, this.$.dropShadow);
          } else if (shadowMode === SHADOW_ALWAYS) {
            this.toggleClass('has-shadow', true, this.$.dropShadow);
          } else if (shadowMode === SHADOW_WHEN_SCROLLING && !atTop) {
            this.toggleClass('has-shadow', true, this.$.dropShadow);
          } else {
            this.toggleClass('has-shadow', false, this.$.dropShadow);
          }
        },

        _computeMainContainerClass: function(mode) {
          // TODO:  It will be useful to have a utility for classes
          // e.g. Polymer.Utils.classes({ foo: true });

          var classes = {};

          classes['flex'] = mode !== 'cover';

          return Object.keys(classes).filter(
            function(className) {
              return classes[className];
            }).join(' ');
        },

        _addListener: function() {
          this.scroller.addEventListener('scroll', this.scrollHandler, false);
        },

        _removeListener: function() {
          this.scroller.removeEventListener('scroll', this.scrollHandler);
        },

        _modeChanged: function(newMode, oldMode) {
          var configs = MODE_CONFIGS;
          var header = this.header;
          var animateDuration = 200;

          if (header) {
            // in tallMode it may add tallClass to the header; so do the cleanup
            // when mode is changed from tallMode to not tallMode
            if (configs.tallMode[oldMode] && !configs.tallMode[newMode]) {
              header.classList.remove(this.tallClass);
              this.async(function() {
                header.classList.remove('animate');
              }, animateDuration);
            } else {
              this.toggleClass('animate', configs.tallMode[newMode], header);
            }
          }
          this._keepScrollingState();
        },

        _keepScrollingState: function() {
          var main = this.scroller;
          var header = this.header;

          this._setAtTop(main.scrollTop === 0);

          if (header && this.tallClass && MODE_CONFIGS.tallMode[this.mode]) {
            this.toggleClass(this.tallClass, this.atTop ||
                header.classList.contains(this.tallClass) &&
                main.scrollHeight < this.offsetHeight, header);
          }
        },

        _scroll: function() {
          this._keepScrollingState();
          this.fire('content-scroll', {target: this.scroller}, {bubbles: false});
        },

        _getScrollerForMode: function(mode) {
          return MODE_CONFIGS.outerScroll[mode] ?
              this : this.$.mainContainer;
        }
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Material design: [Toolbars](https://www.google.com/design/spec/components/toolbars.html)

`paper-toolbar` is a horizontal bar containing items that can be used for
label, navigation, search and actions.  The items placed inside the
`paper-toolbar` are projected into a `class="horizontal center layout"` container inside of
`paper-toolbar`'s Shadow DOM.  You can use flex attributes to control the items'
sizing.

Example:

```html
<paper-toolbar>
  <paper-icon-button icon="menu" on-tap="menuAction"></paper-icon-button>
  <div class="title">Title</div>
  <paper-icon-button icon="more-vert" on-tap="moreAction"></paper-icon-button>
</paper-toolbar>
```

`paper-toolbar` has a standard height, but can made be taller by setting `tall`
class on the `paper-toolbar`. This will make the toolbar 3x the normal height.

```html
<paper-toolbar class="tall">
  <paper-icon-button icon="menu"></paper-icon-button>
</paper-toolbar>
```

Apply `medium-tall` class to make the toolbar medium tall.  This will make the
toolbar 2x the normal height.

```html
<paper-toolbar class="medium-tall">
  <paper-icon-button icon="menu"></paper-icon-button>
</paper-toolbar>
```

When `tall`, items can pin to either the top (default), middle or bottom.  Use
`middle` class for middle content and `bottom` class for bottom content.

```html
<paper-toolbar class="tall">
  <paper-icon-button icon="menu"></paper-icon-button>
  <div class="middle title">Middle Title</div>
  <div class="bottom title">Bottom Title</div>
</paper-toolbar>
```

For `medium-tall` toolbar, the middle and bottom contents overlap and are
pinned to the bottom.  But `middleJustify` and `bottomJustify` attributes are
still honored separately.

To make an element completely fit at the bottom of the toolbar, use `fit` along
with `bottom`.

```html
<paper-toolbar class="tall">
  <div id="progressBar" class="bottom fit"></div>
</paper-toolbar>
```

When inside a `paper-header-panel` element with `mode="waterfall-tall"`, 
the class `.animate` is toggled to animate the height change in the toolbar. 

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-toolbar-title`      | Mixin applied to the title of the toolbar | `{}`
`--paper-toolbar-background` | Toolbar background color     | `--primary-color`
`--paper-toolbar-color`      | Toolbar foreground color     | `--dark-theme-text-color`
`--paper-toolbar-height`     | Custom height for toolbar    | `64px`
`--paper-toolbar-sm-height`  | Custom height for small screen toolbar | `56px`
`--paper-toolbar`            | Mixin applied to the toolbar | `{}`
`--paper-toolbar-content`    | Mixin applied to the content section of the toolbar | `{}`
`--paper-toolbar-medium`     | Mixin applied to medium height toolbar | `{}`
`--paper-toolbar-tall`       | Mixin applied to tall height toolbar | `{}`
`--paper-toolbar-transition` | Transition applied to the `.animate` class | `height 0.18s ease-in`

### Accessibility

`<paper-toolbar>` has `role="toolbar"` by default. Any elements with the class `title` will
be used as the label of the toolbar via `aria-labelledby`.

@demo demo/index.html
-->

<dom-module id="paper-toolbar" assetpath="bower_components/paper-toolbar/">
  <template>
    <style>
      :host {
        --calculated-paper-toolbar-height: var(--paper-toolbar-height, 64px);
        --calculated-paper-toolbar-sm-height: var(--paper-toolbar-sm-height, 56px);

        /* technical */
        display: block;
        position: relative;
        box-sizing: border-box;
        -moz-box-sizing: border-box;

        /* size */
        height: var(--calculated-paper-toolbar-height);

        background: var(--paper-toolbar-background, --primary-color);
        color: var(--paper-toolbar-color, --dark-theme-text-color);

        @apply(--paper-toolbar);
      }

      :host(.animate) {
        /* transition */
        transition: var(--paper-toolbar-transition, height 0.18s ease-in);
      }

      :host(.medium-tall) {
        height: calc(var(--calculated-paper-toolbar-height) * 2);
        @apply(--paper-toolbar-medium);
      }

      :host(.tall) {
        height: calc(var(--calculated-paper-toolbar-height) * 3);
        @apply(--paper-toolbar-tall);
      }

      .toolbar-tools {
        position: relative;
        height: var(--calculated-paper-toolbar-height);
        padding: 0 16px;
        pointer-events: none;
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-toolbar-content);
      }

      /*
       * TODO: Where should media query breakpoints live so they can be shared between elements?
       */

      @media (max-width: 600px) {
        :host {
          height: var(--calculated-paper-toolbar-sm-height);
        }

        :host(.medium-tall) {
          height: calc(var(--calculated-paper-toolbar-sm-height) * 2);
        }

        :host(.tall) {
          height: calc(var(--calculated-paper-toolbar-sm-height) * 3);
        }

        .toolbar-tools {
          height: var(--calculated-paper-toolbar-sm-height);
        }
      }

      #topBar {
        position: relative;
      }

      /* middle bar */
      #middleBar {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
      }

      :host(.tall) #middleBar,
      :host(.medium-tall) #middleBar {
        -webkit-transform: translateY(100%);
        transform: translateY(100%);
      }

      /* bottom bar */
      #bottomBar {
        position: absolute;
        right: 0;
        bottom: 0;
        left: 0;
      }

      /*
       * make elements (e.g. buttons) respond to mouse/touch events
       *
       * `.toolbar-tools` disables touch events so multiple toolbars can stack and not
       * absorb events. All children must have pointer events re-enabled to work as
       * expected.
       */
      .toolbar-tools > ::content > *:not([disabled]) {
        pointer-events: auto;
      }

      .toolbar-tools > ::content .title {
        @apply(--paper-font-common-base);

        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 400;
        line-height: 1;
        pointer-events: none;

        @apply(--layout-flex);
      }

      .toolbar-tools > ::content > .title {
        margin-left: 56px;
      }

      .toolbar-tools > ::content > paper-icon-button + .title {
        margin-left: 0;
      }

      /**
       * The --paper-toolbar-title mixin is applied here instead of above to
       * fix the issue with margin-left being ignored due to css ordering.
       */
      .toolbar-tools > ::content .title {
        @apply(--paper-toolbar-title);
      }

      .toolbar-tools > ::content paper-icon-button[icon=menu] {
        margin-right: 24px;
      }

      .toolbar-tools > ::content > .fit {
        position: absolute;
        top: auto;
        right: 0;
        bottom: 0;
        left: 0;
        width: auto;
        margin: 0;
      }

      /* TODO(noms): Until we have a better solution for classes that don't use
       * /deep/ create our own.
       */
      .start-justified {
        @apply(--layout-start-justified);
      }

      .center-justified {
        @apply(--layout-center-justified);
      }

      .end-justified {
        @apply(--layout-end-justified);
      }

      .around-justified {
        @apply(--layout-around-justified);
      }

      .justified {
        @apply(--layout-justified);
      }
    </style>

    <div id="topBar" class$="toolbar-tools [[_computeBarExtraClasses(justify)]]">
      <content select=":not(.middle):not(.bottom)"></content>
    </div>

    <div id="middleBar" class$="toolbar-tools [[_computeBarExtraClasses(middleJustify)]]">
      <content select=".middle"></content>
    </div>

    <div id="bottomBar" class$="toolbar-tools [[_computeBarExtraClasses(bottomJustify)]]">
      <content select=".bottom"></content>
    </div>
  </template>

  <script>
    Polymer({
      is: 'paper-toolbar',

      hostAttributes: {
        'role': 'toolbar'
      },

      properties: {
        /**
         * Controls how the items are aligned horizontally when they are placed
         * at the bottom.
         * Options are `start`, `center`, `end`, `justified` and `around`.
         */
        bottomJustify: {
          type: String,
          value: ''
        },

        /**
         * Controls how the items are aligned horizontally.
         * Options are `start`, `center`, `end`, `justified` and `around`.
         */
        justify: {
          type: String,
          value: ''
        },

        /**
         * Controls how the items are aligned horizontally when they are placed
         * in the middle.
         * Options are `start`, `center`, `end`, `justified` and `around`.
         */
        middleJustify: {
          type: String,
          value: ''
        }

      },

      attached: function() {
        this._observer = this._observe(this);
        this._updateAriaLabelledBy();
      },

      detached: function() {
        if (this._observer) {
          this._observer.disconnect();
        }
      },

      _observe: function(node) {
        var observer = new MutationObserver(function() {
          this._updateAriaLabelledBy();
        }.bind(this));
        observer.observe(node, {
          childList: true,
          subtree: true
        });
        return observer;
      },

      _updateAriaLabelledBy: function() {
        var labelledBy = [];
        var contents = Polymer.dom(this.root).querySelectorAll('content');
        for (var content, index = 0; content = contents[index]; index++) {
          var nodes = Polymer.dom(content).getDistributedNodes();
          for (var node, jndex = 0; node = nodes[jndex]; jndex++) {
            if (node.classList && node.classList.contains('title')) {
              if (node.id) {
                labelledBy.push(node.id);
              } else {
                var id = 'paper-toolbar-label-' + Math.floor(Math.random() * 10000);
                node.id = id;
                labelledBy.push(id);
              }
            }
          }
        }
        if (labelledBy.length > 0) {
          this.setAttribute('aria-labelledby', labelledBy.join(' '));
        }
      },

      _computeBarExtraClasses: function(barJustify) {
        if (!barJustify) return '';

        return barJustify + (barJustify === 'justified' ? '' : '-justified');
      }
    });
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`iron-a11y-announcer` is a singleton element that is intended to add a11y
to features that require on-demand announcement from screen readers. In
order to make use of the announcer, it is best to request its availability
in the announcing element.

Example:

    Polymer({

      is: 'x-chatty',

      attached: function() {
        // This will create the singleton element if it has not
        // been created yet:
        Polymer.IronA11yAnnouncer.requestAvailability();
      }
    });

After the `iron-a11y-announcer` has been made available, elements can
make announces by firing bubbling `iron-announce` events.

Example:

    this.fire('iron-announce', {
      text: 'This is an announcement!'
    }, { bubbles: true });

Note: announcements are only audible if you have a screen reader enabled.

@group Iron Elements
@demo demo/index.html
-->

<dom-module id="iron-a11y-announcer" assetpath="bower_components/iron-a11y-announcer/">
  <template>
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
  </template>

  <script>

    (function() {
      'use strict';

      Polymer.IronA11yAnnouncer = Polymer({
        is: 'iron-a11y-announcer',

        properties: {

          /**
           * The value of mode is used to set the `aria-live` attribute
           * for the element that will be announced. Valid values are: `off`,
           * `polite` and `assertive`.
           */
          mode: {
            type: String,
            value: 'polite'
          },

          _text: {
            type: String,
            value: ''
          }
        },

        created: function() {
          if (!Polymer.IronA11yAnnouncer.instance) {
            Polymer.IronA11yAnnouncer.instance = this;
          }

          document.body.addEventListener('iron-announce', this._onIronAnnounce.bind(this));
        },

        /**
         * Cause a text string to be announced by screen readers.
         *
         * @param {string} text The text that should be announced.
         */
        announce: function(text) {
          this._text = '';
          this.async(function() {
            this._text = text;
          }, 100);
        },

        _onIronAnnounce: function(event) {
          if (event.detail && event.detail.text) {
            this.announce(event.detail.text);
          }
        }
      });

      Polymer.IronA11yAnnouncer.instance = null;

      Polymer.IronA11yAnnouncer.requestAvailability = function() {
        if (!Polymer.IronA11yAnnouncer.instance) {
          Polymer.IronA11yAnnouncer.instance = document.createElement('iron-a11y-announcer');
        }

        document.body.appendChild(Polymer.IronA11yAnnouncer.instance);
      };
    })();

  </script>
</dom-module>
<!--
Material design: [Snackbars & toasts](https://www.google.com/design/spec/components/snackbars-toasts.html)

`paper-toast` provides a subtle notification toast. Only one `paper-toast` will
be visible on screen.

Use `opened` to show the toast:

Example:

    <paper-toast text="Hello world!" opened></paper-toast>

Also `open()` or `show()` can be used to show the toast:

Example:

    <paper-button on-click="openToast">Open Toast</paper-button>
    <paper-toast id="toast" text="Hello world!"></paper-toast>

    ...

    openToast: function() {
      this.$.toast.open();
    }

Set `duration` to 0, a negative number or Infinity to persist the toast on screen:

Example:

    <paper-toast text="Terms and conditions" opened duration="0">
      <a href="#">Show more</a>
    </paper-toast>


### Styling
The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-toast-background-color` | The paper-toast background-color | `#323232`
`--paper-toast-color` | The paper-toast color | `#f1f1f1`

This element applies the mixin `--paper-font-common-base` but does not import `paper-styles/typography.html`.
In order to apply the `Roboto` font to this element, make sure you've imported `paper-styles/typography.html`.

@group Paper Elements
@element paper-toast
@demo demo/index.html
@hero hero.svg
-->

<dom-module id="paper-toast" assetpath="bower_components/paper-toast/">
  <template>
    <style>
      :host {
        display: block;
        position: fixed;
        background-color: var(--paper-toast-background-color, #323232);
        color: var(--paper-toast-color, #f1f1f1);
        min-height: 48px;
        min-width: 288px;
        padding: 16px 24px;
        box-sizing: border-box;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
        border-radius: 2px;
        margin: 12px;
        font-size: 14px;
        cursor: default;
        -webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
        transition: transform 0.3s, opacity 0.3s;
        opacity: 0;
        -webkit-transform: translateY(100px);
        transform: translateY(100px);
        @apply(--paper-font-common-base);
      }

      :host(.capsule) {
        border-radius: 24px;
      }

      :host(.fit-bottom) {
        width: 100%;
        min-width: 0;
        border-radius: 0;
        margin: 0;
      }

      :host(.paper-toast-open) {
        opacity: 1;
        -webkit-transform: translateY(0px);
        transform: translateY(0px);
      }
    </style>

    <span id="label">{{text}}</span>
    <content></content>
  </template>

  <script>
    (function() {
      // Keeps track of the toast currently opened.
      var currentToast = null;

      Polymer({
        is: 'paper-toast',

        behaviors: [
          Polymer.IronOverlayBehavior
        ],

        properties: {
          /**
           * The element to fit `this` into.
           * Overridden from `Polymer.IronFitBehavior`.
           */
          fitInto: {
            type: Object,
            value: window,
            observer: '_onFitIntoChanged'
          },

          /**
           * The orientation against which to align the dropdown content
           * horizontally relative to `positionTarget`.
           * Overridden from `Polymer.IronFitBehavior`.
           */
          horizontalAlign: {
            type: String,
            value: 'left'
          },

          /**
           * The orientation against which to align the dropdown content
           * vertically relative to `positionTarget`.
           * Overridden from `Polymer.IronFitBehavior`.
           */
          verticalAlign: {
            type: String,
            value: 'bottom'
          },

          /**
           * The duration in milliseconds to show the toast.
           * Set to `0`, a negative number, or `Infinity`, to disable the
           * toast auto-closing.
           */
          duration: {
            type: Number,
            value: 3000
          },

          /**
           * The text to display in the toast.
           */
          text: {
            type: String,
            value: ''
          },

          /**
           * Overridden from `IronOverlayBehavior`.
           * Set to false to enable closing of the toast by clicking outside it.
           */
          noCancelOnOutsideClick: {
            type: Boolean,
            value: true
          },

          /**
           * Overridden from `IronOverlayBehavior`.
           * Set to true to disable auto-focusing the toast or child nodes with
           * the `autofocus` attribute` when the overlay is opened.
           */
          noAutoFocus: {
            type: Boolean,
            value: true
          }
        },

        listeners: {
          'transitionend': '__onTransitionEnd'
        },

        /**
         * Read-only. Deprecated. Use `opened` from `IronOverlayBehavior`.
         * @property visible
         * @deprecated
         */
        get visible() {
          Polymer.Base._warn('`visible` is deprecated, use `opened` instead');
          return this.opened;
        },

        /**
         * Read-only. Can auto-close if duration is a positive finite number.
         * @property _canAutoClose
         */
        get _canAutoClose() {
          return this.duration > 0 && this.duration !== Infinity;
        },

        created: function() {
          this._autoClose = null;
          Polymer.IronA11yAnnouncer.requestAvailability();
        },

        /**
         * Show the toast. Without arguments, this is the same as `open()` from `IronOverlayBehavior`.
         * @param {(Object|string)=} properties Properties to be set before opening the toast.
         * e.g. `toast.show('hello')` or `toast.show({text: 'hello', duration: 3000})`
         */
        show: function(properties) {
          if (typeof properties == 'string') {
            properties = { text: properties };
          }
          for (var property in properties) {
            if (property.indexOf('_') === 0) {
              Polymer.Base._warn('The property "' + property + '" is private and was not set.');
            } else if (property in this) {
              this[property] = properties[property];
            } else {
              Polymer.Base._warn('The property "' + property + '" is not valid.');
            }
          }
          this.open();
        },

        /**
         * Hide the toast. Same as `close()` from `IronOverlayBehavior`.
         */
        hide: function() {
          this.close();
        },

        /**
         * Called on transitions of the toast, indicating a finished animation
         * @private
         */
        __onTransitionEnd: function(e) {
          // there are different transitions that are happening when opening and
          // closing the toast. The last one so far is for `opacity`.
          // This marks the end of the transition, so we check for this to determine if this
          // is the correct event.
          if (e && e.target === this && e.propertyName === 'opacity') {
            if (this.opened) {
              this._finishRenderOpened();
            } else {
              this._finishRenderClosed();
            }
          }
        },

        /**
         * Overridden from `IronOverlayBehavior`.
         * Called when the value of `opened` changes.
         */
        _openedChanged: function() {
          if (this._autoClose !== null) {
            this.cancelAsync(this._autoClose);
            this._autoClose = null;
          }
          if (this.opened) {
            if (currentToast && currentToast !== this) {
              currentToast.close();
            }
            currentToast = this;
            this.fire('iron-announce', {
              text: this.text
            });
            if (this._canAutoClose) {
              this._autoClose = this.async(this.close, this.duration);
            }
          } else if (currentToast === this) {
            currentToast = null;
          }
          Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this, arguments);
        },

        /**
         * Overridden from `IronOverlayBehavior`.
         */
        _renderOpened: function() {
          this.classList.add('paper-toast-open');
        },

        /**
         * Overridden from `IronOverlayBehavior`.
         */
        _renderClosed: function() {
          this.classList.remove('paper-toast-open');
        },

        /**
         * @private
         */
        _onFitIntoChanged: function(fitInto) {
          this.positionTarget = fitInto;
        }

        /**
         * Fired when `paper-toast` is opened.
         *
         * @event 'iron-announce'
         * @param {{text: string}} detail Contains text that will be announced.
         */
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<api-console-ext-comm>` is an element that support communication with the api-console-extension.

If the extension is installed then it will intercept the `api-console-request` and cancel it.
Data from the event will be passed to the extension and the request will be executed from within
the extension.

@group Logic Elements
@element api-console-ext-comm
-->
<script>
Polymer({
  /**
   * Called when the API console extension has been detected,
   *
   * @event api-console-extension-installed
   */
  is: 'api-console-ext-comm',

  properties: {
    /**
     * If true then the API console extension has been detected.
     */
    extension: {
      type: Boolean,
      value: false,
      notify: true,
      readOnly: true
    },
    // Last sent request data to the extension
    _lastestRequestData: Object
  },

  ready: function() {
    window.postMessage({
      payload: 'api-console-extension-installed'
    }, location.origin);
  },

  attached: function() {
    this.listen(window, 'message', '_messsageHandler');
    // Body will receive the event faster so it will cancel it before other listeners.
    this.listen(document.body, 'api-console-request', '_requestHandler');
    this.listen(document.body, 'oauth2-token-requested', '_oauthTokenHandler');
  },

  detached: function() {
    this.unlisten(window, 'message', '_messsageHandler');
    this.unlisten(document.body, 'api-console-request', '_requestHandler');
    this.unlisten(document.body, 'oauth2-token-requested', '_oauthTokenHandler');
  },
  /**
   * Called when message from `postMessage` is available.
   * This is a communication channel with the extension.
   */
  _messsageHandler: function(e) {
    // We are interested with internal messages only
    if (e.source !== window) {
      return;
    }
    var data = e.data;
    if (!data['api-console-extension']) {
      return;
    }
    var payload = data['api-console-payload'];
    switch (payload) {
      case 'init':
        this._extensionDetected();
        break;
      case 'api-console-response':
        this._responseReady(data['api-console-data']);
        break;
      case 'api-console-oauth2-token-response':
        this._oauthTokenReady(data['api-console-data']);
        break;
    }
  },
  /**
   * Called when the api-console-extension is detected.
   */
  _extensionDetected: function() {
    this._setExtension(true);
    this.fire('api-console-extension-installed');
  },

  _requestHandler: function(e) {
    if (!this.extension) {
      return;
    }
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();

    this._lastestRequestData = e.detail;
    window.postMessage({
      payload: 'api-console-request',
      detail: e.detail
    }, location.origin);
  },
  /**
   * Called when the response arrive from the extension page.
   */
  _responseReady: function(extResponse) {
    var responseData = extResponse ? extResponse.data.responseData : undefined;
    var request = this._createRequest(this._lastestRequestData);
    this._lastestRequestData = undefined;
    var response = this._createResponse(responseData);

    var detail = {
      request: request,
      response: response,
      loadingTime: extResponse ? extResponse.data.stats.loadingTime : 0,
      isXhr: true
    };
    if (responseData.error) {
      detail.error = new Error(responseData.message);
    } else if (!response.ok) {
      detail.error = new Error('Resource is unavailable');
    }
    var event = new CustomEvent('api-console-response', {
      cancelable: false,
      bubbles: true,
      composed: true,
      detail: detail
    });
    this.dispatchEvent(event);
  },
  /**
   * Creates a request object from the latest request data.
   *
   * @param {Object} data Latest request data as in the `api-console-request` object event.
   * @param {Request} The Request object.
   */
  _createRequest: function(data) {
    var init = {
      method: data.method,
      mode: 'cors'
    };
    if (data.headers) {
      init.headers = this._createHeaders(data.headers);
    }
    if (['GET', 'HEAD'].indexOf(data.method) !== -1) {
      data.payload = undefined;
    } else {
      if (data.payload) {
        init.body = data.payload;
      }
    }
    return new Request(data.url, init);
  },
  /**
   * Creates a response object from the response data.
   * If the response is invalid then returned Response object will be errored.
   *
   * @param {Object} response The response object returned by the extension.
   * @return {Response} The response object.
   */
  _createResponse: function(response) {
    if (!response || response.error) {
      return Response.error();
    }
    if (!response.status || response.status < 200) {
      return Response.error();
    }
    var init = {
      status: response.status,
      statusText: response.statusText
    };
    if (response.headers) {
      init.headers = this._createHeaders(response.headers);
    }
    try {
      return new Response(response.response, init);
    } catch (e) {
      return Response.error();
    }
  },
  /**
   * Creates a Headers object based on the HTTP headers string.
   *
   * @param {String} headers HTTP headers.
   * @return {Headers} Parsed headers object.
   */
  _createHeaders: function(headers) {
    if (!headers) {
      return new Headers();
    }
    var result = new Headers();
    var list = headers.split('\n').map(function(line) {
      var _parts = line.split(':');
      var _name = _parts[0];
      var _value = _parts[1];
      _name = _name ? _name.trim() : null;
      _value = _value ? _value.trim() : null;
      if (!_name || !_value) {
        return null;
      }
      return {
        name: _name,
        value: _value
      };
    }).filter(function(item) {
      return !!item;
    });
    list.forEach(function(item) {
      result.append(item.name, item.value);
    });
    return result;
  },

  _oauthTokenHandler: function(e) {
    if (!this.extension) {
      return;
    }
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();

    window.postMessage({
      payload: 'api-console-oauth2',
      detail: e.detail
    }, location.origin);
  },

  _oauthTokenReady: function(tokenData) {
    if (!tokenData) {
      return this.fire('oauth2-error', {
        'message': 'No response has been recorded.',
        'code': 'no_response'
      });
    }
    if (tokenData.error) {
      return this.fire('oauth2-error', {
        'message': tokenData.message || 'No response has been recorded.',
        'code': tokenData.code || 'unknown_error'
      });
    }
    this.fire('oauth2-token-response', tokenData);
  }
});
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /** @polymerBehavior Polymer.PaperButtonBehavior */
  Polymer.PaperButtonBehaviorImpl = {
    properties: {
      /**
       * The z-depth of this element, from 0-5. Setting to 0 will remove the
       * shadow, and each increasing number greater than 0 will be "deeper"
       * than the last.
       *
       * @attribute elevation
       * @type number
       * @default 1
       */
      elevation: {
        type: Number,
        reflectToAttribute: true,
        readOnly: true
      }
    },

    observers: [
      '_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)',
      '_computeKeyboardClass(receivedFocusFromKeyboard)'
    ],

    hostAttributes: {
      role: 'button',
      tabindex: '0',
      animated: true
    },

    _calculateElevation: function() {
      var e = 1;
      if (this.disabled) {
        e = 0;
      } else if (this.active || this.pressed) {
        e = 4;
      } else if (this.receivedFocusFromKeyboard) {
        e = 3;
      }
      this._setElevation(e);
    },

    _computeKeyboardClass: function(receivedFocusFromKeyboard) {
      this.toggleClass('keyboard-focus', receivedFocusFromKeyboard);
    },

    /**
     * In addition to `IronButtonState` behavior, when space key goes down,
     * create a ripple down effect.
     *
     * @param {!KeyboardEvent} event .
     */
    _spaceKeyDownHandler: function(event) {
      Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this, event);
      // Ensure that there is at most one ripple when the space key is held down.
      if (this.hasRipple() && this.getRipple().ripples.length < 1) {
        this._ripple.uiDownAction();
      }
    },

    /**
     * In addition to `IronButtonState` behavior, when space key goes up,
     * create a ripple up effect.
     *
     * @param {!KeyboardEvent} event .
     */
    _spaceKeyUpHandler: function(event) {
      Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this, event);
      if (this.hasRipple()) {
        this._ripple.uiUpAction();
      }
    }
  };

  /** @polymerBehavior */
  Polymer.PaperButtonBehavior = [
    Polymer.IronButtonState,
    Polymer.IronControlState,
    Polymer.PaperRippleBehavior,
    Polymer.PaperButtonBehaviorImpl
  ];
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><dom-module id="paper-material-shared-styles" assetpath="bower_components/paper-material/">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([elevation="1"]) {
        @apply(--shadow-elevation-2dp);
      }

      :host([elevation="2"]) {
        @apply(--shadow-elevation-4dp);
      }

      :host([elevation="3"]) {
        @apply(--shadow-elevation-6dp);
      }

      :host([elevation="4"]) {
        @apply(--shadow-elevation-8dp);
      }

      :host([elevation="5"]) {
        @apply(--shadow-elevation-16dp);
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Buttons](https://www.google.com/design/spec/components/buttons.html)

`paper-button` is a button. When the user touches the button, a ripple effect emanates
from the point of contact. It may be flat or raised. A raised button is styled with a
shadow.

Example:

    <paper-button>Flat button</paper-button>
    <paper-button raised>Raised button</paper-button>
    <paper-button noink>No ripple effect</paper-button>
    <paper-button toggles>Toggle-able button</paper-button>

A button that has `toggles` true will remain `active` after being clicked (and
will have an `active` attribute set). For more information, see the `Polymer.IronButtonState`
behavior.

You may use custom DOM in the button body to create a variety of buttons. For example, to
create a button with an icon and some text:

    <paper-button>
      <iron-icon icon="favorite"></iron-icon>
      custom button content
    </paper-button>

To use `paper-button` as a link, wrap it in an anchor tag. Since `paper-button` will already
receive focus, you may want to prevent the anchor tag from receiving focus as well by setting
its tabindex to -1.

    <a href="https://www.polymer-project.org/" tabindex="-1">
      <paper-button raised>Polymer Project</paper-button>
    </a>

### Styling

Style the button with CSS as you would a normal DOM element.

    paper-button.fancy {
      background: green;
      color: yellow;
    }

    paper-button.fancy:hover {
      background: lime;
    }

    paper-button[disabled],
    paper-button[toggles][active] {
      background: red;
    }

By default, the ripple is the same color as the foreground at 25% opacity. You may
customize the color using the `--paper-button-ink-color` custom property.

The following custom properties and mixins are also available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-button-ink-color` | Background color of the ripple | `Based on the button's color`
`--paper-button` | Mixin applied to the button | `{}`
`--paper-button-disabled` | Mixin applied to the disabled button. Note that you can also use the `paper-button[disabled]` selector | `{}`
`--paper-button-flat-keyboard-focus` | Mixin applied to a flat button after it's been focused using the keyboard | `{}`
`--paper-button-raised-keyboard-focus` | Mixin applied to a raised button after it's been focused using the keyboard | `{}`

@demo demo/index.html
-->

<dom-module id="paper-button" assetpath="bower_components/paper-button/">
  <template strip-whitespace="">
    <style include="paper-material-shared-styles">
      :host {
        @apply(--layout-inline);
        @apply(--layout-center-center);
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;

        @apply(--paper-font-common-base);
        @apply(--paper-button);
      }

      :host([hidden]) {
        display: none !important;
      }

      :host([raised].keyboard-focus) {
        font-weight: bold;
        @apply(--paper-button-raised-keyboard-focus);
      }

      :host(:not([raised]).keyboard-focus) {
        font-weight: bold;
        @apply(--paper-button-flat-keyboard-focus);
      }

      :host([disabled]) {
        background: #eaeaea;
        color: #a8a8a8;
        cursor: auto;
        pointer-events: none;

        @apply(--paper-button-disabled);
      }

      :host([animated]) {
        @apply(--shadow-transition);
      }

      paper-ripple {
        color: var(--paper-button-ink-color);
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({
      is: 'paper-button',

      behaviors: [
        Polymer.PaperButtonBehavior
      ],

      properties: {
        /**
         * If true, the button should be styled with a shadow.
         */
        raised: {
          type: Boolean,
          reflectToAttribute: true,
          value: false,
          observer: '_calculateElevation'
        }
      },

      _calculateElevation: function() {
        if (!this.raised) {
          this._setElevation(0);
        } else {
          Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this);
        }
      }

      /**
      Fired when the animation finishes.
      This is useful if you want to wait until
      the ripple animation finishes to perform some action.

      @event transitionend
      Event param: {{node: Object}} detail Contains the animated node.
      */
    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function() {
  if (typeof Object.assign !== 'function') {
    (function() {
      Object.assign = function(target) {
        'use strict';
        if (target === undefined || target === null) {
          throw new TypeError('Cannot convert undefined or null to object');
        }
        var output = Object(target);
        for (var index = 1; index < arguments.length; index++) {
          var source = arguments[index];
          if (source !== undefined && source !== null) {
            for (var nextKey in source) {
              if (source.hasOwnProperty(nextKey)) {
                output[nextKey] = source[nextKey];
              }
            }
          }
        }
        return output;
      };
    })();
  }

  window.RamlBehaviors = window.RamlBehaviors || {};
  /**
   * Use `RamlBehaviors.DocsParametersBehavior` to implement a custom element
   * that is rendering a parameters table in the RAML documentation view.
   * @polymerBehavior RamlBehaviors.DocsParametersBehavior
   */
  window.RamlBehaviors.DocsParametersBehavior = {
    properties: {
      // If set automatically hides the element which doesn't have parameteres set
      autoHide: {
        type: Boolean,
        value: false
      },
      // RAML base types
      baseTypes: {
        type: Array,
        value: function() {
          return ['object', 'array','integer', 'string','number','boolean',
            'datetime','file', 'null','any'];
        }
      },
      /**
       * A list of examples in the definition.
       * This is a computed value for both `example` and `examples` properties.
       *
       * This is not computed automatically. Set the type object change observer. See the
       * `_computeExamples()` function for more information.
       *
       * If you see this documentation it means that the element that implements this behavior is
       * not using examples and it's not relevant for this element.
       */
      examples: Array,
      // Computed value if current type has examples.
      hasExamples: {
        type: Boolean,
        value: false,
        notify: true,
        computed: '_computeHasExamples(examples.*)'
      },
    },
    /**
     * Check if passed object is not empty.
     * 0 (zero) returns true while empty string returns false.
     *
     * @return {Boolean} True/False depending if passed object has a value.
     */
    hasValue: function(obj) {
      if (typeof obj === 'number' && obj === 0) {
        return true;
      }
      if (typeof obj === 'boolean') {
        return true;
      }
      return !!obj;
    },
    /**
     * in RAML `properties` property of the type object is an object.
     * To make it useful while itereing using `dom-repeat` this function
     * produces an array of objects. Object content is the same as
     * RAML parser's. Object's key is the same as the `name` property in the
     * object.
     *
     * ## Example
     * Source object:
     * ```javascript
     *  properties: {
     *    available: {
     *      description: 'description',
     *      displayName: 'available',
     *      name: 'available',
     *      required: true
     *    }
     *  }
     * ```
     * becomes:
     * ```javascript
     *  properties: [
     *    {
     *      description: 'description',
     *      displayName: 'available',
     *      name: 'available',
     *      required: true
     *    }
     *  ]
     * ```
     * @param {Object} obj The original RAML parser properties value.
     * @return {Array}
     */
    readProperties: function(obj) {
      if (!obj) {
        return [];
      }
      if (obj instanceof Array) {
        return obj;
      }
      var names = Object.getOwnPropertyNames(obj);
      if (!names) {
        return [];
      }
      return names.map(function(i) { return obj[i]; });
    },

    _computeEnumValue: function(enumValue) {
      if (!enumValue || !enumValue.length) {
        return '';
      }
      enumValue = enumValue.map(function(item) {
        if (typeof item === 'string') {
          if (item === '') {
            return '""';
          }
          return item;
        }
        return item.displayName || item.name || item.key;
      });
      return enumValue.join(', ');
    },

    /**
     * Computes list of examples.
     * This function to be used with object sub-properties observer:
     * ```
     * examples: {
     *   type: Array,
     *   computed: '_computeExamples(type.*)'
     * }
     * ```
     * or in the observers list.
     */
    _computeExamples: function(record) {
      var object = record.base;
      if (!object) {
        return undefined;
      }
      if (object.examples && object.examples.length) {
        return object.examples;
      }
      if (object.example) {
        if (typeof object.example === 'string') {
          return [object.example];
        } else {
          return [JSON.stringify(object.example, null, 2)];
        }
      }
      return undefined;
    },
    // Computes boolean value when the `examples` property change.
    _computeHasExamples: function(record) {
      var object = record.base;
      if (!object) {
        return false;
      }
      return !!object.length;
    }
  };
})();

</script>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
### Styling
`<docs-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table's each row | `#00A1DF`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`

-->
<dom-module id="docs-parameters-table-shared-styles" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style>
    :host {
      display: block;
    }

    :host([hidden]) {
      display: none;
    }

    .params-table {
      border-collapse: collapse;
      text-align: left;
      width: 100%;
      margin-bottom: 40px;
      @apply(--paper-font-body1);
      font-size: 15px;
      @apply(--docs-parameters-table);
      @apply(--docs-parameters-url-table);
    }

    .params-table-header tr,
    .narrow-title {
      vertical-align: middle;
      background-color: var(--params-table-header-background-color, #00A1DF);
      color: var(--params-table-header-color, rgba(255, 255, 255, 0.87));
      @apply(--docs-parameters-table-header);
    }

    .params-table-header tr {
      height: 36px;
    }

    .narrow-title {
      display: none;
    }

    tr.params-table-header.subheader {
      background-color: var(--params-table-subheader-background-color, rgba(0, 161, 223, 0.24));
      color: var(--params-table-subheader-color, rgba(0, 0, 0, 0.87));
      @apply(--docs-parameters-table-subheader);
    }

    tr {
      border-bottom-width: 1px;
      border-bottom-style: solid;
      border-bottom-color: var(--params-table-row-border-color, rgba(0, 161, 223, 1));
      background-color: var(--params-table-row-background-color, #fff);
      color: var(--params-table-row-color, rgba(0, 0, 0, 0.87));
    }

    tr.subproperty {
      border-bottom-color: var(--params-table-row-subproperty-border-color, rgba(0, 161, 223, 0.24));
    }

    tr.subproperty:last-of-type {
      border-bottom-color: var(--params-table-row-border-color, rgba(0, 161, 223, 1));
    }

    tr.has-children {
      border-bottom-color: var(--params-table-row-subproperty-border-color, rgba(0, 161, 223, 0.24));
    }

    tr:last-of-type {
      border-bottom-color: transparent;
    }

    .params-table th,
    .params-table td {
      padding: 8px 12px;
      @apply(--docs-parameters-table-cell);
    }

    .params-table td {
      vertical-align: top;
    }

    .param-desc .pattern,
    .param-desc .example,
    .param-desc .enum,
    .param-desc .min,
    .param-desc .max {
      color: rgba(0, 0, 0, 0.54);
      margin: 8px 0;
      @apply(--docs-parameters-table-meta);
    }

    .display ~ .value {
      margin-left: 8px;
    }

    td.param-name,
    td.param-type,
    td.param-type button {
      font-weight: 500;
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    :host([narrow]) .params-table {
      display: block;
    }

    :host([narrow]) .params-table-header {
      display: none;
    }

    :host([narrow]) tbody,
    :host([narrow]) tr {
      display: block;
      width: 100%;
    }

    :host([narrow]) td.param-name,
    :host([narrow]) td.param-type {
      display: inline-block;
    }

    :host([narrow]) td.param-desc {
      display: block;
    }

    :host([narrow]) .narrow-title {
      display: block;
      padding: 12px;
      margin: 0;
      font-size: 16px;
    }
    </style>
  </template>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */

;(function() {

/**
 * Block-Level Grammar
 */

var block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: noop,
  hr: /^( *[-*_]){3,} *(?:\n+|$)/,
  heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
  nptable: noop,
  lheading: /^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,
  blockquote: /^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,
  list: /^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: /^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
  table: noop,
  paragraph: /^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,
  text: /^[^\n]+/
};

block.bullet = /(?:[*+-]|\d+\.)/;
block.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;
block.item = replace(block.item, 'gm')
  (/bull/g, block.bullet)
  ();

block.list = replace(block.list)
  (/bull/g, block.bullet)
  ('hr', '\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))')
  ('def', '\\n+(?=' + block.def.source + ')')
  ();

block.blockquote = replace(block.blockquote)
  ('def', block.def)
  ();

block._tag = '(?!(?:'
  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'
  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'
  + '|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b';

block.html = replace(block.html)
  ('comment', /\x3c!--[\s\S]*?-- >/)
  ('closed', /<(tag)[\s\S]+?<\/\1>/)
  ('closing', /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)
  (/tag/g, block._tag)
  ();

block.paragraph = replace(block.paragraph)
  ('hr', block.hr)
  ('heading', block.heading)
  ('lheading', block.lheading)
  ('blockquote', block.blockquote)
  ('tag', '<' + block._tag)
  ('def', block.def)
  ();

/**
 * Normal Block Grammar
 */

block.normal = merge({}, block);

/**
 * GFM Block Grammar
 */

block.gfm = merge({}, block.normal, {
  fences: /^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,
  paragraph: /^/,
  heading: /^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/
});

block.gfm.paragraph = replace(block.paragraph)
  ('(?!', '(?!'
    + block.gfm.fences.source.replace('\\1', '\\2') + '|'
    + block.list.source.replace('\\1', '\\3') + '|')
  ();

/**
 * GFM + Tables Block Grammar
 */

block.tables = merge({}, block.gfm, {
  nptable: /^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,
  table: /^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/
});

/**
 * Block Lexer
 */

function Lexer(options) {
  this.tokens = [];
  this.tokens.links = {};
  this.options = options || marked.defaults;
  this.rules = block.normal;

  if (this.options.gfm) {
    if (this.options.tables) {
      this.rules = block.tables;
    } else {
      this.rules = block.gfm;
    }
  }
}

/**
 * Expose Block Rules
 */

Lexer.rules = block;

/**
 * Static Lex Method
 */

Lexer.lex = function(src, options) {
  var lexer = new Lexer(options);
  return lexer.lex(src);
};

/**
 * Preprocessing
 */

Lexer.prototype.lex = function(src) {
  src = src
    .replace(/\r\n|\r/g, '\n')
    .replace(/\t/g, '    ')
    .replace(/\u00a0/g, ' ')
    .replace(/\u2424/g, '\n');

  return this.token(src, true);
};

/**
 * Lexing
 */

Lexer.prototype.token = function(src, top, bq) {
  var src = src.replace(/^ +$/gm, '')
    , next
    , loose
    , cap
    , bull
    , b
    , item
    , space
    , i
    , l;

  while (src) {
    // newline
    if (cap = this.rules.newline.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[0].length > 1) {
        this.tokens.push({
          type: 'space'
        });
      }
    }

    // code
    if (cap = this.rules.code.exec(src)) {
      src = src.substring(cap[0].length);
      cap = cap[0].replace(/^ {4}/gm, '');
      this.tokens.push({
        type: 'code',
        text: !this.options.pedantic
          ? cap.replace(/\n+$/, '')
          : cap
      });
      continue;
    }

    // fences (gfm)
    if (cap = this.rules.fences.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'code',
        lang: cap[2],
        text: cap[3] || ''
      });
      continue;
    }

    // heading
    if (cap = this.rules.heading.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'heading',
        depth: cap[1].length,
        text: cap[2]
      });
      continue;
    }

    // table no leading pipe (gfm)
    if (top && (cap = this.rules.nptable.exec(src))) {
      src = src.substring(cap[0].length);

      item = {
        type: 'table',
        header: cap[1].replace(/^ *| *\| *$/g, '').split(/ *\| */),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3].replace(/\n$/, '').split('\n')
      };

      for (i = 0; i < item.align.length; i++) {
        if (/^ *-+: *$/.test(item.align[i])) {
          item.align[i] = 'right';
        } else if (/^ *:-+: *$/.test(item.align[i])) {
          item.align[i] = 'center';
        } else if (/^ *:-+ *$/.test(item.align[i])) {
          item.align[i] = 'left';
        } else {
          item.align[i] = null;
        }
      }

      for (i = 0; i < item.cells.length; i++) {
        item.cells[i] = item.cells[i].split(/ *\| */);
      }

      this.tokens.push(item);

      continue;
    }

    // lheading
    if (cap = this.rules.lheading.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'heading',
        depth: cap[2] === '=' ? 1 : 2,
        text: cap[1]
      });
      continue;
    }

    // hr
    if (cap = this.rules.hr.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'hr'
      });
      continue;
    }

    // blockquote
    if (cap = this.rules.blockquote.exec(src)) {
      src = src.substring(cap[0].length);

      this.tokens.push({
        type: 'blockquote_start'
      });

      cap = cap[0].replace(/^ *> ?/gm, '');

      // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.
      this.token(cap, top, true);

      this.tokens.push({
        type: 'blockquote_end'
      });

      continue;
    }

    // list
    if (cap = this.rules.list.exec(src)) {
      src = src.substring(cap[0].length);
      bull = cap[2];

      this.tokens.push({
        type: 'list_start',
        ordered: bull.length > 1
      });

      // Get each top-level item.
      cap = cap[0].match(this.rules.item);

      next = false;
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        item = cap[i];

        // Remove the list item's bullet
        // so it is seen as the next token.
        space = item.length;
        item = item.replace(/^ *([*+-]|\d+\.) +/, '');

        // Outdent whatever the
        // list item contains. Hacky.
        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !this.options.pedantic
            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')
            : item.replace(/^ {1,4}/gm, '');
        }

        // Determine whether the next list item belongs here.
        // Backpedal if it does not belong in this list.
        if (this.options.smartLists && i !== l - 1) {
          b = block.bullet.exec(cap[i + 1])[0];
          if (bull !== b && !(bull.length > 1 && b.length > 1)) {
            src = cap.slice(i + 1).join('\n') + src;
            i = l - 1;
          }
        }

        // Determine whether item is loose or not.
        // Use: /(^|\n)(?! )[^\n]+\n\n(?!\s*$)/
        // for discount behavior.
        loose = next || /\n\n(?!\s*$)/.test(item);
        if (i !== l - 1) {
          next = item.charAt(item.length - 1) === '\n';
          if (!loose) loose = next;
        }

        this.tokens.push({
          type: loose
            ? 'loose_item_start'
            : 'list_item_start'
        });

        // Recurse.
        this.token(item, false, bq);

        this.tokens.push({
          type: 'list_item_end'
        });
      }

      this.tokens.push({
        type: 'list_end'
      });

      continue;
    }

    // html
    if (cap = this.rules.html.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: this.options.sanitize
          ? 'paragraph'
          : 'html',
        pre: !this.options.sanitizer
          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),
        text: cap[0]
      });
      continue;
    }

    // def
    if ((!bq && top) && (cap = this.rules.def.exec(src))) {
      src = src.substring(cap[0].length);
      this.tokens.links[cap[1].toLowerCase()] = {
        href: cap[2],
        title: cap[3]
      };
      continue;
    }

    // table (gfm)
    if (top && (cap = this.rules.table.exec(src))) {
      src = src.substring(cap[0].length);

      item = {
        type: 'table',
        header: cap[1].replace(/^ *| *\| *$/g, '').split(/ *\| */),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3].replace(/(?: *\| *)?\n$/, '').split('\n')
      };

      for (i = 0; i < item.align.length; i++) {
        if (/^ *-+: *$/.test(item.align[i])) {
          item.align[i] = 'right';
        } else if (/^ *:-+: *$/.test(item.align[i])) {
          item.align[i] = 'center';
        } else if (/^ *:-+ *$/.test(item.align[i])) {
          item.align[i] = 'left';
        } else {
          item.align[i] = null;
        }
      }

      for (i = 0; i < item.cells.length; i++) {
        item.cells[i] = item.cells[i]
          .replace(/^ *\| *| *\| *$/g, '')
          .split(/ *\| */);
      }

      this.tokens.push(item);

      continue;
    }

    // top-level paragraph
    if (top && (cap = this.rules.paragraph.exec(src))) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'paragraph',
        text: cap[1].charAt(cap[1].length - 1) === '\n'
          ? cap[1].slice(0, -1)
          : cap[1]
      });
      continue;
    }

    // text
    if (cap = this.rules.text.exec(src)) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }

    if (src) {
      throw new
        Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return this.tokens;
};

/**
 * Inline-Level Grammar
 */

var inline = {
  escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
  autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
  url: noop,
  tag: /^\x3c!--[\s\S]*?-- >|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
  link: /^!?\[(inside)\]\(href\)/,
  reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
  nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
  strong: /^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,
  em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,
  code: /^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,
  br: /^ {2,}\n(?!\s*$)/,
  del: noop,
  text: /^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};

inline._inside = /(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;
inline._href = /\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;

inline.link = replace(inline.link)
  ('inside', inline._inside)
  ('href', inline._href)
  ();

inline.reflink = replace(inline.reflink)
  ('inside', inline._inside)
  ();

/**
 * Normal Inline Grammar
 */

inline.normal = merge({}, inline);

/**
 * Pedantic Inline Grammar
 */

inline.pedantic = merge({}, inline.normal, {
  strong: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/
});

/**
 * GFM Inline Grammar
 */

inline.gfm = merge({}, inline.normal, {
  escape: replace(inline.escape)('])', '~|])')(),
  url: /^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,
  del: /^~~(?=\S)([\s\S]*?\S)~~/,
  text: replace(inline.text)
    (']|', '~]|')
    ('|', '|https?://|')
    ()
});

/**
 * GFM + Line Breaks Inline Grammar
 */

inline.breaks = merge({}, inline.gfm, {
  br: replace(inline.br)('{2,}', '*')(),
  text: replace(inline.gfm.text)('{2,}', '*')()
});

/**
 * Inline Lexer & Compiler
 */

function InlineLexer(links, options) {
  this.options = options || marked.defaults;
  this.links = links;
  this.rules = inline.normal;
  this.renderer = this.options.renderer || new Renderer;
  this.renderer.options = this.options;

  if (!this.links) {
    throw new
      Error('Tokens array requires a `links` property.');
  }

  if (this.options.gfm) {
    if (this.options.breaks) {
      this.rules = inline.breaks;
    } else {
      this.rules = inline.gfm;
    }
  } else if (this.options.pedantic) {
    this.rules = inline.pedantic;
  }
}

/**
 * Expose Inline Rules
 */

InlineLexer.rules = inline;

/**
 * Static Lexing/Compiling Method
 */

InlineLexer.output = function(src, links, options) {
  var inline = new InlineLexer(links, options);
  return inline.output(src);
};

/**
 * Lexing/Compiling
 */

InlineLexer.prototype.output = function(src) {
  var out = ''
    , link
    , text
    , href
    , cap;

  while (src) {
    // escape
    if (cap = this.rules.escape.exec(src)) {
      src = src.substring(cap[0].length);
      out += cap[1];
      continue;
    }

    // autolink
    if (cap = this.rules.autolink.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[2] === '@') {
        text = cap[1].charAt(6) === ':'
          ? this.mangle(cap[1].substring(7))
          : this.mangle(cap[1]);
        href = this.mangle('mailto:') + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      out += this.renderer.link(href, null, text);
      continue;
    }

    // url (gfm)
    if (!this.inLink && (cap = this.rules.url.exec(src))) {
      src = src.substring(cap[0].length);
      text = escape(cap[1]);
      href = text;
      out += this.renderer.link(href, null, text);
      continue;
    }

    // tag
    if (cap = this.rules.tag.exec(src)) {
      if (!this.inLink && /^<a /i.test(cap[0])) {
        this.inLink = true;
      } else if (this.inLink && /^<\/a>/i.test(cap[0])) {
        this.inLink = false;
      }
      src = src.substring(cap[0].length);
      out += this.options.sanitize
        ? this.options.sanitizer
          ? this.options.sanitizer(cap[0])
          : escape(cap[0])
        : cap[0]
      continue;
    }

    // link
    if (cap = this.rules.link.exec(src)) {
      src = src.substring(cap[0].length);
      this.inLink = true;
      out += this.outputLink(cap, {
        href: cap[2],
        title: cap[3]
      });
      this.inLink = false;
      continue;
    }

    // reflink, nolink
    if ((cap = this.rules.reflink.exec(src))
        || (cap = this.rules.nolink.exec(src))) {
      src = src.substring(cap[0].length);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = this.links[link.toLowerCase()];
      if (!link || !link.href) {
        out += cap[0].charAt(0);
        src = cap[0].substring(1) + src;
        continue;
      }
      this.inLink = true;
      out += this.outputLink(cap, link);
      this.inLink = false;
      continue;
    }

    // strong
    if (cap = this.rules.strong.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.strong(this.output(cap[2] || cap[1]));
      continue;
    }

    // em
    if (cap = this.rules.em.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.em(this.output(cap[2] || cap[1]));
      continue;
    }

    // code
    if (cap = this.rules.code.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.codespan(escape(cap[2], true));
      continue;
    }

    // br
    if (cap = this.rules.br.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.br();
      continue;
    }

    // del (gfm)
    if (cap = this.rules.del.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.del(this.output(cap[1]));
      continue;
    }

    // text
    if (cap = this.rules.text.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.text(escape(this.smartypants(cap[0])));
      continue;
    }

    if (src) {
      throw new
        Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return out;
};

/**
 * Compile Link
 */

InlineLexer.prototype.outputLink = function(cap, link) {
  var href = escape(link.href)
    , title = link.title ? escape(link.title) : null;

  return cap[0].charAt(0) !== '!'
    ? this.renderer.link(href, title, this.output(cap[1]))
    : this.renderer.image(href, title, escape(cap[1]));
};

/**
 * Smartypants Transformations
 */

InlineLexer.prototype.smartypants = function(text) {
  if (!this.options.smartypants) return text;
  return text
    // em-dashes
    .replace(/---/g, '\u2014')
    // en-dashes
    .replace(/--/g, '\u2013')
    // opening singles
    .replace(/(^|[-\u2014/(\[{"\s])'/g, '$1\u2018')
    // closing singles & apostrophes
    .replace(/'/g, '\u2019')
    // opening doubles
    .replace(/(^|[-\u2014/(\[{\u2018\s])"/g, '$1\u201c')
    // closing doubles
    .replace(/"/g, '\u201d')
    // ellipses
    .replace(/\.{3}/g, '\u2026');
};

/**
 * Mangle Links
 */

InlineLexer.prototype.mangle = function(text) {
  if (!this.options.mangle) return text;
  var out = ''
    , l = text.length
    , i = 0
    , ch;

  for (; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }
    out += '&#' + ch + ';';
  }

  return out;
};

/**
 * Renderer
 */

function Renderer(options) {
  this.options = options || {};
}

Renderer.prototype.code = function(code, lang, escaped) {
  if (this.options.highlight) {
    var out = this.options.highlight(code, lang);
    if (out != null && out !== code) {
      escaped = true;
      code = out;
    }
  }

  if (!lang) {
    return '<pre><code>'
      + (escaped ? code : escape(code, true))
      + '\n</code></pre>';
  }

  return '<pre><code class="'
    + this.options.langPrefix
    + escape(lang, true)
    + '">'
    + (escaped ? code : escape(code, true))
    + '\n</code></pre>\n';
};

Renderer.prototype.blockquote = function(quote) {
  return '<blockquote>\n' + quote + '</blockquote>\n';
};

Renderer.prototype.html = function(html) {
  return html;
};

Renderer.prototype.heading = function(text, level, raw) {
  return '<h'
    + level
    + ' id="'
    + this.options.headerPrefix
    + raw.toLowerCase().replace(/[^\w]+/g, '-')
    + '">'
    + text
    + '</h'
    + level
    + '>\n';
};

Renderer.prototype.hr = function() {
  return this.options.xhtml ? '<hr/>\n' : '<hr>\n';
};

Renderer.prototype.list = function(body, ordered) {
  var type = ordered ? 'ol' : 'ul';
  return '<' + type + '>\n' + body + '</' + type + '>\n';
};

Renderer.prototype.listitem = function(text) {
  return '<li>' + text + '</li>\n';
};

Renderer.prototype.paragraph = function(text) {
  return '<p>' + text + '</p>\n';
};

Renderer.prototype.table = function(header, body) {
  return '<table>\n'
    + '<thead>\n'
    + header
    + '</thead>\n'
    + '<tbody>\n'
    + body
    + '</tbody>\n'
    + '</table>\n';
};

Renderer.prototype.tablerow = function(content) {
  return '<tr>\n' + content + '</tr>\n';
};

Renderer.prototype.tablecell = function(content, flags) {
  var type = flags.header ? 'th' : 'td';
  var tag = flags.align
    ? '<' + type + ' style="text-align:' + flags.align + '">'
    : '<' + type + '>';
  return tag + content + '</' + type + '>\n';
};

// span level renderer
Renderer.prototype.strong = function(text) {
  return '<strong>' + text + '</strong>';
};

Renderer.prototype.em = function(text) {
  return '<em>' + text + '</em>';
};

Renderer.prototype.codespan = function(text) {
  return '<code>' + text + '</code>';
};

Renderer.prototype.br = function() {
  return this.options.xhtml ? '<br/>' : '<br>';
};

Renderer.prototype.del = function(text) {
  return '<del>' + text + '</del>';
};

Renderer.prototype.link = function(href, title, text) {
  if (this.options.sanitize) {
    try {
      var prot = decodeURIComponent(unescape(href))
        .replace(/[^\w:]/g, '')
        .toLowerCase();
    } catch (e) {
      return '';
    }
    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0) {
      return '';
    }
  }
  var out = '<a href="' + href + '"';
  if (title) {
    out += ' title="' + title + '"';
  }
  out += '>' + text + '</a>';
  return out;
};

Renderer.prototype.image = function(href, title, text) {
  var out = '<img src="' + href + '" alt="' + text + '"';
  if (title) {
    out += ' title="' + title + '"';
  }
  out += this.options.xhtml ? '/>' : '>';
  return out;
};

Renderer.prototype.text = function(text) {
  return text;
};

/**
 * Parsing & Compiling
 */

function Parser(options) {
  this.tokens = [];
  this.token = null;
  this.options = options || marked.defaults;
  this.options.renderer = this.options.renderer || new Renderer;
  this.renderer = this.options.renderer;
  this.renderer.options = this.options;
}

/**
 * Static Parse Method
 */

Parser.parse = function(src, options, renderer) {
  var parser = new Parser(options, renderer);
  return parser.parse(src);
};

/**
 * Parse Loop
 */

Parser.prototype.parse = function(src) {
  this.inline = new InlineLexer(src.links, this.options, this.renderer);
  this.tokens = src.reverse();

  var out = '';
  while (this.next()) {
    out += this.tok();
  }

  return out;
};

/**
 * Next Token
 */

Parser.prototype.next = function() {
  return this.token = this.tokens.pop();
};

/**
 * Preview Next Token
 */

Parser.prototype.peek = function() {
  return this.tokens[this.tokens.length - 1] || 0;
};

/**
 * Parse Text Tokens
 */

Parser.prototype.parseText = function() {
  var body = this.token.text;

  while (this.peek().type === 'text') {
    body += '\n' + this.next().text;
  }

  return this.inline.output(body);
};

/**
 * Parse Current Token
 */

Parser.prototype.tok = function() {
  switch (this.token.type) {
    case 'space': {
      return '';
    }
    case 'hr': {
      return this.renderer.hr();
    }
    case 'heading': {
      return this.renderer.heading(
        this.inline.output(this.token.text),
        this.token.depth,
        this.token.text);
    }
    case 'code': {
      return this.renderer.code(this.token.text,
        this.token.lang,
        this.token.escaped);
    }
    case 'table': {
      var header = ''
        , body = ''
        , i
        , row
        , cell
        , flags
        , j;

      // header
      cell = '';
      for (i = 0; i < this.token.header.length; i++) {
        flags = { header: true, align: this.token.align[i] };
        cell += this.renderer.tablecell(
          this.inline.output(this.token.header[i]),
          { header: true, align: this.token.align[i] }
        );
      }
      header += this.renderer.tablerow(cell);

      for (i = 0; i < this.token.cells.length; i++) {
        row = this.token.cells[i];

        cell = '';
        for (j = 0; j < row.length; j++) {
          cell += this.renderer.tablecell(
            this.inline.output(row[j]),
            { header: false, align: this.token.align[j] }
          );
        }

        body += this.renderer.tablerow(cell);
      }
      return this.renderer.table(header, body);
    }
    case 'blockquote_start': {
      var body = '';

      while (this.next().type !== 'blockquote_end') {
        body += this.tok();
      }

      return this.renderer.blockquote(body);
    }
    case 'list_start': {
      var body = ''
        , ordered = this.token.ordered;

      while (this.next().type !== 'list_end') {
        body += this.tok();
      }

      return this.renderer.list(body, ordered);
    }
    case 'list_item_start': {
      var body = '';

      while (this.next().type !== 'list_item_end') {
        body += this.token.type === 'text'
          ? this.parseText()
          : this.tok();
      }

      return this.renderer.listitem(body);
    }
    case 'loose_item_start': {
      var body = '';

      while (this.next().type !== 'list_item_end') {
        body += this.tok();
      }

      return this.renderer.listitem(body);
    }
    case 'html': {
      var html = !this.token.pre && !this.options.pedantic
        ? this.inline.output(this.token.text)
        : this.token.text;
      return this.renderer.html(html);
    }
    case 'paragraph': {
      return this.renderer.paragraph(this.inline.output(this.token.text));
    }
    case 'text': {
      return this.renderer.paragraph(this.parseText());
    }
  }
};

/**
 * Helpers
 */

function escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function unescape(html) {
	// explicitly match decimal, hex, and named HTML entities 
  return html.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g, function(_, n) {
    n = n.toLowerCase();
    if (n === 'colon') return ':';
    if (n.charAt(0) === '#') {
      return n.charAt(1) === 'x'
        ? String.fromCharCode(parseInt(n.substring(2), 16))
        : String.fromCharCode(+n.substring(1));
    }
    return '';
  });
}

function replace(regex, opt) {
  regex = regex.source;
  opt = opt || '';
  return function self(name, val) {
    if (!name) return new RegExp(regex, opt);
    val = val.source || val;
    val = val.replace(/(^|[^\[])\^/g, '$1');
    regex = regex.replace(name, val);
    return self;
  };
}

function noop() {}
noop.exec = noop;

function merge(obj) {
  var i = 1
    , target
    , key;

  for (; i < arguments.length; i++) {
    target = arguments[i];
    for (key in target) {
      if (Object.prototype.hasOwnProperty.call(target, key)) {
        obj[key] = target[key];
      }
    }
  }

  return obj;
}


/**
 * Marked
 */

function marked(src, opt, callback) {
  if (callback || typeof opt === 'function') {
    if (!callback) {
      callback = opt;
      opt = null;
    }

    opt = merge({}, marked.defaults, opt || {});

    var highlight = opt.highlight
      , tokens
      , pending
      , i = 0;

    try {
      tokens = Lexer.lex(src, opt)
    } catch (e) {
      return callback(e);
    }

    pending = tokens.length;

    var done = function(err) {
      if (err) {
        opt.highlight = highlight;
        return callback(err);
      }

      var out;

      try {
        out = Parser.parse(tokens, opt);
      } catch (e) {
        err = e;
      }

      opt.highlight = highlight;

      return err
        ? callback(err)
        : callback(null, out);
    };

    if (!highlight || highlight.length < 3) {
      return done();
    }

    delete opt.highlight;

    if (!pending) return done();

    for (; i < tokens.length; i++) {
      (function(token) {
        if (token.type !== 'code') {
          return --pending || done();
        }
        return highlight(token.text, token.lang, function(err, code) {
          if (err) return done(err);
          if (code == null || code === token.text) {
            return --pending || done();
          }
          token.text = code;
          token.escaped = true;
          --pending || done();
        });
      })(tokens[i]);
    }

    return;
  }
  try {
    if (opt) opt = merge({}, marked.defaults, opt);
    return Parser.parse(Lexer.lex(src, opt), opt);
  } catch (e) {
    e.message += '\nPlease report this to https://github.com/chjj/marked.';
    if ((opt || marked.defaults).silent) {
      return '<p>An error occured:</p><pre>'
        + escape(e.message + '', true)
        + '</pre>';
    }
    throw e;
  }
}

/**
 * Options
 */

marked.options =
marked.setOptions = function(opt) {
  merge(marked.defaults, opt);
  return marked;
};

marked.defaults = {
  gfm: true,
  tables: true,
  breaks: false,
  pedantic: false,
  sanitize: false,
  sanitizer: null,
  mangle: true,
  smartLists: false,
  silent: false,
  highlight: null,
  langPrefix: 'lang-',
  smartypants: false,
  headerPrefix: '',
  renderer: new Renderer,
  xhtml: false
};

/**
 * Expose
 */

marked.Parser = Parser;
marked.parser = Parser.parse;

marked.Renderer = Renderer;

marked.Lexer = Lexer;
marked.lexer = Lexer.lex;

marked.InlineLexer = InlineLexer;
marked.inlineLexer = InlineLexer.output;

marked.parse = marked;

if (typeof module !== 'undefined' && typeof exports === 'object') {
  module.exports = marked;
} else if (typeof define === 'function' && define.amd) {
  define(function() { return marked; });
} else {
  this.marked = marked;
}

}).call(function() {
  return this || (typeof window !== 'undefined' ? window : global);
}());
</script>
<!--
Element wrapper for the [marked](https://github.com/chjj/marked) library.

`<marked-element>` accepts Markdown source and renders it to a child
element with the class `markdown-html`. This child element can be styled
as you would a normal DOM element. If you do not provide a child element
with the `markdown-html` class, the Markdown source will still be rendered,
but to a shadow DOM child that cannot be styled.


### Markdown Content

The Markdown source can be specified several ways:

#### Use the `markdown` attribute to bind markdown

    <marked-element markdown="`Markdown` is _awesome_!">
      <div class="markdown-html"></div>
    </marked-element>

#### Use `<script type="text/markdown">` element child to inline markdown

    <marked-element>
      <div class="markdown-html"></div>
      <script type="text/markdown">
        Check out my markdown!

        We can even embed elements without fear of the HTML parser mucking up their
        textual representation:

        ```html
        <awesome-sauce>
          <div>Oops, I'm about to forget to close this div.
        </awesome-sauce>
        ```
      </script>
    </marked-element>

#### Use `<script type="text/markdown" src="URL">` element child to specify remote markdown

    <marked-element>
      <div class="markdown-html"></div>
      <script type="text/markdown" src="../guidelines.md"></script>
    </marked-element>

Note that the `<script type="text/markdown">` approach is *static*. Changes to
the script content will *not* update the rendered markdown!

Though, you can data bind to the `src` attribute to change the markdown.

```html
<marked-element>
  <div class="markdown-html"></div>
  <script type="text/markdown" src$="[[source]]"></script>
</marked-element>
...
<script>
  ...
  this.source = '../guidelines.md';
</script>
```

### Styling
If you are using a child with the `markdown-html` class, you can style it
as you would a regular DOM element:

    .markdown-html p {
      color: red;
    }

    .markdown-html td:first-child {
      padding-left: 24px;
    }

@element marked-element
@group Molecules
@hero hero.svg
@demo demo/index.html
-->
<dom-module id="marked-element" assetpath="bower_components/marked-element/">
  <template>
    <style>
      :host {
        display: block;
      }

      /* Thanks IE 10. */
      .hidden {
        display: none !important;
      }
    </style>
    <content select=".markdown-html"></content>
    <div id="content" class="hidden"></div>
  </template>

</dom-module>

<script>

  'use strict';

  Polymer({

    is: 'marked-element',

    properties: {

      /**
       * The markdown source that should be rendered by this element.
       */
      markdown: {
        observer: 'render',
        type: String,
        value: null
      },
      /**
       * Enable GFM line breaks (regular newlines instead of two spaces for breaks)
       */
      breaks: {
        observer: 'render',
        type: Boolean,
        value: false
      },
      /**
       * Conform to obscure parts of markdown.pl as much as possible. Don't fix any of the original markdown bugs or poor behavior.
       */
      pedantic: {
        observer: 'render',
        type: Boolean,
        value: false
      },
      /**
       * Function used to customize a renderer based on the [API specified in the Marked
       * library](https://github.com/chjj/marked#overriding-renderer-methods).
       * It takes one argument: a marked renderer object, which is mutated by the function.
       */
      renderer: {
        observer: 'render',
        type: Function,
        value: null
      },
      /**
       * Sanitize the output. Ignore any HTML that has been input.
       */
      sanitize: {
        observer: 'render',
        type: Boolean,
        value: false
      },
      /**
       * Use "smart" typographic punctuation for things like quotes and dashes.
       */
      smartypants: {
        observer: 'render',
        type: Boolean,
        value: false
      },
      /**
       * Callback function invoked by Marked after HTML has been rendered.
       * It must take two arguments: err and text and must return the resulting text.
       */
      callback: {
        observer: 'render',
        type: Function,
        value: null
      },
      /**
       * A reference to the XMLHttpRequest instance used to generate the
       * network request.
       *
       * @type {XMLHttpRequest}
       */
      xhr: {
        type: Object,
        notify: true,
        readOnly: true
      }
    },

    ready: function() {
      if (this.markdown) {
        return;
      }

      // Use the Markdown from the first `<script>` descendant whose MIME type starts with
      // "text/markdown". Script elements beyond the first are ignored.
      this._markdownElement = Polymer.dom(this).querySelector('[type="text/markdown"]');
      if (!this._markdownElement) {
        return;
      }

      this.markdown = this._unindent(this._markdownElement.textContent);

      if (this._markdownElement.src) {
        this._request(this._markdownElement.src);
      } else {
        var observer = new MutationObserver(this._onScriptAttributeChanged
            .bind(this));
        observer.observe(this._markdownElement, { attributes: true })
      }
    },

    /**
     * Renders `markdown` to HTML when the element is attached.
     *
     * This serves a dual purpose:
     *
     *  * Prevents unnecessary work (no need to render when not visible).
     *
     *  * `attached` fires top-down, so we can give ancestors a chance to
     *    register listeners for the `syntax-highlight` event _before_ we render
     *    any markdown.
     *
     */
    attached: function() {
      this._attached = true;
      this._outputElement = this.outputElement;
      this.render();
    },

    detached: function() {
      this._attached = false;
    },

    /**
     * Unindents the markdown source that will be rendered.
     */
    unindent: function(text) {
      return this._unindent(text);
    },

    get outputElement () {
      var child = Polymer.dom(this).queryDistributedElements('.markdown-html')[0];

      if (child)
        return child;

      this.toggleClass('hidden', false, this.$.content);
      return this.$.content;
    },

    /**
     * The `marked-render-complete` event is fired once Markdown to HTML
     * conversion has finished, and the DOM has been populated via the resulting
     * HTML.
     *
     * @event marked-render-complete
     */

    /**
     * Renders `markdown` into this element's DOM.
     *
     * This is automatically called whenever the `markdown` property is changed.
     *
     * The only case where you should be calling this is if you are providing
     * markdown via `<script type="text/markdown">` after this element has been
     * constructed (or updating that markdown).
     */
    render: function() {
      if (!this._attached) return;
      if (!this.markdown) {
        Polymer.dom(this._outputElement).innerHTML = '';
        return;
      }
      var renderer = new marked.Renderer();
      if (this.renderer) {
        this.renderer(renderer);
      }
      var opts = {
        renderer: renderer,
        highlight: this._highlight.bind(this),
        breaks: this.breaks,
        sanitize: this.sanitize,
        pedantic: this.pedantic,
        smartypants: this.smartypants
      };
      Polymer.dom(this._outputElement).innerHTML = marked(this.markdown, opts, this.callback);
      this.fire('marked-render-complete');
    },

    _highlight: function(code, lang) {
      var event = this.fire('syntax-highlight', {code: code, lang: lang});
      return event.detail.code || code;
    },

    _unindent: function(text) {
      if (!text) return text;
      var lines  = text.replace(/\t/g, '  ').split('\n');
      var indent = lines.reduce(function(prev, line) {
        if (/^\s*$/.test(line)) return prev;  // Completely ignore blank lines.

        var lineIndent = line.match(/^(\s*)/)[0].length;
        if (prev === null) return lineIndent;
        return lineIndent < prev ? lineIndent : prev;
      }, null);

      return lines.map(function(l) { return l.substr(indent); }).join('\n');
    },

    /**
     * Fired when the XHR finishes loading
     *
     * @event marked-loadend
     */
    _request: function(url) {
      this._setXhr(new XMLHttpRequest());
      var xhr = this.xhr;

      if (xhr.readyState > 0) {
        return null;
      }

      xhr.addEventListener('error', this._handleError.bind(this));
      xhr.addEventListener('loadend', function(e) {
        var status = this.xhr.status || 0;
        // Note: if we are using the file:// protocol, the status code will be 0
        // for all outcomes (successful or otherwise).
        if (status === 0 || (status >= 200 && status < 300)) {
          this.sanitize = true;
          this.markdown = e.target.response;
        } else {
          this._handleError(e);
        }

        this.fire('marked-loadend', e);
      }.bind(this));

      xhr.open('GET', url);
      xhr.setRequestHeader('Accept', 'text/markdown');
      xhr.send();
    },

    /**
     * Fired when an error is received while fetching remote markdown content.
     *
     * @event marked-request-error
     */
    _handleError: function(e) {
      var evt = this.fire('marked-request-error', e, {cancelable: true});
      if (!evt.defaultPrevented) {
        this.markdown = 'Failed loading markdown source';
      }
    },

    _onScriptAttributeChanged: function(mutation) {
      if (mutation[0].attributeName !== 'src') {
        return;
      }

      this._request(this._markdownElement.src);
    }
  });

</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><dom-module id="prism-theme-default" assetpath="bower_components/prism-element/">
  <template>
    <style>
    /**
    * prism.js default theme for JavaScript, CSS and HTML
    * Based on dabblet (http://dabblet.com)
    * @author Lea Verou
    */
    code[class*="language-"],
    pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
    }

    pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
    code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background: #b3d4fc;
    }

    pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
    code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
    }

    @media print {
    code[class*="language-"],
    pre[class*="language-"] {
      text-shadow: none;
    }
    }

    /* Code blocks */
    pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
    }

    :not(pre) > code[class*="language-"],
    pre[class*="language-"] {
    background: #f5f2f0;
    }

    /* Inline code */
    :not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
    }

    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
    color: slategray;
    }

    .token.punctuation {
    color: #999;
    }

    .namespace {
    opacity: .7;
    }

    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
    color: #905;
    }

    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
    color: #690;
    }

    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
    color: #a67f59;
    background: hsla(0, 0%, 100%, .5);
    }

    .token.atrule,
    .token.attr-value,
    .token.keyword {
    color: #07a;
    }

    .token.function {
    color: #DD4A68;
    }

    .token.regex,
    .token.important,
    .token.variable {
    color: #e90;
    }

    .token.important,
    .token.bold {
    font-weight: bold;
    }
    .token.italic {
    font-style: italic;
    }

    .token.entity {
    cursor: help;
    }
    </style>
  </template>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
## Styles for markdown preview
It should be included where the `marked-element` is used.

## Usage example
```
<marked-element markdown="[[item.description]]">
  <div class="markdown-html"></div>
</marked-element>
```

Note use of the `markdown-html` CSS rules. It is required by markdown element also all css rules
defined here are scoped to a container with this class name.

Custom property | Description | Default
----------------|-------------|----------
`--code-background-color` | Background color of the code block | `#f5f2f0`


@group UI Elements
@element markdown-styles
-->
<dom-module id="markdown-styles" assetpath="bower_components/markdown-styles/">
  <template>
    <style>
    .markdown-html {
      @apply(--arc-font-code1);
    }

    .markdown-html h1,
    .markdown-html h2,
    .markdown-html h3,
    .markdown-html h4,
    .markdown-html h5,
    .markdown-html h6 {
      @apply(--arc-font-title);
    }

    .markdown-html h1 tt,
    .markdown-html h1 code,
    .markdown-html h2 tt,
    .markdown-html h2 code,
    .markdown-html h3 tt,
    .markdown-html h3 code,
    .markdown-html h4 tt,
    .markdown-html h4 code,
    .markdown-html h5 tt,
    .markdown-html h5 code,
    .markdown-html h6 tt,
    .markdown-html h6 code {
      font-size: inherit
    }

    .markdown-html h1 {
      @apply(--arc-font-display1);
      border-bottom: 1px solid #eee;
      padding-top: 1rem;
      padding-bottom: 0.5rem;
    }

    .markdown-html h2 {
      @apply(--arc-font-title);
      border-bottom: 1px solid #eee;
    }

    .markdown-html h3 {
      @apply(--arc-font-subhead);
      font-size: 1.5em;
      line-height: 1.43
    }

    .markdown-html h4 {
      @apply(--arc-font-subhead);
      font-size: 1.25em
    }

    .markdown-html h5 {
      @apply(--arc-font-subhead);
      font-size: 1em
    }

    .markdown-html h6 {
      @apply(--arc-font-subhead);
      font-size: 1em;
      color: #777;
    }

    .markdown-html p,
    .markdown-html blockquote,
    .markdown-html ul,
    .markdown-html ol,
    .markdown-html dl,
    .markdown-html table,
    .markdown-html pre {
      @apply(--arc-font-body1);
      margin-top: 0;
      margin-bottom: 16px
    }

    .markdown-html hr {
      height: 4px;
      padding: 0;
      margin: 16px 0;
      background-color: #e7e7e7;
      border: 0 none
    }

    .markdown-html ul,
    .markdown-html ol {
      padding-left: 2em
    }

    .markdown-html ul.no-list,
    .markdown-html ol.no-list {
      padding: 0;
      list-style-type: none
    }

    .markdown-html ul ul,
    .markdown-html ul ol,
    .markdown-html ol ol,
    .markdown-html ol ul {
      margin-top: 0;
      margin-bottom: 0
    }

    .markdown-html li>p {
      margin-top: 16px
    }

    .markdown-html dl {
      padding: 0
    }

    .markdown-html dl dt {
      padding: 0;
      margin-top: 16px;
      font-size: 1em;
      font-style: italic;
      font-weight: bold
    }

    .markdown-html dl dd {
      padding: 0 16px;
      margin-bottom: 16px
    }

    .markdown-html blockquote {
      padding: 0 15px;
      color: #777;
      border-left: 4px solid #ddd
    }

    .markdown-html blockquote>:first-child {
      margin-top: 0
    }

    .markdown-html blockquote>:last-child {
      margin-bottom: 0
    }

    .markdown-html table {
      @apply(--arc-font-body1);
      display: block;
      width: 100%;
      overflow: auto;
      word-break: normal;
      word-break: keep-all;
      border-collapse: collapse;
    }

    .markdown-html table th {
      font-weight: bold
    }

    .markdown-html table th,
    .markdown-html table td {
      padding: 6px 13px;
      border: 1px solid #ddd
    }

    .markdown-html table tr {
      background-color: #fff;
      border-top: 1px solid #ccc
    }

    .markdown-html table tr:nth-child(2n) {
      background-color: #f8f8f8
    }

    .markdown-html img {
      max-width: 100%;
      box-sizing: content-box;
      background-color: #fff
    }

    .markdown-html img[align=right] {
      padding-left: 20px
    }

    .markdown-html img[align=left] {
      padding-right: 20px
    }

    .markdown-html code,
    .markdown-html tt {
      @aplly(--arc-font-common-code);
      padding: 0;
      padding-top: 0.2em;
      padding-bottom: 0.2em;
      margin: 0;
      background-color: rgba(0, 0, 0, 0.04);
      border-radius: 2px
    }

    .markdown-html pre {
      word-wrap: normal
    }

    /**
    * prism.js default theme for JavaScript, CSS and HTML
    * Based on dabblet (http://dabblet.com)
    * @author Lea Verou
    */
    .markdown-html code,
    .markdown-html pre {
      @apply(--arc-font-common-code);
      color: black;
      background: var(--code-background-color);
      text-shadow: 0 1px white;
      text-align: left;
      white-space: pre;
      word-spacing: normal;
      word-break: normal;
      word-wrap: normal;
      line-height: 1.5;

      -moz-tab-size: 4;
      -o-tab-size: 4;
      tab-size: 4;

      -webkit-hyphens: none;
      -moz-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
    }

    .markdown-html pre::-moz-selection,
    .markdown-html pre ::-moz-selection,
    .markdown-html code::-moz-selection,
    .markdown-html code ::-moz-selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    .markdown-html pre::selection,
    .markdown-html pre ::selection,
    .markdown-html code::selection,
    .markdown-html code ::selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    @media print {
      .markdown-html code,
      .markdown-html pre {
        text-shadow: none;
      }
    }

    /* Code blocks */
    .markdown-html pre {
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
    }

    .markdown-html :not(pre) > code,
    .markdown-html pre,
    pre.markdown-html {
      background: var(--code-background-color, #f5f2f0);
    }

    /* Inline code */
    .markdown-html :not(pre) > code {
      padding: .1em;
      border-radius: .3em;
      white-space: normal;
    }

    .markdown-html .token.comment,
    .markdown-html .token.prolog,
    .markdown-html .token.doctype,
    .markdown-html .token.cdata {
      color: slategray;
    }

    .markdown-html .token.punctuation {
      color: var(--code-punctuation-value-color, #999);
    }

    .markdown-html .namespace {
      opacity: .7;
    }

    .markdown-html .token.property,
    .markdown-html .token.tag,
    .markdown-html .token.boolean,
    .markdown-html .token.number,
    .markdown-html .token.constant,
    .markdown-html .token.symbol,
    .markdown-html .token.deleted {
      color: var(--code-type-number-value-color, #905);
    }

    .markdown-html .token.selector,
    .markdown-html .token.attr-name,
    .markdown-html .token.string,
    .markdown-html .token.char,
    .markdown-html .token.builtin,
    .markdown-html .token.inserted {
      color: var(--code-type-text-value-color, #690);
    }

    .markdown-html .token.operator,
    .markdown-html .token.entity,
    .markdown-html .token.url,
    .markdown-html .language-css .token.string,
    .markdown-html .style .token.string {
      color: var(--code-punctuation-value-color, #a67f59);
      background: hsla(0, 0%, 100%, .5);
    }

    .markdown-html .token.atrule,
    .markdown-html .token.attr-value,
    .markdown-html .token.keyword {
      color: #07a;
    }

    .markdown-html .token.function {
      color: #DD4A68;
    }

    .markdown-html .token.regex,
    .markdown-html .token.important,
    .markdown-html .token.variable {
      color: #e90;
    }

    .markdown-html .token.important,
    .markdown-html .token.bold {
      font-weight: bold;
    }
    .markdown-html .token.italic {
      font-style: italic;
    }

    .markdown-html .token.entity {
      cursor: help;
    }
    </style>
  </template>
</dom-module>
<!--
`<docs-parameters-table>` A parameters list and description table for the RAML documentation view

This element renders a table of paramteres with the doccumentation. It can be used to display
URL parameters.
For headers documentation table pleae, use `<docs-headers-table>` element.
For types documentation table pleae, use `<docs-body-parameters-table>` element.

### Example
```
<docs-parameters-table
  uri-parameters="[[uriParameters]]"
  query-parameters="[[queryParameters]]"></docs-parameters-table>
```

### Object properties
An object in both arrays can contain any property that URI and query parameters can contain.

Currently following properties are supported:

- name (required) - name of the property, in case of UIR parameter it should be the parameter itself
- type - the type of the parameter, any RAML allowed value will be accepted
- description - description of the parameter
- required - mark that the property is a required property
- pattern - validation pattern to be applied to the parameter value
- example - example value of the parameter
- min - minimum value of the parametre when the type is numeric
- max - maximum value of the parametre when the type is numeric
- enum - List of possible values.

### Styling
`<docs-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table's each row | `#00A1DF`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`

@group RAML Elements
@element docs-parameters-table
@demo demo/docs-parameters-table.html
@hero hero.svg
-->
<dom-module id="docs-parameters-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <h5 class="narrow-title">Properties</h5><table class="params-table">
      <thead class="params-table-header">
        <tr>
          <th>Parameter</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      
      <tbody>
        <template is="dom-if" if="[[hasUriParameteres]]">
          <tr class="params-table-header subheader path">
            <td colspan="3">Path parameters</td>
          </tr>
          <template is="dom-repeat" items="[[displayUriParameters]]">
            <tr>
              <td class="param-name">[[item.name]]<span hidden$="[[!item.required]]">*</span></td>
              <td class="param-type">[[item.type]]</td>
              <td class="param-desc">
                <div hidden$="[[!hasValue(item.description)]]">
                  <marked-element markdown="[[item.description]]">
                    <div class="markdown-html markdown-body"></div>
                  </marked-element>
                </div>
                <div hidden$="[[!hasValue(item.pattern)]]" class="pattern">Validation pattern: <span>[[item.pattern]]</span></div>
                <div hidden$="[[!hasValue(item.example)]]" class="example">Example value: <span>[[item.example]]</span></div>
                <div hidden$="[[!hasValue(item.min)]]" class="example">Minimum value: <span>[[item.min]]</span></div>
                <div hidden$="[[!hasValue(item.max)]]" class="example">Maximum value: <span>[[item.max]]</span></div>
                <div hidden$="[[!hasValue(item.enum)]]" class="example">Possible values: <span>[[_computeEnumValue(item.enum)]]</span></div>
              </td>
            </tr>
          </template>
        </template>
        <template is="dom-if" if="[[hasQueryParameteres]]">
          <tr class="params-table-header subheader query">
            <td colspan="3">Query parameters</td>
          </tr>
          <template is="dom-repeat" items="[[displayQueryParameters]]">
            <tr class="query-param">
              <td class="param-name">[[item.name]]<span hidden$="[[!item.required]]">*</span></td>
              <td class="param-type">[[item.type]]</td>
              <td class="param-desc">
                <div hidden$="[[!hasValue(item.description)]]" data-property-doc-markdown$="[[index]]">
                  <div hidden$="[[!hasValue(item.description)]]">
                    <marked-element markdown="[[item.description]]">
                      <div class="markdown-html markdown-body"></div>
                    </marked-element>
                  </div>
                </div>
                <div hidden$="[[!hasValue(item.pattern)]]" class="pattern">Validation pattern: <span>[[item.pattern]]</span></div>
                <div hidden$="[[!hasValue(item.example)]]" class="example">Example value: <span>[[item.example]]</span></div>
                <div hidden$="[[!hasValue(item.min)]]" class="example">Minimum value: <span>[[item.min]]</span></div>
                <div hidden$="[[!hasValue(item.max)]]" class="example">Maximum value: <span>[[item.max]]</span></div>
              </td>
            </tr>
          </template>
        </template>
      </tbody>
    </table>
  </template>
  <script>
  Polymer({
    is: 'docs-parameters-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * The RAML's URI parameters object.
       * See overview for object details.
       */
      uriParameters: Object,
      /**
       * The RAML's query parameters object.
       * See overview for object details.
       */
      queryParameters: Object,
      // True when `uriParameters` are present
      hasUriParameteres: {
        type: Boolean,
        computed: '_computeHasUriParameteres(uriParameters.*)',
        value: false,
        notify: true
      },
      // True when `queryParameters` are present
      hasQueryParameteres: {
        type: Boolean,
        computed: '_computeHasQueryParameteres(queryParameters.*)',
        value: false,
        notify: true
      },
      // True if it has either `uriParameteres` or `queryParameteres`
      hasParameters: {
        type: Boolean,
        computed: '_computeHasParameteres(hasQueryParameteres, hasUriParameteres)',
        value: false,
        notify: true
      },
      // If set automatically hides the element which doesn't have parameteres set
      autoHide: {
        type: Boolean,
        value: false
      },
      // Computed uriParameters array
      displayUriParameters: {
        type: Array,
        computed: '_computeProperty(uriParameters.*)'
      },
      // Computed uriParameters array
      displayQueryParameters: {
        type: Array,
        computed: '_computeProperty(queryParameters.*)'
      },
      // If true then the narrow layout is applied.
      narrow: {
        type: Boolean,
        reflectToAttribute: true
      }
    },

    observers: [
      '_autoHide(autoHide, hasQueryParameteres, hasUriParameteres)'
    ],

    _computeHasUriParameteres: function() {
      return !!(this.uriParameters && Object.keys(this.uriParameters).length);
    },

    _computeHasQueryParameteres: function() {
      return !!(this.queryParameters && Object.keys(this.queryParameters).length);
    },

    _autoHide: function(autoHide, hasQueryParameteres, hasUriParameteres) {
      if (!autoHide) {
        return;
      }
      if (hasQueryParameteres || hasUriParameteres) {
        this.removeAttribute('hidden');
      } else {
        this.setAttribute('hidden', true);
      }
    },

    _computeProperty: function(record) {
      if (record.path in this) {
        return this.readProperties(this[record.path]);
      }
      return [];
    },

    _computeEnumValue: function(enumValue) {
      if (!enumValue || !enumValue.length) {
        return '';
      }
      enumValue = enumValue.map(function(item) {
        if (typeof item === 'string') {
          return item;
        }
        return item.displayName || item.name || item.key;
      });
      return enumValue.join(', ');
    },

    // Computes if any of arguments is trully
    _computeHasParameteres: function(hasQueryParameteres, hasUriParameteres) {
      return !!(hasQueryParameteres || hasUriParameteres);
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<docs-headers-table>` A headers list documentation table for the RAML documentation view.

### Example
```
<docs-headers-table
  headers="[[headers]]"></docs-headers-table>
```

### Object properties
An object in headers object can contain any property that header can contain
according to the RAML spec.

Currently following properties are supported:

- name (required) - name of the property, in case of UIR parameter it should be the parameter itself
- type - the type of the parameter, any RAML allowed value will be accepted
- description - description of the parameter
- required - mark that the property is a required property
- pattern - validation pattern to be applied to the parameter value
- example - example value of the parameter
- min - minimum value of the parametre when the type is numeric
- max - maximum value of the parametre when the type is numeric

### Styling
`<docs-headers-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table's each row | `#00A1DF`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`

@group RAML Elements
@element docs-parameters-table
@demo demo/docs-headers-table.html
-->
<dom-module id="docs-headers-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <table class="params-table">
      <thead class="params-table-header">
        <tr>
          <th>Parameter</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-if" if="[[hasHeaders]]">
          <template is="dom-repeat" items="[[headers]]">
            <tr>
              <td class="param-name">[[item.name]]<span hidden$="[[!item.required]]">*</span></td>
              <td class="param-desc">
                <b>[[item.type]]</b>
                <div hidden$="[[!hasValue(item.description)]]">
                  <marked-element markdown="[[item.description]]">
                    <div class="markdown-html markdown-body"></div>
                  </marked-element>
                </div>
                <div hidden$="[[!hasValue(item.pattern)]]" class="pattern">Validation pattern: <span>[[item.pattern]]</span></div>
                <div hidden$="[[!hasValue(item.example)]]" class="example">Example value: <span>[[item.example]]</span></div>
                <div hidden$="[[!hasValue(item.min)]]" class="example">Minimum value: <span>[[item.min]]</span></div>
                <div hidden$="[[!hasValue(item.max)]]" class="example">Maximum value: <span>[[item.max]]</span></div>
                <div hidden$="[[!hasValue(item.enum)]]" class="example">Possible values: <span>[[_computeEnumValue(item.enum)]]</span></div>
              </td>
            </tr>
          </template>
        </template>
      </tbody>
    </table>
  </template>
  <script>
  Polymer({
    is: 'docs-headers-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * The RAML's headers description object.
       * See overview for object details.
       */
      headers: Array,
      // True when `headers` are present
      hasHeaders: {
        type: Boolean,
        computed: '_computeHasHeaders(headers.*)',
        value: false,
        notify: true
      }
    },

    observers: [
      '_autoHide(autoHide, hasHeaders)'
    ],

    _computeHasHeaders: function() {
      return !!(this.headers && Object.keys(this.headers).length);
    },

    _autoHide: function(autoHide, hasHeaders) {
      if (!autoHide) {
        return;
      }
      if (hasHeaders) {
        this.removeAttribute('hidden');
      } else {
        this.setAttribute('hidden', true);
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script data-manual="">
/* **********************************************
     Begin prism-core.js
********************************************** */

var _self = (typeof window !== 'undefined')
	? window   // if in browser
	: (
		(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)
		? self // if in worker
		: {}   // if in node js
	);

/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */

var Prism = (function(){

// Private helper vars
var lang = /\blang(?:uage)?-(\w+)\b/i;
var uniqueId = 0;

var _ = _self.Prism = {
	util: {
		encode: function (tokens) {
			if (tokens instanceof Token) {
				return new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);
			} else if (_.util.type(tokens) === 'Array') {
				return tokens.map(_.util.encode);
			} else {
				return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\u00a0/g, ' ');
			}
		},

		type: function (o) {
			return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1];
		},

		objId: function (obj) {
			if (!obj['__id']) {
				Object.defineProperty(obj, '__id', { value: ++uniqueId });
			}
			return obj['__id'];
		},

		// Deep clone a language definition (e.g. to extend it)
		clone: function (o) {
			var type = _.util.type(o);

			switch (type) {
				case 'Object':
					var clone = {};

					for (var key in o) {
						if (o.hasOwnProperty(key)) {
							clone[key] = _.util.clone(o[key]);
						}
					}

					return clone;

				case 'Array':
					// Check for existence for IE8
					return o.map && o.map(function(v) { return _.util.clone(v); });
			}

			return o;
		}
	},

	languages: {
		extend: function (id, redef) {
			var lang = _.util.clone(_.languages[id]);

			for (var key in redef) {
				lang[key] = redef[key];
			}

			return lang;
		},

		/**
		 * Insert a token before another token in a language literal
		 * As this needs to recreate the object (we cannot actually insert before keys in object literals),
		 * we cannot just provide an object, we need anobject and a key.
		 * @param inside The key (or language id) of the parent
		 * @param before The key to insert before. If not provided, the function appends instead.
		 * @param insert Object with the key/value pairs to insert
		 * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.
		 */
		insertBefore: function (inside, before, insert, root) {
			root = root || _.languages;
			var grammar = root[inside];

			if (arguments.length == 2) {
				insert = arguments[1];

				for (var newToken in insert) {
					if (insert.hasOwnProperty(newToken)) {
						grammar[newToken] = insert[newToken];
					}
				}

				return grammar;
			}

			var ret = {};

			for (var token in grammar) {

				if (grammar.hasOwnProperty(token)) {

					if (token == before) {

						for (var newToken in insert) {

							if (insert.hasOwnProperty(newToken)) {
								ret[newToken] = insert[newToken];
							}
						}
					}

					ret[token] = grammar[token];
				}
			}

			// Update references in other language definitions
			_.languages.DFS(_.languages, function(key, value) {
				if (value === root[inside] && key != inside) {
					this[key] = ret;
				}
			});

			return root[inside] = ret;
		},

		// Traverse a language definition with Depth First Search
		DFS: function(o, callback, type, visited) {
			visited = visited || {};
			for (var i in o) {
				if (o.hasOwnProperty(i)) {
					callback.call(o, i, o[i], type || i);

					if (_.util.type(o[i]) === 'Object' && !visited[_.util.objId(o[i])]) {
						visited[_.util.objId(o[i])] = true;
						_.languages.DFS(o[i], callback, null, visited);
					}
					else if (_.util.type(o[i]) === 'Array' && !visited[_.util.objId(o[i])]) {
						visited[_.util.objId(o[i])] = true;
						_.languages.DFS(o[i], callback, i, visited);
					}
				}
			}
		}
	},
	plugins: {},

	highlightAll: function(async, callback) {
		var env = {
			callback: callback,
			selector: 'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'
		};

		_.hooks.run("before-highlightall", env);

		var elements = env.elements || document.querySelectorAll(env.selector);

		for (var i=0, element; element = elements[i++];) {
			_.highlightElement(element, async === true, env.callback);
		}
	},

	highlightElement: function(element, async, callback) {
		// Find language
		var language, grammar, parent = element;

		while (parent && !lang.test(parent.className)) {
			parent = parent.parentNode;
		}

		if (parent) {
			language = (parent.className.match(lang) || [,''])[1].toLowerCase();
			grammar = _.languages[language];
		}

		// Set language on the element, if not present
		element.className = element.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;

		// Set language on the parent, for styling
		parent = element.parentNode;

		if (/pre/i.test(parent.nodeName)) {
			parent.className = parent.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;
		}

		var code = element.textContent;

		var env = {
			element: element,
			language: language,
			grammar: grammar,
			code: code
		};

		_.hooks.run('before-sanity-check', env);

		if (!env.code || !env.grammar) {
			if (env.code) {
				env.element.textContent = env.code;
			}
			_.hooks.run('complete', env);
			return;
		}

		_.hooks.run('before-highlight', env);

		if (async && _self.Worker) {
			var worker = new Worker(_.filename);

			worker.onmessage = function(evt) {
				env.highlightedCode = evt.data;

				_.hooks.run('before-insert', env);

				env.element.innerHTML = env.highlightedCode;

				callback && callback.call(env.element);
				_.hooks.run('after-highlight', env);
				_.hooks.run('complete', env);
			};

			worker.postMessage(JSON.stringify({
				language: env.language,
				code: env.code,
				immediateClose: true
			}));
		}
		else {
			env.highlightedCode = _.highlight(env.code, env.grammar, env.language);

			_.hooks.run('before-insert', env);

			env.element.innerHTML = env.highlightedCode;

			callback && callback.call(element);

			_.hooks.run('after-highlight', env);
			_.hooks.run('complete', env);
		}
	},

	highlight: function (text, grammar, language) {
		var tokens = _.tokenize(text, grammar);
		return Token.stringify(_.util.encode(tokens), language);
	},

	tokenize: function(text, grammar, language) {
		var Token = _.Token;

		var strarr = [text];

		var rest = grammar.rest;

		if (rest) {
			for (var token in rest) {
				grammar[token] = rest[token];
			}

			delete grammar.rest;
		}

		tokenloop: for (var token in grammar) {
			if(!grammar.hasOwnProperty(token) || !grammar[token]) {
				continue;
			}

			var patterns = grammar[token];
			patterns = (_.util.type(patterns) === "Array") ? patterns : [patterns];

			for (var j = 0; j < patterns.length; ++j) {
				var pattern = patterns[j],
					inside = pattern.inside,
					lookbehind = !!pattern.lookbehind,
					greedy = !!pattern.greedy,
					lookbehindLength = 0,
					alias = pattern.alias;

				if (greedy && !pattern.pattern.global) {
					// Without the global flag, lastIndex won't work
					var flags = pattern.pattern.toString().match(/[imuy]*$/)[0];
					pattern.pattern = RegExp(pattern.pattern.source, flags + "g");
				}

				pattern = pattern.pattern || pattern;

				// Don’t cache length as it changes during the loop
				for (var i=0, pos = 0; i<strarr.length; pos += strarr[i].length, ++i) {

					var str = strarr[i];

					if (strarr.length > text.length) {
						// Something went terribly wrong, ABORT, ABORT!
						break tokenloop;
					}

					if (str instanceof Token) {
						continue;
					}

					pattern.lastIndex = 0;

					var match = pattern.exec(str),
					    delNum = 1;

					// Greedy patterns can override/remove up to two previously matched tokens
					if (!match && greedy && i != strarr.length - 1) {
						pattern.lastIndex = pos;
						match = pattern.exec(text);
						if (!match) {
							break;
						}

						var from = match.index + (lookbehind ? match[1].length : 0),
						    to = match.index + match[0].length,
						    k = i,
						    p = pos;

						for (var len = strarr.length; k < len && p < to; ++k) {
							p += strarr[k].length;
							// Move the index i to the element in strarr that is closest to from
							if (from >= p) {
								++i;
								pos = p;
							}
						}

						/*
						 * If strarr[i] is a Token, then the match starts inside another Token, which is invalid
						 * If strarr[k - 1] is greedy we are in conflict with another greedy pattern
						 */
						if (strarr[i] instanceof Token || strarr[k - 1].greedy) {
							continue;
						}

						// Number of tokens to delete and replace with the new match
						delNum = k - i;
						str = text.slice(pos, p);
						match.index -= pos;
					}

					if (!match) {
						continue;
					}

					if(lookbehind) {
						lookbehindLength = match[1].length;
					}

					var from = match.index + lookbehindLength,
					    match = match[0].slice(lookbehindLength),
					    to = from + match.length,
					    before = str.slice(0, from),
					    after = str.slice(to);

					var args = [i, delNum];

					if (before) {
						args.push(before);
					}

					var wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias, match, greedy);

					args.push(wrapped);

					if (after) {
						args.push(after);
					}

					Array.prototype.splice.apply(strarr, args);
				}
			}
		}

		return strarr;
	},

	hooks: {
		all: {},

		add: function (name, callback) {
			var hooks = _.hooks.all;

			hooks[name] = hooks[name] || [];

			hooks[name].push(callback);
		},

		run: function (name, env) {
			var callbacks = _.hooks.all[name];

			if (!callbacks || !callbacks.length) {
				return;
			}

			for (var i=0, callback; callback = callbacks[i++];) {
				callback(env);
			}
		}
	}
};

var Token = _.Token = function(type, content, alias, matchedStr, greedy) {
	this.type = type;
	this.content = content;
	this.alias = alias;
	// Copy of the full string this token was created from
	this.length = (matchedStr || "").length|0;
	this.greedy = !!greedy;
};

Token.stringify = function(o, language, parent) {
	if (typeof o == 'string') {
		return o;
	}

	if (_.util.type(o) === 'Array') {
		return o.map(function(element) {
			return Token.stringify(element, language, o);
		}).join('');
	}

	var env = {
		type: o.type,
		content: Token.stringify(o.content, language, parent),
		tag: 'span',
		classes: ['token', o.type],
		attributes: {},
		language: language,
		parent: parent
	};

	if (env.type == 'comment') {
		env.attributes['spellcheck'] = 'true';
	}

	if (o.alias) {
		var aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];
		Array.prototype.push.apply(env.classes, aliases);
	}

	_.hooks.run('wrap', env);

	var attributes = Object.keys(env.attributes).map(function(name) {
		return name + '="' + (env.attributes[name] || '').replace(/"/g, '&quot;') + '"';
	}).join(' ');

	return '<' + env.tag + ' class="' + env.classes.join(' ') + '"' + (attributes ? ' ' + attributes : '') + '>' + env.content + '</' + env.tag + '>';

};

if (!_self.document) {
	if (!_self.addEventListener) {
		// in Node.js
		return _self.Prism;
	}
 	// In worker
	_self.addEventListener('message', function(evt) {
		var message = JSON.parse(evt.data),
		    lang = message.language,
		    code = message.code,
		    immediateClose = message.immediateClose;

		_self.postMessage(_.highlight(code, _.languages[lang], lang));
		if (immediateClose) {
			_self.close();
		}
	}, false);

	return _self.Prism;
}

//Get current script and highlight
var script = document.currentScript || [].slice.call(document.getElementsByTagName("script")).pop();

if (script) {
	_.filename = script.src;

	if (document.addEventListener && !script.hasAttribute('data-manual')) {
		if(document.readyState !== "loading") {
			if (window.requestAnimationFrame) {
				window.requestAnimationFrame(_.highlightAll);
			} else {
				window.setTimeout(_.highlightAll, 16);
			}
		}
		else {
			document.addEventListener('DOMContentLoaded', _.highlightAll);
		}
	}
}

return _self.Prism;

})();

if (typeof module !== 'undefined' && module.exports) {
	module.exports = Prism;
}

// hack for components to work correctly in node.js
if (typeof global !== 'undefined') {
	global.Prism = Prism;
}


/* **********************************************
     Begin prism-markup.js
********************************************** */

Prism.languages.markup = {
	'comment': /\x3c!--[\w\W]*?-- >/,
	'prolog': /<\?[\w\W]+?\?>/,
	'doctype': /<!DOCTYPE[\w\W]+?>/i,
	'cdata': /<!\[CDATA\[[\w\W]*?]]>/i,
	'tag': {
		pattern: /<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,
		inside: {
			'tag': {
				pattern: /^<\/?[^\s>\/]+/i,
				inside: {
					'punctuation': /^<\/?/,
					'namespace': /^[^\s>\/:]+:/
				}
			},
			'attr-value': {
				pattern: /=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,
				inside: {
					'punctuation': /[=>"']/
				}
			},
			'punctuation': /\/?>/,
			'attr-name': {
				pattern: /[^\s>\/]+/,
				inside: {
					'namespace': /^[^\s>\/:]+:/
				}
			}

		}
	},
	'entity': /&#?[\da-z]{1,8};/i
};

// Plugin to make entity title show the real entity, idea by Roman Komarov
Prism.hooks.add('wrap', function(env) {

	if (env.type === 'entity') {
		env.attributes['title'] = env.content.replace(/&amp;/, '&');
	}
});

Prism.languages.xml = Prism.languages.markup;
Prism.languages.html = Prism.languages.markup;
Prism.languages.mathml = Prism.languages.markup;
Prism.languages.svg = Prism.languages.markup;


/* **********************************************
     Begin prism-css.js
********************************************** */

Prism.languages.css = {
	'comment': /\/\*[\w\W]*?\*\//,
	'atrule': {
		pattern: /@[\w-]+?.*?(;|(?=\s*\{))/i,
		inside: {
			'rule': /@[\w-]+/
			// See rest below
		}
	},
	'url': /url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,
	'selector': /[^\{\}\s][^\{\};]*?(?=\s*\{)/,
	'string': {
		pattern: /("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,
		greedy: true
	},
	'property': /(\b|\B)[\w-]+(?=\s*:)/i,
	'important': /\B!important\b/i,
	'function': /[-a-z0-9]+(?=\()/i,
	'punctuation': /[(){};:]/
};

Prism.languages.css['atrule'].inside.rest = Prism.util.clone(Prism.languages.css);

if (Prism.languages.markup) {
	Prism.languages.insertBefore('markup', 'tag', {
		'style': {
			pattern: /(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,
			lookbehind: true,
			inside: Prism.languages.css,
			alias: 'language-css'
		}
	});
	
	Prism.languages.insertBefore('inside', 'attr-value', {
		'style-attr': {
			pattern: /\s*style=("|').*?\1/i,
			inside: {
				'attr-name': {
					pattern: /^\s*style/i,
					inside: Prism.languages.markup.tag.inside
				},
				'punctuation': /^\s*=\s*['"]|['"]\s*$/,
				'attr-value': {
					pattern: /.+/i,
					inside: Prism.languages.css
				}
			},
			alias: 'language-css'
		}
	}, Prism.languages.markup.tag);
}

/* **********************************************
     Begin prism-clike.js
********************************************** */

Prism.languages.clike = {
	'comment': [
		{
			pattern: /(^|[^\\])\/\*[\w\W]*?\*\//,
			lookbehind: true
		},
		{
			pattern: /(^|[^\\:])\/\/.*/,
			lookbehind: true
		}
	],
	'string': {
		pattern: /(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
		greedy: true
	},
	'class-name': {
		pattern: /((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,
		lookbehind: true,
		inside: {
			punctuation: /(\.|\\)/
		}
	},
	'keyword': /\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,
	'boolean': /\b(true|false)\b/,
	'function': /[a-z0-9_]+(?=\()/i,
	'number': /\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,
	'operator': /--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,
	'punctuation': /[{}[\];(),.:]/
};


/* **********************************************
     Begin prism-javascript.js
********************************************** */

Prism.languages.javascript = Prism.languages.extend('clike', {
	'keyword': /\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,
	'number': /\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,
	// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)
	'function': /[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,
	'operator': /--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/
});

Prism.languages.insertBefore('javascript', 'keyword', {
	'regex': {
		pattern: /(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,
		lookbehind: true,
		greedy: true
	}
});

Prism.languages.insertBefore('javascript', 'string', {
	'template-string': {
		pattern: /`(?:\\\\|\\?[^\\])*?`/,
		greedy: true,
		inside: {
			'interpolation': {
				pattern: /\$\{[^}]+\}/,
				inside: {
					'interpolation-punctuation': {
						pattern: /^\$\{|\}$/,
						alias: 'punctuation'
					},
					rest: Prism.languages.javascript
				}
			},
			'string': /[\s\S]+/
		}
	}
});

if (Prism.languages.markup) {
	Prism.languages.insertBefore('markup', 'tag', {
		'script': {
			pattern: /(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,
			lookbehind: true,
			inside: Prism.languages.javascript,
			alias: 'language-javascript'
		}
	});
}

Prism.languages.js = Prism.languages.javascript;

/* **********************************************
     Begin prism-file-highlight.js
********************************************** */

(function () {
	if (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {
		return;
	}

	self.Prism.fileHighlight = function() {

		var Extensions = {
			'js': 'javascript',
			'py': 'python',
			'rb': 'ruby',
			'ps1': 'powershell',
			'psm1': 'powershell',
			'sh': 'bash',
			'bat': 'batch',
			'h': 'c',
			'tex': 'latex'
		};

		if(Array.prototype.forEach) { // Check to prevent error in IE8
			Array.prototype.slice.call(document.querySelectorAll('pre[data-src]')).forEach(function (pre) {
				var src = pre.getAttribute('data-src');

				var language, parent = pre;
				var lang = /\blang(?:uage)?-(?!\*)(\w+)\b/i;
				while (parent && !lang.test(parent.className)) {
					parent = parent.parentNode;
				}

				if (parent) {
					language = (pre.className.match(lang) || [, ''])[1];
				}

				if (!language) {
					var extension = (src.match(/\.(\w+)$/) || [, ''])[1];
					language = Extensions[extension] || extension;
				}

				var code = document.createElement('code');
				code.className = 'language-' + language;

				pre.textContent = '';

				code.textContent = 'Loading…';

				pre.appendChild(code);

				var xhr = new XMLHttpRequest();

				xhr.open('GET', src, true);

				xhr.onreadystatechange = function () {
					if (xhr.readyState == 4) {

						if (xhr.status < 400 && xhr.responseText) {
							code.textContent = xhr.responseText;

							Prism.highlightElement(code);
						}
						else if (xhr.status >= 400) {
							code.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
						}
						else {
							code.textContent = '✖ Error: File does not exist or is empty';
						}
					}
				};

				xhr.send(null);
			});
		}

	};

	document.addEventListener('DOMContentLoaded', self.Prism.fileHighlight);

})();
</script>
<style>/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
<!--
Syntax highlighting via [Prism](http://prismjs.com/).

Place a `<prism-highlighter>` in your document, preferably as a direct child of
`<body>`. It will listen for `syntax-highlight` events on its parent element,
and annotate the code being provided via that event.

The `syntax-highlight` event's detail is expected to have a `code` property
containing the source to highlight. The event detail can optionally contain a
`lang` property, containing a string like `"html"`, `"js"`, etc.

This flow is supported by [`<marked-element>`](https://github.com/PolymerElements/marked-element).

@element prism-highlighter
@demo demo/index.html
-->
<script>
(function() {

  'use strict';

  var HIGHLIGHT_EVENT = 'syntax-highlight';

  Polymer({

    is: 'prism-highlighter',
    
    properties: {
      /**
       * Adds languages outside of the core Prism languages.
       *
       * Prism includes a few languages in the core library:
       *   - JavaScript
       *   - Markup
       *   - CSS
       *   - C-Like
       * Use this property to extend the core set with other Prism
       * components and custom languages.
       *
       * Example:
       *   ```
       *   <!-- with languages = {'custom': myCustomPrismLang}; -- >
       *   <!-- or languages = Prism.languages; -- >
       *   <prism-highlighter languages="[[languages]]"></prism-highlighter>
       *   ```
       *
       * @attribute languages
       * @type {!Object}
       */
      languages: {
        type: Object,
        value: function() {
          return {};
        }
      }
    },

    ready: function() {
      this._handler = this._highlight.bind(this);
    },

    attached: function() {
      (this.parentElement || this.parentNode.host).addEventListener(HIGHLIGHT_EVENT, this._handler);
    },

    detached: function() {
      (this.parentElement || this.parentNode.host).removeEventListener(HIGHLIGHT_EVENT, this._handler);
    },

    /**
     * Handle the highlighting event, if we can.
     *
     * @param {!CustomEvent} event
     */
    _highlight: function(event) {
      if (!event.detail || !event.detail.code) {
        Polymer.Base._warn('Malformed', HIGHLIGHT_EVENT, 'event:', event.detail);
        return;
      }

      event.stopPropagation();

      var detail = event.detail;
      detail.code = Prism.highlight(detail.code, this._detectLang(detail.code, detail.lang));
    },

    /**
     * Picks a Prism formatter based on the `lang` hint and `code`.
     *
     * @param {string} code The source being highlighted.
     * @param {string=} lang A language hint (e.g. ````LANG`).
     * @return {!prism.Lang}
     */
    _detectLang: function(code, lang) {
      if (!lang) {
        // Stupid simple detection if we have no lang, courtesy of:
        // https://github.com/robdodson/mark-down/blob/ac2eaa/mark-down.html#L93-101
        return code.match(/^\s*</) ? Prism.languages.markup : Prism.languages.javascript;
      }

      if (this.languages[lang]) {
        return this.languages[lang];
      } else if (Prism.languages[lang]) {
        return Prism.languages[lang];
      }
      switch (lang.substr(0, 2)) {
        case 'js':
        case 'es':
          return Prism.languages.javascript;
        case 'c':
          return Prism.languages.clike;
        default:
          // The assumption is that you're mostly documenting HTML when in HTML.
          return Prism.languages.markup;
      }
    },

  });

})();
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * `Polymer.IronMenuBehavior` implements accessible menu behavior.
   *
   * @demo demo/index.html
   * @polymerBehavior Polymer.IronMenuBehavior
   */
  Polymer.IronMenuBehaviorImpl = {

    properties: {

      /**
       * Returns the currently focused item.
       * @type {?Object}
       */
      focusedItem: {
        observer: '_focusedItemChanged',
        readOnly: true,
        type: Object
      },

      /**
       * The attribute to use on menu items to look up the item title. Typing the first
       * letter of an item when the menu is open focuses that item. If unset, `textContent`
       * will be used.
       */
      attrForItemTitle: {
        type: String
      },

      disabled: {
        type: Boolean,
        value: false,
        observer: '_disabledChanged',
      },
    },

    _SEARCH_RESET_TIMEOUT_MS: 1000,

    _previousTabIndex: 0,

    hostAttributes: {
      'role': 'menu',
    },

    observers: [
      '_updateMultiselectable(multi)'
    ],

    listeners: {
      'focus': '_onFocus',
      'keydown': '_onKeydown',
      'iron-items-changed': '_onIronItemsChanged'
    },

    keyBindings: {
      'up': '_onUpKey',
      'down': '_onDownKey',
      'esc': '_onEscKey',
      'shift+tab:keydown': '_onShiftTabDown'
    },

    attached: function() {
      this._resetTabindices();
    },

    /**
     * Selects the given value. If the `multi` property is true, then the selected state of the
     * `value` will be toggled; otherwise the `value` will be selected.
     *
     * @param {string|number} value the value to select.
     */
    select: function(value) {
      // Cancel automatically focusing a default item if the menu received focus
      // through a user action selecting a particular item.
      if (this._defaultFocusAsync) {
        this.cancelAsync(this._defaultFocusAsync);
        this._defaultFocusAsync = null;
      }
      var item = this._valueToItem(value);
      if (item && item.hasAttribute('disabled')) return;
      this._setFocusedItem(item);
      Polymer.IronMultiSelectableBehaviorImpl.select.apply(this, arguments);
    },

    /**
     * Resets all tabindex attributes to the appropriate value based on the
     * current selection state. The appropriate value is `0` (focusable) for
     * the default selected item, and `-1` (not keyboard focusable) for all
     * other items.
     */
    _resetTabindices: function() {
      var selectedItem = this.multi ? (this.selectedItems && this.selectedItems[0]) : this.selectedItem;

      this.items.forEach(function(item) {
        item.setAttribute('tabindex', item === selectedItem ? '0' : '-1');
      }, this);
    },

    /**
     * Sets appropriate ARIA based on whether or not the menu is meant to be
     * multi-selectable.
     *
     * @param {boolean} multi True if the menu should be multi-selectable.
     */
    _updateMultiselectable: function(multi) {
      if (multi) {
        this.setAttribute('aria-multiselectable', 'true');
      } else {
        this.removeAttribute('aria-multiselectable');
      }
    },

    /**
     * Given a KeyboardEvent, this method will focus the appropriate item in the
     * menu (if there is a relevant item, and it is possible to focus it).
     *
     * @param {KeyboardEvent} event A KeyboardEvent.
     */
    _focusWithKeyboardEvent: function(event) {
      this.cancelDebouncer('_clearSearchText');

      var searchText = this._searchText || '';
      var key = event.key && event.key.length == 1 ? event.key :
          String.fromCharCode(event.keyCode);
      searchText += key.toLocaleLowerCase();

      var searchLength = searchText.length;

      for (var i = 0, item; item = this.items[i]; i++) {
        if (item.hasAttribute('disabled')) {
          continue;
        }

        var attr = this.attrForItemTitle || 'textContent';
        var title = (item[attr] || item.getAttribute(attr) || '').trim();

        if (title.length < searchLength) {
          continue;
        }

        if (title.slice(0, searchLength).toLocaleLowerCase() == searchText) {
          this._setFocusedItem(item);
          break;
        }
      }

      this._searchText = searchText;
      this.debounce('_clearSearchText', this._clearSearchText,
                    this._SEARCH_RESET_TIMEOUT_MS);
    },

    _clearSearchText: function() {
      this._searchText = '';
    },

    /**
     * Focuses the previous item (relative to the currently focused item) in the
     * menu, disabled items will be skipped.
     * Loop until length + 1 to handle case of single item in menu.
     */
    _focusPrevious: function() {
      var length = this.items.length;
      var curFocusIndex = Number(this.indexOf(this.focusedItem));

      for (var i = 1; i < length + 1; i++) {
        var item = this.items[(curFocusIndex - i + length) % length];
        if (!item.hasAttribute('disabled')) {
          var owner = Polymer.dom(item).getOwnerRoot() || document;
          this._setFocusedItem(item);

          // Focus might not have worked, if the element was hidden or not
          // focusable. In that case, try again.
          if (Polymer.dom(owner).activeElement == item) {
            return;
          }
        }
      }
    },

    /**
     * Focuses the next item (relative to the currently focused item) in the
     * menu, disabled items will be skipped.
     * Loop until length + 1 to handle case of single item in menu.
     */
    _focusNext: function() {
      var length = this.items.length;
      var curFocusIndex = Number(this.indexOf(this.focusedItem));

      for (var i = 1; i < length + 1; i++) {
        var item = this.items[(curFocusIndex + i) % length];
        if (!item.hasAttribute('disabled')) {
          var owner = Polymer.dom(item).getOwnerRoot() || document;
          this._setFocusedItem(item);

          // Focus might not have worked, if the element was hidden or not
          // focusable. In that case, try again.
          if (Polymer.dom(owner).activeElement == item) {
            return;
          }
        }
      }
    },

    /**
     * Mutates items in the menu based on provided selection details, so that
     * all items correctly reflect selection state.
     *
     * @param {Element} item An item in the menu.
     * @param {boolean} isSelected True if the item should be shown in a
     * selected state, otherwise false.
     */
    _applySelection: function(item, isSelected) {
      if (isSelected) {
        item.setAttribute('aria-selected', 'true');
      } else {
        item.removeAttribute('aria-selected');
      }
      Polymer.IronSelectableBehavior._applySelection.apply(this, arguments);
    },

    /**
     * Discretely updates tabindex values among menu items as the focused item
     * changes.
     *
     * @param {Element} focusedItem The element that is currently focused.
     * @param {?Element} old The last element that was considered focused, if
     * applicable.
     */
    _focusedItemChanged: function(focusedItem, old) {
      old && old.setAttribute('tabindex', '-1');
      if (focusedItem && !focusedItem.hasAttribute('disabled') && !this.disabled) {
        focusedItem.setAttribute('tabindex', '0');
        focusedItem.focus();
      }
    },

    /**
     * A handler that responds to mutation changes related to the list of items
     * in the menu.
     *
     * @param {CustomEvent} event An event containing mutation records as its
     * detail.
     */
    _onIronItemsChanged: function(event) {
      if (event.detail.addedNodes.length) {
        this._resetTabindices();
      }
    },

    /**
     * Handler that is called when a shift+tab keypress is detected by the menu.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onShiftTabDown: function(event) {
      var oldTabIndex = this.getAttribute('tabindex');

      Polymer.IronMenuBehaviorImpl._shiftTabPressed = true;

      this._setFocusedItem(null);

      this.setAttribute('tabindex', '-1');

      this.async(function() {
        this.setAttribute('tabindex', oldTabIndex);
        Polymer.IronMenuBehaviorImpl._shiftTabPressed = false;
        // NOTE(cdata): polymer/polymer#1305
      }, 1);
    },

    /**
     * Handler that is called when the menu receives focus.
     *
     * @param {FocusEvent} event A focus event.
     */
    _onFocus: function(event) {
      if (Polymer.IronMenuBehaviorImpl._shiftTabPressed) {
        // do not focus the menu itself
        return;
      }

      // Do not focus the selected tab if the deepest target is part of the
      // menu element's local DOM and is focusable.
      var rootTarget = /** @type {?HTMLElement} */(
          Polymer.dom(event).rootTarget);
      if (rootTarget !== this && typeof rootTarget.tabIndex !== "undefined" && !this.isLightDescendant(rootTarget)) {
        return;
      }

      // clear the cached focus item
      this._defaultFocusAsync = this.async(function() {
        // focus the selected item when the menu receives focus, or the first item
        // if no item is selected
        var selectedItem = this.multi ? (this.selectedItems && this.selectedItems[0]) : this.selectedItem;

        this._setFocusedItem(null);

        if (selectedItem) {
          this._setFocusedItem(selectedItem);
        } else if (this.items[0]) {
          // We find the first none-disabled item (if one exists)
          this._focusNext();
        }
      });
    },

    /**
     * Handler that is called when the up key is pressed.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onUpKey: function(event) {
      // up and down arrows moves the focus
      this._focusPrevious();
      event.detail.keyboardEvent.preventDefault();
    },

    /**
     * Handler that is called when the down key is pressed.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onDownKey: function(event) {
      this._focusNext();
      event.detail.keyboardEvent.preventDefault();
    },

    /**
     * Handler that is called when the esc key is pressed.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onEscKey: function(event) {
      // esc blurs the control
      this.focusedItem.blur();
    },

    /**
     * Handler that is called when a keydown event is detected.
     *
     * @param {KeyboardEvent} event A keyboard event.
     */
    _onKeydown: function(event) {
      if (!this.keyboardEventMatchesKeys(event, 'up down esc')) {
        // all other keys focus the menu item starting with that character
        this._focusWithKeyboardEvent(event);
      }
      event.stopPropagation();
    },

    // override _activateHandler
    _activateHandler: function(event) {
      Polymer.IronSelectableBehavior._activateHandler.call(this, event);
      event.stopPropagation();
    },

    /**
     * Updates this element's tab index when it's enabled/disabled.
     * @param {boolean} disabled
     */
    _disabledChanged: function(disabled) {
      if (disabled) {
        this._previousTabIndex = this.hasAttribute('tabindex') ? this.tabIndex : 0;
        this.removeAttribute('tabindex');  // No tabindex means not tab-able or select-able.
      } else if (!this.hasAttribute('tabindex')) {
        this.setAttribute('tabindex', this._previousTabIndex);
      }
    }
  };

  Polymer.IronMenuBehaviorImpl._shiftTabPressed = false;

  /** @polymerBehavior Polymer.IronMenuBehavior */
  Polymer.IronMenuBehavior = [
    Polymer.IronMultiSelectableBehavior,
    Polymer.IronA11yKeysBehavior,
    Polymer.IronMenuBehaviorImpl
  ];

</script>
<script>

  /**
   * `Polymer.IronMenubarBehavior` implements accessible menubar behavior.
   *
   * @polymerBehavior Polymer.IronMenubarBehavior
   */
  Polymer.IronMenubarBehaviorImpl = {

    hostAttributes: {
      'role': 'menubar'
    },

    keyBindings: {
      'left': '_onLeftKey',
      'right': '_onRightKey'
    },

    _onUpKey: function(event) {
      this.focusedItem.click();
      event.detail.keyboardEvent.preventDefault();
    },

    _onDownKey: function(event) {
      this.focusedItem.click();
      event.detail.keyboardEvent.preventDefault();
    },

    get _isRTL() {
      return window.getComputedStyle(this)['direction'] === 'rtl';
    },

    _onLeftKey: function(event) {
      if (this._isRTL) {
        this._focusNext();
      } else {
        this._focusPrevious();
      }
      event.detail.keyboardEvent.preventDefault();
    },

    _onRightKey: function(event) {
      if (this._isRTL) {
        this._focusPrevious();
      } else {
        this._focusNext();
      }
      event.detail.keyboardEvent.preventDefault();
    },

    _onKeydown: function(event) {
      if (this.keyboardEventMatchesKeys(event, 'up down left right esc')) {
        return;
      }

      // all other keys focus the menu item starting with that character
      this._focusWithKeyboardEvent(event);
    }

  };

  /** @polymerBehavior Polymer.IronMenubarBehavior */
  Polymer.IronMenubarBehavior = [
    Polymer.IronMenuBehavior,
    Polymer.IronMenubarBehaviorImpl
  ];

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><iron-iconset-svg name="paper-tabs" size="24">
<svg><defs>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g>
</defs></svg>
</iron-iconset-svg>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`paper-tab` is styled to look like a tab.  It should be used in conjunction with
`paper-tabs`.

Example:

    <paper-tabs selected="0">
      <paper-tab>TAB 1</paper-tab>
      <paper-tab>TAB 2</paper-tab>
      <paper-tab>TAB 3</paper-tab>
    </paper-tabs>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-tab-ink` | Ink color | `--paper-yellow-a100`
`--paper-tab` | Mixin applied to the tab | `{}`
`--paper-tab-content` | Mixin applied to the tab content | `{}`
`--paper-tab-content-unselected` | Mixin applied to the tab content when the tab is not selected | `{}`

This element applies the mixin `--paper-font-common-base` but does not import `paper-styles/typography.html`.
In order to apply the `Roboto` font to this element, make sure you've imported `paper-styles/typography.html`.

-->

<dom-module id="paper-tab" assetpath="bower_components/paper-tabs/">
  <template>
    <style>
      :host {
        @apply(--layout-inline);
        @apply(--layout-center);
        @apply(--layout-center-justified);
        @apply(--layout-flex-auto);

        position: relative;
        padding: 0 12px;
        overflow: hidden;
        cursor: pointer;
        vertical-align: middle;

        @apply(--paper-font-common-base);
        @apply(--paper-tab);
      }

      :host(:focus) {
        outline: none;
      }

      :host([link]) {
        padding: 0;
      }

      .tab-content {
        height: 100%;
        transform: translateZ(0);
          -webkit-transform: translateZ(0);
        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);
        @apply(--layout-horizontal);
        @apply(--layout-center-center);
        @apply(--layout-flex-auto);
        @apply(--paper-tab-content);
      }

      :host(:not(.iron-selected)) > .tab-content {
        opacity: 0.8;

        @apply(--paper-tab-content-unselected);
      }

      :host(:focus) .tab-content {
        opacity: 1;
        font-weight: 700;
      }

      paper-ripple {
        color: var(--paper-tab-ink, --paper-yellow-a100);
      }

      .tab-content > ::content > a {
        @apply(--layout-flex-auto);

        height: 100%;
      }
    </style>

    <div class="tab-content">
      <content></content>
    </div>
  </template>

  <script>
    Polymer({
      is: 'paper-tab',

      behaviors: [
        Polymer.IronControlState,
        Polymer.IronButtonState,
        Polymer.PaperRippleBehavior
      ],

      properties: {

        /**
         * If true, the tab will forward keyboard clicks (enter/space) to
         * the first anchor element found in its descendants
         */
        link: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        }

      },

      hostAttributes: {
        role: 'tab'
      },

      listeners: {
        down: '_updateNoink',
        tap: '_onTap'
      },

      attached: function() {
        this._updateNoink();
      },

      get _parentNoink () {
        var parent = Polymer.dom(this).parentNode;
        return !!parent && !!parent.noink;
      },

      _updateNoink: function() {
        this.noink = !!this.noink || !!this._parentNoink;
      },

      _onTap: function(event) {
        if (this.link) {
          var anchor = this.queryEffectiveChildren('a');

          if (!anchor) {
            return;
          }

          // Don't get stuck in a loop delegating
          // the listener from the child anchor
          if (event.target === anchor) {
            return;
          }

          anchor.click();
        }
      }

    });
  </script>
</dom-module>
<!--
Material design: [Tabs](https://www.google.com/design/spec/components/tabs.html)

`paper-tabs` makes it easy to explore and switch between different views or functional aspects of
an app, or to browse categorized data sets.

Use `selected` property to get or set the selected tab.

Example:

    <paper-tabs selected="0">
      <paper-tab>TAB 1</paper-tab>
      <paper-tab>TAB 2</paper-tab>
      <paper-tab>TAB 3</paper-tab>
    </paper-tabs>

See <a href="?active=paper-tab">paper-tab</a> for more information about
`paper-tab`.

A common usage for `paper-tabs` is to use it along with `iron-pages` to switch
between different views.

    <paper-tabs selected="{{selected}}">
      <paper-tab>Tab 1</paper-tab>
      <paper-tab>Tab 2</paper-tab>
      <paper-tab>Tab 3</paper-tab>
    </paper-tabs>

    <iron-pages selected="{{selected}}">
      <div>Page 1</div>
      <div>Page 2</div>
      <div>Page 3</div>
    </iron-pages>


To use links in tabs, add `link` attribute to `paper-tab` and put an `<a>`
element in `paper-tab` with a `tabindex` of -1.

Example:

<pre><code>
&lt;style is="custom-style">
  .link {
    &#64;apply(--layout-horizontal);
    &#64;apply(--layout-center-center);
  }
&lt;/style>

&lt;paper-tabs selected="0">
  &lt;paper-tab link>
    &lt;a href="#link1" class="link" tabindex="-1">TAB ONE&lt;/a>
  &lt;/paper-tab>
  &lt;paper-tab link>
    &lt;a href="#link2" class="link" tabindex="-1">TAB TWO&lt;/a>
  &lt;/paper-tab>
  &lt;paper-tab link>
    &lt;a href="#link3" class="link" tabindex="-1">TAB THREE&lt;/a>
  &lt;/paper-tab>
&lt;/paper-tabs>
</code></pre>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-tabs-selection-bar-color` | Color for the selection bar | `--paper-yellow-a100`
`--paper-tabs-selection-bar` | Mixin applied to the selection bar | `{}`
`--paper-tabs` | Mixin applied to the tabs | `{}`
`--paper-tabs-content` | Mixin applied to the content container of tabs | `{}`
`--paper-tabs-container` | Mixin applied to the layout container of tabs | `{}`

@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-tabs" assetpath="bower_components/paper-tabs/">
  <template>
    <style>
      :host {
        @apply(--layout);
        @apply(--layout-center);

        height: 48px;
        font-size: 14px;
        font-weight: 500;
        overflow: hidden;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        @apply(--paper-tabs);
      }

      :host-context([dir=rtl]) {
        @apply(--layout-horizontal-reverse);
      }

      #tabsContainer {
        position: relative;
        height: 100%;
        white-space: nowrap;
        overflow: hidden;
        @apply(--layout-flex-auto);
        @apply(--paper-tabs-container);
      }

      #tabsContent {
        height: 100%;
        -moz-flex-basis: auto;
        -ms-flex-basis: auto;
        flex-basis: auto;
        @apply(--paper-tabs-content);
      }

      #tabsContent.scrollable {
        position: absolute;
        white-space: nowrap;
      }

      #tabsContent:not(.scrollable),
      #tabsContent.scrollable.fit-container {
        @apply(--layout-horizontal);
      }

      #tabsContent.scrollable.fit-container {
        min-width: 100%;
      }

      #tabsContent.scrollable.fit-container > ::content > * {
        /* IE - prevent tabs from compressing when they should scroll. */
        -ms-flex: 1 0 auto;
        -webkit-flex: 1 0 auto;
        flex: 1 0 auto;
      }

      .hidden {
        display: none;
      }

      .not-visible {
        opacity: 0;
        cursor: default;
      }

      paper-icon-button {
        width: 48px;
        height: 48px;
        padding: 12px;
        margin: 0 4px;
      }

      #selectionBar {
        position: absolute;
        height: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border-bottom: 2px solid var(--paper-tabs-selection-bar-color, --paper-yellow-a100);
          -webkit-transform: scale(0);
        transform: scale(0);
          -webkit-transform-origin: left center;
        transform-origin: left center;
          transition: -webkit-transform;
        transition: transform;

        @apply(--paper-tabs-selection-bar);
      }

      #selectionBar.align-bottom {
        top: 0;
        bottom: auto;
      }

      #selectionBar.expand {
        transition-duration: 0.15s;
        transition-timing-function: cubic-bezier(0.4, 0.0, 1, 1);
      }

      #selectionBar.contract {
        transition-duration: 0.18s;
        transition-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);
      }

      #tabsContent > ::content > *:not(#selectionBar) {
        height: 100%;
      }
    </style>

    <paper-icon-button icon="paper-tabs:chevron-left" class$="[[_computeScrollButtonClass(_leftHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onLeftScrollButtonDown" tabindex="-1"></paper-icon-button>

    <div id="tabsContainer" on-track="_scroll" on-down="_down">
      <div id="tabsContent" class$="[[_computeTabsContentClass(scrollable, fitContainer)]]">
        <div id="selectionBar" class$="[[_computeSelectionBarClass(noBar, alignBottom)]]" on-transitionend="_onBarTransitionEnd"></div>
        <content select="*"></content>
      </div>
    </div>

    <paper-icon-button icon="paper-tabs:chevron-right" class$="[[_computeScrollButtonClass(_rightHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onRightScrollButtonDown" tabindex="-1"></paper-icon-button>

  </template>

  <script>
    Polymer({
      is: 'paper-tabs',

      behaviors: [
        Polymer.IronResizableBehavior,
        Polymer.IronMenubarBehavior
      ],

      properties: {
        /**
         * If true, ink ripple effect is disabled. When this property is changed,
         * all descendant `<paper-tab>` elements have their `noink` property
         * changed to the new value as well.
         */
        noink: {
          type: Boolean,
          value: false,
          observer: '_noinkChanged'
        },

        /**
         * If true, the bottom bar to indicate the selected tab will not be shown.
         */
        noBar: {
          type: Boolean,
          value: false
        },

        /**
         * If true, the slide effect for the bottom bar is disabled.
         */
        noSlide: {
          type: Boolean,
          value: false
        },

        /**
         * If true, tabs are scrollable and the tab width is based on the label width.
         */
        scrollable: {
          type: Boolean,
          value: false
        },

        /**
         * If true, tabs expand to fit their container. This currently only applies when
         * scrollable is true.
         */
        fitContainer: {
          type: Boolean,
          value: false
        },

        /**
         * If true, dragging on the tabs to scroll is disabled.
         */
        disableDrag: {
          type: Boolean,
          value: false
        },

        /**
         * If true, scroll buttons (left/right arrow) will be hidden for scrollable tabs.
         */
        hideScrollButtons: {
          type: Boolean,
          value: false
        },

        /**
         * If true, the tabs are aligned to bottom (the selection bar appears at the top).
         */
        alignBottom: {
          type: Boolean,
          value: false
        },

        selectable: {
          type: String,
          value: 'paper-tab'
        },

        /**
         * If true, tabs are automatically selected when focused using the
         * keyboard.
         */
        autoselect: {
          type: Boolean,
          value: false
        },

        /**
         * The delay (in milliseconds) between when the user stops interacting
         * with the tabs through the keyboard and when the focused item is
         * automatically selected (if `autoselect` is true).
         */
        autoselectDelay: {
          type: Number,
          value: 0
        },

        _step: {
          type: Number,
          value: 10
        },

        _holdDelay: {
          type: Number,
          value: 1
        },

        _leftHidden: {
          type: Boolean,
          value: false
        },

        _rightHidden: {
          type: Boolean,
          value: false
        },

        _previousTab: {
          type: Object
        }
      },

      hostAttributes: {
        role: 'tablist'
      },

      listeners: {
        'iron-resize': '_onTabSizingChanged',
        'iron-items-changed': '_onTabSizingChanged',
        'iron-select': '_onIronSelect',
        'iron-deselect': '_onIronDeselect'
      },

      keyBindings: {
        'left:keyup right:keyup': '_onArrowKeyup'
      },

      created: function() {
        this._holdJob = null;
        this._pendingActivationItem = undefined;
        this._pendingActivationTimeout = undefined;
        this._bindDelayedActivationHandler = this._delayedActivationHandler.bind(this);
        this.addEventListener('blur', this._onBlurCapture.bind(this), true);
      },

      ready: function() {
        this.setScrollDirection('y', this.$.tabsContainer);
      },

      detached: function() {
        this._cancelPendingActivation();
      },

      _noinkChanged: function(noink) {
        var childTabs = Polymer.dom(this).querySelectorAll('paper-tab');
        childTabs.forEach(noink ? this._setNoinkAttribute : this._removeNoinkAttribute);
      },

      _setNoinkAttribute: function(element) {
        element.setAttribute('noink', '');
      },

      _removeNoinkAttribute: function(element) {
        element.removeAttribute('noink');
      },

      _computeScrollButtonClass: function(hideThisButton, scrollable, hideScrollButtons) {
        if (!scrollable || hideScrollButtons) {
          return 'hidden';
        }

        if (hideThisButton) {
          return 'not-visible';
        }

        return '';
      },

      _computeTabsContentClass: function(scrollable, fitContainer) {
        return scrollable ? 'scrollable' + (fitContainer ? ' fit-container' : '') : ' fit-container';
      },

      _computeSelectionBarClass: function(noBar, alignBottom) {
        if (noBar) {
          return 'hidden';
        } else if (alignBottom) {
          return 'align-bottom';
        }

        return '';
      },

      // TODO(cdata): Add `track` response back in when gesture lands.

      _onTabSizingChanged: function() {
        this.debounce('_onTabSizingChanged', function() {
          this._scroll();
          this._tabChanged(this.selectedItem);
        }, 10);
      },

      _onIronSelect: function(event) {
        this._tabChanged(event.detail.item, this._previousTab);
        this._previousTab = event.detail.item;
        this.cancelDebouncer('tab-changed');
      },

      _onIronDeselect: function(event) {
        this.debounce('tab-changed', function() {
          this._tabChanged(null, this._previousTab);
          this._previousTab = null;
        // See polymer/polymer#1305
        }, 1);
      },

      _activateHandler: function() {
        // Cancel item activations scheduled by keyboard events when any other
        // action causes an item to be activated (e.g. clicks).
        this._cancelPendingActivation();

        Polymer.IronMenuBehaviorImpl._activateHandler.apply(this, arguments);
      },

      /**
       * Activates an item after a delay (in milliseconds).
       */
      _scheduleActivation: function(item, delay) {
        this._pendingActivationItem = item;
        this._pendingActivationTimeout = this.async(
            this._bindDelayedActivationHandler, delay);
      },

      /**
       * Activates the last item given to `_scheduleActivation`.
       */
      _delayedActivationHandler: function() {
        var item = this._pendingActivationItem;
        this._pendingActivationItem = undefined;
        this._pendingActivationTimeout = undefined;
        item.fire(this.activateEvent, null, {
          bubbles: true,
          cancelable: true
        });
      },

      /**
       * Cancels a previously scheduled item activation made with
       * `_scheduleActivation`.
       */
      _cancelPendingActivation: function() {
        if (this._pendingActivationTimeout !== undefined) {
          this.cancelAsync(this._pendingActivationTimeout);
          this._pendingActivationItem = undefined;
          this._pendingActivationTimeout = undefined;
        }
      },

      _onArrowKeyup: function(event) {
        if (this.autoselect) {
          this._scheduleActivation(this.focusedItem, this.autoselectDelay);
        }
      },

      _onBlurCapture: function(event) {
        // Cancel a scheduled item activation (if any) when that item is
        // blurred.
        if (event.target === this._pendingActivationItem) {
          this._cancelPendingActivation();
        }
      },

      get _tabContainerScrollSize () {
        return Math.max(
          0,
          this.$.tabsContainer.scrollWidth -
            this.$.tabsContainer.offsetWidth
        );
      },

      _scroll: function(e, detail) {
        if (!this.scrollable) {
          return;
        }

        var ddx = (detail && -detail.ddx) || 0;
        this._affectScroll(ddx);
      },

      _down: function(e) {
        // go one beat async to defeat IronMenuBehavior
        // autorefocus-on-no-selection timeout
        this.async(function() {
          if (this._defaultFocusAsync) {
            this.cancelAsync(this._defaultFocusAsync);
            this._defaultFocusAsync = null;
          }
        }, 1);
      },

      _affectScroll: function(dx) {
        this.$.tabsContainer.scrollLeft += dx;

        var scrollLeft = this.$.tabsContainer.scrollLeft;

        this._leftHidden = scrollLeft === 0;
        this._rightHidden = scrollLeft === this._tabContainerScrollSize;
      },

      _onLeftScrollButtonDown: function() {
        this._scrollToLeft();
        this._holdJob = setInterval(this._scrollToLeft.bind(this), this._holdDelay);
      },

      _onRightScrollButtonDown: function() {
        this._scrollToRight();
        this._holdJob = setInterval(this._scrollToRight.bind(this), this._holdDelay);
      },

      _onScrollButtonUp: function() {
        clearInterval(this._holdJob);
        this._holdJob = null;
      },

      _scrollToLeft: function() {
        this._affectScroll(-this._step);
      },

      _scrollToRight: function() {
        this._affectScroll(this._step);
      },

      _tabChanged: function(tab, old) {
        if (!tab) {
          // Remove the bar without animation.
          this.$.selectionBar.classList.remove('expand');
          this.$.selectionBar.classList.remove('contract');
          this._positionBar(0, 0);
          return;
        }

        var r = this.$.tabsContent.getBoundingClientRect();
        var w = r.width;
        var tabRect = tab.getBoundingClientRect();
        var tabOffsetLeft = tabRect.left - r.left;

        this._pos = {
          width: this._calcPercent(tabRect.width, w),
          left: this._calcPercent(tabOffsetLeft, w)
        };

        if (this.noSlide || old == null) {
          // Position the bar without animation.
          this.$.selectionBar.classList.remove('expand');
          this.$.selectionBar.classList.remove('contract');
          this._positionBar(this._pos.width, this._pos.left);
          return;
        }

        var oldRect = old.getBoundingClientRect();
        var oldIndex = this.items.indexOf(old);
        var index = this.items.indexOf(tab);
        var m = 5;

        // bar animation: expand
        this.$.selectionBar.classList.add('expand');

        var moveRight = oldIndex < index;
        var isRTL = this._isRTL;
        if (isRTL) {
          moveRight = !moveRight;
        }

        if (moveRight) {
          this._positionBar(this._calcPercent(tabRect.left + tabRect.width - oldRect.left, w) - m,
              this._left);
        } else {
          this._positionBar(this._calcPercent(oldRect.left + oldRect.width - tabRect.left, w) - m,
              this._calcPercent(tabOffsetLeft, w) + m);
        }

        if (this.scrollable) {
          this._scrollToSelectedIfNeeded(tabRect.width, tabOffsetLeft);
        }
      },

      _scrollToSelectedIfNeeded: function(tabWidth, tabOffsetLeft) {
        var l = tabOffsetLeft - this.$.tabsContainer.scrollLeft;
        if (l < 0) {
          this.$.tabsContainer.scrollLeft += l;
        } else {
          l += (tabWidth - this.$.tabsContainer.offsetWidth);
          if (l > 0) {
            this.$.tabsContainer.scrollLeft += l;
          }
        }
      },

      _calcPercent: function(w, w0) {
        return 100 * w / w0;
      },

      _positionBar: function(width, left) {
        width = width || 0;
        left = left || 0;

        this._width = width;
        this._left = left;
        this.transform(
            'translateX(' + left + '%) scaleX(' + (width / 100) + ')',
            this.$.selectionBar);
      },

      _onBarTransitionEnd: function(e) {
        var cl = this.$.selectionBar.classList;
        // bar animation: expand -> contract
        if (cl.contains('expand')) {
          cl.remove('expand');
          cl.add('contract');
          this._positionBar(this._pos.width, this._pos.left);
        // bar animation done
        } else if (cl.contains('contract')) {
          cl.remove('contract');
        }
      }
    });
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /**
  Polymer.IronFormElementBehavior enables a custom element to be included
  in an `iron-form`.

  @demo demo/index.html
  @polymerBehavior
  */
  Polymer.IronFormElementBehavior = {

    properties: {
      /**
       * Fired when the element is added to an `iron-form`.
       *
       * @event iron-form-element-register
       */

      /**
       * Fired when the element is removed from an `iron-form`.
       *
       * @event iron-form-element-unregister
       */

      /**
       * The name of this element.
       */
      name: {
        type: String
      },

      /**
       * The value for this element.
       */
      value: {
        notify: true,
        type: String
      },

      /**
       * Set to true to mark the input as required. If used in a form, a
       * custom element that uses this behavior should also use
       * Polymer.IronValidatableBehavior and define a custom validation method.
       * Otherwise, a `required` element will always be considered valid.
       * It's also strongly recommended to provide a visual style for the element
       * when its value is invalid.
       */
      required: {
        type: Boolean,
        value: false
      },

      /**
       * The form that the element is registered to.
       */
      _parentForm: {
        type: Object
      }
    },

    attached: function() {
      // Note: the iron-form that this element belongs to will set this
      // element's _parentForm property when handling this event.
      this.fire('iron-form-element-register');
    },

    detached: function() {
      if (this._parentForm) {
        this._parentForm.fire('iron-form-element-unregister', {target: this});
      }
    }

  };

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  /**
   * Singleton IronMeta instance.
   */
  Polymer.IronValidatableBehaviorMeta = null;

  /**
   * `Use Polymer.IronValidatableBehavior` to implement an element that validates user input.
   * Use the related `Polymer.IronValidatorBehavior` to add custom validation logic to an iron-input.
   *
   * By default, an `<iron-form>` element validates its fields when the user presses the submit button.
   * To validate a form imperatively, call the form's `validate()` method, which in turn will
   * call `validate()` on all its children. By using `Polymer.IronValidatableBehavior`, your
   * custom element will get a public `validate()`, which
   * will return the validity of the element, and a corresponding `invalid` attribute,
   * which can be used for styling.
   *
   * To implement the custom validation logic of your element, you must override
   * the protected `_getValidity()` method of this behaviour, rather than `validate()`.
   * See [this](https://github.com/PolymerElements/iron-form/blob/master/demo/simple-element.html)
   * for an example.
   *
   * ### Accessibility
   *
   * Changing the `invalid` property, either manually or by calling `validate()` will update the
   * `aria-invalid` attribute.
   *
   * @demo demo/index.html
   * @polymerBehavior
   */
  Polymer.IronValidatableBehavior = {

    properties: {

      /**
       * Name of the validator to use.
       */
      validator: {
        type: String
      },

      /**
       * True if the last call to `validate` is invalid.
       */
      invalid: {
        notify: true,
        reflectToAttribute: true,
        type: Boolean,
        value: false
      },

      /**
       * This property is deprecated and should not be used. Use the global
       * validator meta singleton, `Polymer.IronValidatableBehaviorMeta` instead.
       */
      _validatorMeta: {
        type: Object
      },

      /**
       * Namespace for this validator. This property is deprecated and should
       * not be used. For all intents and purposes, please consider it a
       * read-only, config-time property.
       */
      validatorType: {
        type: String,
        value: 'validator'
      },

      _validator: {
        type: Object,
        computed: '__computeValidator(validator)'
      }
    },

    observers: [
      '_invalidChanged(invalid)'
    ],

    registered: function() {
      Polymer.IronValidatableBehaviorMeta = new Polymer.IronMeta({type: 'validator'});
    },

    _invalidChanged: function() {
      if (this.invalid) {
        this.setAttribute('aria-invalid', 'true');
      } else {
        this.removeAttribute('aria-invalid');
      }
    },

    /**
     * @return {boolean} True if the validator `validator` exists.
     */
    hasValidator: function() {
      return this._validator != null;
    },

    /**
     * Returns true if the `value` is valid, and updates `invalid`. If you want
     * your element to have custom validation logic, do not override this method;
     * override `_getValidity(value)` instead.

     * @param {Object} value The value to be validated. By default, it is passed
     * to the validator's `validate()` function, if a validator is set.
     * @return {boolean} True if `value` is valid.
     */
    validate: function(value) {
      this.invalid = !this._getValidity(value);
      return !this.invalid;
    },

    /**
     * Returns true if `value` is valid.  By default, it is passed
     * to the validator's `validate()` function, if a validator is set. You
     * should override this method if you want to implement custom validity
     * logic for your element.
     *
     * @param {Object} value The value to be validated.
     * @return {boolean} True if `value` is valid.
     */

    _getValidity: function(value) {
      if (this.hasValidator()) {
        return this._validator.validate(value);
      }
      return true;
    },

    __computeValidator: function() {
      return Polymer.IronValidatableBehaviorMeta &&
          Polymer.IronValidatableBehaviorMeta.byKey(this.validator);
    }
  };

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

/*
`<iron-input>` adds two-way binding and custom validators using `Polymer.IronValidatorBehavior`
to `<input>`.

### Two-way binding

By default you can only get notified of changes to an `input`'s `value` due to user input:

    <input value="{{myValue::input}}">

`iron-input` adds the `bind-value` property that mirrors the `value` property, and can be used
for two-way data binding. `bind-value` will notify if it is changed either by user input or by script.

    <input is="iron-input" bind-value="{{myValue}}">

### Custom validators

You can use custom validators that implement `Polymer.IronValidatorBehavior` with `<iron-input>`.

    <input is="iron-input" validator="my-custom-validator">

### Stopping invalid input

It may be desirable to only allow users to enter certain characters. You can use the
`prevent-invalid-input` and `allowed-pattern` attributes together to accomplish this. This feature
is separate from validation, and `allowed-pattern` does not affect how the input is validated.

    <!-- only allow characters that match [0-9] -- >
    <input is="iron-input" prevent-invalid-input allowed-pattern="[0-9]">

@hero hero.svg
@demo demo/index.html
*/

  Polymer({

    is: 'iron-input',

    extends: 'input',

    behaviors: [
      Polymer.IronValidatableBehavior
    ],

    properties: {

      /**
       * Use this property instead of `value` for two-way data binding.
       */
      bindValue: {
        observer: '_bindValueChanged',
        type: String
      },

      /**
       * Set to true to prevent the user from entering invalid input. If `allowedPattern` is set,
       * any character typed by the user will be matched against that pattern, and rejected if it's not a match.
       * Pasted input will have each character checked individually; if any character
       * doesn't match `allowedPattern`, the entire pasted string will be rejected.
       * If `allowedPattern` is not set, it will use the `type` attribute (only supported for `type=number`).
       */
      preventInvalidInput: {
        type: Boolean
      },

      /**
       * Regular expression that list the characters allowed as input.
       * This pattern represents the allowed characters for the field; as the user inputs text,
       * each individual character will be checked against the pattern (rather than checking
       * the entire value as a whole). The recommended format should be a list of allowed characters;
       * for example, `[a-zA-Z0-9.+-!;:]`
       */
      allowedPattern: {
        type: String,
        observer: "_allowedPatternChanged"
      },

      _previousValidInput: {
        type: String,
        value: ''
      },

      _patternAlreadyChecked: {
        type: Boolean,
        value: false
      }

    },

    listeners: {
      'input': '_onInput',
      'keypress': '_onKeypress'
    },

    registered: function() {
      // Feature detect whether we need to patch dispatchEvent (i.e. on FF and IE).
      if (!this._canDispatchEventOnDisabled()) {
        this._origDispatchEvent = this.dispatchEvent;
        this.dispatchEvent = this._dispatchEventFirefoxIE;
      }
    },

    created: function() {
      Polymer.IronA11yAnnouncer.requestAvailability();
    },

    _canDispatchEventOnDisabled: function() {
      var input = document.createElement('input');
      var canDispatch = false;
      input.disabled = true;

      input.addEventListener('feature-check-dispatch-event', function() {
        canDispatch = true;
      });

      try {
        input.dispatchEvent(new Event('feature-check-dispatch-event'));
      } catch(e) {}

      return canDispatch;
    },

    /**
     * @this {Node}
     * @param {!Event} event
     * @return {boolean}
     */
    _dispatchEventFirefoxIE: function(event) {
      // Due to Firefox bug, events fired on disabled form controls can throw
      // errors; furthermore, neither IE nor Firefox will actually dispatch
      // events from disabled form controls; as such, we toggle disable around
      // the dispatch to allow notifying properties to notify
      // See issue #47 for details
      var disabled = this.disabled;
      this.disabled = false;
      var defaultPrevented = this._origDispatchEvent(event);
      this.disabled = disabled;
      return defaultPrevented
    },

    get _patternRegExp() {
      var pattern;
      if (this.allowedPattern) {
        pattern = new RegExp(this.allowedPattern);
      } else {
        switch (this.type) {
          case 'number':
            pattern = /[0-9.,e-]/;
            break;
        }
      }
      return pattern;
    },

    ready: function() {
      this.bindValue = this.value;
    },

    /**
     * @suppress {checkTypes}
     */
    _bindValueChanged: function() {
      if (this.value !== this.bindValue) {
        this.value = !(this.bindValue || this.bindValue === 0 || this.bindValue === false) ? '' : this.bindValue;
      }
      // manually notify because we don't want to notify until after setting value
      this.fire('bind-value-changed', {value: this.bindValue});
    },

    _allowedPatternChanged: function() {
      // Force to prevent invalid input when an `allowed-pattern` is set
      this.preventInvalidInput = this.allowedPattern ? true : false;
    },

    _onInput: function() {
      // Need to validate each of the characters pasted if they haven't
      // been validated inside `_onKeypress` already.
      if (this.preventInvalidInput && !this._patternAlreadyChecked) {
        var valid = this._checkPatternValidity();
        if (!valid) {
          this._announceInvalidCharacter('Invalid string of characters not entered.');
          this.value = this._previousValidInput;
        }
      }

      this.bindValue = this.value;
      this._previousValidInput = this.value;
      this._patternAlreadyChecked = false;
    },

    _isPrintable: function(event) {
      // What a control/printable character is varies wildly based on the browser.
      // - most control characters (arrows, backspace) do not send a `keypress` event
      //   in Chrome, but the *do* on Firefox
      // - in Firefox, when they do send a `keypress` event, control chars have
      //   a charCode = 0, keyCode = xx (for ex. 40 for down arrow)
      // - printable characters always send a keypress event.
      // - in Firefox, printable chars always have a keyCode = 0. In Chrome, the keyCode
      //   always matches the charCode.
      // None of this makes any sense.

      // For these keys, ASCII code == browser keycode.
      var anyNonPrintable =
        (event.keyCode == 8)   ||  // backspace
        (event.keyCode == 9)   ||  // tab
        (event.keyCode == 13)  ||  // enter
        (event.keyCode == 27);     // escape

      // For these keys, make sure it's a browser keycode and not an ASCII code.
      var mozNonPrintable =
        (event.keyCode == 19)  ||  // pause
        (event.keyCode == 20)  ||  // caps lock
        (event.keyCode == 45)  ||  // insert
        (event.keyCode == 46)  ||  // delete
        (event.keyCode == 144) ||  // num lock
        (event.keyCode == 145) ||  // scroll lock
        (event.keyCode > 32 && event.keyCode < 41)   || // page up/down, end, home, arrows
        (event.keyCode > 111 && event.keyCode < 124); // fn keys

      return !anyNonPrintable && !(event.charCode == 0 && mozNonPrintable);
    },

    _onKeypress: function(event) {
      if (!this.preventInvalidInput && this.type !== 'number') {
        return;
      }
      var regexp = this._patternRegExp;
      if (!regexp) {
        return;
      }

      // Handle special keys and backspace
      if (event.metaKey || event.ctrlKey || event.altKey)
        return;

      // Check the pattern either here or in `_onInput`, but not in both.
      this._patternAlreadyChecked = true;

      var thisChar = String.fromCharCode(event.charCode);
      if (this._isPrintable(event) && !regexp.test(thisChar)) {
        event.preventDefault();
        this._announceInvalidCharacter('Invalid character ' + thisChar + ' not entered.');
      }
    },

    _checkPatternValidity: function() {
      var regexp = this._patternRegExp;
      if (!regexp) {
        return true;
      }
      for (var i = 0; i < this.value.length; i++) {
        if (!regexp.test(this.value[i])) {
          return false;
        }
      }
      return true;
    },

    /**
     * Returns true if `value` is valid. The validator provided in `validator` will be used first,
     * then any constraints.
     * @return {boolean} True if the value is valid.
     */
    validate: function() {
      // First, check what the browser thinks. Some inputs (like type=number)
      // behave weirdly and will set the value to "" if something invalid is
      // entered, but will set the validity correctly.
      var valid =  this.checkValidity();

      // Only do extra checking if the browser thought this was valid.
      if (valid) {
        // Empty, required input is invalid
        if (this.required && this.value === '') {
          valid = false;
        } else if (this.hasValidator()) {
          valid = Polymer.IronValidatableBehavior.validate.call(this, this.value);
        }
      }

      this.invalid = !valid;
      this.fire('iron-input-validate');
      return valid;
    },

    _announceInvalidCharacter: function(message) {
      this.fire('iron-announce', { text: message });
    }
  });

  /*
  The `iron-input-validate` event is fired whenever `validate()` is called.
  @event iron-input-validate
  */

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  // Generate unique, monotonically increasing IDs for labels (needed by
  // aria-labelledby) and add-ons.
  Polymer.PaperInputHelper = {};
  Polymer.PaperInputHelper.NextLabelID = 1;
  Polymer.PaperInputHelper.NextAddonID = 1;

  /**
   * Use `Polymer.PaperInputBehavior` to implement inputs with `<paper-input-container>`. This
   * behavior is implemented by `<paper-input>`. It exposes a number of properties from
   * `<paper-input-container>` and `<input is="iron-input">` and they should be bound in your
   * template.
   *
   * The input element can be accessed by the `inputElement` property if you need to access
   * properties or methods that are not exposed.
   * @polymerBehavior Polymer.PaperInputBehavior
   */
  Polymer.PaperInputBehaviorImpl = {

    properties: {
      /**
       * Fired when the input changes due to user interaction.
       *
       * @event change
       */

      /**
       * The label for this input. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * `<label>`'s content and `hidden` property, e.g.
       * `<label hidden$="[[!label]]">[[label]]</label>` in your `template`
       */
      label: {
        type: String
      },

      /**
       * The value for this input. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<input is="iron-input">`'s `bindValue`
       * property, or the value property of your input that is `notify:true`.
       */
      value: {
        notify: true,
        type: String
      },

      /**
       * Set to true to disable this input. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * both the `<paper-input-container>`'s and the input's `disabled` property.
       */
      disabled: {
        type: Boolean,
        value: false
      },

      /**
       * Returns true if the value is invalid. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to both the
       * `<paper-input-container>`'s and the input's `invalid` property.
       *
       * If `autoValidate` is true, the `invalid` attribute is managed automatically,
       * which can clobber attempts to manage it manually.
       */
      invalid: {
        type: Boolean,
        value: false,
        notify: true
      },

      /**
       * Set to true to prevent the user from entering invalid input. If you're
       * using PaperInputBehavior to  implement your own paper-input-like element,
       * bind this to `<input is="iron-input">`'s `preventInvalidInput` property.
       */
      preventInvalidInput: {
        type: Boolean
      },

      /**
       * Set this to specify the pattern allowed by `preventInvalidInput`. If
       * you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `allowedPattern`
       * property.
       */
      allowedPattern: {
        type: String
      },

      /**
       * The type of the input. The supported types are `text`, `number` and `password`.
       * If you're using PaperInputBehavior to implement your own paper-input-like element,
       * bind this to the `<input is="iron-input">`'s `type` property.
       */
      type: {
        type: String
      },

      /**
       * The datalist of the input (if any). This should match the id of an existing `<datalist>`.
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `list` property.
       */
      list: {
        type: String
      },

      /**
       * A pattern to validate the `input` with. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<input is="iron-input">`'s `pattern` property.
       */
      pattern: {
        type: String
      },

      /**
       * Set to true to mark the input as required. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<input is="iron-input">`'s `required` property.
       */
      required: {
        type: Boolean,
        value: false
      },

      /**
       * The error message to display when the input is invalid. If you're using
       * PaperInputBehavior to implement your own paper-input-like element,
       * bind this to the `<paper-input-error>`'s content, if using.
       */
      errorMessage: {
        type: String
      },

      /**
       * Set to true to show a character counter.
       */
      charCounter: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to disable the floating label. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<paper-input-container>`'s `noLabelFloat` property.
       */
      noLabelFloat: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to always float the label. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<paper-input-container>`'s `alwaysFloatLabel` property.
       */
      alwaysFloatLabel: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to auto-validate the input value. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<paper-input-container>`'s `autoValidate` property.
       */
      autoValidate: {
        type: Boolean,
        value: false
      },

      /**
       * Name of the validator to use. If you're using PaperInputBehavior to
       * implement your own paper-input-like element, bind this to
       * the `<input is="iron-input">`'s `validator` property.
       */
      validator: {
        type: String
      },

      // HTMLInputElement attributes for binding if needed

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `autocomplete` property.
       */
      autocomplete: {
        type: String,
        value: 'off'
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `autofocus` property.
       */
      autofocus: {
        type: Boolean,
        observer: '_autofocusChanged'
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `inputmode` property.
       */
      inputmode: {
        type: String
      },

      /**
       * The minimum length of the input value.
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `minlength` property.
       */
      minlength: {
        type: Number
      },

      /**
       * The maximum length of the input value.
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `maxlength` property.
       */
      maxlength: {
        type: Number
      },

      /**
       * The minimum (numeric or date-time) input value.
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `min` property.
       */
      min: {
        type: String
      },

      /**
       * The maximum (numeric or date-time) input value.
       * Can be a String (e.g. `"2000-01-01"`) or a Number (e.g. `2`).
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `max` property.
       */
      max: {
        type: String
      },

      /**
       * Limits the numeric or date-time increments.
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `step` property.
       */
      step: {
        type: String
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `name` property.
       */
      name: {
        type: String
      },

      /**
       * A placeholder string in addition to the label. If this is set, the label will always float.
       */
      placeholder: {
        type: String,
        // need to set a default so _computeAlwaysFloatLabel is run
        value: ''
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `readonly` property.
       */
      readonly: {
        type: Boolean,
        value: false
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `size` property.
       */
      size: {
        type: Number
      },

      // Nonstandard attributes for binding if needed

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `autocapitalize` property.
       */
      autocapitalize: {
        type: String,
        value: 'none'
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `autocorrect` property.
       */
      autocorrect: {
        type: String,
        value: 'off'
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `autosave` property,
       * used with type=search.
       */
      autosave: {
        type: String
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `results` property,
       * used with type=search.
       */
      results: {
        type: Number
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the `<input is="iron-input">`'s `accept` property,
       * used with type=file.
       */
      accept: {
        type: String
      },

      /**
       * If you're using PaperInputBehavior to implement your own paper-input-like
       * element, bind this to the`<input is="iron-input">`'s `multiple` property,
       * used with type=file.
       */
      multiple: {
        type: Boolean
      },

      _ariaDescribedBy: {
        type: String,
        value: ''
      },

      _ariaLabelledBy: {
        type: String,
        value: ''
      }

    },

    listeners: {
      'addon-attached': '_onAddonAttached',
    },

    keyBindings: {
      'shift+tab:keydown': '_onShiftTabDown'
    },

    hostAttributes: {
      tabindex: 0
    },

    /**
     * Returns a reference to the input element.
     */
    get inputElement() {
      return this.$.input;
    },

    /**
     * Returns a reference to the focusable element.
     */
    get _focusableElement() {
      return this.inputElement;
    },

    registered: function() {
      // These types have some default placeholder text; overlapping
      // the label on top of it looks terrible. Auto-float the label in this case.
      this._typesThatHaveText = ["date", "datetime", "datetime-local", "month",
          "time", "week", "file"];
    },

    attached: function() {
      this._updateAriaLabelledBy();

      if (this.inputElement &&
          this._typesThatHaveText.indexOf(this.inputElement.type) !== -1) {
        this.alwaysFloatLabel = true;
      }
    },

    _appendStringWithSpace: function(str, more) {
      if (str) {
        str = str + ' ' + more;
      } else {
        str = more;
      }
      return str;
    },

    _onAddonAttached: function(event) {
      var target = event.path ? event.path[0] : event.target;
      if (target.id) {
        this._ariaDescribedBy = this._appendStringWithSpace(this._ariaDescribedBy, target.id);
      } else {
        var id = 'paper-input-add-on-' + Polymer.PaperInputHelper.NextAddonID++;
        target.id = id;
        this._ariaDescribedBy = this._appendStringWithSpace(this._ariaDescribedBy, id);
      }
    },

    /**
     * Validates the input element and sets an error style if needed.
     *
     * @return {boolean}
     */
    validate: function() {
      return this.inputElement.validate();
    },

    /**
     * Forward focus to inputElement. Overriden from IronControlState.
     */
    _focusBlurHandler: function(event) {
      Polymer.IronControlState._focusBlurHandler.call(this, event);

      // Forward the focus to the nested input.
      if (this.focused && !this._shiftTabPressed)
        this._focusableElement.focus();
    },

    /**
     * Handler that is called when a shift+tab keypress is detected by the menu.
     *
     * @param {CustomEvent} event A key combination event.
     */
    _onShiftTabDown: function(event) {
      var oldTabIndex = this.getAttribute('tabindex');
      this._shiftTabPressed = true;
      this.setAttribute('tabindex', '-1');
      this.async(function() {
        this.setAttribute('tabindex', oldTabIndex);
        this._shiftTabPressed = false;
      }, 1);
    },

    /**
     * If `autoValidate` is true, then validates the element.
     */
    _handleAutoValidate: function() {
      if (this.autoValidate)
        this.validate();
    },

    /**
     * Restores the cursor to its original position after updating the value.
     * @param {string} newValue The value that should be saved.
     */
    updateValueAndPreserveCaret: function(newValue) {
      // Not all elements might have selection, and even if they have the
      // right properties, accessing them might throw an exception (like for
      // <input type=number>)
      try {
        var start = this.inputElement.selectionStart;
        this.value = newValue;

        // The cursor automatically jumps to the end after re-setting the value,
        // so restore it to its original position.
        this.inputElement.selectionStart = start;
        this.inputElement.selectionEnd = start;
      } catch (e) {
        // Just set the value and give up on the caret.
        this.value = newValue;
      }
    },

    _computeAlwaysFloatLabel: function(alwaysFloatLabel, placeholder) {
      return placeholder || alwaysFloatLabel;
    },

    _updateAriaLabelledBy: function() {
      var label = Polymer.dom(this.root).querySelector('label');
      if (!label) {
        this._ariaLabelledBy = '';
        return;
      }
      var labelledBy;
      if (label.id) {
        labelledBy = label.id;
      } else {
        labelledBy = 'paper-input-label-' + Polymer.PaperInputHelper.NextLabelID++;
        label.id = labelledBy;
      }
      this._ariaLabelledBy = labelledBy;
    },

    _onChange:function(event) {
      // In the Shadow DOM, the `change` event is not leaked into the
      // ancestor tree, so we must do this manually.
      // See https://w3c.github.io/webcomponents/spec/shadow/#events-that-are-not-leaked-into-ancestor-trees.
      if (this.shadowRoot) {
        this.fire(event.type, {sourceEvent: event}, {
          node: this,
          bubbles: event.bubbles,
          cancelable: event.cancelable
        });
      }
    },

    _autofocusChanged: function() {
      // Firefox doesn't respect the autofocus attribute if it's applied after
      // the page is loaded (Chrome/WebKit do respect it), preventing an
      // autofocus attribute specified in markup from taking effect when the
      // element is upgraded. As a workaround, if the autofocus property is set,
      // and the focus hasn't already been moved elsewhere, we take focus.
      if (this.autofocus && this._focusableElement) {

        // In IE 11, the default document.activeElement can be the page's
        // outermost html element, but there are also cases (under the
        // polyfill?) in which the activeElement is not a real HTMLElement, but
        // just a plain object. We identify the latter case as having no valid
        // activeElement.
        var activeElement = document.activeElement;
        var isActiveElementValid = activeElement instanceof HTMLElement;

        // Has some other element has already taken the focus?
        var isSomeElementActive = isActiveElementValid &&
            activeElement !== document.body &&
            activeElement !== document.documentElement; /* IE 11 */
        if (!isSomeElementActive) {
          // No specific element has taken the focus yet, so we can take it.
          this._focusableElement.focus();
        }
      }
    }
  };

  /** @polymerBehavior */
  Polymer.PaperInputBehavior = [
    Polymer.IronControlState,
    Polymer.IronA11yKeysBehavior,
    Polymer.PaperInputBehaviorImpl
  ];
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * Use `Polymer.PaperInputAddonBehavior` to implement an add-on for `<paper-input-container>`. A
   * add-on appears below the input, and may display information based on the input value and
   * validity such as a character counter or an error message.
   * @polymerBehavior
   */
  Polymer.PaperInputAddonBehavior = {

    hostAttributes: {
      'add-on': ''
    },

    attached: function() {
      this.fire('addon-attached');
    },

    /**
     * The function called by `<paper-input-container>` when the input value or validity changes.
     * @param {{
     *   inputElement: (Element|undefined),
     *   value: (string|undefined),
     *   invalid: boolean
     * }} state -
     *     inputElement: The input element.
     *     value: The input value.
     *     invalid: True if the input value is invalid.
     */
    update: function(state) {
    }

  };

</script>
<!--
`<paper-input-char-counter>` is a character counter for use with `<paper-input-container>`. It
shows the number of characters entered in the input and the max length if it is specified.

    <paper-input-container>
      <input is="iron-input" maxlength="20">
      <paper-input-char-counter></paper-input-char-counter>
    </paper-input-container>

### Styling

The following mixin is available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-input-char-counter` | Mixin applied to the element | `{}`
-->

<dom-module id="paper-input-char-counter" assetpath="bower_components/paper-input/">
  <template>
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply(--paper-font-caption);
        @apply(--paper-input-char-counter);
      }

      :host([hidden]) {
        display: none !important;
      }

      :host-context([dir="rtl"]) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'paper-input-char-counter',

    behaviors: [
      Polymer.PaperInputAddonBehavior
    ],

    properties: {
      _charCounterStr: {
        type: String,
        value: '0'
      }
    },

    /**
     * This overrides the update function in PaperInputAddonBehavior.
     * @param {{
     *   inputElement: (Element|undefined),
     *   value: (string|undefined),
     *   invalid: boolean
     * }} state -
     *     inputElement: The input element.
     *     value: The input value.
     *     invalid: True if the input value is invalid.
     */
    update: function(state) {
      if (!state.inputElement) {
        return;
      }

      state.value = state.value || '';

      var counter = state.value.toString().length.toString();

      if (state.inputElement.hasAttribute('maxlength')) {
        counter += '/' + state.inputElement.getAttribute('maxlength');
      }

      this._charCounterStr = counter;
    }
  });
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`<paper-input-container>` is a container for a `<label>`, an `<input is="iron-input">` or
`<textarea>` and optional add-on elements such as an error message or character
counter, used to implement Material Design text fields.

For example:

    <paper-input-container>
      <label>Your name</label>
      <input is="iron-input">
    </paper-input-container>

Do not wrap `<paper-input-container>` around elements that already include it, such as `<paper-input>`.
Doing so may cause events to bounce infintely between the container and its contained element.

### Listening for input changes

By default, it listens for changes on the `bind-value` attribute on its children nodes and perform
tasks such as auto-validating and label styling when the `bind-value` changes. You can configure
the attribute it listens to with the `attr-for-value` attribute.

### Using a custom input element

You can use a custom input element in a `<paper-input-container>`, for example to implement a
compound input field like a social security number input. The custom input element should have the
`paper-input-input` class, have a `notify:true` value property and optionally implements
`Polymer.IronValidatableBehavior` if it is validatable.

    <paper-input-container attr-for-value="ssn-value">
      <label>Social security number</label>
      <ssn-input class="paper-input-input"></ssn-input>
    </paper-input-container>


If you're using a `<paper-input-container>` imperatively, it's important to make sure
that you attach its children (the `iron-input` and the optional `label`) before you
attach the `<paper-input-container>` itself, so that it can be set up correctly.

### Validation

If the `auto-validate` attribute is set, the input container will validate the input and update
the container styling when the input value changes.

### Add-ons

Add-ons are child elements of a `<paper-input-container>` with the `add-on` attribute and
implements the `Polymer.PaperInputAddonBehavior` behavior. They are notified when the input value
or validity changes, and may implement functionality such as error messages or character counters.
They appear at the bottom of the input.

### Prefixes and suffixes
These are child elements of a `<paper-input-container>` with the `prefix`
or `suffix` attribute, and are displayed inline with the input, before or after.

    <paper-input-container>
      <div prefix>$</div>
      <label>Total</label>
      <input is="iron-input">
      <paper-icon-button suffix icon="clear"></paper-icon-button>
    </paper-input-container>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-input-container-color` | Label and underline color when the input is not focused | `--secondary-text-color`
`--paper-input-container-focus-color` | Label and underline color when the input is focused | `--primary-color`
`--paper-input-container-invalid-color` | Label and underline color when the input is is invalid | `--error-color`
`--paper-input-container-input-color` | Input foreground color | `--primary-text-color`
`--paper-input-container` | Mixin applied to the container | `{}`
`--paper-input-container-disabled` | Mixin applied to the container when it's disabled | `{}`
`--paper-input-container-label` | Mixin applied to the label | `{}`
`--paper-input-container-label-focus` | Mixin applied to the label when the input is focused | `{}`
`--paper-input-container-label-floating` | Mixin applied to the label when floating | `{}`
`--paper-input-container-input` | Mixin applied to the input | `{}`
`--paper-input-container-input-focus` | Mixin applied to the input when focused | `{}`
`--paper-input-container-input-invalid` | Mixin applied to the input when invalid | `{}`
`--paper-input-container-input-webkit-spinner` | Mixin applied to the webkit spinner | `{}`
`--paper-input-container-input-webkit-clear` | Mixin applied to the webkit clear button | `{}`
`--paper-input-container-ms-clear` | Mixin applied to the Internet Explorer clear button | `{}`
`--paper-input-container-underline` | Mixin applied to the underline | `{}`
`--paper-input-container-underline-focus` | Mixin applied to the underline when the input is focused | `{}`
`--paper-input-container-underline-disabled` | Mixin applied to the underline when the input is disabled | `{}`
`--paper-input-prefix` | Mixin applied to the input prefix | `{}`
`--paper-input-suffix` | Mixin applied to the input suffix | `{}`

This element is `display:block` by default, but you can set the `inline` attribute to make it
`display:inline-block`.
-->

<dom-module id="paper-input-container" assetpath="bower_components/paper-input/">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        @apply(--paper-input-container);
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply(--paper-input-container-disabled);
      }

      :host([hidden]) {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply(--paper-font-caption);
      }

      .underline {
        height: 2px;
        position: relative;
      }

      .focused-line {
        @apply(--layout-fit);

        border-bottom: 2px solid var(--paper-input-container-focus-color, --primary-color);

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply(--paper-input-container-underline-focus);
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .underline.is-invalid .focused-line {
        border-color: var(--paper-input-container-invalid-color, --error-color);
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .unfocused-line {
        @apply(--layout-fit);

        border-bottom: 1px solid var(--paper-input-container-color, --secondary-text-color);

        @apply(--paper-input-container-underline);
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, --secondary-text-color);

        @apply(--paper-input-container-underline-disabled);
      }

      .label-and-input-container {
        @apply(--layout-flex-auto);
        @apply(--layout-relative);

        width: 100%;
        max-width: 100%;
      }

      .input-content {
        @apply(--layout-horizontal);
        @apply(--layout-center);

        position: relative;
      }

      .input-content ::content label,
      .input-content ::content .paper-input-label {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, --secondary-text-color);
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;

        @apply(--paper-font-common-nowrap);
        @apply(--paper-font-subhead);
        @apply(--paper-input-container-label);
        @apply(--paper-transition-easing);
      }

      .input-content.label-is-floating ::content label,
      .input-content.label-is-floating ::content .paper-input-label {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply(--paper-input-container-label-floating);
      }

      :host-context([dir="rtl"]) .input-content.label-is-floating ::content label,
      :host-context([dir="rtl"]) .input-content.label-is-floating ::content .paper-input-label {
        /* TODO(noms): Figure out why leaving the width at 133% before the animation
         * actually makes
         * it wider on the right side, not left side, as you would expect in RTL */
        width: 100%;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::content label,
      .input-content.label-is-highlighted ::content .paper-input-label {
        color: var(--paper-input-container-focus-color, --primary-color);

        @apply(--paper-input-container-label-focus);
      }

      .input-content.is-invalid ::content label,
      .input-content.is-invalid ::content .paper-input-label {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .input-content.label-is-hidden ::content label,
      .input-content.label-is-hidden ::content .paper-input-label {
        visibility: hidden;
      }

      .input-content ::content input,
      .input-content ::content textarea,
      .input-content ::content iron-autogrow-textarea,
      .input-content ::content .paper-input-input {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, --primary-text-color);
        -webkit-appearance: none;
        text-align: inherit;
        vertical-align: bottom;

        @apply(--paper-font-subhead);
        @apply(--paper-input-container-input);
      }

      .input-content.focused ::content input,
      .input-content.focused ::content textarea,
      .input-content.focused ::content iron-autogrow-textarea,
      .input-content.focused ::content .paper-input-input {
        @apply(--paper-input-container-input-focus);
      }

      .input-content.is-invalid ::content input,
      .input-content.is-invalid ::content textarea,
      .input-content.is-invalid ::content iron-autogrow-textarea,
      .input-content.is-invalid ::content .paper-input-input {
        @apply(--paper-input-container-input-invalid);
      }

      .input-content ::content input::-webkit-outer-spin-button,
      .input-content ::content input::-webkit-inner-spin-button {
        @apply(--paper-input-container-input-webkit-spinner);
      }

      ::content [prefix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-prefix);
        @apply(--layout-flex-none);
      }

      ::content [suffix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-suffix);
        @apply(--layout-flex-none);
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::content input {
        min-width: 0;
      }

      .input-content ::content textarea {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::content * {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .add-on-content.is-highlighted ::content * {
        color: var(--paper-input-container-focus-color, --primary-color);
      }
    </style>

    <template is="dom-if" if="[[!noLabelFloat]]">
      <div class="floated-label-placeholder" aria-hidden="true">&nbsp;</div>
    </template>

    <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]">
      <content select="[prefix]" id="prefix"></content>

      <div class="label-and-input-container" id="labelAndInputContainer">
        <content select=":not([add-on]):not([prefix]):not([suffix])"></content>
      </div>

      <content select="[suffix]"></content>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <content id="addOnContent" select="[add-on]"></content>
    </div>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'paper-input-container',

    properties: {
      /**
       * Set to true to disable the floating label. The label disappears when the input value is
       * not null.
       */
      noLabelFloat: {
        type: Boolean,
        value: false
      },

      /**
       * Set to true to always float the floating label.
       */
      alwaysFloatLabel: {
        type: Boolean,
        value: false
      },

      /**
       * The attribute to listen for value changes on.
       */
      attrForValue: {
        type: String,
        value: 'bind-value'
      },

      /**
       * Set to true to auto-validate the input value when it changes.
       */
      autoValidate: {
        type: Boolean,
        value: false
      },

      /**
       * True if the input is invalid. This property is set automatically when the input value
       * changes if auto-validating, or when the `iron-input-validate` event is heard from a child.
       */
      invalid: {
        observer: '_invalidChanged',
        type: Boolean,
        value: false
      },

      /**
       * True if the input has focus.
       */
      focused: {
        readOnly: true,
        type: Boolean,
        value: false,
        notify: true
      },

      _addons: {
        type: Array
        // do not set a default value here intentionally - it will be initialized lazily when a
        // distributed child is attached, which may occur before configuration for this element
        // in polyfill.
      },

      _inputHasContent: {
        type: Boolean,
        value: false
      },

      _inputSelector: {
        type: String,
        value: 'input,textarea,.paper-input-input'
      },

      _boundOnFocus: {
        type: Function,
        value: function() {
          return this._onFocus.bind(this);
        }
      },

      _boundOnBlur: {
        type: Function,
        value: function() {
          return this._onBlur.bind(this);
        }
      },

      _boundOnInput: {
        type: Function,
        value: function() {
          return this._onInput.bind(this);
        }
      },

      _boundValueChanged: {
        type: Function,
        value: function() {
          return this._onValueChanged.bind(this);
        }
      }
    },

    listeners: {
      'addon-attached': '_onAddonAttached',
      'iron-input-validate': '_onIronInputValidate'
    },

    get _valueChangedEvent() {
      return this.attrForValue + '-changed';
    },

    get _propertyForValue() {
      return Polymer.CaseMap.dashToCamelCase(this.attrForValue);
    },

    get _inputElement() {
      return Polymer.dom(this).querySelector(this._inputSelector);
    },

    get _inputElementValue() {
      return this._inputElement[this._propertyForValue] || this._inputElement.value;
    },

    ready: function() {
      if (!this._addons) {
        this._addons = [];
      }
      this.addEventListener('focus', this._boundOnFocus, true);
      this.addEventListener('blur', this._boundOnBlur, true);
    },

    attached: function() {
      if (this.attrForValue) {
        this._inputElement.addEventListener(this._valueChangedEvent, this._boundValueChanged);
      } else {
        this.addEventListener('input', this._onInput);
      }

      // Only validate when attached if the input already has a value.
      if (this._inputElementValue != '') {
        this._handleValueAndAutoValidate(this._inputElement);
      } else {
        this._handleValue(this._inputElement);
      }
    },

    _onAddonAttached: function(event) {
      if (!this._addons) {
        this._addons = [];
      }
      var target = event.target;
      if (this._addons.indexOf(target) === -1) {
        this._addons.push(target);
        if (this.isAttached) {
          this._handleValue(this._inputElement);
        }
      }
    },

    _onFocus: function() {
      this._setFocused(true);
    },

    _onBlur: function() {
      this._setFocused(false);
      this._handleValueAndAutoValidate(this._inputElement);
    },

    _onInput: function(event) {
      this._handleValueAndAutoValidate(event.target);
    },

    _onValueChanged: function(event) {
      this._handleValueAndAutoValidate(event.target);
    },

    _handleValue: function(inputElement) {
      var value = this._inputElementValue;

      // type="number" hack needed because this.value is empty until it's valid
      if (value || value === 0 || (inputElement.type === 'number' && !inputElement.checkValidity())) {
        this._inputHasContent = true;
      } else {
        this._inputHasContent = false;
      }

      this.updateAddons({
        inputElement: inputElement,
        value: value,
        invalid: this.invalid
      });
    },

    _handleValueAndAutoValidate: function(inputElement) {
      if (this.autoValidate) {
        var valid;
        if (inputElement.validate) {
          valid = inputElement.validate(this._inputElementValue);
        } else {
          valid = inputElement.checkValidity();
        }
        this.invalid = !valid;
      }

      // Call this last to notify the add-ons.
      this._handleValue(inputElement);
    },

    _onIronInputValidate: function(event) {
      this.invalid = this._inputElement.invalid;
    },

    _invalidChanged: function() {
      if (this._addons) {
        this.updateAddons({invalid: this.invalid});
      }
    },

    /**
     * Call this to update the state of add-ons.
     * @param {Object} state Add-on state.
     */
    updateAddons: function(state) {
      for (var addon, index = 0; addon = this._addons[index]; index++) {
        addon.update(state);
      }
    },

    _computeInputContentClass: function(noLabelFloat, alwaysFloatLabel, focused, invalid, _inputHasContent) {
      var cls = 'input-content';
      if (!noLabelFloat) {
        var label = this.querySelector('label');

        if (alwaysFloatLabel || _inputHasContent) {
          cls += ' label-is-floating';
          // If the label is floating, ignore any offsets that may have been
          // applied from a prefix element.
          this.$.labelAndInputContainer.style.position = 'static';

          if (invalid) {
            cls += ' is-invalid';
          } else if (focused) {
            cls += " label-is-highlighted";
          }
        } else {
          // When the label is not floating, it should overlap the input element.
          if (label) {
            this.$.labelAndInputContainer.style.position = 'relative';
          }
          if (invalid) {
            cls += ' is-invalid';
          }
        }
      } else {
        if (_inputHasContent) {
          cls += ' label-is-hidden';
        }
        if (invalid) {
          cls += ' is-invalid';
        }
      }
      if (focused) {
        cls += ' focused';
      }
      return cls;
    },

    _computeUnderlineClass: function(focused, invalid) {
      var cls = 'underline';
      if (invalid) {
        cls += ' is-invalid';
      } else if (focused) {
        cls += ' is-highlighted'
      }
      return cls;
    },

    _computeAddOnContentClass: function(focused, invalid) {
      var cls = 'add-on-content';
      if (invalid) {
        cls += ' is-invalid';
      } else if (focused) {
        cls += ' is-highlighted'
      }
      return cls;
    }
  });
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
`<paper-input-error>` is an error message for use with `<paper-input-container>`. The error is
displayed when the `<paper-input-container>` is `invalid`.

    <paper-input-container>
      <input is="iron-input" pattern="[0-9]*">
      <paper-input-error>Only numbers are allowed!</paper-input-error>
    </paper-input-container>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-input-container-invalid-color` | The foreground color of the error | `--error-color`
`--paper-input-error`                   | Mixin applied to the error        | `{}`
-->

<dom-module id="paper-input-error" assetpath="bower_components/paper-input/">
  <template>
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, --error-color);

        @apply(--paper-font-caption);
        @apply(--paper-input-error);
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      };
    </style>

    <content></content>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'paper-input-error',

    behaviors: [
      Polymer.PaperInputAddonBehavior
    ],

    properties: {
      /**
       * True if the error is showing.
       */
      invalid: {
        readOnly: true,
        reflectToAttribute: true,
        type: Boolean
      }
    },

    /**
     * This overrides the update function in PaperInputAddonBehavior.
     * @param {{
     *   inputElement: (Element|undefined),
     *   value: (string|undefined),
     *   invalid: boolean
     * }} state -
     *     inputElement: The input element.
     *     value: The input value.
     *     invalid: True if the input value is invalid.
     */
    update: function(state) {
      this._setInvalid(state.invalid);
    }
  });
</script>
<!--
Material design: [Text fields](https://www.google.com/design/spec/components/text-fields.html)

`<paper-input>` is a single-line text field with Material Design styling.

    <paper-input label="Input label"></paper-input>

It may include an optional error message or character counter.

    <paper-input error-message="Invalid input!" label="Input label"></paper-input>
    <paper-input char-counter label="Input label"></paper-input>

It can also include custom prefix or suffix elements, which are displayed
before or after the text input itself. In order for an element to be
considered as a prefix, it must have the `prefix` attribute (and similarly
for `suffix`).

    <paper-input label="total">
      <div prefix>$</div>
      <paper-icon-button suffix icon="clear"></paper-icon-button>
    </paper-input>

A `paper-input` can use the native `type=search` or `type=file` features.
However, since we can't control the native styling of the input (search icon,
file button, date placeholder, etc.), in these cases the label will be
automatically floated. The `placeholder` attribute can still be used for
additional informational text.

    <paper-input label="search!" type="search"
        placeholder="search for cats" autosave="test" results="5">
    </paper-input>

See `Polymer.PaperInputBehavior` for more API docs.

### Focus

To focus a paper-input, you can call the native `focus()` method as long as the
paper input has a tab index.

### Styling

See `Polymer.PaperInputContainer` for a list of custom properties used to
style this element.


@group Paper Elements
@element paper-input
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-input" assetpath="bower_components/paper-input/">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input::-webkit-outer-spin-button,                                                                                                     
      input::-webkit-inner-spin-button {                                                                                                    
        @apply(--paper-input-container-input-webkit-spinner);                                                                                                                                                                                      
      }
      
      input::-webkit-clear-button {
        @apply(--paper-input-container-input-webkit-clear);  
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-ms-clear {
        @apply(--paper-input-container-ms-clear);
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <content select="[prefix]"></content>

      <label hidden$="[[!label]]" aria-hidden="true" for="input">[[label]]</label>

      <input is="iron-input" id="input" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabindex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]">

      <content select="[suffix]"></content>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'paper-input',

    behaviors: [
      Polymer.IronFormElementBehavior,
      Polymer.PaperInputBehavior
    ]
  });
</script>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><iron-iconset-svg name="paper-dropdown-menu" size="24">
<svg><defs>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g>
</defs></svg>
</iron-iconset-svg>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><dom-module id="paper-dropdown-menu-shared-styles" assetpath="bower_components/paper-dropdown-menu/">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        text-align: left;

        /* NOTE(cdata): Both values are needed, since some phones require the
         * value to be `transparent`.
         */
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;

        --paper-input-container-input: {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          max-width: 100%;
          box-sizing: border-box;
          cursor: pointer;
        };

        @apply(--paper-dropdown-menu);
      }

      :host([disabled]) {
        @apply(--paper-dropdown-menu-disabled);
      }

      :host([noink]) paper-ripple {
        display: none;
      }

      :host([no-label-float]) paper-ripple {
        top: 8px;
      }

      paper-ripple {
        top: 12px;
        left: 0px;
        bottom: 8px;
        right: 0px;

        @apply(--paper-dropdown-menu-ripple);
      }

      paper-menu-button {
        display: block;
        padding: 0;

        @apply(--paper-dropdown-menu-button);
      }

      paper-input {
        @apply(--paper-dropdown-menu-input);
      }

      iron-icon {
        color: var(--disabled-text-color);

        @apply(--paper-dropdown-menu-icon);
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Dropdown menus](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)

`paper-dropdown-menu` is similar to a native browser select element.
`paper-dropdown-menu` works with selectable content. The currently selected
item is displayed in the control. If no item is selected, the `label` is
displayed instead.

Example:

    <paper-dropdown-menu label="Your favourite pastry">
      <paper-listbox class="dropdown-content">
        <paper-item>Croissant</paper-item>
        <paper-item>Donut</paper-item>
        <paper-item>Financier</paper-item>
        <paper-item>Madeleine</paper-item>
      </paper-listbox>
    </paper-dropdown-menu>

This example renders a dropdown menu with 4 options.

The child element with the class `dropdown-content` is used as the dropdown
menu. This can be a [`paper-listbox`](paper-listbox), or any other or
element that acts like an [`iron-selector`](iron-selector).

Specifically, the menu child must fire an
[`iron-select`](iron-selector#event-iron-select) event when one of its
children is selected, and an [`iron-deselect`](iron-selector#event-iron-deselect)
event when a child is deselected. The selected or deselected item must
be passed as the event's `detail.item` property.

Applications can listen for the `iron-select` and `iron-deselect` events
to react when options are selected and deselected.

### Styling

The following custom properties and mixins are also available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-dropdown-menu` | A mixin that is applied to the element host | `{}`
`--paper-dropdown-menu-disabled` | A mixin that is applied to the element host when disabled | `{}`
`--paper-dropdown-menu-ripple` | A mixin that is applied to the internal ripple | `{}`
`--paper-dropdown-menu-button` | A mixin that is applied to the internal menu button | `{}`
`--paper-dropdown-menu-input` | A mixin that is applied to the internal paper input | `{}`
`--paper-dropdown-menu-icon` | A mixin that is applied to the internal icon | `{}`

You can also use any of the `paper-input-container` and `paper-menu-button`
style mixins and custom properties to style the internal input and menu button
respectively.

@group Paper Elements
@element paper-dropdown-menu
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-dropdown-menu" assetpath="bower_components/paper-dropdown-menu/">
  <template>
    <style include="paper-dropdown-menu-shared-styles"></style>

    <!-- this div fulfills an a11y requirement for combobox, do not remove -->
    <span role="button"></span>
    <paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate="" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]">
      <div class="dropdown-trigger">
        <paper-ripple></paper-ripple>
        <!-- paper-input has type="text" for a11y, do not remove -->
        <paper-input type="text" invalid="[[invalid]]" readonly="" disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]">
          <iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix=""></iron-icon>
        </paper-input>
      </div>
      <content id="content" select=".dropdown-content"></content>
    </paper-menu-button>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'paper-dropdown-menu',

        behaviors: [
          Polymer.IronButtonState,
          Polymer.IronControlState,
          Polymer.IronFormElementBehavior,
          Polymer.IronValidatableBehavior
        ],

        properties: {
          /**
           * The derived "label" of the currently selected item. This value
           * is the `label` property on the selected item if set, or else the
           * trimmed text content of the selected item.
           */
          selectedItemLabel: {
            type: String,
            notify: true,
            readOnly: true
          },

          /**
           * The last selected item. An item is selected if the dropdown menu has
           * a child with class `dropdown-content`, and that child triggers an
           * `iron-select` event with the selected `item` in the `detail`.
           *
           * @type {?Object}
           */
          selectedItem: {
            type: Object,
            notify: true,
            readOnly: true
          },

          /**
           * The value for this element that will be used when submitting in
           * a form. It is read only, and will always have the same value
           * as `selectedItemLabel`.
           */
          value: {
            type: String,
            notify: true,
            readOnly: true
          },

          /**
           * The label for the dropdown.
           */
          label: {
            type: String
          },

          /**
           * The placeholder for the dropdown.
           */
          placeholder: {
            type: String
          },

          /**
           * The error message to display when invalid.
           */
          errorMessage: {
              type: String
          },

          /**
           * True if the dropdown is open. Otherwise, false.
           */
          opened: {
            type: Boolean,
            notify: true,
            value: false,
            observer: '_openedChanged'
          },

          /**
           * By default, the dropdown will constrain scrolling on the page
           * to itself when opened.
           * Set to true in order to prevent scroll from being constrained
           * to the dropdown when it opens.
           */
          allowOutsideScroll: {
            type: Boolean,
            value: false
          },

          /**
           * Set to true to disable the floating label. Bind this to the
           * `<paper-input-container>`'s `noLabelFloat` property.
           */
          noLabelFloat: {
              type: Boolean,
              value: false,
              reflectToAttribute: true
          },

          /**
           * Set to true to always float the label. Bind this to the
           * `<paper-input-container>`'s `alwaysFloatLabel` property.
           */
          alwaysFloatLabel: {
            type: Boolean,
            value: false
          },

          /**
           * Set to true to disable animations when opening and closing the
           * dropdown.
           */
          noAnimations: {
            type: Boolean,
            value: false
          },

          /**
           * The orientation against which to align the menu dropdown
           * horizontally relative to the dropdown trigger.
           */
          horizontalAlign: {
            type: String,
            value: 'right'
          },

          /**
           * The orientation against which to align the menu dropdown
           * vertically relative to the dropdown trigger.
           */
          verticalAlign: {
            type: String,
            value: 'top'
          },

          /**
           * If true, the `horizontalAlign` and `verticalAlign` properties will
           * be considered preferences instead of strict requirements when
           * positioning the dropdown and may be changed if doing so reduces
           * the area of the dropdown falling outside of `fitInto`.
           */
          dynamicAlign: {
            type: Boolean
          },
            
          /**
           * Whether focus should be restored to the dropdown when the menu closes.
           */
          restoreFocusOnClose: {
            type: Boolean,
            value: true
          },
        },

        listeners: {
          'tap': '_onTap'
        },

        keyBindings: {
          'up down': 'open',
          'esc': 'close'
        },

        hostAttributes: {
          role: 'combobox',
          'aria-autocomplete': 'none',
          'aria-haspopup': 'true'
        },

        observers: [
          '_selectedItemChanged(selectedItem)'
        ],

        attached: function() {
          // NOTE(cdata): Due to timing, a preselected value in a `IronSelectable`
          // child will cause an `iron-select` event to fire while the element is
          // still in a `DocumentFragment`. This has the effect of causing
          // handlers not to fire. So, we double check this value on attached:
          var contentElement = this.contentElement;
          if (contentElement && contentElement.selectedItem) {
            this._setSelectedItem(contentElement.selectedItem);
          }
        },

        /**
         * The content element that is contained by the dropdown menu, if any.
         */
        get contentElement() {
          return Polymer.dom(this.$.content).getDistributedNodes()[0];
        },

        /**
         * Show the dropdown content.
         */
        open: function() {
          this.$.menuButton.open();
        },

        /**
         * Hide the dropdown content.
         */
        close: function() {
          this.$.menuButton.close();
        },

        /**
         * A handler that is called when `iron-select` is fired.
         *
         * @param {CustomEvent} event An `iron-select` event.
         */
        _onIronSelect: function(event) {
          this._setSelectedItem(event.detail.item);
        },

        /**
         * A handler that is called when `iron-deselect` is fired.
         *
         * @param {CustomEvent} event An `iron-deselect` event.
         */
        _onIronDeselect: function(event) {
          this._setSelectedItem(null);
        },

        /**
         * A handler that is called when the dropdown is tapped.
         *
         * @param {CustomEvent} event A tap event.
         */
        _onTap: function(event) {
          if (Polymer.Gestures.findOriginalTarget(event) === this) {
            this.open();
          }
        },

        /**
         * Compute the label for the dropdown given a selected item.
         *
         * @param {Element} selectedItem A selected Element item, with an
         * optional `label` property.
         */
        _selectedItemChanged: function(selectedItem) {
          var value = '';
          if (!selectedItem) {
            value = '';
          } else {
            value = selectedItem.label || selectedItem.getAttribute('label') || selectedItem.textContent.trim();
          }

          this._setValue(value);
          this._setSelectedItemLabel(value);
        },

        /**
         * Compute the vertical offset of the menu based on the value of
         * `noLabelFloat`.
         *
         * @param {boolean} noLabelFloat True if the label should not float
         * above the input, otherwise false.
         */
        _computeMenuVerticalOffset: function(noLabelFloat) {
          // NOTE(cdata): These numbers are somewhat magical because they are
          // derived from the metrics of elements internal to `paper-input`'s
          // template. The metrics will change depending on whether or not the
          // input has a floating label.
          return noLabelFloat ? -4 : 8;
        },

        /**
         * Returns false if the element is required and does not have a selection,
         * and true otherwise.
         * @param {*=} _value Ignored.
         * @return {boolean} true if `required` is false, or if `required` is true
         * and the element has a valid selection.
         */
        _getValidity: function(_value) {
          return this.disabled || !this.required || (this.required && !!this.value);
        },

        _openedChanged: function() {
          var openState = this.opened ? 'true' : 'false';
          var e = this.contentElement;
          if (e) {
            e.setAttribute('aria-expanded', openState);
          }
        }
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Material design: [Menus](https://www.google.com/design/spec/components/menus.html)

`<paper-listbox>` implements an accessible listbox control with Material Design styling. The focused item
is highlighted, and the selected item has bolded text.

    <paper-listbox>
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-listbox>

An initial selection can be specified with the `selected` attribute.

    <paper-listbox selected="0">
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-listbox>

Make a multi-select listbox with the `multi` attribute. Items in a multi-select listbox can be deselected,
and multiple item can be selected.

    <paper-listbox multi>
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-listbox>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-listbox-background-color`   | Menu background color                                            | `--primary-background-color`
`--paper-listbox-color`              | Menu foreground color                                            | `--primary-text-color`
`--paper-listbox`                    | Mixin applied to the listbox                                        | `{}`

### Accessibility

`<paper-listbox>` has `role="listbox"` by default. A multi-select listbox will also have
`aria-multiselectable` set. It implements key bindings to navigate through the listbox with the up and
down arrow keys, esc to exit the listbox, and enter to activate a listbox item. Typing the first letter
of a listbox item will also focus it.

@group Paper Elements
@element paper-listbox
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-listbox" assetpath="bower_components/paper-listbox/">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, --primary-background-color);
        color: var(--paper-listbox-color, --primary-text-color);

        @apply(--paper-listbox);
      }
    </style>

    <content></content>
  </template>

  <script>
    (function() {
      Polymer({
        is: 'paper-listbox',

        behaviors: [
          Polymer.IronMenuBehavior
        ],

        hostAttributes: {
          role: 'listbox'
        }
      });
    })();
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!-- <link rel="import" href="../prism-element/prism-theme-default.html"> -->
<!--
A `<pre>` element that displays highlighted text.

## Usage
```
<pre is="[[structure-display]]" display="[[json]]"></pre>
```

## Theming
Custom property | Description | Default
----------------|-------------|----------
`--code-block` | Mixin applied to the code block. | `{}`
-->
<dom-module id="structure-display" assetpath="bower_components/docs-parameters-table/">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style>
    :host {
      background-color: var(--code-background-color, #f5f2f0) !important;
    }
    #output {
      @apply(--code-block);
    }
    </style>
    <prism-highlighter></prism-highlighter>
    <div id="output" class="markdown-html"></div>
  </template>
  <script>
    Polymer({
      is: 'structure-display',
      extends: 'pre',
      properties: {
        // A content to parse, highlight and display.
        display: String,
        // Data type to pass to the highlight function. js, xml etc.
        dataType: {
          type: String,
          value: 'js'
        },
        // If set automatically hides the element if the `display` is empty
        autoHide: {
          type: Boolean,
          value: false
        },
        // Set to true when the element has been initialized.
        _ready: Boolean
      },

      observers: [
        '_highlightSchema(display)',
        '_autoHideChanged(autoHide, display)'
      ],

      ready: function() {
        this.classList.add('markdown-html');
        this._ready = true;
        // This callbacks are be called before the element ready event is fired.
        // So they must be called again.
        this._highlightSchema(this.display);
      },

      _autoHideChanged: function(state, display) {
        if (state) {
          if (!display) {
            if (!this.hasAttribute('hidden')) {
              this.setAttribute('hidden', true);
            }
          } else {
            if (this.hasAttribute('hidden')) {
              this.removeAttribute('hidden');
            }
          }
        } else {
          if (this.hasAttribute('hidden')) {
            this.removeAttribute('hidden');
          }
        }
      },

      _highlightSchema: function(str) {
        if (!this._ready) {
          return;
        }
        if (!str) {
          this.$.output.innerHTML = '';
          return;
        }
        this.debounce('structure-display-highlight', function() {
          this.$.output.innerHTML = this.highlight(str, this.dataType);
        }, 10);
      },

      highlight: function(code, lang) {
        return this.fire('syntax-highlight', {code: code, lang: lang}).detail.code;
      },
    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
An element that copies a text to clipboard.

### Example
```
<clipboard-copy content="test"></clipboard-copy>
```
```
var elm = document.querySelectior('clipboard-copy');
if(elm.copy()) {
  console.info('Content has been copied to the clipboard');
} else {
  console.error('Content copy error. This browser is ancient!');
}
```

### Styling
This element doesn't need styling because it's a logic element without the UI.

@group Logic Elements
@element clipboard-copy
@demo demo/index.html
-->
<dom-module id="clipboard-copy" assetpath="bower_components/clipboard-copy/">
  <template>
    <style>
    :host {
      display: none;
    }

    :host([copying]) {
      display: inline;
      width: 0;
      height: 0;
      border: none;
      overflow: hidden;
    }
    </style>
    <div id="content">[[content]]</div>
  </template>
  <script>
  Polymer({
    is: 'clipboard-copy',
    /**
     * Fired when the content has been copied to the clipboard.
     *
     * Note: You can use return value of the `copy()` function. If the return
     * value is `true` then content has been copied to clipboard.
     *
     * @event content-copied
     */
    /**
     * Fired when there was an error copying content to clipboard.
     *
     * Note: You can use return value of the `copy()` function. If the return
     * value is `flase` then content has not been copied to clipboard.
     *
     * @event content-copy-error
     */
    properties: {
      /**
       * A content to be copied to the clipboard.
       * It must be set before calling the `copy` function.
       */
      content: String
    },

    /**
     * Execute content copy.
     *
     * @return {Boolean} True if the content has been copied to the clipboard
     * and false if there was an error.
     */
    copy: function() {
      this.setAttribute('copying', true);
      var snipRange = document.createRange();
      snipRange.selectNodeContents(this.$.content);
      var selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(snipRange);
      var result = false;
      try {
        result = document.execCommand('copy');
        this.fire('content-copied', null, {
          bubbles: false
        });
      } catch (err) {
        // Copy command is not available
        Polymer.Base._error(err);
        this.fire('content-copy-error', null, {
          bubbles: false
        });
      }
      selection.removeAllRanges();
      this.removeAttribute('copying');
      return result;
    }

  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(global) {
  'use strict';

  global.ArcBehaviors = global.ArcBehaviors || {};
  /**
   * Common functions and properties for table display elements.
   *
   * @polymerBehavior ArcBehaviors.JsonTableBehavior
   */
  global.ArcBehaviors.JsonTableBehavior = {

    properties: {
      // In pagination, page index
      page: {
        type: Number,
        value: 0
      },
      /**
       * Number of items in pagination per page.
       * Allowed values are 10, 15, 20, 25, 50 and 100.
       */
      itemsPerPage: {
        type: Number,
        value: 20
      },
      // If true then the pagination will be enabled for the arrays.
      paginate: {
        type: Boolean,
        value: false
      }
    },
    /**
     * Returns true if given argument is an array
     *
     * @param {any} arr Candidate to test for object
     */
    isArray: function(arr) {
      return arr instanceof Array;
    },
    /**
     * Returns true if given argument is an object.
     *
     * @param {any} obj Candidate to test for object
     */
    isObject: function(obj) {
      return Object.prototype.toString.call(obj) === '[object Object]';
    },
    /**
     * Check if given object is one of the primitives.
     *
     * @param {any} obj An object to test
     * @return True if the object is one of:
     * - string
     * - number
     * - boolean
     * - undefined
     * - null
     */
    isPrimitive: function(obj) {
      if (obj === null) {
        return true;
      }
      var primitives = ['string', 'number', 'boolean', 'undefined'];
      var type = typeof obj;
      return primitives.indexOf(type) !== -1;
    },

    /**
     * Creates a data model for single proerty.
     *
     * @param {String} key A property name in the JSON structure
     * @param {any} value Value associated with the property.
     * @return {Object<String, any>} Internal data model for a property. Model contains following
     * keys:
     *
     * - key - a property name
     * - value - property value - without applying data model. Thois will be done in child elements
     * - isObject - set if the value is type of Object
     * - isEnum - set if the value is type of array and contains primitives only
     * - isArray - set if the value is type of Array and contains complex objects
     * - isPrimitive - set if the value is type a primitive
     */
    getPropertyModel: function(key, value) {
      var result = this.getItemModel(value);
      result.key = key;
      return result;
    },
    /**
     * Creates a model for a value.
     *
     * @param {any} value Array item or property value to create a model from.
     * @return {Object<String, any>} Internal data model for a property value or array item. Model
     * contains following keys:
     *
     * - value - property value - without applying data model. Thois will be done in child elements
     * - isObject - set if the value is type of Object
     * - isEnum - set if the value is type of array and contains primitives only
     * - isArray - set if the value is type of Array and contains complex objects
     * - isPrimitive - set if the value is type a primitive
     */
    getItemModel: function(value) {
      var result = {
        value: value
      };
      if (this.isObject(value)) {
        result.isObject = true;
      } else if (this.isArray(value)) {
        if (this.isEnum(value)) {
          result.isEnum = true;
        } else {
          result.isArray = true;
        }
      } else {
        result.isPrimitive = true;
      }
      return result;
    },
    /**
     * Checks if given array is enum (contains primitives only).
     *
     * @param {Array} arr An array to test.
     * @return {Boolean} True if the array contains primitive values only. False otherwise.
     */
    isEnum: function(arr) {
      if (!arr || !arr.length) {
        return false;
      }
      for (var i = 0, len = arr.length; i < len; i++) {
        if (!this.isPrimitive(arr[i])) {
          return false;
        }
      }
      return true;
    },
    // Computes if the passed record's object is a type of array or enum.
    _isEnumOrArray: function(record) {
      if (!record || !record.base) {
        return false;
      }
      var item = record.base;
      return item.isArray || item.isEnum;
    },
    // Computes the size of item's value.
    _computeArraySize: function(record) {
      if (!record || !record.base) {
        return 0;
      }
      var item = record.base;
      if (item.isArray || item.isEnum) {
        return item.value.length || 0;
      }
      return 0;
    }
  };
})(window);
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><dom-module id="json-table-primitive-teaser" assetpath="bower_components/json-table/">
  <template>
    <style>
      :host {
        display: block;
        margin: 4px 0;
      }

      :host([opened]) .primitive-wrapper {
        max-height: none;
      }

      .primitive-wrapper {
        max-height: var(--json-table-primitive-teaser-max-heigth, 160px);
        overflow: hidden;
        padding: 4px 0;
      }

      *[hidden] {
        display: none;
      }

      .toggle {
        font-size: inherit;
        color: inherit;
        margin-top: 12px;
        display: inline-block;
      }
    </style>
    <div class="primitive-wrapper" id="wrapper">
      <content id="content"></content>
    </div>
    <a href="#" class="toggle" hidden$="[[!_isOverflow]]" on-tap="toggle">[[_computeToggleLabel(opened)]]</a>
  </template>
  <script>
    Polymer({
      is: 'json-table-primitive-teaser',

      properties: {
        // If true then the whole value will be visible.
        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        // DOM change observer
        observer: {
          readOnly: true,
          type: Object
        },
        // A function to be called when children DOM change
        _nodesObserver: {
          type: Function,
          value: function() {
            return this._contentChanged.bind(this);
          }
        },
        // if true then the content overflows the max height area.
        _isOverflow: {
          type: Boolean,
          value: false
        },
        // Container's max height when closed.
        maxHeight: {
          type: String,
          value: '160px',
          observer: '_maxHeightChanged'
        }
      },

      attached: function() {
        var observer = Polymer.dom(this.$.content).observeNodes(this._nodesObserver);
        this._setObserver(observer);
      },

      detached: function() {
        Polymer.dom(this.$.content).unobserveNodes(this.observer);
      },

      _contentChanged: function() {
        var oh = this.$.wrapper.offsetHeight; // current height
        var sh = this.$.wrapper.scrollHeight; // content height
        this._isOverflow = sh > oh;
      },

      toggle: function(e) {
        e.preventDefault();
        this.opened = !this.opened;
      },

      _computeToggleLabel: function(opened) {
        return opened ? 'show less' : 'show more';
      },

      _maxHeightChanged: function(maxHeight) {
        maxHeight = maxHeight || '160px';
        this.customStyle['--json-table-primitive-teaser-max-heigth'] = maxHeight;
        this.updateStyles();
      }
    });
  </script>
</dom-module>
<!--
`<json-table-array>` element displays array structure in a table.

### Example
```
<json-table-array json="[...]"></json-table-array>
```

### Styling
`<json-table-array>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--json-table-array` | Mixin applied to the element | `{}`

@element json-table-array
@demo demo/index.html
-->
<dom-module id="json-table-array" assetpath="bower_components/json-table/">
  <template>
    <style>
     :host {
      display: block;

      --table-actions-label-color: rgba(0, 0, 0, 0.74);
      --table-actions-label-font-size: 14px;

      --paper-dropdown-menu: {
        width: 70px;
      };

      --paper-dropdown-menu-input: {
        text-align: right;
      };

      --paper-input-container-underline: {
        border-bottom-color: transparent;
      };

      --paper-input-container-underline-focus: {
        border-bottom-color: transparent;
      };
    }

    paper-dropdown-menu {
      --paper-input-container-input: {
        @apply(--arc-font-body1);
        color: var(--table-actions-label-color);
        font-size: var(--table-actions-label-font-size);
      };
    }

    table {
      border-collapse: collapse;
    }

    th {
      white-space: nowrap;
      text-align: left;
      padding: 8px 16px;
      @apply(--arc-font-body);
      font-size: 14px;
      color: var(--json-table-array-header-color, #58595A);
      border-bottom: 3px #e8e9ea solid;
    }

    td {
      min-width: 60px;
      padding: 8px 16px;
      word-break: normal;
      vertical-align: top;
      border-bottom: 1px #E8E9EA solid;
      @apply(--arc-font-body);
      font-size: 14px;
      color: var(--json-table-array-body-color, #121314);
    }

    *[hidden] {
      display: none;
    }

    .enum-value {
      display: block;
      padding: 4px 0;
      margin: 4px 0;
    }

    .enum-value::after {
      content: ',';
      color: rgba(0, 0, 0, 0.54);
    }

    .enum-value:last-of-type::after {
      content: ''
    }

    .toggle-view {
      font-size: inherit;
      color: inherit;
      margin-top: 12px;
      display: block;
      white-space: nowrap;
    }

    .toggle-view.active {
      display: inline-block;
      margin-top: 0;
    }

    .table-actions {
      height: 56px;
      @apply(--layout-horizontal);
      /*@apply(--layout-end-justified);*/
      @apply(--layout-center);
      @apply(--arc-font-body1);
      font-size: var(--table-actions-label-font-size);
      color: var(--table-actions-label-color);
    }

    .page-items-count-selector,
    .page-count {
      margin-right: 32px;
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }
    </style>
    <template is="dom-if" if="[[paginate]]">
      <div class="table-actions">
        <div class="page-items-count-selector">
          <span class="page-items-count-label">Items per page</span>
          <paper-dropdown-menu no-label-float="">
            <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{itemsPerPage}}">
              <paper-item data-value="10">10</paper-item>
              <paper-item data-value="15">15</paper-item>
              <paper-item data-value="20">20</paper-item>
              <paper-item data-value="25">25</paper-item>
              <paper-item data-value="50">50</paper-item>
              <paper-item data-value="100">100</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div class="page-count">
          [[startItemLabel]]-[[endItemLabel]] of [[maxItemsLabel]]
        </div>
        <div class="page-paginators">
          <paper-icon-button icon="arc:chevron-left" on-tap="previousPage" disabled="[[_isDisabedPrevious(page)]]"></paper-icon-button>
          <paper-icon-button icon="arc:chevron-right" on-tap="nextPage" disabled="[[_isDisabedNext(maxItemsLabel, endItemLabel)]]"></paper-icon-button>
        </div>
      </div>
    </template>
    <table>
      <template is="dom-if" if="[[hasColumns]]">
        <thead>
          <tr>
            <template is="dom-repeat" items="[[columns]]">
              <th>[[item]]</th>
            </template>
          </tr>
        </thead>
      </template>
      <tbody>
        <template is="dom-repeat" items="[[display]]" as="displayItem" initial-count="10">
          <tr>
            <template is="dom-repeat" items="[[columns]]" as="column">
              <td>
                <template is="dom-if" if="[[_isPrimitive(displayItem, column)]]">
                  <json-table-primitive-teaser class="primitive-value">[[_getValue(displayItem, column)]]</json-table-primitive-teaser>
                </template>
                <template is="dom-if" if="[[_isObject(displayItem, column)]]">
                  <!-- <span class="object-info"><span class="object-label" object>Object</span> <a href="#" class="toggle-view" data-target="object" on-tap="_toggleItem">show object</a></span> -->
                  <!-- <template is="dom-if" if="[[false]]" object> -->
                    <json-table-object json="[[_getValue(displayItem, column)]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-object>
                  <!-- </template> -->
                </template>
                <template is="dom-if" if="[[_isEnum(displayItem, column)]]">
                  <template is="dom-repeat" items="[[_getValue(displayItem, column)]]">
                    <span class="enum-value">[[item]]</span>
                  </template>
                </template>
                <template is="dom-if" if="[[_isArray(displayItem, column)]]" restamp="true">
                  <span class="object-info"><span class="object-label" array="">Array ([[_computeValueSize(displayItem, column)]])</span> <a href="#" class="toggle-view" data-target="array" on-tap="_toggleItem">show array</a></span>
                  <template is="dom-if" if="[[false]]" array="">
                    <json-table-array json="[[_getValue(displayItem, column)]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-array>
                  </template>
                </template>
              </td>
            </template>
          </tr>
        </template>
      </tbody>
    </table>
    <template is="dom-if" if="[[paginate]]">
      <div class="table-actions">
        <div class="page-items-count-selector">
          <span class="page-items-count-label">Items per page</span>
          <paper-dropdown-menu no-label-float="">
            <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{itemsPerPage}}">
              <paper-item data-value="10">10</paper-item>
              <paper-item data-value="15">15</paper-item>
              <paper-item data-value="20">20</paper-item>
              <paper-item data-value="25">25</paper-item>
              <paper-item data-value="50">50</paper-item>
              <paper-item data-value="100">100</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div class="page-count">
          [[startItemLabel]]-[[endItemLabel]] of [[maxItemsLabel]]
        </div>
        <div class="page-paginators">
          <paper-icon-button icon="arc:chevron-left" on-tap="previousPage" disabled="[[_isDisabedPrevious(page)]]"></paper-icon-button>
          <paper-icon-button icon="arc:chevron-right" on-tap="nextPage" disabled="[[_isDisabedNext(maxItemsLabel, endItemLabel)]]"></paper-icon-button>
        </div>
      </div>
    </template>
  </template>
  <script>
  Polymer({
    is: 'json-table-array',

    behaviors: [ArcBehaviors.JsonTableBehavior],

    properties: {
      // An object to render.
      json: {
        type: Array,
        observer: '_jsonChanged'
      },
      // List of computed column names
      columns: {
        type: Array,
        readOnly: true,
        observer: '_columnsChanged'
      },
      // True if columns list is available.
      hasColumns: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      // data model created from the `json` attribute.
      display: {
        type: Array,
        readOnly: true
      },
      // A label for start index in pagination (1-based)
      startItemLabel: {
        type: Number,
        readOnly: true
      },
      // A label for end index in pagination (1-based)
      endItemLabel: {
        type: Number,
        readOnly: true
      },
      // A label for end index in pagination (1-based)
      maxItemsLabel: {
        type: Number,
        readOnly: true
      }
    },

    observers: [
      '_computeDisplay(json, paginate, page, itemsPerPage)'
    ],
    /**
     * Creates a data model from the `json` property.
     *
     * TODO: This should be a deep data observer to update only the portion of the model that
     * actually has changed.
     */
    _jsonChanged: function(json) {
      if (!json) {
        this._setDisplay(undefined);
        this._setColumns(undefined);
        return;
      }
      var names = this._computeColumns(json);
      this._setColumns(names);
    },

    _computeDisplay: function(json, paginate, page, itemsPerPage) {
      if (!json) {
        return;
      }
      var maxInxdex = json.length - 1;
      if (maxInxdex === -1) {
        return;
      }
      if (maxInxdex <= itemsPerPage && this.paginate) {
        return this.set('paginate', false);
      }
      var startIndex = paginate ? (page * itemsPerPage) : 0;
      if (maxInxdex < startIndex) {
        return;
      }
      var endIndex = paginate ? Math.min(startIndex + itemsPerPage - 1, maxInxdex) : maxInxdex;
      var result = [];
      for (var i = startIndex; i <= endIndex; i++) {
        result.push(this.getItemModel(json[i]));
      }
      this._setDisplay(result);
      this._setStartItemLabel(startIndex + 1);
      this._setEndItemLabel(Math.min(endIndex + 1, maxInxdex));
      this._setMaxItemsLabel(maxInxdex);
    },
    /**
     * Computes the list of column names for the table.
     * It will contain all properties keys fond in the array.
     */
    _computeColumns: function(json) {
      if (this.isEnum(json)) {
        // no column names
        return;
      }
      var columnNames = [];
      json.forEach(function(value) {
        if (this.isObject(value)) {
          var names = Object.keys(value);
          for (var i = 0, len = names.length; i < len; i++) {
            if (columnNames.indexOf(names[i]) === -1) {
              columnNames.push(names[i]);
            }
          }
        }
      }, this);
      return columnNames.length ? columnNames : undefined;
    },
    // Sets the `hasColumns` property when columns array change
    _columnsChanged: function(columns) {
      if (columns && columns.length) {
        this._setHasColumns(true);
      } else {
        this._setHasColumns(false);
      }
    },
    // Checks if passed `item` is a primitive
    _isPrimitive: function(item, column) {
      if (!item || !item.value || !column) {
        return false;
      }
      if (!(column in item.value)) {
        return false;
      }
      var obj = item.value[column];
      return this.isPrimitive(obj);
    },

    _isObject: function(item, column) {
      if (!item || !item.value || !column) {
        return false;
      }
      if (!(column in item.value)) {
        return false;
      }
      var obj = item.value[column];
      return this.isObject(obj);
    },

    _isEnum: function(item, column) {
      if (!item || !item.value || !column) {
        return false;
      }
      if (!(column in item.value)) {
        return false;
      }
      var obj = item.value[column];
      return this.isArray(obj) && this.isEnum(obj);
    },

    _isArray: function(item, column) {
      if (!item || !item.value || !column) {
        return false;
      }
      if (!(column in item.value)) {
        return false;
      }
      var obj = item.value[column];
      return this.isArray(obj) && !this.isEnum(obj);
    },

    _getValue: function(item, column) {
      if (!item || !item.value || !column) {
        return;
      }
      if (!(column in item.value)) {
        return;
      }
      return item.value[column];
    },

    _toggleItem: function(e) {
      e.preventDefault();
      var cell;
      e = Polymer.dom(e);
      var currentElement = e.localTarget;
      var targetAnchor = e.localTarget;
      var templateTarget = currentElement.dataset.target;
      while (true) {
        if (currentElement.nodeName === 'TD') {
          cell = currentElement;
          break;
        }
        currentElement = currentElement.parentElement;
        if (!currentElement) {
          throw new Error('Couldn\'t find table cell in the event path.');
        }
      }
      var tpl = cell.querySelector('template[' + templateTarget + ']');
      var label = cell.querySelector('.object-label[' + templateTarget + ']');
      tpl.if = !tpl.if;
      if (tpl.if) {
        e.localTarget.textContent = 'hide ' + templateTarget;
        label.setAttribute('hidden', true);
        targetAnchor.classList.add('active');
      } else {
        e.localTarget.textContent = 'show ' + templateTarget;
        label.removeAttribute('hidden');
        targetAnchor.classList.remove('active');
      }
    },
    /**
     * When pagination is enabled this will increase page number.
     * This will do nothing if pagination isn't enabled or there's no next page of results to
     * display.
     */
    nextPage: function() {
      var maxIndex = this.maxItemsLabel;
      var endIndex = this.endItemLabel;
      if (maxIndex <= endIndex) {
        return false;
      }
      this.page++;
    },
    /**
     * When pagination is enabled this will decrease page number.
     * This will do nothing if pagination isn't enabled or there's no previous page of results to
     * display.
     */
    previousPage: function() {
      if (!this.paginate || this.page === 0) {
        return;
      }
      this.page--;
    },
    /**
     * Computes if the previous page button for the pagination should be disabled.
     *
     * @param {Number} page Current page index
     * @return {Boolean} true if there's previous page of the results
     */
    _isDisabedPrevious: function(page) {
      return page === 0;
    },

    _isDisabedNext: function(maxItemsLabel, endItemLabel) {
      if (maxItemsLabel <= endItemLabel) {
        return true;
      }
      return false;
    },

    _computeValueSize: function(item, column) {
      var value = this._getValue(item, column);
      return value && value.length || 0;
    }
  });
  </script>
</dom-module>
<!--
`<json-table-object>` element displays object structure.

### Example
```
<json-table-object json="{...}"></json-table-object>
```

### Styling
`<json-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--json-table-object` | Mixin applied to the element | `{}`

@element json-table-object
@demo demo/index.html
-->
<dom-module id="json-table-object" assetpath="bower_components/json-table/">
  <template>
    <style>
      :host {
        display: block;
        --json-table-property-name-width: auto;
      }

      .item {
        @apply(--layout-horizontal);
        min-height: 24px;
        padding: 8px 0;
        border-bottom: 1px var(--json-table-item-border-bottom-color, rgba(0, 0, 0, 0.12)) solid;
      }

      .item.array,
      .item.object {
        @apply(--layout-vertical);
      }

      .item:last-of-type {
        border-bottom: none;
      }

      .property-name {
        /*width: var(--json-table-list-property-name-width, 160px);
        min-width: var(--json-table-list-property-name-width, 160px);*/
        color: var(--json-table-list-property-name-color, rgba(0,0,0,0.54));
        word-break: break-all;
        margin-right: 12px;
        padding-right: 12px;
        white-space: normal;
        word-break: normal;
        margin: 8px 12px 8px 0;
      }

      .property-value {
        @apply(--layout-flex);
        word-wrap: normal;
        overflow: auto;

      }

      .object .property-value,
      .array .property-value {
        overflow: visible;
      }

      .object .property-value {
        margin-left: var(--json-table-indent-size, 12px);
      }

      .object .property-name,
      .array .property-name  {
        font-weight: 600;
        width: auto;
        min-width: auto;
      }

      json-table-object,
      json-table-array {
        overflow: auto;
      }

      :host > .object > .property-name,
      :host > .array > .property-name {
        color: #000;

      }

      .enum-value {
        display: block;
      }

      .enum-value::after {
        content: ',';
        color: rgba(0, 0, 0, 0.54);
      }

      .enum-value:last-of-type::after {
        content: ''
      }

      .object-label,
      .array-label {
        color: #58595A;
      }
    </style>
    <template is="dom-repeat" items="[[display]]">
      <div class$="item [[_computeItemClass(item.*)]]">
        <div class="property-name">
          [[item.key]]
          <template is="dom-if" if="[[item.isObject]]">
            <span class="object-label">(Object)</span>
          </template>
          <template is="dom-if" if="[[_isEnumOrArray(item.*)]]">
            <span class="array-label">(Array [[_computeArraySize(item.*)]])</span>
          </template>
        </div>
        <div class="property-value">
          <template is="dom-if" if="[[item.isObject]]">
            <json-table-object json="[[item.value]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-object>
          </template>
          <template is="dom-if" if="[[item.isEnum]]">
            <template is="dom-repeat" items="[[item.value]]">
              <span class="enum-value">[[item]]</span>
            </template>
          </template>
          <template is="dom-if" if="[[item.isArray]]">
            <div class="array-wrapper">
              <json-table-array json="[[item.value]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-array>
            </div>
          </template>
          <template is="dom-if" if="[[item.isPrimitive]]">
            <json-table-primitive-teaser class="primitive-value">[[item.value]]</json-table-primitive-teaser>
          </template>
        </div>
      </div>
    </template>
  </template>
  <script>
    Polymer({
      is: 'json-table-object',

      behaviors: [ArcBehaviors.JsonTableBehavior],

      properties: {
        // An object to render.
        json: {
          type: Object,
          observer: '_jsonChanged'
        },
        // data model created from the `json` attribute.
        display: {
          type: Array,
          readOnly: true
        }
      },
      /**
       * Creates a data model from the JSON object.
       * The element is only interested in first level properties. Other properties will be rendered
       * by child elements.
       *
       * TODO: This should be a deep data observer to update only the portion of the model that
       * actually has changed.
       */
      _jsonChanged: function(json) {
        if (!json) {
          return this._setDisplay(undefined);
        }
        var names = Object.keys(json);
        var model = names.map(function(key) {
          return this.getPropertyModel(key, json[key]);
        }, this);
        this._setDisplay(model);
      },

      _computeItemClass: function(record) {
        if (!record || !record.base) {
          return;
        }
        var item = record.base;
        if (item.isArray/* || item.isEnum*/) {
          return 'array';
        }
        if (item.isEnum) {
          return 'enum';
        }
        if (item.isObject) {
          return 'object';
        }
      }
    });
  </script>
</dom-module>
<!--
`<json-table>` A table view from the JSON structure.

The element will render a table and / or list view from the JSON object.
If give JSON is am array it will display a table. For objects it will display list view.

Complex object will be represented as a embedded view of the list / table inside the parent object
representation. That may create very complex structure and lead to performance issues when computing
data model and building the DOM. Therefore the element will only build the first level of the view.
If the object / array contains other objects / arrays it will show only a button to display embeded
objects. That should prohibit from freezing the UI while rendering the view.

Another optimization is pagination (disabled by default). After setting the `paginate` property
array tables will contain a pagination with `itemsPerPage` items rendered at a time. The user can
change number of items at any time.

### Example
```
<json-table json="[...]" paginate items-per-page="15"></json-table>
```
## Content actions
The element can render an actions pane above the table / list view. Action pane is to
display content actions that is relevant in context of the content displayed
below the buttons. It should be icon buttons list or just buttons added to this view.

Buttons must have `content-action` property set to be included to this view.

```
<json-table json='{"json": "test"}'>
  <paper-icon-button content-action title="Copy content to clipboard" icon="arc:content-copy"></paper-icon-button>
</json-table>
```

### Styling
`<json-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--json-table` | Mixin applied to the element | `{}`
`--json-table-main-array-wrapper` | Mixin applied to the top level array's table view. This element has `overflow` property set.  | `{}`
`--json-table-item-border-bottom-color` | Color of the bottom border in the array able items or in the object list row | `rgba(0, 0, 0, 0.12)`
`--json-table-list-property-name-width` | Width of the property name for the list view for the object display | `120px`
`--json-table-array-header-color` | Color of the array table header labels | ``
`--json-table-array-body-color` | Color of the array table body values | ``

@group UI Elements
@element json-table
@demo demo/index.html
-->
<dom-module id="json-table" assetpath="bower_components/json-table/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--json-table);
    }

    .array-wrapper {
      @apply(--layout-horizontal);
      overflow-y: hidden;
      overflow-x: auto;
      @apply(--json-table-main-array-wrapper);
    }

    json-table-array {
      @apply(--layout-flex);
    }

    .actions-panel {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-raw-viewer-action-bar);
    }
    </style>
    <div class="actions-panel">
      <content select="[content-action]"></content>
    </div>
    <template is="dom-if" if="[[isArray(_renderJson)]]" restamp="true">
      <div class="array-wrapper">
        <json-table-array json="[[_renderJson]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-array>
      </div>
    </template>
    <template is="dom-if" if="[[isObject(_renderJson)]]" restamp="true">
      <json-table-object json="[[_renderJson]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-object>
    </template>
  </template>
  <script>
  Polymer({
    is: 'json-table',

    behaviors: [ArcBehaviors.JsonTableBehavior],

    properties: {
      /**
       * JSON data to display.
       * If provided data is type of string then it will use the `JSON.stringify` function to
       * create a JavaScript object from string.
       */
      json: {
        type: Object,
        observer: '_jsonChanged'
      },
      // A copy of the `json` object so it can be altered by the element.
      _renderJson: Object,
      /**
       * Will be set to true if the passed `json` is a string and it's not valid JSON.
       */
      parserError: {
        type: Boolean,
        value: false,
        readOnly: true
      }
    },
    // Handler for `json` attribute value change.
    _jsonChanged: function(json) {
      this._setParserError(false);
      this.set('_renderJson', undefined);
      if (!json) {
        return this.set('_renderJson', undefined);
      }
      if (typeof json === 'string') {
        try {
          json = JSON.parse(json);
          // No need for copy.
          return this._setRenderJson(json);
        } catch (e) {
          this._setParserError(true);
          return;
        }
      }
      if (this.isArray(json)) {
        this._setRenderJson(Array.from(json));
      } else {
        this._setRenderJson(Object.assign({}, json));
      }
    },

    _setRenderJson: function(json) {
      this.async(function() {
        this.set('_renderJson', json);
      }, 1);
    }
  });
  </script>
</dom-module>
<!--
An element to display an example item.

## Usage
```
<example-display content="[[json]]" is-json></example-display>
```

-->
<dom-module id="example-display" assetpath="bower_components/docs-parameters-table/">
  <template strip-whitespace="">
    <style>
    *[hidden] {
      display: none;
    }
    </style>
    <div class="example-actions">
      <paper-icon-button icon="arc:content-copy" title="Copy example to clipboard" on-tap="_copyToClipboard"></paper-icon-button>
      <template is="dom-if" if="[[isJson]]">
        <paper-icon-button icon="arc:view-column" title="Toggle table view" active="[[table]]" toggles="" on-tap="toggleTable"></paper-icon-button>
      </template>
    </div>
    <template is="dom-if" if="[[!table]]">
      <pre is="structure-display" display="[[content]]" class="language-javascript" auto-hide=""></pre>
    </template>
    <template is="dom-if" if="[[_computeDisplayTable(isJson, table)]]">
      <json-table json="[[content]]"></json-table>
    </template>
    <clipboard-copy content="[[content]]"></clipboard-copy>
  </template>
  <script>
    Polymer({
      is: 'example-display',
      /**
       * Fired when the `table` property change to inform other elements to switch
       * corresponding view as well.
       *
       * @event json-table-state-changed
       * @param {Boolean} enabled If true then the view is enabled.
       */
      properties: {
        // A content to display.
        content: String,
        // If true it will add control to display JSON in table view.
        isJson: {
          type: Boolean,
          observer: '_isJsonChanged'
        },
        /**
         * If true it will display a table view instead of JSON code.
         * `isJson` must be set to use this option.
         */
        table: {
          type: Boolean,
          observer: '_tableChanged'
        }
      },

      attached: function() {
        this.listen(window, 'storage', '_onStorageChanged');
        this.listen(window, 'json-table-state-changed', '_onJsonTableStateChanged');
      },

      detached: function() {
        this.unlisten(window, 'storage', '_onStorageChanged');
        this.unlisten(window, 'json-table-state-changed', '_onJsonTableStateChanged');
      },

      /**
       * Coppies current response text value to clipboard.
       */
      _copyToClipboard: function(e) {
        var button = Polymer.dom(e).localTarget;
        var copy = this.$$('clipboard-copy');
        if (copy.copy()) {
          button.icon = 'arc:done';
        } else {
          button.icon = 'arc:error';
        }
        this.async(function() {
          this._resetCopyButtonState(button);
        }, 1000);
      },
      _resetCopyButtonState: function(button) {
        button.icon = 'arc:content-copy';
      },
      // Toggles the JSON table view
      toggleTable: function() {
        this.table = !this.table;
      },
      /**
       * Handler for the isJson property change.
       * Sets the `table` property depending on current state saved in local storage.
       */
      _isJsonChanged: function(isJson) {
        if (!isJson) {
          return;
        }
        var isTable = this._localStorageValueToBoolean(localStorage.jsonTableEnabled);
        if (this.table !== isTable) {
          this.table = isTable;
        }
      },
      // Handler to the `table` change, fires corresponding event and sets local storage.
      _tableChanged: function(state) {
        if (state === undefined) {
          return;
        }
        if (localStorage.jsonTableEnabled !== String(state)) {
          window.localStorage.setItem('jsonTableEnabled', state);
        }
        this.fire('json-table-state-changed', {
          enabled: state
        });
      },
      /**
       * Updates the value of the `isJsonTable` property when the corresponding localStorage
       * property change.
       */
      _onStorageChanged: function(e) {
        if (e.key !== 'jsonTableEnabled') {
          return;
        }
        if (!e.newValue) {
          return;
        }
        var v = this._localStorageValueToBoolean(e.newValue);
        if (this.table !== v) {
          this.table = v;
        }
      },
      /**
       * Reads the local value (always a string) as a boolean value.
       *
       * @param {String} value The value read from the local storage.
       * @return {Boolean} Boolean value read from the value.
       */
      _localStorageValueToBoolean: function(value) {
        if (!value) {
          return false;
        }
        if (value === 'true') {
          value = true;
        } else {
          value = false;
        }
        return value;
      },
      /**
       * Handler to the incomming `json-table-state-changed` event.
       * Sets the `table` property if it is different.
       */
      _onJsonTableStateChanged: function(e) {
        if (e.target === this) {
          return;
        }
        var enabled = e.detail.enabled;
        if (enabled !== this.table) {
          this.table = enabled;
        }
      },
      /**
       * Computes if the table can be displayed.
       * The `table` property can be set even if the `is-json` is not. It's because it can be set
       * by event listener. Both arguments must be true to display the table.
       */
      _computeDisplayTable: function(isJson, table) {
        return isJson && table;
      }
    });
  </script>
</dom-module>
<!--
`<docs-json-parameters-table>` displays a documentation view for JSON structured body.

### Example
```
<docs-json-parameters-table
  type="[[ramlJsonType]]"></docs-json-parameters-table>
```

Currently following properties are supported:

- name (required) - name of the property, in case of UIR parameter it should be the parameter itself
- type - the type of the parameter, any RAML allowed value will be accepted
- description - description of the parameter
- required - mark that the property is a required property
- pattern - validation pattern to be applied to the parameter value
- example - example value of the parameter
- min - minimum value of the parametre when the type is numeric
- max - maximum value of the parametre when the type is numeric

### Styling
`<docs-json-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table rows | `rgba(0, 161, 223, 1)`
`--params-table-row-subproperty-border-color` | Border color of table row which is a description of child property. | `rgba(0, 161, 223, 0.24)`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`
`--docs-body-parameters-table-type-name` | Mixin applied to the name of the type | `{}`
`--params-table-subproperty-prefix-color` | Color of the parent property name in the subproperty list | `rgba(0, 0, 0, 0.54)`
`--no-info-message` | A mixin applied to the "missing type" paragraph. | `{}`

Use `paper-tabs`, `paper-tab` and `structure-display` mixins to style this element.

@element docs-json-parameters-table
@demo demo/docs-body-parameters-table.html
-->
<dom-module id="docs-json-parameters-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="prism-theme-default"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <style>
    :host {
      --paper-tabs-selection-bar-color: var(--params-table-header-background-color, #00A1DF);
      --paper-tab-ink: var(--params-table-header-background-color, #00A1DF);
    }

    .parent-prefix {
      color: var(--params-table-subproperty-prefix-color, rgba(0, 0, 0, 0.54));
    }

    .parent-prefix::after {
      content: '.';
    }

    paper-listbox paper-item {
      cursor: pointer;
    }

    .no-type {
      @apply(--no-info-message);
    }

    </style>
    <prism-highlighter></prism-highlighter>

    <p class="no-type" hidden$="[[!_computeIsTypeVisible(hasExamples, hasType)]]">
      This object doesn't have a type description.
    </p>

    <div id="content" hidden$="[[_computeIsTypeVisible(hasExamples, hasType)]]">
      <template is="dom-if" if="[[_displayTypeOnly(hasType, hasExamples)]]" restamp="true">
        <iron-collapse opened="[[structureDisplayOpened]]">
          <div>
            <pre is="structure-display" display="[[displayJson]]" class="language-javascript" auto-hide=""></pre>
          </div>
        </iron-collapse>
      </template>
      <template is="dom-if" if="[[_displayExampleOnly(hasType, hasExamples)]]" restamp="true">
        <iron-collapse opened="[[structureDisplayOpened]]">
          <div class="examples">
            <template is="dom-repeat" items="[[examples]]">
              <example-display is-json="" content="[[item]]"></example-display>
            </template>
          </div>
        </iron-collapse>
      </template>
      <template is="dom-if" if="[[_displayTypeAndExample(hasType, hasExamples)]]" restamp="true">
        <iron-collapse opened="[[structureDisplayOpened]]">
          <div>
            <paper-tabs class="schemas" selected="{{selectedSchemaPage}}">
              <paper-tab>[[_getTypeTabName(isSchema)]]</paper-tab>
              <paper-tab>Examples</paper-tab>
            </paper-tabs>
            <iron-pages selected="{{selectedSchemaPage}}">
              <div class="schema">
                <h5 hidden$="[[!type.schema]]">Schema: [[type.schema]]</h5>
                <pre is="structure-display" display="[[displayJson]]" class="language-javascript" auto-hide=""></pre>
              </div>
              <div class="examples">
                <template is="dom-repeat" items="[[examples]]">
                  <example-display is-json="" content="[[item]]"></example-display>
                </template>
              </div>
            </iron-pages>
          </div>
        </iron-collapse>
      </template>
      <h5 class="narrow-title">Properties</h5><table class="params-table" hidden$="[[_parametersTableHidden(isSchema, hasType)]]">
        <thead class="params-table-header">
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        
        <tbody id="tableContent"></tbody>
      </table>
    </div>
  </template>
  <script>
  (function() {
  var ce = function(el) {
    return document.createElement(el);
  };
  Polymer({
    is: 'docs-json-parameters-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * A RAML's type definition for the body payload.
       */
      type: Object,
      // True when `type` is present
      hasType: {
        type: Boolean,
        computed: '_computeHasType(type.*)',
        value: false,
        notify: true
      },
      // // Display name of the property.
      // displayName: {
      //   type: String,
      //   computed: '_computeDisplayName(type.*)'
      // },
      // JSON created from the type definition
      displayJson: {
        type: String,
        computed: '_computeDisplayJson(type.*)'
      },
      /**
       * A list of examples in the definition.
       * This is a computed value for both `example` and `examples` properties.
       */
      examples: {
        type: Array,
        computed: '_computeExamples(type.*)'
      },
      // Selected page in the tabs (where examples exists for this page)
      selectedSchemaPage: {
        type: Number,
        value: 0
      },
      // Will be set to true
      isSchema: Boolean,
      // If true then the schema / sxamples section is displayed.
      structureDisplayOpened: {
        type: Boolean,
        value: true
      },

      // If true then the narrow layout is applied.
      narrow: {
        type: Boolean,
        reflectToAttribute: true
      }
    },

    observers: [
      '_computeHTML(hasType, type.*)',
      '_updateTabs(hasExamples)'
    ],

    listeners: {
      'content.iron-select': '_typeDropdownChanged',
      'content.iron-deselect': '_typeDropdownChanged',
    },

    _computeHasType: function(record) {
      if (!record.base) {
        this.isSchema = false;
        return false;
      }
      var object = record.base;
      if (object.schema) {
        this.isSchema = true;
        return !!object.schemaContent;
      }
      this.isSchema = false;
      if (object.type === 'array') {
        return !!object.items;
      } else if (object.type === 'union') {
        return !!(object.anyOf && object.anyOf.length);
      } else if (object.type === 'json') {
        this.isSchema = true;
        return !!(object.content);
      }
      var hasType = !!(object.properties && Object.keys(object.properties).length);
      return hasType;
    },

    _computeDisplayJson: function(record) {
      if (!record || !record.base) {
        return;
      }

      if (record.base.schema) {
        return record.base.schemaContent;
      }
      if (record.base.type instanceof Array) {
        record.base.type = record.base.type[0];
      }
      if (record.base.type === 'json') {
        return record.base.content;
      }

      var properties = record.base.properties;
      var isArray = false;
      var hasProperties = !!(properties && Object.keys(properties).length);

      if (!hasProperties) {
        if (record.base.type === 'array') {
          properties = record.base.items.properties;
          isArray = true;
          hasProperties = !!(properties && Object.keys(properties).length);
        } else if (record.base.type === 'union') {
          // just pass to the next block.
        } else {
          return undefined;
        }
      }
      var data = hasProperties ? this.__transformObject({}, properties) : {};
      var self = this;
      if (record.base.type === 'union') {
        var ut = [];
        record.base.anyOf.forEach(function(item) {
          var _props = self.__transformObject({}, item.properties, true);
          ut[ut.length] = _props;
        });
        data = Object.assign(data, ut[0]);
      }
      if (isArray) {
        data = [data];
      }
      return JSON.stringify(data, null, 2);
    },

    _computeHasExample: function() {
      // example can be an array
      var t = this.type;
      if (!t) {
        return false;
      }
      if (!t.examples && t.example) {
        t.examples = [t.example];
      }
      return !!(t.structuredExample || (t.examples && t.examples.length));
    },

    __transformObject: function(base, obj) {
      var bt = this.baseTypes;

      for (var i = 0, len = obj.length; i < len; i++) {
        var item = obj[i];
        var type = item.type;
        var structure;

        if (type instanceof Array) {
          type = type[0];
          obj.type = type;
        }
        if (bt.indexOf(type) === -1) {
          // other type defined in RAML
          if (item.properties) {
            structure = this.__transformObject({}, this.readProperties(item.properties));
          } else {
            structure = type;
          }
        } else if (type === 'object' && item.properties) {
          structure = this.__transformObject({}, this.readProperties(item.properties));
        } else if (type === 'array') {
          if (item.items.type instanceof Array) {
            item.items.type = item.items.type[0];
          }
          if (typeof item.items === 'string') {
            structure = [item.items];
          } else if (item.items.type === 'object') {
            structure = [this.__transformObject({},
              this.readProperties(item.items.properties))];
          } else {
            structure = [item.items.type];
          }
        } else {
          structure = type; //item.example || type;
        }

        base[item.key] = structure;
      }
      return base;
    },

    _computeHTML: function(hasType) {
      if (!hasType || !this.type) {
        return;
      }
      // this.$$('#tableContent').innerHTML = '';
      this.debounce('body-params-table-render', function() {
        this.$$('#tableContent').innerHTML = '';
        this.__computeHtml(this.type);
      }.bind(this), 100);
    },

    __computeUnionTypes: function(object) {
      var names = {};
      if (object.anyOf && object.anyOf.length) {
        for (var i = 0, len = object.anyOf.length; i < len; i++) {
          for (var j = 0, pLen = object.anyOf[i].properties.length; j < pLen; j++) {
            if (!(object.anyOf[i].properties[j].name in names)) {
              names[object.anyOf[i].properties[j].name] = true;
            }
          }
        }
      }
      return Object.keys(names);
    },
    /**
     * Compyte HTML value for the table.
     * It can't be done using templates because of the nested structure of the properties.
     *
     * @param {Array} props Object properties from which to create each row of the table
     * @param {DocumentFragment?} f Document fragmet to which append elements
     * @param {Object?} parent Parent for current properties. Note that it may not be actual
     * parent object for the properties. For example, in case of union types it will be
     * parent that holds union and not the atual parent object for the properties.
     * @param {Object?} immidietParent Set when `parent` is not immidiet parent of the properties.
     */
    __computeHtml: function(object, opts) {
      if (!object) {
        return;
      }
      opts = opts || {};
      var tr;
      var i;
      var len;
      var property;
      var options;
      var  tableContent = this.$$('#tableContent');
      if (this.baseTypes.indexOf(object.type) !== -1 &&
        object.type !== 'object' &&
        object.type !== 'array') {
        tr = this.__createRowForItem(object, opts);
        tableContent.appendChild(tr);
        return;
      }

      if (object.properties && object.properties.length) {
        for (i = 0, len = object.properties.length; i < len; i++) {
          property = object.properties[i];
          this.__handleHtmlDocProperty(property, opts);
        }
      }

      if (object.items && object.items.properties && object.items.properties.length) {
        var isEmptyTable = tableContent.firstChild === null;
        if (isEmptyTable) {
          tr = this.__createArrayHeaderRow(object, opts);
          var currentCopy = Object.assign({}, object);
          currentCopy.displayName = 'item';
          options = Object.assign({}, opts, {
            parent: currentCopy
          });
        } else {
          tr = this.__createRowForItem(object, opts);
          options = Object.assign({}, opts, {
            parent: object
          });
        }
        tableContent.appendChild(tr);

        for (i = 0, len = object.items.properties.length; i < len; i++) {
          property = object.items.properties[i];
          this.__handleHtmlDocProperty(property, options);
        }
      }
      if (object.type === 'union') {
        if (!object.anyOf.length) {
          return;
        }
        tr = this.__createRowForUnion(object.anyOf.length);
        tableContent.appendChild(tr);
        for (i = 0, len = object.anyOf.length; i < len; i++) {
          for (var j = 0, pLen = object.anyOf[i].properties.length; j < pLen; j++) {
            property = object.anyOf[i].properties[j];
            options = {
              inUnion: true,
              parent: opts.parent || object,
              variantIndex: i,
              childIndex: j
            };
            this.__handleHtmlDocProperty(property, options);
          }
        }
      }
    },

    __handleHtmlDocProperty: function(property, opts) {
      opts = opts || {};
      var hasChildren = false;
      if (property.properties || property.items) {
        hasChildren = true;
      }
      var options;
      var tr = this.__createRowForItem(property, opts);
      this.$$('#tableContent').appendChild(tr);
      if (hasChildren) {
        var children = property.properties || property.items.properties || property.items;
        if (children instanceof Array) {
          for (var j = 0, cLen = children.length; j < cLen; j++) {
            options = Object.assign({}, opts, {
              parent: property,
              hasChildren: hasChildren
            });
            this.__computeHtml(children[j], options);
          }
        } else if (typeof children === 'string') {
          //
        } else {
          if (children.type === 'any' && !children.enum) {
            return;
          }
          if (children.name !== (property.name || property.key)) {
            options = Object.assign({}, opts, {
              parent: property,
              hasChildren: hasChildren
            });
            this.__computeHtml(children, options);
          }
        }
      }
    },

    __createRowForItem: function(item, opts) {
      opts = opts || {};
      if (typeof item === 'string') {
        return;
      }

      var tr = ce('tr');
      var td1 = ce('td');
      var td2 = ce('td');
      var td3 = ce('td');
      var sp1 = ce('span');

      var clsPrefix = 'style-scope docs-json-parameters-table';
      tr.className = clsPrefix;
      td1.className = clsPrefix + ' param-name';
      td2.className = clsPrefix + ' param-type';
      td3.className = clsPrefix + ' param-desc';
      sp1.className = clsPrefix + ' display';

      var fillParentInfo = true;
      if (opts.inUnion) {
        tr.dataset.parent = opts.variantIndex;
        tr.setAttribute('hidden', true);
        if (opts.parent.anyOf) { //[opts.variantIndex].properties[opts.childIndex] === item
          sp1.textContent = item.key;
          fillParentInfo = false;
        }
      }

      if (opts.parent) {
        if (fillParentInfo) {
          td1.className += ' subproperty';
          sp1.className += ' child';
          var spParent = ce('span');
          var spChild = ce('span');
          spParent.className = clsPrefix + ' parent-prefix';
          spParent.textContent = opts.parent.displayName || opts.parent.name || opts.parent.key;
          spChild.textContent = item.key || item.name || item.displayName;
          sp1.appendChild(spParent);
          sp1.appendChild(spChild);
          tr.className += ' subproperty';
        }
      } else {
        sp1.textContent = item.key;
      }

      if (opts.hasChildren) {
        tr.className += ' has-children';
      }

      if (item.type === 'array') {
        var name = '';
        if (typeof item.items === 'string') {
          name += 'Array[' + item.items + ']';
        } else if (!item.items.properties || !item.items.displayName) {
          name += 'Array[' + (item.items.type || 'any') + ']';
        } else {
          name += item.items.displayName + '[' + item.items.type + ']';
        }
        td2.textContent = name;
      } else if (item.type === 'any' && item.enum) {
        td2.textContent = 'Enum';
      } else {
        td2.textContent = item.type === 'object' ?
          (item.displayName || item.type) : item.type;
      }

      if (item.description) {
        var marked = ce('marked-element');
        var htmlBody = ce('div');
        marked.className = clsPrefix + '';
        marked.setAttribute('smartypants', true);
        marked.addEventListener('marked-render-complete', this._markedRendered.bind(this));
        htmlBody.className = clsPrefix + ' markdown-html markdown-body';
        marked.appendChild(htmlBody);
        td3.appendChild(marked);
        marked.markdown = item.description;
      }
      if (item.pattern) {
        var pattern = this.__createCellProperty('pattern', 'Validation pattern:', item.pattern);
        td3.appendChild(pattern);
      }
      if (item.example) {
        var example = this.__createCellProperty('example', 'Example:', item.example);
        td3.appendChild(example);
      }
      if (item.min || item.min === 0) {
        var min = this.__createCellProperty('min', 'Minimum value:', item.min);
        td3.appendChild(min);
      }
      if (item.max || item.max === 0) {
        var max = this.__createCellProperty('max', 'Maximum value:', item.max);
        td3.appendChild(max);
      }

      if (item.enum && item.enum.length) {
        var enumValue = this.__createCellProperty('enum', 'Possible values:',
          this._computeEnumValue(item.enum));
        td3.appendChild(enumValue);
      }

      td1.appendChild(sp1);
      if (item.required) {
        var sp2 = ce('span');
        sp2.textContent = '*';
        sp2.title = sp1.title = 'Required property';
        td1.appendChild(sp2);
      }

      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      return tr;
    },

    __createArrayHeaderRow: function(item, opts) {
      var tr = ce('tr');
      var td = ce('td');

      var clsPrefix = 'style-scope docs-json-parameters-table';
      tr.className = clsPrefix;
      td.className = clsPrefix + ' param-type';

      var type;
      if (typeof item.items === 'string') {
        type = item.items;
      } else if (item.items.type) {
        type = item.items.type;
      } else {
        type = 'any';
      }
      var message = 'Array of ';
      message += type || 'any';
      message += ' items';
      td.textContent = message;
      td.colSpan = 3;
      tr.appendChild(td);
      return tr;
    },

    __createRowForUnion: function(no) {
      if (!no) {
        return console.warn('Trying to invoke row for union but number is not set');
      }
      var tr = ce('tr');
      var td1 = ce('td');
      var td2 = ce('td');
      var td3 = ce('td');
      var sp1 = ce('span');

      var cPrx = 'style-scope docs-json-parameters-table';
      tr.className = cPrx;
      td1.className = cPrx + ' param-name';
      td2.className = cPrx + ' param-type';
      td3.className = cPrx + ' param-desc';
      sp1.className = cPrx + ' display';

      sp1.textContent = 'Type variant';

      var html = '<paper-dropdown-menu no-label-float class="' + cPrx + '">';
      html += '<paper-listbox class="' + cPrx +
        ' dropdown-content" selected="0" data-action="toggle-type">';
      for (var i = 0; i < no; i++) {
        html += '<paper-item data-type="' + i + '" class="' +
          cPrx + '">Variant ' + (i + 1) + '</paper-item>';
      }
      td2.innerHTML = html;
      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      return tr;
    },

    __createCellProperty: function(name, label, value) {
      var container = ce('div');
      container.className = 'style-scope docs-json-parameters-table ' + name;
      var display = ce('span');
      var valueNode = ce('span');
      display.className = 'style-scope docs-json-parameters-table display';
      valueNode.className = 'style-scope docs-json-parameters-table value';
      display.textContent = label;
      valueNode.textContent = value;
      container.appendChild(display);
      container.appendChild(valueNode);
      return container;
    },

    _typeDropdownChanged: function(e) {
      var target = e.target;
      if (!target || !target.dataset || !target.dataset.action) {
        return;
      }
      switch (target.dataset.action) {
        case 'toggle-type':
          this._toggleType(e.detail.item.dataset.type, e.type === 'iron-select');
          break;
      }
    },

    _toggleType: function(type, visible) {
      if (!type) {
        return;
      }
      Polymer.dom(this.$$('#tableContent')).querySelectorAll('[data-parent="' + type + '"]')
        .forEach(function(node) {
          if (visible) {
            node.removeAttribute('hidden');
          } else {
            node.setAttribute('hidden', true);
          }
        });
    },

    _markedRendered: function(e) {
      e = Polymer.dom(e);
      var target = e.rootTarget;
      var p = target.querySelector('p');
      if (!p) {
        return;
      }
      p.className += ' docs-json-parameters-table';
      var div = target.querySelector('#content');
      if (!div) {
        return;
      }
      div.className += ' markdown-html markdown-body docs-json-parameters-table';
    },
    // Forces tabs redraw when tabs are rendered
    _updateTabs: function(hasExamples) {
      if (!hasExamples) {
        return;
      }
      var elm = this.$$('paper-tabs');
      if (!elm) {
        return;
      }
      elm.notifyResize();
    },
    // Computes tab name, `Type` if not schema and `Schema` otherise.
    _getTypeTabName: function(isSchema) {
      return isSchema ? 'Schema' : 'Type';
    },

    // Computes visibility of the type description.
    _computeIsTypeVisible: function(hasExamples, hasType) {
      return !(hasExamples || hasType);
    },

    _displayExampleOnly: function(hasType, hasExamples) {
      return !hasType && hasExamples;
    },

    _displayTypeOnly: function(hasType, hasExamples) {
      return hasType && !hasExamples;
    },

    _displayTypeAndExample: function(hasType, hasExamples) {
      return hasType && hasExamples;
    },

    _parametersTableHidden: function(isSchema, hasType) {
      if (isSchema) {
        return true;
      }
      return !hasType;
    }
  });
  })();
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<docs-xml-parameters-table>` displays a documentation view for XML structured body.

### Example
```
<docs-xml-parameters-table
  type="[[ramlXmlType]]"></docs-xml-parameters-table>
```

### Styling
`<docs-json-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-xml-parameters-table` | Mixin applied to this elements | `{}`
`--no-info-message` | A mixin applied to the "missing type" paragraph. | `{}`

Use `paper-tabs`, `paper-tab` and `structure-display` mixins to style this element.

@element docs-xml-parameters-table
@demo demo/docs-body-parameters-table.html
-->
<dom-module id="docs-xml-parameters-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="prism-theme-default"></style>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <style>
    :host {
      display: block;
    }

    #content {
      display: none;
    }

    :host([has-type]) #content {
      display: block;
    }

    :host([has-type]) .no-type {
      display: none;
    }

    .no-type {
      @apply(--no-info-message);
    }
    </style>
    <prism-highlighter></prism-highlighter>
    <p class="no-type">
      This object doesn't have a type description.
    </p>
    <div id="content">
      <template is="dom-if" if="[[!hasExamples]]" restamp="true">
        <iron-collapse opened="[[structureDisplayOpened]]">
          <div>
            <pre is="structure-display" display="[[schemaDisplay]]" class="language-xml" data-type="xml" auto-hide=""></pre>
          </div>
        </iron-collapse>
      </template>
      <template is="dom-if" if="[[hasExamples]]" restamp="true">
        <iron-collapse opened="[[structureDisplayOpened]]">
          <div>
            <paper-tabs class="schemas" selected="{{selectedSchemaPage}}">
              <paper-tab>Schema</paper-tab>
              <paper-tab>Examples</paper-tab>
            </paper-tabs>
            <iron-pages selected="{{selectedSchemaPage}}">
              <div class="schema">
                <h5 hidden$="[[!type.schema]]">Schema: [[type.schema]]</h5>
                <pre is="structure-display" display="[[schemaDisplay]]" class="language-xml" data-type="xml" auto-hide=""></pre>
              </div>
              <div class="examples">
                <template is="dom-repeat" items="[[examples]]">
                  <pre is="structure-display" display="[[item]]" class="language-xml" data-type="xml" auto-hide=""></pre>
                </template>
              </div>
            </iron-pages>
          </div>
        </iron-collapse>
      </template>
    </div>
  </template>
  <script>
  Polymer({
    is: 'docs-xml-parameters-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * A RAML's type definition for the body payload.
       */
      type: Object,
      // A schema to display. Computed value from provided `type` object.
      schemaDisplay: {
        type: String,
        computed: '_computeDisplay(type.*)'
      },
      // True when `type` is present
      hasType: {
        type: Boolean,
        computed: '_computeHasType(schemaDisplay)',
        value: false,
        notify: true,
        reflectToAttribute: true
      },
      /**
       * A list of examples in the definition.
       * This is a computed value for both `example` and `examples` properties.
       */
      examples: {
        type: Array,
        computed: '_computeExamples(type.*)'
      },
      // Selected page in the tabs (where examples exists for this page)
      selectedSchemaPage: {
        type: Number,
        value: 0
      },

      // If true then the narrow layout is applied.
      narrow: {
        type: Boolean,
        reflectToAttribute: true
      }
    },
    // Computed boolean value if the `type` object has XML relevant information.
    _computeHasType: function(display) {
      return !!display;
    },
    // Computes the schema content to display.
    _computeDisplay: function(record) {
      var object = record.base;
      if (!object) {
        return undefined;
      }
      if (object.schema && object.schemaContent) {
        return object.schemaContent;
      }
      if (object.type && typeof object.type === 'string') {
        return object.type;
      }
      return undefined;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<docs-form-parameters-table>` Displays a list of parameters for the
`x-www-form-urlencoded` form type.

### Example
```
<docs-form-parameters-table
  type="[[ramlType]]"></docs-form-parameters-table>
```

### Styling
`<docs-form-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table rows | `rgba(0, 161, 223, 1)`
`--params-table-row-subproperty-border-color` | Border color of table row which is a description of child property. | `rgba(0, 161, 223, 0.24)`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`
`--docs-body-parameters-table-json` | Mixin applied to the JSON output | `{}`
`--docs-body-parameters-table-type-name` | Mixin applied to the name of the type | `{}`

@element docs-json-parameters-table
@demo demo/index.html
-->
<dom-module id="docs-form-parameters-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="prism-theme-default"></style>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <style>
     :host {
      display: block;
    }
    </style>
    <template is="dom-if" if="[[hasParams]]">
      <h5 class="narrow-title">Properties</h5><table class="params-table">
        <thead class="params-table-header">
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        
        <tbody>
          <template is="dom-repeat" items="[[readProperties(type.formParameters)]]">
            <tr>
              <td class="param-name">[[item.name]]<span hidden$="[[!item.required]]">*</span></td>
              <td class="param-type">[[item.type]]</td>
              <td class="param-desc">
                <div hidden$="[[!hasValue(item.description)]]">
                  <marked-element markdown="[[item.description]]">
                    <div class="markdown-html markdown-body"></div>
                  </marked-element>
                </div>
                <div hidden$="[[!hasValue(item.pattern)]]" class="pattern">Validation pattern: <span>[[item.pattern]]</span></div>
                <div hidden$="[[!hasValue(item.example)]]" class="example">Example value: <span>[[item.example]]</span></div>
                <div hidden$="[[!hasValue(item.min)]]" class="min">Minimum value: <span>[[item.min]]</span></div>
                <div hidden$="[[!hasValue(item.max)]]" class="max">Maximum value: <span>[[item.max]]</span></div>
                <div hidden$="[[!hasValue(item.enum)]]" class="enum">Possible values: <span>[[_computeEnumValue(item.enum)]]</span></div>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </template>
  </template>
  <script>
  Polymer({
    is: 'docs-form-parameters-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * A RAML's type definition for the body payload.
       */
      type: Object,
      // True when `type` is present
      hasParams: {
        type: Boolean,
        computed: '_computeHasParams(type.*)',
        value: false,
        notify: true,
        reflectToAttribute: true
      },

      // If true then the narrow layout is applied.
      narrow: {
        type: Boolean,
        reflectToAttribute: true
      }
    },

    _computeHasParams: function(record) {
      if (!record.base) {
        return false;
      }
      var object = record.base;
      return !!(object.formParameters && Object.keys(object.formParameters).length);
    }
  });
  </script>
</dom-module>
<!--
`<docs-parameters-table>` A parameters list and description table for the RAML documentation view

This element renders a table of body type paramteres with the doccumentation.

For headers documentation table pleae, use `<docs-headers-table>` element.
For uri parameters documentation table pleae, use `<docs-parameters-table>`
element.

### Example
```
<docs-body-parameters-table
  type="[[bodType]]"></docs-body-parameters-table>
```

Currently following properties are supported:

- name (required) - name of the property, in case of UIR parameter it should be the parameter itself
- type - the type of the parameter, any RAML allowed value will be accepted
- description - description of the parameter
- required - mark that the property is a required property
- pattern - validation pattern to be applied to the parameter value
- example - example value of the parameter
- min - minimum value of the parametre when the type is numeric
- max - maximum value of the parametre when the type is numeric

### Styling
`<docs-body-parameters-table>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table's each row | `#00A1DF`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`
`--docs-body-parameters-table-json` | Mixin applied to the JSON output | `{}`
`--docs-body-parameters-table-type-name` | Mixin applied to the name of the type | `{}`
`--toggle-button` | Mixin applied to toggle button | `{}`
`--toggle-button-hover` | Mixin applied to the :hover state of toggle button | `{}`

@group RAML Elements
@element docs-parameters-table
@demo demo/docs-body-parameters-table.html
-->
<dom-module id="docs-body-parameters-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style include="prism-theme-default"></style>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <style>

    :host {
      --paper-tabs-selection-bar-color: var(--params-table-header-background-color, #00A1DF);
      --paper-tab-ink: var(--params-table-header-background-color, #00A1DF);
      display: block;
      overflow: auto;
      width: 100%;
    }

    h4 {
      padding: 0 12px;
      @apply(--docs-body-parameters-table-type-name);
    }

    paper-listbox paper-item {
      cursor: pointer;
    }

    .body-selector {
      margin: 0 12px;
    }

    .type-title {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .type-title h4 {
      @apply(--layout-flex);
    }

    .toggle-button {
      color: var(--docs-body-parameters-table-toggle-icon-color, rgba(0, 0, 0, 0.54));
      transform: rotateZ(0deg);
      transition: color 0.25s linear, transform 0.3s linear;
      @apply(--toggle-button);
    }

    .toggle-button.opened {
      transform: rotateZ(-180deg);
    }

    .toggle-button:hover {
      color: var(--docs-body-parameters-toggle-icon-hover-color, rgba(0, 0, 0, 0.78));
      @apply(--toggle-button-hover);
    }
    </style>
    <prism-highlighter></prism-highlighter>


    <paper-dropdown-menu label="Body type" hidden$="[[!displayBodySelector]]" class="body-selector">
      <paper-listbox class="dropdown-content" attr-for-selected="data-type" selected="{{selectedBodyType}}">
        <template is="dom-repeat" items="[[bodyTypes]]">
          <paper-item data-type$="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>

    <div class="type-title">
      <h4><span hidden$="[[!displayName]]">Type: [[displayName]]</span></h4>
      <paper-icon-button class$="toggle-button[[_computeToggleClass(structureDisplayOpened)]]" icon="arc:expand-more" on-tap="toggleOpened" title="Toggle structure display" hidden$="[[isFormUrlEncoded]]"></paper-icon-button>
    </div>

    <template is="dom-if" if="[[isJson]]">
      <docs-json-parameters-table type="[[selectedBody]]" has-type="{{hasTypeJson}}" structure-display-opened="[[structureDisplayOpened]]" narrow="[[narrow]]"></docs-json-parameters-table>
    </template>
    <template is="dom-if" if="[[isXml]]">
      <docs-xml-parameters-table type="[[selectedBody]]" has-type="{{hasTypeXml}}" structure-display-opened="[[structureDisplayOpened]]" narrow="[[narrow]]"></docs-xml-parameters-table>
    </template>
    <template is="dom-if" if="[[isFormUrlEncoded]]">
      <docs-form-parameters-table type="[[selectedBody]]" has-type="{{hasForm}}" structure-display-opened="[[structureDisplayOpened]]" narrow="[[narrow]]"><docs-form-parameters-table>
    </docs-form-parameters-table></docs-form-parameters-table></template>

    <iron-media-query query="max-width: 640px" query-matches="{{narrow}}"></iron-media-query>

  </template>
  <script>
  Polymer({
    is: 'docs-body-parameters-table',

    behaviors: [RamlBehaviors.DocsParametersBehavior],

    properties: {
      /**
       * An array of the `body` part of the method part of the RAML definition.
       * It is expecting to be an output of the RAML to JS and ransformed with
       * the `raml2obj` library. This is available in `<raml-js-parser>`
       * element.
       */
      body: Array,
      // Display name of the property.
      displayName: {
        type: String,
        computed: '_computeDisplayName(selectedBodyType, ' +
          'displayBodySelector, selectedBody.*)'
      },
      // Computed value, true if current type is a JSON type object
      isJson: {
        type: Object,
        value: false,
        readOnly: true
      },
      // Computed value, true if current type is an XML type object
      isXml: {
        type: Object,
        value: false,
        readOnly: true
      },
      isFormUrlEncoded: {
        type: Object,
        value: false,
        readOnly: true
      },
      hasTypeJson: {
        type: Boolean,
        vealue: false
      },
      hasTypeXml: {
        type: Boolean,
        vealue: false
      },
      hasForm: {
        type: Boolean,
        vealue: false
      },
      // True if body is set.
      hasBody: {
        value: false,
        type: Boolean,
        computed: '_computeHasBody(body)',
        notify: true
      },
      // Computed list of names of the body content types.
      bodyTypes: {
        type: Array,
        readOnly: true,
        value: function() {
          return [];
        }
      },
      /**
       * Computed value, true if the body selector can be shown.
       * Body selector can be shown if there is more than one body defined
       * (many media types).
       */
      displayBodySelector: {
        type: Boolean,
        computed: '_computeDisplayBodySelector(bodyTypes.*)'
      },
      // A name of the selected body type. E.g. "application/json".
      selectedBodyType: {
        type: String,
        notify: true
      },
      // Definition of the body for `selectedBodyType`
      selectedBody: {
        type: Object,
        computed: '_computeSelectedBody(selectedBodyType)'
      },
      // If true then the schema / sxamples section is displayed.
      structureDisplayOpened: {
        type: Boolean,
        value: true
      },
      // If true then the narrow layout is applied.
      narrow: Boolean
    },

    observers: [
      '_computeBodyTypes(body.*)',
      '_autoHide(autoHide, hasBody)',
      '_computeContentType(selectedBody.*)',
      '_bodyTypesChanged(bodyTypes.*)'
    ],

    reset: function() {
      this._setBodyTypes([]);
      this.selectedBodyType = '';
      this._setIsJson(false);
      this._setIsXml(false);
    },

    _autoHide: function(autoHide, hasBody) {
      if (!autoHide) {
        return;
      }
      if (hasBody) {
        this.removeAttribute('hidden');
      } else {
        this.setAttribute('hidden', true);
      }
    },

    _computeDisplayName: function(selectedBodyType, displayBodySelector) {
      var body = this.selectedBody;
      if (!body || !selectedBodyType) {
        return '';
      }
      var type = body.displayName || body.name || body.type;
      if (type === selectedBodyType && displayBodySelector) {
        return '';
      }
      return type;
    },

    _computeContentType: function(record) {
      var type = record.base;
      var isXml = false;
      var isJson = false;
      var isFormUrlEncoded = false;
      if (!type) {
        this._setIsJson(isJson);
        this._setIsXml(isXml);
        this._setIsFormUrlEncoded(isFormUrlEncoded);
        return;
      }
      var mime;
      if (type.contentType) {
        mime = type.contentType;
      } else {
        mime = type.key;
      }
      if (!mime) {
        mime = 'application/json';
      }

      if (mime.indexOf('json') !== -1) {
        isJson = true;
      } else if (mime.indexOf('xml') !== -1) {
        isXml = true;
      } else if (mime.indexOf('x-www-form-urlencoded') !== -1) {
        isFormUrlEncoded = true;
      } else {
        // for now, default value;
        isJson = true;
      }
      this._setIsJson(isJson);
      this._setIsXml(isXml);
      this._setIsFormUrlEncoded(isFormUrlEncoded);
    },

    // Computes if current boddy array has any value that can be presented.
    _computeHasBody: function(body) {
      return !!(body && body.length);
    },

    // Compute a list of media types for the body array
    _computeBodyTypes: function() {
      this.reset();
      var body = this.body;
      if (!body || !body.length) {
        return;
      }
      var mime = body.map(function(item) {
        return item.key;
      });
      this._setBodyTypes(mime);
      // this.selectedBodyType = mime[0];
    },

    // returns true if given argument is an array and has more than 1 element.
    _computeDisplayBodySelector: function() {
      var size = this.bodyTypes ? this.bodyTypes.length : 0;
      return !!(size && size > 1);
    },

    /**
     * When the selection of body types change it will compute proper
     * body object.
     */
    _computeSelectedBody: function(selectedBodyType) {
      var body = this.body;
      if (!selectedBodyType || !body || !body.length) {
        return undefined;
      }

      for (var i = 0, len = body.length; i < len; i++) {
        if (body[i].key === selectedBodyType) {
          return body[i];
        }
      }

      return undefined;
    },
    /**
     * When the `bodyTypes` change it will set a default (first) mime as
     * selected.
     */
    _bodyTypesChanged: function() {
      var bt;
      if (this.bodyTypes && this.bodyTypes.length) {
        bt = this.bodyTypes[0];
      }
      this.set('selectedBodyType', bt);
    },

    // Toggles type
    toggleOpened: function() {
      this.structureDisplayOpened = !this.structureDisplayOpened;
    },
    // Computes toggle button class name
    _computeToggleClass: function(toggleOpened) {
      var clazz = '';
      if (toggleOpened) {
        clazz += ' opened';
      }
      return clazz;
    }

  });
  </script>
</dom-module>
<!--
The `docs-body-table` is a view for the RAML documentation body.
Body may contain more than one type (RAML's union types) so in this case
this will show a more than one table of the parameters.
-->
<dom-module id="docs-body-table" assetpath="bower_components/docs-parameters-table/">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <div hidden$="[[!hasTypes]]">
      <template is="dom-repeat" items="[[type.type]]" index-as="index">
        <docs-body-parameters-table type="[[item]]" auto-hide="[[autoHide]]"></docs-body-parameters-table>
      </template>
    </div>
  </template>
  <script>
    Polymer({
      is: 'docs-body-table',

      properties: {
        /**
         * A RAML types definition for the body payload.
         */
        type: Object,

        hasTypes: {
          type: Boolean,
          value: false,
          notify: true,
          computed: '_computeHasTypes(type.*)'
        },
        // If set automatically hides the element which doesn't have parameteres set
        autoHide: {
          type: Boolean,
          value: false
        }
      },

      _computeHasTypes: function() {
        var type = this.type;
        return !!(type && (type.properties || type.type));
      }
    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>
  console.warn('This file is deprecated. Please use `iron-flex-layout/iron-flex-layout-classes.html`, and one of the specific dom-modules instead');
</script>

<style>

  /*******************************
            Flex Layout
  *******************************/

  html /deep/ .layout.horizontal,
  html /deep/ .layout.horizontal-reverse,
  html /deep/ .layout.vertical,
  html /deep/ .layout.vertical-reverse {
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
  }

  html /deep/ .layout.inline {
    display: -ms-inline-flexbox;
    display: -webkit-inline-flex;
    display: inline-flex;
  }

  html /deep/ .layout.horizontal {
    -ms-flex-direction: row;
    -webkit-flex-direction: row;
    flex-direction: row;
  }

  html /deep/ .layout.horizontal-reverse {
    -ms-flex-direction: row-reverse;
    -webkit-flex-direction: row-reverse;
    flex-direction: row-reverse;
  }

  html /deep/ .layout.vertical {
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }

  html /deep/ .layout.vertical-reverse {
    -ms-flex-direction: column-reverse;
    -webkit-flex-direction: column-reverse;
    flex-direction: column-reverse;
  }

  html /deep/ .layout.wrap {
    -ms-flex-wrap: wrap;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
  }
  
  html /deep/ .layout-no-wrap {
    -ms-flex-wrap: nowrap;
    -webkit-flex-wrap: nowrap;
    flex-wrap: nowrap;
  }

  html /deep/ .layout.wrap-reverse {
    -ms-flex-wrap: wrap-reverse;
    -webkit-flex-wrap: wrap-reverse;
    flex-wrap: wrap-reverse;
  }

  html /deep/ .flex-auto {
    -ms-flex: 1 1 auto;
    -webkit-flex: 1 1 auto;
    flex: 1 1 auto;
  }

  html /deep/ .flex-none {
    -ms-flex: none;
    -webkit-flex: none;
    flex: none;
  }

  html /deep/ .flex,
  html /deep/ .flex-1 {
    -ms-flex: 1;
    -webkit-flex: 1;
    flex: 1;
  }

  html /deep/ .flex-2 {
    -ms-flex: 2;
    -webkit-flex: 2;
    flex: 2;
  }

  html /deep/ .flex-3 {
    -ms-flex: 3;
    -webkit-flex: 3;
    flex: 3;
  }

  html /deep/ .flex-4 {
    -ms-flex: 4;
    -webkit-flex: 4;
    flex: 4;
  }

  html /deep/ .flex-5 {
    -ms-flex: 5;
    -webkit-flex: 5;
    flex: 5;
  }

  html /deep/ .flex-6 {
    -ms-flex: 6;
    -webkit-flex: 6;
    flex: 6;
  }

  html /deep/ .flex-7 {
    -ms-flex: 7;
    -webkit-flex: 7;
    flex: 7;
  }

  html /deep/ .flex-8 {
    -ms-flex: 8;
    -webkit-flex: 8;
    flex: 8;
  }

  html /deep/ .flex-9 {
    -ms-flex: 9;
    -webkit-flex: 9;
    flex: 9;
  }

  html /deep/ .flex-10 {
    -ms-flex: 10;
    -webkit-flex: 10;
    flex: 10;
  }

  html /deep/ .flex-11 {
    -ms-flex: 11;
    -webkit-flex: 11;
    flex: 11;
  }

  html /deep/ .flex-12 {
    -ms-flex: 12;
    -webkit-flex: 12;
    flex: 12;
  }

  /* alignment in cross axis */

  html /deep/ .layout.start {
    -ms-flex-align: start;
    -webkit-align-items: flex-start;
    align-items: flex-start;
  }

  html /deep/ .layout.center,
  html /deep/ .layout.center-center {
    -ms-flex-align: center;
    -webkit-align-items: center;
    align-items: center;
  }

  html /deep/ .layout.end {
    -ms-flex-align: end;
    -webkit-align-items: flex-end;
    align-items: flex-end;
  }

  /* alignment in main axis */

  html /deep/ .layout.start-justified {
    -ms-flex-pack: start;
    -webkit-justify-content: flex-start;
    justify-content: flex-start;
  }

  html /deep/ .layout.center-justified,
  html /deep/ .layout.center-center {
    -ms-flex-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
  }

  html /deep/ .layout.end-justified {
    -ms-flex-pack: end;
    -webkit-justify-content: flex-end;
    justify-content: flex-end;
  }

  html /deep/ .layout.around-justified {
    -ms-flex-pack: around;
    -webkit-justify-content: space-around;
    justify-content: space-around;
  }

  html /deep/ .layout.justified {
    -ms-flex-pack: justify;
    -webkit-justify-content: space-between;
    justify-content: space-between;
  }

  /* self alignment */

  html /deep/ .self-start {
    -ms-align-self: flex-start;
    -webkit-align-self: flex-start;
    align-self: flex-start;
  }

  html /deep/ .self-center {
    -ms-align-self: center;
    -webkit-align-self: center;
    align-self: center;
  }

  html /deep/ .self-end {
    -ms-align-self: flex-end;
    -webkit-align-self: flex-end;
    align-self: flex-end;
  }

  html /deep/ .self-stretch {
    -ms-align-self: stretch;
    -webkit-align-self: stretch;
    align-self: stretch;
  }

  /*******************************
            Other Layout
  *******************************/

  html /deep/ .block {
    display: block;
  }

  /* IE 10 support for HTML5 hidden attr */
  html /deep/ [hidden] {
    display: none !important;
  }

  html /deep/ .invisible {
    visibility: hidden !important;
  }

  html /deep/ .relative {
    position: relative;
  }

  html /deep/ .fit {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  body.fullbleed {
    margin: 0;
    height: 100vh;
  }

  html /deep/ .scroll {
    -webkit-overflow-scrolling: touch;
    overflow: auto;
  }

  .fixed-bottom,
  .fixed-left,
  .fixed-right,
  .fixed-top {
    position: fixed;
  }

  html /deep/ .fixed-top {
    top: 0;
    left: 0;
    right: 0;
  }

  html /deep/ .fixed-right {
    top: 0;
    right: 0;
    bottom: 0;
  }

  html /deep/ .fixed-bottom {
    right: 0;
    bottom: 0;
    left: 0;
  }

  html /deep/ .fixed-left {
    top: 0;
    bottom: 0;
    left: 0;
  }

</style>
<script>
  console.warn('This file is deprecated. Please use `iron-flex-layout/iron-flex-layout-classes.html`, and one of the specific dom-modules instead');
</script>

<style>

  /*******************************
            Flex Layout
  *******************************/

  .layout.horizontal,
  .layout.horizontal-reverse,
  .layout.vertical,
  .layout.vertical-reverse {
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
  }

  .layout.inline {
    display: -ms-inline-flexbox;
    display: -webkit-inline-flex;
    display: inline-flex;
  }

  .layout.horizontal {
    -ms-flex-direction: row;
    -webkit-flex-direction: row;
    flex-direction: row;
  }

  .layout.horizontal-reverse {
    -ms-flex-direction: row-reverse;
    -webkit-flex-direction: row-reverse;
    flex-direction: row-reverse;
  }

  .layout.vertical {
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }

  .layout.vertical-reverse {
    -ms-flex-direction: column-reverse;
    -webkit-flex-direction: column-reverse;
    flex-direction: column-reverse;
  }

  .layout.wrap {
    -ms-flex-wrap: wrap;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
  }
  
  .layout.no-wrap {
    -ms-flex-wrap: nowrap;
    -webkit-flex-wrap: nowrap;
    flex-wrap: nowrap;
  }

  .layout.wrap-reverse {
    -ms-flex-wrap: wrap-reverse;
    -webkit-flex-wrap: wrap-reverse;
    flex-wrap: wrap-reverse;
  }

  .flex-auto {
    -ms-flex: 1 1 auto;
    -webkit-flex: 1 1 auto;
    flex: 1 1 auto;
  }

  .flex-none {
    -ms-flex: none;
    -webkit-flex: none;
    flex: none;
  }

  .flex,
  .flex-1 {
    -ms-flex: 1;
    -webkit-flex: 1;
    flex: 1;
  }

  .flex-2 {
    -ms-flex: 2;
    -webkit-flex: 2;
    flex: 2;
  }

  .flex-3 {
    -ms-flex: 3;
    -webkit-flex: 3;
    flex: 3;
  }

  .flex-4 {
    -ms-flex: 4;
    -webkit-flex: 4;
    flex: 4;
  }

  .flex-5 {
    -ms-flex: 5;
    -webkit-flex: 5;
    flex: 5;
  }

  .flex-6 {
    -ms-flex: 6;
    -webkit-flex: 6;
    flex: 6;
  }

  .flex-7 {
    -ms-flex: 7;
    -webkit-flex: 7;
    flex: 7;
  }

  .flex-8 {
    -ms-flex: 8;
    -webkit-flex: 8;
    flex: 8;
  }

  .flex-9 {
    -ms-flex: 9;
    -webkit-flex: 9;
    flex: 9;
  }

  .flex-10 {
    -ms-flex: 10;
    -webkit-flex: 10;
    flex: 10;
  }

  .flex-11 {
    -ms-flex: 11;
    -webkit-flex: 11;
    flex: 11;
  }

  .flex-12 {
    -ms-flex: 12;
    -webkit-flex: 12;
    flex: 12;
  }

  /* alignment in cross axis */

  .layout.start {
    -ms-flex-align: start;
    -webkit-align-items: flex-start;
    align-items: flex-start;
  }

  .layout.center,
  .layout.center-center {
    -ms-flex-align: center;
    -webkit-align-items: center;
    align-items: center;
  }

  .layout.end {
    -ms-flex-align: end;
    -webkit-align-items: flex-end;
    align-items: flex-end;
  }

  /* alignment in main axis */

  .layout.start-justified {
    -ms-flex-pack: start;
    -webkit-justify-content: flex-start;
    justify-content: flex-start;
  }

  .layout.center-justified,
  .layout.center-center {
    -ms-flex-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
  }

  .layout.end-justified {
    -ms-flex-pack: end;
    -webkit-justify-content: flex-end;
    justify-content: flex-end;
  }

  .layout.around-justified {
    -ms-flex-pack: around;
    -webkit-justify-content: space-around;
    justify-content: space-around;
  }

  .layout.justified {
    -ms-flex-pack: justify;
    -webkit-justify-content: space-between;
    justify-content: space-between;
  }

  /* self alignment */

  .self-start {
    -ms-align-self: flex-start;
    -webkit-align-self: flex-start;
    align-self: flex-start;
  }

  .self-center {
    -ms-align-self: center;
    -webkit-align-self: center;
    align-self: center;
  }

  .self-end {
    -ms-align-self: flex-end;
    -webkit-align-self: flex-end;
    align-self: flex-end;
  }

  .self-stretch {
    -ms-align-self: stretch;
    -webkit-align-self: stretch;
    align-self: stretch;
  }

  /*******************************
            Other Layout
  *******************************/

  .block {
    display: block;
  }

  /* IE 10 support for HTML5 hidden attr */
  [hidden] {
    display: none !important;
  }

  .invisible {
    visibility: hidden !important;
  }

  .relative {
    position: relative;
  }

  .fit {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  body.fullbleed {
    margin: 0;
    height: 100vh;
  }

  .scroll {
    -webkit-overflow-scrolling: touch;
    overflow: auto;
  }

  /* fixed position */

  .fixed-bottom,
  .fixed-left,
  .fixed-right,
  .fixed-top {
    position: fixed;
  }

  .fixed-top {
    top: 0;
    left: 0;
    right: 0;
  }

  .fixed-right {
    top: 0;
    right: 0;
    bottom: 0;
  }

  .fixed-bottom {
    right: 0;
    bottom: 0;
    left: 0;
  }

  .fixed-left {
    top: 0;
    bottom: 0;
    left: 0;
  }

</style>
<!--
The `<paper-styles>` component provides simple ways to use Material Design CSS styles
in your application. The following imports are available:

1. [color.html](https://github.com/PolymerElements/paper-styles/blob/master/color.html):
a complete list of the colors defined in the Material Design [palette](https://www.google.com/design/spec/style/color.html)

2. [default-theme.html](https://github.com/PolymerElements/paper-styles/blob/master/default-theme.html): text,
background and accent colors that match the default Material Design theme

3. [shadow.html](https://github.com/PolymerElements/paper-styles/blob/master/shadow.html): Material Design
[elevation](https://www.google.com/design/spec/what-is-material/elevation-shadows.html) and shadow styles

4. [typography.html](https://github.com/PolymerElements/paper-styles/blob/master/typography.html):
Material Design [font](http://www.google.com/design/spec/style/typography.html#typography-styles) styles and sizes

5. [demo-pages.html](https://github.com/PolymerElements/paper-styles/blob/master/demo-pages.html): generic styles
used in the PolymerElements demo pages

We recommend importing each of these individual files, and using the style mixins
available in each ones, rather than the aggregated `paper-styles.html` as a whole.

@group Paper Elements
@pseudoElement paper-styles
@demo demo/index.html
-->

<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><dom-module id="paper-menu-shared-styles" assetpath="bower_components/paper-menu/">
  <template>
    <style>
      /* need a wrapper element to make this higher specificity than the :host rule in paper-item */
      .selectable-content > ::content > .iron-selected {
        font-weight: bold;

        @apply(--paper-menu-selected-item);
      }

      .selectable-content > ::content > [disabled] {
        color: var(--paper-menu-disabled-color, --disabled-text-color);
      }

      .selectable-content > ::content > *:focus {
        position: relative;
        outline: 0;

        @apply(--paper-menu-focused-item);
      }

      .selectable-content > ::content > *:focus:after {
        @apply(--layout-fit);
        background: currentColor;
        opacity: var(--dark-divider-opacity);
        content: '';
        pointer-events: none;

        @apply(--paper-menu-focused-item-after);
      }

      .selectable-content > ::content > *[colored]:focus:after {
        opacity: 0.26;
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Menus](https://www.google.com/design/spec/components/menus.html)

`<paper-menu>` implements an accessible menu control with Material Design styling. The focused item
is highlighted, and the selected item has bolded text.

    <paper-menu>
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-menu>

An initial selection can be specified with the `selected` attribute.

    <paper-menu selected="0">
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-menu>

Make a multi-select menu with the `multi` attribute. Items in a multi-select menu can be deselected,
and multiple items can be selected.

    <paper-menu multi>
      <paper-item>Item 1</paper-item>
      <paper-item>Item 2</paper-item>
    </paper-menu>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-menu-background-color`   | Menu background color                                            | `--primary-background-color`
`--paper-menu-color`              | Menu foreground color                                            | `--primary-text-color`
`--paper-menu-disabled-color`     | Foreground color for a disabled item                             | `--disabled-text-color`
`--paper-menu`                    | Mixin applied to the menu                                        | `{}`
`--paper-menu-selected-item`      | Mixin applied to the selected item                               | `{}`
`--paper-menu-focused-item`       | Mixin applied to the focused item                                | `{}`
`--paper-menu-focused-item-after` | Mixin applied to the ::after pseudo-element for the focused item | `{}`

### Accessibility

`<paper-menu>` has `role="menu"` by default. A multi-select menu will also have
`aria-multiselectable` set. It implements key bindings to navigate through the menu with the up and
down arrow keys, esc to exit the menu, and enter to activate a menu item. Typing the first letter
of a menu item will also focus it.

@group Paper Elements
@element paper-menu
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-menu" assetpath="bower_components/paper-menu/">
  <template>
    <style include="paper-menu-shared-styles"></style>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-menu-background-color, --primary-background-color);
        color: var(--paper-menu-color, --primary-text-color);

        @apply(--paper-menu);
      }
    </style>

    <div class="selectable-content">
      <content></content>
    </div>
  </template>

  <script>
    (function() {
      Polymer({
        is: 'paper-menu',

        behaviors: [
          Polymer.IronMenuBehavior
        ]
      });
    })();
  </script>
</dom-module>
<!--
`<raml-docs-response-panel>` Element that displays response documentation for RAML

This element is used in `<raml-docs-method-viewer>` element.
See it's demo for demo.

### Example
```
<raml-docs-response-panel responses="[[raml.responses]]"></raml-docs-response-panel>
```

The `raml.responses` is a list of responses for current method. It can be
obtained using a `raml-path-to-object` element or by passing method Definition
from RAML's JSON structure.
Note, you have to use ARC's `<raml-js-parser>` since it is also responsoble
for transformind parser JSON output to internal data structure.

## Element's width and overflow
The code blocks generated by the element can be wide. This is why this element
has the CSS `overflow` property set to `auto` by default. In this case you can
set the `max-width` or `width` propety on this element (or any parent element)
and it will be respected.


### Styling
`<raml-docs-response-panel>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-response-panel` | Mixin applied to the element | `{}`
`--arc-status-code-color-200` | Color of the 200 status code (ARC theme option) | `rgba(56, 142, 60, 1)` |
`--arc-status-code-color-300` | Color of the 300 status code (ARC theme option) | `rgba(48, 63, 159, 1)` |
`--arc-status-code-color-400` | Color of the 400 status code (ARC theme option) | `rgba(245, 124, 0, 1)` |
`--arc-status-code-color-500` | Color of the 500 status code (ARC theme option) | `rgba(211, 47, 47, 1)` |
`--arc-status-code-bgcolor-200` | Background color of the 200 status code | `rgba(56, 142, 60, 0.12)` |
`--arc-status-code-bgcolor-300` | Background color of the 300 status code | `rgba(48, 63, 159, 0.12)` |
`--arc-status-code-bgcolor-400` | Background color of the 400 status code | `rgba(245, 124, 0, 0.12)` |
`--arc-status-code-bgcolor-500` | Background color of the 500 status code | `rgba(211, 47, 47, 0.12)` |
`--raml-docs-response-panel-codes-border-color` | Border color of the response codes column | `rgba(0, 161, 223, 0.24)`
`--no-info-message` | A mixin applied to the "missing type" paragraph. | `{}` |
`--raml-docs-response-panel-container` | A mixin applied to the element's main container | `{}`
`--raml-docs-response-panel-codes-content` | A mixin applied to the element's status codes container | `{}`
`--raml-docs-response-panel-docs-content` | A mixin applied to the element's documentation content container | `{}`

@group RAML Elements
@element raml-docs-response-panel
@demo demo/index.html
-->
<dom-module id="raml-docs-response-panel" assetpath="bower_components/raml-docs-response-panel/">
  <template>
    <style include="markdown-styles"></style>
    <style>
     :host {
      display: block;
      @apply(--raml-docs-response-panel);
    }

    .container {
      @apply(--layout-horizontal);
      @apply(--raml-docs-response-panel-container);
    }

    .codes {
      border-right: 1px var(--raml-docs-response-panel-codes-border-color, rgba(0, 161, 223, 0.24)) solid;
      @apply(--raml-docs-response-panel-codes-content);
    }

    .docs {
      @apply(--layout-flex);
      @apply(--paper-font-body1);
      margin-left: 16px;
      overflow: auto;
      @apply(--raml-docs-response-panel-docs-content);
    }

    .no-data-info {
      @apply(--no-info-message);
    }

    .codes paper-item {
      cursor: pointer;
    }

    .codes .green {
      color: var(--arc-status-code-color-200, rgba(56, 142, 60, 1));
    }

    .codes .green[active]:not([focused])  {
      background-color: var(--arc-status-code-bgcolor-200, rgba(56, 142, 60, 0.12));
    }

    .codes .blue {
      color: var(--arc-status-code-color-300, rgba(48, 63, 159, 1));
    }

    .codes .blue[active]:not([focused])  {
      background-color: var(--arc-status-code-bgcolor-300, rgba(48, 63, 159, 0.12));
    }

    .codes .orange {
      color: var(--arc-status-code-color-400, rgba(245, 124, 0, 1));
    }

    .codes .orange[active]:not([focused]) {
      background-color: var(--arc-status-code-bgcolor-400, rgba(245, 124, 0, 0.12));
    }

    .codes .red {
      color: var(--arc-status-code-color-500, rgba(211, 47, 47, 1));
    }

    .codes .red[active]:not([focused])  {
      background-color: var(--arc-status-code-bgcolor-500, rgba(211, 47, 47, 0.12));
    }

    .markdown-html,
    docs-body-parameters-table {
      margin-right: 12px;
    }

    </style>
    <div class="container" hidden$="[[!hasResponses]]">
      <div class="codes">
        <paper-menu selected="{{selectedResponseStatus}}" selected-attribute="active">
          <template is="dom-repeat" items="[[responses]]">
            <paper-item class$="[[_computeCodeClass(item.code)]]">[[item.code]]</paper-item>
          </template>
        </paper-menu>
      </div>
      <div class="docs">
        <section>
          <template is="dom-if" if="[[description]]">
            <marked-element markdown="[[description]]">
              <div class="markdown-html"></div>
            </marked-element>
          </template>
          <p class="no-data-info" hidden$="[[description]]">No description provided.</p>
          <docs-body-parameters-table hidden$="[[!_hasProperty(selectedResponse, 'body')]]" selected-body-type="{{selectedBodyType}}" body="[[selectedResponse.body]]"></docs-body-parameters-table>
        </section>
      </div>
    </div>
  </template>
  <script>
  Polymer({
    is: 'raml-docs-response-panel',
    properties: {
      // List of responses - RAML definition (JSON)
      responses: Array,
      // Computed value if currently panel has anything to display
      hasResponses: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false
      },
      // Selected response in the array (0-based)
      selectedResponseStatus: {
        type: Number,
        value: 0
      },
      // Currently selected response object
      selectedResponse: {
        type: Object,
        value: null,
        computed: '_computeSelectedResponse(selectedResponseStatus, responses.length)'
      },
      // Mime type of the body currently displayed.
      selectedBodyType: {
        type: Object,
        value: null
      },
      // Description for selected response and type.
      description: {
        type: String,
        value: '',
        computed: '_computeDescription(selectedResponse, selectedBodyType, selectedResponseStatus)'
      }
    },

    observers: [
      '_responsesChanged(responses.*)'
    ],

    _responsesChanged: function() {
      this.selectedResponseStatus = 0;
      this.clear();

      var d = this.responses;
      this._setHasResponses(!!(d && d.length));
      if (!this.hasResponses) {
        return;
      }
    },

    clear: function() {
      // this.selectedBodyType = null;
      this.bodyTypes = [];
    },

    _computeSelectedResponse: function(selectedResponseStatus, respSize) {
      if (!selectedResponseStatus && selectedResponseStatus !== 0 || !respSize) {
        return;
      }
      return this.responses[selectedResponseStatus];
    },

    _hasProperty: function(obj, property) {
      if (!obj) {
        return false;
      }
      return property in obj;
    },

    _computeCodeClass: function(code) {
      code = Number(code);
      if (code !== code) {
        return '';
      }
      if (code >= 200 && code < 300) {
        return 'green';
      }
      if (code >= 300 && code < 400) {
        return 'blue';
      }
      if (code >= 400 && code < 500) {
        return 'orange';
      }
      if (code >= 500 && code < 600) {
        return 'red';
      }
    },
    // Computes a description for current selected response and type.
    _computeDescription: function(resp, bodyType) {
      if (!resp) {
        return null;
      }
      if ('description' in resp) {
        return resp.description;
      }
      if (bodyType && resp.body && resp.body.length) {
        for (var i = 0, len = resp.body.length; i < len; i++) {
          if (resp.body[i].key === bodyType) {
            if (resp.body[i].description) {
              return resp.body[i].description;
            }
            break;
          }
        }
      }
      return null;
    }
  });
  </script>
</dom-module>
<!--
`<raml-docs-method-viewer>` Documentation view for the method defined in RAML file

This element is meant to work with data structure returned by the
`<raml-js-parser>` and `<raml-path-to-object>`. Regular JSON output from the
RAML JS parser will not work with this element.

### Example
```
<raml-docs-method-viewer
  raml="[[methodDefinition]]"
  parent-endpoint="[[selectedParent]]"></raml-docs-method-viewer>
```
To properly compute values displayed in the view it needs to know its
`parentEndpoint`. Though, it will work properly if the parent is not passed.
Parent is used to display title of the method.

## Disabling the "try it" button
You can either set the `noTryIt` property to true (or set the `no-try-it` attribute on the element)
or send for the `tryit-toggle` custom event with the `state` property set to the detail object.
The element will listen on `window` object for the event.

### Styling
`<raml-docs-method-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-method-viewer` | Mixin applied to the element | `{}`
`--raml-docs-h1` | Mixin applied to H1 | `{}` |
`--raml-docs-h2` | Mixin applied to H2 | `{}` |
`--raml-docs-h3` | Mixin applied to H3 | `{}` |
`--raml-docs-method-viewer-title-method-font-weight` | Font weight of the name if the method | `500` |
`--raml-docs-method-viewer-http-method-font-weight` | Font weight of the HTTP method | `500` |
`--raml-docs-item-description` | Mixin applied to the description field. | `{}` |
`--raml-docs-method-viewer-url-color` | Color of the URL field | `--accent-color` |
`--raml-docs-method-viewer-url-font-style` | font-style of the URL value | `italic` |
`--raml-docs-method-viewer-url` | Mixin applied to the URL field | `{}` |
`--action-button` | Mixin applied to the main action button (Try it) | `{}`
`--action-button-hover` | Mixin applied to the main action button on hover (Try it) | `{}`
`--arc-font-headline` | Mixin applied to the h1 element (API title) | `{}`
`--arc-font-title` | Mixin applied to the h2 elements (section title) | `{}`
`--arc-font-subhead` | Mixin applied to the h3 elements (section sub-titles) | `{}`
`--toggle-button` | Mixin applied to toggling button (show/hide) | `{}`
`--toggle-button-hover` | Mixin applied to toggling button on hover (show/hide) | `{}`
`--raml-docs-method-viewer-title-area-actions` | Mixin applied to toggling actions area | `{}`
`--raml-docs-method-viewer-traits-list` | Mixin applied to the list of traits container | `{}`
`--raml-docs-method-viewer-traits-list-values` | Mixin applied to the list of traits values (names) | `{}`
`--raml-docs-method-viewer-traits-list-label` | Mixin applied to the list of traits list label | `{}`
`--raml-docs-method-viewer-traits-list-values-color` | Color of the traits list values (names) | `rgba(0,0,0,0.94)`
`--raml-docs-method-viewer-traits-list-label-color` | Color of the traits list label | `rgba(0,0,0,0.74)`

@group RAML Elements
@element raml-docs-method-viewer
@demo demo/index.html
-->
<dom-module id="raml-docs-method-viewer" assetpath="bower_components/raml-docs-method-viewer/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      @apply(--raml-docs-method-viewer);
    }

    :host([hidden]) {
      display: none !important;
    }

    h1 {
      @apply(--arc-font-headline);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h1);
    }

    h2 {
      @apply(--arc-font-title);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h2);
    }

    h3 {
      @apply(--arc-font-subhead);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h3);
    }

    .method-name {
      font-weight: var(--raml-docs-method-viewer-title-method-font-weight, 500);
    }

    .method-value {
      text-transform: uppercase;
      font-weight: var(--raml-docs-method-viewer-http-method-font-weight, 500);
    }

    .title-area {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .title {
      @apply(--layout-flex);
    }

    .method-desc {
      margin-bottom: 28px;
      color: rgba(0,0,0,0.74);
      @apply(--arc-font-body1);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-item-description);
    }

    .url-area {
      @apply(--layout-horizontal);
      @apply(--arc-font-body1);
      font-size: 16px;
      margin-bottom: 40px;
      color: var(--raml-docs-method-viewer-url-color, --accent-color);
      @apply(--raml-docs-method-viewer-content-section);
    }

    .url-value {
      font-style: var(--raml-docs-method-viewer-url-font-style, italic);
      margin-left: 12px;
      word-break: break-all;
      @apply(--raml-docs-method-viewer-url);
    }

    .body-selector {
      margin: 0 12px;
    }

    .action-button {
      background-color: var(--primary-color);
      color: var(--primary-action-color, #fff);
      @apply(--action-button);
    }

    .action-button:hover {
      @apply(--action-button-hover);
    }

    :host([no-try-it]) .action {
      display: none !important;
    }

    .bottom.action {
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
    }

    :host([narrow]) .container {
      max-width: var(--raml-docs-method-viewer-narrow-container-width, calc(100vw - 32px));
      overflow: auto;
    }
    :host([narrow]) docs-parameters-table,
    :host([narrow]) docs-headers-table,
    :host([narrow]) docs-body-parameters-table,
    :host([narrow]) raml-docs-response-panel {
      max-width: var(--raml-docs-method-viewer-narrow-container-width, calc(100vw - 32px));
      overflow: auto;
    }

    :host([narrow]) .title-area {
      margin-bottom: 24px;
      /*@apply(--layout-start);*/
    }
    :host([narrow]) h1 {
      font-size: 20px;
      margin: 0;
    }

    :host([narrow]) h2 {
      font-size: 18px;
    }

    :host([narrow]) h3 {
      font-size: 17px;
    }

    .section-title-area {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .section-title-area h3 {
      @apply(--layout-flex);
    }

    .toggle-button {
      color: var(--arc-toggle-view-icon-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
      @apply(--toggle-button);
    }

    .toggle-button:hover {
      color: var(--arc-toggle-view-icon-hover-color, rgba(0, 0, 0, 0.78));
      @apply(--toggle-button-hover);
    }

    .toggle-icon {
      transform: rotateZ(0deg);
      transition: transform 0.3s linear;
    }

    .toggle-icon.opened {
      transform: rotateZ(-180deg);
    }

    .title-area-actions {
      @apply(--raml-docs-method-viewer-title-area-actions);
    }

    .traits-list {
      margin-bottom: 8px;
      color: rgba(0,0,0,0.74);
      @apply(--raml-docs-method-viewer-traits-list);
    }

    .trait-value {
      color: var(--raml-docs-method-viewer-traits-list-values-color, rgba(0,0,0,0.94));
      @apply(--raml-docs-method-viewer-traits-list-values);
    }

    .trait-label {
      color: var(--raml-docs-method-viewer-traits-list-label-color, inherit);
      @apply(--raml-docs-method-viewer-traits-list-label);
    }
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <section class="container">

      <div class="title-area">
        <h1 class="title">
          <span>[[parentName]]</span>
          <span hidden$="[[!parentName]]">:</span>
          <span class="method-name">[[methodName]]</span>
        </h1>
        <div class="action">
          <paper-button class="action-button" on-tap="_tryIt">Try it</paper-button>
        </div>
      </div>

      <template is="dom-if" if="[[hasTraits]]">
        <div class="traits-list">
          <span class="trait-label">Traits:</span>
          <span class="trait-value">[[_computeTraitsList(raml.is)]]</span>
        </div>
      </template>

      <div hidden$="[[_computeHideMethodDesc(raml.description)]]" class="method-desc">
        <marked-element markdown="[[raml.description]]">
          <div class="markdown-html markdown-body"></div>
        </marked-element>
      </div>

      <section class="request-doc">
        <h2>Request</h2>

        <div class="url-area">
          <div class="method-value">[[raml.method]]</div>
          <div class="url-value">[[raml.absoluteUri]]</div>
        </div>

        <section hidden$="[[!hasParameters]]">
          <div class="section-title-area">
            <h3>Parameters</h3>
            <div class="title-area-actions">
              <paper-button data-section="parameters" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle parameters details">
                [[_computeToggleActionLabel(parametersOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(parametersOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[parametersOpened]]">
            <docs-parameters-table uri-parameters="[[raml.allUriParameters]]" query-parameters="[[raml.queryParameters]]" has-parameters="{{hasParameters}}" narrow="[[narrow]]" auto-hide=""></docs-parameters-table>
          </iron-collapse>
        </section>

        <section hidden$="[[!hasHeaders]]">
          <div class="section-title-area">
            <h3>Headers</h3>
            <div class="title-area-actions">
              <paper-button data-section="headers" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle headers details">
                [[_computeToggleActionLabel(headersOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(headersOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[headersOpened]]">
            <docs-headers-table has-headers="{{hasHeaders}}" headers="[[raml.headers]]" auto-hide=""></docs-headers-table>
          </iron-collapse>
        </section>

        <section hidden$="[[!hasBody]]">
          <div class="section-title-area">
            <h3>Body</h3>
            <div class="title-area-actions">
              <paper-button data-section="body" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle body details">
                [[_computeToggleActionLabel(bodyOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(bodyOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[bodyOpened]]">
            <docs-body-parameters-table body="[[raml.body]]" narrow="[[narrow]]"></docs-body-parameters-table>
          </iron-collapse>
        </section>
      </section>

      <section class="response-doc" hidden$="[[!hasResponses]]">
        <h2>Response</h2>
        <raml-docs-response-panel has-responses="{{hasResponses}}" responses="[[raml.responses]]"></raml-docs-response-panel>
      </section>

      <div class="bottom action">
        <paper-button class="action-button" on-tap="_tryIt">Try it</paper-button>
      </div>
    </section>
  </template>
  <script>
  Polymer({
    is: 'raml-docs-method-viewer',

    behaviors: [Polymer.RamlBehavior],
    /**
     * Fired when the user pressed the `try it` button.
     *
     * @event tryit-requested
     */
    properties: {
      // Parent endpoint object
      parentEndpoint: {
        type: Object,
        value: false
      },
      // True if current endpont has a body
      hasBody: {
        value: false,
        type: Boolean,
        computed: '_computeHasBody(raml.body)'
      },
      // Computed name of the parent resource
      parentName: {
        type: String,
        value: null,
        computed: '_computeParentName(parentEndpoint.*)'
      },
      // Computed name of current method
      methodName: {
        type: String,
        computed: '_computeMethodName(raml.*)'
      },
      // If true then the query / uri parameters will be displayed.
      hasParameters: Boolean,
      // Value obtained from the `raml-docs-response-panel`
      hasResponses: Boolean,
      // If true, the method has traits applied to it.
      hasTraits: {
        type: Boolean,
        readOnly: true
      },
      /**
       * If true then the element will start listen for the
       * `raml-is-method-changed`, `raml-selected-object-changed` and
       * `raml-selected-path-changed` event and set corresponding properties
       * when needed. It's a replacement for the Polymer's data biding
       * for apps that are not Polymer powered.
       */
      autoHide: {
        type: Boolean,
        observer: '_autoHideChanged'
      },
      // If true then the element will be hidden ui the UI.
      hidden: {
        type: Boolean,
        reflectToAttribute: true
      },
      // If set then the `tryit` button will be hidden.
      noTryIt: {
        type: Boolean,
        reflectToAttribute: true
      },
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      // If true then the parameters docs table is displayed.
      parametersOpened: {
        type: Boolean,
        value: true
      },
      // If true then the headers docs table is displayed.
      headersOpened: {
        type: Boolean,
        value: true
      },
      // If true then the body docs table is displayed.
      bodyOpened: {
        type: Boolean,
        value: true
      }
    },

    observers: [
      '_objectChanged(raml.*)'
    ],

    attached: function() {
      this._eventTarget = Polymer.dom(this).host || document;
      if (this.autoHide) {
        this._attacheListeners();
      }
      this.listen(window, 'tryit-toggle', '_toggleTryitHandler');
    },

    detached: function() {
      this.unlisten(window, 'tryit-toggle', '_toggleTryitHandler');
    },

    _autoHideChanged: function(state) {
      if (state === undefined) {
        return;
      }
      if (state) {
        this._attacheListeners();
      } else {
        this._detachListeners();
      }
    },

    _attacheListeners: function() {
      if (!this._eventTarget) {
        this.hidden = true;
        return;
      }
      this._detachListeners();
      this.listen(this._eventTarget, 'raml-is-method-changed',
        '_isMethodHandler');
      this.listen(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
      this.listen(this._eventTarget, 'raml-selected-parent-changed',
        '_selectedParentChangeHandler');
    },

    _detachListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this.unlisten(this._eventTarget, 'raml-is-method-changed',
        '_isMethodHandler');
      this.unlisten(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
      this.unlisten(this._eventTarget, 'raml-selected-parent-changed',
        '_selectedParentChangeHandler');
    },

    _objectChanged: function(record) {
      // this.hidden = false;
      var raml = record && record.base;
      if (!raml) {
        this._setHasTraits(false);
        return;
      }
      if (raml.is && raml.is.length) {
        this._setHasTraits(true);
      } else {
        this._setHasTraits(false);
      }
    },

    _computeMethodName: function() {
      var m = this.raml;
      if (!m) {
        return '';
      }
      return m.displayName || m.method;
    },

    _computeHideMethodDesc: function(description) {
      return !description;
    },

    _computeHasBody: function(body) {
      return !!(body && body.length > 0);
    },

    _isMethodHandler: function(e, detail) {
      var state = detail.state;
      this.hidden = !state;
    },

    _selectedChangeHandler: function(e, detail) {
      if (this.hidden) {
        this.raml = undefined;
        return;
      }
      this.raml = detail.selectedObject;
    },

    _selectedParentChangeHandler: function(e, detail) {
      if (this.hidden) {
        this.parentEndpoint = undefined;
        return;
      }
      this.parentEndpoint = detail.selectedParent;
    },

    _tryIt: function() {
      this.fire('tryit-requested');
    },

    _computeParentName: function() {
      var endpoint = this.parentEndpoint;
      if (!endpoint) {
        return '';
      }
      return endpoint.displayName || endpoint.relativeUri;
    },

    /**
     * Toogles collapsable sections.
     * The toggle button must have `data-section` property with the name of the
     * section to toggle. Variable that controls the state (Boolean value)
     * must be called section + 'Opened'.
     */
    toggleCollapseSection: function(e) {
      var section = Polymer.dom(e).localTarget.dataset.section;
      if (!section) {
        return console.warn('Toggle section not fond in path ', e.path);
      }
      var variable = section + 'Opened';
      this[variable] = !this[variable];
    },

    // Computes class for the toggle's button icon.
    _computeToggleIconClass: function(opened) {
      var clazz = 'toggle-icon';
      if (opened) {
        clazz += ' opened';
      }
      return clazz;
    },
    // Computes a label for the section toggle buttons.
    _computeToggleActionLabel: function(opened) {
      return opened ? 'Hide' : 'Show';
    },

    _toggleTryitHandler: function(e) {
      this.noTryIt = !e.detail.state;
    },
    // Computes list of traits names to display in the view.
    _computeTraitsList: function(traits) {
      if (!traits || !traits.length) {
        return;
      }
      return traits.map(function(trait) {
        if (typeof trait === 'string') {
          return trait;
        }
        if (trait.name) {
          return trait.name;
        }
        try {
          var keys = Object.keys(trait);
          return keys[0];
        } catch (e) {}
      }).join(', ');
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<raml-docs-documentation-viewer>` A viewer of the documentation node of the RAML definition

### Example
```
<raml-docs-documentation-viewer documentation="[[doc]]"></raml-docs-documentation-viewer>
```

### Styling
`<raml-docs-documentation-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-documentation-viewer` | Mixin applied to the element | `{}`
`--raml-docs-documentation-viewer-code` | Mixin applied to the parsed and highlighted code container for markup. Note that this container has `markdown-styles` applied. | `{}`

A `markdown-styles` element is responsible for styling parsing content.

@group RAML Elements
@element raml-docs-documentation-viewer
@demo demo/index.html
-->
<dom-module id="raml-docs-documentation-viewer" assetpath="bower_components/raml-docs-documentation-viewer/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      margin: 24px 0;

      @apply(--raml-docs-documentation-viewer);
    }

    :host([hidden]) {
      display: none !important;
    }

    :host([narrow]) .markdown-html {
      max-width: calc(100vw - 32px);
      overflow: auto;
    }

    .markdown-html {
      @apply(--raml-docs-documentation-viewer-code);
    }
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <div id="preview">
      <marked-element markdown="[[documentation.content]]">
        <div class="markdown-html"></div>
      </marked-element>
    </div>
  </template>
  <script>
  Polymer({
    is: 'raml-docs-documentation-viewer',
    properties: {
      // Represent a single documentation object from RAML's documentation node.
      documentation: Object,
      /**
       * If true then the element will start listen for the
       * `raml-is-documentation-changed` and `raml-selected-object-changed`
       * events and sets corresponding properties when needed. It's
       * a replacement for the Polymer's data biding for apps that are
       * not Polymer powered.
       */
      autoHide: {
        type: Boolean,
        value: false,
        observer: '_autoHideChanged'
      },
      // If true then the element will be hidden ui the UI.
      hidden: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      }
    },

    attached: function() {
      this._eventTarget = Polymer.dom(this).host || document;
      if (this.autoHide) {
        this._attacheListeners();
      }
    },

    _autoHideChanged: function(state) {
      if (state) {
        this._attacheListeners();
      } else {
        this._detachListeners();
      }
    },

    _attacheListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this._detachListeners();
      this.listen(this._eventTarget, 'raml-is-documentation-changed',
        '_isDocHandler');
      this.listen(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
    },

    _detachListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this.unlisten(this._eventTarget, 'raml-is-documentation-changed',
        '_isDocHandler');
      this.unlisten(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
    },

    _isDocHandler: function(e, detail) {
      var state = detail.state;
      this.hidden = !state;
    },

    _selectedChangeHandler: function(e, detail) {
      if (this.hidden) {
        this.documentation = undefined;
        return;
      }
      this.documentation = detail.selectedObject;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll events from a
   * designated scroll target.
   *
   * Elements that consume this behavior can override the `_scrollHandler`
   * method to add logic on the scroll event.
   *
   * @demo demo/scrolling-region.html Scrolling Region
   * @demo demo/document.html Document Element
   * @polymerBehavior
   */
  Polymer.IronScrollTargetBehavior = {

    properties: {

      /**
       * Specifies the element that will handle the scroll event
       * on the behalf of the current element. This is typically a reference to an element,
       * but there are a few more posibilities:
       *
       * ### Elements id
       *
       *```html
       * <div id="scrollable-element" style="overflow: auto;">
       *  <x-element scroll-target="scrollable-element">
       *    <!-- Content-- >
       *  </x-element>
       * </div>
       *```
       * In this case, the `scrollTarget` will point to the outer div element.
       *
       * ### Document scrolling
       *
       * For document scrolling, you can use the reserved word `document`:
       *
       *```html
       * <x-element scroll-target="document">
       *   <!-- Content -- >
       * </x-element>
       *```
       *
       * ### Elements reference
       *
       *```js
       * appHeader.scrollTarget = document.querySelector('#scrollable-element');
       *```
       *
       * @type {Element}
       */
      scrollTarget: {
        type: Object,
        value: function() {
          return this._defaultScrollTarget;
        }
      }
    },

    observers: [
      '_scrollTargetChanged(scrollTarget, isAttached)'
    ],

    /**
     * True if the event listener should be installed.
     */
    _shouldHaveListener: true,

    _scrollTargetChanged: function(scrollTarget, isAttached) {
      var eventTarget;

      if (this._oldScrollTarget) {
        this._toggleScrollListener(false, this._oldScrollTarget);
        this._oldScrollTarget = null;
      }
      if (!isAttached) {
        return;
      }
      // Support element id references
      if (scrollTarget === 'document') {

        this.scrollTarget = this._doc;

      } else if (typeof scrollTarget === 'string') {

        this.scrollTarget = this.domHost ? this.domHost.$[scrollTarget] :
            Polymer.dom(this.ownerDocument).querySelector('#' + scrollTarget);

      } else if (this._isValidScrollTarget()) {

        this._boundScrollHandler = this._boundScrollHandler || this._scrollHandler.bind(this);
        this._oldScrollTarget = scrollTarget;
        this._toggleScrollListener(this._shouldHaveListener, scrollTarget);

      }
    },

    /**
     * Runs on every scroll event. Consumer of this behavior may override this method.
     *
     * @protected
     */
    _scrollHandler: function scrollHandler() {},

    /**
     * The default scroll target. Consumers of this behavior may want to customize
     * the default scroll target.
     *
     * @type {Element}
     */
    get _defaultScrollTarget() {
      return this._doc;
    },

    /**
     * Shortcut for the document element
     *
     * @type {Element}
     */
    get _doc() {
      return this.ownerDocument.documentElement;
    },

    /**
     * Gets the number of pixels that the content of an element is scrolled upward.
     *
     * @type {number}
     */
    get _scrollTop() {
      if (this._isValidScrollTarget()) {
        return this.scrollTarget === this._doc ? window.pageYOffset : this.scrollTarget.scrollTop;
      }
      return 0;
    },

    /**
     * Gets the number of pixels that the content of an element is scrolled to the left.
     *
     * @type {number}
     */
    get _scrollLeft() {
      if (this._isValidScrollTarget()) {
        return this.scrollTarget === this._doc ? window.pageXOffset : this.scrollTarget.scrollLeft;
      }
      return 0;
    },

    /**
     * Sets the number of pixels that the content of an element is scrolled upward.
     *
     * @type {number}
     */
    set _scrollTop(top) {
      if (this.scrollTarget === this._doc) {
        window.scrollTo(window.pageXOffset, top);
      } else if (this._isValidScrollTarget()) {
        this.scrollTarget.scrollTop = top;
      }
    },

    /**
     * Sets the number of pixels that the content of an element is scrolled to the left.
     *
     * @type {number}
     */
    set _scrollLeft(left) {
      if (this.scrollTarget === this._doc) {
        window.scrollTo(left, window.pageYOffset);
      } else if (this._isValidScrollTarget()) {
        this.scrollTarget.scrollLeft = left;
      }
    },

    /**
     * Scrolls the content to a particular place.
     *
     * @method scroll
     * @param {number} left The left position
     * @param {number} top The top position
     */
    scroll: function(left, top) {
       if (this.scrollTarget === this._doc) {
        window.scrollTo(left, top);
      } else if (this._isValidScrollTarget()) {
        this.scrollTarget.scrollLeft = left;
        this.scrollTarget.scrollTop = top;
      }
    },

    /**
     * Gets the width of the scroll target.
     *
     * @type {number}
     */
    get _scrollTargetWidth() {
      if (this._isValidScrollTarget()) {
        return this.scrollTarget === this._doc ? window.innerWidth : this.scrollTarget.offsetWidth;
      }
      return 0;
    },

    /**
     * Gets the height of the scroll target.
     *
     * @type {number}
     */
    get _scrollTargetHeight() {
      if (this._isValidScrollTarget()) {
        return this.scrollTarget === this._doc ? window.innerHeight : this.scrollTarget.offsetHeight;
      }
      return 0;
    },

    /**
     * Returns true if the scroll target is a valid HTMLElement.
     *
     * @return {boolean}
     */
    _isValidScrollTarget: function() {
      return this.scrollTarget instanceof HTMLElement;
    },

    _toggleScrollListener: function(yes, scrollTarget) {
      if (!this._boundScrollHandler) {
        return;
      }
      var eventTarget = scrollTarget === this._doc ? window : scrollTarget;

      if (yes) {
        eventTarget.addEventListener('scroll', this._boundScrollHandler);
      } else {
        eventTarget.removeEventListener('scroll', this._boundScrollHandler);
      }
    },

    /**
     * Enables or disables the scroll event listener.
     *
     * @param {boolean} yes True to add the event, False to remove it.
     */
    toggleScrollListener: function(yes) {
      this._shouldHaveListener = yes;
      this._toggleScrollListener(yes, this.scrollTarget);
    }

  };

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Material design: [Tooltips](https://www.google.com/design/spec/components/tooltips.html)

`<paper-tooltip>` is a label that appears on hover and focus when the user
hovers over an element with the cursor or with the keyboard. It will be centered
to an anchor element specified in the `for` attribute, or, if that doesn't exist,
centered to the parent node containing it.

Example:

    <div style="display:inline-block">
      <button>Click me!</button>
      <paper-tooltip>Tooltip text</paper-tooltip>
    </div>

    <div>
      <button id="btn">Click me!</button>
      <paper-tooltip for="btn">Tooltip text</paper-tooltip>
    </div>

The tooltip can be positioned on the top|bottom|left|right of the anchor using
the `position` attribute. The default position is bottom.

    <paper-tooltip for="btn" position="left">Tooltip text</paper-tooltip>
    <paper-tooltip for="btn" position="top">Tooltip text</paper-tooltip>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-tooltip-background` | The background color of the tooltip | `#616161`
`--paper-tooltip-opacity` | The opacity of the tooltip | `0.9`
`--paper-tooltip-text-color` | The text color of the tooltip | `white`
`--paper-tooltip` | Mixin applied to the tooltip | `{}`

@group Paper Elements
@element paper-tooltip
@demo demo/index.html
-->

<dom-module id="paper-tooltip" assetpath="bower_components/paper-tooltip/">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        outline: none;
        z-index: 1002;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;
      }

      #tooltip {
        display: block;
        outline: none;
        @apply(--paper-font-common-base);
        font-size: 10px;
        line-height: 1;

        background-color: var(--paper-tooltip-background, #616161);
        opacity: var(--paper-tooltip-opacity, 0.9);
        color: var(--paper-tooltip-text-color, white);

        padding: 8px;
        border-radius: 2px;

        @apply(--paper-tooltip);
      }

      /* Thanks IE 10. */
      .hidden {
        display: none !important;
      }
    </style>

    <div id="tooltip" class="hidden">
      <content></content>
    </div>
  </template>

  <script>
    Polymer({
      is: 'paper-tooltip',

      hostAttributes: {
        role: 'tooltip',
        tabindex: -1
      },

      behaviors: [
        Polymer.NeonAnimationRunnerBehavior
      ],

      properties: {
        /**
         * The id of the element that the tooltip is anchored to. This element
         * must be a sibling of the tooltip.
         */
        for: {
          type: String,
          observer: '_findTarget'
        },

        /**
         * Set this to true if you want to manually control when the tooltip
         * is shown or hidden.
         */
        manualMode: {
          type: Boolean,
          value: false,
          observer: '_manualModeChanged'
        },

        /**
         * Positions the tooltip to the top, right, bottom, left of its content.
         */
        position: {
          type: String,
          value: 'bottom'
        },

        /**
         * If true, no parts of the tooltip will ever be shown offscreen.
         */
        fitToVisibleBounds: {
          type: Boolean,
          value: false
        },

        /**
         * The spacing between the top of the tooltip and the element it is
         * anchored to.
         */
        offset: {
          type: Number,
          value: 14
        },

        /**
         * This property is deprecated, but left over so that it doesn't
         * break exiting code. Please use `offset` instead. If both `offset` and
         * `marginTop` are provided, `marginTop` will be ignored.
         * @deprecated since version 1.0.3
         */
        marginTop: {
          type: Number,
          value: 14
        },

        /**
         * The delay that will be applied before the `entry` animation is
         * played when showing the tooltip.
         */
        animationDelay: {
          type: Number,
          value: 500
        },

        /**
         * The entry and exit animations that will be played when showing and
         * hiding the tooltip. If you want to override this, you must ensure
         * that your animationConfig has the exact format below.
         */
        animationConfig: {
          type: Object,
          value: function() {
            return {
              'entry': [{
                name: 'fade-in-animation',
                node: this,
                timing: {delay: 0}
              }],
              'exit': [{
                name: 'fade-out-animation',
                node: this
              }]
            }
          }
        },

        _showing: {
          type: Boolean,
          value: false
        }
      },

      listeners: {
        'neon-animation-finish': '_onAnimationFinish',
      },

      /**
       * Returns the target element that this tooltip is anchored to. It is
       * either the element given by the `for` attribute, or the immediate parent
       * of the tooltip.
       */
      get target () {
        var parentNode = Polymer.dom(this).parentNode;
        // If the parentNode is a document fragment, then we need to use the host.
        var ownerRoot = Polymer.dom(this).getOwnerRoot();

        var target;
        if (this.for) {
          target = Polymer.dom(ownerRoot).querySelector('#' + this.for);
        } else {
          target = parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE ?
              ownerRoot.host : parentNode;
        }

        return target;
      },

      attached: function() {
        this._findTarget();
      },

      detached: function() {
        if (!this.manualMode)
          this._removeListeners();
      },

      show: function() {
        // If the tooltip is already showing, there's nothing to do.
        if (this._showing)
          return;

        if (Polymer.dom(this).textContent.trim() === ''){
          // Check if effective children are also empty
          var allChildrenEmpty = true;
          var effectiveChildren = Polymer.dom(this).getEffectiveChildNodes();
          for (var i = 0; i < effectiveChildren.length; i++) {
            if (effectiveChildren[i].textContent.trim() !== '') {
              allChildrenEmpty = false;
              break;
            }
          }
          if (allChildrenEmpty) {
            return;
          }
        }


        this.cancelAnimation();
        this._showing = true;
        this.toggleClass('hidden', false, this.$.tooltip);
        this.updatePosition();

        this.animationConfig.entry[0].timing = this.animationConfig.entry[0].timing || {};
        this.animationConfig.entry[0].timing.delay = this.animationDelay;
        this._animationPlaying = true;
        this.playAnimation('entry');
      },

      hide: function() {
        // If the tooltip is already hidden, there's nothing to do.
        if (!this._showing) {
          return;
        }

        // If the entry animation is still playing, don't try to play the exit
        // animation since this will reset the opacity to 1. Just end the animation.
        if (this._animationPlaying) {
          this.cancelAnimation();
          this._showing = false;
          this._onAnimationFinish();
          return;
        }

        this._showing = false;
        this._animationPlaying = true;
        this.playAnimation('exit');
      },

      updatePosition: function() {
        if (!this._target || !this.offsetParent)
          return;

        var offset = this.offset;
        // If a marginTop has been provided by the user (pre 1.0.3), use it.
        if (this.marginTop != 14 && this.offset == 14)
          offset = this.marginTop;

        var parentRect = this.offsetParent.getBoundingClientRect();
        var targetRect = this._target.getBoundingClientRect();
        var thisRect = this.getBoundingClientRect();

        var horizontalCenterOffset = (targetRect.width - thisRect.width) / 2;
        var verticalCenterOffset = (targetRect.height - thisRect.height) / 2;

        var targetLeft = targetRect.left - parentRect.left;
        var targetTop = targetRect.top - parentRect.top;

        var tooltipLeft, tooltipTop;

        switch (this.position) {
          case 'top':
            tooltipLeft = targetLeft + horizontalCenterOffset;
            tooltipTop = targetTop - thisRect.height - offset;
            break;
          case 'bottom':
            tooltipLeft = targetLeft + horizontalCenterOffset;
            tooltipTop = targetTop + targetRect.height + offset;
            break;
          case 'left':
            tooltipLeft = targetLeft - thisRect.width - offset;
            tooltipTop = targetTop + verticalCenterOffset;
            break;
          case 'right':
            tooltipLeft = targetLeft + targetRect.width + offset;
            tooltipTop = targetTop + verticalCenterOffset;
            break;
        }

        // TODO(noms): This should use IronFitBehavior if possible.
        if (this.fitToVisibleBounds) {
          // Clip the left/right side
          if (parentRect.left + tooltipLeft + thisRect.width > window.innerWidth) {
            this.style.right = '0px';
            this.style.left = 'auto';
          } else {
            this.style.left = Math.max(0, tooltipLeft) + 'px';
            this.style.right = 'auto';
          }

          // Clip the top/bottom side.
          if (parentRect.top + tooltipTop + thisRect.height > window.innerHeight) {
            this.style.bottom = parentRect.height + 'px';
            this.style.top = 'auto';
          } else {
            this.style.top = Math.max(-parentRect.top, tooltipTop) + 'px';
            this.style.bottom = 'auto';
          }
        } else {
          this.style.left = tooltipLeft + 'px';
          this.style.top = tooltipTop + 'px';
        }

      },

      _addListeners: function() {
        if (this._target) {
          this.listen(this._target, 'mouseenter', 'show');
          this.listen(this._target, 'focus', 'show');
          this.listen(this._target, 'mouseleave', 'hide');
          this.listen(this._target, 'blur', 'hide');
          this.listen(this._target, 'tap', 'hide');
        }
        this.listen(this, 'mouseenter', 'hide');
      },

      _findTarget: function() {
        if (!this.manualMode)
          this._removeListeners();

        this._target = this.target;

        if (!this.manualMode)
          this._addListeners();
      },

      _manualModeChanged: function() {
        if (this.manualMode)
          this._removeListeners();
        else
          this._addListeners();
      },

      _onAnimationFinish: function() {
        this._animationPlaying = false;
        if (!this._showing) {
          this.toggleClass('hidden', true, this.$.tooltip);
        }
      },

      _removeListeners: function() {
        if (this._target) {
          this.unlisten(this._target, 'mouseenter', 'show');
          this.unlisten(this._target, 'focus', 'show');
          this.unlisten(this._target, 'mouseleave', 'hide');
          this.unlisten(this._target, 'blur', 'hide');
          this.unlisten(this._target, 'tap', 'hide');
        }
        this.unlisten(this, 'mouseenter', 'hide');
      }
    });
  </script>
</dom-module>
<!--
`<raml-docs-resource-viewer>` An element that displays a documentation for a RAML's resource object

**Note: This element requires `currentPath` property to be set** in order to compute methods and
sub-resources list. It is required for navigation.

### Example
```
<raml-docs-resource-viewer current-path="{{path}}" raml="{{resource}}"></raml-docs-resource-viewer>
```

## Requesting navigation to method / sub-property
When the user click on the name of a method or a sub-resource then the `raml-path-changed` event
will be fired with the `path` property in event detail object.
Parent element(s) should use this event to handle the change and navigate to sub-resource.

Method 1) assumes that Polymer's data binding model is used and parent element listens to change
in `currentPath`:
```
<raml-docs-resource-viewer current-path="{{path}}"></raml-docs-resource-viewer>
```
Note use of `{{}}` instead of `[[]]` ([more about that](https://www.polymer-project.org/1.0/docs/devguide/data-binding)).
Observers can observe change to the `path` property and change current object.

Second method uses event handling to handle path change:
```
<raml-docs-resource-viewer id="resourceViewer" current-path="[[path]]"></raml-docs-resource-viewer>
```
```
init: function() {
  document.querySelector('#resourceViewer').addEventListener('raml-path-changed', this._navigate.bind(this));
},

_navigate: function(e) {
  var path = e.detail.path;
  // Do somethind with path, like use `<raml-path-to-object>` element.
}
```


### Styling
The internal elemnts uses as uch width as they need. The code view displays
code snippets without text wrapping by defaul. To set proper width
set the `width` or `max-width` on this element so any code snippet will respect
this limitation.

```
<raml-docs-resource-viewer
  style="max-width: 900px"></raml-docs-resource-viewer>

```
This is also can be dome by setting `max-width` on any other parent elements.

`<raml-docs-resource-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-resource-viewer` | Mixin applied to the element | `{}` |
`--raml-docs-h1` | Mixin applied to H1 | `{}` |
`--raml-docs-h2` | Mixin applied to H2 | `{}` |
`--raml-docs-h3` | Mixin applied to H3 | `{}` |
`--raml-docs-item-description` | Mixin applied to the description field. | `{}` |
`--raml-docs-table-max-width` | Max width applied to the tables. Suggested to not exceed 800px, otherwise it may cause usability issues. | `800px` |
`--raml-docs-link` | Mixin applied to the links elements. | `{}` |
`--raml-docs-link-color` | Color of the link elements | `#00A1DF` |
`--docs-parameters-table` | Mixin applied to all parameter table elements | `{}`
`--docs-parameters-url-table` | Mixin applied to this elements | `{}`
`--params-table-header-background-color` | Background color of table header | `#00A1DF`
`--params-table-header-color` | Font color of table header | `rgba(255, 255, 255, 0.87)`
`--params-table-subheader-background-color` | Background color of table subheader | `rgba(0, 161, 223, 0.24)`
`--params-table-subheader-color` | Font color of table subheader | `rgba(0, 0, 0, 0.87)`
`--params-table-row-border-color` | Border color of table's each row | `#00A1DF`
`--params-table-row-background-color` | Background color of table's each row |  `#fff`
`--params-table-row-color` | Font color of table's each row |  `#fff`
`--docs-parameters-table-cell` | Mixin applied to each cell | `{}`
`--docs-parameters-table-meta` | Mixin applied to property's metadata (example, pattern, etc) | `{}`
`--raml-docs-resource-viewer-title-border-color` | Border color applied to the border of the section headline elements | `#e5e5e5`
`--raml-docs-resource-viewer-narrow-container-width` | width of the main container in the narrow view | `calc(100vw - 32px)`
`--raml-docs-resource-viewer-navigation` | Mixin applied to the links section | `{}`
`--raml-docs-resource-viewer-navigation-wide-layout` | Mixin applied to the links section in wide layout | `{}`
`--raml-docs-resource-viewer-content` | Mixin applied to the main content section. | `{}`
`--raml-docs-resource-viewer-container` | Mixin applied to the container that is holding main content and navigation containers | `{}`
`--arc-font-headline` | | Mixin applied to all headline (h1) elements in ARC ecosystem. | `{}`
`--arc-font-title` | Mixin applied to all title elements in ARC ecosystem. | `{}`
`--arc-font-body1` | Mixin applied to a ARC's body element | `{}`
`--sidebar-list` | Mixin applied to sidebar list of links | `{}`
`--sidebar-list-link` | Mixin applied to each link in sidebar list of links | `{}`
`--sidebar-list-link-hover` | Mixin applied to :hover state for links in sidebar list of links | `{}`
`--toggle-button` | Mixin applied to toggling button (show/hide) | `{}`
`--toggle-button-hover` | Mixin applied to toggling button on hover (show/hide) | `{}`
`--raml-docs-method-viewer-title-area-actions` | Mixin applied to toggling actions area | `{}`
`--raml-docs-method-viewer-traits-list` | Mixin applied to the list of traits container | `{}`
`--raml-docs-method-viewer-traits-list-values` | Mixin applied to the list of traits values (names) | `{}`
`--raml-docs-method-viewer-traits-list-label` | Mixin applied to the list of traits list label | `{}`
`--raml-docs-method-viewer-traits-list-values-color` | Color of the traits list values (names) | `rgba(0,0,0,0.94)`
`--raml-docs-method-viewer-traits-list-label-color` | Color of the traits list label | `rgba(0,0,0,0.74)`
`--raml-docs-method-viewer-traits-list-help-icon` | A mixin applied to the "more info" icon | `{}`
`--raml-docs-method-viewer-traits-list-padding` | Padding applied to the traits and resource types container | `0px 12px`

@group RAML Elements
@element raml-docs-resource-viewer
@demo demo/index.html
-->
<dom-module id="raml-docs-resource-viewer" assetpath="bower_components/raml-docs-resource-viewer/">
  <template>
    <style include="markdown-styles"></style>
    <style include="docs-parameters-table-shared-styles"></style>
    <style>
     :host {
      display: block;
      @apply(--raml-docs-resource-viewer);

      --paper-tabs-selection-bar-color: var(--params-table-header-background-color, #00A1DF);
      --paper-tab-ink: var(--params-table-header-background-color, #00A1DF);

      --paper-tab: {
        flex: initial;
      }
      --content-section: {
        padding: 8px 12px;
      }
    }

    :host([hidden]) {
      display: none !important;
    }

    h1 {
      @apply(--arc-font-headline);
      @apply(--content-section);
      @apply(--raml-docs-h1);
    }

    h2 {
      @apply(--arc-font-title);
      @apply(--content-section);
      @apply(--raml-docs-h2);
    }

    h3 {
      @apply(--paper-font-subhead);
      @apply(--content-section);
      @apply(--raml-docs-h3);
    }

    .resource-name {
      font-weight: 500;
    }

    .resource-desc {
      @apply(--arc-font-body1);
      @apply(--content-section);
      @apply(--raml-docs-item-description);
    }

    .type-block {
      @apply(--content-section);
    }

    .params-table,
    docs-body-parameters-table {
      max-width: var(--raml-docs-table-max-width, 800px);
    }

    .sub-resources-list {
      @apply(--content-section);
    }

    a {
      color: var(--raml-docs-link-color, #00A1DF);
      @apply(--raml-docs-link);
    }

    .container {
      @apply(--layout-horizontal);
      @apply(--raml-docs-resource-viewer-container);
    }

    .main {
      @apply(--layout-flex);
      overflow: auto;
      @apply(--raml-docs-resource-viewer-content);
    }

    nav {
      width: 210px;
      border-left: 1px #e5e5e5 solid;
      padding-left: 12px;
      margin: 12px 0;
      position: relative;
      display: none;
      @apply(--raml-docs-resource-viewer-navigation);
    }

    [wide-layout] nav {
      display: block;
      @apply(--raml-docs-resource-viewer-navigation-wide-layout);
    }

    #nav-links {
      position: absolute;
      @apply(--sidebar-list);
    }

    #nav-links a {
      display: block;
      padding: 8px 12px;
      margin: 8px 0;
      @apply(--sidebar-list-link);
    }

    #nav-links a:hover {
      @apply(--sidebar-list-link-hover);
    }

    :host([narrow]) .container {
      max-width: var(--raml-docs-resource-viewer-narrow-container-width, calc(100vw - 32px));
      overflow: auto;
    }

    .section-title-area {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      border-bottom: 1px var(--raml-docs-resource-viewer-title-border-color, #e5e5e5) solid;
    }

    .section-title-area h2 {
      @apply(--layout-flex);
    }

    .toggle-button {
      color: var(--response-status-view-toggle-icon-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
      @apply(--toggle-button);
    }

    .toggle-icon {
      transform: rotateZ(0deg);
      transition: transform 0.3s linear;
    }

    .toggle-icon.opened {
      transform: rotateZ(-180deg);
    }

    .toggle-button:hover {
      color: var(--response-status-view-toggle-icon-hover-color, rgba(0, 0, 0, 0.78));
      @apply(--toggle-button-hover);
    }

    .title-area-actions {
      @apply(--raml-docs-method-viewer-title-area-actions);
    }

    .traits-list,
    .resource-types-list {
      margin-bottom: 8px;
      color: rgba(0,0,0,0.74);
      padding: var(--raml-docs-method-viewer-traits-list-padding, 0px 12px);
      @apply(--raml-docs-method-viewer-traits-list);
    }

    .trait-value,
    .resource-types-value {
      color: var(--raml-docs-method-viewer-traits-list-values-color, rgba(0,0,0,0.94));
      @apply(--raml-docs-method-viewer-traits-list-values);
    }

    .trait-label,
    .resource-types-label {
      color: var(--raml-docs-method-viewer-traits-list-label-color, inherit);
      @apply(--raml-docs-method-viewer-traits-list-label);
    }

    .help-icon-link-external {
      width: 16px;
      height: 16px;
      vertical-align: text-bottom;
      @apply(--raml-docs-method-viewer-traits-list-help-icon);
    }

    .title-area-actions {
      @apply(--title-area-actions);
    }

    </style>

    <iron-media-query query="(min-width: 800px)" query-matches="{{wide}}"></iron-media-query>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>

    <div class="container" wide-layout$="[[isWideLayout]]">
      <div class="main">
        <div class="title-area">
          <h1 id="overview" class="title">
            <span>Resource: </span>
            <span class="resource-name">[[_computeResourceName(raml.*)]]</span>
          </h1>
        </div>

        <template is="dom-if" if="[[hasTraits]]">
          <div class="traits-list">
            <span class="trait-label">Traits:</span>
            <span class="trait-value">[[_computeTraitsList(raml.is)]]</span>
            <a href="https://github.com/raml-org/raml-spec/blob/master/versions/raml-10/raml-10.md/#resource-types-and-traits" target="_blank"><iron-icon icon="arc:help-outline" class="help-icon-link-external"></iron-icon></a>
            <paper-tooltip>A trait provids a method-level nodes such as description, headers, query string parameters, and responses.</paper-tooltip>
          </div>
        </template>

        <template is="dom-if" if="[[hasResourceTypes]]">
          <div class="resource-types-list">
            <span class="resource-types-label">Resource types:</span>
            <span class="resource-types-value">[[_computeResourceTypesList(raml.type)]]</span>
            <a href="https://github.com/raml-org/raml-spec/blob/master/versions/raml-10/raml-10.md/#resource-types-and-traits" target="_blank"><iron-icon icon="arc:help-outline" class="help-icon-link-external"></iron-icon></a>
            <paper-tooltip>A resource type can specify security schemes, methods, and other nodes that can be applied to a resource as a reusable asset in RAML.</paper-tooltip>
          </div>
        </template>

        <template is="dom-if" if="[[raml.description]]">
          <marked-element smartypants="" markdown="[[raml.description]]">
            <div class="markdown-html resource-desc"></div>
          </marked-element>
        </template>
        <section hidden$="[[!hasTypes]]">
          <div class="section-title-area">
            <h2 id="resources">Types</h2>
            <div class="title-area-actions">
              <paper-button on-tap="toggleTypesCollapse" class="toggle-button" title="Toogle types details">
                [[_computeToggleActionLabel(typesOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(typesOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[typesOpened]]">
            <template is="dom-repeat" items="[[types]]">
              <div class="type-block">
                <docs-body-parameters-table narrow="[[narrow]]" body="[[item]]" auto-hide=""></docs-body-parameters-table>
              </div>
            </template>
          </iron-collapse>
        </section>
        <section hidden$="[[!hasSubproperties]]">
          <div class="section-title-area">
            <h2 id="methods">Methods and sub-resources</h2>
            <div class="title-area-actions">
              <paper-button on-tap="toggleMethodsCollapse" class="toggle-button" title="Toogle methods and sub-resources details">
                [[_computeToggleActionLabel(methodsOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(methodsOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[methodsOpened]]">
            <div class="sub-resources-list">
              <table class="params-table" id="substable">
                <thead class="params-table-header">
                  <tr>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr hidden$="[[!methods]]" class="params-table-header subheader">
                    <td colspan="3">Methods</td>
                  </tr>
                  <template is="dom-repeat" items="[[methods]]">
                    <tr>
                      <td class="param-name"><a href="#" data-path$="[[item.path]]">[[item.meta.name]]</a></td>
                      <td class="param-desc">[[item.meta.description]]</td>
                    </tr>
                  </template>
                  <tr hidden$="[[!resources]]" class="params-table-header subheader">
                    <td colspan="3">Sub-resources</td>
                  </tr>
                  <template is="dom-repeat" items="[[resources]]">
                    <tr>
                      <td class="param-name"><a href="#" data-path$="[[item.path]]">[[item.meta.name]]</a></td>
                      <td class="param-desc">[[item.meta.description]]</td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
          </iron-collapse>
        </section>
      </div>
      <nav>
        <div id="nav-links">
          <a href="#overview">Overview</a>
          <a hidden$="[[!hasTypes]]" href="#resources">Resources</a>
          <a href="#methods">Methods</a>
        </div>
      </nav>
    </div>
  </template>
  <script>
  Polymer({
    is: 'raml-docs-resource-viewer',

    behaviors: [
      Polymer.RamlBehavior,
      Polymer.IronScrollTargetBehavior
    ],
    /**
     * An event fired when the user cliecked on a method/sub-resource link.
     * Before the event is fired the `currentPath` propery is set. If parent
     * element is listening for change on this property then it's redundand to
     * listen for this event.
     *
     * @event raml-path-changed
     * @property {String} path Path requested by the user.
     */
    properties: {
      /**
       * Computed value. List of types used by this endpoint.
       * The elements looks for types inside methods of this resource.
       *
       * It will not search for types in nested resources.
       */
      types: {
        type: Array,
        readOnly: true
      },
      // Computed value. True when the resource has types defined in it.
      hasTypes: {
        type: Boolean,
        value: false,
        computed: '_computeHasTypes(types.length)'
      },
      // If true, the method has traits applied to it.
      hasTraits: {
        type: Boolean,
        readOnly: true
      },
      // If true, the method has traits applied to it.
      hasResourceTypes: {
        type: Boolean,
        readOnly: true
      },
      /**
       * Curently selected path in the RAML JSON structure. Required to compute
       * sub-resources.
       */
      currentPath: {
        type: String
      },
      // Computed list of methods. It's the element's internal structure.
      methods: Array,
      // Computed list of resources. It's the element's internal structure.
      resources: Array,
      // Computed value, True if the resource has methods or sub-resources.
      hasSubproperties: {
        type: Boolean,
        computed: '_computeHasSubproperties(methods, resources)'
      },
      /**
       * If true then the element will start listen for the
       * `raml-is-resource-changed`, `raml-selected-object-changed` and
       * `raml-selected-path-changed` event and set corresponding properties
       * when needed. It's a replacement for the Polymer's data biding
       * for apps that are not Polymer powered.
       */
      autoHide: {
        type: Boolean,
        value: false,
        observer: '_autoHideChanged'
      },
      // If true then the element will be hidden ui the UI.
      hidden: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },
      // If true then there's enough space to display right column
      wide: {
        type: Boolean,
        value: false
      },
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      // If true then the types section is visible.
      typesOpened: {
        type: Boolean,
        value: true
      },
      // If true then the methods and sub-resources section is visible.
      methodsOpened: {
        type: Boolean,
        value: true
      },
      // Computed value, true if renders wide layout (with nav links)
      isWideLayout: {
        type: Boolean,
        computed: '_computeIsWideLayout(narrow, wide)'
      }
    },

    observers: [
      '_objectChanged(raml.*)',
      '_computeMethods(currentPath, raml.*)',
      '_computeResources(currentPath, raml.*)'
    ],

    listeners: {
      'substable.tap': '_subResourceTap',
      'nav-links.tap': '_navLinksTap'
    },

    attached: function() {
      this._eventTarget = Polymer.dom(this).host || document;
      if (this.autoHide) {
        this._attacheListeners();
      }
      this.listen(window, 'scroll', '_scrollHandler');
    },

    detached: function() {
      this._detachListeners();
      this.unlisten(window, 'scroll', '_scrollHandler');
    },

    _autoHideChanged: function(state) {
      if (state) {
        this._attacheListeners();
      } else {
        this._detachListeners();
      }
    },

    _attacheListeners: function() {
      if (!this._eventTarget) {
        this.hidden = true;
        return;
      }
      this._detachListeners();
      this.listen(this._eventTarget, 'raml-is-resource-changed',
        '_isResourceHandler');
      this.listen(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
      this.listen(this._eventTarget, 'raml-selected-path-changed',
        '_selectedPathChangeHandler');
    },

    _detachListeners: function() {
      if (!this._eventTarget) {
        return;
      }
      this.unlisten(this._eventTarget, 'raml-is-resource-changed',
        '_isResourceHandler');
      this.unlisten(this._eventTarget, 'raml-selected-object-changed',
        '_selectedChangeHandler');
      this.unlisten(this._eventTarget, 'raml-selected-path-changed',
        '_selectedPathChangeHandler');
    },
    /**
     * It's a handler for the `raml-is-resource-changed` event fired
     * by other element. It sets the `hidden` value depending on the
     * event's `state` parameter.
     */
    _isResourceHandler: function(e, detail) {
      var state = detail.state;
      this.hidden = !state;
    },
    /**
     * Handler for the `selectedObject` (from the `<raml-path-to-object>`).
     */
    _selectedChangeHandler: function(e, detail) {
      if (this.hidden) {
        this.raml = undefined;
        return;
      }
      this.raml = detail.selectedObject;
    },

    _selectedPathChangeHandler: function(e, detail) {
      if (this.hidden) {
        this.currentPath = undefined;
        return;
      }
      this.currentPath = detail.path;
    },

    // Computes the name of the resource.
    _computeResourceName: function() {
      var r = this.raml;
      if (!r) {
        return '';
      }
      return r.displayName || r.relativeUri;
    },

    _objectChanged: function(record) {
      var raml = record && record.base;
      if (!raml) {
        this._setHasTraits(false);
        this._setHasResourceTypes(false);
        this._setTypes(undefined);
        return;
      }
      if (raml.is && raml.is.length) {
        this._setHasTraits(true);
      } else {
        this._setHasTraits(false);
      }

      if (raml.type && (typeof raml.type === 'string' || raml.type.length)) {
        this._setHasResourceTypes(true);
      } else {
        this._setHasResourceTypes(false);
      }

      this._computeTypes(raml);
    },

    // Computes list of the types in current resource. Called automatically when `raml` change.
    _computeTypes: function(raml) {
      var types = [];
      var self = this;
      if (raml.methods && raml.methods.length) {
        raml.methods.forEach(function(method) {
          var type = self._listTypes(method);
          if (type) {
            types = types.concat(type);
          }
        });
      }
      this._setTypes(types);
    },

    _listTypes: function(obj) {
      var self = this;
      var types = [];
      var type = self._extractType(obj);
      if (type) {
        types[types.length] = type;
      }

      if (obj.responses) {
        var keys = Object.keys(obj.responses);
        keys.forEach(function(status) {
          var response = obj.responses[status];
          var type = self._extractType(response);
          if (type) {
            types[types.length] = type;
          }
        });
      }
      return types;
    },

    _extractType: function(obj) {
      if (!obj || !obj.body || !obj.body.length) {
        return;
      }
      return obj.body;
    },

    // Computes if the resource has defined types. It will revalidate when `types` array change.
    _computeHasTypes: function() {
      return !!(this.types && this.types.length);
    },

    _computeMethods: function(currentPath) {
      var r = this.raml;
      if (!currentPath || !r || !r.methods || !r.methods.length) {
        this.methods = null;
        return;
      }
      var methods = [];
      r.methods.forEach(function(method, i) {
        methods[methods.length] = {
          path: currentPath + '.methods.' + i,
          meta: {
            name: method.displayName || method.method,
            description: method.description
          }
        };
      });
      if (methods.length === 0) {
        methods = null;
      }
      this.methods = methods;
    },

    _computeResources: function(currentPath) {
      var r = this.raml;
      if (!currentPath || !r || !r.resources || !r.resources.length) {
        this.resources = null;
        return;
      }
      var resources = [];
      r.resources.forEach(function(resource, i) {
        resources[resources.length] = {
          path: currentPath + '.resources.' + i,
          meta: {
            name: resource.displayName || resource.relativeUri,
            description: resource.description
          }
        };
      });
      if (resources.length === 0) {
        resources = null;
      }
      this.resources = resources;
    },
    // Computes the value for the hasSubproperties property.
    _computeHasSubproperties: function(methods, resources) {
      return !!((methods && methods.length) || (resources && resources.length));
    },

    _subResourceTap: function(e) {
      e.preventDefault();
      e.stopPropagation();
      var path = e.target.dataset.path;
      if (!path) {
        return;
      }
      // this.set('currentPath', path);
      this.fire('raml-path-changed', {
        path: path
      });
    },

    _navLinksTap: function(e) {
      e.preventDefault();
      e.stopPropagation();
      var targetId = e.target.getAttribute('href');
      if (!targetId) {
        return;
      }
      var target = this.$$(targetId);
      this.scroll(0, target.offsetTop);
    },

    _scrollHandler: function() {
      var elm = this.$$('#nav-links');
      var parent = elm.parentNode;
      var top = parent.getBoundingClientRect().top;
      if (top < 24) {
        var _top = Math.abs(top) + 24;
        elm.style.top = _top + 'px';
      } else {
        elm.style.removeProperty('top');
      }
    },

    // Computes class for the toggle's button icon.
    _computeToggleIconClass: function(opened) {
      var clazz = 'toggle-icon';
      if (opened) {
        clazz += ' opened';
      }
      return clazz;
    },
    // Computes a label for the section toggle buttons.
    _computeToggleActionLabel: function(opened) {
      return opened ? 'Hide' : 'Show';
    },
    /**
     * Toogles types section opened / closed.
     */
    toggleTypesCollapse: function() {
      this.typesOpened = !this.typesOpened;
    },
    /**
     * Toogles types section opened / closed.
     */
    toggleMethodsCollapse: function() {
      this.methodsOpened = !this.methodsOpened;
    },
    /**
     * Computes the sate of the `isWideLayout` property.
     */
    _computeIsWideLayout: function(narrow, wide) {
      return !narrow && wide;
    },

    // Computes list of traits names to display in the view.
    _computeTraitsList: function(traits) {
      if (!traits || !traits.length) {
        return;
      }
      return traits.map(function(trait) {
        if (typeof trait === 'string') {
          return trait;
        }
        if (trait.name) {
          return trait.name;
        }
        try {
          var keys = Object.keys(trait);
          return keys[0];
        } catch (e) {}
      }).join(', ');
    },
    // Computes list of resource type names to display in the view.
    _computeResourceTypesList: function(type) {
      if (!type) {
        return;
      }
      if (typeof type === 'string') {
        return type;
      }
      return traits.map(function(item) {
        if (typeof item === 'string') {
          return item;
        }
        if (item.name) {
          return item.name;
        }
        try {
          var keys = Object.keys(item);
          return keys[0];
        } catch (e) {}
      }).join(', ');
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
# `<raml-summary-view>`
A basic information about the RAML definition viewer for the documentation panel.

### Example
```
<raml-summary-view raml="[[raml]]"></raml-summary-view>
```
or in vanila JavaScript
```
let summary = document.querySelector('#raml-summary-view');
summary.raml = raml;
```

### Styling
`<raml-summary-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-summary-view` | Mixin applied to the element | `{}`
`--raml-summary-view-title` | Mixin applied to the API title element | `{}`
`--raml-summary-view-property` | Mixin applied to each line of attributes applied in the basic documentation view | `{}`
`--raml-summary-view-description-color` | Color of the description of the API. | `rgba(0, 0, 0, 0.54)`
`--raml-summary-view-description-max-width` | Max width of the API description | `700px`
`--raml-summary-view-description-value-color` | The color of the property value description | `rgba(0, 0, 0, 0.74)`

@group RAML Elements
@element raml-summary-view
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="raml-summary-view" assetpath="bower_components/raml-summary-view/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      @apply(--raml-summary-view);
    }

    :host([hidden]) {
      display: none;
    }

    h1 {
      @apply(--paper-font-title);
      @apply(--raml-summary-view-title);
    }

    h3 {
      @apply(--arc-font-body1);
      margin: 24px 0;
      color: rgba(0, 0, 0, 0.87);
    }

    p.simple-desc {
      margin: 8px 0;
      color: rgba(0, 0, 0, 0.87);
      @apply(--arc-font-body1);
      @apply(--raml-summary-view-property);
    }

    .simple-desc > span {
      color: var(--raml-summary-view-description-value-color, rgba(0, 0, 0, 0.74));
    }

    .api-description {
      margin: 20px 0;
      color: var(--raml-summary-view-description-color, rgba(0, 0, 0, 0.74));
      @apply(--arc-font-body1);
      font-size: 15px;
      max-width: var(--raml-summary-view-description-max-width, 700px);
      @apply(--raml-summary-view-property);
    }
    </style>
    <h1>[[raml.title]]</h1>

    <p class="simple-desc" hidden$="[[isEmpty(raml.version)]]">
      <label>Version</label>
      <span>[[raml.version]]</span>
    </p>

    <p class="simple-desc" hidden$="[[isEmpty(raml.baseUri)]]">
      <label>Base URL</label>
      <span>[[raml.baseUri]]</span>
    </p>

    <p class="simple-desc" hidden$="[[isEmpty(raml.mediaType)]]">
      <label>Supported media type:</label>
      <span>[[_displayArray(raml.mediaType)]]</span>
    </p>

    <p class="simple-desc" hidden$="[[isEmpty(raml.protocols)]]">
      <label>Supported protocols:</label>
      <span>[[_displayArray(raml.protocols)]]</span>
    </p>

    <div hidden$="[[isEmpty(raml.description)]]" class="api-description">
      <marked-element markdown="[[raml.description]]">
        <div class="markdown-html markdown-body"></div>
      </marked-element>
    </div>

    <h3 hidden$="[[!hasUriParameteres]]">URI parameters</h3>
    <docs-parameters-table hidden$="[[!hasUriParameteres]]" uri-parameters="[[raml.baseUriParameters]]" has-uri-parameteres="{{hasUriParameteres}}" auto-hide=""></docs-parameters-table>
  </template>
  <script>
  Polymer({
    is: 'raml-summary-view',
    behaviors: [Polymer.RamlBehavior],

    properties: {
      // True if the base raml has URI parametersd defined.
      hasUriParameteres: Boolean
    },
    // Displays array values.
    _displayArray: function(arr) {
      if (!arr) {
        return '';
      }
      if (!(arr instanceof Array)) {
        return arr;
      }
      return arr.join(', ');
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<raml-docs-types-viewer>` A documentation viewer for RAML types

### Example
```
<raml-docs-types-viewer></raml-docs-types-viewer>
```

### Styling
`<raml-docs-types-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-docs-types-viewer` | Mixin applied to the element | `{}`

@group UI Elements
@element raml-docs-types-viewer
@demo demo/index.html
-->
<dom-module id="raml-docs-types-viewer" assetpath="bower_components/raml-docs-types-viewer/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
    }


    h2 {
      @apply(--arc-font-headline);
      @apply(--raml-docs-h1);
    }

    h2 .value {
      font-weight: var(--raml-docs-types-viewer-title-type-font-weight, 500);
      margin-left: 8px;
    }

    .type-desc {
      margin-bottom: 28px;
      color: rgba(0,0,0,0.74);
      @apply(--arc-font-body1);
      @apply(--raml-docs-types-viewer-content-section);
      @apply(--raml-docs-item-description);
    }
    </style>
    <h2>
      <span class="label">Type</span>
      <span class="value">[[_computeTypeName(type)]]</span>
    </h2>

    <div hidden$="[[_computeTypeMethodDesc(type.description)]]" class="type-desc">
      <marked-element markdown="[[type.description]]">
        <div class="markdown-html markdown-body"></div>
      </marked-element>
    </div>

    <docs-json-parameters-table type="[[_computeType(type)]]" structure-display-opened="" narrow="[[narrow]]"></docs-json-parameters-table>
    <iron-media-query query="max-width: 640px" query-matches="{{narrow}}"></iron-media-query>
  </template>
  <script>
  Polymer({
    is: 'raml-docs-types-viewer',
    properties: {
      // A type declaration to display.
      type: Object,
      /**
       * Set to true when whould display narrow layout.
       */
      narrow: Boolean
    },

    _computeTypeName: function(type) {
      if (!type) {
        return;
      }
      return type.displayName || type.name || type.key || undefined;
    },

    _computeType: function(type) {
      if (!type) {
        return;
      }
      if (type.properties) {
        if (!(type.properties instanceof Array)) {
          var names = Object.getOwnPropertyNames(type.properties);
          var properties = [];
          names.forEach(function(name) {
            var item = type.properties[name];
            item.key = name;
            properties.push(item);
          });
          type.properties = properties;
        }
      }
      return type;
    },

    _computeTypeMethodDesc: function(description) {
      return !description;
    },
  });
  </script>
</dom-module>
<!-- <link rel="import" href="raml-documentation-empty-state.html"> -->
 <!--
The documentation viewer.

It displays a documentation panel depending on if the selected object is a
method, resource, type or the documentation node.

The element will compute current view from the `path` property. However, if
the app is using [raml-path-to-object](https://elements.advancedrestclient.com/elements/raml-path-to-object)
element the you can set the `handlePathEvents` property which will make the
element to register event listeners fired from the `raml-path-to-object`
element. It will skip internall path computation to not double the work.

The element is consisted with the following documentation viewers:
- raml-docs-method-viewer
- raml-docs-resource-viewer
- raml-docs-documentation-viewer
- raml-summary-view
- raml-docs-types-viewer

Elements that are not displayed at a time are demoved from the DOM and are
inavtive. Only active elements observe changes to the `selected-object` property
and perform internall computation (it's optimisation).

### Example
```html
<raml-path-to-object path="types.0"></raml-path-to-object>
<raml-documentation-panel handle-path-events"></raml-documentation-panel>
<script>
var pto = document.querySelector('raml-path-to-object');
var docs = document.querySelector('raml-documentation-panel');
pto.addEventListener('selected-object-changed', function(e) {
  docs.selectedObject = e.detail.value;
});
pto.addEventListener('selected-parent-changed', function(e) {
  docs.selectedParent = e.detail.value;
});
</script>
```

### Handling scrolling

Set the `scrollTarget` to an element that has a scroll region to suppoer
scrolling in the elements. The resource documentation panel handles internall
links that are expected to scroll the view to correspoinding sections.
This default to the window object.

### Styling
`<raml-documentation-panel>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-documentation-panel` | Mixin applied to the element | `{}`
`--raml-docs-main-content` | Mixin applied to the main docs content (where the docs content is displayed). | `{}`
`--raml-docs-main-content-width` | Max width of the documentation panel. Additional space is required for innner panels navigation | `900px`
`--raml-docs-documentation-width` | Max width of the documentation panel. It should be used to avoid usability issues for reading long texts. | `700px`

@group RAML Elements
@element raml-documentation-panel
@demo demo/index.html
-->
<dom-module id="raml-documentation-panel" assetpath="bower_components/raml-documentation-panel/">
  <template>
    <style>
     :host {
      display: block;
      height: 100%;
      @apply(--raml-documentation-panel);
    }

    .docs-content {
      max-width: var(--raml-docs-main-content-width, 900px);
      @apply(--layout-flex);
      @apply(--raml-docs-main-content);
    }

    .docs-content raml-docs-documentation-viewer {
      max-width: var(--raml-docs-documentation-width, 700px);
    }

    .no-selection,
    .docs-content {
      height: 100%;
    }
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <div class="docs-content">
      <!-- <div class="no-selection" hidden$="[[hasSelection]]">
        <raml-documentation-empty-state></raml-documentation-empty-state>
      </div> -->
      <template is="dom-if" if="[[isMethod]]">
        <raml-docs-method-viewer parent-endpoint="[[selectedParent]]" raml="[[selectedObject]]" narrow="[[narrow]]" no-try-it="[[noTryIt]]"></raml-docs-method-viewer>
      </template>
      <template is="dom-if" if="[[isResource]]">
        <raml-docs-resource-viewer raml="[[selectedObject]]" current-path="{{path}}" narrow="[[narrow]]" scroll-target="[[scrollTarget]]"></raml-docs-resource-viewer>
      </template>
      <template is="dom-if" if="[[isDocumentation]]">
        <raml-docs-documentation-viewer documentation="[[selectedObject]]" narrow="[[narrow]]"></raml-docs-documentation-viewer>
      </template>
      <template is="dom-if" if="[[isSummary]]">
        <raml-summary-view raml="[[selectedObject]]" narrow="[[narrow]]"></raml-summary-view>
      </template>
      <template is="dom-if" if="[[isType]]">
        <raml-docs-types-viewer type="[[selectedObject]]" narrow="[[narrow]]"></raml-docs-types-viewer>
      </template>
    </div>
  </template>
  <script>
  Polymer({
    is: 'raml-documentation-panel',

    properties: {
      // Selcted path in the path selector.
      path: {
        type: String,
        notify: true,
        observer: '_pathChanged'
      },
      // An object selected in the `raml-path-selector`
      selectedObject: Object,
      // Parent object selected in the `raml-path-selector`
      selectedParent: Object,
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      // Set to true if the selected object is a method node of the RAML
      isMethod: {
        type: Boolean,
        readOnly: true,
        value: false
      },
      // Set to true if the selected object is a resource node of the RAML
      isResource: {
        type: Boolean,
        readOnly: true,
        value: false
      },
      // Set to true if the selected object is a documentation node of the RAML
      isDocumentation: {
        type: Boolean,
        readOnly: true,
        value: false
      },
      // Set to true if the selected object is a summary view for the RAML
      isSummary: {
        type: Boolean,
        readOnly: true,
        value: false
      },
      // Set to true if the selected object is a summary view for the RAML
      isType: {
        type: Boolean,
        readOnly: true,
        value: false
      },
      // Computed value if there is any selection made.
      hasSelection: {
        type: Boolean,
        value: false,
        notify: true,
        computed: '_computeHasSelection(isMethod, isResource, isDocumentation, isSummary, isType)'
      },
      // An element that handles application scroll region.
      // Default scroll target is the window.
      scrollTarget: HTMLElement,
      /**
       * By default the element computes which view to display.
       * If this property is set then it will not compute current view
       * type and will listen for events fired by the `raml-path-to-object`
       * element. Use it only if you use `raml-path-to-object` to optymize
       * the app.
       */
      handlePathEvents: {
        type: Boolean,
        observer: '_handleEventsChanged'
      },
      // True when the element is attached to the DOM.
      isElementAttached: {
        type: Boolean,
        readOnly: true
      },
      /**
       * If set then the API console hide the "try it" button from the
       * method documentation view. The request and response panels still will
       * be available, but to enter this section you'll have to do it
       * programatically.
       */
      noTryIt: Boolean
    },

    observers: [
      '_handleEventsChanged(handlePathEvents, isElementAttached)'
    ],

    attached: function() {
      this._setIsElementAttached(true);
    },

    detached: function() {
      this._setIsElementAttached(false);
    },

    // Returns true if any of the arguments is trurly
    _computeHasSelection: function(isMethod, isResource, isDocumentation,
        isSummary, isType) {
      return !!(isMethod || isResource || isDocumentation || isSummary || isType);
    },
    // Hadnles path change and computes selected object type.
    _pathChanged: function(path) {
      if (this.handlePathEvents) {
        return;
      }
      var isMethod = false;
      var isResource = false;
      var isDocumentation = false;
      var isSummary = false;
      var isType = false;

      if (path) {
        if (path.indexOf('documentation') === 0) {
          isDocumentation = true;
        } else if (/methods\.\d+$/.test(path)) {
          isMethod = true;
        } else if (/resources\.\d+$/.test(path)) {
          isResource = true;
        } else if (path === 'summary') {
          isSummary = true;
        } else if (/types\.\d+$/.test(path)) {
          isType = true;
        }
      }

      this._setIsMethod(isMethod);
      this._setIsResource(isResource);
      this._setIsDocumentation(isDocumentation);
      this._setIsSummary(isSummary);
      this._setIsType(isType);
    },
    /**
     * Handler for the `handlePathEvents` property change.
     * Registers or unregisters path change listeners depending on
     * the `handlePathEvents` property value.
     */
    _handleEventsChanged: function(handlePathEvents, isElementAttached) {
      if (handlePathEvents && isElementAttached) {
        this.registerPathEvents();
      } else {
        this.unregisterPathEvents();
      }
    },
    /**
     * Resisters raml-path-to-object events fired when the path change.
     *
     * Handled events:
     * - raml-is-method-changed
     * - raml-is-resource-changed
     * - raml-is-documentation-changed
     * - raml-is-summary-changed
     * - raml-is-type-changed
     */
    registerPathEvents: function() {
      this.listen(window, 'raml-is-method-changed', '_onChangedSateMethod');
      this.listen(window, 'raml-is-resource-changed', '_onChangedSateResource');
      this.listen(window, 'raml-is-documentation-changed', '_onChangedSateDocs');
      this.listen(window, 'raml-is-summary-changed', '_onChangedSateSummary');
      this.listen(window, 'raml-is-type-changed', '_onChangedSateType');
      // raml-selected-object-changed
      // raml-selected-parent-changed
    },

    unregisterPathEvents: function() {
      this.unlisten(window, 'raml-is-method-changed', '_onChangedSateMethod');
      this.unlisten(window, 'raml-is-resource-changed', '_onChangedSateResource');
      this.unlisten(window, 'raml-is-documentation-changed', '_onChangedSateDocs');
      this.unlisten(window, 'raml-is-summary-changed', '_onChangedSateSummary');
      this.unlisten(window, 'raml-is-type-changed', '_onChangedSateType');
    },

    _onChangedSateMethod: function(e) {
      this._setIsMethod(e.detail.state);
    },

    _onChangedSateResource: function(e) {
      this._setIsResource(e.detail.state);
    },

    _onChangedSateDocs: function(e) {
      this._setIsDocumentation(e.detail.state);
    },

    _onChangedSateSummary: function(e) {
      this._setIsSummary(e.detail.state);
    },

    _onChangedSateType: function(e) {
      this._setIsType(e.detail.state);
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>

Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(global) {
  'use strict';

  global.ArcBehaviors = global.ArcBehaviors || {};
  /**
   * Headers parser behavior to be impplemented with elements that needs to parse headers data.
   *
   * In most cases function defined in this behavior can work with the headers defined as a string,
   * array of objects (name, value keys) or as Header object.
   *
   * To calculate errors properly, set `isPayload` property when current request can carry a
   * payload.
   *
   * @polymerBehavior ArcBehaviors.HeadersParserBehavior
   */
  global.ArcBehaviors.HeadersParserBehavior = {
    properties: {
      /**
       * Set to true when the request can carry a payload.
       * It's required for calculating headers errors.
       */
      isPayload: Boolean
    },
    /**
     * Filter array of headers and return not duplicated array of the same headers.
     * Duplicated headers should be appended to already found one using coma separator.
     *
     * @param {Array} headers
     *                Headers array to filter. All objects in headers array must have "name"
     *                and "value" keys.
     * @return {Array} An array of filtered headers.
     */
    filterHeaders: function(headers) {
      var _tmp = {};
      headers.forEach(function(header) {
        if (header.name in _tmp) {
          if (!!header.value) {
            _tmp[header.name] += ', ' + header.value;
          }
        } else {
          _tmp[header.name] = header.value;
        }
      });
      var result = [];
      for (var _key in _tmp) {
        result[result.length] = {
          'name': _key,
          'value': _tmp[_key]
        };
      }
      return result;
    },

    /**
     * Parse headers array to Raw HTTP headers string.
     *
     * @param {Array|String|Headers} headersArray List of objects with "name" and "value"
     * properties.
     * @returns {String} A HTTP representation of the headers.
     */
    headersToString: function(headersArray) {
      if (typeof headersArray === 'string') {
        return headersArray;
      }
      if (!(headersArray instanceof Array)) {
        headersArray = this.headersToJSON(headersArray);
      }
      if (headersArray.length === 0) {
        return '';
      }
      headersArray = this.filterHeaders(headersArray);
      var result = '';
      headersArray.forEach(function(header) {
        if (result !== '') {
          result += '\n';
        }
        var key = header.name;
        var value = header.value;
        if (key && key.trim() !== '') {
          result += key + ': ';
          if (value && value.trim() !== '') {
            result += value;
          }
        }
      });
      return result;
    },
    /**
     * Parse HTTP headers input from string to array of objects containing `name` and `value`
     * properties.
     *
     * @param {String|Headers} headers Raw HTTP headers input or Headers object
     * @returns {Array<Object>} The array of objects where properties are `name` as a header
     * name and `value` as a header content.
     */
    headersToJSON: function(headers) {
      if (typeof headers === 'string') {
        return this._headersStringToJSON(headers);
      } else {
        return this._hedersToJSON(headers);
      }
    },
    /**
     * Parse headers string to array of objects.
     * See `#toJSON` for more info.
     */
    _headersStringToJSON: function(headersString) {
      if (!headersString || headersString.trim() === '') {
        return [];
      }
      if (typeof headersString !== 'string') {
        throw new Error('Headers must be an instance of String.');
      }
      var result = [];
      var headers = headersString.split(/\n/gim);

      for (var i = 0, len = headers.length; i < len; i++) {
        var line = headers[i].trim();
        if (line === '') {
          continue;
        }
        var sepPosition = line.indexOf(':');
        if (sepPosition === -1) {
          result[result.length] = {
            name: line,
            value: ''
          };
          continue;
        }
        var name = line.substr(0, sepPosition);
        var value = line.substr(sepPosition + 1).trim();
        var obj = {
          name: name,
          value: value
        };
        result.push(obj);
      }
      return result;
    },

    /**
     * Parse Headers object to array of objects.
     * See `#toJSON` for more info.
     */
    _hedersToJSON: function(headers) {
      if (!headers) {
        return [];
      }
      return Array.from(headers).map(function(item) {
        return {
          name: item[0],
          value: item[1]
        };
      });
    },

    /**
     * Helper method for old system: combine headers list with encoding value.
     * Note that this function will update the original array.
     *
     * @param {Array} headers An array of headers
     * @param {String} encoding An encoding string from the old request.
     * @return {Boolean} True if encoding has been added to the array.
     */
    _oldCombine: function(headers, encoding) {
      if (!(headers instanceof Array)) {
        throw new Error('Headers must be an array');
      }
      encoding = String(encoding);
      var ct = headers.filter(function(item) {
        return item.name.toLowerCase() === 'content-type';
      });
      if (ct.length === 0) {
        headers.push({
          'name': 'Content-Type',
          'value': encoding.trim()
        });
        return true;
      }
      return false;
    },

    /**
     * Get the Content-Type value from the headers.
     *
     * @param {Array|String} headers Either HTTP headers string or list of headers.
     * @return {String|null} A content-type header value or null if not found
     */
    getContentType: function(headers) {
      if (typeof headers !== 'string') {
        headers = this.headersToString(headers);
      }
      headers = headers.trim();
      if (headers === '') {
        return null;
      }
      var re = /^content-type:\s?(.*)$/im;
      var match = headers.match(re);
      if (!match) {
        return null;
      }
      var ct = match[1].trim();
      if (ct.indexOf('multipart') === -1) {
        var index = ct.indexOf('; ');
        if (index > 0) {
          ct = ct.substr(0, index);
        }
      }
      return ct;
    },

    /**
     * Replace value for given header in the headers list.
     *
     * @param {Array|String|Object} headers A headers object. Can be string, array of objects or
     * Headers object.
     * @param {String} name Header name to be replaced.
     * @param {String} value Header value to be repleced.
     * @return {Array} Updated headers.
     */
    replaceHeaderValue: function(headers, name, value) {
      var origType = 'headers';
      if (headers instanceof Array) {
        origType = 'array';
      } else if (typeof headers === 'string') {
        origType = 'string';
      }
      if (origType !== 'array') {
        headers = this.headersToJSON(headers);
      }
      var _name = name.toLowerCase();
      var found = false;
      headers.forEach(function(header) {
        if (header.name.toLowerCase() === _name) {
          header.value = value;
          found = true;
        }
      });
      if (!found) {
        headers.push({
          name: name,
          value: value
        });
      }
      if (origType === 'array') {
        return headers;
      } else if (origType === 'string') {
        return this.headersToString(headers);
      }
      var obj = {};
      headers.forEach(function(header) {
        obj[header.name] = header.value;
      });
      return new Headers(obj);
    },

    /**
     * Get error message for given header string.
     * @param {Header|Array|String} input A headers to check.
     * @return {String?} An error message or null if the headers are valid.
     */
    getHeaderError: function(input) {
      if (!input) {
        return null;
      }
      if (!(input instanceof Array)) {
        input = this.headersToJSON(input);
      }
      var msg = [];
      var hasContentType = false;
      for (var i = 0, len = input.length; i < len; i++) {
        var name = input[i].name;
        var value = input[i].value;
        if (name.toLowerCase() === 'content-type') {
          hasContentType = true;
        }
        if (!name || !name.trim()) {
          msg[msg.length] = 'Header name can\'t be empty';
        } else if (/\s/.test(name)) {
          msg[msg.length] = 'Header name should not contain whitespaces';
        }
        if (!value || !value.trim()) {
          msg[msg.length] = 'Header value should not be empty';
        }
      }
      if (this.isPayload && !hasContentType) {
        msg[msg.length] = 'Content-Type header is not defined';
      }
      if (msg.length > 0) {
        return msg.join('\n');
      }
      return null;
    }
  };
})(window);
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 Pawel Psztyc, The ARC team

Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.

Adapted from https://github.com/PETComputacaoUFPR/code-mirror and
https://github.com/PolymerLabs/code-mirror
The MIT License (MIT)

Copyright (c) 2015 PET Computação UFPR

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

Copyright (c) 2012 The Polymer Authors. All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

  * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
  * Neither the name of Google Inc. nor the names of its
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
--><dom-module id="codemirror" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* BASICS */

.CodeMirror {
  /* Set height, width, borders, and global font properties here */
  font-family: monospace;
  height: 300px;
  color: black;
}

/* PADDING */

.CodeMirror-lines {
  padding: 4px 0;
 /* Vertical padding around content */;
}

.CodeMirror pre {
  padding: 0 4px;
 /* Horizontal padding of content */;
}

.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: white;
 /* The little square between H and V scrollbars */;
}

/* GUTTER */

.CodeMirror-gutters {
  border-right: 1px solid #ddd;
  background-color: #f7f7f7;
  white-space: nowrap;
}

.CodeMirror-linenumbers {
}

.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #999;
  white-space: nowrap;
}

.CodeMirror-guttermarker {
  color: black;
}

.CodeMirror-guttermarker-subtle {
  color: #999;
}

/* CURSOR */

.CodeMirror div.CodeMirror-cursor {
  border-left: 1px solid black;
}
/* Shown when moving in bi-directional text */
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid silver;
}

.CodeMirror.cm-fat-cursor div.CodeMirror-cursor {
  width: auto;
  border: 0;
  background: #7e7;
}

.CodeMirror.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}

.cm-animate-fat-cursor {
  width: auto;
  border: 0;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}

@-moz-keyframes blink {
  0% {
    background: #7e7;
  }

  50% {
    background: none;
  }

  100% {
    background: #7e7;
  }
}

@-webkit-keyframes blink {
  0% {
    background: #7e7;
  }

  50% {
    background: none;
  }

  100% {
    background: #7e7;
  }
}

@keyframes blink {
  0% {
    background: #7e7;
  }

  50% {
    background: none;
  }

  100% {
    background: #7e7;
  }
}

/* Can style cursor different in overwrite (non-insert) mode */
div.CodeMirror-overwrite div.CodeMirror-cursor {
}

.cm-tab {
  display: inline-block;
  text-decoration: inherit;
}

.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  position: absolute;
}

/* DEFAULT THEME */

.cm-s-default .cm-keyword {
  color: #708;
}

.cm-s-default .cm-atom {
  color: #219;
}

.cm-s-default .cm-number {
  color: #164;
}

.cm-s-default .cm-def {
  color: #00f;
}

.cm-s-default .cm-variable,
.cm-s-default .cm-punctuation,
.cm-s-default .cm-property,
.cm-s-default .cm-operator {
}

.cm-s-default .cm-variable-2 {
  color: #05a;
}

.cm-s-default .cm-variable-3 {
  color: #085;
}

.cm-s-default .cm-comment {
  color: #a50;
}

.cm-s-default .cm-string {
  color: #a11;
}

.cm-s-default .cm-string-2 {
  color: #f50;
}

.cm-s-default .cm-meta {
  color: #555;
}

.cm-s-default .cm-qualifier {
  color: #555;
}

.cm-s-default .cm-builtin {
  color: #30a;
}

.cm-s-default .cm-bracket {
  color: #997;
}

.cm-s-default .cm-tag {
  color: #170;
}

.cm-s-default .cm-attribute {
  color: #00c;
}

.cm-s-default .cm-header {
  color: blue;
}

.cm-s-default .cm-quote {
  color: #090;
}

.cm-s-default .cm-hr {
  color: #999;
}

.cm-s-default .cm-link {
  color: #00c;
}

.cm-negative {
  color: #d44;
}

.cm-positive {
  color: #292;
}

.cm-header, .cm-strong {
  font-weight: bold;
}

.cm-em {
  font-style: italic;
}

.cm-link {
  text-decoration: underline;
}

.cm-strikethrough {
  text-decoration: line-through;
}

.cm-s-default .cm-error {
  color: #f00;
}

.cm-invalidchar {
  color: #f00;
}

.CodeMirror-composing {
  border-bottom: 2px solid;
}

/* Default styles for common addons */

div.CodeMirror span.CodeMirror-matchingbracket {
  color: #0f0;
}

div.CodeMirror span.CodeMirror-nonmatchingbracket {
  color: #f22;
}

.CodeMirror-matchingtag {
  background: rgba(255, 150, 0, .3);
}

.CodeMirror-activeline-background {
  background: #e8f2ff;
}

/* STOP */

/* The rest of this file contains styles related to the mechanics of
   the editor. You probably shouldn't touch them. */

.CodeMirror {
  position: relative;
  overflow: hidden;
  background: white;
}

.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
  /* 30px is the magic margin used to hide the element's real scrollbars */
  /* See overflow: hidden in .CodeMirror */
margin-bottom: -30px; margin-right: -30px;
  padding-bottom: 30px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
}

.CodeMirror-sizer {
position: relative;
border-right: 30px solid transparent;
}

/* The fake, visible scrollbars. Used to force redraw during scrolling
   before actuall scrolling happens, thus preventing shaking and
   flickering artifacts. */
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
position: absolute;
z-index: 6;
display: none;
}

.CodeMirror-vscrollbar {
right: 0;
top: 0;
overflow-x: hidden;
overflow-y: scroll;
}

.CodeMirror-hscrollbar {
bottom: 0;
left: 0;
overflow-y: hidden;
overflow-x: scroll;
}

.CodeMirror-scrollbar-filler {
right: 0;
bottom: 0;
}

.CodeMirror-gutter-filler {
left: 0;
bottom: 0;
}

.CodeMirror-gutters {
position: absolute;
left: 0;
top: 0;
z-index: 3;
}

.CodeMirror-gutter {
white-space: normal;
height: 100%;
display: inline-block;
margin-bottom: -30px;
  /* Hack to make IE7 behave */
*zoom: 1;
*display: inline;
}

.CodeMirror-gutter-wrapper {
position: absolute;
z-index: 4;
height: 100%;
}

.CodeMirror-gutter-elt {
position: absolute;
cursor: default;
z-index: 4;
}

.CodeMirror-gutter-wrapper {
-webkit-user-select: none;
-moz-user-select: none;
user-select: none;
}

.CodeMirror-lines {
cursor: text;
min-height: 1px;
 /* prevents collapsing before first draw */;
}

.CodeMirror pre {
  /* Reset some styles that the rest of the page might have set */
-moz-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
border-width: 0;
background: transparent;
font-family: inherit;
font-size: inherit;
margin: 0;
white-space: pre;
word-wrap: normal;
line-height: inherit;
color: inherit;
z-index: 2;
position: relative;
overflow: visible;
-webkit-tap-highlight-color: transparent;
}

.CodeMirror-wrap pre {
word-wrap: break-word;
white-space: pre-wrap;
word-break: normal;
}

.CodeMirror-linebackground {
position: absolute;
left: 0;
right: 0;
top: 0;
bottom: 0;
z-index: 0;
}

.CodeMirror-linewidget {
position: relative;
z-index: 2;
overflow: auto;
}

.CodeMirror-widget {
}

.CodeMirror-code {
outline: none;
}

/* Force content-box sizing for the elements where we expect it */
.CodeMirror-scroll,
.CodeMirror-sizer,
.CodeMirror-gutter,
.CodeMirror-gutters,
.CodeMirror-linenumber {
-moz-box-sizing: content-box;
box-sizing: content-box;
}

.CodeMirror-measure {
position: absolute;
width: 100%;
height: 0;
overflow: hidden;
visibility: hidden;
}

.CodeMirror-measure pre {
position: static;
}

.CodeMirror div.CodeMirror-cursor {
position: absolute;
border-right: none;
width: 0;
}

div.CodeMirror-cursors {
visibility: hidden;
position: relative;
z-index: 3;
}

.CodeMirror-focused div.CodeMirror-cursors {
visibility: visible;
}

.CodeMirror-selected {
background: #d9d9d9;
}

.CodeMirror-focused .CodeMirror-selected {
background: #d7d4f0;
}

.CodeMirror-crosshair {
cursor: crosshair;
}

.CodeMirror ::selection {
background: #d7d4f0;
}

.CodeMirror ::-moz-selection {
background: #d7d4f0;
}

.cm-searching {
background: #ffa;
background: rgba(255, 255, 0, .4);
}

/* IE7 hack to prevent it from returning funny offsetTops on the spans */
.CodeMirror span {
*vertical-align: text-bottom;
}

/* Used to force a border model for a node */
.cm-force-border {
padding-right: .1px;
}

@media print {
  /* Hide the cursor when printing */
.CodeMirror div.CodeMirror-cursors {
  visibility: hidden;
}
}

/* See issue #2901 */
.cm-tab-wrap-hack:after {
  content: '';
}

/* Help users use markselection to safely style text background */
span.CodeMirror-selectedtext {
  background: none;
}

    </style>
  </template>
</dom-module><dom-module id="xq-light" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*
Copyright (C) 2011 by MarkLogic Corporation
Author: Mike Brevoort <mike@brevoort.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
.cm-s-xq-light span.cm-keyword {
  line-height: 1em;
  font-weight: bold;
  color: #5A5CAD;
}

.cm-s-xq-light span.cm-atom {
  color: #6C8CD5;
}

.cm-s-xq-light span.cm-number {
  color: #164;
}

.cm-s-xq-light span.cm-def {
  text-decoration: underline;
}

.cm-s-xq-light span.cm-variable {
  color: black;
}

.cm-s-xq-light span.cm-variable-2 {
  color: black;
}

.cm-s-xq-light span.cm-variable-3 {
  color: black;
}

.cm-s-xq-light span.cm-property {
}

.cm-s-xq-light span.cm-operator {
}

.cm-s-xq-light span.cm-comment {
  color: #0080FF;
  font-style: italic;
}

.cm-s-xq-light span.cm-string {
  color: red;
}

.cm-s-xq-light span.cm-meta {
  color: yellow;
}

.cm-s-xq-light span.cm-qualifier {
  color: grey;
}

.cm-s-xq-light span.cm-builtin {
  color: #7EA656;
}

.cm-s-xq-light span.cm-bracket {
  color: #cc7;
}

.cm-s-xq-light span.cm-tag {
  color: #3F7F7F;
}

.cm-s-xq-light span.cm-attribute {
  color: #7F007F;
}

.cm-s-xq-light span.cm-error {
  color: #f00;
}

.cm-s-xq-light .CodeMirror-activeline-background {
  background: #e8f2ff !important;
}

.cm-s-xq-light .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: black !important;
  background: yellow;
}
    </style>
  </template>
</dom-module><dom-module id="3024-day" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       3024 day
    Author:     Jan T. Sott (http://github.com/idleberg)

    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)
    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)

*/

.cm-s-3024-day.CodeMirror {
  background: #f7f7f7;
  color: #3a3432;
}

.cm-s-3024-day div.CodeMirror-selected {
  background: #d6d5d4 !important;
}

.cm-s-3024-day.CodeMirror ::selection {
  background: #d6d5d4;
}

.cm-s-3024-day.CodeMirror ::-moz-selection {
  background: #d9d9d9;
}

.cm-s-3024-day .CodeMirror-gutters {
  background: #f7f7f7;
  border-right: 0px;
}

.cm-s-3024-day .CodeMirror-guttermarker {
  color: #db2d20;
}

.cm-s-3024-day .CodeMirror-guttermarker-subtle {
  color: #807d7c;
}

.cm-s-3024-day .CodeMirror-linenumber {
  color: #807d7c;
}

.cm-s-3024-day .CodeMirror-cursor {
  border-left: 1px solid #5c5855 !important;
}

.cm-s-3024-day span.cm-comment {
  color: #cdab53;
}

.cm-s-3024-day span.cm-atom {
  color: #a16a94;
}

.cm-s-3024-day span.cm-number {
  color: #a16a94;
}

.cm-s-3024-day span.cm-property, .cm-s-3024-day span.cm-attribute {
  color: #01a252;
}

.cm-s-3024-day span.cm-keyword {
  color: #db2d20;
}

.cm-s-3024-day span.cm-string {
  color: #fded02;
}

.cm-s-3024-day span.cm-variable {
  color: #01a252;
}

.cm-s-3024-day span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-3024-day span.cm-def {
  color: #e8bbd0;
}

.cm-s-3024-day span.cm-bracket {
  color: #3a3432;
}

.cm-s-3024-day span.cm-tag {
  color: #db2d20;
}

.cm-s-3024-day span.cm-link {
  color: #a16a94;
}

.cm-s-3024-day span.cm-error {
  background: #db2d20;
  color: #5c5855;
}

.cm-s-3024-day .CodeMirror-activeline-background {
  background: #e8f2ff !important;
}

.cm-s-3024-day .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a16a94 !important;
}

    </style>
  </template>
</dom-module><dom-module id="3024-night" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       3024 night
    Author:     Jan T. Sott (http://github.com/idleberg)

    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)
    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)

*/

.cm-s-3024-night.CodeMirror {
  background: #090300;
  color: #d6d5d4;
}

.cm-s-3024-night div.CodeMirror-selected {
  background: #3a3432 !important;
}

.cm-s-3024-night.CodeMirror ::selection {
  background: rgba(58, 52, 50, .99);
}

.cm-s-3024-night.CodeMirror ::-moz-selection {
  background: rgba(58, 52, 50, .99);
}

.cm-s-3024-night .CodeMirror-gutters {
  background: #090300;
  border-right: 0px;
}

.cm-s-3024-night .CodeMirror-guttermarker {
  color: #db2d20;
}

.cm-s-3024-night .CodeMirror-guttermarker-subtle {
  color: #5c5855;
}

.cm-s-3024-night .CodeMirror-linenumber {
  color: #5c5855;
}

.cm-s-3024-night .CodeMirror-cursor {
  border-left: 1px solid #807d7c !important;
}

.cm-s-3024-night span.cm-comment {
  color: #cdab53;
}

.cm-s-3024-night span.cm-atom {
  color: #a16a94;
}

.cm-s-3024-night span.cm-number {
  color: #a16a94;
}

.cm-s-3024-night span.cm-property, .cm-s-3024-night span.cm-attribute {
  color: #01a252;
}

.cm-s-3024-night span.cm-keyword {
  color: #db2d20;
}

.cm-s-3024-night span.cm-string {
  color: #fded02;
}

.cm-s-3024-night span.cm-variable {
  color: #01a252;
}

.cm-s-3024-night span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-3024-night span.cm-def {
  color: #e8bbd0;
}

.cm-s-3024-night span.cm-bracket {
  color: #d6d5d4;
}

.cm-s-3024-night span.cm-tag {
  color: #db2d20;
}

.cm-s-3024-night span.cm-link {
  color: #a16a94;
}

.cm-s-3024-night span.cm-error {
  background: #db2d20;
  color: #807d7c;
}

.cm-s-3024-night .CodeMirror-activeline-background {
  background: #2F2F2F !important;
}

.cm-s-3024-night .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="ambiance-mobile" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-ambiance.CodeMirror {
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  box-shadow: none;
}

    </style>
  </template>
</dom-module><dom-module id="ambiance" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* ambiance theme for codemirror */

/* Color scheme */

.cm-s-ambiance .cm-keyword {
  color: #cda869;
}

.cm-s-ambiance .cm-atom {
  color: #CF7EA9;
}

.cm-s-ambiance .cm-number {
  color: #78CF8A;
}

.cm-s-ambiance .cm-def {
  color: #aac6e3;
}

.cm-s-ambiance .cm-variable {
  color: #ffb795;
}

.cm-s-ambiance .cm-variable-2 {
  color: #eed1b3;
}

.cm-s-ambiance .cm-variable-3 {
  color: #faded3;
}

.cm-s-ambiance .cm-property {
  color: #eed1b3;
}

.cm-s-ambiance .cm-operator {
  color: #fa8d6a;
}

.cm-s-ambiance .cm-comment {
  color: #555;
  font-style: italic;
}

.cm-s-ambiance .cm-string {
  color: #8f9d6a;
}

.cm-s-ambiance .cm-string-2 {
  color: #9d937c;
}

.cm-s-ambiance .cm-meta {
  color: #D2A8A1;
}

.cm-s-ambiance .cm-qualifier {
  color: yellow;
}

.cm-s-ambiance .cm-builtin {
  color: #9999cc;
}

.cm-s-ambiance .cm-bracket {
  color: #24C2C7;
}

.cm-s-ambiance .cm-tag {
  color: #fee4ff;
}

.cm-s-ambiance .cm-attribute {
  color: #9B859D;
}

.cm-s-ambiance .cm-header {
  color: blue;
}

.cm-s-ambiance .cm-quote {
  color: #24C2C7;
}

.cm-s-ambiance .cm-hr {
  color: pink;
}

.cm-s-ambiance .cm-link {
  color: #F4C20B;
}

.cm-s-ambiance .cm-special {
  color: #FF9D00;
}

.cm-s-ambiance .cm-error {
  color: #AF2018;
}

.cm-s-ambiance .CodeMirror-matchingbracket {
  color: #0f0;
}

.cm-s-ambiance .CodeMirror-nonmatchingbracket {
  color: #f22;
}

.cm-s-ambiance .CodeMirror-selected {
  background: rgba(255, 255, 255, 0.15);
}

.cm-s-ambiance.CodeMirror-focused .CodeMirror-selected {
  background: rgba(255, 255, 255, 0.10);
}

.cm-s-ambiance.CodeMirror ::selection {
  background: rgba(255, 255, 255, 0.10);
}

.cm-s-ambiance.CodeMirror ::-moz-selection {
  background: rgba(255, 255, 255, 0.10);
}

/* Editor styling */

.cm-s-ambiance.CodeMirror {
  line-height: 1.40em;
  color: #E6E1DC;
  background-color: #202020;
  -webkit-box-shadow: inset 0 0 10px black;
  -moz-box-shadow: inset 0 0 10px black;
  box-shadow: inset 0 0 10px black;
}

.cm-s-ambiance .CodeMirror-gutters {
  background: #3D3D3D;
  border-right: 1px solid #4D4D4D;
  box-shadow: 0 10px 20px black;
}

.cm-s-ambiance .CodeMirror-linenumber {
  text-shadow: 0px 1px 1px #4d4d4d;
  color: #111;
  padding: 0 5px;
}

.cm-s-ambiance .CodeMirror-guttermarker {
  color: #aaa;
}

.cm-s-ambiance .CodeMirror-guttermarker-subtle {
  color: #111;
}

.cm-s-ambiance .CodeMirror-lines .CodeMirror-cursor {
  border-left: 1px solid #7991E8;
}

.cm-s-ambiance .CodeMirror-activeline-background {
  background: none repeat scroll 0% 0% rgba(255, 255, 255, 0.031);
}

.cm-s-ambiance.CodeMirror,
.cm-s-ambiance .CodeMirror-gutters {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAQAAAAHUWYVAABFFUlEQVQYGbzBCeDVU/74/6fj9HIcx/FRHx9JCFmzMyGRURhLZIkUsoeRfUjS2FNDtr6WkMhO9sm+S8maJfu+Jcsg+/o/c+Z4z/t97/vezy3z+z8ekGlnYICG/o7gdk+wmSHZ1z4pJItqapjoKXWahm8NmV6eOTbWUOp6/6a/XIg6GQqmenJ2lDHyvCFZ2cBDbmtHA043VFhHwXxClWmeYAdLhV00Bd85go8VmaFCkbVkzlQENzfBDZ5gtN7HwF0KDrTwJ0dypSOzpaKCMwQHKTIreYIxlmhXTzTWkVm+LTynZhiSBT3RZQ7aGfjGEd3qyXQ1FDymqbKxpspERQN2MiRjNZlFFQXfCNFm9nM1zpAsoYjmtRTc5ajwuaXc5xrWskT97RaKzAGe5ARHhVUsDbjKklziiX5WROcJwSNCNI+9w1Jwv4Zb2r7lCMZ4oq5C0EdTx+2GzNuKpJ+iFf38JEWkHJn9DNF7mmBDITrWEg0VWL3pHU20tSZnuqWu+R3BtYa8XxV1HO7GyD32UkOpL/yDloINFTmvtId+nmAjxRw40VMwVKiwrKLE4bK5UOVntYwhOcSSXKrJHKPJedocpGjVz/ZMIbnYUPB10/eKCrs5apqpgVmWzBYWpmtKHecJPjaUuEgRDDaU0oZghCJ6zNMQ5ZhDYx05r5v2muQdM0EILtXUsaKiQX9WMEUotagQzFbUNN6NUPC2nm5pxEWGCjMc3GdJHjSU2kORLK/JGSrkfGEIjncU/CYUnOipoYemwj8tST9NsJmB7TUVXtbUtXATJVZXBMvYeTXJfobgJUPmGMP/yFaWonaa6BcFO3nqcIqCozSZoZoSr1g4zJOzuyGnxTEX3lUEJ7WcZgme8ddaWvWJo2AJR9DZU3CUIbhCSG6ybSwN6qtJVnCU2svDTP2ZInOw2cBTrqtQahtNZn9NcJ4l2NaSmSkkP1noZWnVwkLmdUPOwLZEwy2Z3S3R+4rIG9hcbpPXHFVWcQdZkn2FOta3cKWQnNRC5g1LsJah4GCzSVsKnCOY5OAFRTBekyyryeyilhFKva75r4Mc0aWanGEaThcy31s439KKxTzJYY5WTHPU1FtIHjQU3Oip4xlNzj/lBw23dYZVliQa7WAXf4shetcQfatI+jWRDBPmyNeW6A1P5kdDgyYJlba0BIM8BZu1JfrFwItyjcAMR3K0BWOIrtMEXyhyrlVEx3ui5dUBjmB/Q3CXW85R4mBD0s7B+4q5tKUjOlb9qqmhi5AZ6GFIC5HXtOobdYGlVdMVbNJ8toNTFcHxnoL+muBagcctjWnbNMuR00uI7nQESwg5q2qqrKWIfrNUmeQocY6HuyxJV02wj36w00yhpmUFenv4p6fUkZYqLyuinx2RGOjhCXYyJF84oiU00YMOOhhquNdfbOB7gU88pY4xJO8LVdp6/q2voeB4R04vIdhSE40xZObx1HGGJ/ja0LBthFInKaLPPFzuCaYaoj8JjPME8yoyxo6zlBqkiUZYgq00OYMswbWO5NGmq+xhipxHLRW29ARjNKXO0wRnear8XSg4XFPLKEPUS1GqvyLwiuBUoa7zpZ0l5xxFwWmWZC1H5h5FwU8eQ7K+g8UcVY6TMQreVQT/8uQ8Z+ALIXnSEa2pYZQneE9RZbSBNYXfWYJzW/h/4j4Dp1tYVcFIC5019Vyi4ThPqSFCzjGWaHQTBU8q6vrVwgxP9Lkm840imWKpcLCjYTtrKuwvsKSnrvHCXGkSMk9p6lhckfRpIeis+N2PiszT+mFLspyGleUhDwcLrZqmyeylxwjBcKHEapqkmyangyLZRVOijwOtCY5SsG5zL0OwlCJ4y5KznF3EUNDDrinwiyLZRzOXtlBbK5ITHFGLp8Q0R6ab6mS7enI2cFrxOyHvOCFaT1HThS1krjCwqWeurCkk+willhCC+RSZnRXBiZaC5RXRIZYKp2lyfrHwiKPKR0JDzrdU2EFgpidawlFDR6FgXUMNa+g1FY3bUQh2cLCwosRdnuQTS/S+JVrGLeWIvtQUvONJxlqSQYYKpwoN2kaocLjdVsis4Mk80ESF2YpSkzwldjHkjFCUutI/r+EHDU8oCs6yzL3PhWiEooZdFMkymlas4AcI3KmoMMNSQ3tHzjGWCrcJJdYyZC7QFGwjRL9p+MrRkAGWzIaWCn9W0F3TsK01c2ZvQw0byvxuQU0r1lM0qJO7wW0kRIMdDTtXEdzi4VIh+EoIHm0mWtAtpCixlabgn83fKTI7anJe9ST7WIK1DMGpQmYeA58ImV6ezOGOzK2Kgq01pd60cKWiUi9Lievb/0vIDPHQ05Kzt4ddPckQBQtoaurjyHnek/nKzpQLrVgKPjIkh2v4uyezpv+Xoo7fPFXaGFp1vaLKxQ4uUpQQS5VuQs7BCq4xRJv7fwpVvvFEB3j+620haOuocqMhWd6TTPAEx+mdFNGHdranFe95WrWmIvlY4F1Dle2ECgc6cto7SryuqGGGha0tFQ5V53migUKmg6XKAo4qS3mik+0OZpAhOLeZKicacgaYcyx5hypYQE02ZA4xi/pNhOQxR4klNKyqacj+mpxnLTnnGSo85++3ZCZq6lrZkXlGEX3o+C9FieccJbZWVFjC0Yo1FZnJhoYMFoI1hEZ9r6hwg75HwzBNhbZCdJEfJwTPGzJvaKImw1yYX1HDAmpXR+ZJQ/SmgqMNVQb5vgamGwLtt7VwvP7Qk1xpiM5x5Cyv93E06MZmgs0Nya2azIKOYKCGBQQW97RmhKNKF02JZqHEJ4o58qp7X5EcZmc56trXEqzjCBZ1MFGR87Ql2tSTs6CGxS05PTzRQorkbw7aKoKXFDXsYW42VJih/q+FP2BdTzDTwVqOYB13liM50vG7wy28qagyuIXMeQI/Oqq8bcn5wJI50xH00CRntyfpL1T4hydYpoXgNiFzoIUTDZnLNRzh4TBHwbYGDvZkxmlyJloyr6tRihpeUG94GnKtIznREF0tzJG/OOr73JBcrSh1k6WuTprgLU+mnSGnv6Zge0NNz+kTDdH8nuAuTdJDCNb21LCiIuqlYbqGzT3RAoZofQfjFazkqeNWdYaGvYTM001EW2oKPvVk1ldUGSgUtHFwjKM1h9jnFcmy5lChoLNaQMGGDsYbKixlaMBmmsx1QjCfflwTfO/gckW0ruZ3jugKR3R5W9hGUWqCgxuFgsuaCHorotGKzGaeZB9DMsaTnKCpMtwTvOzhYk0rdrArKCqcaWmVk1+F372ur1YkKxgatI8Qfe1gIX9wE9FgS8ESmuABIXnRUbCapcKe+nO7slClSZFzpV/LkLncEb1qiO42fS3R855Su2mCLh62t1SYZZYVmKwIHjREF2uihTzB20JOkz7dkxzYQnK0UOU494wh+VWRc6Un2kpTaVgLDFEkJ/uhzRcI0YKGgpGWOlocBU/a4fKoJ/pEaNV6jip3+Es9VXY078rGnmAdf7t9ylPXS34RBSuYPs1UecZTU78WanhBCHpZ5sAoTz0LGZKjPf9TRypqWEiTvOFglL1fCEY3wY/++rbk7C8bWebA6p6om6PgOL2kp44TFJlVNBXae2rqqdZztOJpT87GQsE9jqCPIe9VReZuQ/CIgacsyZdCpIScSYqcZk8r+nsyCzhyfhOqHGOIvrLknC8wTpFcaYiGC/RU1NRbUeUpocQOnkRpGOrIOcNRx+1uA0UrzhSSt+VyS3SJpnFWkzNDqOFGIWcfR86DnmARTQ1HKIL33ExPiemeOhYSSjzlSUZZuE4TveoJLnBUOFof6KiysCbnAEcZgcUNTDOwkqWu3RWtmGpZwlHhJENdZ3miGz0lJlsKnjbwqSHQjpxnFDlTLLwqJPMZMjd7KrzkSG7VsxXBZE+F8YZkb01Oe00yyRK9psh5SYh29ySPKBo2ylNht7ZkZnsKenjKNJu9PNEyZpaCHv4Kt6RQsLvAVp7M9kIimmCUwGeWqLMmGuIotYMmWNpSahkhZw9FqZsVnKJhsjAHvtHMsTM9fCI06Dx/u3vfUXCqfsKRc4oFY2jMsoo/7DJDwZ1CsIKnJu+J9ldkpmiCxQx1rWjI+T9FwcWWzOuaYH0Hj7klNRVWEQpmaqosakiGNTFHdjS/qnUdmf0NJW5xsL0HhimCCZZSRzmSPTXJQ4aaztAwtZnoabebJ+htCaZ7Cm535ByoqXKbX1WRc4Eh2MkRXWzImVc96Cj4VdOKVxR84VdQsIUM8Psoou2byVHyZFuq7O8otbSQ2UAoeEWTudATLGSpZzVLlXVkPU2Jc+27lsw2jmg5T5VhbeE3BT083K9WsTTkFU/Osi0rC5lRlpwRHUiesNS0sOvmqGML1aRbPAxTJD9ZKtxuob+hhl8cwYGWpJ8nub7t5p6coYbMovZ1BTdaKn1jYD6h4GFDNFyT/Kqe1XCXphXHOKLZmuRSRdBPEfVUXQzJm5YGPGGJdvAEr7hHNdGZnuBvrpciGmopOLf5N0uVMy0FfYToJk90uUCbJupaVpO53UJXR2bVpoU00V2KOo4zMFrBd0Jtz2pa0clT5Q5L8IpQ177mWQejPMEJhuQjS10ref6HHjdEhy1P1EYR7GtO0uSsKJQYLiTnG1rVScj5lyazpqWGl5uBbRWl7m6ixGOOnEsMJR7z8J0n6KMnCdxhiNYQCoZ6CmYLnO8omC3MkW3bktlPmEt/VQQHejL3+dOE5FlPdK/Mq8hZxxJtLyRrepLThYKbLZxkSb5W52vYxNOaOxUF0yxMUPwBTYqCzy01XayYK0sJyWBLqX0MwU5CzoymRzV0EjjeUeLgDpTo6ij42ZAzvD01dHUUTPLU96MdLbBME8nFBn7zJCMtJcZokn8YoqU0FS5WFKyniHobguMcmW8N0XkWZjkyN3hqOMtS08r+/xTBwpZSZ3qiVRX8SzMHHjfUNFjgHEPmY9PL3ykEzxkSre/1ZD6z/NuznuB0RcE1TWTm9zRgfUWVJiG6yrzgmWPXC8EAR4Wxhlad0ZbgQyEz3pG5RVEwwDJH2mgKpjcTiCOzn1lfUWANFbZ2BA8balnEweJC9J0iuaeZoI+ippFCztEKVvckR2iice1JvhVytrQwUAZpgsubCPaU7xUe9vWnaOpaSBEspalykhC9bUlOMpT42ZHca6hyrqKmw/wMR8H5ZmdFoBVJb03O4UL0tSNnvIeRmkrLWqrs78gcrEn2tpcboh0UPOW3UUR9PMk4T4nnNKWmCjlrefhCwxRNztfmIQVdDElvS4m1/WuOujoZCs5XVOjtKPGokJzsYCtFYoWonSPT21DheU/wWhM19FcElwqNGOsp9Q8N/cwXaiND1MmeL1Q5XROtYYgGeFq1aTMsoMmcrKjQrOFQTQ1fmBYhmW6o8Jkjc7iDJRTBIo5kgJD5yMEYA3srCg7VFKwiVJkmRCc5ohGOKhsYMn/XBLdo5taZjlb9YAlGWRimqbCsoY7HFAXLa5I1HPRxMMsQDHFkWtRNniqT9UEeNjcE7RUlrCJ4R2CSJuqlKHWvJXjAUNcITYkenuBRB84TbeepcqTj3zZyFJzgYQdHnqfgI0ddUwS6GqWpsKWhjq9cV0vBAEMN2znq+EBfIWT+pClYw5xsTlJU6GeIBsjGmmANTzJZiIYpgrM0Oa8ZMjd7NP87jxhqGOhJlnQtjuQpB+8aEE00wZFznSJPyHxgH3HkPOsJFvYk8zqCHzTs1BYOa4J3PFU+UVRZxlHDM4YavlNUuMoRveiZA2d7grMNc2g+RbSCEKzmgYsUmWmazFJyoiOZ4KnyhKOGRzWJa0+moyV4TVHDzn51Awtqaphfk/lRQ08FX1iiqxTB/kLwd0VynKfEvI6cd4XMV5bMhZ7gZUWVzYQ6Nm2BYzxJbw3bGthEUUMfgbGeorae6DxHtJoZ6alhZ0+ytiVoK1R4z5PTrOECT/SugseEOlb1MMNR4VRNcJy+V1Hg9ONClSZFZjdHlc6W6FBLdJja2MC5hhpu0DBYEY1TFGwiFAxRRCsYkiM9JRb0JNMVkW6CZYT/2EiTGWmo8k+h4FhDNE7BvppoTSFnmCV5xZKzvcCdDo7VVPnIU+I+Rc68juApC90MwcFCsJ5hDqxgScYKreruyQwTqrzoqDCmhWi4IbhB0Yrt3RGa6GfDv52rKXWhh28dyZaWUvcZeMTBaZoSGyiCtRU5J8iviioHaErs7Jkj61syVzTTgOcUOQ8buFBTYWdL5g3T4qlpe0+wvD63heAXRfCCIed9RbCsp2CiI7raUOYOTU13N8PNHvpaGvayo4a3LLT1lDrVEPT2zLUlheB1R+ZTRfKWJ+dcocLJfi11vyJ51lLqJ0WD7tRwryezjiV5W28uJO9qykzX8JDe2lHl/9oyBwa2UMfOngpXCixvKdXTk3wrsKmiVYdZIqsoWEERjbcUNDuiaQomGoIbFdEHmsyWnuR+IeriKDVLnlawlyNHKwKlSU631PKep8J4Q+ayjkSLKYLhalNHlYvttb6fHm0p6OApsZ4l2VfdqZkjuysy6ysKLlckf1KUutCTs39bmCgEyyoasIWlVaMF7mgmWtBT8Kol5xpH9IGllo8cJdopcvZ2sImlDmMIbtDk3KIpeNiS08lQw11NFPTwVFlPP6pJ2gvRfI7gQUfmNAtf6Gs0wQxDsKGlVBdF8rCa3jzdwMaGHOsItrZk7hAyOzpK9VS06j5F49b0VNGOOfKs3lDToMsMBe9ZWtHFEgxTJLs7qrygKZjUnmCYoeAqeU6jqWuLJup4WghOdvCYJnrSkSzoyRkm5M2StQwVltPkfCAk58tET/CSg+8MUecmotMEnhBKfWBIZsg2ihruMJQaoIm+tkTLKEqspMh00w95gvFCQRtDwTT1gVDDSEVdlwqZfxoQRbK0g+tbiBZxzKlpnpypejdDwTaeOvorMk/IJE10h9CqRe28hhLbe0pMsdSwv4ZbhKivo2BjDWfL8UKJgeavwlwb5KlwhyE4u4XkGE2ytZCznKLCDZZq42VzT8HLCrpruFbIfOIINmh/qCdZ1ZBc65kLHR1Bkyf5zn6pN3SvGKIlFNGplhrO9QSXanLOMQTLCa0YJCRrCZm/CZmrLTm7WzCK4GJDiWUdFeYx1LCFg3NMd0XmCuF3Y5rITLDUsYS9zoHVzwnJoYpSTQoObyEzr4cFBNqYTopoaU/wkyLZ2lPhX/5Y95ulxGTV7KjhWrOZgl8MyUUafjYraNjNU1N3IWcjT5WzWqjwtoarHSUObGYO3GCJZpsBlnJGPd6ZYLyl1GdCA2625IwwJDP8GUKymbzuyPlZlvTUsaUh5zFDhRWFzPKKZLAlWdcQbObgF9tOqOsmB1dqcqYJmWstFbZRRI9poolmqiLnU0POvxScpah2iSL5UJNzgScY5+AuIbpO0YD3NCW+dLMszFSdFCWGqG6eVq2uYVNDdICGD6W7EPRWZEY5gpsE9rUkS3mijzzJnm6UpUFXG1hCUeVoS5WfNcFpblELL2qqrCvMvRfd45oalvKU2tiQ6ePJOVMRXase9iTtLJztPxJKLWpo2CRDcJwn2sWSLKIO1WQWNTCvpVUvOZhgSC40JD0dOctaSqzkCRbXsKlb11Oip6PCJ0IwSJM31j3akRxlP7Rwn6aGaUL0qiLnJkvB3xWZ2+Q1TfCwpQH3G0o92UzmX4o/oJNQMMSQc547wVHhdk+VCw01DFYEnTxzZKAm74QmeNNR1w6WzEhNK15VJzuCdxQ53dRUDws5KvwgBMOEgpcVNe0hZI6RXT1Jd0cyj5nsaEAHgVmGaJIlWdsc5Ui2ElrRR6jrRAttNMEAIWrTDFubkZaok7/AkzfIwfuWVq0jHzuCK4QabtLUMVPB3kJ0oyHTSVFlqMALilJf2Rf8k5aaHtMfayocLBS8L89oKoxpJvnAkDPa0qp5DAUTHKWmCcnthlou8iCKaFFLHWcINd1nyIwXqrSxMNmSs6KmoL2QrKuWtlQ5V0120xQ5vRyZS1rgFkWwhiOwiuQbR0OOVhQM9iS3tiXp4RawRPMp5tDletOOBL95MpM01dZTBM9pkn5qF010rIeHFcFZhmSGpYpTsI6nwhqe5C9ynhlpp5ophuRb6WcJFldkVnVEwwxVfrVkvnWUuNLCg5bgboFHPDlDPDmnK7hUrWiIbjadDclujlZcaokOFup4Ri1kacV6jmrrK1hN9bGwpKEBQ4Q6DvIUXOmo6U5LqQM6EPyiKNjVkPnJkDPNEaxhiFay5ExW1NXVUGqcpYYdPcGiCq7z/TSlbhL4pplWXKd7NZO5QQFrefhRQW/NHOsqcIglc4UhWklR8K0QzbAw08CBDnpbgqXdeD/QUsM4RZXDFBW6WJKe/mFPdH0LtBgiq57wFLzlyQzz82qYx5D5WJP5yVJDW01BfyHnS6HKO/reZqId1WGa4Hkh2kWodJ8i6KoIPlAj2hPt76CzXsVR6koPRzWTfKqIentatYpQw2me4AA3y1Kind3SwoOKZDcFXTwl9tWU6mfgRk9d71sKtlNwrjnYw5tC5n5LdKiGry3JKNlHEd3oaMCFHrazBPMp/uNJ+V7IudcSbeOIdjUEdwl0VHCOZo5t6YluEuaC9mQeMgSfOyKnYGFHcIeQ84yQWbuJYJpZw5CzglDH7gKnWqqM9ZTaXcN0TeYhR84eQtJT76JJ1lREe7WnnvsMmRc9FQ7SBBM9mV3lCUdmHk/S2RAMt0QjFNFqQpWjDPQ01DXWUdDBkXziKPjGEP3VP+zIWU2t7im41FOloyWzn/L6dkUy3VLDaZ6appgDLHPjJEsyvJngWEPUyVBiAaHCTEXwrLvSEbV1e1gKJniicWorC1MUrVjB3uDhJE/wgSOzk1DXpk0k73qCM8xw2UvD5kJmDUfOomqMpWCkJRlvKXGmoeBm18USjVIk04SClxTB6YrgLAPLWYK9HLUt5cmc0vYES8GnTeRc6skZbQkWdxRsIcyBRzx1DbTk9FbU0caTPOgJHhJKnOGIVhQqvKmo0llRw9sabrZkDtdg3PqaKi9oatjY8B+G371paMg6+mZFNNtQ04mWBq3rYLOmtWWQp8KJnpy9DdFensyjdqZ+yY40VJlH8wcdLzC8PZnvHMFUTZUrDTkLyQaGus5X5LzpYAf3i+e/ZlhqGqWhh6Ou6xTR9Z6oi5AZZtp7Mj2EEm8oSpxiYZCHU/1fbGdNNNRRoZMhmilEb2gqHOEJDtXkHK/JnG6IrvbPCwV3NhONVdS1thBMs1T4QOBcTWa2IzhMk2nW5Kyn9tXUtpv9RsG2msxk+ZsQzRQacJncpgke0+T8y5Fzj8BiGo7XlJjaTIlpQs7KFjpqGnKuoyEPeIKnFMkZHvopgh81ySxNFWvJWcKRs70j2FOT012IllEEO1n4pD1513Yg2ssQPOThOkvyrqHUdEXOSEsihmBbTbKX1kLBPWqWkLOqJbjB3GBIZmoa8qWl4CG/iZ7oiA72ZL7TJNeZUY7kFQftDcHHluBzRbCegzMtrRjVQpX2lgoPKKLJAkcbMl01XK2p7yhL8pCBbQ3BN2avJgKvttcrWDK3CiUOVxQ8ZP+pqXKyIxnmBymCg5vJjNfkPK4+c8cIfK8ocVt7kmfd/I5SR1hKvCzUtb+lhgc00ZaO6CyhIQP1Uv4yIZjload72PXX0OIJvnFU+0Zf6MhsJwTfW0r0UwQfW4LNLZl5HK261JCZ4qnBaAreVAS3WrjV0LBnNDUNNDToCEeFfwgcb4gOEqLRhirWkexrCEYKVV711DLYEE1XBEsp5tpTGjorkomKYF9FDXv7fR3BGwbettSxnyL53MBPjsxDZjMh+VUW9NRxq1DhVk+FSxQcaGjV9Pawv6eGByw5qzoy7xk4RsOShqjJwWKe/1pEEfzkobeD/dQJmpqedcyBTy2sr4nGNRH0c0SPWTLrqAc0OQcb/gemKgqucQT7ySWKCn2EUotoCvpZct7RO2sy/QW0IWcXd7pQRQyZVwT2USRO87uhjioTLKV2brpMUcMQRbKH/N2T+UlTpaMls6cmc6CCNy3JdYYSUzzJQ4oSD3oKLncULOiJvjBEC2oqnCJkJluCYy2ZQ5so9YYlZ1VLlQU1mXEW1jZERwj/MUSRc24TdexlqLKfQBtDTScJUV8FszXBEY5ktpD5Ur9hYB4Nb1iikw3JoYpkKX+RodRKFt53MMuRnKSpY31PwYaGaILh3wxJGz9TkTPEETxoCWZrgvOlmyMzxFEwVJE5xZKzvyJ4WxEc16Gd4Xe3Weq4XH2jKRikqOkGQ87hQnC7wBmGYLAnesX3M+S87eFATauuN+Qcrh7xIxXJbUIdMw3JGE3ylCWzrieaqCn4zhGM19TQ3z1oH1AX+pWEqIc7wNGAkULBo/ZxRaV9NNyh4Br3rCHZzbzmSfawBL0dNRwpW1kK9mxPXR9povcdrGSZK9c2k0xwFGzjuniCtRSZCZ6ccZ7gaktmgAOtKbG/JnOkJrjcQTdFMsxRQ2cLY3WTIrlCw1eWKn8R6pvt4GFDso3QoL4a3nLk3G6JrtME3dSenpx7PNFTmga0EaJTLQ061sEeQoWXhSo9LTXsaSjoJQRXeZLtDclbCrYzfzHHeaKjHCVOUkQHO3JeEepr56mhiyaYYKjjNU+Fed1wS5VlhWSqI/hYUdDOkaxiKehoyOnrCV5yBHtbWFqTHCCwtpDcYolesVR5yUzTZBb3RNMd0d6WP+SvhuBmRcGxnuQzT95IC285cr41cLGQ6aJJhmi4TMGempxeimBRQw1tFKV+8jd6KuzoSTqqDxzRtpZkurvKEHxlqXKRIjjfUNNXQsNOsRScoWFLT+YeRZVD3GRN0MdQcKqQjHDMrdGGVu3iYJpQx3WGUvfbmxwFfR20WBq0oYY7LMFhhgYtr8jpaEnaOzjawWWaTP8mMr0t/EPDPoqcnxTBI5o58L7uoWnMrpoqPwgVrlAUWE+V+TQl9rawoyP6QGAlQw2TPRX+YSkxyBC8Z6jhHkXBgQL7WII3DVFnRfCrBfxewv9D6xsyjys4VkhWb9pUU627JllV0YDNHMku/ldNMMXDEo4aFnAkk4U6frNEU4XgZUPmEKHUl44KrzmYamjAbh0JFvGnaTLPu1s9jPCwjFpYiN7z1DTOk/nc07CfDFzmCf7i+bfNHXhDtLeBXzTBT5rkMvWOIxpl4EMh2LGJBu2syDnAEx2naEhHDWMMzPZEhygyS1mS5RTJr5ZkoKbEUoYqr2kqdDUE8ztK7OaIntJkFrIECwv8LJTaVx5XJE86go8dFeZ3FN3rjabCAYpoYEeC9zzJVULBbmZhDyd7ko09ydpNZ3nm2Kee4FPPXHnYEF1nqOFEC08LUVcDvYXkJHW8gTaKCk9YGOeIJhqiE4ToPEepdp7IWFjdwnWaufGMwJJCMtUTTBBK9BGCOy2tGGrJTHIwyEOzp6aPzNMOtlZkDvcEWpP5SVNhfkvDxhmSazTJXYrM9U1E0xwFVwqZQwzJxw6+kGGGUj2FglGGmnb1/G51udRSMNlTw6GGnCcUwVcOpmsqTHa06o72sw1RL02p9z0VbnMLOaIX3QKaYKSCFQzBKEUNHTSc48k53RH9wxGMtpQa5KjjW0W0n6XCCCG4yxNNdhQ4R4l1Ff+2sSd6UFHiIEOyqqFgT01mEUMD+joy75jPhOA+oVVLm309FR4yVOlp4RhLiScNmSmaYF5Pw0STrOIoWMSR2UkRXOMp+M4SHW8o8Zoi6OZgjKOaFar8zZDzkWzvKOjkKBjmCXby8JahhjXULY4KlzgKLvAwxVGhvyd4zxB1d9T0piazmKLCVZY5sKiD0y2ZSYrkUEPUbIk+dlQ4SJHTR50k1DPaUWIdTZW9NJwnJMOECgd7ou/MnppMJ02O1VT4Wsh85MnZzcFTngpXGKo84qmwgKbCL/orR/SzJ2crA+t6Mp94KvxJUeIbT3CQu1uIdlQEOzlKfS3UMcrTiFmOuroocrZrT2AcmamOKg8YomeEKm/rlT2sociMaybaUlFhuqHCM2qIJ+rg4EcDFymiDSxzaHdPcpE62pD5kyM5SBMoA1PaUtfIthS85ig1VPiPPYXgYEMNk4Qq7TXBgo7oT57gPUdwgCHzhIVFPFU6OYJzHAX9m5oNrVjeE61miDrqQ4VSa1oiURTsKHC0IfjNwU2WzK6eqK8jWln4g15TVBnqmDteCJ501PGAocJhhqjZdtBEB6lnhLreFJKxmlKbeGrqLiSThVIbCdGzloasa6lpMQXHCME2boLpJgT7yWaemu6wBONbqGNVRS0PKIL7LckbjmQtR7K8I5qtqel+T/ChJTNIKLjdUMNIRyvOEko9YYl2cwQveBikCNawJKcLBbc7+JM92mysNvd/Fqp8a0k6CNEe7cnZrxlW0wQXaXjaktnRwNOGZKYiONwS7a1JVheq3WgJHlQUGKHKmp4KAxXR/ULURcNgoa4zhKSLpZR3kxRRb0NmD0OFn+UCS7CzI1nbP6+o4x47QZE5xRCt3ZagnYcvmpYQktXdk5YKXTzBC57kKEe0VVuiSYqapssMS3C9p2CKkHOg8B8Pa8p5atrIw3qezIWanMGa5HRDNF6RM9wcacl0N+Q8Z8hsIkSnaIIdHRUOEebAPy1zbCkhM062FCJtif7PU+UtoVXzWKqM1PxXO8cfdruhFQ/a6x3JKYagvVDhQEtNiyiiSQ7OsuRsZUku0CRNDs4Sog6KKjsZgk2bYJqijgsEenoKeniinRXBn/U3lgpPdyDZynQx8IiioMnCep5Ky8mjGs6Wty0l1hUQTcNWswS3WRp2kCNZwJG8omG8JphPUaFbC8lEfabwP7VtM9yoaNCAjpR41VNhrD9LkbN722v0CoZMByFzhaW+MyzRYEWFDQwN2M4/JiT76PuljT3VU/A36eaIThb+R9oZGOAJ9tewkgGvqOMNRWYjT/Cwu99Q8LqDE4TgbLWxJ1jaDDAERsFOFrobgjUsBScaguXU8kKm2RL19tRypSHnHNlHiIZqgufs4opgQdVdwxBNNFBR6kVFqb8ogimOzB6a6HTzrlDHEpYaxjiiA4TMQobkDg2vejjfwJGWmnbVFAw3H3hq2NyQfG7hz4aC+w3BbwbesG0swYayvpAs6++Ri1Vfzx93mFChvyN5xVHTS+0p9aqCAxyZ6ZacZyw5+7uuQkFPR9DDk9NOiE7X1PCYJVjVUqq7JlrHwWALF5nfHNGjApdpqgzx5OwilDhCiDYTgnc9waGW4BdLNNUQvOtpzDOWHDH8D7TR/A/85KljEQu3NREc4Pl/6B1Hhc8Umb5CsKMmGC9EPcxoT2amwHNCmeOEnOPbklnMkbOgIvO5UMOpQrS9UGVdt6iH/fURjhI/WOpaW9OKLYRod6HCUEdOX000wpDZQ6hwg6LgZfOqo1RfT/CrJzjekXOGhpc1VW71ZLbXyyp+93ILbC1kPtIEYx0FIx1VDrLoVzXRKRYWk809yYlC9ImcrinxtabKnzRJk3lAU1OLEN1j2zrYzr2myHRXJFf4h4QKT1qSTzTB5+ZNTzTRkAxX8FcLV2uS8eoQQ2aAkFzvCM72sJIcJET3WPjRk5wi32uSS9rfZajpWEvj9hW42F4o5NytSXYy8IKHay10VYdrcl4SkqscrXpMwyGOgtkajheSxdQqmpxP1L3t4R5PqasFnrQEjytq6qgp9Y09Qx9o4S1FzhUCn1kyHSzBWLemoSGvOqLNhZyBjmCaAUYpMgt4Ck7wBBMMwWKWgjsUwTaGVsxWC1mYoKiyqqeGKYqonSIRQ3KIkHO0pmAxTdBHkbOvfllfr+AA+7gnc50huVKYK393FOyg7rbPO/izI7hE4CnHHHnJ0ogNPRUGeUpsrZZTBJcrovUcJe51BPsr6GkJdhCCsZ6aTtMEb2pqWkqeVtDXE/QVggsU/Nl86d9RMF3DxvZTA58agu810RWawCiSzzXBeU3MMW9oyJUedvNEvQyNu1f10BSMddR1vaLCYpYa/mGocLSiYDcLbQz8aMn5iyF4xBNMs1P0QEOV7o5gaWGuzSeLue4tt3ro7y4Tgm4G/mopdZgl6q0o6KzJWE3mMksNr3r+a6CbT8g5wZNzT9O7fi/zpaOmnz3BRoqos+tv9zMbdpxsqDBOEewtJLt7cg5wtKKbvldpSzRRCD43VFheCI7yZLppggMVBS/KMAdHODJvOwq2NQSbKKKPLdFWQs7Fqo+mpl01JXYRgq8dnGLhTiFzqmWsUMdpllZdbKlyvSdYxhI9YghOtxR8LgSLWHK62mGGVoxzBE8LNWzqH9CUesQzFy5RQzTc56mhi6fgXEWwpKfE5Z7M05ZgZUPmo6auiv8YKzDYwWBLMErIbKHJvOwIrvEdhOBcQ9JdU1NHQ7CXn2XIDFBKU2WAgcX9UAUzDXWd5alwuyJ41Z9rjKLCL4aCp4WarhPm2rH+SaHUYE001JDZ2ZAzXPjdMpZWvC9wmqIB2lLhQ01D5jO06hghWMndbM7yRJMsoCj1vYbnFQVrW9jak3OlEJ3s/96+p33dEPRV5GxiqaGjIthUU6FFEZyqCa5qJrpBdzSw95IUnOPIrCUUjRZQFrbw5PR0R1qiYx3cb6nrWUMrBmmiBQxVHtTew5ICP/ip6g4hed/Akob/32wvBHsIOX83cI8hGeNeNPCIkPmXe8fPKx84OMSRM1MTdXSwjCZ4S30jVGhvqTRak/OVhgGazHuOCud5onEO1lJr6ecVyaOK6H7zqlBlIaHE0oroCgfvGJIdPcmfLNGLjpz7hZwZQpUbFME0A1cIJa7VNORkgfsMBatbKgwwJM9bSvQXeNOvbIjelg6WWvo5kvbKaJJNHexkKNHL9xRyFlH8Ti2riB5wVPhUk7nGkJnoCe428LR/wRGdYIlmWebCyxou1rCk4g/ShugBDX0V0ZQWkh0dOVsagkM0yV6OoLd5ye+pRlsCr0n+KiQrGuq5yJDzrTAXHtLUMduTDBVKrSm3eHL+6ijxhFDX9Z5gVU/wliHYTMiMFpKLNMEywu80wd3meoFmt6VbRMPenhrOc6DVe4pgXU8DnnHakLOIIrlF4FZPIw6R+zxBP0dyq6OOZ4Q5sLKCcz084ok+VsMMyQhNZmmBgX5xIXOEJTmi7VsGTvMTNdHHhpzdbE8Du2oKxgvBqQKdDDnTFOylCFaxR1syz2iqrOI/FEpNc3C6f11/7+ASS6l2inq2ciTrCCzgyemrCL5SVPjQkdPZUmGy2c9Sw9FtR1sS30RmsKPCS4rkIC/2U0MduwucYolGaPjKEyhzmiPYXagyWbYz8LWBDdzRimAXzxx4z8K9hpzlhLq+NiQ97HuKorMUfK/OVvC2JfiHUPCQI/q7J2gjK+tTDNxkCc4TMssqCs4TGtLVwQihyoAWgj9bosU80XGW6Ac9TJGziaUh5+hnFcHOnlaM1iRn29NaqGENTTTSUHCH2tWTeV0osUhH6psuVLjRUmGWhm6OZEshGeNowABHcJ2Bpy2ZszRcKkRXd2QuKVEeXnbfaEq825FguqfgfE2whlChSRMdron+LATTPQ2Z369t4B9C5gs/ylzv+CMmepIDPclFQl13W0rspPd1JOcbghGOEutqCv5qacURQl3dDKyvyJlqKXGPgcM9FfawJAMVmdcspcYKOZc4GjDYkFlK05olNMHyHn4zFNykyOxt99RkHlfwmiHo60l2EKI+mhreEKp080Tbug08BVPcgoqC5zWt+NLDTZ7oNSF51N1qie7Va3uCCwyZbkINf/NED6jzOsBdZjFN8oqG3wxVunqCSYYKf3EdhJyf9YWGf7tRU2oH3VHgPr1fe5J9hOgHd7xQ0y7qBwXr23aGErP0cm64JVjZwsOGqL+mhNgZmhJLW2oY4UhedsyBgzrCKrq7BmcpNVhR6jBPq64Vgi+kn6XE68pp8J5/+0wRHGOpsKenQn9DZntPzjRLZpDAdD2fnSgkG9tmIXnUwQ6WVighs7Yi2MxQ0N3CqYaCXkJ0oyOztMDJjmSSpcpvlrk0RMMOjmArQ04PRV1DO1FwhCVaUVPpKUM03JK5SxPsIWRu8/CGHi8UHChiqGFDTbSRJWeYUDDcH6vJWUxR4k1FXbMUwV6e4AJFXS8oMqsZKqzvYQ9DDQdZckY4aGsIhtlubbd2r3j4QBMoTamdPZk7O/Bf62lacZwneNjQoGcdVU7zJOd7ghsUHOkosagic6cnWc8+4gg285R6zZP5s1/LUbCKIznTwK36PkdwlOrl4U1LwfdCCa+IrvFkmgw1PCAUXKWo0sURXWcI2muKJlgyFzhynCY4RBOsqCjoI1R5zREco0n2Vt09BQtYSizgKNHfUmUrQ5UOCh51BFcLmY7umhYqXKQomOop8bUnWNNQcIiBcYaC6xzMNOS8JQQfeqKBmmglB+97ok/lfk3ygaHSyZaCRTzRxQo6GzLfa2jWBPepw+UmT7SQEJyiyRkhBLMVOfcoMjcK0eZChfUNzFAUzCsEN5vP/X1uP/n/aoMX+K+nw/Hjr/9xOo7j7Pju61tLcgvJpTWXNbfN5jLpi6VfCOviTktKlFusQixdEKWmEBUKNaIpjZRSSOXSgzaaKLdabrm1/9nZ+/f+vd/vz/v9+Xy+zZ7PRorYoZqyLrCwQdEAixxVOEXNNnjX2nUSRlkqGmWowk8lxR50JPy9Bo6qJXaXwNvREBvnThPEPrewryLhcAnj5WE15Fqi8W7R1sAuEu86S4ENikItFN4xkv9Af4nXSnUVcLiA9xzesFpivRRVeFKtsMRaKBhuSbjOELnAUtlSQUpXgdfB4Z1oSbnFEetbQ0IrAe+Y+pqnDcEJFj6S8LDZzZHwY4e3XONNlARraomNEt2bkvGsosA3ioyHm+6jCMbI59wqt4eeara28IzEmyPgoRaUOEDhTVdEJhmCoTWfC0p8aNkCp0oYqih2iqGi4yXeMkOsn4LdLLnmKfh/YogjNsPebeFGR4m9BJHLzB61XQ3BtpISfS2FugsK9FAtLWX1dCRcrCnUp44CNzuCowUZmxSRgYaE6Za0W2u/E7CVXCiI/UOR8aAm1+OSyE3mOUcwyc1zBBeoX1kiKy0Zfxck1Gsyulti11i83QTBF5Kg3pDQThFMVHiPSlK+0cSedng/VaS8bOZbtsBcTcZAR8JP5KeqQ1OYKAi20njdNNRpgnsU//K+JnaXJaGTomr7aYIphoRn9aeShJWKEq9LcozSF7QleEfDI5LYm5bgVkFkRwVDBCVu0DDIkGupo8TZBq+/pMQURYErJQmPKGKjNDkWOLx7Jd5QizdUweIaKrlP7SwJDhZvONjLkOsBBX9UpGxnydhXkfBLQ8IxgojQbLFnJf81JytSljclYYyEFyx0kVBvKWOFJmONpshGAcsduQY5giVNCV51eOdJYo/pLhbvM0uDHSevNKRcrKZIqnCtJeEsO95RoqcgGK4ocZcho1tTYtcZvH41pNQ7vA0WrhIfOSraIIntIAi+NXWCErdbkvrWwjRLrt0NKUdL6KSOscTOdMSOUtBHwL6OLA0vNSdynaWQEnCpIvKaIrJJEbvHkmuNhn6OjM8VkSGSqn1uYJCGHnq9I3aLhNME3t6GjIkO7xrNFumpyTNX/NrwX7CrIRiqqWijI9JO4d1iieykyfiposQIQ8YjjsjlBh6oHWbwRjgYJQn2NgSnNycmJAk3NiXhx44Sxykihxm8ybUwT1OVKySc7vi3OXVkdBJ4AyXBeksDXG0IhgtYY0lY5ahCD0ehborIk5aUWRJviMA7Xt5kyRjonrXENkm8yYqgs8VzgrJmClK20uMM3jRJ0FiQICQF9hdETlLQWRIb5ki6WDfWRPobvO6a4GP5mcOrNzDFELtTkONLh9dXE8xypEg7z8A9jkhrQ6Fhjlg/QVktJXxt4WXzT/03Q8IaQWSqIuEvloQ2mqC9Jfi7wRul4RX3pSPlzpoVlmCtI2jvKHCFhjcM3sN6lqF6HxnKelLjXWbwrpR4xzuCrTUZx2qq9oAh8p6ixCUGr78g8oyjRAtB5CZFwi80VerVpI0h+IeBxa6Zg6kWvpDHaioYYuEsRbDC3eOmC2JvGYLeioxGknL2UATNJN6hmtj1DlpLvDVmocYbrGCVJKOrg4X6DgddLA203BKMFngdJJFtFd7vJLm6KEpc5yjQrkk7M80SGe34X24nSex1Ra5Omgb71JKyg8SrU3i/kARKwWpH0kOGhKkObyfd0ZGjvyXlAkVZ4xRbYJ2irFMkFY1SwyWxr2oo4zlNiV+7zmaweFpT4kR3kaDAFW6xpSqzJay05FtYR4HmZhc9UxKbbfF2V8RG1MBmSaE+kmC6JnaRXK9gsiXhJHl/U0qM0WTcbyhwkYIvFGwjSbjfwhiJt8ZSQU+Bd5+marPMOkVkD0muxYLIfEuhh60x/J92itguihJSEMySVPQnTewnEm+620rTQEMsOfo4/kP/0ARvWjitlpSX7GxBgcMEsd3EEeYWvdytd+Saawi6aCIj1CkGb6Aj9rwhx16Cf3vAwFy5pyLhVonXzy51FDpdEblbkdJbUcEPDEFzQ8qNmhzzLTmmKWKbFCXeEuRabp6rxbvAtLF442QjQ+wEA9eL1xSR7Q0JXzlSHjJ4exq89yR0laScJ/FW6z4a73pFMEfDiRZvuvijIt86RaSFOl01riV2mD1UEvxGk/Geg5aWwGki1zgKPG9J2U8PEg8qYvMsZeytiTRXBMslCU8JSlxi8EabjwUldlDNLfzTUmCgxWsjqWCOHavYAqsknKFIO0yQ61VL5AVFxk6WhEaCAkdJgt9aSkzXlKNX2jEa79waYuc7gq0N3GDJGCBhoiTXUEPsdknCUE1CK0fwsiaylSF2uiDyO4XX3pFhNd7R4itFGc0k/ElBZwWvq+GC6szVeEoS/MZ+qylwpKNKv9Z469UOjqCjwlusicyTxG6VpNxcQ8IncoR4RhLbR+NdpGGmJWOcIzJGUuKPGpQg8rrG21dOMqQssJQ4RxH5jaUqnZuQ0F4Q+cjxLwPtpZbIAk3QTJHQWBE5S1BokoVtDd6lhqr9UpHSUxMcIYl9pojsb8h4SBOsMQcqvOWC2E8EVehqiJ1hrrAEbQxeK0NGZ0Gkq+guSRgniM23bIHVkqwx4hiHd7smaOyglyIyQuM978j4VS08J/A2G1KeMBRo4fBaSNhKUEZfQewVQ/C1I+MgfbEleEzCUw7mKXI0M3hd1EESVji8x5uQ41nxs1q4RMJCCXs7Iq9acpxn22oSDnQ/sJTxsCbHIYZiLyhY05TY0ZLIOQrGaSJDDN4t8pVaIrsqqFdEegtizc1iTew5Q4ayBDMUsQMkXocaYkc0hZua412siZ1rSXlR460zRJ5SlHGe5j801RLMlJTxtaOM3Q1pvxJ45zUlWFD7rsAbpfEm1JHxG0eh8w2R7QQVzBUw28FhFp5QZzq8t2rx2joqulYTWSuJdTYfWwqMFMcovFmSyJPNyLhE4E10pHzYjOC3huArRa571ZsGajQpQx38SBP5pyZB6lMU3khDnp0MBV51BE9o2E+TY5Ml2E8S7C0o6w1xvCZjf0HkVEHCzFoyNmqC+9wdcqN+Tp7jSDheE9ws8Y5V0NJCn2bk2tqSY4okdrEhx1iDN8cSudwepWmAGXKcJXK65H9to8jYQRH7SBF01ESUJdd0TayVInaWhLkOjlXE5irKGOnI6GSWGCJa482zBI9rCr0jyTVcEuzriC1vcr6mwFGSiqy5zMwxBH/TJHwjSPhL8+01kaaSUuMFKTcLEvaUePcrSmwn8DZrgikWb7CGPxkSjhQwrRk57tctmxLsb9sZvL9LSlyuSLlWkqOjwduo8b6Uv1DkmudIeFF2dHCgxVtk8dpIvHpBxhEOdhKk7OLIUSdJ+cSRY57B+0DgGUUlNfpthTfGkauzxrvTsUUaCVhlKeteTXCoJDCa2NOKhOmC4G1H8JBd4OBZReSRGkqcb/CO1PyLJTLB4j1q8JYaIutEjSLX8YKM+a6phdMsdLFUoV5RTm9JSkuDN8WcIon0NZMNZWh1q8C7SJEwV5HxrmnnTrf3KoJBlmCYI2ilSLlfEvlE4011NNgjgthzEua0oKK7JLE7HZHlEl60BLMVFewg4EWNt0ThrVNEVkkiTwpKXSWJzdRENgvKGq4IhjsiezgSFtsfCUq8qki5S1LRQeYQQ4nemmCkImWMw3tFUoUBZk4NOeZYEp4XRKTGa6wJjrWNHBVJR4m3FCnbuD6aak2WsMTh3SZImGCIPKNgsDpVwnsa70K31lCFJZYcwwSMFcQulGTsZuEaSdBXkPGZhu0FsdUO73RHjq8MPGGIfaGIbVTk6iuI3GFgucHrIQkmWSJdBd7BBu+uOryWAhY7+Lki9rK5wtEQzWwvtbqGhIMFwWRJsElsY4m9IIg9L6lCX0VklaPAYkfkZEGDnOWowlBJjtMUkcGK4Lg6EtoZInMUBVYLgn0UsdmCyCz7gIGHFfk+k1QwTh5We7A9x+IdJ6CvIkEagms0hR50eH9UnTQJ+2oiKyVlLFUE+8gBGu8MQ3CppUHesnjTHN4QB/UGPhCTHLFPHMFrCqa73gqObUJGa03wgbhHkrCfpEpzNLE7JDS25FMKhlhKKWKfCgqstLCPu1zBXy0J2ztwjtixBu8UTRn9LVtkmCN2iyFhtME70JHRQ1KVZXqKI/KNIKYMCYs1GUMEKbM1bKOI9LDXC7zbHS+bt+1MTWS9odA9DtrYtpbImQJ2VHh/lisEwaHqUk1kjKTAKknkBEXkbkdMGwq0dnhzLJF3NJH3JVwrqOB4Sca2hti75nmJN0WzxS6UxDYoEpxpa4htVlRjkYE7DZGzJVU72uC9IyhQL4i8YfGWSYLLNcHXloyz7QhNifmKSE9JgfGmuyLhc403Xm9vqcp6gXe3xuuv8F6VJNxkyTHEkHG2g0aKXL0MsXc1bGfgas2//dCONXiNLCX+5mB7eZIl1kHh7ajwpikyzlUUWOVOsjSQlsS+M0R+pPje/dzBXRZGO0rMtgQrLLG9VSu9n6CMXS3BhwYmSoIBhsjNBmZbgusE9BCPCP5triU4VhNbJfE+swSP27aayE8tuTpYYjtrYjMVGZdp2NpS1s6aBnKSHDsbKuplKbHM4a0wMFd/5/DmGyKrJSUaW4IBrqUhx0vyfzTBBLPIUcnZdrAkNsKR0sWRspumSns6Ch0v/qqIbBYUWKvPU/CFoyrDJGwSNFhbA/MlzKqjrO80hRbpKx0Jewsi/STftwGSlKc1JZyAzx05dhLEdnfQvhZOqiHWWEAHC7+30FuRcZUgaO5gpaIK+xsiHRUsqaPElTV40xQZQ107Q9BZE1nryDVGU9ZSQ47bmhBpLcYpUt7S+xuK/FiT8qKjwXYw5ypS2iuCv7q1gtgjhuBuB8LCFY5cUuCNtsQOFcT+4Ih9JX+k8Ea6v0iCIRZOtCT0Et00JW5UeC85Cg0ScK0k411HcG1zKtre3SeITBRk7WfwDhEvaYLTHP9le0m8By0JDwn4TlLW/aJOvGHxdjYUes+ScZigCkYQdNdEOhkiezgShqkx8ueKjI8lDfK2oNiOFvrZH1hS+tk7NV7nOmLHicGWEgubkXKdwdtZknCLJXaCpkrjZBtLZFsDP9CdxWsSr05Sxl6CMmoFbCOgryX40uDtamB7SVmXW4Ihlgpmq+00tBKUUa83WbjLUNkzDmY7cow1JDygyPGlhgGKYKz4vcV7QBNbJIgM11TUqZaMdwTeSguH6rOaw1JRKzaaGyxVm2EJ/uCIrVWUcZUkcp2grMsEjK+DMwS59jQk3Kd6SEq1d0S6uVmO4Bc1lDXTUcHjluCXEq+1OlBDj1pi9zgiXxnKuE0SqTXwhqbETW6RggMEnGl/q49UT2iCzgJvRwVXS2K/d6+ZkyUl7jawSVLit46EwxVljDZwoSQ20sDBihztHfk2yA8NVZghiXwrYHQdfKAOtzsayjhY9bY0yE2CWEeJ9xfzO423xhL5syS2TFJofO2pboHob0nY4GiAgRrvGQEDa/FWSsoaaYl0syRsEt3kWoH3B01shCXhTUWe9w3Bt44SC9QCh3eShQctwbaK2ApLroGCMlZrYqvlY3qYhM0aXpFkPOuoqJ3Dm6fxXrGwVF9gCWZagjPqznfkuMKQ8DPTQRO8ZqG1hPGKEm9IgpGW4DZDgTNriTxvFiq+Lz+0cKfp4wj6OCK9JSnzNSn9LFU7UhKZZMnYwcJ8s8yRsECScK4j5UOB95HFO0CzhY4xJxuCix0lDlEUeMdS6EZBkTsUkZ4K74dugyTXS7aNgL8aqjDfkCE0ZbwkCXpaWCKhl8P7VD5jxykivSyxyZrYERbe168LYu9ZYh86IkscgVLE7tWPKmJv11CgoyJltMEbrohtVAQfO4ImltiHEroYEs7RxAarVpY8AwXMcMReFOTYWe5iiLRQxJ5Q8DtJ8LQhWOhIeFESPGsILhbNDRljNbHzNRlTFbk2S3L0NOS6V1KFJYKUbSTcIIhM0wQ/s2TM0SRMNcQmSap3jCH4yhJZKSkwyRHpYYgsFeQ4U7xoCB7VVOExhXepo9ABBsYbvGWKXPME3lyH95YioZ0gssQRWWbI+FaSMkXijZXwgiTlYdPdkNLaETxlyDVIwqeaEus0aTcYcg0RVOkpR3CSJqIddK+90JCxzsDVloyrFd5ZAr4TBKfaWa6boEA7C7s6EpYaeFPjveooY72mjIccLHJ9HUwVlDhKkmutJDJBwnp1rvulJZggKDRfbXAkvC/4l3ozQOG9a8lxjx0i7nV4jSXc7vhe3OwIxjgSHjdEhhsif9YkPGlus3iLFDnWOFhtCZbJg0UbQcIaR67JjthoCyMEZRwhiXWyxO5QxI6w5NhT4U1WsJvDO60J34fW9hwzwlKij6ZAW9ne4L0s8C6XeBMEkd/LQy1VucBRot6QMlbivaBhoBgjqGiCJNhsqVp/S2SsG6DIONCR0dXhvWbJ+MRRZJkkuEjgDXJjFQW6SSL7GXK8Z2CZg7cVsbWGoKmEpzQ5elpiy8Ryg7dMkLLUEauzeO86CuwlSOlgYLojZWeJ9xM3S1PWfEfKl5ISLQ0MEKR8YOB2QfCxJBjrKPCN4f9MkaSsqoVXJBmP7EpFZ9UQfOoOFwSzBN4MQ8LsGrymlipcJQhmy0GaQjPqCHaXRwuCZwRbqK2Fg9wlClZqYicrIgMdZfxTQ0c7TBIbrChxmuzoKG8XRaSrIhhiyNFJkrC7oIAWMEOQa5aBekPCRknCo4IKPrYkvCDI8aYmY7WFtprgekcJZ3oLIqssCSMtFbQTJKwXYy3BY5oCh2iKPCpJOE+zRdpYgi6O2KmOAgvVCYaU4ySRek1sgyFhJ403QFHiVEmJHwtybO1gs8Hr5+BETQX3War0qZngYGgtVZtoqd6vFSk/UwdZElYqyjrF4HXUeFspIi9IGKf4j92pKGAdCYMVsbcV3kRF0N+R8LUd5PCsIGWoxDtBkCI0nKofdJQxT+LtZflvuc8Q3CjwWkq8KwUpHzkK/NmSsclCL0nseQdj5FRH5CNHSgtLiW80Of5HU9Hhlsga9bnBq3fEVltKfO5IaSTmGjjc4J0otcP7QsJUSQM8pEj5/wCuUuC2DWz8AAAAAElFTkSuQmCC");
}

    </style>
  </template>
</dom-module><dom-module id="base16-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Base16 Default Dark
    Author:     Chris Kempson (http://chriskempson.com)

    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-chrome-devtools)
    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)

*/

.cm-s-base16-dark.CodeMirror {
  background: #151515;
  color: #e0e0e0;
}

.cm-s-base16-dark div.CodeMirror-selected {
  background: #303030 !important;
}

.cm-s-base16-dark.CodeMirror ::selection {
  background: rgba(48, 48, 48, .99);
}

.cm-s-base16-dark.CodeMirror ::-moz-selection {
  background: rgba(48, 48, 48, .99);
}

.cm-s-base16-dark .CodeMirror-gutters {
  background: #151515;
  border-right: 0px;
}

.cm-s-base16-dark .CodeMirror-guttermarker {
  color: #ac4142;
}

.cm-s-base16-dark .CodeMirror-guttermarker-subtle {
  color: #505050;
}

.cm-s-base16-dark .CodeMirror-linenumber {
  color: #505050;
}

.cm-s-base16-dark .CodeMirror-cursor {
  border-left: 1px solid #b0b0b0 !important;
}

.cm-s-base16-dark span.cm-comment {
  color: #8f5536;
}

.cm-s-base16-dark span.cm-atom {
  color: #aa759f;
}

.cm-s-base16-dark span.cm-number {
  color: #aa759f;
}

.cm-s-base16-dark span.cm-property, .cm-s-base16-dark span.cm-attribute {
  color: #90a959;
}

.cm-s-base16-dark span.cm-keyword {
  color: #ac4142;
}

.cm-s-base16-dark span.cm-string {
  color: #f4bf75;
}

.cm-s-base16-dark span.cm-variable {
  color: #90a959;
}

.cm-s-base16-dark span.cm-variable-2 {
  color: #6a9fb5;
}

.cm-s-base16-dark span.cm-def {
  color: #d28445;
}

.cm-s-base16-dark span.cm-bracket {
  color: #e0e0e0;
}

.cm-s-base16-dark span.cm-tag {
  color: #ac4142;
}

.cm-s-base16-dark span.cm-link {
  color: #aa759f;
}

.cm-s-base16-dark span.cm-error {
  background: #ac4142;
  color: #b0b0b0;
}

.cm-s-base16-dark .CodeMirror-activeline-background {
  background: #202020 !important;
}

.cm-s-base16-dark .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="base16-light" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Base16 Default Light
    Author:     Chris Kempson (http://chriskempson.com)

    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-chrome-devtools)
    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)

*/

.cm-s-base16-light.CodeMirror {
  background: #f5f5f5;
  color: #202020;
}

.cm-s-base16-light div.CodeMirror-selected {
  background: #e0e0e0 !important;
}

.cm-s-base16-light.CodeMirror ::selection {
  background: #e0e0e0;
}

.cm-s-base16-light.CodeMirror ::-moz-selection {
  background: #e0e0e0;
}

.cm-s-base16-light .CodeMirror-gutters {
  background: #f5f5f5;
  border-right: 0px;
}

.cm-s-base16-light .CodeMirror-guttermarker {
  color: #ac4142;
}

.cm-s-base16-light .CodeMirror-guttermarker-subtle {
  color: #b0b0b0;
}

.cm-s-base16-light .CodeMirror-linenumber {
  color: #b0b0b0;
}

.cm-s-base16-light .CodeMirror-cursor {
  border-left: 1px solid #505050 !important;
}

.cm-s-base16-light span.cm-comment {
  color: #8f5536;
}

.cm-s-base16-light span.cm-atom {
  color: #aa759f;
}

.cm-s-base16-light span.cm-number {
  color: #aa759f;
}

.cm-s-base16-light span.cm-property, .cm-s-base16-light span.cm-attribute {
  color: #90a959;
}

.cm-s-base16-light span.cm-keyword {
  color: #ac4142;
}

.cm-s-base16-light span.cm-string {
  color: #f4bf75;
}

.cm-s-base16-light span.cm-variable {
  color: #90a959;
}

.cm-s-base16-light span.cm-variable-2 {
  color: #6a9fb5;
}

.cm-s-base16-light span.cm-def {
  color: #d28445;
}

.cm-s-base16-light span.cm-bracket {
  color: #202020;
}

.cm-s-base16-light span.cm-tag {
  color: #ac4142;
}

.cm-s-base16-light span.cm-link {
  color: #aa759f;
}

.cm-s-base16-light span.cm-error {
  background: #ac4142;
  color: #505050;
}

.cm-s-base16-light .CodeMirror-activeline-background {
  background: #DDDCDC !important;
}

.cm-s-base16-light .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="blackboard" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* Port of TextMate's Blackboard theme */

.cm-s-blackboard.CodeMirror { background: #0C1021; color: #F8F8F8; }
.cm-s-blackboard .CodeMirror-selected { background: #253B76 !important; }
.cm-s-blackboard.CodeMirror ::selection { background: rgba(37, 59, 118, .99); }
.cm-s-blackboard.CodeMirror ::-moz-selection { background: rgba(37, 59, 118, .99); }
.cm-s-blackboard .CodeMirror-gutters { background: #0C1021; border-right: 0; }
.cm-s-blackboard .CodeMirror-guttermarker { color: #FBDE2D; }
.cm-s-blackboard .CodeMirror-guttermarker-subtle { color: #888; }
.cm-s-blackboard .CodeMirror-linenumber { color: #888; }
.cm-s-blackboard .CodeMirror-cursor { border-left: 1px solid #A7A7A7 !important; }

.cm-s-blackboard .cm-keyword { color: #FBDE2D; }
.cm-s-blackboard .cm-atom { color: #D8FA3C; }
.cm-s-blackboard .cm-number { color: #D8FA3C; }
.cm-s-blackboard .cm-def { color: #8DA6CE; }
.cm-s-blackboard .cm-variable { color: #FF6400; }
.cm-s-blackboard .cm-operator { color: #FBDE2D;}
.cm-s-blackboard .cm-comment { color: #AEAEAE; }
.cm-s-blackboard .cm-string { color: #61CE3C; }
.cm-s-blackboard .cm-string-2 { color: #61CE3C; }
.cm-s-blackboard .cm-meta { color: #D8FA3C; }
.cm-s-blackboard .cm-builtin { color: #8DA6CE; }
.cm-s-blackboard .cm-tag { color: #8DA6CE; }
.cm-s-blackboard .cm-attribute { color: #8DA6CE; }
.cm-s-blackboard .cm-header { color: #FF6400; }
.cm-s-blackboard .cm-hr { color: #AEAEAE; }
.cm-s-blackboard .cm-link { color: #8DA6CE; }
.cm-s-blackboard .cm-error { background: #9D1E15; color: #F8F8F8; }

.cm-s-blackboard .CodeMirror-activeline-background {background: #3C3636 !important;}
.cm-s-blackboard .CodeMirror-matchingbracket {outline:1px solid grey;color:white !important}
    </style>
  </template>
</dom-module><dom-module id="cobalt" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-cobalt.CodeMirror {
  background: #002240;
  color: white;
}

.cm-s-cobalt div.CodeMirror-selected {
  background: #b36539 !important;
}

.cm-s-cobalt.CodeMirror ::selection {
  background: rgba(179, 101, 57, .99);
}

.cm-s-cobalt.CodeMirror ::-moz-selection {
  background: rgba(179, 101, 57, .99);
}

.cm-s-cobalt .CodeMirror-gutters {
  background: #002240;
  border-right: 1px solid #aaa;
}

.cm-s-cobalt .CodeMirror-guttermarker {
  color: #ffee80;
}

.cm-s-cobalt .CodeMirror-guttermarker-subtle {
  color: #d0d0d0;
}

.cm-s-cobalt .CodeMirror-linenumber {
  color: #d0d0d0;
}

.cm-s-cobalt .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-cobalt span.cm-comment {
  color: #08f;
}

.cm-s-cobalt span.cm-atom {
  color: #845dc4;
}

.cm-s-cobalt span.cm-number, .cm-s-cobalt span.cm-attribute {
  color: #ff80e1;
}

.cm-s-cobalt span.cm-keyword {
  color: #ffee80;
}

.cm-s-cobalt span.cm-string {
  color: #3ad900;
}

.cm-s-cobalt span.cm-meta {
  color: #ff9d00;
}

.cm-s-cobalt span.cm-variable-2, .cm-s-cobalt span.cm-tag {
  color: #9effff;
}

.cm-s-cobalt span.cm-variable-3, .cm-s-cobalt span.cm-def {
  color: white;
}

.cm-s-cobalt span.cm-bracket {
  color: #d8d8d8;
}

.cm-s-cobalt span.cm-builtin, .cm-s-cobalt span.cm-special {
  color: #ff9e59;
}

.cm-s-cobalt span.cm-link {
  color: #845dc4;
}

.cm-s-cobalt span.cm-error {
  color: #9d1e15;
}

.cm-s-cobalt .CodeMirror-activeline-background {
  background: #002D57 !important;
}

.cm-s-cobalt .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="colorforth" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-colorforth.CodeMirror {
  background: #000000;
  color: #f8f8f8;
}

.cm-s-colorforth .CodeMirror-gutters {
  background: #0a001f;
  border-right: 1px solid #aaa;
}

.cm-s-colorforth .CodeMirror-guttermarker {
  color: #FFBD40;
}

.cm-s-colorforth .CodeMirror-guttermarker-subtle {
  color: #78846f;
}

.cm-s-colorforth .CodeMirror-linenumber {
  color: #bababa;
}

.cm-s-colorforth .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-colorforth span.cm-comment {
  color: #ededed;
}

.cm-s-colorforth span.cm-def {
  color: #ff1c1c;
  font-weight: bold;
}

.cm-s-colorforth span.cm-keyword {
  color: #ffd900;
}

.cm-s-colorforth span.cm-builtin {
  color: #00d95a;
}

.cm-s-colorforth span.cm-variable {
  color: #73ff00;
}

.cm-s-colorforth span.cm-string {
  color: #007bff;
}

.cm-s-colorforth span.cm-number {
  color: #00c4ff;
}

.cm-s-colorforth span.cm-atom {
  color: #606060;
}

.cm-s-colorforth span.cm-variable-2 {
  color: #EEE;
}

.cm-s-colorforth span.cm-variable-3 {
  color: #DDD;
}

.cm-s-colorforth span.cm-property {
}

.cm-s-colorforth span.cm-operator {
}

.cm-s-colorforth span.cm-meta {
  color: yellow;
}

.cm-s-colorforth span.cm-qualifier {
  color: #FFF700;
}

.cm-s-colorforth span.cm-bracket {
  color: #cc7;
}

.cm-s-colorforth span.cm-tag {
  color: #FFBD40;
}

.cm-s-colorforth span.cm-attribute {
  color: #FFF700;
}

.cm-s-colorforth span.cm-error {
  color: #f00;
}

.cm-s-colorforth .CodeMirror-selected {
  background: #333d53 !important;
}

.cm-s-colorforth span.cm-compilation {
  background: rgba(255, 255, 255, 0.12);
}

.cm-s-colorforth .CodeMirror-activeline-background {
  background: #253540 !important;
}

    </style>
  </template>
</dom-module><dom-module id="eclipse" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-eclipse span.cm-meta {
  color: #FF1717;
}

.cm-s-eclipse span.cm-keyword {
  line-height: 1em;
  font-weight: bold;
  color: #7F0055;
}

.cm-s-eclipse span.cm-atom {
  color: #219;
}

.cm-s-eclipse span.cm-number {
  color: #164;
}

.cm-s-eclipse span.cm-def {
  color: #00f;
}

.cm-s-eclipse span.cm-variable {
  color: black;
}

.cm-s-eclipse span.cm-variable-2 {
  color: #0000C0;
}

.cm-s-eclipse span.cm-variable-3 {
  color: #0000C0;
}

.cm-s-eclipse span.cm-property {
  color: black;
}

.cm-s-eclipse span.cm-operator {
  color: black;
}

.cm-s-eclipse span.cm-comment {
  color: #3F7F5F;
}

.cm-s-eclipse span.cm-string {
  color: #2A00FF;
}

.cm-s-eclipse span.cm-string-2 {
  color: #f50;
}

.cm-s-eclipse span.cm-qualifier {
  color: #555;
}

.cm-s-eclipse span.cm-builtin {
  color: #30a;
}

.cm-s-eclipse span.cm-bracket {
  color: #cc7;
}

.cm-s-eclipse span.cm-tag {
  color: #170;
}

.cm-s-eclipse span.cm-attribute {
  color: #00c;
}

.cm-s-eclipse span.cm-link {
  color: #219;
}

.cm-s-eclipse span.cm-error {
  color: #f00;
}

.cm-s-eclipse .CodeMirror-activeline-background {
  background: #e8f2ff !important;
}

.cm-s-eclipse .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: black !important;
}

    </style>
  </template>
</dom-module><dom-module id="elegant" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-elegant span.cm-number, .cm-s-elegant span.cm-string, .cm-s-elegant span.cm-atom {
  color: #762;
}

.cm-s-elegant span.cm-comment {
  color: #262;
  font-style: italic;
  line-height: 1em;
}

.cm-s-elegant span.cm-meta {
  color: #555;
  font-style: italic;
  line-height: 1em;
}

.cm-s-elegant span.cm-variable {
  color: black;
}

.cm-s-elegant span.cm-variable-2 {
  color: #b11;
}

.cm-s-elegant span.cm-qualifier {
  color: #555;
}

.cm-s-elegant span.cm-keyword {
  color: #730;
}

.cm-s-elegant span.cm-builtin {
  color: #30a;
}

.cm-s-elegant span.cm-link {
  color: #762;
}

.cm-s-elegant span.cm-error {
  background-color: #fdd;
}

.cm-s-elegant .CodeMirror-activeline-background {
  background: #e8f2ff !important;
}

.cm-s-elegant .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: black !important;
}

    </style>
  </template>
</dom-module><dom-module id="erlang-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-erlang-dark.CodeMirror {
  background: #002240;
  color: white;
}

.cm-s-erlang-dark div.CodeMirror-selected {
  background: #b36539 !important;
}

.cm-s-erlang-dark.CodeMirror ::selection {
  background: rgba(179, 101, 57, .99);
}

.cm-s-erlang-dark.CodeMirror ::-moz-selection {
  background: rgba(179, 101, 57, .99);
}

.cm-s-erlang-dark .CodeMirror-gutters {
  background: #002240;
  border-right: 1px solid #aaa;
}

.cm-s-erlang-dark .CodeMirror-guttermarker {
  color: white;
}

.cm-s-erlang-dark .CodeMirror-guttermarker-subtle {
  color: #d0d0d0;
}

.cm-s-erlang-dark .CodeMirror-linenumber {
  color: #d0d0d0;
}

.cm-s-erlang-dark .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-erlang-dark span.cm-atom {
  color: #f133f1;
}

.cm-s-erlang-dark span.cm-attribute {
  color: #ff80e1;
}

.cm-s-erlang-dark span.cm-bracket {
  color: #ff9d00;
}

.cm-s-erlang-dark span.cm-builtin {
  color: #eaa;
}

.cm-s-erlang-dark span.cm-comment {
  color: #77f;
}

.cm-s-erlang-dark span.cm-def {
  color: #e7a;
}

.cm-s-erlang-dark span.cm-keyword {
  color: #ffee80;
}

.cm-s-erlang-dark span.cm-meta {
  color: #50fefe;
}

.cm-s-erlang-dark span.cm-number {
  color: #ffd0d0;
}

.cm-s-erlang-dark span.cm-operator {
  color: #d55;
}

.cm-s-erlang-dark span.cm-property {
  color: #ccc;
}

.cm-s-erlang-dark span.cm-qualifier {
  color: #ccc;
}

.cm-s-erlang-dark span.cm-quote {
  color: #ccc;
}

.cm-s-erlang-dark span.cm-special {
  color: #ffbbbb;
}

.cm-s-erlang-dark span.cm-string {
  color: #3ad900;
}

.cm-s-erlang-dark span.cm-string-2 {
  color: #ccc;
}

.cm-s-erlang-dark span.cm-tag {
  color: #9effff;
}

.cm-s-erlang-dark span.cm-variable {
  color: #50fe50;
}

.cm-s-erlang-dark span.cm-variable-2 {
  color: #e0e;
}

.cm-s-erlang-dark span.cm-variable-3 {
  color: #ccc;
}

.cm-s-erlang-dark span.cm-error {
  color: #9d1e15;
}

.cm-s-erlang-dark .CodeMirror-activeline-background {
  background: #013461 !important;
}

.cm-s-erlang-dark .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="lesser-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*
http://lesscss.org/ dark theme
Ported to CodeMirror by Peter Kroon
*/
.cm-s-lesser-dark {
  line-height: 1.3em;
}

.cm-s-lesser-dark.CodeMirror {
  background: #262626;
  color: #EBEFE7;
  text-shadow: 0 -1px 1px #262626;
}

.cm-s-lesser-dark div.CodeMirror-selected {
  background: #45443B !important;
} /* 33322B*/
.cm-s-lesser-dark.CodeMirror ::selection {
  background: rgba(69, 68, 59, .99);
}

.cm-s-lesser-dark.CodeMirror ::-moz-selection {
  background: rgba(69, 68, 59, .99);
}

.cm-s-lesser-dark .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-lesser-dark pre {
  padding: 0 8px;
}/*editable code holder*/

.cm-s-lesser-dark.CodeMirror span.CodeMirror-matchingbracket {
  color: #7EFC7E;
}/*65FC65*/

.cm-s-lesser-dark .CodeMirror-gutters {
  background: #262626;
  border-right: 1px solid #aaa;
}

.cm-s-lesser-dark .CodeMirror-guttermarker {
  color: #599eff;
}

.cm-s-lesser-dark .CodeMirror-guttermarker-subtle {
  color: #777;
}

.cm-s-lesser-dark .CodeMirror-linenumber {
  color: #777;
}

.cm-s-lesser-dark span.cm-keyword {
  color: #599eff;
}

.cm-s-lesser-dark span.cm-atom {
  color: #C2B470;
}

.cm-s-lesser-dark span.cm-number {
  color: #B35E4D;
}

.cm-s-lesser-dark span.cm-def {
  color: white;
}

.cm-s-lesser-dark span.cm-variable {
  color: #D9BF8C;
}

.cm-s-lesser-dark span.cm-variable-2 {
  color: #669199;
}

.cm-s-lesser-dark span.cm-variable-3 {
  color: white;
}

.cm-s-lesser-dark span.cm-property {
  color: #92A75C;
}

.cm-s-lesser-dark span.cm-operator {
  color: #92A75C;
}

.cm-s-lesser-dark span.cm-comment {
  color: #666;
}

.cm-s-lesser-dark span.cm-string {
  color: #BCD279;
}

.cm-s-lesser-dark span.cm-string-2 {
  color: #f50;
}

.cm-s-lesser-dark span.cm-meta {
  color: #738C73;
}

.cm-s-lesser-dark span.cm-qualifier {
  color: #555;
}

.cm-s-lesser-dark span.cm-builtin {
  color: #ff9e59;
}

.cm-s-lesser-dark span.cm-bracket {
  color: #EBEFE7;
}

.cm-s-lesser-dark span.cm-tag {
  color: #669199;
}

.cm-s-lesser-dark span.cm-attribute {
  color: #00c;
}

.cm-s-lesser-dark span.cm-header {
  color: #a0a;
}

.cm-s-lesser-dark span.cm-quote {
  color: #090;
}

.cm-s-lesser-dark span.cm-hr {
  color: #999;
}

.cm-s-lesser-dark span.cm-link {
  color: #00c;
}

.cm-s-lesser-dark span.cm-error {
  color: #9d1e15;
}

.cm-s-lesser-dark .CodeMirror-activeline-background {
  background: #3C3A3A !important;
}

.cm-s-lesser-dark .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="liquibyte" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-liquibyte.CodeMirror {
  background-color: #000;
  color: #fff;
  line-height: 1.2em;
  font-size: 1em;
}

.CodeMirror-focused .cm-matchhighlight {
  text-decoration: underline;
  text-decoration-color: #0f0;
  text-decoration-style: wavy;
}

.cm-trailingspace {
  text-decoration: line-through;
  text-decoration-color: #f00;
  text-decoration-style: dotted;
}

.cm-tab {
  text-decoration: line-through;
  text-decoration-color: #404040;
  text-decoration-style: dotted;
}

.cm-s-liquibyte .CodeMirror-gutters {
  background-color: #262626;
  border-right: 1px solid #505050;
  padding-right: 0.8em;
}

.cm-s-liquibyte .CodeMirror-gutter-elt div {
  font-size: 1.2em;
}

.cm-s-liquibyte .CodeMirror-guttermarker {
}

.cm-s-liquibyte .CodeMirror-guttermarker-subtle {
}

.cm-s-liquibyte .CodeMirror-linenumber {
  color: #606060;
  padding-left: 0;
}

.cm-s-liquibyte .CodeMirror-cursor {
  border-left: 1px solid #eee !important;
}

.cm-s-liquibyte span.cm-comment {
  color: #008000;
}

.cm-s-liquibyte span.cm-def {
  color: #ffaf40;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-keyword {
  color: #c080ff;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-builtin {
  color: #ffaf40;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-variable {
  color: #5967ff;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-string {
  color: #ff8000;
}

.cm-s-liquibyte span.cm-number {
  color: #0f0;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-atom {
  color: #bf3030;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-variable-2 {
  color: #007f7f;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-variable-3 {
  color: #c080ff;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-property {
  color: #999;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-operator {
  color: #fff;
}

.cm-s-liquibyte span.cm-meta {
  color: #0f0;
}

.cm-s-liquibyte span.cm-qualifier {
  color: #fff700;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-bracket {
  color: #cc7;
}

.cm-s-liquibyte span.cm-tag {
  color: #ff0;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-attribute {
  color: #c080ff;
  font-weight: bold;
}

.cm-s-liquibyte span.cm-error {
  color: #f00;
}

.cm-s-liquibyte .CodeMirror-selected {
  background-color: rgba(255, 0, 0, 0.25) !important;
}

.cm-s-liquibyte span.cm-compilation {
  background-color: rgba(255, 255, 255, 0.12);
}

.cm-s-liquibyte .CodeMirror-activeline-background {
  background-color: rgba(0, 255, 0, 0.15) !important;
}

/* Default styles for common addons */
div.CodeMirror span.CodeMirror-matchingbracket {
  color: #0f0;
  font-weight: bold;
}

div.CodeMirror span.CodeMirror-nonmatchingbracket {
  color: #f00;
  font-weight: bold;
}

.CodeMirror-matchingtag {
  background-color: rgba(150, 255, 0, .3);
}
/* Scrollbars */
/* Simple */
div.CodeMirror-simplescroll-horizontal div:hover, div.CodeMirror-simplescroll-vertical div:hover {
  background-color: rgba(80, 80, 80, .7);
}

div.CodeMirror-simplescroll-horizontal div, div.CodeMirror-simplescroll-vertical div {
  background-color: rgba(80, 80, 80, .3);
  border: 1px solid #404040;
  border-radius: 5px;
}

div.CodeMirror-simplescroll-vertical div {
  border-top: 1px solid #404040;
  border-bottom: 1px solid #404040;
}

div.CodeMirror-simplescroll-horizontal div {
  border-left: 1px solid #404040;
  border-right: 1px solid #404040;
}

div.CodeMirror-simplescroll-vertical {
  background-color: #262626;
}

div.CodeMirror-simplescroll-horizontal {
  background-color: #262626;
  border-top: 1px solid #404040;
}
/* Overlay */
div.CodeMirror-overlayscroll-horizontal div, div.CodeMirror-overlayscroll-vertical div {
  background-color: #404040;
  border-radius: 5px;
}

div.CodeMirror-overlayscroll-vertical div {
  border: 1px solid #404040;
}

div.CodeMirror-overlayscroll-horizontal div {
  border: 1px solid #404040;
}

    </style>
  </template>
</dom-module><dom-module id="mbo" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /****************************************************************/
/*   Based on mbonaci's Brackets mbo theme                      */
/*   https://github.com/mbonaci/global/blob/master/Mbo.tmTheme  */
/*   Create your own: http://tmtheme-editor.herokuapp.com       */
/****************************************************************/

.cm-s-mbo.CodeMirror {background: #2c2c2c; color: #ffffec;}
.cm-s-mbo div.CodeMirror-selected {background: #716C62 !important;}
.cm-s-mbo.CodeMirror ::selection { background: rgba(113, 108, 98, .99); }
.cm-s-mbo.CodeMirror ::-moz-selection { background: rgba(113, 108, 98, .99); }
.cm-s-mbo .CodeMirror-gutters {background: #4e4e4e; border-right: 0px;}
.cm-s-mbo .CodeMirror-guttermarker { color: white; }
.cm-s-mbo .CodeMirror-guttermarker-subtle { color: grey; }
.cm-s-mbo .CodeMirror-linenumber {color: #dadada;}
.cm-s-mbo .CodeMirror-cursor {border-left: 1px solid #ffffec !important;}

.cm-s-mbo span.cm-comment {color: #95958a;}
.cm-s-mbo span.cm-atom {color: #00a8c6;}
.cm-s-mbo span.cm-number {color: #00a8c6;}

.cm-s-mbo span.cm-property, .cm-s-mbo span.cm-attribute {color: #9ddfe9;}
.cm-s-mbo span.cm-keyword {color: #ffb928;}
.cm-s-mbo span.cm-string {color: #ffcf6c;}
.cm-s-mbo span.cm-string.cm-property {color: #ffffec;}

.cm-s-mbo span.cm-variable {color: #ffffec;}
.cm-s-mbo span.cm-variable-2 {color: #00a8c6;}
.cm-s-mbo span.cm-def {color: #ffffec;}
.cm-s-mbo span.cm-bracket {color: #fffffc; font-weight: bold;}
.cm-s-mbo span.cm-tag {color: #9ddfe9;}
.cm-s-mbo span.cm-link {color: #f54b07;}
.cm-s-mbo span.cm-error {border-bottom: #636363; color: #ffffec;}
.cm-s-mbo span.cm-qualifier {color: #ffffec;}

.cm-s-mbo .CodeMirror-activeline-background {background: #494b41 !important;}
.cm-s-mbo .CodeMirror-matchingbracket {color: #222 !important;}
.cm-s-mbo .CodeMirror-matchingtag {background: rgba(255, 255, 255, .37);}

    </style>
  </template>
</dom-module><dom-module id="mdn-like" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*
  MDN-LIKE Theme - Mozilla
  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>
  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues
  GitHub: @peterkroon

  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation

*/
.cm-s-mdn-like.CodeMirror {
  color: #999;
  background-color: #fff;
}

.cm-s-mdn-like .CodeMirror-selected {
  background: #cfc !important;
}

.cm-s-mdn-like.CodeMirror ::selection {
  background: #cfc;
}

.cm-s-mdn-like.CodeMirror ::-moz-selection {
  background: #cfc;
}

.cm-s-mdn-like .CodeMirror-gutters {
  background: #f8f8f8;
  border-left: 6px solid rgba(0,83,159,0.65);
  color: #333;
}

.cm-s-mdn-like .CodeMirror-linenumber {
  color: #aaa;
  padding-left: 8px;
}

div.cm-s-mdn-like .CodeMirror-cursor {
  border-left: 2px solid #222;
}

.cm-s-mdn-like .cm-keyword {
  color: #6262FF;
}

.cm-s-mdn-like .cm-atom {
  color: #F90;
}

.cm-s-mdn-like .cm-number {
  color: #ca7841;
}

.cm-s-mdn-like .cm-def {
  color: #8DA6CE;
}

.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag {
  color: #690;
}

.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def {
  color: #07a;
}

.cm-s-mdn-like .cm-variable {
  color: #07a;
}

.cm-s-mdn-like .cm-property {
  color: #905;
}

.cm-s-mdn-like .cm-qualifier {
  color: #690;
}

.cm-s-mdn-like .cm-operator {
  color: #cda869;
}

.cm-s-mdn-like .cm-comment {
  color: #777;
  font-weight: normal;
}

.cm-s-mdn-like .cm-string {
  color: #07a;
  font-style: italic;
}

.cm-s-mdn-like .cm-string-2 {
  color: #bd6b18;
} /*?*/
.cm-s-mdn-like .cm-meta {
  color: #000;
} /*?*/
.cm-s-mdn-like .cm-builtin {
  color: #9B7536;
} /*?*/
.cm-s-mdn-like .cm-tag {
  color: #997643;
}

.cm-s-mdn-like .cm-attribute {
  color: #d6bb6d;
} /*?*/
.cm-s-mdn-like .cm-header {
  color: #FF6400;
}

.cm-s-mdn-like .cm-hr {
  color: #AEAEAE;
}

.cm-s-mdn-like .cm-link {
  color: #ad9361;
  font-style: italic;
  text-decoration: none;
}

.cm-s-mdn-like .cm-error {
  border-bottom: 1px solid red;
}

div.cm-s-mdn-like .CodeMirror-activeline-background {
  background: #efefff;
}

div.cm-s-mdn-like span.CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: inherit;
}

.cm-s-mdn-like.CodeMirror {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAAyCAYAAAAp8UeFAAAHvklEQVR42s2b63bcNgyEQZCSHCdt2vd/0tWF7I+Q6XgMXiTtuvU5Pl57ZQKkKHzEAOtF5KeIJBGJ8uvL599FRFREZhFx8DeXv8trn68RuGaC8TRfo3SNp9dlDDHedyLyTUTeRWStXKPZrjtpZxaRw5hPqozRs1N8/enzIiQRWcCgy4MUA0f+XWliDhyL8Lfyvx7ei/Ae3iQFHyw7U/59pQVIMEEPEz0G7XiwdRjzSfC3UTtz9vchIntxvry5iMgfIhJoEflOz2CQr3F5h/HfeFe+GTdLaKcu9L8LTeQb/R/7GgbsfKedyNdoHsN31uRPWrfZ5wsj/NzzRQHuToIdU3ahwnsKPxXCjJITuOsi7XLc7SG/v5GdALs7wf8JjTFiB5+QvTEfRyGOfX3Lrx8wxyQi3sNq46O7QahQiCsRFgqddjBouVEHOKDgXAQHD9gJCr5sMKkEdjwsarG/ww3BMHBU7OBjXnzdyY7SfCxf5/z6ATccrwlKuwC/jhznnPF4CgVzhhVf4xp2EixcBActO75iZ8/fM9zAs2OMzKdslgXWJ9XG8PQoOAMA5fGcsvORgv0doBXyHrCwfLJAOwo71QLNkb8n2Pl6EWiR7OCibtkPaz4Kc/0NNAze2gju3zOwekALDaCFPI5vjPFmgGY5AZqyGEvH1x7QfIb8YtxMnA/b+QQ0aQDAwc6JMFg8CbQZ4qoYEEHbRwNojuK3EHwd7VALSgq+MNDKzfT58T8qdpADrgW0GmgcAS1lhzztJmkAzcPNOQbsWEALBDSlMKUG0Eq4CLAQWvEVQ9WU57gZJwZtgPO3r9oBTQ9WO8TjqXINx8R0EYpiZEUWOF3FxkbJkgU9B2f41YBrIj5ZfsQa0M5kTgiAAqM3ShXLgu8XMqcrQBvJ0CL5pnTsfMB13oB8athpAq2XOQmcGmoACCLydx7nToa23ATaSIY2ichfOdPTGxlasXMLaL0MLZAOwAKIM+y8CmicobGdCcbbK9DzN+yYGVoNNI5iUKTMyYOjPse4A8SM1MmcXgU0toOq1yO/v8FOxlASyc7TgeYaAMBJHcY1CcCwGI/TK4AmDbDyKYBBtFUkRwto8gygiQEaByFgJ00BH2M8JWwQS1nafDXQCidWyOI8AcjDCSjCLk8ngObuAm3JAHAdubAmOaK06V8MNEsKPJOhobSprwQa6gD7DclRQdqcwL4zxqgBrQcabUiBLclRDKAlWp+etPkBaNMA0AKlrHwTdEByZAA4GM+SNluSY6wAzcMNewxmgig5Ks0nkrSpBvSaQHMdKTBAnLojOdYyGpQ254602ZILPdTD1hdlggdIm74jbTp8vDwF5ZYUeLWGJpWsh6XNyXgcYwVoJQTEhhTYkxzZjiU5npU2TaB979TQehlaAVq4kaGpiPwwwLkYUuBbQwocyQTv1tA0+1UFWoJF3iv1oq+qoSk8EQdJmwHkziIF7oOZk14EGitibAdjLYYK78H5vZOhtWpoI0ATGHs0Q8OMb4Ey+2bU2UYztCtA0wFAs7TplGLRVQCcqaFdGSPCeTI1QNIC52iWNzof6Uib7xjEp07mNNoUYmVosVItHrHzRlLgBn9LFyRHaQCtVUMbtTNhoXWiTOO9k/V8BdAc1Oq0ArSQs6/5SU0hckNy9NnXqQY0PGYo5dWJ7nINaN6o958FWin27aBaWRka1r5myvLOAm0j30eBJqCxHLReVclxhxOEN2JfDWjxBtAC7MIH1fVaGdoOp4qJYDgKtKPSFNID2gSnGldrCqkFZ+5UeQXQBIRrSwocbdZYQT/2LwRahBPBXoHrB8nxaGROST62DKUbQOMMzZIC9abkuELfQzQALWTnDNAm8KHWFOJgJ5+SHIvTPcmx1xQyZRhNL5Qci689aXMEaN/uNIWkEwDAvFpOZmgsBaaGnbs1NPa1Jm32gBZAIh1pCtG7TSH4aE0y1uVY4uqoFPisGlpP2rSA5qTecWn5agK6BzSpgAyD+wFaqhnYoSZ1Vwr8CmlTQbrcO3ZaX0NAEyMbYaAlyquFoLKK3SPby9CeVUPThrSJmkCAE0CrKUQadi4DrdSlWhmah0YL9z9vClH59YGbHx1J8VZTyAjQepJjmXwAKTDQI3omc3p1U4gDUf6RfcdYfrUp5ClAi2J3Ba6UOXGo+K+bQrjjssitG2SJzshaLwMtXgRagUNpYYoVkMSBLM+9GGiJZMvduG6DRZ4qc04DMPtQQxOjEtACmhO7K1AbNbQDEggZyJwscFpAGwENhoBeUwh3bWolhe8BTYVKxQEWrSUn/uhcM5KhvUu/+eQu0Lzhi+VrK0PrZZNDQKs9cpYUuFYgMVpD4/NxenJTiMCNqdUEUf1qZWjppLT5qSkkUZbCwkbZMSuVnu80hfSkzRbQeqCZSAh6huR4VtoM2gHAlLf72smuWgE+VV7XpE25Ab2WFDgyhnSuKbs4GuGzCjR+tIoUuMFg3kgcWKLTwRqanJQ2W00hAsenfaApRC42hbCvK1SlE0HtE9BGgneJO+ELamitD1YjjOYnNYVcraGhtKkW0EqVVeDx733I2NH581k1NNxNLG0i0IJ8/NjVaOZ0tYZ2Vtr0Xv7tPV3hkWp9EFkgS/J0vosngTaSoaG06WHi+xObQkaAdlbanP8B2+2l0f90LmUAAAAASUVORK5CYII=");
}

    </style>
  </template>
</dom-module><dom-module id="midnight" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* Based on the theme at http://bonsaiden.github.com/JavaScript-Garden */

/*<!--match-->*/
.cm-s-midnight span.CodeMirror-matchhighlight {
  background: #494949;
}

.cm-s-midnight.CodeMirror-focused span.CodeMirror-matchhighlight {
  background: #314D67 !important;
}

/*<!--activeline-->*/
.cm-s-midnight .CodeMirror-activeline-background {
  background: #253540 !important;
}

.cm-s-midnight.CodeMirror {
  background: #0F192A;
  color: #D1EDFF;
}

.cm-s-midnight.CodeMirror {
  border-top: 1px solid black;
  border-bottom: 1px solid black;
}

.cm-s-midnight div.CodeMirror-selected {
  background: #314D67 !important;
}

.cm-s-midnight.CodeMirror ::selection {
  background: rgba(49, 77, 103, .99);
}

.cm-s-midnight.CodeMirror ::-moz-selection {
  background: rgba(49, 77, 103, .99);
}

.cm-s-midnight .CodeMirror-gutters {
  background: #0F192A;
  border-right: 1px solid;
}

.cm-s-midnight .CodeMirror-guttermarker {
  color: white;
}

.cm-s-midnight .CodeMirror-guttermarker-subtle {
  color: #d0d0d0;
}

.cm-s-midnight .CodeMirror-linenumber {
  color: #D0D0D0;
}

.cm-s-midnight .CodeMirror-cursor {
  border-left: 1px solid #F8F8F0 !important;
}

.cm-s-midnight span.cm-comment {
  color: #428BDD;
}

.cm-s-midnight span.cm-atom {
  color: #AE81FF;
}

.cm-s-midnight span.cm-number {
  color: #D1EDFF;
}

.cm-s-midnight span.cm-property, .cm-s-midnight span.cm-attribute {
  color: #A6E22E;
}

.cm-s-midnight span.cm-keyword {
  color: #E83737;
}

.cm-s-midnight span.cm-string {
  color: #1DC116;
}

.cm-s-midnight span.cm-variable {
  color: #FFAA3E;
}

.cm-s-midnight span.cm-variable-2 {
  color: #FFAA3E;
}

.cm-s-midnight span.cm-def {
  color: #4DD;
}

.cm-s-midnight span.cm-bracket {
  color: #D1EDFF;
}

.cm-s-midnight span.cm-tag {
  color: #449;
}

.cm-s-midnight span.cm-link {
  color: #AE81FF;
}

.cm-s-midnight span.cm-error {
  background: #F92672;
  color: #F8F8F0;
}

.cm-s-midnight .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="monokai" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* Based on Sublime Text's Monokai theme */

.cm-s-monokai.CodeMirror {background: #272822; color: #f8f8f2;}
.cm-s-monokai div.CodeMirror-selected {background: #49483E !important;}
.cm-s-monokai.CodeMirror ::selection { background: rgba(73, 72, 62, .99); }
.cm-s-monokai.CodeMirror ::-moz-selection { background: rgba(73, 72, 62, .99); }
.cm-s-monokai .CodeMirror-gutters {background: #272822; border-right: 0px;}
.cm-s-monokai .CodeMirror-guttermarker { color: white; }
.cm-s-monokai .CodeMirror-guttermarker-subtle { color: #d0d0d0; }
.cm-s-monokai .CodeMirror-linenumber {color: #d0d0d0;}
.cm-s-monokai .CodeMirror-cursor {border-left: 1px solid #f8f8f0 !important;}

.cm-s-monokai span.cm-comment {color: #75715e;}
.cm-s-monokai span.cm-atom {color: #ae81ff;}
.cm-s-monokai span.cm-number {color: #ae81ff;}

.cm-s-monokai span.cm-property, .cm-s-monokai span.cm-attribute {color: #a6e22e;}
.cm-s-monokai span.cm-keyword {color: #f92672;}
.cm-s-monokai span.cm-string {color: #e6db74;}

.cm-s-monokai span.cm-variable {color: #f8f8f2;}
.cm-s-monokai span.cm-variable-2 {color: #9effff;}
.cm-s-monokai span.cm-variable-3 {color: #66d9ef;}
.cm-s-monokai span.cm-def {color: #fd971f;}
.cm-s-monokai span.cm-bracket {color: #f8f8f2;}
.cm-s-monokai span.cm-tag {color: #f92672;}
.cm-s-monokai span.cm-link {color: #ae81ff;}
.cm-s-monokai span.cm-error {background: #f92672; color: #f8f8f0;}

.cm-s-monokai .CodeMirror-activeline-background {background: #373831 !important;}
.cm-s-monokai .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="neat" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-neat span.cm-comment {
  color: #a86;
}

.cm-s-neat span.cm-keyword {
  line-height: 1em;
  font-weight: bold;
  color: blue;
}

.cm-s-neat span.cm-string {
  color: #a22;
}

.cm-s-neat span.cm-builtin {
  line-height: 1em;
  font-weight: bold;
  color: #077;
}

.cm-s-neat span.cm-special {
  line-height: 1em;
  font-weight: bold;
  color: #0aa;
}

.cm-s-neat span.cm-variable {
  color: black;
}

.cm-s-neat span.cm-number, .cm-s-neat span.cm-atom {
  color: #3a3;
}

.cm-s-neat span.cm-meta {
  color: #555;
}

.cm-s-neat span.cm-link {
  color: #3a3;
}

.cm-s-neat .CodeMirror-activeline-background {
  background: #e8f2ff !important;
}

.cm-s-neat .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: black !important;
}

    </style>
  </template>
</dom-module><dom-module id="neo" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* neo theme for codemirror */

/* Color scheme */

.cm-s-neo.CodeMirror {
  background-color: #ffffff;
  color: #2e383c;
  line-height: 1.4375;
}

.cm-s-neo .cm-comment {
  color: #75787b;
}

.cm-s-neo .cm-keyword, .cm-s-neo .cm-property {
  color: #1d75b3;
}

.cm-s-neo .cm-atom,.cm-s-neo .cm-number {
  color: #75438a;
}

.cm-s-neo .cm-node,.cm-s-neo .cm-tag {
  color: #9c3328;
}

.cm-s-neo .cm-string {
  color: #b35e14;
}

.cm-s-neo .cm-variable,.cm-s-neo .cm-qualifier {
  color: #047d65;
}


/* Editor styling */

.cm-s-neo pre {
  padding: 0;
}

.cm-s-neo .CodeMirror-gutters {
  border: none;
  border-right: 10px solid transparent;
  background-color: transparent;
}

.cm-s-neo .CodeMirror-linenumber {
  padding: 0;
  color: #e0e2e5;
}

.cm-s-neo .CodeMirror-guttermarker {
  color: #1d75b3;
}

.cm-s-neo .CodeMirror-guttermarker-subtle {
  color: #e0e2e5;
}

.cm-s-neo div.CodeMirror-cursor {
  width: auto;
  border: 0;
  background: rgba(155,157,162,0.37);
  z-index: 1;
}

    </style>
  </template>
</dom-module><dom-module id="night" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* Loosely based on the Midnight Textmate theme */

.cm-s-night.CodeMirror {
  background: #0a001f;
  color: #f8f8f8;
}

.cm-s-night div.CodeMirror-selected {
  background: #447 !important;
}

.cm-s-night.CodeMirror ::selection {
  background: rgba(68, 68, 119, .99);
}

.cm-s-night.CodeMirror ::-moz-selection {
  background: rgba(68, 68, 119, .99);
}

.cm-s-night .CodeMirror-gutters {
  background: #0a001f;
  border-right: 1px solid #aaa;
}

.cm-s-night .CodeMirror-guttermarker {
  color: white;
}

.cm-s-night .CodeMirror-guttermarker-subtle {
  color: #bbb;
}

.cm-s-night .CodeMirror-linenumber {
  color: #f8f8f8;
}

.cm-s-night .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-night span.cm-comment {
  color: #6900a1;
}

.cm-s-night span.cm-atom {
  color: #845dc4;
}

.cm-s-night span.cm-number, .cm-s-night span.cm-attribute {
  color: #ffd500;
}

.cm-s-night span.cm-keyword {
  color: #599eff;
}

.cm-s-night span.cm-string {
  color: #37f14a;
}

.cm-s-night span.cm-meta {
  color: #7678e2;
}

.cm-s-night span.cm-variable-2, .cm-s-night span.cm-tag {
  color: #99b2ff;
}

.cm-s-night span.cm-variable-3, .cm-s-night span.cm-def {
  color: white;
}

.cm-s-night span.cm-bracket {
  color: #8da6ce;
}

.cm-s-night span.cm-comment {
  color: #6900a1;
}

.cm-s-night span.cm-builtin, .cm-s-night span.cm-special {
  color: #ff9e59;
}

.cm-s-night span.cm-link {
  color: #845dc4;
}

.cm-s-night span.cm-error {
  color: #9d1e15;
}

.cm-s-night .CodeMirror-activeline-background {
  background: #1C005A !important;
}

.cm-s-night .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="paraiso-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Paraíso (Dark)
    Author:     Jan T. Sott

    Color scheme by Jan T. Sott (https://github.com/idleberg/Paraiso-CodeMirror)
    Inspired by the art of Rubens LP (http://www.rubenslp.com.br)

*/

.cm-s-paraiso-dark.CodeMirror {
  background: #2f1e2e;
  color: #b9b6b0;
}

.cm-s-paraiso-dark div.CodeMirror-selected {
  background: #41323f !important;
}

.cm-s-paraiso-dark.CodeMirror ::selection {
  background: rgba(65, 50, 63, .99);
}

.cm-s-paraiso-dark.CodeMirror ::-moz-selection {
  background: rgba(65, 50, 63, .99);
}

.cm-s-paraiso-dark .CodeMirror-gutters {
  background: #2f1e2e;
  border-right: 0px;
}

.cm-s-paraiso-dark .CodeMirror-guttermarker {
  color: #ef6155;
}

.cm-s-paraiso-dark .CodeMirror-guttermarker-subtle {
  color: #776e71;
}

.cm-s-paraiso-dark .CodeMirror-linenumber {
  color: #776e71;
}

.cm-s-paraiso-dark .CodeMirror-cursor {
  border-left: 1px solid #8d8687 !important;
}

.cm-s-paraiso-dark span.cm-comment {
  color: #e96ba8;
}

.cm-s-paraiso-dark span.cm-atom {
  color: #815ba4;
}

.cm-s-paraiso-dark span.cm-number {
  color: #815ba4;
}

.cm-s-paraiso-dark span.cm-property, .cm-s-paraiso-dark span.cm-attribute {
  color: #48b685;
}

.cm-s-paraiso-dark span.cm-keyword {
  color: #ef6155;
}

.cm-s-paraiso-dark span.cm-string {
  color: #fec418;
}

.cm-s-paraiso-dark span.cm-variable {
  color: #48b685;
}

.cm-s-paraiso-dark span.cm-variable-2 {
  color: #06b6ef;
}

.cm-s-paraiso-dark span.cm-def {
  color: #f99b15;
}

.cm-s-paraiso-dark span.cm-bracket {
  color: #b9b6b0;
}

.cm-s-paraiso-dark span.cm-tag {
  color: #ef6155;
}

.cm-s-paraiso-dark span.cm-link {
  color: #815ba4;
}

.cm-s-paraiso-dark span.cm-error {
  background: #ef6155;
  color: #8d8687;
}

.cm-s-paraiso-dark .CodeMirror-activeline-background {
  background: #4D344A !important;
}

.cm-s-paraiso-dark .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="paraiso-light" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Paraíso (Light)
    Author:     Jan T. Sott

    Color scheme by Jan T. Sott (https://github.com/idleberg/Paraiso-CodeMirror)
    Inspired by the art of Rubens LP (http://www.rubenslp.com.br)

*/

.cm-s-paraiso-light.CodeMirror {
  background: #e7e9db;
  color: #41323f;
}

.cm-s-paraiso-light div.CodeMirror-selected {
  background: #b9b6b0 !important;
}

.cm-s-paraiso-light.CodeMirror ::selection {
  background: #b9b6b0;
}

.cm-s-paraiso-light.CodeMirror ::-moz-selection {
  background: #b9b6b0;
}

.cm-s-paraiso-light .CodeMirror-gutters {
  background: #e7e9db;
  border-right: 0px;
}

.cm-s-paraiso-light .CodeMirror-guttermarker {
  color: black;
}

.cm-s-paraiso-light .CodeMirror-guttermarker-subtle {
  color: #8d8687;
}

.cm-s-paraiso-light .CodeMirror-linenumber {
  color: #8d8687;
}

.cm-s-paraiso-light .CodeMirror-cursor {
  border-left: 1px solid #776e71 !important;
}

.cm-s-paraiso-light span.cm-comment {
  color: #e96ba8;
}

.cm-s-paraiso-light span.cm-atom {
  color: #815ba4;
}

.cm-s-paraiso-light span.cm-number {
  color: #815ba4;
}

.cm-s-paraiso-light span.cm-property, .cm-s-paraiso-light span.cm-attribute {
  color: #48b685;
}

.cm-s-paraiso-light span.cm-keyword {
  color: #ef6155;
}

.cm-s-paraiso-light span.cm-string {
  color: #fec418;
}

.cm-s-paraiso-light span.cm-variable {
  color: #48b685;
}

.cm-s-paraiso-light span.cm-variable-2 {
  color: #06b6ef;
}

.cm-s-paraiso-light span.cm-def {
  color: #f99b15;
}

.cm-s-paraiso-light span.cm-bracket {
  color: #41323f;
}

.cm-s-paraiso-light span.cm-tag {
  color: #ef6155;
}

.cm-s-paraiso-light span.cm-link {
  color: #815ba4;
}

.cm-s-paraiso-light span.cm-error {
  background: #ef6155;
  color: #776e71;
}

.cm-s-paraiso-light .CodeMirror-activeline-background {
  background: #CFD1C4 !important;
}

.cm-s-paraiso-light .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="pastel-on-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /**
 * Pastel On Dark theme ported from ACE editor
 * @license MIT
 * @copyright AtomicPages LLC 2014
 * @author Dennis Thompson, AtomicPages LLC
 * @version 1.1
 * @source https://github.com/atomicpages/codemirror-pastel-on-dark-theme
 */

.cm-s-pastel-on-dark.CodeMirror {
  background: #2c2827;
  color: #8F938F;
  line-height: 1.5;
  font-size: 14px;
}

.cm-s-pastel-on-dark div.CodeMirror-selected {
  background: rgba(221,240,255,0.2) !important;
}

.cm-s-pastel-on-dark.CodeMirror ::selection {
  background: rgba(221,240,255,0.2);
}

.cm-s-pastel-on-dark.CodeMirror ::-moz-selection {
  background: rgba(221,240,255,0.2);
}

.cm-s-pastel-on-dark .CodeMirror-gutters {
  background: #34302f;
  border-right: 0px;
  padding: 0 3px;
}

.cm-s-pastel-on-dark .CodeMirror-guttermarker {
  color: white;
}

.cm-s-pastel-on-dark .CodeMirror-guttermarker-subtle {
  color: #8F938F;
}

.cm-s-pastel-on-dark .CodeMirror-linenumber {
  color: #8F938F;
}

.cm-s-pastel-on-dark .CodeMirror-cursor {
  border-left: 1px solid #A7A7A7 !important;
}

.cm-s-pastel-on-dark span.cm-comment {
  color: #A6C6FF;
}

.cm-s-pastel-on-dark span.cm-atom {
  color: #DE8E30;
}

.cm-s-pastel-on-dark span.cm-number {
  color: #CCCCCC;
}

.cm-s-pastel-on-dark span.cm-property {
  color: #8F938F;
}

.cm-s-pastel-on-dark span.cm-attribute {
  color: #a6e22e;
}

.cm-s-pastel-on-dark span.cm-keyword {
  color: #AEB2F8;
}

.cm-s-pastel-on-dark span.cm-string {
  color: #66A968;
}

.cm-s-pastel-on-dark span.cm-variable {
  color: #AEB2F8;
}

.cm-s-pastel-on-dark span.cm-variable-2 {
  color: #BEBF55;
}

.cm-s-pastel-on-dark span.cm-variable-3 {
  color: #DE8E30;
}

.cm-s-pastel-on-dark span.cm-def {
  color: #757aD8;
}

.cm-s-pastel-on-dark span.cm-bracket {
  color: #f8f8f2;
}

.cm-s-pastel-on-dark span.cm-tag {
  color: #C1C144;
}

.cm-s-pastel-on-dark span.cm-link {
  color: #ae81ff;
}

.cm-s-pastel-on-dark span.cm-qualifier,.cm-s-pastel-on-dark span.cm-builtin {
  color: #C1C144;
}

.cm-s-pastel-on-dark span.cm-error {
  background: #757aD8;
  color: #f8f8f0;
}

.cm-s-pastel-on-dark .CodeMirror-activeline-background {
  background: rgba(255, 255, 255, 0.031) !important;
}

.cm-s-pastel-on-dark .CodeMirror-matchingbracket {
  border: 1px solid rgba(255,255,255,0.25);
  color: #8F938F !important;
  margin: -1px -1px 0 -1px;
}

    </style>
  </template>
</dom-module><dom-module id="rubyblue" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-rubyblue.CodeMirror {
  background: #112435;
  color: white;
}

.cm-s-rubyblue div.CodeMirror-selected {
  background: #38566F !important;
}

.cm-s-rubyblue.CodeMirror ::selection {
  background: rgba(56, 86, 111, 0.99);
}

.cm-s-rubyblue.CodeMirror ::-moz-selection {
  background: rgba(56, 86, 111, 0.99);
}

.cm-s-rubyblue .CodeMirror-gutters {
  background: #1F4661;
  border-right: 7px solid #3E7087;
}

.cm-s-rubyblue .CodeMirror-guttermarker {
  color: white;
}

.cm-s-rubyblue .CodeMirror-guttermarker-subtle {
  color: #3E7087;
}

.cm-s-rubyblue .CodeMirror-linenumber {
  color: white;
}

.cm-s-rubyblue .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-rubyblue span.cm-comment {
  color: #999;
  font-style: italic;
  line-height: 1em;
}

.cm-s-rubyblue span.cm-atom {
  color: #F4C20B;
}

.cm-s-rubyblue span.cm-number, .cm-s-rubyblue span.cm-attribute {
  color: #82C6E0;
}

.cm-s-rubyblue span.cm-keyword {
  color: #F0F;
}

.cm-s-rubyblue span.cm-string {
  color: #F08047;
}

.cm-s-rubyblue span.cm-meta {
  color: #F0F;
}

.cm-s-rubyblue span.cm-variable-2, .cm-s-rubyblue span.cm-tag {
  color: #7BD827;
}

.cm-s-rubyblue span.cm-variable-3, .cm-s-rubyblue span.cm-def {
  color: white;
}

.cm-s-rubyblue span.cm-bracket {
  color: #F0F;
}

.cm-s-rubyblue span.cm-link {
  color: #F4C20B;
}

.cm-s-rubyblue span.CodeMirror-matchingbracket {
  color: #F0F !important;
}

.cm-s-rubyblue span.cm-builtin, .cm-s-rubyblue span.cm-special {
  color: #FF9D00;
}

.cm-s-rubyblue span.cm-error {
  color: #AF2018;
}

.cm-s-rubyblue .CodeMirror-activeline-background {
  background: #173047 !important;
}

    </style>
  </template>
</dom-module><dom-module id="solarized" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*
Solarized theme for code-mirror
http://ethanschoonover.com/solarized
*/

/*
Solarized color pallet
http://ethanschoonover.com/solarized/img/solarized-palette.png
*/

.solarized.base03 {
  color: #002b36;
}

.solarized.base02 {
  color: #073642;
}

.solarized.base01 {
  color: #586e75;
}

.solarized.base00 {
  color: #657b83;
}

.solarized.base0 {
  color: #839496;
}

.solarized.base1 {
  color: #93a1a1;
}

.solarized.base2 {
  color: #eee8d5;
}

.solarized.base3 {
  color: #fdf6e3;
}

.solarized.solar-yellow {
  color: #b58900;
}

.solarized.solar-orange {
  color: #cb4b16;
}

.solarized.solar-red {
  color: #dc322f;
}

.solarized.solar-magenta {
  color: #d33682;
}

.solarized.solar-violet {
  color: #6c71c4;
}

.solarized.solar-blue {
  color: #268bd2;
}

.solarized.solar-cyan {
  color: #2aa198;
}

.solarized.solar-green {
  color: #859900;
}

/* Color scheme for code-mirror */

.cm-s-solarized {
  line-height: 1.45em;
  color-profile: sRGB;
  rendering-intent: auto;
}

.cm-s-solarized.cm-s-dark {
  color: #839496;
  background-color: #002b36;
  text-shadow: #002b36 0 1px;
}

.cm-s-solarized.cm-s-light {
  background-color: #fdf6e3;
  color: #657b83;
  text-shadow: #eee8d5 0 1px;
}

.cm-s-solarized .CodeMirror-widget {
  text-shadow: none;
}

.cm-s-solarized .cm-keyword {
  color: #cb4b16;
}

.cm-s-solarized .cm-atom {
  color: #d33682;
}

.cm-s-solarized .cm-number {
  color: #d33682;
}

.cm-s-solarized .cm-def {
  color: #2aa198;
}

.cm-s-solarized .cm-variable {
  color: #839496;
}

.cm-s-solarized .cm-variable-2 {
  color: #b58900;
}

.cm-s-solarized .cm-variable-3 {
  color: #6c71c4;
}

.cm-s-solarized .cm-property {
  color: #2aa198;
}

.cm-s-solarized .cm-operator {
  color: #6c71c4;
}

.cm-s-solarized .cm-comment {
  color: #586e75;
  font-style: italic;
}

.cm-s-solarized .cm-string {
  color: #859900;
}

.cm-s-solarized .cm-string-2 {
  color: #b58900;
}

.cm-s-solarized .cm-meta {
  color: #859900;
}

.cm-s-solarized .cm-qualifier {
  color: #b58900;
}

.cm-s-solarized .cm-builtin {
  color: #d33682;
}

.cm-s-solarized .cm-bracket {
  color: #cb4b16;
}

.cm-s-solarized .CodeMirror-matchingbracket {
  color: #859900;
}

.cm-s-solarized .CodeMirror-nonmatchingbracket {
  color: #dc322f;
}

.cm-s-solarized .cm-tag {
  color: #93a1a1;
}

.cm-s-solarized .cm-attribute {
  color: #2aa198;
}

.cm-s-solarized .cm-header {
  color: #586e75;
}

.cm-s-solarized .cm-quote {
  color: #93a1a1;
}

.cm-s-solarized .cm-hr {
  color: transparent;
  border-top: 1px solid #586e75;
  display: block;
}

.cm-s-solarized .cm-link {
  color: #93a1a1;
  cursor: pointer;
}

.cm-s-solarized .cm-special {
  color: #6c71c4;
}

.cm-s-solarized .cm-em {
  color: #999;
  text-decoration: underline;
  text-decoration-style: dotted;
}

.cm-s-solarized .cm-strong {
  color: #eee;
}

.cm-s-solarized .cm-error,
.cm-s-solarized .cm-invalidchar {
  color: #586e75;
  border-bottom: 1px dotted #dc322f;
}

.cm-s-solarized.cm-s-dark .CodeMirror-selected {
  background: #073642;
}

.cm-s-solarized.cm-s-dark.CodeMirror ::selection {
  background: rgba(7, 54, 66, 0.99);
}

.cm-s-solarized.cm-s-dark.CodeMirror ::-moz-selection {
  background: rgba(7, 54, 66, 0.99);
}

.cm-s-solarized.cm-s-light .CodeMirror-selected {
  background: #eee8d5;
}

.cm-s-solarized.cm-s-light.CodeMirror ::selection {
  background: #eee8d5;
}

.cm-s-solarized.cm-s-lightCodeMirror ::-moz-selection {
  background: #eee8d5;
}

/* Editor styling */



/* Little shadow on the view-port of the buffer view */
.cm-s-solarized.CodeMirror {
  -moz-box-shadow: inset 7px 0 12px -6px #000;
  -webkit-box-shadow: inset 7px 0 12px -6px #000;
  box-shadow: inset 7px 0 12px -6px #000;
}

/* Gutter border and some shadow from it  */
.cm-s-solarized .CodeMirror-gutters {
  border-right: 1px solid;
}

/* Gutter colors and line number styling based of color scheme (dark / light) */

/* Dark */
.cm-s-solarized.cm-s-dark .CodeMirror-gutters {
  background-color: #002b36;
  border-color: #00232c;
}

.cm-s-solarized.cm-s-dark .CodeMirror-linenumber {
  text-shadow: #021014 0 -1px;
}

/* Light */
.cm-s-solarized.cm-s-light .CodeMirror-gutters {
  background-color: #fdf6e3;
  border-color: #eee8d5;
}

/* Common */
.cm-s-solarized .CodeMirror-linenumber {
  color: #586e75;
  padding: 0 5px;
}

.cm-s-solarized .CodeMirror-guttermarker-subtle {
  color: #586e75;
}

.cm-s-solarized.cm-s-dark .CodeMirror-guttermarker {
  color: #ddd;
}

.cm-s-solarized.cm-s-light .CodeMirror-guttermarker {
  color: #cb4b16;
}

.cm-s-solarized .CodeMirror-gutter .CodeMirror-gutter-text {
  color: #586e75;
}

.cm-s-solarized .CodeMirror-lines .CodeMirror-cursor {
  border-left: 1px solid #819090;
}

/*
Active line. Negative margin compensates left padding of the text in the
view-port
*/
.cm-s-solarized.cm-s-dark .CodeMirror-activeline-background {
  background: rgba(255, 255, 255, 0.10);
}

.cm-s-solarized.cm-s-light .CodeMirror-activeline-background {
  background: rgba(0, 0, 0, 0.10);
}

    </style>
  </template>
</dom-module><dom-module id="the-matrix" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-the-matrix.CodeMirror {
  background: #000000;
  color: #00FF00;
}

.cm-s-the-matrix div.CodeMirror-selected {
  background: #2D2D2D !important;
}

.cm-s-the-matrix.CodeMirror ::selection {
  background: rgba(45, 45, 45, 0.99);
}

.cm-s-the-matrix.CodeMirror ::-moz-selection {
  background: rgba(45, 45, 45, 0.99);
}

.cm-s-the-matrix .CodeMirror-gutters {
  background: #060;
  border-right: 2px solid #00FF00;
}

.cm-s-the-matrix .CodeMirror-guttermarker {
  color: #0f0;
}

.cm-s-the-matrix .CodeMirror-guttermarker-subtle {
  color: white;
}

.cm-s-the-matrix .CodeMirror-linenumber {
  color: #FFFFFF;
}

.cm-s-the-matrix .CodeMirror-cursor {
  border-left: 1px solid #00FF00 !important;
}

.cm-s-the-matrix span.cm-keyword {
  color: #008803;
  font-weight: bold;
}

.cm-s-the-matrix span.cm-atom {
  color: #3FF;
}

.cm-s-the-matrix span.cm-number {
  color: #FFB94F;
}

.cm-s-the-matrix span.cm-def {
  color: #99C;
}

.cm-s-the-matrix span.cm-variable {
  color: #F6C;
}

.cm-s-the-matrix span.cm-variable-2 {
  color: #C6F;
}

.cm-s-the-matrix span.cm-variable-3 {
  color: #96F;
}

.cm-s-the-matrix span.cm-property {
  color: #62FFA0;
}

.cm-s-the-matrix span.cm-operator {
  color: #999;
}

.cm-s-the-matrix span.cm-comment {
  color: #CCCCCC;
}

.cm-s-the-matrix span.cm-string {
  color: #39C;
}

.cm-s-the-matrix span.cm-meta {
  color: #C9F;
}

.cm-s-the-matrix span.cm-qualifier {
  color: #FFF700;
}

.cm-s-the-matrix span.cm-builtin {
  color: #30a;
}

.cm-s-the-matrix span.cm-bracket {
  color: #cc7;
}

.cm-s-the-matrix span.cm-tag {
  color: #FFBD40;
}

.cm-s-the-matrix span.cm-attribute {
  color: #FFF700;
}

.cm-s-the-matrix span.cm-error {
  color: #FF0000;
}

.cm-s-the-matrix .CodeMirror-activeline-background {
  background: #040;
}

    </style>
  </template>
</dom-module><dom-module id="tomorrow-night-bright" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Tomorrow Night - Bright
    Author:     Chris Kempson

    Port done by Gerard Braad <me@gbraad.nl>

*/

.cm-s-tomorrow-night-bright.CodeMirror {
  background: #000000;
  color: #eaeaea;
}

.cm-s-tomorrow-night-bright div.CodeMirror-selected {
  background: #424242 !important;
}

.cm-s-tomorrow-night-bright .CodeMirror-gutters {
  background: #000000;
  border-right: 0px;
}

.cm-s-tomorrow-night-bright .CodeMirror-guttermarker {
  color: #e78c45;
}

.cm-s-tomorrow-night-bright .CodeMirror-guttermarker-subtle {
  color: #777;
}

.cm-s-tomorrow-night-bright .CodeMirror-linenumber {
  color: #424242;
}

.cm-s-tomorrow-night-bright .CodeMirror-cursor {
  border-left: 1px solid #6A6A6A !important;
}

.cm-s-tomorrow-night-bright span.cm-comment {
  color: #d27b53;
}

.cm-s-tomorrow-night-bright span.cm-atom {
  color: #a16a94;
}

.cm-s-tomorrow-night-bright span.cm-number {
  color: #a16a94;
}

.cm-s-tomorrow-night-bright span.cm-property, .cm-s-tomorrow-night-bright span.cm-attribute {
  color: #99cc99;
}

.cm-s-tomorrow-night-bright span.cm-keyword {
  color: #d54e53;
}

.cm-s-tomorrow-night-bright span.cm-string {
  color: #e7c547;
}

.cm-s-tomorrow-night-bright span.cm-variable {
  color: #b9ca4a;
}

.cm-s-tomorrow-night-bright span.cm-variable-2 {
  color: #7aa6da;
}

.cm-s-tomorrow-night-bright span.cm-def {
  color: #e78c45;
}

.cm-s-tomorrow-night-bright span.cm-bracket {
  color: #eaeaea;
}

.cm-s-tomorrow-night-bright span.cm-tag {
  color: #d54e53;
}

.cm-s-tomorrow-night-bright span.cm-link {
  color: #a16a94;
}

.cm-s-tomorrow-night-bright span.cm-error {
  background: #d54e53;
  color: #6A6A6A;
}

.cm-s-tomorrow-night-bright .CodeMirror-activeline-background {
  background: #2a2a2a !important;
}

.cm-s-tomorrow-night-bright .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="tomorrow-night-eighties" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*

    Name:       Tomorrow Night - Eighties
    Author:     Chris Kempson

    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)
    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)

*/

.cm-s-tomorrow-night-eighties.CodeMirror {
  background: #000000;
  color: #CCCCCC;
}

.cm-s-tomorrow-night-eighties div.CodeMirror-selected {
  background: #2D2D2D !important;
}

.cm-s-tomorrow-night-eighties.CodeMirror ::selection {
  background: rgba(45, 45, 45, 0.99);
}

.cm-s-tomorrow-night-eighties.CodeMirror ::-moz-selection {
  background: rgba(45, 45, 45, 0.99);
}

.cm-s-tomorrow-night-eighties .CodeMirror-gutters {
  background: #000000;
  border-right: 0px;
}

.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker {
  color: #f2777a;
}

.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker-subtle {
  color: #777;
}

.cm-s-tomorrow-night-eighties .CodeMirror-linenumber {
  color: #515151;
}

.cm-s-tomorrow-night-eighties .CodeMirror-cursor {
  border-left: 1px solid #6A6A6A !important;
}

.cm-s-tomorrow-night-eighties span.cm-comment {
  color: #d27b53;
}

.cm-s-tomorrow-night-eighties span.cm-atom {
  color: #a16a94;
}

.cm-s-tomorrow-night-eighties span.cm-number {
  color: #a16a94;
}

.cm-s-tomorrow-night-eighties span.cm-property, .cm-s-tomorrow-night-eighties span.cm-attribute {
  color: #99cc99;
}

.cm-s-tomorrow-night-eighties span.cm-keyword {
  color: #f2777a;
}

.cm-s-tomorrow-night-eighties span.cm-string {
  color: #ffcc66;
}

.cm-s-tomorrow-night-eighties span.cm-variable {
  color: #99cc99;
}

.cm-s-tomorrow-night-eighties span.cm-variable-2 {
  color: #6699cc;
}

.cm-s-tomorrow-night-eighties span.cm-def {
  color: #f99157;
}

.cm-s-tomorrow-night-eighties span.cm-bracket {
  color: #CCCCCC;
}

.cm-s-tomorrow-night-eighties span.cm-tag {
  color: #f2777a;
}

.cm-s-tomorrow-night-eighties span.cm-link {
  color: #a16a94;
}

.cm-s-tomorrow-night-eighties span.cm-error {
  background: #f2777a;
  color: #6A6A6A;
}

.cm-s-tomorrow-night-eighties .CodeMirror-activeline-background {
  background: #343600 !important;
}

.cm-s-tomorrow-night-eighties .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="ttcn" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* DEFAULT THEME */
.cm-atom {
  color: #219;
}

.cm-attribute {
  color: #00c;
}

.cm-bracket {
  color: #997;
}

.cm-comment {
  color: #333333;
}

.cm-def {
  color: #00f;
}

.cm-em {
  font-style: italic;
}

.cm-error {
  color: #f00;
}

.cm-header {
  color: #00f;
  font-weight: bold;
}

.cm-hr {
  color: #999;
}

.cm-invalidchar {
  color: #f00;
}

.cm-keyword {
  font-weight: bold;
}

.cm-link {
  color: #00c;
  text-decoration: underline;
}

.cm-meta {
  color: #555;
}

.cm-negative {
  color: #d44;
}

.cm-positive {
  color: #292;
}

.cm-qualifier {
  color: #555;
}

.cm-quote {
  color: #090;
}

.cm-strikethrough {
  text-decoration: line-through;
}

.cm-string {
  color: #006400;
}

.cm-string-2 {
  color: #f50;
}

.cm-strong {
  font-weight: bold;
}

.cm-tag {
  color: #170;
}

.cm-variable {
  color: #8B2252;
}

.cm-variable-2 {
  color: #05a;
}

.cm-variable-3 {
  color: #085;
}

.cm-negative {
  color: #d44;
}

.cm-positive {
  color: #292;
}

.cm-header, .cm-strong {
  font-weight: bold;
}

.cm-em {
  font-style: italic;
}

.cm-link {
  text-decoration: underline;
}

.cm-strikethrough {
  text-decoration: line-through;
}

.cm-s-default .cm-error {
  color: #f00;
}

.cm-invalidchar {
  color: #f00;
}

/* ASN */
.cm-s-ttcn .cm-accessTypes,
.cm-s-ttcn .cm-compareTypes {
  color: #27408B;
}

.cm-s-ttcn .cm-cmipVerbs {
  color: #8B2252;
}

.cm-s-ttcn .cm-modifier {
  color: #D2691E;
}

.cm-s-ttcn .cm-status {
  color: #8B4545;
}

.cm-s-ttcn .cm-storage {
  color: #A020F0;
}

.cm-s-ttcn .cm-tags {
  color: #006400;
}

/* CFG */
.cm-s-ttcn .cm-externalCommands {
  color: #8B4545;
  font-weight: bold;
}

.cm-s-ttcn .cm-fileNCtrlMaskOptions,
.cm-s-ttcn .cm-sectionTitle {
  color: #2E8B57;
  font-weight: bold;
}

/* TTCN */
.cm-s-ttcn .cm-booleanConsts,
.cm-s-ttcn .cm-otherConsts,
.cm-s-ttcn .cm-verdictConsts {
  color: #006400;
}

.cm-s-ttcn .cm-configOps,
.cm-s-ttcn .cm-functionOps,
.cm-s-ttcn .cm-portOps,
.cm-s-ttcn .cm-sutOps,
.cm-s-ttcn .cm-timerOps,
.cm-s-ttcn .cm-verdictOps {
  color: #0000FF;
}

.cm-s-ttcn .cm-preprocessor,
.cm-s-ttcn .cm-templateMatch,
.cm-s-ttcn .cm-ttcn3Macros {
  color: #27408B;
}

.cm-s-ttcn .cm-types {
  color: #A52A2A;
  font-weight: bold;
}

.cm-s-ttcn .cm-visibilityModifiers {
  font-weight: bold;
}

    </style>
  </template>
</dom-module><dom-module id="twilight" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      .cm-s-twilight.CodeMirror {
  background: #141414;
  color: #f7f7f7;
} /**/
.cm-s-twilight .CodeMirror-selected {
  background: #323232 !important;
} /**/
.cm-s-twilight.CodeMirror ::selection {
  background: rgba(50, 50, 50, 0.99);
}

.cm-s-twilight.CodeMirror ::-moz-selection {
  background: rgba(50, 50, 50, 0.99);
}

.cm-s-twilight .CodeMirror-gutters {
  background: #222;
  border-right: 1px solid #aaa;
}

.cm-s-twilight .CodeMirror-guttermarker {
  color: white;
}

.cm-s-twilight .CodeMirror-guttermarker-subtle {
  color: #aaa;
}

.cm-s-twilight .CodeMirror-linenumber {
  color: #aaa;
}

.cm-s-twilight .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-twilight .cm-keyword {
  color: #f9ee98;
} /**/
.cm-s-twilight .cm-atom {
  color: #FC0;
}

.cm-s-twilight .cm-number {
  color: #ca7841;
} /**/
.cm-s-twilight .cm-def {
  color: #8DA6CE;
}

.cm-s-twilight span.cm-variable-2, .cm-s-twilight span.cm-tag {
  color: #607392;
} /**/
.cm-s-twilight span.cm-variable-3, .cm-s-twilight span.cm-def {
  color: #607392;
} /**/
.cm-s-twilight .cm-operator {
  color: #cda869;
} /**/
.cm-s-twilight .cm-comment {
  color: #777;
  font-style: italic;
  font-weight: normal;
} /**/
.cm-s-twilight .cm-string {
  color: #8f9d6a;
  font-style: italic;
} /**/
.cm-s-twilight .cm-string-2 {
  color: #bd6b18;
} /*?*/
.cm-s-twilight .cm-meta {
  background-color: #141414;
  color: #f7f7f7;
} /*?*/
.cm-s-twilight .cm-builtin {
  color: #cda869;
} /*?*/
.cm-s-twilight .cm-tag {
  color: #997643;
} /**/
.cm-s-twilight .cm-attribute {
  color: #d6bb6d;
} /*?*/
.cm-s-twilight .cm-header {
  color: #FF6400;
}

.cm-s-twilight .cm-hr {
  color: #AEAEAE;
}

.cm-s-twilight .cm-link {
  color: #ad9361;
  font-style: italic;
  text-decoration: none;
} /**/
.cm-s-twilight .cm-error {
  border-bottom: 1px solid red;
}

.cm-s-twilight .CodeMirror-activeline-background {
  background: #27282E !important;
}

.cm-s-twilight .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="vibrant-ink" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /* Taken from the popular Visual Studio Vibrant Ink Schema */

.cm-s-vibrant-ink.CodeMirror {
  background: black;
  color: white;
}

.cm-s-vibrant-ink .CodeMirror-selected {
  background: #35493c !important;
}

.cm-s-vibrant-ink.CodeMirror ::selection {
  background: rgba(53, 73, 60, 0.99);
}

.cm-s-vibrant-ink.CodeMirror ::-moz-selection {
  background: rgba(53, 73, 60, 0.99);
}

.cm-s-vibrant-ink .CodeMirror-gutters {
  background: #002240;
  border-right: 1px solid #aaa;
}

.cm-s-vibrant-ink .CodeMirror-guttermarker {
  color: white;
}

.cm-s-vibrant-ink .CodeMirror-guttermarker-subtle {
  color: #d0d0d0;
}

.cm-s-vibrant-ink .CodeMirror-linenumber {
  color: #d0d0d0;
}

.cm-s-vibrant-ink .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-vibrant-ink .cm-keyword {
  color: #CC7832;
}

.cm-s-vibrant-ink .cm-atom {
  color: #FC0;
}

.cm-s-vibrant-ink .cm-number {
  color: #FFEE98;
}

.cm-s-vibrant-ink .cm-def {
  color: #8DA6CE;
}

.cm-s-vibrant-ink span.cm-variable-2, .cm-s-vibrant span.cm-tag {
  color: #FFC66D;
}

.cm-s-vibrant-ink span.cm-variable-3, .cm-s-vibrant span.cm-def {
  color: #FFC66D;
}

.cm-s-vibrant-ink .cm-operator {
  color: #888;
}

.cm-s-vibrant-ink .cm-comment {
  color: gray;
  font-weight: bold;
}

.cm-s-vibrant-ink .cm-string {
  color: #A5C25C;
}

.cm-s-vibrant-ink .cm-string-2 {
  color: red;
}

.cm-s-vibrant-ink .cm-meta {
  color: #D8FA3C;
}

.cm-s-vibrant-ink .cm-builtin {
  color: #8DA6CE;
}

.cm-s-vibrant-ink .cm-tag {
  color: #8DA6CE;
}

.cm-s-vibrant-ink .cm-attribute {
  color: #8DA6CE;
}

.cm-s-vibrant-ink .cm-header {
  color: #FF6400;
}

.cm-s-vibrant-ink .cm-hr {
  color: #AEAEAE;
}

.cm-s-vibrant-ink .cm-link {
  color: blue;
}

.cm-s-vibrant-ink .cm-error {
  border-bottom: 1px solid red;
}

.cm-s-vibrant-ink .CodeMirror-activeline-background {
  background: #27282E !important;
}

.cm-s-vibrant-ink .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}

    </style>
  </template>
</dom-module><dom-module id="xq-dark" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /*
Copyright (C) 2011 by MarkLogic Corporation
Author: Mike Brevoort <mike@brevoort.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
.cm-s-xq-dark.CodeMirror {
  background: #0a001f;
  color: #f8f8f8;
}

.cm-s-xq-dark .CodeMirror-selected {
  background: #27007A !important;
}

.cm-s-xq-dark.CodeMirror ::selection {
  background: rgba(39, 0, 122, 0.99);
}

.cm-s-xq-dark.CodeMirror ::-moz-selection {
  background: rgba(39, 0, 122, 0.99);
}

.cm-s-xq-dark .CodeMirror-gutters {
  background: #0a001f;
  border-right: 1px solid #aaa;
}

.cm-s-xq-dark .CodeMirror-guttermarker {
  color: #FFBD40;
}

.cm-s-xq-dark .CodeMirror-guttermarker-subtle {
  color: #f8f8f8;
}

.cm-s-xq-dark .CodeMirror-linenumber {
  color: #f8f8f8;
}

.cm-s-xq-dark .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-xq-dark span.cm-keyword {
  color: #FFBD40;
}

.cm-s-xq-dark span.cm-atom {
  color: #6C8CD5;
}

.cm-s-xq-dark span.cm-number {
  color: #164;
}

.cm-s-xq-dark span.cm-def {
  color: #FFF;
  text-decoration: underline;
}

.cm-s-xq-dark span.cm-variable {
  color: #FFF;
}

.cm-s-xq-dark span.cm-variable-2 {
  color: #EEE;
}

.cm-s-xq-dark span.cm-variable-3 {
  color: #DDD;
}

.cm-s-xq-dark span.cm-property {
}

.cm-s-xq-dark span.cm-operator {
}

.cm-s-xq-dark span.cm-comment {
  color: gray;
}

.cm-s-xq-dark span.cm-string {
  color: #9FEE00;
}

.cm-s-xq-dark span.cm-meta {
  color: yellow;
}

.cm-s-xq-dark span.cm-qualifier {
  color: #FFF700;
}

.cm-s-xq-dark span.cm-builtin {
  color: #30a;
}

.cm-s-xq-dark span.cm-bracket {
  color: #cc7;
}

.cm-s-xq-dark span.cm-tag {
  color: #FFBD40;
}

.cm-s-xq-dark span.cm-attribute {
  color: #FFF700;
}

.cm-s-xq-dark span.cm-error {
  color: #f00;
}

.cm-s-xq-dark .CodeMirror-activeline-background {
  background: #27282E !important;
}

.cm-s-xq-dark .CodeMirror-matchingbracket {
  outline: 1px solid grey;
  color: white !important;
}
    </style>
  </template>
</dom-module><dom-module id="zenburn" assetpath="bower_components/code-mirror/styles/">
  <template>
    <style>
      /**
 * "
 *  Using Zenburn color palette from the Emacs Zenburn Theme
 *  https://github.com/bbatsov/zenburn-emacs/blob/master/zenburn-theme.el
 *
 *  Also using parts of https://github.com/xavi/coderay-lighttable-theme
 * "
 * From: https://github.com/wisenomad/zenburn-lighttable-theme/blob/master/zenburn.css
 */

.cm-s-zenburn .CodeMirror-gutters {
  background: #3f3f3f !important;
}

.cm-s-zenburn .CodeMirror-foldgutter-open, .CodeMirror-foldgutter-folded {
  color: #999;
}

.cm-s-zenburn .CodeMirror-cursor {
  border-left: 1px solid white !important;
}

.cm-s-zenburn {
  background-color: #3f3f3f;
  color: #dcdccc;
}

.cm-s-zenburn span.cm-builtin {
  color: #dcdccc;
  font-weight: bold;
}

.cm-s-zenburn span.cm-comment {
  color: #7f9f7f;
}

.cm-s-zenburn span.cm-keyword {
  color: #f0dfaf;
  font-weight: bold;
}

.cm-s-zenburn span.cm-atom {
  color: #bfebbf;
}

.cm-s-zenburn span.cm-def {
  color: #dcdccc;
}

.cm-s-zenburn span.cm-variable {
  color: #dfaf8f;
}

.cm-s-zenburn span.cm-variable-2 {
  color: #dcdccc;
}

.cm-s-zenburn span.cm-string {
  color: #cc9393;
}

.cm-s-zenburn span.cm-string-2 {
  color: #cc9393;
}

.cm-s-zenburn span.cm-number {
  color: #dcdccc;
}

.cm-s-zenburn span.cm-tag {
  color: #93e0e3;
}

.cm-s-zenburn span.cm-property {
  color: #dfaf8f;
}

.cm-s-zenburn span.cm-attribute {
  color: #dfaf8f;
}

.cm-s-zenburn span.cm-qualifier {
  color: #7cb8bb;
}

.cm-s-zenburn span.cm-meta {
  color: #f0dfaf;
}

.cm-s-zenburn span.cm-header {
  color: #f0efd0;
}

.cm-s-zenburn span.cm-operator {
  color: #f0efd0;
}

.cm-s-zenburn span.CodeMirror-matchingbracket {
  box-sizing: border-box;
  background: transparent;
  border-bottom: 1px solid;
}

.cm-s-zenburn span.CodeMirror-nonmatchingbracket {
  border-bottom: 1px solid;
  background: none;
}

.cm-s-zenburn .CodeMirror-activeline {
  background: #000000;
}

.cm-s-zenburn .CodeMirror-activeline-background {
  background: #000000;
}

.cm-s-zenburn .CodeMirror-selected {
  background: #545454;
}

.cm-s-zenburn .CodeMirror-focused .CodeMirror-selected {
  background: #4f4f4f;
}

    </style>
  </template>
</dom-module><script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// This is CodeMirror (http://codemirror.net), a code editor
// implemented in JavaScript on top of the browser's DOM.
//
// You can find some technical background for some of the code below
// at http://marijnhaverbeke.nl/blog/#cm-internals .

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    module.exports = mod();
  else if (typeof define == "function" && define.amd) // AMD
    return define([], mod);
  else // Plain browser env
    this.CodeMirror = mod();
})(function() {
  "use strict";

  // BROWSER SNIFFING

  // Kludges for bugs and behavior differences that can't be feature
  // detected are enabled based on userAgent etc sniffing.

  var gecko = /gecko\/\d/i.test(navigator.userAgent);
  var ie_upto10 = /MSIE \d/.test(navigator.userAgent);
  var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
  var ie = ie_upto10 || ie_11up;
  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);
  var webkit = /WebKit\//.test(navigator.userAgent);
  var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(navigator.userAgent);
  var chrome = /Chrome\//.test(navigator.userAgent);
  var presto = /Opera\//.test(navigator.userAgent);
  var safari = /Apple Computer/.test(navigator.vendor);
  var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);
  var phantom = /PhantomJS/.test(navigator.userAgent);

  var ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent);
  // This is woefully incomplete. Suggestions for alternative methods welcome.
  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);
  var mac = ios || /Mac/.test(navigator.platform);
  var windows = /win/i.test(navigator.platform);

  var presto_version = presto && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
  if (presto_version) presto_version = Number(presto_version[1]);
  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }
  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X
  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
  var captureRightClick = gecko || (ie && ie_version >= 9);

  // Optimize some code when these features are not used.
  var sawReadOnlySpans = false, sawCollapsedSpans = false;

  // EDITOR CONSTRUCTOR

  // A CodeMirror instance represents an editor. This is the object
  // that user code is usually dealing with.

  function CodeMirror(place, options) {
    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);

    this.options = options = options ? copyObj(options) : {};
    // Determine effective options based on given values and defaults.
    copyObj(defaults, options, false);
    setGuttersForLineNumbers(options);

    var doc = options.value;
    if (typeof doc == "string") doc = new Doc(doc, options.mode);
    this.doc = doc;

    var input = new CodeMirror.inputStyles[options.inputStyle](this);
    var display = this.display = new Display(place, doc, input);
    display.wrapper.CodeMirror = this;
    updateGutters(this);
    themeChanged(this);
    if (options.lineWrapping)
      this.display.wrapper.className += " CodeMirror-wrap";
    if (options.autofocus && !mobile) display.input.focus();
    initScrollbars(this);

    this.state = {
      keyMaps: [],  // stores maps added by addKeyMap
      overlays: [], // highlighting overlays, as added by addOverlay
      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info
      overwrite: false,
      delayingBlurEvent: false,
      focused: false,
      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode
      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll
      draggingText: false,
      highlight: new Delayed(), // stores highlight worker timeout
      keySeq: null,  // Unfinished key sequence
      specialChars: null
    };

    var cm = this;

    // Override magic textarea content restore that IE sometimes does
    // on our hidden textarea on reload
    if (ie && ie_version < 11) setTimeout(function() { cm.display.input.reset(true); }, 20);

    registerEventHandlers(this);
    ensureGlobalHandlers();

    startOperation(this);
    this.curOp.forceUpdate = true;
    attachDoc(this, doc);

    if ((options.autofocus && !mobile) || cm.hasFocus())
      setTimeout(bind(onFocus, this), 20);
    else
      onBlur(this);

    for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))
      optionHandlers[opt](this, options[opt], Init);
    maybeUpdateLineNumberWidth(this);
    if (options.finishInit) options.finishInit(this);
    for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);
    endOperation(this);
    // Suppress optimizelegibility in Webkit, since it breaks text
    // measuring on line wrapping boundaries.
    if (webkit && options.lineWrapping &&
        getComputedStyle(display.lineDiv).textRendering == "optimizelegibility")
      display.lineDiv.style.textRendering = "auto";
  }

  // DISPLAY CONSTRUCTOR

  // The display handles the DOM integration, both for input reading
  // and content drawing. It holds references to DOM nodes and
  // display-related state.

  function Display(place, doc, input) {
    var d = this;
    this.input = input;

    // Covers bottom-right square when both scrollbars are present.
    d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
    d.scrollbarFiller.setAttribute("cm-not-content", "true");
    // Covers bottom of gutter when coverGutterNextToScrollbar is on
    // and h scrollbar is present.
    d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
    d.gutterFiller.setAttribute("cm-not-content", "true");
    // Will contain the actual code, positioned to cover the viewport.
    d.lineDiv = elt("div", null, "CodeMirror-code");
    // Elements are added to these to represent selection and cursors.
    d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
    d.cursorDiv = elt("div", null, "CodeMirror-cursors");
    // A visibility: hidden element used to find the size of things.
    d.measure = elt("div", null, "CodeMirror-measure");
    // When lines outside of the viewport are measured, they are drawn in this.
    d.lineMeasure = elt("div", null, "CodeMirror-measure");
    // Wraps everything that needs to exist inside the vertically-padded coordinate system
    d.lineSpace = elt("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
                      null, "position: relative; outline: none");
    // Moved around its parent to cover visible view.
    d.mover = elt("div", [elt("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative");
    // Set to the height of the document, allowing scrolling.
    d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
    d.sizerWidth = null;
    // Behavior of elts with overflow: auto and padding is
    // inconsistent across browsers. This is used to ensure the
    // scrollable area is big enough.
    d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
    // Will contain the gutters, if any.
    d.gutters = elt("div", null, "CodeMirror-gutters");
    d.lineGutter = null;
    // Actual scrollable element.
    d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
    d.scroller.setAttribute("tabIndex", "-1");
    // The element in which the editor lives.
    d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");

    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)
    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }
    if (!webkit && !(gecko && mobile)) d.scroller.draggable = true;

    if (place) {
      if (place.appendChild) place.appendChild(d.wrapper);
      else place(d.wrapper);
    }

    // Current rendered range (may be bigger than the view window).
    d.viewFrom = d.viewTo = doc.first;
    d.reportedViewFrom = d.reportedViewTo = doc.first;
    // Information about the rendered lines.
    d.view = [];
    d.renderedView = null;
    // Holds info about a single rendered line when it was rendered
    // for measurement, while not in view.
    d.externalMeasured = null;
    // Empty space (in pixels) above the view
    d.viewOffset = 0;
    d.lastWrapHeight = d.lastWrapWidth = 0;
    d.updateLineNumbers = null;

    d.nativeBarWidth = d.barHeight = d.barWidth = 0;
    d.scrollbarsClipped = false;

    // Used to only resize the line number gutter when necessary (when
    // the amount of lines crosses a boundary that makes its width change)
    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
    // Set to true when a non-horizontal-scrolling line widget is
    // added. As an optimization, line widget aligning is skipped when
    // this is false.
    d.alignWidgets = false;

    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;

    // Tracks the maximum line length so that the horizontal scrollbar
    // can be kept static when scrolling.
    d.maxLine = null;
    d.maxLineLength = 0;
    d.maxLineChanged = false;

    // Used for measuring wheel scrolling granularity
    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;

    // True when shift is held down.
    d.shift = false;

    // Used to track whether anything happened since the context menu
    // was opened.
    d.selForContextMenu = null;

    d.activeTouch = null;

    input.init(d);
  }

  // STATE UPDATES

  // Used to get the editor into a consistent state again when options change.

  function loadMode(cm) {
    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);
    resetModeState(cm);
  }

  function resetModeState(cm) {
    cm.doc.iter(function(line) {
      if (line.stateAfter) line.stateAfter = null;
      if (line.styles) line.styles = null;
    });
    cm.doc.frontier = cm.doc.first;
    startWorker(cm, 100);
    cm.state.modeGen++;
    if (cm.curOp) regChange(cm);
  }

  function wrappingChanged(cm) {
    if (cm.options.lineWrapping) {
      addClass(cm.display.wrapper, "CodeMirror-wrap");
      cm.display.sizer.style.minWidth = "";
      cm.display.sizerWidth = null;
    } else {
      rmClass(cm.display.wrapper, "CodeMirror-wrap");
      findMaxLine(cm);
    }
    estimateLineHeights(cm);
    regChange(cm);
    clearCaches(cm);
    setTimeout(function(){updateScrollbars(cm);}, 100);
  }

  // Returns a function that estimates the height of a line, to use as
  // first approximation until the line becomes visible (and is thus
  // properly measurable).
  function estimateHeight(cm) {
    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
    return function(line) {
      if (lineIsHidden(cm.doc, line)) return 0;

      var widgetsHeight = 0;
      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {
        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;
      }

      if (wrapping)
        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
      else
        return widgetsHeight + th;
    };
  }

  function estimateLineHeights(cm) {
    var doc = cm.doc, est = estimateHeight(cm);
    doc.iter(function(line) {
      var estHeight = est(line);
      if (estHeight != line.height) updateLineHeight(line, estHeight);
    });
  }

  function themeChanged(cm) {
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") +
      cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
    clearCaches(cm);
  }

  function guttersChanged(cm) {
    updateGutters(cm);
    regChange(cm);
    setTimeout(function(){alignHorizontally(cm);}, 20);
  }

  // Rebuild the gutter elements, ensure the margin to the left of the
  // code matches their width.
  function updateGutters(cm) {
    var gutters = cm.display.gutters, specs = cm.options.gutters;
    removeChildren(gutters);
    for (var i = 0; i < specs.length; ++i) {
      var gutterClass = specs[i];
      var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
      if (gutterClass == "CodeMirror-linenumbers") {
        cm.display.lineGutter = gElt;
        gElt.style.width = (cm.display.lineNumWidth || 1) + "px";
      }
    }
    gutters.style.display = i ? "" : "none";
    updateGutterSpace(cm);
  }

  function updateGutterSpace(cm) {
    var width = cm.display.gutters.offsetWidth;
    cm.display.sizer.style.marginLeft = width + "px";
  }

  // Compute the character length of a line, taking into account
  // collapsed ranges (see markText) that might hide parts, and join
  // other lines onto it.
  function lineLength(line) {
    if (line.height == 0) return 0;
    var len = line.text.length, merged, cur = line;
    while (merged = collapsedSpanAtStart(cur)) {
      var found = merged.find(0, true);
      cur = found.from.line;
      len += found.from.ch - found.to.ch;
    }
    cur = line;
    while (merged = collapsedSpanAtEnd(cur)) {
      var found = merged.find(0, true);
      len -= cur.text.length - found.from.ch;
      cur = found.to.line;
      len += cur.text.length - found.to.ch;
    }
    return len;
  }

  // Find the longest line in the document.
  function findMaxLine(cm) {
    var d = cm.display, doc = cm.doc;
    d.maxLine = getLine(doc, doc.first);
    d.maxLineLength = lineLength(d.maxLine);
    d.maxLineChanged = true;
    doc.iter(function(line) {
      var len = lineLength(line);
      if (len > d.maxLineLength) {
        d.maxLineLength = len;
        d.maxLine = line;
      }
    });
  }

  // Make sure the gutters options contains the element
  // "CodeMirror-linenumbers" when the lineNumbers option is true.
  function setGuttersForLineNumbers(options) {
    var found = indexOf(options.gutters, "CodeMirror-linenumbers");
    if (found == -1 && options.lineNumbers) {
      options.gutters = options.gutters.concat(["CodeMirror-linenumbers"]);
    } else if (found > -1 && !options.lineNumbers) {
      options.gutters = options.gutters.slice(0);
      options.gutters.splice(found, 1);
    }
  }

  // SCROLLBARS

  // Prepare DOM reads needed to update the scrollbars. Done in one
  // shot to minimize update/measure roundtrips.
  function measureForScrollbars(cm) {
    var d = cm.display, gutterW = d.gutters.offsetWidth;
    var docH = Math.round(cm.doc.height + paddingVert(cm.display));
    return {
      clientHeight: d.scroller.clientHeight,
      viewHeight: d.wrapper.clientHeight,
      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,
      viewWidth: d.wrapper.clientWidth,
      barLeft: cm.options.fixedGutter ? gutterW : 0,
      docHeight: docH,
      scrollHeight: docH + scrollGap(cm) + d.barHeight,
      nativeBarWidth: d.nativeBarWidth,
      gutterWidth: gutterW
    };
  }

  function NativeScrollbars(place, scroll, cm) {
    this.cm = cm;
    var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
    var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
    place(vert); place(horiz);

    on(vert, "scroll", function() {
      if (vert.clientHeight) scroll(vert.scrollTop, "vertical");
    });
    on(horiz, "scroll", function() {
      if (horiz.clientWidth) scroll(horiz.scrollLeft, "horizontal");
    });

    this.checkedOverlay = false;
    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).
    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
  }

  NativeScrollbars.prototype = copyObj({
    update: function(measure) {
      var needsH = measure.scrollWidth > measure.clientWidth + 1;
      var needsV = measure.scrollHeight > measure.clientHeight + 1;
      var sWidth = measure.nativeBarWidth;

      if (needsV) {
        this.vert.style.display = "block";
        this.vert.style.bottom = needsH ? sWidth + "px" : "0";
        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
        // A bug in IE8 can cause this value to be negative, so guard it.
        this.vert.firstChild.style.height =
          Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
      } else {
        this.vert.style.display = "";
        this.vert.firstChild.style.height = "0";
      }

      if (needsH) {
        this.horiz.style.display = "block";
        this.horiz.style.right = needsV ? sWidth + "px" : "0";
        this.horiz.style.left = measure.barLeft + "px";
        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
        this.horiz.firstChild.style.width =
          (measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
      } else {
        this.horiz.style.display = "";
        this.horiz.firstChild.style.width = "0";
      }

      if (!this.checkedOverlay && measure.clientHeight > 0) {
        if (sWidth == 0) this.overlayHack();
        this.checkedOverlay = true;
      }

      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};
    },
    setScrollLeft: function(pos) {
      if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos;
    },
    setScrollTop: function(pos) {
      if (this.vert.scrollTop != pos) this.vert.scrollTop = pos;
    },
    overlayHack: function() {
      var w = mac && !mac_geMountainLion ? "12px" : "18px";
      this.horiz.style.minHeight = this.vert.style.minWidth = w;
      var self = this;
      var barMouseDown = function(e) {
        if (e_target(e) != self.vert && e_target(e) != self.horiz)
          operation(self.cm, onMouseDown)(e);
      };
      on(this.vert, "mousedown", barMouseDown);
      on(this.horiz, "mousedown", barMouseDown);
    },
    clear: function() {
      var parent = this.horiz.parentNode;
      parent.removeChild(this.horiz);
      parent.removeChild(this.vert);
    }
  }, NativeScrollbars.prototype);

  function NullScrollbars() {}

  NullScrollbars.prototype = copyObj({
    update: function() { return {bottom: 0, right: 0}; },
    setScrollLeft: function() {},
    setScrollTop: function() {},
    clear: function() {}
  }, NullScrollbars.prototype);

  CodeMirror.scrollbarModel = {"native": NativeScrollbars, "null": NullScrollbars};

  function initScrollbars(cm) {
    if (cm.display.scrollbars) {
      cm.display.scrollbars.clear();
      if (cm.display.scrollbars.addClass)
        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
    }

    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {
      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
      // Prevent clicks in the scrollbars from killing focus
      on(node, "mousedown", function() {
        if (cm.state.focused) setTimeout(function() { cm.display.input.focus(); }, 0);
      });
      node.setAttribute("cm-not-content", "true");
    }, function(pos, axis) {
      if (axis == "horizontal") setScrollLeft(cm, pos);
      else setScrollTop(cm, pos);
    }, cm);
    if (cm.display.scrollbars.addClass)
      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
  }

  function updateScrollbars(cm, measure) {
    if (!measure) measure = measureForScrollbars(cm);
    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
    updateScrollbarsInner(cm, measure);
    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {
      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)
        updateHeightsInViewport(cm);
      updateScrollbarsInner(cm, measureForScrollbars(cm));
      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;
    }
  }

  // Re-synchronize the fake scrollbars with the actual size of the
  // content.
  function updateScrollbarsInner(cm, measure) {
    var d = cm.display;
    var sizes = d.scrollbars.update(measure);

    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";

    if (sizes.right && sizes.bottom) {
      d.scrollbarFiller.style.display = "block";
      d.scrollbarFiller.style.height = sizes.bottom + "px";
      d.scrollbarFiller.style.width = sizes.right + "px";
    } else d.scrollbarFiller.style.display = "";
    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
      d.gutterFiller.style.display = "block";
      d.gutterFiller.style.height = sizes.bottom + "px";
      d.gutterFiller.style.width = measure.gutterWidth + "px";
    } else d.gutterFiller.style.display = "";
  }

  // Compute the lines that are visible in a given viewport (defaults
  // the the current scroll position). viewport may contain top,
  // height, and ensure (see op.scrollToPos) properties.
  function visibleLines(display, doc, viewport) {
    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
    top = Math.floor(top - paddingTop(display));
    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;

    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and
    // forces those lines into the viewport (if possible).
    if (viewport && viewport.ensure) {
      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
      if (ensureFrom < from) {
        from = ensureFrom;
        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);
      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {
        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);
        to = ensureTo;
      }
    }
    return {from: from, to: Math.max(to, from + 1)};
  }

  // LINE NUMBERS

  // Re-align line numbers and gutter marks to compensate for
  // horizontal scrolling.
  function alignHorizontally(cm) {
    var display = cm.display, view = display.view;
    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;
    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
    var gutterW = display.gutters.offsetWidth, left = comp + "px";
    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {
      if (cm.options.fixedGutter && view[i].gutter)
        view[i].gutter.style.left = left;
      var align = view[i].alignable;
      if (align) for (var j = 0; j < align.length; j++)
        align[j].style.left = left;
    }
    if (cm.options.fixedGutter)
      display.gutters.style.left = (comp + gutterW) + "px";
  }

  // Used to ensure that the line number gutter is still the right
  // size for the current document size. Returns true when an update
  // is needed.
  function maybeUpdateLineNumberWidth(cm) {
    if (!cm.options.lineNumbers) return false;
    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
    if (last.length != display.lineNumChars) {
      var test = display.measure.appendChild(elt("div", [elt("div", last)],
                                                 "CodeMirror-linenumber CodeMirror-gutter-elt"));
      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
      display.lineGutter.style.width = "";
      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
      display.lineNumWidth = display.lineNumInnerWidth + padding;
      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
      display.lineGutter.style.width = display.lineNumWidth + "px";
      updateGutterSpace(cm);
      return true;
    }
    return false;
  }

  function lineNumberFor(options, i) {
    return String(options.lineNumberFormatter(i + options.firstLineNumber));
  }

  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,
  // but using getBoundingClientRect to get a sub-pixel-accurate
  // result.
  function compensateForHScroll(display) {
    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
  }

  // DISPLAY DRAWING

  function DisplayUpdate(cm, viewport, force) {
    var display = cm.display;

    this.viewport = viewport;
    // Store some values that we'll need later (but don't want to force a relayout for)
    this.visible = visibleLines(display, cm.doc, viewport);
    this.editorIsHidden = !display.wrapper.offsetWidth;
    this.wrapperHeight = display.wrapper.clientHeight;
    this.wrapperWidth = display.wrapper.clientWidth;
    this.oldDisplayWidth = displayWidth(cm);
    this.force = force;
    this.dims = getDimensions(cm);
    this.events = [];
  }

  DisplayUpdate.prototype.signal = function(emitter, type) {
    if (hasHandler(emitter, type))
      this.events.push(arguments);
  };
  DisplayUpdate.prototype.finish = function() {
    for (var i = 0; i < this.events.length; i++)
      signal.apply(null, this.events[i]);
  };

  function maybeClipScrollbars(cm) {
    var display = cm.display;
    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
      display.heightForcer.style.height = scrollGap(cm) + "px";
      display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
      display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
      display.scrollbarsClipped = true;
    }
  }

  // Does the actual updating of the line display. Bails out
  // (returning false) when there is nothing to be done and forced is
  // false.
  function updateDisplayIfNeeded(cm, update) {
    var display = cm.display, doc = cm.doc;

    if (update.editorIsHidden) {
      resetView(cm);
      return false;
    }

    // Bail out if the visible area is already rendered and nothing changed.
    if (!update.force &&
        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&
        display.renderedView == display.view && countDirtyView(cm) == 0)
      return false;

    if (maybeUpdateLineNumberWidth(cm)) {
      resetView(cm);
      update.dims = getDimensions(cm);
    }

    // Compute a suitable new viewport (from & to)
    var end = doc.first + doc.size;
    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);
    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);
    if (sawCollapsedSpans) {
      from = visualLineNo(cm.doc, from);
      to = visualLineEndNo(cm.doc, to);
    }

    var different = from != display.viewFrom || to != display.viewTo ||
      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
    adjustView(cm, from, to);

    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
    // Position the mover div to align with the current scroll position
    cm.display.mover.style.top = display.viewOffset + "px";

    var toUpdate = countDirtyView(cm);
    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))
      return false;

    // For big changes, we hide the enclosing element during the
    // update, since that speeds up the operations on most browsers.
    var focused = activeElt();
    if (toUpdate > 4) display.lineDiv.style.display = "none";
    patchDisplay(cm, display.updateLineNumbers, update.dims);
    if (toUpdate > 4) display.lineDiv.style.display = "";
    display.renderedView = display.view;
    // There might have been a widget with a focused element that got
    // hidden or updated, if so re-focus it.
    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();

    // Prevent selection and cursors from interfering with the scroll
    // width and height.
    removeChildren(display.cursorDiv);
    removeChildren(display.selectionDiv);
    display.gutters.style.height = 0;

    if (different) {
      display.lastWrapHeight = update.wrapperHeight;
      display.lastWrapWidth = update.wrapperWidth;
      startWorker(cm, 400);
    }

    display.updateLineNumbers = null;

    return true;
  }

  function postUpdateDisplay(cm, update) {
    var viewport = update.viewport;
    for (var first = true;; first = false) {
      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
        // Clip forced viewport to actual scrollable area.
        if (viewport && viewport.top != null)
          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};
        // Updated line heights might result in the drawn area not
        // actually covering the viewport. Keep looping until it does.
        update.visible = visibleLines(cm.display, cm.doc, viewport);
        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)
          break;
      }
      if (!updateDisplayIfNeeded(cm, update)) break;
      updateHeightsInViewport(cm);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      setDocumentHeight(cm, barMeasure);
      updateScrollbars(cm, barMeasure);
    }

    update.signal(cm, "update", cm);
    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
      update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;
    }
  }

  function updateDisplaySimple(cm, viewport) {
    var update = new DisplayUpdate(cm, viewport);
    if (updateDisplayIfNeeded(cm, update)) {
      updateHeightsInViewport(cm);
      postUpdateDisplay(cm, update);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      setDocumentHeight(cm, barMeasure);
      updateScrollbars(cm, barMeasure);
      update.finish();
    }
  }

  function setDocumentHeight(cm, measure) {
    cm.display.sizer.style.minHeight = measure.docHeight + "px";
    var total = measure.docHeight + cm.display.barHeight;
    cm.display.heightForcer.style.top = total + "px";
    cm.display.gutters.style.height = Math.max(total + scrollGap(cm), measure.clientHeight) + "px";
  }

  // Read the actual heights of the rendered lines, and update their
  // stored heights to match.
  function updateHeightsInViewport(cm) {
    var display = cm.display;
    var prevBottom = display.lineDiv.offsetTop;
    for (var i = 0; i < display.view.length; i++) {
      var cur = display.view[i], height;
      if (cur.hidden) continue;
      if (ie && ie_version < 8) {
        var bot = cur.node.offsetTop + cur.node.offsetHeight;
        height = bot - prevBottom;
        prevBottom = bot;
      } else {
        var box = cur.node.getBoundingClientRect();
        height = box.bottom - box.top;
      }
      var diff = cur.line.height - height;
      if (height < 2) height = textHeight(display);
      if (diff > .001 || diff < -.001) {
        updateLineHeight(cur.line, height);
        updateWidgetHeight(cur.line);
        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)
          updateWidgetHeight(cur.rest[j]);
      }
    }
  }

  // Read and store the height of line widgets associated with the
  // given line.
  function updateWidgetHeight(line) {
    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)
      line.widgets[i].height = line.widgets[i].node.offsetHeight;
  }

  // Do a bulk-read of the DOM positions and sizes needed to draw the
  // view, so that we don't interleave reading and writing to the DOM.
  function getDimensions(cm) {
    var d = cm.display, left = {}, width = {};
    var gutterLeft = d.gutters.clientLeft;
    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {
      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;
      width[cm.options.gutters[i]] = n.clientWidth;
    }
    return {fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth};
  }

  // Sync the actual display DOM structure with display.view, removing
  // nodes for lines that are no longer in view, and creating the ones
  // that are not there yet, and updating the ones that are out of
  // date.
  function patchDisplay(cm, updateNumbersFrom, dims) {
    var display = cm.display, lineNumbers = cm.options.lineNumbers;
    var container = display.lineDiv, cur = container.firstChild;

    function rm(node) {
      var next = node.nextSibling;
      // Works around a throw-scroll bug in OS X Webkit
      if (webkit && mac && cm.display.currentWheelTarget == node)
        node.style.display = "none";
      else
        node.parentNode.removeChild(node);
      return next;
    }

    var view = display.view, lineN = display.viewFrom;
    // Loop over the elements in the view, syncing cur (the DOM nodes
    // in display.lineDiv) with the view as we go.
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (lineView.hidden) {
      } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet
        var node = buildLineElement(cm, lineView, lineN, dims);
        container.insertBefore(node, cur);
      } else { // Already drawn
        while (cur != lineView.node) cur = rm(cur);
        var updateNumber = lineNumbers && updateNumbersFrom != null &&
          updateNumbersFrom <= lineN && lineView.lineNumber;
        if (lineView.changes) {
          if (indexOf(lineView.changes, "gutter") > -1) updateNumber = false;
          updateLineForChanges(cm, lineView, lineN, dims);
        }
        if (updateNumber) {
          removeChildren(lineView.lineNumber);
          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
        }
        cur = lineView.node.nextSibling;
      }
      lineN += lineView.size;
    }
    while (cur) cur = rm(cur);
  }

  // When an aspect of a line changes, a string is added to
  // lineView.changes. This updates the relevant part of the line's
  // DOM structure.
  function updateLineForChanges(cm, lineView, lineN, dims) {
    for (var j = 0; j < lineView.changes.length; j++) {
      var type = lineView.changes[j];
      if (type == "text") updateLineText(cm, lineView);
      else if (type == "gutter") updateLineGutter(cm, lineView, lineN, dims);
      else if (type == "class") updateLineClasses(lineView);
      else if (type == "widget") updateLineWidgets(cm, lineView, dims);
    }
    lineView.changes = null;
  }

  // Lines with gutter elements, widgets or a background class need to
  // be wrapped, and have the extra elements added to the wrapper div
  function ensureLineWrapped(lineView) {
    if (lineView.node == lineView.text) {
      lineView.node = elt("div", null, null, "position: relative");
      if (lineView.text.parentNode)
        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
      lineView.node.appendChild(lineView.text);
      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;
    }
    return lineView.node;
  }

  function updateLineBackground(lineView) {
    var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
    if (cls) cls += " CodeMirror-linebackground";
    if (lineView.background) {
      if (cls) lineView.background.className = cls;
      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }
    } else if (cls) {
      var wrap = ensureLineWrapped(lineView);
      lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
    }
  }

  // Wrapper around buildLineContent which will reuse the structure
  // in display.externalMeasured when possible.
  function getLineContent(cm, lineView) {
    var ext = cm.display.externalMeasured;
    if (ext && ext.line == lineView.line) {
      cm.display.externalMeasured = null;
      lineView.measure = ext.measure;
      return ext.built;
    }
    return buildLineContent(cm, lineView);
  }

  // Redraw the line's text. Interacts with the background and text
  // classes because the mode may output tokens that influence these
  // classes.
  function updateLineText(cm, lineView) {
    var cls = lineView.text.className;
    var built = getLineContent(cm, lineView);
    if (lineView.text == lineView.node) lineView.node = built.pre;
    lineView.text.parentNode.replaceChild(built.pre, lineView.text);
    lineView.text = built.pre;
    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
      lineView.bgClass = built.bgClass;
      lineView.textClass = built.textClass;
      updateLineClasses(lineView);
    } else if (cls) {
      lineView.text.className = cls;
    }
  }

  function updateLineClasses(lineView) {
    updateLineBackground(lineView);
    if (lineView.line.wrapClass)
      ensureLineWrapped(lineView).className = lineView.line.wrapClass;
    else if (lineView.node != lineView.text)
      lineView.node.className = "";
    var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
    lineView.text.className = textClass || "";
  }

  function updateLineGutter(cm, lineView, lineN, dims) {
    if (lineView.gutter) {
      lineView.node.removeChild(lineView.gutter);
      lineView.gutter = null;
    }
    var markers = lineView.line.gutterMarkers;
    if (cm.options.lineNumbers || markers) {
      var wrap = ensureLineWrapped(lineView);
      var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " +
                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) +
                                             "px; width: " + dims.gutterTotalWidth + "px");
      cm.display.input.setUneditable(gutterWrap);
      wrap.insertBefore(gutterWrap, lineView.text);
      if (lineView.line.gutterClass)
        gutterWrap.className += " " + lineView.line.gutterClass;
      if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"]))
        lineView.lineNumber = gutterWrap.appendChild(
          elt("div", lineNumberFor(cm.options, lineN),
              "CodeMirror-linenumber CodeMirror-gutter-elt",
              "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: "
              + cm.display.lineNumInnerWidth + "px"));
      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
        if (found)
          gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " +
                                     dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
      }
    }
  }

  function updateLineWidgets(cm, lineView, dims) {
    if (lineView.alignable) lineView.alignable = null;
    for (var node = lineView.node.firstChild, next; node; node = next) {
      var next = node.nextSibling;
      if (node.className == "CodeMirror-linewidget")
        lineView.node.removeChild(node);
    }
    insertLineWidgets(cm, lineView, dims);
  }

  // Build a line's DOM representation from scratch
  function buildLineElement(cm, lineView, lineN, dims) {
    var built = getLineContent(cm, lineView);
    lineView.text = lineView.node = built.pre;
    if (built.bgClass) lineView.bgClass = built.bgClass;
    if (built.textClass) lineView.textClass = built.textClass;

    updateLineClasses(lineView);
    updateLineGutter(cm, lineView, lineN, dims);
    insertLineWidgets(cm, lineView, dims);
    return lineView.node;
  }

  // A lineView may contain multiple logical lines (when merged by
  // collapsed spans). The widgets for all of them need to be drawn.
  function insertLineWidgets(cm, lineView, dims) {
    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
      insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);
  }

  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
    if (!line.widgets) return;
    var wrap = ensureLineWrapped(lineView);
    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {
      var widget = ws[i], node = elt("div", [widget.node], "CodeMirror-linewidget");
      if (!widget.handleMouseEvents) node.setAttribute("cm-ignore-events", "true");
      positionLineWidget(widget, node, lineView, dims);
      cm.display.input.setUneditable(node);
      if (allowAbove && widget.above)
        wrap.insertBefore(node, lineView.gutter || lineView.text);
      else
        wrap.appendChild(node);
      signalLater(widget, "redraw");
    }
  }

  function positionLineWidget(widget, node, lineView, dims) {
    if (widget.noHScroll) {
      (lineView.alignable || (lineView.alignable = [])).push(node);
      var width = dims.wrapperWidth;
      node.style.left = dims.fixedPos + "px";
      if (!widget.coverGutter) {
        width -= dims.gutterTotalWidth;
        node.style.paddingLeft = dims.gutterTotalWidth + "px";
      }
      node.style.width = width + "px";
    }
    if (widget.coverGutter) {
      node.style.zIndex = 5;
      node.style.position = "relative";
      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + "px";
    }
  }

  // POSITION OBJECT

  // A Pos instance represents a position within the text.
  var Pos = CodeMirror.Pos = function(line, ch) {
    if (!(this instanceof Pos)) return new Pos(line, ch);
    this.line = line; this.ch = ch;
  };

  // Compare two positions, return 0 if they are the same, a negative
  // number when a is less, and a positive number otherwise.
  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };

  function copyPos(x) {return Pos(x.line, x.ch);}
  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }
  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }

  // INPUT HANDLING

  function ensureFocus(cm) {
    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }
  }

  function isReadOnly(cm) {
    return cm.options.readOnly || cm.doc.cantEdit;
  }

  // This will be set to an array of strings when copying, so that,
  // when pasting, we know what kind of selections the copied text
  // was made out of.
  var lastCopied = null;

  function applyTextInput(cm, inserted, deleted, sel, origin) {
    var doc = cm.doc;
    cm.display.shift = false;
    if (!sel) sel = doc.sel;

    var textLines = splitLines(inserted), multiPaste = null;
    // When pasing N lines into N selections, insert one line per selection
    if (cm.state.pasteIncoming && sel.ranges.length > 1) {
      if (lastCopied && lastCopied.join("\n") == inserted)
        multiPaste = sel.ranges.length % lastCopied.length == 0 && map(lastCopied, splitLines);
      else if (textLines.length == sel.ranges.length)
        multiPaste = map(textLines, function(l) { return [l]; });
    }

    // Normal behavior is to insert the new text into every selection
    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      var from = range.from(), to = range.to();
      if (range.empty()) {
        if (deleted && deleted > 0) // Handle deletion
          from = Pos(from.line, from.ch - deleted);
        else if (cm.state.overwrite && !cm.state.pasteIncoming) // Handle overwrite
          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
      }
      var updateInput = cm.curOp.updateInput;
      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                         origin: origin || (cm.state.pasteIncoming ? "paste" : cm.state.cutIncoming ? "cut" : "+input")};
      makeChange(cm.doc, changeEvent);
      signalLater(cm, "inputRead", cm, changeEvent);
    }
    if (inserted && !cm.state.pasteIncoming)
      triggerElectric(cm, inserted);

    ensureCursorVisible(cm);
    cm.curOp.updateInput = updateInput;
    cm.curOp.typing = true;
    cm.state.pasteIncoming = cm.state.cutIncoming = false;
  }

  function triggerElectric(cm, inserted) {
    // When an 'electric' character is inserted, immediately trigger a reindent
    if (!cm.options.electricChars || !cm.options.smartIndent) return;
    var sel = cm.doc.sel;

    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue;
      var mode = cm.getModeAt(range.head);
      var indented = false;
      if (mode.electricChars) {
        for (var j = 0; j < mode.electricChars.length; j++)
          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
            indented = indentLine(cm, range.head.line, "smart");
            break;
          }
      } else if (mode.electricInput) {
        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))
          indented = indentLine(cm, range.head.line, "smart");
      }
      if (indented) signalLater(cm, "electricInput", cm, range.head.line);
    }
  }

  function copyableRanges(cm) {
    var text = [], ranges = [];
    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {
      var line = cm.doc.sel.ranges[i].head.line;
      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
      ranges.push(lineRange);
      text.push(cm.getRange(lineRange.anchor, lineRange.head));
    }
    return {text: text, ranges: ranges};
  }

  function disableBrowserMagic(field) {
    field.setAttribute("autocorrect", "off");
    field.setAttribute("autocapitalize", "off");
    field.setAttribute("spellcheck", "false");
  }

  // TEXTAREA INPUT STYLE

  function TextareaInput(cm) {
    this.cm = cm;
    // See input.poll and input.reset
    this.prevInput = "";

    // Flag that indicates whether we expect input to appear real soon
    // now (after some event like 'keypress' or 'input') and are
    // polling intensively.
    this.pollingFast = false;
    // Self-resetting timeout for the poller
    this.polling = new Delayed();
    // Tracks when input.reset has punted to just putting a short
    // string into the textarea instead of the full selection.
    this.inaccurateSelection = false;
    // Used to work around IE issue with selection being forgotten when focus moves away from textarea
    this.hasSelection = false;
    this.composing = null;
  };

  function hiddenTextarea() {
    var te = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
    var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    // The textarea is kept positioned near the cursor to prevent the
    // fact that it'll be scrolled into view on input from scrolling
    // our fake cursor out of view. On webkit, when wrap=off, paste is
    // very slow. So make the area wide instead.
    if (webkit) te.style.width = "1000px";
    else te.setAttribute("wrap", "off");
    // If border: 0; -- iOS fails to open keyboard (issue #1287)
    if (ios) te.style.border = "1px solid black";
    disableBrowserMagic(te);
    return div;
  }

  TextareaInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = this.cm;

      // Wraps and hides input textarea
      var div = this.wrapper = hiddenTextarea();
      // The semihidden textarea that is focused when the editor is
      // focused, and receives input.
      var te = this.textarea = div.firstChild;
      display.wrapper.insertBefore(div, display.wrapper.firstChild);

      // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)
      if (ios) te.style.width = "0px";

      on(te, "input", function() {
        if (ie && ie_version >= 9 && input.hasSelection) input.hasSelection = null;
        input.poll();
      });

      on(te, "paste", function() {
        // Workaround for webkit bug https://bugs.webkit.org/show_bug.cgi?id=90206
        // Add a char to the end of textarea before paste occur so that
        // selection doesn't span to the end of textarea.
        if (webkit && !cm.state.fakedLastChar && !(new Date - cm.state.lastMiddleDown < 200)) {
          var start = te.selectionStart, end = te.selectionEnd;
          te.value += "$";
          // The selection end needs to be set before the start, otherwise there
          // can be an intermediate non-empty selection between the two, which
          // can override the middle-click paste buffer on linux and cause the
          // wrong thing to get pasted.
          te.selectionEnd = end;
          te.selectionStart = start;
          cm.state.fakedLastChar = true;
        }
        cm.state.pasteIncoming = true;
        input.fastPoll();
      });

      function prepareCopyCut(e) {
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (input.inaccurateSelection) {
            input.prevInput = "";
            input.inaccurateSelection = false;
            te.value = lastCopied.join("\n");
            selectInput(te);
          }
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.setSelections(ranges.ranges, null, sel_dontScroll);
          } else {
            input.prevInput = "";
            te.value = ranges.text.join("\n");
            selectInput(te);
          }
        }
        if (e.type == "cut") cm.state.cutIncoming = true;
      }
      on(te, "cut", prepareCopyCut);
      on(te, "copy", prepareCopyCut);

      on(display.scroller, "paste", function(e) {
        if (eventInWidget(display, e)) return;
        cm.state.pasteIncoming = true;
        input.focus();
      });

      // Prevent normal selection in the editor (we handle our own)
      on(display.lineSpace, "selectstart", function(e) {
        if (!eventInWidget(display, e)) e_preventDefault(e);
      });

      on(te, "compositionstart", function() {
        var start = cm.getCursor("from");
        input.composing = {
          start: start,
          range: cm.markText(start, cm.getCursor("to"), {className: "CodeMirror-composing"})
        };
      });
      on(te, "compositionend", function() {
        if (input.composing) {
          input.poll();
          input.composing.range.clear();
          input.composing = null;
        }
      });
    },

    prepareSelection: function() {
      // Redraw the selection and/or cursor
      var cm = this.cm, display = cm.display, doc = cm.doc;
      var result = prepareSelection(cm);

      // Move the hidden textarea near the cursor to prevent scrolling artifacts
      if (cm.options.moveInputWithCursor) {
        var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,
                                            headPos.top + lineOff.top - wrapOff.top));
        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,
                                             headPos.left + lineOff.left - wrapOff.left));
      }

      return result;
    },

    showSelection: function(drawn) {
      var cm = this.cm, display = cm.display;
      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
      removeChildrenAndAdd(display.selectionDiv, drawn.selection);
      if (drawn.teTop != null) {
        this.wrapper.style.top = drawn.teTop + "px";
        this.wrapper.style.left = drawn.teLeft + "px";
      }
    },

    // Reset the input to correspond to the selection (or to be empty,
    // when not typing and nothing is selected)
    reset: function(typing) {
      if (this.contextMenuPending) return;
      var minimal, selected, cm = this.cm, doc = cm.doc;
      if (cm.somethingSelected()) {
        this.prevInput = "";
        var range = doc.sel.primary();
        minimal = hasCopyEvent &&
          (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);
        var content = minimal ? "-" : selected || cm.getSelection();
        this.textarea.value = content;
        if (cm.state.focused) selectInput(this.textarea);
        if (ie && ie_version >= 9) this.hasSelection = content;
      } else if (!typing) {
        this.prevInput = this.textarea.value = "";
        if (ie && ie_version >= 9) this.hasSelection = null;
      }
      this.inaccurateSelection = minimal;
    },

    getField: function() { return this.textarea; },

    supportsTouch: function() { return false; },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt() != this.textarea)) {
        try { this.textarea.focus(); }
        catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM
      }
    },

    blur: function() { this.textarea.blur(); },

    resetPosition: function() {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    },

    receivedFocus: function() { this.slowPoll(); },

    // Poll for input changes, using the normal rate of polling. This
    // runs as long as the editor is focused.
    slowPoll: function() {
      var input = this;
      if (input.pollingFast) return;
      input.polling.set(this.cm.options.pollInterval, function() {
        input.poll();
        if (input.cm.state.focused) input.slowPoll();
      });
    },

    // When an event has just come in that is likely to add or change
    // something in the input textarea, we poll faster, to ensure that
    // the change appears on the screen quickly.
    fastPoll: function() {
      var missed = false, input = this;
      input.pollingFast = true;
      function p() {
        var changed = input.poll();
        if (!changed && !missed) {missed = true; input.polling.set(60, p);}
        else {input.pollingFast = false; input.slowPoll();}
      }
      input.polling.set(20, p);
    },

    // Read input from the textarea, and update the document to match.
    // When something is selected, it is present in the textarea, and
    // selected (unless it is huge, in which case a placeholder is
    // used). When nothing is selected, the cursor sits after previously
    // seen text (can be empty), which is stored in prevInput (we must
    // not reset the textarea when typing, because that breaks IME).
    poll: function() {
      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
      // Since this is called a *lot*, try to bail out as cheaply as
      // possible when it is clear that nothing happened. hasSelection
      // will be the case when there is a lot of text in the textarea,
      // in which case reading its value would be expensive.
      if (!cm.state.focused || (hasSelection(input) && !prevInput) ||
          isReadOnly(cm) || cm.options.disableInput || cm.state.keySeq)
        return false;
      // See paste handler for more on the fakedLastChar kludge
      if (cm.state.pasteIncoming && cm.state.fakedLastChar) {
        input.value = input.value.substring(0, input.value.length - 1);
        cm.state.fakedLastChar = false;
      }
      var text = input.value;
      // If nothing changed, bail.
      if (text == prevInput && !cm.somethingSelected()) return false;
      // Work around nonsensical selection resetting in IE9/10, and
      // inexplicable appearance of private area unicode characters on
      // some key combos in Mac (#2689).
      if (ie && ie_version >= 9 && this.hasSelection === text ||
          mac && /[\uf700-\uf7ff]/.test(text)) {
        cm.display.input.reset();
        return false;
      }

      if (cm.doc.sel == cm.display.selForContextMenu) {
        var first = text.charCodeAt(0);
        if (first == 0x200b && !prevInput) prevInput = "\u200b";
        if (first == 0x21da) { this.reset(); return this.cm.execCommand("undo"); }
      }
      // Find the part of the input that is actually new
      var same = 0, l = Math.min(prevInput.length, text.length);
      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;

      var self = this;
      runInOp(cm, function() {
        applyTextInput(cm, text.slice(same), prevInput.length - same,
                       null, self.composing ? "*compose" : null);

        // Don't leave long text in the textarea, since it makes further polling slow
        if (text.length > 1000 || text.indexOf("\n") > -1) input.value = self.prevInput = "";
        else self.prevInput = text;

        if (self.composing) {
          self.composing.range.clear();
          self.composing.range = cm.markText(self.composing.start, cm.getCursor("to"),
                                             {className: "CodeMirror-composing"});
        }
      });
      return true;
    },

    ensurePolled: function() {
      if (this.pollingFast && this.poll()) this.pollingFast = false;
    },

    onKeyPress: function() {
      if (ie && ie_version >= 9) this.hasSelection = null;
      this.fastPoll();
    },

    onContextMenu: function(e) {
      var input = this, cm = input.cm, display = cm.display, te = input.textarea;
      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
      if (!pos || presto) return; // Opera is difficult.

      // Reset the current text selection only if the click is done outside of the selection
      // and 'resetSelectionOnContextMenu' option is true.
      var reset = cm.options.resetSelectionOnContextMenu;
      if (reset && cm.doc.sel.contains(pos) == -1)
        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);

      var oldCSS = te.style.cssText;
      input.wrapper.style.position = "absolute";
      te.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) +
        "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: " +
        (ie ? "rgba(255, 255, 255, .05)" : "transparent") +
        "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
      if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)
      display.input.focus();
      if (webkit) window.scrollTo(null, oldScrollY);
      display.input.reset();
      // Adds "Select all" to context menu in FF
      if (!cm.somethingSelected()) te.value = input.prevInput = " ";
      input.contextMenuPending = true;
      display.selForContextMenu = cm.doc.sel;
      clearTimeout(display.detectingSelectAll);

      // Select-all will be greyed out if there's nothing to select, so
      // this adds a zero-width space so that we can later check whether
      // it got selected.
      function prepareSelectAllHack() {
        if (te.selectionStart != null) {
          var selected = cm.somethingSelected();
          var extval = "\u200b" + (selected ? te.value : "");
          te.value = "\u21da"; // Used to catch context-menu undo
          te.value = extval;
          input.prevInput = selected ? "" : "\u200b";
          te.selectionStart = 1; te.selectionEnd = extval.length;
          // Re-set this, in case some other handler touched the
          // selection in the meantime.
          display.selForContextMenu = cm.doc.sel;
        }
      }
      function rehide() {
        input.contextMenuPending = false;
        input.wrapper.style.position = "relative";
        te.style.cssText = oldCSS;
        if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);

        // Try to detect the user choosing select-all
        if (te.selectionStart != null) {
          if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();
          var i = 0, poll = function() {
            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&
                te.selectionEnd > 0 && input.prevInput == "\u200b")
              operation(cm, commands.selectAll)(cm);
            else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);
            else display.input.reset();
          };
          display.detectingSelectAll = setTimeout(poll, 200);
        }
      }

      if (ie && ie_version >= 9) prepareSelectAllHack();
      if (captureRightClick) {
        e_stop(e);
        var mouseup = function() {
          off(window, "mouseup", mouseup);
          setTimeout(rehide, 20);
        };
        on(window, "mouseup", mouseup);
      } else {
        setTimeout(rehide, 50);
      }
    },

    setUneditable: nothing,

    needsContentAttribute: false
  }, TextareaInput.prototype);

  // CONTENTEDITABLE INPUT STYLE

  function ContentEditableInput(cm) {
    this.cm = cm;
    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
    this.polling = new Delayed();
    this.gracePeriod = false;
  }

  ContentEditableInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = input.cm;
      var div = input.div = display.lineDiv;
      div.contentEditable = "true";
      disableBrowserMagic(div);

      on(div, "paste", function(e) {
        var pasted = e.clipboardData && e.clipboardData.getData("text/plain");
        if (pasted) {
          e.preventDefault();
          cm.replaceSelection(pasted, null, "paste");
        }
      });

      on(div, "compositionstart", function(e) {
        var data = e.data;
        input.composing = {sel: cm.doc.sel, data: data, startData: data};
        if (!data) return;
        var prim = cm.doc.sel.primary();
        var line = cm.getLine(prim.head.line);
        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));
        if (found > -1 && found <= prim.head.ch)
          input.composing.sel = simpleSelection(Pos(prim.head.line, found),
                                                Pos(prim.head.line, found + data.length));
      });
      on(div, "compositionupdate", function(e) {
        input.composing.data = e.data;
      });
      on(div, "compositionend", function(e) {
        var ours = input.composing;
        if (!ours) return;
        if (e.data != ours.startData && !/\u200b/.test(e.data))
          ours.data = e.data;
        // Need a small delay to prevent other code (input event,
        // selection polling) from doing damage when fired right after
        // compositionend.
        setTimeout(function() {
          if (!ours.handled)
            input.applyComposition(ours);
          if (input.composing == ours)
            input.composing = null;
        }, 50);
      });

      on(div, "touchstart", function() {
        input.forceCompositionEnd();
      });

      on(div, "input", function() {
        if (input.composing) return;
        if (!input.pollContent())
          runInOp(input.cm, function() {regChange(cm);});
      });

      function onCopyCut(e) {
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (e.type == "cut") cm.replaceSelection("", null, "cut");
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.operation(function() {
              cm.setSelections(ranges.ranges, 0, sel_dontScroll);
              cm.replaceSelection("", null, "cut");
            });
          }
        }
        // iOS exposes the clipboard API, but seems to discard content inserted into it
        if (e.clipboardData && !ios) {
          e.preventDefault();
          e.clipboardData.clearData();
          e.clipboardData.setData("text/plain", lastCopied.join("\n"));
        } else {
          // Old-fashioned briefly-focus-a-textarea hack
          var kludge = hiddenTextarea(), te = kludge.firstChild;
          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
          te.value = lastCopied.join("\n");
          var hadFocus = document.activeElement;
          selectInput(te);
          setTimeout(function() {
            cm.display.lineSpace.removeChild(kludge);
            hadFocus.focus();
          }, 50);
        }
      }
      on(div, "copy", onCopyCut);
      on(div, "cut", onCopyCut);
    },

    prepareSelection: function() {
      var result = prepareSelection(this.cm, false);
      result.focus = this.cm.state.focused;
      return result;
    },

    showSelection: function(info) {
      if (!info || !this.cm.display.view.length) return;
      if (info.focus) this.showPrimarySelection();
      this.showMultipleSelections(info);
    },

    showPrimarySelection: function() {
      var sel = window.getSelection(), prim = this.cm.doc.sel.primary();
      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);
      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);
      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&
          cmp(minPos(curAnchor, curFocus), prim.from()) == 0 &&
          cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)
        return;

      var start = posToDOM(this.cm, prim.from());
      var end = posToDOM(this.cm, prim.to());
      if (!start && !end) return;

      var view = this.cm.display.view;
      var old = sel.rangeCount && sel.getRangeAt(0);
      if (!start) {
        start = {node: view[0].measure.map[2], offset: 0};
      } else if (!end) { // FIXME dangerously hacky
        var measure = view[view.length - 1].measure;
        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
        end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};
      }

      try { var rng = range(start.node, start.offset, end.offset, end.node); }
      catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible
      if (rng) {
        sel.removeAllRanges();
        sel.addRange(rng);
        if (old && sel.anchorNode == null) sel.addRange(old);
        else if (gecko) this.startGracePeriod();
      }
      this.rememberSelection();
    },

    startGracePeriod: function() {
      var input = this;
      clearTimeout(this.gracePeriod);
      this.gracePeriod = setTimeout(function() {
        input.gracePeriod = false;
        if (input.selectionChanged())
          input.cm.operation(function() { input.cm.curOp.selectionChanged = true; });
      }, 20);
    },

    showMultipleSelections: function(info) {
      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
    },

    rememberSelection: function() {
      var sel = window.getSelection();
      this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;
      this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;
    },

    selectionInEditor: function() {
      var sel = window.getSelection();
      if (!sel.rangeCount) return false;
      var node = sel.getRangeAt(0).commonAncestorContainer;
      return contains(this.div, node);
    },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor") this.div.focus();
    },
    blur: function() { this.div.blur(); },
    getField: function() { return this.div; },

    supportsTouch: function() { return true; },

    receivedFocus: function() {
      var input = this;
      if (this.selectionInEditor())
        this.pollSelection();
      else
        runInOp(this.cm, function() { input.cm.curOp.selectionChanged = true; });

      function poll() {
        if (input.cm.state.focused) {
          input.pollSelection();
          input.polling.set(input.cm.options.pollInterval, poll);
        }
      }
      this.polling.set(this.cm.options.pollInterval, poll);
    },

    selectionChanged: function() {
      var sel = window.getSelection();
      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||
        sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
    },

    pollSelection: function() {
      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
        var sel = window.getSelection(), cm = this.cm;
        this.rememberSelection();
        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var head = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (anchor && head) runInOp(cm, function() {
          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
          if (anchor.bad || head.bad) cm.curOp.selectionChanged = true;
        });
      }
    },

    pollContent: function() {
      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
      var from = sel.from(), to = sel.to();
      if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false;

      var fromIndex;
      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
        var fromLine = lineNo(display.view[0].line);
        var fromNode = display.view[0].node;
      } else {
        var fromLine = lineNo(display.view[fromIndex].line);
        var fromNode = display.view[fromIndex - 1].node.nextSibling;
      }
      var toIndex = findViewIndex(cm, to.line);
      if (toIndex == display.view.length - 1) {
        var toLine = display.viewTo - 1;
        var toNode = display.view[toIndex].node;
      } else {
        var toLine = lineNo(display.view[toIndex + 1].line) - 1;
        var toNode = display.view[toIndex + 1].node.previousSibling;
      }

      var newText = splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
      while (newText.length > 1 && oldText.length > 1) {
        if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }
        else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }
        else break;
      }

      var cutFront = 0, cutEnd = 0;
      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))
        ++cutFront;
      var newBot = lst(newText), oldBot = lst(oldText);
      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),
                               oldBot.length - (oldText.length == 1 ? cutFront : 0));
      while (cutEnd < maxCutEnd &&
             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))
        ++cutEnd;

      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);
      newText[0] = newText[0].slice(cutFront);

      var chFrom = Pos(fromLine, cutFront);
      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
        replaceRange(cm.doc, newText, chFrom, chTo, "+input");
        return true;
      }
    },

    ensurePolled: function() {
      this.forceCompositionEnd();
    },
    reset: function() {
      this.forceCompositionEnd();
    },
    forceCompositionEnd: function() {
      if (!this.composing || this.composing.handled) return;
      this.applyComposition(this.composing);
      this.composing.handled = true;
      this.div.blur();
      this.div.focus();
    },
    applyComposition: function(composing) {
      if (composing.data && composing.data != composing.startData)
        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);
    },

    setUneditable: function(node) {
      node.setAttribute("contenteditable", "false");
    },

    onKeyPress: function(e) {
      e.preventDefault();
      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
    },

    onContextMenu: nothing,
    resetPosition: nothing,

    needsContentAttribute: true
  }, ContentEditableInput.prototype);

  function posToDOM(cm, pos) {
    var view = findViewForLine(cm, pos.line);
    if (!view || view.hidden) return null;
    var line = getLine(cm.doc, pos.line);
    var info = mapFromLineView(view, line, pos.line);

    var order = getOrder(line), side = "left";
    if (order) {
      var partPos = getBidiPartAt(order, pos.ch);
      side = partPos % 2 ? "right" : "left";
    }
    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
    result.offset = result.collapse == "right" ? result.end : result.start;
    return result;
  }

  function badPos(pos, bad) { if (bad) pos.bad = true; return pos; }

  function domToPos(cm, node, offset) {
    var lineNode;
    if (node == cm.display.lineDiv) {
      lineNode = cm.display.lineDiv.childNodes[offset];
      if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
      node = null; offset = 0;
    } else {
      for (lineNode = node;; lineNode = lineNode.parentNode) {
        if (!lineNode || lineNode == cm.display.lineDiv) return null;
        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;
      }
    }
    for (var i = 0; i < cm.display.view.length; i++) {
      var lineView = cm.display.view[i];
      if (lineView.node == lineNode)
        return locateNodeInLineView(lineView, node, offset);
    }
  }

  function locateNodeInLineView(lineView, node, offset) {
    var wrapper = lineView.text.firstChild, bad = false;
    if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true);
    if (node == wrapper) {
      bad = true;
      node = wrapper.childNodes[offset];
      offset = 0;
      if (!node) {
        var line = lineView.rest ? lst(lineView.rest) : lineView.line;
        return badPos(Pos(lineNo(line), line.text.length), bad);
      }
    }

    var textNode = node.nodeType == 3 ? node : null, topNode = node;
    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
      textNode = node.firstChild;
      if (offset) offset = textNode.nodeValue.length;
    }
    while (topNode.parentNode != wrapper) topNode = topNode.parentNode;
    var measure = lineView.measure, maps = measure.maps;

    function find(textNode, topNode, offset) {
      for (var i = -1; i < (maps ? maps.length : 0); i++) {
        var map = i < 0 ? measure.map : maps[i];
        for (var j = 0; j < map.length; j += 3) {
          var curNode = map[j + 2];
          if (curNode == textNode || curNode == topNode) {
            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);
            var ch = map[j] + offset;
            if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)];
            return Pos(line, ch);
          }
        }
      }
    }
    var found = find(textNode, topNode, offset);
    if (found) return badPos(found, bad);

    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems
    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
      found = find(after, after.firstChild, 0);
      if (found)
        return badPos(Pos(found.line, found.ch - dist), bad);
      else
        dist += after.textContent.length;
    }
    for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {
      found = find(before, before.firstChild, -1);
      if (found)
        return badPos(Pos(found.line, found.ch + dist), bad);
      else
        dist += after.textContent.length;
    }
  }

  function domTextBetween(cm, from, to, fromLine, toLine) {
    var text = "", closing = false;
    function recognizeMarker(id) { return function(marker) { return marker.id == id; }; }
    function walk(node) {
      if (node.nodeType == 1) {
        var cmText = node.getAttribute("cm-text");
        if (cmText != null) {
          if (cmText == "") cmText = node.textContent.replace(/\u200b/g, "");
          text += cmText;
          return;
        }
        var markerID = node.getAttribute("cm-marker"), range;
        if (markerID) {
          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
          if (found.length && (range = found[0].find()))
            text += getBetween(cm.doc, range.from, range.to).join("\n");
          return;
        }
        if (node.getAttribute("contenteditable") == "false") return;
        for (var i = 0; i < node.childNodes.length; i++)
          walk(node.childNodes[i]);
        if (/^(pre|div|p)$/i.test(node.nodeName))
          closing = true;
      } else if (node.nodeType == 3) {
        var val = node.nodeValue;
        if (!val) return;
        if (closing) {
          text += "\n";
          closing = false;
        }
        text += val;
      }
    }
    for (;;) {
      walk(from);
      if (from == to) break;
      from = from.nextSibling;
    }
    return text;
  }

  CodeMirror.inputStyles = {"textarea": TextareaInput, "contenteditable": ContentEditableInput};

  // SELECTION / CURSOR

  // Selection objects are immutable. A new one is created every time
  // the selection changes. A selection is one or more non-overlapping
  // (and non-touching) ranges, sorted, and an integer that indicates
  // which one is the primary selection (the one that's scrolled into
  // view, that getCursor returns, etc).
  function Selection(ranges, primIndex) {
    this.ranges = ranges;
    this.primIndex = primIndex;
  }

  Selection.prototype = {
    primary: function() { return this.ranges[this.primIndex]; },
    equals: function(other) {
      if (other == this) return true;
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;
      for (var i = 0; i < this.ranges.length; i++) {
        var here = this.ranges[i], there = other.ranges[i];
        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;
      }
      return true;
    },
    deepCopy: function() {
      for (var out = [], i = 0; i < this.ranges.length; i++)
        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
      return new Selection(out, this.primIndex);
    },
    somethingSelected: function() {
      for (var i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].empty()) return true;
      return false;
    },
    contains: function(pos, end) {
      if (!end) end = pos;
      for (var i = 0; i < this.ranges.length; i++) {
        var range = this.ranges[i];
        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)
          return i;
      }
      return -1;
    }
  };

  function Range(anchor, head) {
    this.anchor = anchor; this.head = head;
  }

  Range.prototype = {
    from: function() { return minPos(this.anchor, this.head); },
    to: function() { return maxPos(this.anchor, this.head); },
    empty: function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    }
  };

  // Take an unsorted, potentially overlapping set of ranges, and
  // build a selection out of it. 'Consumes' ranges array (modifying
  // it).
  function normalizeSelection(ranges, primIndex) {
    var prim = ranges[primIndex];
    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });
    primIndex = indexOf(ranges, prim);
    for (var i = 1; i < ranges.length; i++) {
      var cur = ranges[i], prev = ranges[i - 1];
      if (cmp(prev.to(), cur.from()) >= 0) {
        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
        if (i <= primIndex) --primIndex;
        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
      }
    }
    return new Selection(ranges, primIndex);
  }

  function simpleSelection(anchor, head) {
    return new Selection([new Range(anchor, head || anchor)], 0);
  }

  // Most of the external API clips given positions to make sure they
  // actually exist within the document.
  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}
  function clipPos(doc, pos) {
    if (pos.line < doc.first) return Pos(doc.first, 0);
    var last = doc.first + doc.size - 1;
    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);
    return clipToLen(pos, getLine(doc, pos.line).text.length);
  }
  function clipToLen(pos, linelen) {
    var ch = pos.ch;
    if (ch == null || ch > linelen) return Pos(pos.line, linelen);
    else if (ch < 0) return Pos(pos.line, 0);
    else return pos;
  }
  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}
  function clipPosArray(doc, array) {
    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
    return out;
  }

  // SELECTION UPDATES

  // The 'scroll' parameter given to many of these indicated whether
  // the new cursor position should be scrolled into view after
  // modifying the selection.

  // If shift is held or the extend flag is set, extends a range to
  // include a given position (and optionally a second position).
  // Otherwise, simply returns the range between the given positions.
  // Used for cursor motion and such.
  function extendRange(doc, range, head, other) {
    if (doc.cm && doc.cm.display.shift || doc.extend) {
      var anchor = range.anchor;
      if (other) {
        var posBefore = cmp(head, anchor) < 0;
        if (posBefore != (cmp(other, anchor) < 0)) {
          anchor = head;
          head = other;
        } else if (posBefore != (cmp(head, other) < 0)) {
          head = other;
        }
      }
      return new Range(anchor, head);
    } else {
      return new Range(other || head, head);
    }
  }

  // Extend the primary selection range, discard the rest.
  function extendSelection(doc, head, other, options) {
    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);
  }

  // Extend all selections (pos is an array of selections with length
  // equal the number of selections)
  function extendSelections(doc, heads, options) {
    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)
      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
    var newSel = normalizeSelection(out, doc.sel.primIndex);
    setSelection(doc, newSel, options);
  }

  // Updates a single range in the selection.
  function replaceOneSelection(doc, i, range, options) {
    var ranges = doc.sel.ranges.slice(0);
    ranges[i] = range;
    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
  }

  // Reset the selection to a single range.
  function setSimpleSelection(doc, anchor, head, options) {
    setSelection(doc, simpleSelection(anchor, head), options);
  }

  // Give beforeSelectionChange handlers a change to influence a
  // selection update.
  function filterSelectionChange(doc, sel) {
    var obj = {
      ranges: sel.ranges,
      update: function(ranges) {
        this.ranges = [];
        for (var i = 0; i < ranges.length; i++)
          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),
                                     clipPos(doc, ranges[i].head));
      }
    };
    signal(doc, "beforeSelectionChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);
    else return sel;
  }

  function setSelectionReplaceHistory(doc, sel, options) {
    var done = doc.history.done, last = lst(done);
    if (last && last.ranges) {
      done[done.length - 1] = sel;
      setSelectionNoUndo(doc, sel, options);
    } else {
      setSelection(doc, sel, options);
    }
  }

  // Set a new selection.
  function setSelection(doc, sel, options) {
    setSelectionNoUndo(doc, sel, options);
    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
  }

  function setSelectionNoUndo(doc, sel, options) {
    if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange"))
      sel = filterSelectionChange(doc, sel);

    var bias = options && options.bias ||
      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));

    if (!(options && options.scroll === false) && doc.cm)
      ensureCursorVisible(doc.cm);
  }

  function setSelectionInner(doc, sel) {
    if (sel.equals(doc.sel)) return;

    doc.sel = sel;

    if (doc.cm) {
      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;
      signalCursorActivity(doc.cm);
    }
    signalLater(doc, "cursorActivity", doc);
  }

  // Verify that the selection does not partially select any atomic
  // marked ranges.
  function reCheckSelection(doc) {
    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);
  }

  // Return a selection that does not partially select any atomic
  // ranges.
  function skipAtomicInSelection(doc, sel, bias, mayClear) {
    var out;
    for (var i = 0; i < sel.ranges.length; i++) {
      var range = sel.ranges[i];
      var newAnchor = skipAtomic(doc, range.anchor, bias, mayClear);
      var newHead = skipAtomic(doc, range.head, bias, mayClear);
      if (out || newAnchor != range.anchor || newHead != range.head) {
        if (!out) out = sel.ranges.slice(0, i);
        out[i] = new Range(newAnchor, newHead);
      }
    }
    return out ? normalizeSelection(out, sel.primIndex) : sel;
  }

  // Ensure a given position is not inside an atomic range.
  function skipAtomic(doc, pos, bias, mayClear) {
    var flipped = false, curPos = pos;
    var dir = bias || 1;
    doc.cantEdit = false;
    search: for (;;) {
      var line = getLine(doc, curPos.line);
      if (line.markedSpans) {
        for (var i = 0; i < line.markedSpans.length; ++i) {
          var sp = line.markedSpans[i], m = sp.marker;
          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) &&
              (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {
            if (mayClear) {
              signal(m, "beforeCursorEnter");
              if (m.explicitlyCleared) {
                if (!line.markedSpans) break;
                else {--i; continue;}
              }
            }
            if (!m.atomic) continue;
            var newPos = m.find(dir < 0 ? -1 : 1);
            if (cmp(newPos, curPos) == 0) {
              newPos.ch += dir;
              if (newPos.ch < 0) {
                if (newPos.line > doc.first) newPos = clipPos(doc, Pos(newPos.line - 1));
                else newPos = null;
              } else if (newPos.ch > line.text.length) {
                if (newPos.line < doc.first + doc.size - 1) newPos = Pos(newPos.line + 1, 0);
                else newPos = null;
              }
              if (!newPos) {
                if (flipped) {
                  // Driven in a corner -- no valid cursor position found at all
                  // -- try again *with* clearing, if we didn't already
                  if (!mayClear) return skipAtomic(doc, pos, bias, true);
                  // Otherwise, turn off editing until further notice, and return the start of the doc
                  doc.cantEdit = true;
                  return Pos(doc.first, 0);
                }
                flipped = true; newPos = pos; dir = -dir;
              }
            }
            curPos = newPos;
            continue search;
          }
        }
      }
      return curPos;
    }
  }

  // SELECTION DRAWING

  function updateSelection(cm) {
    cm.display.input.showSelection(cm.display.input.prepareSelection());
  }

  function prepareSelection(cm, primary) {
    var doc = cm.doc, result = {};
    var curFragment = result.cursors = document.createDocumentFragment();
    var selFragment = result.selection = document.createDocumentFragment();

    for (var i = 0; i < doc.sel.ranges.length; i++) {
      if (primary === false && i == doc.sel.primIndex) continue;
      var range = doc.sel.ranges[i];
      var collapsed = range.empty();
      if (collapsed || cm.options.showCursorWhenSelecting)
        drawSelectionCursor(cm, range, curFragment);
      if (!collapsed)
        drawSelectionRange(cm, range, selFragment);
    }
    return result;
  }

  // Draws a cursor for the given range
  function drawSelectionCursor(cm, range, output) {
    var pos = cursorCoords(cm, range.head, "div", null, null, !cm.options.singleCursorHeightPerLine);

    var cursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor"));
    cursor.style.left = pos.left + "px";
    cursor.style.top = pos.top + "px";
    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";

    if (pos.other) {
      // Secondary cursor, shown when on a 'jump' in bi-directional text
      var otherCursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      otherCursor.style.display = "";
      otherCursor.style.left = pos.other.left + "px";
      otherCursor.style.top = pos.other.top + "px";
      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + "px";
    }
  }

  // Draws the given range as a highlighted selection
  function drawSelectionRange(cm, range, output) {
    var display = cm.display, doc = cm.doc;
    var fragment = document.createDocumentFragment();
    var padding = paddingH(cm.display), leftSide = padding.left;
    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;

    function add(left, top, width, bottom) {
      if (top < 0) top = 0;
      top = Math.round(top);
      bottom = Math.round(bottom);
      fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left +
                               "px; top: " + top + "px; width: " + (width == null ? rightSide - left : width) +
                               "px; height: " + (bottom - top) + "px"));
    }

    function drawForLine(line, fromArg, toArg) {
      var lineObj = getLine(doc, line);
      var lineLen = lineObj.text.length;
      var start, end;
      function coords(ch, bias) {
        return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
      }

      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {
        var leftPos = coords(from, "left"), rightPos, left, right;
        if (from == to) {
          rightPos = leftPos;
          left = right = leftPos.left;
        } else {
          rightPos = coords(to - 1, "right");
          if (dir == "rtl") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }
          left = leftPos.left;
          right = rightPos.right;
        }
        if (fromArg == null && from == 0) left = leftSide;
        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part
          add(left, leftPos.top, null, leftPos.bottom);
          left = leftSide;
          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);
        }
        if (toArg == null && to == lineLen) right = rightSide;
        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)
          start = leftPos;
        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)
          end = rightPos;
        if (left < leftSide + 1) left = leftSide;
        add(left, rightPos.top, right - left, rightPos.bottom);
      });
      return {start: start, end: end};
    }

    var sFrom = range.from(), sTo = range.to();
    if (sFrom.line == sTo.line) {
      drawForLine(sFrom.line, sFrom.ch, sTo.ch);
    } else {
      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
      var singleVLine = visualLine(fromLine) == visualLine(toLine);
      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
      if (singleVLine) {
        if (leftEnd.top < rightStart.top - 2) {
          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
        } else {
          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
        }
      }
      if (leftEnd.bottom < rightStart.top)
        add(leftSide, leftEnd.bottom, null, rightStart.top);
    }

    output.appendChild(fragment);
  }

  // Cursor-blinking
  function restartBlink(cm) {
    if (!cm.state.focused) return;
    var display = cm.display;
    clearInterval(display.blinker);
    var on = true;
    display.cursorDiv.style.visibility = "";
    if (cm.options.cursorBlinkRate > 0)
      display.blinker = setInterval(function() {
        display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
      }, cm.options.cursorBlinkRate);
    else if (cm.options.cursorBlinkRate < 0)
      display.cursorDiv.style.visibility = "hidden";
  }

  // HIGHLIGHT WORKER

  function startWorker(cm, time) {
    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)
      cm.state.highlight.set(time, bind(highlightWorker, cm));
  }

  function highlightWorker(cm) {
    var doc = cm.doc;
    if (doc.frontier < doc.first) doc.frontier = doc.first;
    if (doc.frontier >= cm.display.viewTo) return;
    var end = +new Date + cm.options.workTime;
    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));
    var changedLines = [];

    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
      if (doc.frontier >= cm.display.viewFrom) { // Visible
        var oldStyles = line.styles;
        var highlighted = highlightLine(cm, line, state, true);
        line.styles = highlighted.styles;
        var oldCls = line.styleClasses, newCls = highlighted.classes;
        if (newCls) line.styleClasses = newCls;
        else if (oldCls) line.styleClasses = null;
        var ischange = !oldStyles || oldStyles.length != line.styles.length ||
          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
        if (ischange) changedLines.push(doc.frontier);
        line.stateAfter = copyState(doc.mode, state);
      } else {
        processLine(cm, line.text, state);
        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
      }
      ++doc.frontier;
      if (+new Date > end) {
        startWorker(cm, cm.options.workDelay);
        return true;
      }
    });
    if (changedLines.length) runInOp(cm, function() {
      for (var i = 0; i < changedLines.length; i++)
        regLineChange(cm, changedLines[i], "text");
    });
  }

  // Finds the line to start with when starting a parse. Tries to
  // find a line with a stateAfter, so that it can start with a
  // valid state. If that fails, it returns the line with the
  // smallest indentation, which tends to need the least context to
  // parse correctly.
  function findStartLine(cm, n, precise) {
    var minindent, minline, doc = cm.doc;
    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);
    for (var search = n; search > lim; --search) {
      if (search <= doc.first) return doc.first;
      var line = getLine(doc, search - 1);
      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
      var indented = countColumn(line.text, null, cm.options.tabSize);
      if (minline == null || minindent > indented) {
        minline = search - 1;
        minindent = indented;
      }
    }
    return minline;
  }

  function getStateBefore(cm, n, precise) {
    var doc = cm.doc, display = cm.display;
    if (!doc.mode.startState) return true;
    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;
    if (!state) state = startState(doc.mode);
    else state = copyState(doc.mode, state);
    doc.iter(pos, n, function(line) {
      processLine(cm, line.text, state);
      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
      line.stateAfter = save ? copyState(doc.mode, state) : null;
      ++pos;
    });
    if (precise) doc.frontier = pos;
    return state;
  }

  // POSITION MEASUREMENT

  function paddingTop(display) {return display.lineSpace.offsetTop;}
  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}
  function paddingH(display) {
    if (display.cachedPaddingH) return display.cachedPaddingH;
    var e = removeChildrenAndAdd(display.measure, elt("pre", "x"));
    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;
    return data;
  }

  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth; }
  function displayWidth(cm) {
    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
  }
  function displayHeight(cm) {
    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
  }

  // Ensure the lineView.wrapping.heights array is populated. This is
  // an array of bottom offsets for the lines that make up a drawn
  // line. When lineWrapping is on, there might be more than one
  // height.
  function ensureLineHeights(cm, lineView, rect) {
    var wrapping = cm.options.lineWrapping;
    var curWidth = wrapping && displayWidth(cm);
    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
      var heights = lineView.measure.heights = [];
      if (wrapping) {
        lineView.measure.width = curWidth;
        var rects = lineView.text.firstChild.getClientRects();
        for (var i = 0; i < rects.length - 1; i++) {
          var cur = rects[i], next = rects[i + 1];
          if (Math.abs(cur.bottom - next.bottom) > 2)
            heights.push((cur.bottom + next.top) / 2 - rect.top);
        }
      }
      heights.push(rect.bottom - rect.top);
    }
  }

  // Find a line map (mapping character offsets to text nodes) and a
  // measurement cache for the given line number. (A line view might
  // contain multiple lines when collapsed ranges are present.)
  function mapFromLineView(lineView, line, lineN) {
    if (lineView.line == line)
      return {map: lineView.measure.map, cache: lineView.measure.cache};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineView.rest[i] == line)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineNo(lineView.rest[i]) > lineN)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};
  }

  // Render a line into the hidden node display.externalMeasured. Used
  // when measurement is needed for a line that's not in the viewport.
  function updateExternalMeasurement(cm, line) {
    line = visualLine(line);
    var lineN = lineNo(line);
    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
    view.lineN = lineN;
    var built = view.built = buildLineContent(cm, view);
    view.text = built.pre;
    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
    return view;
  }

  // Get a {top, bottom, left, right} box (in line-local coordinates)
  // for a given character.
  function measureChar(cm, line, ch, bias) {
    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
  }

  // Find a line view that corresponds to the given line number.
  function findViewForLine(cm, lineN) {
    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)
      return cm.display.view[findViewIndex(cm, lineN)];
    var ext = cm.display.externalMeasured;
    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)
      return ext;
  }

  // Measurement can be split in two steps, the set-up work that
  // applies to the whole line, and the measurement of the actual
  // character. Functions like coordsChar, that need to do a lot of
  // measurements in a row, can thus ensure that the set-up work is
  // only done once.
  function prepareMeasureForLine(cm, line) {
    var lineN = lineNo(line);
    var view = findViewForLine(cm, lineN);
    if (view && !view.text)
      view = null;
    else if (view && view.changes)
      updateLineForChanges(cm, view, lineN, getDimensions(cm));
    if (!view)
      view = updateExternalMeasurement(cm, line);

    var info = mapFromLineView(view, line, lineN);
    return {
      line: line, view: view, rect: null,
      map: info.map, cache: info.cache, before: info.before,
      hasHeights: false
    };
  }

  // Given a prepared measurement object, measures the position of an
  // actual character (or fetches it from the cache).
  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
    if (prepared.before) ch = -1;
    var key = ch + (bias || ""), found;
    if (prepared.cache.hasOwnProperty(key)) {
      found = prepared.cache[key];
    } else {
      if (!prepared.rect)
        prepared.rect = prepared.view.text.getBoundingClientRect();
      if (!prepared.hasHeights) {
        ensureLineHeights(cm, prepared.view, prepared.rect);
        prepared.hasHeights = true;
      }
      found = measureCharInner(cm, prepared, ch, bias);
      if (!found.bogus) prepared.cache[key] = found;
    }
    return {left: found.left, right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom};
  }

  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};

  function nodeAndOffsetInLineMap(map, ch, bias) {
    var node, start, end, collapse;
    // First, search the line map for the text node corresponding to,
    // or closest to, the target character.
    for (var i = 0; i < map.length; i += 3) {
      var mStart = map[i], mEnd = map[i + 1];
      if (ch < mStart) {
        start = 0; end = 1;
        collapse = "left";
      } else if (ch < mEnd) {
        start = ch - mStart;
        end = start + 1;
      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {
        end = mEnd - mStart;
        start = end - 1;
        if (ch >= mEnd) collapse = "right";
      }
      if (start != null) {
        node = map[i + 2];
        if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right"))
          collapse = bias;
        if (bias == "left" && start == 0)
          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {
            node = map[(i -= 3) + 2];
            collapse = "left";
          }
        if (bias == "right" && start == mEnd - mStart)
          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {
            node = map[(i += 3) + 2];
            collapse = "right";
          }
        break;
      }
    }
    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd};
  }

  function measureCharInner(cm, prepared, ch, bias) {
    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;

    var rect;
    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.
      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned
        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start;
        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end;
        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
          rect = node.parentNode.getBoundingClientRect();
        } else if (ie && cm.options.lineWrapping) {
          var rects = range(node, start, end).getClientRects();
          if (rects.length)
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          else
            rect = nullRect;
        } else {
          rect = range(node, start, end).getBoundingClientRect() || nullRect;
        }
        if (rect.left || rect.right || start == 0) break;
        end = start;
        start = start - 1;
        collapse = "right";
      }
      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);
    } else { // If it is a widget, simply get the box for the whole widget.
      if (start > 0) collapse = bias = "right";
      var rects;
      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)
        rect = rects[bias == "right" ? rects.length - 1 : 0];
      else
        rect = node.getBoundingClientRect();
    }
    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
      var rSpan = node.parentNode.getClientRects()[0];
      if (rSpan)
        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
      else
        rect = nullRect;
    }

    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
    var mid = (rtop + rbot) / 2;
    var heights = prepared.view.measure.heights;
    for (var i = 0; i < heights.length - 1; i++)
      if (mid < heights[i]) break;
    var top = i ? heights[i - 1] : 0, bot = heights[i];
    var result = {left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
                  right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
                  top: top, bottom: bot};
    if (!rect.left && !rect.right) result.bogus = true;
    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }

    return result;
  }

  // Work around problem with bounding client rects on ranges being
  // returned incorrectly when zoomed on IE10 and below.
  function maybeUpdateRectForZooming(measure, rect) {
    if (!window.screen || screen.logicalXDPI == null ||
        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))
      return rect;
    var scaleX = screen.logicalXDPI / screen.deviceXDPI;
    var scaleY = screen.logicalYDPI / screen.deviceYDPI;
    return {left: rect.left * scaleX, right: rect.right * scaleX,
            top: rect.top * scaleY, bottom: rect.bottom * scaleY};
  }

  function clearLineMeasurementCacheFor(lineView) {
    if (lineView.measure) {
      lineView.measure.cache = {};
      lineView.measure.heights = null;
      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
        lineView.measure.caches[i] = {};
    }
  }

  function clearLineMeasurementCache(cm) {
    cm.display.externalMeasure = null;
    removeChildren(cm.display.lineMeasure);
    for (var i = 0; i < cm.display.view.length; i++)
      clearLineMeasurementCacheFor(cm.display.view[i]);
  }

  function clearCaches(cm) {
    clearLineMeasurementCache(cm);
    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;
    cm.display.lineNumChars = null;
  }

  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }
  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }

  // Converts a {top, bottom, left, right} box from line-local
  // coordinates into another coordinate system. Context may be one of
  // "line", "div" (display.lineDiv), "local"/null (editor), "window",
  // or "page".
  function intoCoordSystem(cm, lineObj, rect, context) {
    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
      var size = widgetHeight(lineObj.widgets[i]);
      rect.top += size; rect.bottom += size;
    }
    if (context == "line") return rect;
    if (!context) context = "local";
    var yOff = heightAtLine(lineObj);
    if (context == "local") yOff += paddingTop(cm.display);
    else yOff -= cm.display.viewOffset;
    if (context == "page" || context == "window") {
      var lOff = cm.display.lineSpace.getBoundingClientRect();
      yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
      var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
      rect.left += xOff; rect.right += xOff;
    }
    rect.top += yOff; rect.bottom += yOff;
    return rect;
  }

  // Coverts a box from "div" coords to another coordinate system.
  // Context may be "window", "page", "div", or "local"/null.
  function fromCoordSystem(cm, coords, context) {
    if (context == "div") return coords;
    var left = coords.left, top = coords.top;
    // First move into "page" coordinate system
    if (context == "page") {
      left -= pageScrollX();
      top -= pageScrollY();
    } else if (context == "local" || !context) {
      var localBox = cm.display.sizer.getBoundingClientRect();
      left += localBox.left;
      top += localBox.top;
    }

    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
  }

  function charCoords(cm, pos, context, lineObj, bias) {
    if (!lineObj) lineObj = getLine(cm.doc, pos.line);
    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
  }

  // Returns a box for a given cursor position, which may have an
  // 'other' property containing the position of the secondary cursor
  // on a bidi boundary.
  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
    lineObj = lineObj || getLine(cm.doc, pos.line);
    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);
    function get(ch, right) {
      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
      if (right) m.left = m.right; else m.right = m.left;
      return intoCoordSystem(cm, lineObj, m, context);
    }
    function getBidi(ch, partPos) {
      var part = order[partPos], right = part.level % 2;
      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {
        part = order[--partPos];
        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);
        right = true;
      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {
        part = order[++partPos];
        ch = bidiLeft(part) - part.level % 2;
        right = false;
      }
      if (right && ch == part.to && ch > part.from) return get(ch - 1);
      return get(ch, right);
    }
    var order = getOrder(lineObj), ch = pos.ch;
    if (!order) return get(ch);
    var partPos = getBidiPartAt(order, ch);
    var val = getBidi(ch, partPos);
    if (bidiOther != null) val.other = getBidi(ch, bidiOther);
    return val;
  }

  // Used to cheaply estimate the coordinates for a position. Used for
  // intermediate scroll updates.
  function estimateCoords(cm, pos) {
    var left = 0, pos = clipPos(cm.doc, pos);
    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;
    var lineObj = getLine(cm.doc, pos.line);
    var top = heightAtLine(lineObj) + paddingTop(cm.display);
    return {left: left, right: left, top: top, bottom: top + lineObj.height};
  }

  // Positions returned by coordsChar contain some extra information.
  // xRel is the relative x position of the input coordinates compared
  // to the found position (so xRel > 0 means the coordinates are to
  // the right of the character position, for example). When outside
  // is true, that means the coordinates lie outside the line's
  // vertical range.
  function PosWithInfo(line, ch, outside, xRel) {
    var pos = Pos(line, ch);
    pos.xRel = xRel;
    if (outside) pos.outside = true;
    return pos;
  }

  // Compute the character position closest to the given coordinates.
  // Input must be lineSpace-local ("div" coordinate system).
  function coordsChar(cm, x, y) {
    var doc = cm.doc;
    y += cm.display.viewOffset;
    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);
    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
    if (lineN > last)
      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);
    if (x < 0) x = 0;

    var lineObj = getLine(doc, lineN);
    for (;;) {
      var found = coordsCharInner(cm, lineObj, lineN, x, y);
      var merged = collapsedSpanAtEnd(lineObj);
      var mergedPos = merged && merged.find(0, true);
      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))
        lineN = lineNo(lineObj = mergedPos.to.line);
      else
        return found;
    }
  }

  function coordsCharInner(cm, lineObj, lineNo, x, y) {
    var innerOff = y - heightAtLine(lineObj);
    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;
    var preparedMeasure = prepareMeasureForLine(cm, lineObj);

    function getX(ch) {
      var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
      wrongLine = true;
      if (innerOff > sp.bottom) return sp.left - adjust;
      else if (innerOff < sp.top) return sp.left + adjust;
      else wrongLine = false;
      return sp.left;
    }

    var bidi = getOrder(lineObj), dist = lineObj.text.length;
    var from = lineLeft(lineObj), to = lineRight(lineObj);
    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;

    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
    // Do a binary search between these bounds.
    for (;;) {
      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
        var ch = x < fromX || x - fromX <= toX - x ? from : to;
        var xDiff = x - (ch == from ? fromX : toX);
        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;
        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,
                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
        return pos;
      }
      var step = Math.ceil(dist / 2), middle = from + step;
      if (bidi) {
        middle = from;
        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
      }
      var middleX = getX(middle);
      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}
      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}
    }
  }

  var measureText;
  // Compute the default text height.
  function textHeight(display) {
    if (display.cachedTextHeight != null) return display.cachedTextHeight;
    if (measureText == null) {
      measureText = elt("pre");
      // Measure a bunch of lines, for browsers that compute
      // fractional heights.
      for (var i = 0; i < 49; ++i) {
        measureText.appendChild(document.createTextNode("x"));
        measureText.appendChild(elt("br"));
      }
      measureText.appendChild(document.createTextNode("x"));
    }
    removeChildrenAndAdd(display.measure, measureText);
    var height = measureText.offsetHeight / 50;
    if (height > 3) display.cachedTextHeight = height;
    removeChildren(display.measure);
    return height || 1;
  }

  // Compute the default character width.
  function charWidth(display) {
    if (display.cachedCharWidth != null) return display.cachedCharWidth;
    var anchor = elt("span", "xxxxxxxxxx");
    var pre = elt("pre", [anchor]);
    removeChildrenAndAdd(display.measure, pre);
    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
    if (width > 2) display.cachedCharWidth = width;
    return width || 10;
  }

  // OPERATIONS

  // Operations are used to wrap a series of changes to the editor
  // state in such a way that each change won't have to update the
  // cursor and display (which would be awkward, slow, and
  // error-prone). Instead, display updates are batched and then all
  // combined and executed at once.

  var operationGroup = null;

  var nextOpId = 0;
  // Start a new operation.
  function startOperation(cm) {
    cm.curOp = {
      cm: cm,
      viewChanged: false,      // Flag that indicates that lines might need to be redrawn
      startHeight: cm.doc.height, // Used to detect need to update scrollbar
      forceUpdate: false,      // Used to force a redraw
      updateInput: null,       // Whether to reset the input textarea
      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)
      changeObjs: null,        // Accumulated changes, for firing change events
      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on
      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already
      selectionChanged: false, // Whether the selection needs to be redrawn
      updateMaxLine: false,    // Set when the widest line needs to be determined anew
      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet
      scrollToPos: null,       // Used to scroll to a specific position
      focus: false,
      id: ++nextOpId           // Unique ID
    };
    if (operationGroup) {
      operationGroup.ops.push(cm.curOp);
    } else {
      cm.curOp.ownsGroup = operationGroup = {
        ops: [cm.curOp],
        delayedCallbacks: []
      };
    }
  }

  function fireCallbacksForOps(group) {
    // Calls delayed callbacks and cursorActivity handlers until no
    // new ones appear
    var callbacks = group.delayedCallbacks, i = 0;
    do {
      for (; i < callbacks.length; i++)
        callbacks[i]();
      for (var j = 0; j < group.ops.length; j++) {
        var op = group.ops[j];
        if (op.cursorActivityHandlers)
          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)
            op.cursorActivityHandlers[op.cursorActivityCalled++](op.cm);
      }
    } while (i < callbacks.length);
  }

  // Finish an operation, updating the display and signalling delayed events
  function endOperation(cm) {
    var op = cm.curOp, group = op.ownsGroup;
    if (!group) return;

    try { fireCallbacksForOps(group); }
    finally {
      operationGroup = null;
      for (var i = 0; i < group.ops.length; i++)
        group.ops[i].cm.curOp = null;
      endOperations(group);
    }
  }

  // The DOM updates done when an operation finishes are batched so
  // that the minimum number of relayouts are required.
  function endOperations(group) {
    var ops = group.ops;
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_finish(ops[i]);
  }

  function endOperation_R1(op) {
    var cm = op.cm, display = cm.display;
    maybeClipScrollbars(cm);
    if (op.updateMaxLine) findMaxLine(cm);

    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||
      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||
                         op.scrollToPos.to.line >= display.viewTo) ||
      display.maxLineChanged && cm.options.lineWrapping;
    op.update = op.mustUpdate &&
      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
  }

  function endOperation_W1(op) {
    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
  }

  function endOperation_R2(op) {
    var cm = op.cm, display = cm.display;
    if (op.updatedDisplay) updateHeightsInViewport(cm);

    op.barMeasure = measureForScrollbars(cm);

    // If the max line changed since it was last measured, measure it,
    // and ensure the document's width matches it.
    // updateDisplay_W2 will use these properties to do the actual resizing
    if (display.maxLineChanged && !cm.options.lineWrapping) {
      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
      cm.display.sizerWidth = op.adjustWidthTo;
      op.barMeasure.scrollWidth =
        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
    }

    if (op.updatedDisplay || op.selectionChanged)
      op.preparedSelection = display.input.prepareSelection();
  }

  function endOperation_W2(op) {
    var cm = op.cm;

    if (op.adjustWidthTo != null) {
      cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
      if (op.maxScrollLeft < cm.doc.scrollLeft)
        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
      cm.display.maxLineChanged = false;
    }

    if (op.preparedSelection)
      cm.display.input.showSelection(op.preparedSelection);
    if (op.updatedDisplay)
      setDocumentHeight(cm, op.barMeasure);
    if (op.updatedDisplay || op.startHeight != cm.doc.height)
      updateScrollbars(cm, op.barMeasure);

    if (op.selectionChanged) restartBlink(cm);

    if (cm.state.focused && op.updateInput)
      cm.display.input.reset(op.typing);
    if (op.focus && op.focus == activeElt()) ensureFocus(op.cm);
  }

  function endOperation_finish(op) {
    var cm = op.cm, display = cm.display, doc = cm.doc;

    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);

    // Abort mouse wheel delta measurement, when scrolling explicitly
    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))
      display.wheelStartX = display.wheelStartY = null;

    // Propagate the scroll position to the actual DOM scroller
    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {
      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));
      display.scrollbars.setScrollTop(doc.scrollTop);
      display.scroller.scrollTop = doc.scrollTop;
    }
    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {
      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - displayWidth(cm), op.scrollLeft));
      display.scrollbars.setScrollLeft(doc.scrollLeft);
      display.scroller.scrollLeft = doc.scrollLeft;
      alignHorizontally(cm);
    }
    // If we need to scroll a specific position into view, do so.
    if (op.scrollToPos) {
      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),
                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);
    }

    // Fire events for markers that are hidden/unidden by editing or
    // undoing
    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
    if (hidden) for (var i = 0; i < hidden.length; ++i)
      if (!hidden[i].lines.length) signal(hidden[i], "hide");
    if (unhidden) for (var i = 0; i < unhidden.length; ++i)
      if (unhidden[i].lines.length) signal(unhidden[i], "unhide");

    if (display.wrapper.offsetHeight)
      doc.scrollTop = cm.display.scroller.scrollTop;

    // Fire change events, and delayed event handlers
    if (op.changeObjs)
      signal(cm, "changes", cm, op.changeObjs);
    if (op.update)
      op.update.finish();
  }

  // Run the given function in an operation
  function runInOp(cm, f) {
    if (cm.curOp) return f();
    startOperation(cm);
    try { return f(); }
    finally { endOperation(cm); }
  }
  // Wraps a function in an operation. Returns the wrapped function.
  function operation(cm, f) {
    return function() {
      if (cm.curOp) return f.apply(cm, arguments);
      startOperation(cm);
      try { return f.apply(cm, arguments); }
      finally { endOperation(cm); }
    };
  }
  // Used to add methods to editor and doc instances, wrapping them in
  // operations.
  function methodOp(f) {
    return function() {
      if (this.curOp) return f.apply(this, arguments);
      startOperation(this);
      try { return f.apply(this, arguments); }
      finally { endOperation(this); }
    };
  }
  function docMethodOp(f) {
    return function() {
      var cm = this.cm;
      if (!cm || cm.curOp) return f.apply(this, arguments);
      startOperation(cm);
      try { return f.apply(this, arguments); }
      finally { endOperation(cm); }
    };
  }

  // VIEW TRACKING

  // These objects are used to represent the visible (currently drawn)
  // part of the document. A LineView may correspond to multiple
  // logical lines, if those are connected by collapsed ranges.
  function LineView(doc, line, lineN) {
    // The starting line
    this.line = line;
    // Continuing lines, if any
    this.rest = visualLineContinued(line);
    // Number of logical lines in this visual line
    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
    this.node = this.text = null;
    this.hidden = lineIsHidden(doc, line);
  }

  // Create a range of LineView objects for the given lines.
  function buildViewArray(cm, from, to) {
    var array = [], nextPos;
    for (var pos = from; pos < to; pos = nextPos) {
      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
      nextPos = pos + view.size;
      array.push(view);
    }
    return array;
  }

  // Updates the display.view data structure for a given change to the
  // document. From and to are in pre-change coordinates. Lendiff is
  // the amount of lines added or subtracted by the change. This is
  // used for changes that span multiple lines, or change the way
  // lines are divided into visual lines. regLineChange (below)
  // registers single-line changes.
  function regChange(cm, from, to, lendiff) {
    if (from == null) from = cm.doc.first;
    if (to == null) to = cm.doc.first + cm.doc.size;
    if (!lendiff) lendiff = 0;

    var display = cm.display;
    if (lendiff && to < display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers > from))
      display.updateLineNumbers = from;

    cm.curOp.viewChanged = true;

    if (from >= display.viewTo) { // Change after
      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)
        resetView(cm);
    } else if (to <= display.viewFrom) { // Change before
      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
        resetView(cm);
      } else {
        display.viewFrom += lendiff;
        display.viewTo += lendiff;
      }
    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap
      resetView(cm);
    } else if (from <= display.viewFrom) { // Top overlap
      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cut) {
        display.view = display.view.slice(cut.index);
        display.viewFrom = cut.lineN;
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    } else if (to >= display.viewTo) { // Bottom overlap
      var cut = viewCuttingPoint(cm, from, from, -1);
      if (cut) {
        display.view = display.view.slice(0, cut.index);
        display.viewTo = cut.lineN;
      } else {
        resetView(cm);
      }
    } else { // Gap in the middle
      var cutTop = viewCuttingPoint(cm, from, from, -1);
      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cutTop && cutBot) {
        display.view = display.view.slice(0, cutTop.index)
          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))
          .concat(display.view.slice(cutBot.index));
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    }

    var ext = display.externalMeasured;
    if (ext) {
      if (to < ext.lineN)
        ext.lineN += lendiff;
      else if (from < ext.lineN + ext.size)
        display.externalMeasured = null;
    }
  }

  // Register a change to a single line. Type must be one of "text",
  // "gutter", "class", "widget"
  function regLineChange(cm, line, type) {
    cm.curOp.viewChanged = true;
    var display = cm.display, ext = cm.display.externalMeasured;
    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)
      display.externalMeasured = null;

    if (line < display.viewFrom || line >= display.viewTo) return;
    var lineView = display.view[findViewIndex(cm, line)];
    if (lineView.node == null) return;
    var arr = lineView.changes || (lineView.changes = []);
    if (indexOf(arr, type) == -1) arr.push(type);
  }

  // Clear the view.
  function resetView(cm) {
    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
    cm.display.view = [];
    cm.display.viewOffset = 0;
  }

  // Find the view element corresponding to a given line. Return null
  // when the line isn't visible.
  function findViewIndex(cm, n) {
    if (n >= cm.display.viewTo) return null;
    n -= cm.display.viewFrom;
    if (n < 0) return null;
    var view = cm.display.view;
    for (var i = 0; i < view.length; i++) {
      n -= view[i].size;
      if (n < 0) return i;
    }
  }

  function viewCuttingPoint(cm, oldN, newN, dir) {
    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)
      return {index: index, lineN: newN};
    for (var i = 0, n = cm.display.viewFrom; i < index; i++)
      n += view[i].size;
    if (n != oldN) {
      if (dir > 0) {
        if (index == view.length - 1) return null;
        diff = (n + view[index].size) - oldN;
        index++;
      } else {
        diff = n - oldN;
      }
      oldN += diff; newN += diff;
    }
    while (visualLineNo(cm.doc, newN) != newN) {
      if (index == (dir < 0 ? 0 : view.length - 1)) return null;
      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
      index += dir;
    }
    return {index: index, lineN: newN};
  }

  // Force the view to cover a given range, adding empty view element
  // or clipping off existing ones as needed.
  function adjustView(cm, from, to) {
    var display = cm.display, view = display.view;
    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
      display.view = buildViewArray(cm, from, to);
      display.viewFrom = from;
    } else {
      if (display.viewFrom > from)
        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
      else if (display.viewFrom < from)
        display.view = display.view.slice(findViewIndex(cm, from));
      display.viewFrom = from;
      if (display.viewTo < to)
        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
      else if (display.viewTo > to)
        display.view = display.view.slice(0, findViewIndex(cm, to));
    }
    display.viewTo = to;
  }

  // Count the number of lines in the view whose DOM representation is
  // out of date (or nonexistent).
  function countDirtyView(cm) {
    var view = cm.display.view, dirty = 0;
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;
    }
    return dirty;
  }

  // EVENT HANDLERS

  // Attach the necessary event handlers when initializing the editor
  function registerEventHandlers(cm) {
    var d = cm.display;
    on(d.scroller, "mousedown", operation(cm, onMouseDown));
    // Older IE's will not fire a second mousedown for a double click
    if (ie && ie_version < 11)
      on(d.scroller, "dblclick", operation(cm, function(e) {
        if (signalDOMEvent(cm, e)) return;
        var pos = posFromMouse(cm, e);
        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;
        e_preventDefault(e);
        var word = cm.findWordAt(pos);
        extendSelection(cm.doc, word.anchor, word.head);
      }));
    else
      on(d.scroller, "dblclick", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });
    // Some browsers fire contextmenu *after* opening the menu, at
    // which point we can't mess with it anymore. Context menu is
    // handled in onMouseDown for these browsers.
    if (!captureRightClick) on(d.scroller, "contextmenu", function(e) {onContextMenu(cm, e);});

    // Used to suppress mouse event handling when a touch happens
    var touchFinished, prevTouch = {end: 0};
    function finishTouch() {
      if (d.activeTouch) {
        touchFinished = setTimeout(function() {d.activeTouch = null;}, 1000);
        prevTouch = d.activeTouch;
        prevTouch.end = +new Date;
      }
    };
    function isMouseLikeTouchEvent(e) {
      if (e.touches.length != 1) return false;
      var touch = e.touches[0];
      return touch.radiusX <= 1 && touch.radiusY <= 1;
    }
    function farAway(touch, other) {
      if (other.left == null) return true;
      var dx = other.left - touch.left, dy = other.top - touch.top;
      return dx * dx + dy * dy > 20 * 20;
    }
    on(d.scroller, "touchstart", function(e) {
      if (!isMouseLikeTouchEvent(e)) {
        clearTimeout(touchFinished);
        var now = +new Date;
        d.activeTouch = {start: now, moved: false,
                         prev: now - prevTouch.end <= 300 ? prevTouch : null};
        if (e.touches.length == 1) {
          d.activeTouch.left = e.touches[0].pageX;
          d.activeTouch.top = e.touches[0].pageY;
        }
      }
    });
    on(d.scroller, "touchmove", function() {
      if (d.activeTouch) d.activeTouch.moved = true;
    });
    on(d.scroller, "touchend", function(e) {
      var touch = d.activeTouch;
      if (touch && !eventInWidget(d, e) && touch.left != null &&
          !touch.moved && new Date - touch.start < 300) {
        var pos = cm.coordsChar(d.activeTouch, "page"), range;
        if (!touch.prev || farAway(touch, touch.prev)) // Single tap
          range = new Range(pos, pos);
        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap
          range = cm.findWordAt(pos);
        else // Triple tap
          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
        cm.setSelection(range.anchor, range.head);
        cm.focus();
        e_preventDefault(e);
      }
      finishTouch();
    });
    on(d.scroller, "touchcancel", finishTouch);

    // Sync scrolling between fake scrollbars and real scrollable
    // area, ensure viewport is updated when scrolling.
    on(d.scroller, "scroll", function() {
      if (d.scroller.clientHeight) {
        setScrollTop(cm, d.scroller.scrollTop);
        setScrollLeft(cm, d.scroller.scrollLeft, true);
        signal(cm, "scroll", cm);
      }
    });

    // Listen to wheel events in order to try and update the viewport on time.
    on(d.scroller, "mousewheel", function(e){onScrollWheel(cm, e);});
    on(d.scroller, "DOMMouseScroll", function(e){onScrollWheel(cm, e);});

    // Prevent wrapper from ever scrolling
    on(d.wrapper, "scroll", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });

    d.dragFunctions = {
      simple: function(e) {if (!signalDOMEvent(cm, e)) e_stop(e);},
      start: function(e){onDragStart(cm, e);},
      drop: operation(cm, onDrop)
    };

    var inp = d.input.getField();
    on(inp, "keyup", function(e) { onKeyUp.call(cm, e); });
    on(inp, "keydown", operation(cm, onKeyDown));
    on(inp, "keypress", operation(cm, onKeyPress));
    on(inp, "focus", bind(onFocus, cm));
    on(inp, "blur", bind(onBlur, cm));
  }

  function dragDropChanged(cm, value, old) {
    var wasOn = old && old != CodeMirror.Init;
    if (!value != !wasOn) {
      var funcs = cm.display.dragFunctions;
      var toggle = value ? on : off;
      toggle(cm.display.scroller, "dragstart", funcs.start);
      toggle(cm.display.scroller, "dragenter", funcs.simple);
      toggle(cm.display.scroller, "dragover", funcs.simple);
      toggle(cm.display.scroller, "drop", funcs.drop);
    }
  }

  // Called when the window resizes
  function onResize(cm) {
    var d = cm.display;
    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)
      return;
    // Might be a text scaling operation, clear size caches.
    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
    d.scrollbarsClipped = false;
    cm.setSize();
  }

  // MOUSE EVENTS

  // Return true when the given mouse event happened in a widget
  function eventInWidget(display, e) {
    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
      if (!n || (n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true") ||
          (n.parentNode == display.sizer && n != display.mover))
        return true;
    }
  }

  // Given a mouse event, find the corresponding position. If liberal
  // is false, it checks whether a gutter or scrollbar was clicked,
  // and returns null if it was. forRect is used by rectangular
  // selections, and tries to estimate a character position even for
  // coordinates beyond the right of the text.
  function posFromMouse(cm, e, liberal, forRect) {
    var display = cm.display;
    if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") return null;

    var x, y, space = display.lineSpace.getBoundingClientRect();
    // Fails unpredictably on IE[67] when mouse is dragged around quickly.
    try { x = e.clientX - space.left; y = e.clientY - space.top; }
    catch (e) { return null; }
    var coords = coordsChar(cm, x, y), line;
    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
    }
    return coords;
  }

  // A mouse down can be a single click, double click, triple click,
  // start of selection drag, start of text drag, new cursor
  // (ctrl-click), rectangle drag (alt-drag), or xwin
  // middle-click-paste. Or it might be a click on something we should
  // not interfere with, such as a scrollbar or widget.
  function onMouseDown(e) {
    var cm = this, display = cm.display;
    if (display.activeTouch && display.input.supportsTouch() || signalDOMEvent(cm, e)) return;
    display.shift = e.shiftKey;

    if (eventInWidget(display, e)) {
      if (!webkit) {
        // Briefly turn off draggability, to allow widgets to do
        // normal dragging things.
        display.scroller.draggable = false;
        setTimeout(function(){display.scroller.draggable = true;}, 100);
      }
      return;
    }
    if (clickInGutter(cm, e)) return;
    var start = posFromMouse(cm, e);
    window.focus();

    switch (e_button(e)) {
    case 1:
      if (start)
        leftButtonDown(cm, e, start);
      else if (e_target(e) == display.scroller)
        e_preventDefault(e);
      break;
    case 2:
      if (webkit) cm.state.lastMiddleDown = +new Date;
      if (start) extendSelection(cm.doc, start);
      setTimeout(function() {display.input.focus();}, 20);
      e_preventDefault(e);
      break;
    case 3:
      if (captureRightClick) onContextMenu(cm, e);
      else delayBlurEvent(cm);
      break;
    }
  }

  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    if (ie) setTimeout(bind(ensureFocus, cm), 0);
    else cm.curOp.focus = activeElt();

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
      type = "double";
      lastDoubleClick = {time: now, pos: start};
    } else {
      type = "single";
      lastClick = {time: now, pos: start};
    }

    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey, contained;
    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) &&
        type == "single" && (contained = sel.contains(start)) > -1 &&
        !sel.ranges[contained].empty())
      leftButtonStartDrag(cm, e, start, modifier);
    else
      leftButtonSelect(cm, e, start, type, modifier);
  }

  // Start a text drag. When it ends, see if any dragging actually
  // happen, and treat as a click if it didn't.
  function leftButtonStartDrag(cm, e, start, modifier) {
    var display = cm.display, startTime = +new Date;
    var dragEnd = operation(cm, function(e2) {
      if (webkit) display.scroller.draggable = false;
      cm.state.draggingText = false;
      off(document, "mouseup", dragEnd);
      off(display.scroller, "drop", dragEnd);
      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {
        e_preventDefault(e2);
        if (!modifier && +new Date - 200 < startTime)
          extendSelection(cm.doc, start);
        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)
        if (webkit || ie && ie_version == 9)
          setTimeout(function() {document.body.focus(); display.input.focus();}, 20);
        else
          display.input.focus();
      }
    });
    // Let the drag handler handle this.
    if (webkit) display.scroller.draggable = true;
    cm.state.draggingText = dragEnd;
    // IE's approach to draggable
    if (display.scroller.dragDrop) display.scroller.dragDrop();
    on(document, "mouseup", dragEnd);
    on(display.scroller, "drop", dragEnd);
  }

  // Normal selection, as opposed to text dragging.
  function leftButtonSelect(cm, e, start, type, addNew) {
    var display = cm.display, doc = cm.doc;
    e_preventDefault(e);

    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
    if (addNew && !e.shiftKey) {
      ourIndex = doc.sel.contains(start);
      if (ourIndex > -1)
        ourRange = ranges[ourIndex];
      else
        ourRange = new Range(start, start);
    } else {
      ourRange = doc.sel.primary();
      ourIndex = doc.sel.primIndex;
    }

    if (e.altKey) {
      type = "rect";
      if (!addNew) ourRange = new Range(start, start);
      start = posFromMouse(cm, e, true, true);
      ourIndex = -1;
    } else if (type == "double") {
      var word = cm.findWordAt(start);
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, word.anchor, word.head);
      else
        ourRange = word;
    } else if (type == "triple") {
      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, line.anchor, line.head);
      else
        ourRange = line;
    } else {
      ourRange = extendRange(doc, ourRange, start);
    }

    if (!addNew) {
      ourIndex = 0;
      setSelection(doc, new Selection([ourRange], 0), sel_mouse);
      startSel = doc.sel;
    } else if (ourIndex == -1) {
      ourIndex = ranges.length;
      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),
                   {scroll: false, origin: "*mouse"});
    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == "single" && !e.shiftKey) {
      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0));
      startSel = doc.sel;
    } else {
      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
    }

    var lastPos = start;
    function extendTo(pos) {
      if (cmp(lastPos, pos) == 0) return;
      lastPos = pos;

      if (type == "rect") {
        var ranges = [], tabSize = cm.options.tabSize;
        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));
             line <= end; line++) {
          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
          if (left == right)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
          else if (text.length > leftPos)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
        }
        if (!ranges.length) ranges.push(new Range(start, start));
        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),
                     {origin: "*mouse", scroll: false});
        cm.scrollIntoView(pos);
      } else {
        var oldRange = ourRange;
        var anchor = oldRange.anchor, head = pos;
        if (type != "single") {
          if (type == "double")
            var range = cm.findWordAt(pos);
          else
            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
          if (cmp(range.anchor, anchor) > 0) {
            head = range.head;
            anchor = minPos(oldRange.from(), range.anchor);
          } else {
            head = range.anchor;
            anchor = maxPos(oldRange.to(), range.head);
          }
        }
        var ranges = startSel.ranges.slice(0);
        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);
        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
      }
    }

    var editorSize = display.wrapper.getBoundingClientRect();
    // Used to ensure timeout re-tries don't fire when another extend
    // happened in the meantime (clearTimeout isn't reliable -- at
    // least on Chrome, the timeouts still happen even when cleared,
    // if the clear happens after their scheduled firing time).
    var counter = 0;

    function extend(e) {
      var curCount = ++counter;
      var cur = posFromMouse(cm, e, true, type == "rect");
      if (!cur) return;
      if (cmp(cur, lastPos) != 0) {
        cm.curOp.focus = activeElt();
        extendTo(cur);
        var visible = visibleLines(display, doc);
        if (cur.line >= visible.to || cur.line < visible.from)
          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);
      } else {
        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
        if (outside) setTimeout(operation(cm, function() {
          if (counter != curCount) return;
          display.scroller.scrollTop += outside;
          extend(e);
        }), 50);
      }
    }

    function done(e) {
      counter = Infinity;
      e_preventDefault(e);
      display.input.focus();
      off(document, "mousemove", move);
      off(document, "mouseup", up);
      doc.history.lastSelOrigin = null;
    }

    var move = operation(cm, function(e) {
      if (!e_button(e)) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    on(document, "mousemove", move);
    on(document, "mouseup", up);
  }

  // Determines whether an event happened in the gutter, and fires the
  // handlers for the corresponding event.
  function gutterEvent(cm, e, type, prevent, signalfn) {
    try { var mX = e.clientX, mY = e.clientY; }
    catch(e) { return false; }
    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;
    if (prevent) e_preventDefault(e);

    var display = cm.display;
    var lineBox = display.lineDiv.getBoundingClientRect();

    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
    mY -= lineBox.top - display.viewOffset;

    for (var i = 0; i < cm.options.gutters.length; ++i) {
      var g = display.gutters.childNodes[i];
      if (g && g.getBoundingClientRect().right >= mX) {
        var line = lineAtHeight(cm.doc, mY);
        var gutter = cm.options.gutters[i];
        signalfn(cm, type, cm, line, gutter, e);
        return e_defaultPrevented(e);
      }
    }
  }

  function clickInGutter(cm, e) {
    return gutterEvent(cm, e, "gutterClick", true, signalLater);
  }

  // Kludge to work around strange IE behavior where it'll sometimes
  // re-fire a series of drag-related events right after the drop (#1551)
  var lastDrop = 0;

  function onDrop(e) {
    var cm = this;
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))
      return;
    e_preventDefault(e);
    if (ie) lastDrop = +new Date;
    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
    if (!pos || isReadOnly(cm)) return;
    // Might be a file drop, in which case we simply extract the text
    // and insert it.
    if (files && files.length && window.FileReader && window.File) {
      var n = files.length, text = Array(n), read = 0;
      var loadFile = function(file, i) {
        var reader = new FileReader;
        reader.onload = operation(cm, function() {
          text[i] = reader.result;
          if (++read == n) {
            pos = clipPos(cm.doc, pos);
            var change = {from: pos, to: pos, text: splitLines(text.join("\n")), origin: "paste"};
            makeChange(cm.doc, change);
            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
          }
        });
        reader.readAsText(file);
      };
      for (var i = 0; i < n; ++i) loadFile(files[i], i);
    } else { // Normal drop
      // Don't do a replace if the drop happened inside of the selected text.
      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
        cm.state.draggingText(e);
        // Ensure the editor is re-focused
        setTimeout(function() {cm.display.input.focus();}, 20);
        return;
      }
      try {
        var text = e.dataTransfer.getData("Text");
        if (text) {
          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))
            var selected = cm.listSelections();
          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
          if (selected) for (var i = 0; i < selected.length; ++i)
            replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
          cm.replaceSelection(text, "around", "paste");
          cm.display.input.focus();
        }
      }
      catch(e){}
    }
  }

  function onDragStart(cm, e) {
    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;

    e.dataTransfer.setData("Text", cm.getSelection());

    // Use dummy image instead of default browsers image.
    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.
    if (e.dataTransfer.setDragImage && !safari) {
      var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
      img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (presto) {
        img.width = img.height = 1;
        cm.display.wrapper.appendChild(img);
        // Force a relayout, or Opera won't use our image for some obscure reason
        img._top = img.offsetTop;
      }
      e.dataTransfer.setDragImage(img, 0, 0);
      if (presto) img.parentNode.removeChild(img);
    }
  }

  // SCROLL EVENTS

  // Sync the scrollable area and scrollbars, ensure the viewport
  // covers the visible area.
  function setScrollTop(cm, val) {
    if (Math.abs(cm.doc.scrollTop - val) < 2) return;
    cm.doc.scrollTop = val;
    if (!gecko) updateDisplaySimple(cm, {top: val});
    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;
    cm.display.scrollbars.setScrollTop(val);
    if (gecko) updateDisplaySimple(cm);
    startWorker(cm, 100);
  }
  // Sync scroller and scrollbar, ensure the gutter elements are
  // aligned.
  function setScrollLeft(cm, val, isScroller) {
    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;
    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);
    cm.doc.scrollLeft = val;
    alignHorizontally(cm);
    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;
    cm.display.scrollbars.setScrollLeft(val);
  }

  // Since the delta values reported on mouse wheel events are
  // unstandardized between browsers and even browser versions, and
  // generally horribly unpredictable, this code starts by measuring
  // the scroll effect that the first few mouse wheel events have,
  // and, from that, detects the way it can convert deltas to pixel
  // offsets afterwards.
  //
  // The reason we want to know the amount a wheel event will scroll
  // is that it gives us a chance to update the display before the
  // actual scrolling happens, reducing flickering.

  var wheelSamples = 0, wheelPixelsPerUnit = null;
  // Fill in a browser-detected starting value on browsers where we
  // know one. These don't have to be accurate -- the result of them
  // being wrong would just be a slight flicker on the first wheel
  // scroll (if it is large enough).
  if (ie) wheelPixelsPerUnit = -.53;
  else if (gecko) wheelPixelsPerUnit = 15;
  else if (chrome) wheelPixelsPerUnit = -.7;
  else if (safari) wheelPixelsPerUnit = -1/3;

  var wheelEventDelta = function(e) {
    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;
    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;
    else if (dy == null) dy = e.wheelDelta;
    return {x: dx, y: dy};
  };
  CodeMirror.wheelEventPixels = function(e) {
    var delta = wheelEventDelta(e);
    delta.x *= wheelPixelsPerUnit;
    delta.y *= wheelPixelsPerUnit;
    return delta;
  };

  function onScrollWheel(cm, e) {
    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;

    var display = cm.display, scroll = display.scroller;
    // Quit if there's nothing to scroll here
    if (!(dx && scroll.scrollWidth > scroll.clientWidth ||
          dy && scroll.scrollHeight > scroll.clientHeight)) return;

    // Webkit browsers on OS X abort momentum scrolls when the target
    // of the scroll event is removed from the scrollable element.
    // This hack (see related code in patchDisplay) makes sure the
    // element is kept around.
    if (dy && mac && webkit) {
      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
        for (var i = 0; i < view.length; i++) {
          if (view[i].node == cur) {
            cm.display.currentWheelTarget = cur;
            break outer;
          }
        }
      }
    }

    // On some browsers, horizontal scrolling will cause redraws to
    // happen before the gutter has been realigned, causing it to
    // wriggle around in a most unseemly way. When we have an
    // estimated pixels/delta value, we just handle horizontal
    // scrolling entirely here. It'll be slightly off from native, but
    // better than glitching out.
    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
      if (dy)
        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));
      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));
      e_preventDefault(e);
      display.wheelStartX = null; // Abort measurement, if in progress
      return;
    }

    // 'Project' the visible viewport to cover the area that is being
    // scrolled into view (if we know enough to estimate it).
    if (dy && wheelPixelsPerUnit != null) {
      var pixels = dy * wheelPixelsPerUnit;
      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
      if (pixels < 0) top = Math.max(0, top + pixels - 50);
      else bot = Math.min(cm.doc.height, bot + pixels + 50);
      updateDisplaySimple(cm, {top: top, bottom: bot});
    }

    if (wheelSamples < 20) {
      if (display.wheelStartX == null) {
        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;
        display.wheelDX = dx; display.wheelDY = dy;
        setTimeout(function() {
          if (display.wheelStartX == null) return;
          var movedX = scroll.scrollLeft - display.wheelStartX;
          var movedY = scroll.scrollTop - display.wheelStartY;
          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||
            (movedX && display.wheelDX && movedX / display.wheelDX);
          display.wheelStartX = display.wheelStartY = null;
          if (!sample) return;
          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
          ++wheelSamples;
        }, 200);
      } else {
        display.wheelDX += dx; display.wheelDY += dy;
      }
    }
  }

  // KEY EVENTS

  // Run a handler that was bound to a key.
  function doHandleBinding(cm, bound, dropShift) {
    if (typeof bound == "string") {
      bound = commands[bound];
      if (!bound) return false;
    }
    // Ensure previous input has been read, so that the handler sees a
    // consistent view of the document
    cm.display.input.ensurePolled();
    var prevShift = cm.display.shift, done = false;
    try {
      if (isReadOnly(cm)) cm.state.suppressEdits = true;
      if (dropShift) cm.display.shift = false;
      done = bound(cm) != Pass;
    } finally {
      cm.display.shift = prevShift;
      cm.state.suppressEdits = false;
    }
    return done;
  }

  function lookupKeyForEditor(cm, name, handle) {
    for (var i = 0; i < cm.state.keyMaps.length; i++) {
      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);
      if (result) return result;
    }
    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))
      || lookupKey(name, cm.options.keyMap, handle, cm);
  }

  var stopSeq = new Delayed;
  function dispatchKey(cm, name, e, handle) {
    var seq = cm.state.keySeq;
    if (seq) {
      if (isModifierKey(name)) return "handled";
      stopSeq.set(50, function() {
        if (cm.state.keySeq == seq) {
          cm.state.keySeq = null;
          cm.display.input.reset();
        }
      });
      name = seq + " " + name;
    }
    var result = lookupKeyForEditor(cm, name, handle);

    if (result == "multi")
      cm.state.keySeq = name;
    if (result == "handled")
      signalLater(cm, "keyHandled", cm, name, e);

    if (result == "handled" || result == "multi") {
      e_preventDefault(e);
      restartBlink(cm);
    }

    if (seq && !result && /\'$/.test(name)) {
      e_preventDefault(e);
      return true;
    }
    return !!result;
  }

  // Handle a key from the keydown event.
  function handleKeyBinding(cm, e) {
    var name = keyName(e, true);
    if (!name) return false;

    if (e.shiftKey && !cm.state.keySeq) {
      // First try to resolve full name (including 'Shift-'). Failing
      // that, see if there is a cursor-motion command (starting with
      // 'go') bound to the keyname without 'Shift-'.
      return dispatchKey(cm, "Shift-" + name, e, function(b) {return doHandleBinding(cm, b, true);})
          || dispatchKey(cm, name, e, function(b) {
               if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion)
                 return doHandleBinding(cm, b);
             });
    } else {
      return dispatchKey(cm, name, e, function(b) { return doHandleBinding(cm, b); });
    }
  }

  // Handle a key from the keypress event
  function handleCharBinding(cm, e, ch) {
    return dispatchKey(cm, "'" + ch + "'", e,
                       function(b) { return doHandleBinding(cm, b, true); });
  }

  var lastStoppedKey = null;
  function onKeyDown(e) {
    var cm = this;
    cm.curOp.focus = activeElt();
    if (signalDOMEvent(cm, e)) return;
    // IE does strange things with escape.
    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;
    var code = e.keyCode;
    cm.display.shift = code == 16 || e.shiftKey;
    var handled = handleKeyBinding(cm, e);
    if (presto) {
      lastStoppedKey = handled ? code : null;
      // Opera has no cut event... we try to at least catch the key combo
      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))
        cm.replaceSelection("", null, "cut");
    }

    // Turn mouse into crosshair when Alt is held on Mac.
    if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
      showCrossHair(cm);
  }

  function showCrossHair(cm) {
    var lineDiv = cm.display.lineDiv;
    addClass(lineDiv, "CodeMirror-crosshair");

    function up(e) {
      if (e.keyCode == 18 || !e.altKey) {
        rmClass(lineDiv, "CodeMirror-crosshair");
        off(document, "keyup", up);
        off(document, "mouseover", up);
      }
    }
    on(document, "keyup", up);
    on(document, "mouseover", up);
  }

  function onKeyUp(e) {
    if (e.keyCode == 16) this.doc.sel.shift = false;
    signalDOMEvent(this, e);
  }

  function onKeyPress(e) {
    var cm = this;
    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;
    var keyCode = e.keyCode, charCode = e.charCode;
    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}
    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return;
    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
    if (handleCharBinding(cm, e, ch)) return;
    cm.display.input.onKeyPress(e);
  }

  // FOCUS/BLUR EVENTS

  function delayBlurEvent(cm) {
    cm.state.delayingBlurEvent = true;
    setTimeout(function() {
      if (cm.state.delayingBlurEvent) {
        cm.state.delayingBlurEvent = false;
        onBlur(cm);
      }
    }, 100);
  }

  function onFocus(cm) {
    if (cm.state.delayingBlurEvent) cm.state.delayingBlurEvent = false;

    if (cm.options.readOnly == "nocursor") return;
    if (!cm.state.focused) {
      signal(cm, "focus", cm);
      cm.state.focused = true;
      addClass(cm.display.wrapper, "CodeMirror-focused");
      // This test prevents this from firing when a context
      // menu is closed (since the input reset would kill the
      // select-all detection hack)
      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
        cm.display.input.reset();
        if (webkit) setTimeout(function() { cm.display.input.reset(true); }, 20); // Issue #1730
      }
      cm.display.input.receivedFocus();
    }
    restartBlink(cm);
  }
  function onBlur(cm) {
    if (cm.state.delayingBlurEvent) return;

    if (cm.state.focused) {
      signal(cm, "blur", cm);
      cm.state.focused = false;
      rmClass(cm.display.wrapper, "CodeMirror-focused");
    }
    clearInterval(cm.display.blinker);
    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);
  }

  // CONTEXT MENU HANDLING

  // To make the context menu work, we need to briefly unhide the
  // textarea (making it as unobtrusive as possible) to let the
  // right-click take effect on it.
  function onContextMenu(cm, e) {
    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return;
    cm.display.input.onContextMenu(e);
  }

  function contextMenuInGutter(cm, e) {
    if (!hasHandler(cm, "gutterContextMenu")) return false;
    return gutterEvent(cm, e, "gutterContextMenu", false, signal);
  }

  // UPDATING

  // Compute the position of the end of a change (its 'to' property
  // refers to the pre-change end).
  var changeEnd = CodeMirror.changeEnd = function(change) {
    if (!change.text) return change.to;
    return Pos(change.from.line + change.text.length - 1,
               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
  };

  // Adjust a position to refer to the post-change position of the
  // same text, or the end of the change if the change covers it.
  function adjustForChange(pos, change) {
    if (cmp(pos, change.from) < 0) return pos;
    if (cmp(pos, change.to) <= 0) return changeEnd(change);

    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;
    return Pos(line, ch);
  }

  function computeSelAfterChange(doc, change) {
    var out = [];
    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      out.push(new Range(adjustForChange(range.anchor, change),
                         adjustForChange(range.head, change)));
    }
    return normalizeSelection(out, doc.sel.primIndex);
  }

  function offsetPos(pos, old, nw) {
    if (pos.line == old.line)
      return Pos(nw.line, pos.ch - old.ch + nw.ch);
    else
      return Pos(nw.line + (pos.line - old.line), pos.ch);
  }

  // Used by replaceSelections to allow moving the selection to the
  // start or around the replaced test. Hint may be "start" or "around".
  function computeReplacedSel(doc, changes, hint) {
    var out = [];
    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var from = offsetPos(change.from, oldPrev, newPrev);
      var to = offsetPos(changeEnd(change), oldPrev, newPrev);
      oldPrev = change.to;
      newPrev = to;
      if (hint == "around") {
        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
        out[i] = new Range(inv ? to : from, inv ? from : to);
      } else {
        out[i] = new Range(from, from);
      }
    }
    return new Selection(out, doc.sel.primIndex);
  }

  // Allow "beforeChange" event handlers to influence a change
  function filterChange(doc, change, update) {
    var obj = {
      canceled: false,
      from: change.from,
      to: change.to,
      text: change.text,
      origin: change.origin,
      cancel: function() { this.canceled = true; }
    };
    if (update) obj.update = function(from, to, text, origin) {
      if (from) this.from = clipPos(doc, from);
      if (to) this.to = clipPos(doc, to);
      if (text) this.text = text;
      if (origin !== undefined) this.origin = origin;
    };
    signal(doc, "beforeChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeChange", doc.cm, obj);

    if (obj.canceled) return null;
    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
  }

  // Apply a change to a document, and add it to the document's
  // history, and propagating it to all linked documents.
  function makeChange(doc, change, ignoreReadOnly) {
    if (doc.cm) {
      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
      if (doc.cm.state.suppressEdits) return;
    }

    if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
      change = filterChange(doc, change, true);
      if (!change) return;
    }

    // Possibly split or suppress the update based on the presence
    // of read-only spans in its range.
    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
    if (split) {
      for (var i = split.length - 1; i >= 0; --i)
        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [""] : change.text});
    } else {
      makeChangeInner(doc, change);
    }
  }

  function makeChangeInner(doc, change) {
    if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) return;
    var selAfter = computeSelAfterChange(doc, change);
    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);

    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
    var rebased = [];

    linkedDocs(doc, function(doc, sharedHist) {
      if (!sharedHist && indexOf(rebased, doc.history) == -1) {
        rebaseHist(doc.history, change);
        rebased.push(doc.history);
      }
      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
    });
  }

  // Revert a change stored in a document's history.
  function makeChangeFromHistory(doc, type, allowSelectionOnly) {
    if (doc.cm && doc.cm.state.suppressEdits) return;

    var hist = doc.history, event, selAfter = doc.sel;
    var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;

    // Verify that there is a useable event (so that ctrl-z won't
    // needlessly clear selection events)
    for (var i = 0; i < source.length; i++) {
      event = source[i];
      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)
        break;
    }
    if (i == source.length) return;
    hist.lastOrigin = hist.lastSelOrigin = null;

    for (;;) {
      event = source.pop();
      if (event.ranges) {
        pushSelectionToHistory(event, dest);
        if (allowSelectionOnly && !event.equals(doc.sel)) {
          setSelection(doc, event, {clearRedo: false});
          return;
        }
        selAfter = event;
      }
      else break;
    }

    // Build up a reverse change object to add to the opposite history
    // stack (redo when undoing, and vice versa).
    var antiChanges = [];
    pushSelectionToHistory(selAfter, dest);
    dest.push({changes: antiChanges, generation: hist.generation});
    hist.generation = event.generation || ++hist.maxGeneration;

    var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");

    for (var i = event.changes.length - 1; i >= 0; --i) {
      var change = event.changes[i];
      change.origin = type;
      if (filter && !filterChange(doc, change, false)) {
        source.length = 0;
        return;
      }

      antiChanges.push(historyChangeFromChange(doc, change));

      var after = i ? computeSelAfterChange(doc, change) : lst(source);
      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
      var rebased = [];

      // Propagate to the linked documents
      linkedDocs(doc, function(doc, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc.history) == -1) {
          rebaseHist(doc.history, change);
          rebased.push(doc.history);
        }
        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
      });
    }
  }

  // Sub-views need their line numbers shifted when text is added
  // above or below them in the parent document.
  function shiftDoc(doc, distance) {
    if (distance == 0) return;
    doc.first += distance;
    doc.sel = new Selection(map(doc.sel.ranges, function(range) {
      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),
                       Pos(range.head.line + distance, range.head.ch));
    }), doc.sel.primIndex);
    if (doc.cm) {
      regChange(doc.cm, doc.first, doc.first - distance, distance);
      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)
        regLineChange(doc.cm, l, "gutter");
    }
  }

  // More lower-level change function, handling only a single document
  // (not linked ones).
  function makeChangeSingleDoc(doc, change, selAfter, spans) {
    if (doc.cm && !doc.cm.curOp)
      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);

    if (change.to.line < doc.first) {
      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
      return;
    }
    if (change.from.line > doc.lastLine()) return;

    // Clip the change to the size of this doc
    if (change.from.line < doc.first) {
      var shift = change.text.length - 1 - (doc.first - change.from.line);
      shiftDoc(doc, shift);
      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),
                text: [lst(change.text)], origin: change.origin};
    }
    var last = doc.lastLine();
    if (change.to.line > last) {
      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),
                text: [change.text[0]], origin: change.origin};
    }

    change.removed = getBetween(doc, change.from, change.to);

    if (!selAfter) selAfter = computeSelAfterChange(doc, change);
    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);
    else updateDoc(doc, change, spans);
    setSelectionNoUndo(doc, selAfter, sel_dontScroll);
  }

  // Handle the interaction of a change to a document with the editor
  // that this document is part of.
  function makeChangeSingleDocInEditor(cm, change, spans) {
    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;

    var recomputeMaxLength = false, checkWidthStart = from.line;
    if (!cm.options.lineWrapping) {
      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
      doc.iter(checkWidthStart, to.line + 1, function(line) {
        if (line == display.maxLine) {
          recomputeMaxLength = true;
          return true;
        }
      });
    }

    if (doc.sel.contains(change.from, change.to) > -1)
      signalCursorActivity(cm);

    updateDoc(doc, change, spans, estimateHeight(cm));

    if (!cm.options.lineWrapping) {
      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
        var len = lineLength(line);
        if (len > display.maxLineLength) {
          display.maxLine = line;
          display.maxLineLength = len;
          display.maxLineChanged = true;
          recomputeMaxLength = false;
        }
      });
      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;
    }

    // Adjust frontier, schedule worker
    doc.frontier = Math.min(doc.frontier, from.line);
    startWorker(cm, 400);

    var lendiff = change.text.length - (to.line - from.line) - 1;
    // Remember that these lines changed, for updating the display
    if (change.full)
      regChange(cm);
    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))
      regLineChange(cm, from.line, "text");
    else
      regChange(cm, from.line, to.line + 1, lendiff);

    var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
    if (changeHandler || changesHandler) {
      var obj = {
        from: from, to: to,
        text: change.text,
        removed: change.removed,
        origin: change.origin
      };
      if (changeHandler) signalLater(cm, "change", cm, obj);
      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
    }
    cm.display.selForContextMenu = null;
  }

  function replaceRange(doc, code, from, to, origin) {
    if (!to) to = from;
    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }
    if (typeof code == "string") code = splitLines(code);
    makeChange(doc, {from: from, to: to, text: code, origin: origin});
  }

  // SCROLLING THINGS INTO VIEW

  // If an editor sits on the top or bottom of the window, partially
  // scrolled out of view, this ensures that the cursor is visible.
  function maybeScrollWindow(cm, coords) {
    if (signalDOMEvent(cm, "scrollCursorIntoView")) return;

    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
    if (coords.top + box.top < 0) doScroll = true;
    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;
    if (doScroll != null && !phantom) {
      var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " +
                           (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " +
                           (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + "px; left: " +
                           coords.left + "px; width: 2px;");
      cm.display.lineSpace.appendChild(scrollNode);
      scrollNode.scrollIntoView(doScroll);
      cm.display.lineSpace.removeChild(scrollNode);
    }
  }

  // Scroll a given position into view (immediately), verifying that
  // it actually became visible (as line heights are accurately
  // measured, the position of something may 'drift' during drawing).
  function scrollPosIntoView(cm, pos, end, margin) {
    if (margin == null) margin = 0;
    for (var limit = 0; limit < 5; limit++) {
      var changed = false, coords = cursorCoords(cm, pos);
      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),
                                         Math.min(coords.top, endCoords.top) - margin,
                                         Math.max(coords.left, endCoords.left),
                                         Math.max(coords.bottom, endCoords.bottom) + margin);
      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
      if (scrollPos.scrollTop != null) {
        setScrollTop(cm, scrollPos.scrollTop);
        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;
      }
      if (!changed) break;
    }
    return coords;
  }

  // Scroll a given set of coordinates into view (immediately).
  function scrollIntoView(cm, x1, y1, x2, y2) {
    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);
    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);
  }

  // Calculate a new scroll position needed to scroll the given
  // rectangle into view. Returns an object with scrollTop and
  // scrollLeft properties. When these are undefined, the
  // vertical/horizontal position does not need to be adjusted.
  function calculateScrollPos(cm, x1, y1, x2, y2) {
    var display = cm.display, snapMargin = textHeight(cm.display);
    if (y1 < 0) y1 = 0;
    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
    var screen = displayHeight(cm), result = {};
    if (y2 - y1 > screen) y2 = y1 + screen;
    var docBottom = cm.doc.height + paddingVert(display);
    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
    if (y1 < screentop) {
      result.scrollTop = atTop ? 0 : y1;
    } else if (y2 > screentop + screen) {
      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
      if (newTop != screentop) result.scrollTop = newTop;
    }

    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);
    var tooWide = x2 - x1 > screenw;
    if (tooWide) x2 = x1 + screenw;
    if (x1 < 10)
      result.scrollLeft = 0;
    else if (x1 < screenleft)
      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));
    else if (x2 > screenw + screenleft - 3)
      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;
    return result;
  }

  // Store a relative adjustment to the scroll position in the current
  // operation (to be applied when the operation finishes).
  function addToScrollPos(cm, left, top) {
    if (left != null || top != null) resolveScrollToPos(cm);
    if (left != null)
      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;
    if (top != null)
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
  }

  // Make sure that at the end of the operation the current cursor is
  // shown.
  function ensureCursorVisible(cm) {
    resolveScrollToPos(cm);
    var cur = cm.getCursor(), from = cur, to = cur;
    if (!cm.options.lineWrapping) {
      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;
      to = Pos(cur.line, cur.ch + 1);
    }
    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};
  }

  // When an operation has its scrollToPos property set, and another
  // scroll action is applied before the end of the operation, this
  // 'simulates' scrolling that position into view in a cheap way, so
  // that the effect of intermediate scroll commands is not ignored.
  function resolveScrollToPos(cm) {
    var range = cm.curOp.scrollToPos;
    if (range) {
      cm.curOp.scrollToPos = null;
      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);
      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),
                                    Math.min(from.top, to.top) - range.margin,
                                    Math.max(from.right, to.right),
                                    Math.max(from.bottom, to.bottom) + range.margin);
      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
    }
  }

  // API UTILITIES

  // Indent the given line. The how parameter can be "smart",
  // "add"/null, "subtract", or "prev". When aggressive is false
  // (typically set to true for forced single-line indents), empty
  // lines are not indented, and places where the mode returns Pass
  // are left alone.
  function indentLine(cm, n, how, aggressive) {
    var doc = cm.doc, state;
    if (how == null) how = "add";
    if (how == "smart") {
      // Fall back to "prev" when the mode doesn't have an indentation
      // method.
      if (!doc.mode.indent) how = "prev";
      else state = getStateBefore(cm, n);
    }

    var tabSize = cm.options.tabSize;
    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
    if (line.stateAfter) line.stateAfter = null;
    var curSpaceString = line.text.match(/^\s*/)[0], indentation;
    if (!aggressive && !/\S/.test(line.text)) {
      indentation = 0;
      how = "not";
    } else if (how == "smart") {
      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
      if (indentation == Pass || indentation > 150) {
        if (!aggressive) return;
        how = "prev";
      }
    }
    if (how == "prev") {
      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);
      else indentation = 0;
    } else if (how == "add") {
      indentation = curSpace + cm.options.indentUnit;
    } else if (how == "subtract") {
      indentation = curSpace - cm.options.indentUnit;
    } else if (typeof how == "number") {
      indentation = curSpace + how;
    }
    indentation = Math.max(0, indentation);

    var indentString = "", pos = 0;
    if (cm.options.indentWithTabs)
      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += "\t";}
    if (pos < indentation) indentString += spaceStr(indentation - pos);

    if (indentString != curSpaceString) {
      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
      line.stateAfter = null;
      return true;
    } else {
      // Ensure that, if the cursor was in the whitespace at the start
      // of the line, it is moved to the end of that space.
      for (var i = 0; i < doc.sel.ranges.length; i++) {
        var range = doc.sel.ranges[i];
        if (range.head.line == n && range.head.ch < curSpaceString.length) {
          var pos = Pos(n, curSpaceString.length);
          replaceOneSelection(doc, i, new Range(pos, pos));
          break;
        }
      }
    }
  }

  // Utility for applying a change to a line by handle or number,
  // returning the number and optionally registering the line as
  // changed.
  function changeLine(doc, handle, changeType, op) {
    var no = handle, line = handle;
    if (typeof handle == "number") line = getLine(doc, clipLine(doc, handle));
    else no = lineNo(handle);
    if (no == null) return null;
    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);
    return line;
  }

  // Helper for deleting text near the selection(s), used to implement
  // backspace, delete, and similar functionality.
  function deleteNearSelection(cm, compute) {
    var ranges = cm.doc.sel.ranges, kill = [];
    // Build up a set of ranges to kill first, merging overlapping
    // ranges.
    for (var i = 0; i < ranges.length; i++) {
      var toKill = compute(ranges[i]);
      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
        var replaced = kill.pop();
        if (cmp(replaced.from, toKill.from) < 0) {
          toKill.from = replaced.from;
          break;
        }
      }
      kill.push(toKill);
    }
    // Next, remove those actual ranges.
    runInOp(cm, function() {
      for (var i = kill.length - 1; i >= 0; i--)
        replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
      ensureCursorVisible(cm);
    });
  }

  // Used for horizontal relative motion. Dir is -1 or 1 (left or
  // right), unit can be "char", "column" (like char, but doesn't
  // cross line boundaries), "word" (across next word), or "group" (to
  // the start of next group of word or non-word-non-whitespace
  // chars). The visually param controls whether, in right-to-left
  // text, direction 1 means to move towards the next index in the
  // string, or towards the character to the right of the current
  // position. The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosH(doc, pos, dir, unit, visually) {
    var line = pos.line, ch = pos.ch, origDir = dir;
    var lineObj = getLine(doc, line);
    var possible = true;
    function findNextLine() {
      var l = line + dir;
      if (l < doc.first || l >= doc.first + doc.size) return (possible = false);
      line = l;
      return lineObj = getLine(doc, l);
    }
    function moveOnce(boundToLine) {
      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);
      if (next == null) {
        if (!boundToLine && findNextLine()) {
          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);
          else ch = dir < 0 ? lineObj.text.length : 0;
        } else return (possible = false);
      } else ch = next;
      return true;
    }

    if (unit == "char") moveOnce();
    else if (unit == "column") moveOnce(true);
    else if (unit == "word" || unit == "group") {
      var sawType = null, group = unit == "group";
      var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
      for (var first = true;; first = false) {
        if (dir < 0 && !moveOnce(!first)) break;
        var cur = lineObj.text.charAt(ch) || "\n";
        var type = isWordChar(cur, helper) ? "w"
          : group && cur == "\n" ? "n"
          : !group || /\s/.test(cur) ? null
          : "p";
        if (group && !first && !type) type = "s";
        if (sawType && sawType != type) {
          if (dir < 0) {dir = 1; moveOnce();}
          break;
        }

        if (type) sawType = type;
        if (dir > 0 && !moveOnce(!first)) break;
      }
    }
    var result = skipAtomic(doc, Pos(line, ch), origDir, true);
    if (!possible) result.hitSide = true;
    return result;
  }

  // For relative vertical movement. Dir may be -1 or 1. Unit can be
  // "page" or "line". The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosV(cm, pos, dir, unit) {
    var doc = cm.doc, x = pos.left, y;
    if (unit == "page") {
      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
    } else if (unit == "line") {
      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
    }
    for (;;) {
      var target = coordsChar(cm, x, y);
      if (!target.outside) break;
      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }
      y += dir * 5;
    }
    return target;
  }

  // EDITOR METHODS

  // The publicly visible API. Note that methodOp(f) means
  // 'wrap f in an operation, performed on its `this` parameter'.

  // This is not the complete set of editor methods. Most of the
  // methods defined on the Doc type are also injected into
  // CodeMirror.prototype, for backwards compatibility and
  // convenience.

  CodeMirror.prototype = {
    constructor: CodeMirror,
    focus: function(){window.focus(); this.display.input.focus();},

    setOption: function(option, value) {
      var options = this.options, old = options[option];
      if (options[option] == value && option != "mode") return;
      options[option] = value;
      if (optionHandlers.hasOwnProperty(option))
        operation(this, optionHandlers[option])(this, value, old);
    },

    getOption: function(option) {return this.options[option];},
    getDoc: function() {return this.doc;},

    addKeyMap: function(map, bottom) {
      this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map));
    },
    removeKeyMap: function(map) {
      var maps = this.state.keyMaps;
      for (var i = 0; i < maps.length; ++i)
        if (maps[i] == map || maps[i].name == map) {
          maps.splice(i, 1);
          return true;
        }
    },

    addOverlay: methodOp(function(spec, options) {
      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
      if (mode.startState) throw new Error("Overlays may not be stateful.");
      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});
      this.state.modeGen++;
      regChange(this);
    }),
    removeOverlay: methodOp(function(spec) {
      var overlays = this.state.overlays;
      for (var i = 0; i < overlays.length; ++i) {
        var cur = overlays[i].modeSpec;
        if (cur == spec || typeof spec == "string" && cur.name == spec) {
          overlays.splice(i, 1);
          this.state.modeGen++;
          regChange(this);
          return;
        }
      }
    }),

    indentLine: methodOp(function(n, dir, aggressive) {
      if (typeof dir != "string" && typeof dir != "number") {
        if (dir == null) dir = this.options.smartIndent ? "smart" : "prev";
        else dir = dir ? "add" : "subtract";
      }
      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);
    }),
    indentSelection: methodOp(function(how) {
      var ranges = this.doc.sel.ranges, end = -1;
      for (var i = 0; i < ranges.length; i++) {
        var range = ranges[i];
        if (!range.empty()) {
          var from = range.from(), to = range.to();
          var start = Math.max(end, from.line);
          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
          for (var j = start; j < end; ++j)
            indentLine(this, j, how);
          var newRanges = this.doc.sel.ranges;
          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)
            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
        } else if (range.head.line > end) {
          indentLine(this, range.head.line, how, true);
          end = range.head.line;
          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);
        }
      }
    }),

    // Fetch the parser token for a given character. Useful for hacks
    // that want to inspect the mode state (say, for completion).
    getTokenAt: function(pos, precise) {
      return takeToken(this, pos, precise);
    },

    getLineTokens: function(line, precise) {
      return takeToken(this, Pos(line), precise, true);
    },

    getTokenTypeAt: function(pos) {
      pos = clipPos(this.doc, pos);
      var styles = getLineStyles(this, getLine(this.doc, pos.line));
      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
      var type;
      if (ch == 0) type = styles[2];
      else for (;;) {
        var mid = (before + after) >> 1;
        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;
        else if (styles[mid * 2 + 1] < ch) before = mid + 1;
        else { type = styles[mid * 2 + 2]; break; }
      }
      var cut = type ? type.indexOf("cm-overlay ") : -1;
      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
    },

    getModeAt: function(pos) {
      var mode = this.doc.mode;
      if (!mode.innerMode) return mode;
      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;
    },

    getHelper: function(pos, type) {
      return this.getHelpers(pos, type)[0];
    },

    getHelpers: function(pos, type) {
      var found = [];
      if (!helpers.hasOwnProperty(type)) return found;
      var help = helpers[type], mode = this.getModeAt(pos);
      if (typeof mode[type] == "string") {
        if (help[mode[type]]) found.push(help[mode[type]]);
      } else if (mode[type]) {
        for (var i = 0; i < mode[type].length; i++) {
          var val = help[mode[type][i]];
          if (val) found.push(val);
        }
      } else if (mode.helperType && help[mode.helperType]) {
        found.push(help[mode.helperType]);
      } else if (help[mode.name]) {
        found.push(help[mode.name]);
      }
      for (var i = 0; i < help._global.length; i++) {
        var cur = help._global[i];
        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)
          found.push(cur.val);
      }
      return found;
    },

    getStateAfter: function(line, precise) {
      var doc = this.doc;
      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);
      return getStateBefore(this, line + 1, precise);
    },

    cursorCoords: function(start, mode) {
      var pos, range = this.doc.sel.primary();
      if (start == null) pos = range.head;
      else if (typeof start == "object") pos = clipPos(this.doc, start);
      else pos = start ? range.from() : range.to();
      return cursorCoords(this, pos, mode || "page");
    },

    charCoords: function(pos, mode) {
      return charCoords(this, clipPos(this.doc, pos), mode || "page");
    },

    coordsChar: function(coords, mode) {
      coords = fromCoordSystem(this, coords, mode || "page");
      return coordsChar(this, coords.left, coords.top);
    },

    lineAtHeight: function(height, mode) {
      height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
      return lineAtHeight(this.doc, height + this.display.viewOffset);
    },
    heightAtLine: function(line, mode) {
      var end = false, lineObj;
      if (typeof line == "number") {
        var last = this.doc.first + this.doc.size - 1;
        if (line < this.doc.first) line = this.doc.first;
        else if (line > last) { line = last; end = true; }
        lineObj = getLine(this.doc, line);
      } else {
        lineObj = line;
      }
      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page").top +
        (end ? this.doc.height - heightAtLine(lineObj) : 0);
    },

    defaultTextHeight: function() { return textHeight(this.display); },
    defaultCharWidth: function() { return charWidth(this.display); },

    setGutterMarker: methodOp(function(line, gutterID, value) {
      return changeLine(this.doc, line, "gutter", function(line) {
        var markers = line.gutterMarkers || (line.gutterMarkers = {});
        markers[gutterID] = value;
        if (!value && isEmpty(markers)) line.gutterMarkers = null;
        return true;
      });
    }),

    clearGutter: methodOp(function(gutterID) {
      var cm = this, doc = cm.doc, i = doc.first;
      doc.iter(function(line) {
        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
          line.gutterMarkers[gutterID] = null;
          regLineChange(cm, i, "gutter");
          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;
        }
        ++i;
      });
    }),

    lineInfo: function(line) {
      if (typeof line == "number") {
        if (!isLine(this.doc, line)) return null;
        var n = line;
        line = getLine(this.doc, line);
        if (!line) return null;
      } else {
        var n = lineNo(line);
        if (n == null) return null;
      }
      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,
              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,
              widgets: line.widgets};
    },

    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},

    addWidget: function(pos, node, scroll, vert, horiz) {
      var display = this.display;
      pos = cursorCoords(this, clipPos(this.doc, pos));
      var top = pos.bottom, left = pos.left;
      node.style.position = "absolute";
      node.setAttribute("cm-ignore-events", "true");
      this.display.input.setUneditable(node);
      display.sizer.appendChild(node);
      if (vert == "over") {
        top = pos.top;
      } else if (vert == "above" || vert == "near") {
        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),
        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
        // Default to positioning above (if specified and possible); otherwise default to positioning below
        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)
          top = pos.top - node.offsetHeight;
        else if (pos.bottom + node.offsetHeight <= vspace)
          top = pos.bottom;
        if (left + node.offsetWidth > hspace)
          left = hspace - node.offsetWidth;
      }
      node.style.top = top + "px";
      node.style.left = node.style.right = "";
      if (horiz == "right") {
        left = display.sizer.clientWidth - node.offsetWidth;
        node.style.right = "0px";
      } else {
        if (horiz == "left") left = 0;
        else if (horiz == "middle") left = (display.sizer.clientWidth - node.offsetWidth) / 2;
        node.style.left = left + "px";
      }
      if (scroll)
        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
    },

    triggerOnKeyDown: methodOp(onKeyDown),
    triggerOnKeyPress: methodOp(onKeyPress),
    triggerOnKeyUp: onKeyUp,

    execCommand: function(cmd) {
      if (commands.hasOwnProperty(cmd))
        return commands[cmd](this);
    },

    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),

    findPosH: function(from, amount, unit, visually) {
      var dir = 1;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        cur = findPosH(this.doc, cur, dir, unit, visually);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveH: methodOp(function(dir, unit) {
      var cm = this;
      cm.extendSelectionsBy(function(range) {
        if (cm.display.shift || cm.doc.extend || range.empty())
          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);
        else
          return dir < 0 ? range.from() : range.to();
      }, sel_move);
    }),

    deleteH: methodOp(function(dir, unit) {
      var sel = this.doc.sel, doc = this.doc;
      if (sel.somethingSelected())
        doc.replaceSelection("", null, "+delete");
      else
        deleteNearSelection(this, function(range) {
          var other = findPosH(doc, range.head, dir, unit, false);
          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};
        });
    }),

    findPosV: function(from, amount, unit, goalColumn) {
      var dir = 1, x = goalColumn;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        var coords = cursorCoords(this, cur, "div");
        if (x == null) x = coords.left;
        else coords.left = x;
        cur = findPosV(this, coords, dir, unit);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveV: methodOp(function(dir, unit) {
      var cm = this, doc = this.doc, goals = [];
      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
      doc.extendSelectionsBy(function(range) {
        if (collapse)
          return dir < 0 ? range.from() : range.to();
        var headPos = cursorCoords(cm, range.head, "div");
        if (range.goalColumn != null) headPos.left = range.goalColumn;
        goals.push(headPos.left);
        var pos = findPosV(cm, headPos, dir, unit);
        if (unit == "page" && range == doc.sel.primary())
          addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top);
        return pos;
      }, sel_move);
      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)
        doc.sel.ranges[i].goalColumn = goals[i];
    }),

    // Find the word at the given position (as returned by coordsChar).
    findWordAt: function(pos) {
      var doc = this.doc, line = getLine(doc, pos.line).text;
      var start = pos.ch, end = pos.ch;
      if (line) {
        var helper = this.getHelper(pos, "wordChars");
        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;
        var startChar = line.charAt(start);
        var check = isWordChar(startChar, helper)
          ? function(ch) { return isWordChar(ch, helper); }
          : /\s/.test(startChar) ? function(ch) {return /\s/.test(ch);}
          : function(ch) {return !/\s/.test(ch) && !isWordChar(ch);};
        while (start > 0 && check(line.charAt(start - 1))) --start;
        while (end < line.length && check(line.charAt(end))) ++end;
      }
      return new Range(Pos(pos.line, start), Pos(pos.line, end));
    },

    toggleOverwrite: function(value) {
      if (value != null && value == this.state.overwrite) return;
      if (this.state.overwrite = !this.state.overwrite)
        addClass(this.display.cursorDiv, "CodeMirror-overwrite");
      else
        rmClass(this.display.cursorDiv, "CodeMirror-overwrite");

      signal(this, "overwriteToggle", this, this.state.overwrite);
    },
    hasFocus: function() { return this.display.input.getField() == activeElt(); },

    scrollTo: methodOp(function(x, y) {
      if (x != null || y != null) resolveScrollToPos(this);
      if (x != null) this.curOp.scrollLeft = x;
      if (y != null) this.curOp.scrollTop = y;
    }),
    getScrollInfo: function() {
      var scroller = this.display.scroller;
      return {left: scroller.scrollLeft, top: scroller.scrollTop,
              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
              clientHeight: displayHeight(this), clientWidth: displayWidth(this)};
    },

    scrollIntoView: methodOp(function(range, margin) {
      if (range == null) {
        range = {from: this.doc.sel.primary().head, to: null};
        if (margin == null) margin = this.options.cursorScrollMargin;
      } else if (typeof range == "number") {
        range = {from: Pos(range, 0), to: null};
      } else if (range.from == null) {
        range = {from: range, to: null};
      }
      if (!range.to) range.to = range.from;
      range.margin = margin || 0;

      if (range.from.line != null) {
        resolveScrollToPos(this);
        this.curOp.scrollToPos = range;
      } else {
        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),
                                      Math.min(range.from.top, range.to.top) - range.margin,
                                      Math.max(range.from.right, range.to.right),
                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);
        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
      }
    }),

    setSize: methodOp(function(width, height) {
      var cm = this;
      function interpret(val) {
        return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
      }
      if (width != null) cm.display.wrapper.style.width = interpret(width);
      if (height != null) cm.display.wrapper.style.height = interpret(height);
      if (cm.options.lineWrapping) clearLineMeasurementCache(this);
      var lineNo = cm.display.viewFrom;
      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)
          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, "widget"); break; }
        ++lineNo;
      });
      cm.curOp.forceUpdate = true;
      signal(cm, "refresh", this);
    }),

    operation: function(f){return runInOp(this, f);},

    refresh: methodOp(function() {
      var oldHeight = this.display.cachedTextHeight;
      regChange(this);
      this.curOp.forceUpdate = true;
      clearCaches(this);
      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);
      updateGutterSpace(this);
      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)
        estimateLineHeights(this);
      signal(this, "refresh", this);
    }),

    swapDoc: methodOp(function(doc) {
      var old = this.doc;
      old.cm = null;
      attachDoc(this, doc);
      clearCaches(this);
      this.display.input.reset();
      this.scrollTo(doc.scrollLeft, doc.scrollTop);
      this.curOp.forceScroll = true;
      signalLater(this, "swapDoc", this, old);
      return old;
    }),

    getInputField: function(){return this.display.input.getField();},
    getWrapperElement: function(){return this.display.wrapper;},
    getScrollerElement: function(){return this.display.scroller;},
    getGutterElement: function(){return this.display.gutters;}
  };
  eventMixin(CodeMirror);

  // OPTION DEFAULTS

  // The default configuration options.
  var defaults = CodeMirror.defaults = {};
  // Functions to run when options are changed.
  var optionHandlers = CodeMirror.optionHandlers = {};

  function option(name, deflt, handle, notOnInit) {
    CodeMirror.defaults[name] = deflt;
    if (handle) optionHandlers[name] =
      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;
  }

  // Passed to option handlers when there is no old value.
  var Init = CodeMirror.Init = {toString: function(){return "CodeMirror.Init";}};

  // These two are, on init, called from the constructor because they
  // have to be initialized before the editor can start at all.
  option("value", "", function(cm, val) {
    cm.setValue(val);
  }, true);
  option("mode", null, function(cm, val) {
    cm.doc.modeOption = val;
    loadMode(cm);
  }, true);

  option("indentUnit", 2, loadMode, true);
  option("indentWithTabs", false);
  option("smartIndent", true);
  option("tabSize", 4, function(cm) {
    resetModeState(cm);
    clearCaches(cm);
    regChange(cm);
  }, true);
  option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val, old) {
    cm.state.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g");
    if (old != CodeMirror.Init) cm.refresh();
  });
  option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);
  option("electricChars", true);
  option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
    throw new Error("inputStyle can not (yet) be changed in a running editor"); // FIXME
  }, true);
  option("rtlMoveVisually", !windows);
  option("wholeLineUpdateBefore", true);

  option("theme", "default", function(cm) {
    themeChanged(cm);
    guttersChanged(cm);
  }, true);
  option("keyMap", "default", function(cm, val, old) {
    var next = getKeyMap(val);
    var prev = old != CodeMirror.Init && getKeyMap(old);
    if (prev && prev.detach) prev.detach(cm, next);
    if (next.attach) next.attach(cm, prev || null);
  });
  option("extraKeys", null);

  option("lineWrapping", false, wrappingChanged, true);
  option("gutters", [], function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("fixedGutter", true, function(cm, val) {
    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
    cm.refresh();
  }, true);
  option("coverGutterNextToScrollbar", false, function(cm) {updateScrollbars(cm);}, true);
  option("scrollbarStyle", "native", function(cm) {
    initScrollbars(cm);
    updateScrollbars(cm);
    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
  }, true);
  option("lineNumbers", false, function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("firstLineNumber", 1, guttersChanged, true);
  option("lineNumberFormatter", function(integer) {return integer;}, guttersChanged, true);
  option("showCursorWhenSelecting", false, updateSelection, true);

  option("resetSelectionOnContextMenu", true);
  option("lineWiseCopyCut", true);

  option("readOnly", false, function(cm, val) {
    if (val == "nocursor") {
      onBlur(cm);
      cm.display.input.blur();
      cm.display.disabled = true;
    } else {
      cm.display.disabled = false;
      if (!val) cm.display.input.reset();
    }
  });
  option("disableInput", false, function(cm, val) {if (!val) cm.display.input.reset();}, true);
  option("dragDrop", true, dragDropChanged);

  option("cursorBlinkRate", 530);
  option("cursorScrollMargin", 0);
  option("cursorHeight", 1, updateSelection, true);
  option("singleCursorHeightPerLine", true, updateSelection, true);
  option("workTime", 100);
  option("workDelay", 100);
  option("flattenSpans", true, resetModeState, true);
  option("addModeClass", false, resetModeState, true);
  option("pollInterval", 100);
  option("undoDepth", 200, function(cm, val){cm.doc.history.undoDepth = val;});
  option("historyEventDelay", 1250);
  option("viewportMargin", 10, function(cm){cm.refresh();}, true);
  option("maxHighlightLength", 10000, resetModeState, true);
  option("moveInputWithCursor", true, function(cm, val) {
    if (!val) cm.display.input.resetPosition();
  });

  option("tabindex", null, function(cm, val) {
    cm.display.input.getField().tabIndex = val || "";
  });
  option("autofocus", null);

  // MODE DEFINITION AND QUERYING

  // Known modes, by name and by MIME
  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};

  // Extra arguments are stored as the mode's dependencies, which is
  // used by (legacy) mechanisms like loadmode.js to automatically
  // load a mode. (Preferred mechanism is the require/define calls.)
  CodeMirror.defineMode = function(name, mode) {
    if (!CodeMirror.defaults.mode && name != "null") CodeMirror.defaults.mode = name;
    if (arguments.length > 2)
      mode.dependencies = Array.prototype.slice.call(arguments, 2);
    modes[name] = mode;
  };

  CodeMirror.defineMIME = function(mime, spec) {
    mimeModes[mime] = spec;
  };

  // Given a MIME type, a {name, ...options} config object, or a name
  // string, return a mode config object.
  CodeMirror.resolveMode = function(spec) {
    if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
      spec = mimeModes[spec];
    } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
      var found = mimeModes[spec.name];
      if (typeof found == "string") found = {name: found};
      spec = createObj(found, spec);
      spec.name = found.name;
    } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
      return CodeMirror.resolveMode("application/xml");
    }
    if (typeof spec == "string") return {name: spec};
    else return spec || {name: "null"};
  };

  // Given a mode spec (anything that resolveMode accepts), find and
  // initialize an actual mode object.
  CodeMirror.getMode = function(options, spec) {
    var spec = CodeMirror.resolveMode(spec);
    var mfactory = modes[spec.name];
    if (!mfactory) return CodeMirror.getMode(options, "text/plain");
    var modeObj = mfactory(options, spec);
    if (modeExtensions.hasOwnProperty(spec.name)) {
      var exts = modeExtensions[spec.name];
      for (var prop in exts) {
        if (!exts.hasOwnProperty(prop)) continue;
        if (modeObj.hasOwnProperty(prop)) modeObj["_" + prop] = modeObj[prop];
        modeObj[prop] = exts[prop];
      }
    }
    modeObj.name = spec.name;
    if (spec.helperType) modeObj.helperType = spec.helperType;
    if (spec.modeProps) for (var prop in spec.modeProps)
      modeObj[prop] = spec.modeProps[prop];

    return modeObj;
  };

  // Minimal default mode.
  CodeMirror.defineMode("null", function() {
    return {token: function(stream) {stream.skipToEnd();}};
  });
  CodeMirror.defineMIME("text/plain", "null");

  // This can be used to attach properties to mode objects from
  // outside the actual mode definition.
  var modeExtensions = CodeMirror.modeExtensions = {};
  CodeMirror.extendMode = function(mode, properties) {
    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});
    copyObj(properties, exts);
  };

  // EXTENSIONS

  CodeMirror.defineExtension = function(name, func) {
    CodeMirror.prototype[name] = func;
  };
  CodeMirror.defineDocExtension = function(name, func) {
    Doc.prototype[name] = func;
  };
  CodeMirror.defineOption = option;

  var initHooks = [];
  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};

  var helpers = CodeMirror.helpers = {};
  CodeMirror.registerHelper = function(type, name, value) {
    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};
    helpers[type][name] = value;
  };
  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
    CodeMirror.registerHelper(type, name, value);
    helpers[type]._global.push({pred: predicate, val: value});
  };

  // MODE STATE HANDLING

  // Utility functions for working with state. Exported because nested
  // modes need to do this for their inner modes.

  var copyState = CodeMirror.copyState = function(mode, state) {
    if (state === true) return state;
    if (mode.copyState) return mode.copyState(state);
    var nstate = {};
    for (var n in state) {
      var val = state[n];
      if (val instanceof Array) val = val.concat([]);
      nstate[n] = val;
    }
    return nstate;
  };

  var startState = CodeMirror.startState = function(mode, a1, a2) {
    return mode.startState ? mode.startState(a1, a2) : true;
  };

  // Given a mode and a state (for that mode), find the inner mode and
  // state at the position that the state refers to.
  CodeMirror.innerMode = function(mode, state) {
    while (mode.innerMode) {
      var info = mode.innerMode(state);
      if (!info || info.mode == mode) break;
      state = info.state;
      mode = info.mode;
    }
    return info || {mode: mode, state: state};
  };

  // STANDARD COMMANDS

  // Commands are parameter-less actions that can be performed on an
  // editor, mostly used for keybindings.
  var commands = CodeMirror.commands = {
    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},
    singleSelection: function(cm) {
      cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
    },
    killLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        if (range.empty()) {
          var len = getLine(cm.doc, range.head.line).text.length;
          if (range.head.ch == len && range.head.line < cm.lastLine())
            return {from: range.head, to: Pos(range.head.line + 1, 0)};
          else
            return {from: range.head, to: Pos(range.head.line, len)};
        } else {
          return {from: range.from(), to: range.to()};
        }
      });
    },
    deleteLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0),
                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};
      });
    },
    delLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0), to: range.from()};
      });
    },
    delWrappedLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var leftPos = cm.coordsChar({left: 0, top: top}, "div");
        return {from: leftPos, to: range.from()};
      });
    },
    delWrappedLineRight: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
        return {from: range.from(), to: rightPos };
      });
    },
    undo: function(cm) {cm.undo();},
    redo: function(cm) {cm.redo();},
    undoSelection: function(cm) {cm.undoSelection();},
    redoSelection: function(cm) {cm.redoSelection();},
    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},
    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},
    goLineStart: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },
                            {origin: "+move", bias: 1});
    },
    goLineStartSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        return lineStartSmart(cm, range.head);
      }, {origin: "+move", bias: 1});
    },
    goLineEnd: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },
                            {origin: "+move", bias: -1});
    },
    goLineRight: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
      }, sel_move);
    },
    goLineLeft: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: 0, top: top}, "div");
      }, sel_move);
    },
    goLineLeftSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var pos = cm.coordsChar({left: 0, top: top}, "div");
        if (pos.ch < cm.getLine(pos.line).search(/\S/)) return lineStartSmart(cm, range.head);
        return pos;
      }, sel_move);
    },
    goLineUp: function(cm) {cm.moveV(-1, "line");},
    goLineDown: function(cm) {cm.moveV(1, "line");},
    goPageUp: function(cm) {cm.moveV(-1, "page");},
    goPageDown: function(cm) {cm.moveV(1, "page");},
    goCharLeft: function(cm) {cm.moveH(-1, "char");},
    goCharRight: function(cm) {cm.moveH(1, "char");},
    goColumnLeft: function(cm) {cm.moveH(-1, "column");},
    goColumnRight: function(cm) {cm.moveH(1, "column");},
    goWordLeft: function(cm) {cm.moveH(-1, "word");},
    goGroupRight: function(cm) {cm.moveH(1, "group");},
    goGroupLeft: function(cm) {cm.moveH(-1, "group");},
    goWordRight: function(cm) {cm.moveH(1, "word");},
    delCharBefore: function(cm) {cm.deleteH(-1, "char");},
    delCharAfter: function(cm) {cm.deleteH(1, "char");},
    delWordBefore: function(cm) {cm.deleteH(-1, "word");},
    delWordAfter: function(cm) {cm.deleteH(1, "word");},
    delGroupBefore: function(cm) {cm.deleteH(-1, "group");},
    delGroupAfter: function(cm) {cm.deleteH(1, "group");},
    indentAuto: function(cm) {cm.indentSelection("smart");},
    indentMore: function(cm) {cm.indentSelection("add");},
    indentLess: function(cm) {cm.indentSelection("subtract");},
    insertTab: function(cm) {cm.replaceSelection("\t");},
    insertSoftTab: function(cm) {
      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
      for (var i = 0; i < ranges.length; i++) {
        var pos = ranges[i].from();
        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
        spaces.push(new Array(tabSize - col % tabSize + 1).join(" "));
      }
      cm.replaceSelections(spaces);
    },
    defaultTab: function(cm) {
      if (cm.somethingSelected()) cm.indentSelection("add");
      else cm.execCommand("insertTab");
    },
    transposeChars: function(cm) {
      runInOp(cm, function() {
        var ranges = cm.listSelections(), newSel = [];
        for (var i = 0; i < ranges.length; i++) {
          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
          if (line) {
            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);
            if (cur.ch > 0) {
              cur = new Pos(cur.line, cur.ch + 1);
              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                              Pos(cur.line, cur.ch - 2), cur, "+transpose");
            } else if (cur.line > cm.doc.first) {
              var prev = getLine(cm.doc, cur.line - 1).text;
              if (prev)
                cm.replaceRange(line.charAt(0) + "\n" + prev.charAt(prev.length - 1),
                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
            }
          }
          newSel.push(new Range(cur, cur));
        }
        cm.setSelections(newSel);
      });
    },
    newlineAndIndent: function(cm) {
      runInOp(cm, function() {
        var len = cm.listSelections().length;
        for (var i = 0; i < len; i++) {
          var range = cm.listSelections()[i];
          cm.replaceRange("\n", range.anchor, range.head, "+input");
          cm.indentLine(range.from().line + 1, null, true);
          ensureCursorVisible(cm);
        }
      });
    },
    toggleOverwrite: function(cm) {cm.toggleOverwrite();}
  };


  // STANDARD KEYMAPS

  var keyMap = CodeMirror.keyMap = {};

  keyMap.basic = {
    "Left": "goCharLeft", "Right": "goCharRight", "Up": "goLineUp", "Down": "goLineDown",
    "End": "goLineEnd", "Home": "goLineStartSmart", "PageUp": "goPageUp", "PageDown": "goPageDown",
    "Delete": "delCharAfter", "Backspace": "delCharBefore", "Shift-Backspace": "delCharBefore",
    "Tab": "defaultTab", "Shift-Tab": "indentAuto",
    "Enter": "newlineAndIndent", "Insert": "toggleOverwrite",
    "Esc": "singleSelection"
  };
  // Note that the save and find-related commands aren't defined by
  // default. User code or addons can define them. Unknown commands
  // are simply ignored.
  keyMap.pcDefault = {
    "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo",
    "Ctrl-Home": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Up": "goLineUp", "Ctrl-Down": "goLineDown",
    "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd",
    "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find",
    "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll",
    "Ctrl-[": "indentLess", "Ctrl-]": "indentMore",
    "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection",
    fallthrough: "basic"
  };
  // Very basic readline/emacs-style bindings, which are standard on Mac.
  keyMap.emacsy = {
    "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown",
    "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd",
    "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore",
    "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars"
  };
  keyMap.macDefault = {
    "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo",
    "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft",
    "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore",
    "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find",
    "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll",
    "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight",
    "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection", "Ctrl-Up": "goDocStart", "Ctrl-Down": "goDocEnd",
    fallthrough: ["basic", "emacsy"]
  };
  keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;

  // KEYMAP DISPATCH

  function normalizeKeyName(name) {
    var parts = name.split(/-(?!$)/), name = parts[parts.length - 1];
    var alt, ctrl, shift, cmd;
    for (var i = 0; i < parts.length - 1; i++) {
      var mod = parts[i];
      if (/^(cmd|meta|m)$/i.test(mod)) cmd = true;
      else if (/^a(lt)?$/i.test(mod)) alt = true;
      else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;
      else if (/^s(hift)$/i.test(mod)) shift = true;
      else throw new Error("Unrecognized modifier name: " + mod);
    }
    if (alt) name = "Alt-" + name;
    if (ctrl) name = "Ctrl-" + name;
    if (cmd) name = "Cmd-" + name;
    if (shift) name = "Shift-" + name;
    return name;
  }

  // This is a kludge to keep keymaps mostly working as raw objects
  // (backwards compatibility) while at the same time support features
  // like normalization and multi-stroke key bindings. It compiles a
  // new normalized keymap, and then updates the old object to reflect
  // this.
  CodeMirror.normalizeKeyMap = function(keymap) {
    var copy = {};
    for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {
      var value = keymap[keyname];
      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;
      if (value == "...") { delete keymap[keyname]; continue; }

      var keys = map(keyname.split(" "), normalizeKeyName);
      for (var i = 0; i < keys.length; i++) {
        var val, name;
        if (i == keys.length - 1) {
          name = keys.join(" ");
          val = value;
        } else {
          name = keys.slice(0, i + 1).join(" ");
          val = "...";
        }
        var prev = copy[name];
        if (!prev) copy[name] = val;
        else if (prev != val) throw new Error("Inconsistent bindings for " + name);
      }
      delete keymap[keyname];
    }
    for (var prop in copy) keymap[prop] = copy[prop];
    return keymap;
  };

  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {
    map = getKeyMap(map);
    var found = map.call ? map.call(key, context) : map[key];
    if (found === false) return "nothing";
    if (found === "...") return "multi";
    if (found != null && handle(found)) return "handled";

    if (map.fallthrough) {
      if (Object.prototype.toString.call(map.fallthrough) != "[object Array]")
        return lookupKey(key, map.fallthrough, handle, context);
      for (var i = 0; i < map.fallthrough.length; i++) {
        var result = lookupKey(key, map.fallthrough[i], handle, context);
        if (result) return result;
      }
    }
  };

  // Modifier key presses don't count as 'real' key presses for the
  // purpose of keymap fallthrough.
  var isModifierKey = CodeMirror.isModifierKey = function(value) {
    var name = typeof value == "string" ? value : keyNames[value.keyCode];
    return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
  };

  // Look up the name of a key as indicated by an event object.
  var keyName = CodeMirror.keyName = function(event, noShift) {
    if (presto && event.keyCode == 34 && event["char"]) return false;
    var base = keyNames[event.keyCode], name = base;
    if (name == null || event.altGraphKey) return false;
    if (event.altKey && base != "Alt") name = "Alt-" + name;
    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") name = "Ctrl-" + name;
    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Cmd") name = "Cmd-" + name;
    if (!noShift && event.shiftKey && base != "Shift") name = "Shift-" + name;
    return name;
  };

  function getKeyMap(val) {
    return typeof val == "string" ? keyMap[val] : val;
  }

  // FROMTEXTAREA

  CodeMirror.fromTextArea = function(textarea, options) {
    options = options ? copyObj(options) : {};
    options.value = textarea.value;
    if (!options.tabindex && textarea.tabIndex)
      options.tabindex = textarea.tabIndex;
    if (!options.placeholder && textarea.placeholder)
      options.placeholder = textarea.placeholder;
    // Set autofocus to true if this textarea is focused, or if it has
    // autofocus and no other element is focused.
    if (options.autofocus == null) {
      var hasFocus = activeElt();
      options.autofocus = hasFocus == textarea ||
        textarea.getAttribute("autofocus") != null && hasFocus == document.body;
    }

    function save() {textarea.value = cm.getValue();}
    if (textarea.form) {
      on(textarea.form, "submit", save);
      // Deplorable hack to make the submit method do the right thing.
      if (!options.leaveSubmitMethodAlone) {
        var form = textarea.form, realSubmit = form.submit;
        try {
          var wrappedSubmit = form.submit = function() {
            save();
            form.submit = realSubmit;
            form.submit();
            form.submit = wrappedSubmit;
          };
        } catch(e) {}
      }
    }

    options.finishInit = function(cm) {
      cm.save = save;
      cm.getTextArea = function() { return textarea; };
      cm.toTextArea = function() {
        cm.toTextArea = isNaN; // Prevent this from being ran twice
        save();
        textarea.parentNode.removeChild(cm.getWrapperElement());
        textarea.style.display = "";
        if (textarea.form) {
          off(textarea.form, "submit", save);
          if (typeof textarea.form.submit == "function")
            textarea.form.submit = realSubmit;
        }
      };
    };

    textarea.style.display = "none";
    var cm = CodeMirror(function(node) {
      textarea.parentNode.insertBefore(node, textarea.nextSibling);
    }, options);
    return cm;
  };

  // STRING STREAM

  // Fed to the mode parsers, provides helper functions to make
  // parsers more succinct.

  var StringStream = CodeMirror.StringStream = function(string, tabSize) {
    this.pos = this.start = 0;
    this.string = string;
    this.tabSize = tabSize || 8;
    this.lastColumnPos = this.lastColumnValue = 0;
    this.lineStart = 0;
  };

  StringStream.prototype = {
    eol: function() {return this.pos >= this.string.length;},
    sol: function() {return this.pos == this.lineStart;},
    peek: function() {return this.string.charAt(this.pos) || undefined;},
    next: function() {
      if (this.pos < this.string.length)
        return this.string.charAt(this.pos++);
    },
    eat: function(match) {
      var ch = this.string.charAt(this.pos);
      if (typeof match == "string") var ok = ch == match;
      else var ok = ch && (match.test ? match.test(ch) : match(ch));
      if (ok) {++this.pos; return ch;}
    },
    eatWhile: function(match) {
      var start = this.pos;
      while (this.eat(match)){}
      return this.pos > start;
    },
    eatSpace: function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;
      return this.pos > start;
    },
    skipToEnd: function() {this.pos = this.string.length;},
    skipTo: function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {this.pos = found; return true;}
    },
    backUp: function(n) {this.pos -= n;},
    column: function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    indentation: function() {
      return countColumn(this.string, null, this.tabSize) -
        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    match: function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) this.pos += pattern.length;
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) return null;
        if (match && consume !== false) this.pos += match[0].length;
        return match;
      }
    },
    current: function(){return this.string.slice(this.start, this.pos);},
    hideFirstChars: function(n, inner) {
      this.lineStart += n;
      try { return inner(); }
      finally { this.lineStart -= n; }
    }
  };

  // TEXTMARKERS

  // Created with markText and setBookmark methods. A TextMarker is a
  // handle that can be used to clear or find a marked position in the
  // document. Line objects hold arrays (markedSpans) containing
  // {from, to, marker} object pointing to such marker objects, and
  // indicating that such a marker is present on that line. Multiple
  // lines may point to the same marker when it spans across lines.
  // The spans will have null for their from/to properties when the
  // marker continues beyond the start/end of the line. Markers have
  // links back to the lines they currently touch.

  var nextMarkerId = 0;

  var TextMarker = CodeMirror.TextMarker = function(doc, type) {
    this.lines = [];
    this.type = type;
    this.doc = doc;
    this.id = ++nextMarkerId;
  };
  eventMixin(TextMarker);

  // Clear the marker.
  TextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    var cm = this.doc.cm, withOp = cm && !cm.curOp;
    if (withOp) startOperation(cm);
    if (hasHandler(this, "clear")) {
      var found = this.find();
      if (found) signalLater(this, "clear", found.from, found.to);
    }
    var min = null, max = null;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), "text");
      else if (cm) {
        if (span.to != null) max = lineNo(line);
        if (span.from != null) min = lineNo(line);
      }
      line.markedSpans = removeMarkedSpan(line.markedSpans, span);
      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)
        updateLineHeight(line, textHeight(cm.display));
    }
    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {
      var visual = visualLine(this.lines[i]), len = lineLength(visual);
      if (len > cm.display.maxLineLength) {
        cm.display.maxLine = visual;
        cm.display.maxLineLength = len;
        cm.display.maxLineChanged = true;
      }
    }

    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);
    this.lines.length = 0;
    this.explicitlyCleared = true;
    if (this.atomic && this.doc.cantEdit) {
      this.doc.cantEdit = false;
      if (cm) reCheckSelection(cm.doc);
    }
    if (cm) signalLater(cm, "markerCleared", cm, this);
    if (withOp) endOperation(cm);
    if (this.parent) this.parent.clear();
  };

  // Find the position of the marker in the document. Returns a {from,
  // to} object by default. Side can be passed to get a specific side
  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the
  // Pos objects returned contain a line object, rather than a line
  // number (used to prevent looking up the same line twice).
  TextMarker.prototype.find = function(side, lineObj) {
    if (side == null && this.type == "bookmark") side = 1;
    var from, to;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (span.from != null) {
        from = Pos(lineObj ? line : lineNo(line), span.from);
        if (side == -1) return from;
      }
      if (span.to != null) {
        to = Pos(lineObj ? line : lineNo(line), span.to);
        if (side == 1) return to;
      }
    }
    return from && {from: from, to: to};
  };

  // Signals that the marker's widget changed, and surrounding layout
  // should be recomputed.
  TextMarker.prototype.changed = function() {
    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
    if (!pos || !cm) return;
    runInOp(cm, function() {
      var line = pos.line, lineN = lineNo(pos.line);
      var view = findViewForLine(cm, lineN);
      if (view) {
        clearLineMeasurementCacheFor(view);
        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
      }
      cm.curOp.updateMaxLine = true;
      if (!lineIsHidden(widget.doc, line) && widget.height != null) {
        var oldHeight = widget.height;
        widget.height = null;
        var dHeight = widgetHeight(widget) - oldHeight;
        if (dHeight)
          updateLineHeight(line, line.height + dHeight);
      }
    });
  };

  TextMarker.prototype.attachLine = function(line) {
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)
        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(line);
  };
  TextMarker.prototype.detachLine = function(line) {
    this.lines.splice(indexOf(this.lines, line), 1);
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
    }
  };

  // Collapsed markers have unique ids, in order to be able to order
  // them, which is needed for uniquely determining an outer marker
  // when they overlap (they may nest, but not partially overlap).
  var nextMarkerId = 0;

  // Create a marker, wire it up to the right lines, and
  function markText(doc, from, to, options, type) {
    // Shared markers (across linked documents) are handled separately
    // (markTextShared will call out to this again, once per
    // document).
    if (options && options.shared) return markTextShared(doc, from, to, options, type);
    // Ensure we are in an operation.
    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);

    var marker = new TextMarker(doc, type), diff = cmp(from, to);
    if (options) copyObj(options, marker, false);
    // Don't connect empty markers unless clearWhenEmpty is false
    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)
      return marker;
    if (marker.replacedWith) {
      // Showing up as a widget implies collapsed (widget replaces text)
      marker.collapsed = true;
      marker.widgetNode = elt("span", [marker.replacedWith], "CodeMirror-widget");
      if (!options.handleMouseEvents) marker.widgetNode.setAttribute("cm-ignore-events", "true");
      if (options.insertLeft) marker.widgetNode.insertLeft = true;
    }
    if (marker.collapsed) {
      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||
          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))
        throw new Error("Inserting collapsed marker partially overlapping an existing one");
      sawCollapsedSpans = true;
    }

    if (marker.addToHistory)
      addChangeToHistory(doc, {from: from, to: to, origin: "markText"}, doc.sel, NaN);

    var curLine = from.line, cm = doc.cm, updateMaxLine;
    doc.iter(curLine, to.line + 1, function(line) {
      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)
        updateMaxLine = true;
      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);
      addMarkedSpan(line, new MarkedSpan(marker,
                                         curLine == from.line ? from.ch : null,
                                         curLine == to.line ? to.ch : null));
      ++curLine;
    });
    // lineIsHidden depends on the presence of the spans, so needs a second pass
    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {
      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);
    });

    if (marker.clearOnEnter) on(marker, "beforeCursorEnter", function() { marker.clear(); });

    if (marker.readOnly) {
      sawReadOnlySpans = true;
      if (doc.history.done.length || doc.history.undone.length)
        doc.clearHistory();
    }
    if (marker.collapsed) {
      marker.id = ++nextMarkerId;
      marker.atomic = true;
    }
    if (cm) {
      // Sync editor state
      if (updateMaxLine) cm.curOp.updateMaxLine = true;
      if (marker.collapsed)
        regChange(cm, from.line, to.line + 1);
      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)
        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
      if (marker.atomic) reCheckSelection(cm.doc);
      signalLater(cm, "markerAdded", cm, marker);
    }
    return marker;
  }

  // SHARED TEXTMARKERS

  // A shared marker spans multiple linked documents. It is
  // implemented as a meta-marker-object controlling multiple normal
  // markers.
  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
    this.markers = markers;
    this.primary = primary;
    for (var i = 0; i < markers.length; ++i)
      markers[i].parent = this;
  };
  eventMixin(SharedTextMarker);

  SharedTextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    this.explicitlyCleared = true;
    for (var i = 0; i < this.markers.length; ++i)
      this.markers[i].clear();
    signalLater(this, "clear");
  };
  SharedTextMarker.prototype.find = function(side, lineObj) {
    return this.primary.find(side, lineObj);
  };

  function markTextShared(doc, from, to, options, type) {
    options = copyObj(options);
    options.shared = false;
    var markers = [markText(doc, from, to, options, type)], primary = markers[0];
    var widget = options.widgetNode;
    linkedDocs(doc, function(doc) {
      if (widget) options.widgetNode = widget.cloneNode(true);
      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
      for (var i = 0; i < doc.linked.length; ++i)
        if (doc.linked[i].isParent) return;
      primary = lst(markers);
    });
    return new SharedTextMarker(markers, primary);
  }

  function findSharedMarkers(doc) {
    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),
                         function(m) { return m.parent; });
  }

  function copySharedMarkers(doc, markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], pos = marker.find();
      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
      if (cmp(mFrom, mTo)) {
        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
        marker.markers.push(subMark);
        subMark.parent = marker;
      }
    }
  }

  function detachSharedMarkers(markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], linked = [marker.primary.doc];;
      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });
      for (var j = 0; j < marker.markers.length; j++) {
        var subMarker = marker.markers[j];
        if (indexOf(linked, subMarker.doc) == -1) {
          subMarker.parent = null;
          marker.markers.splice(j--, 1);
        }
      }
    }
  }

  // TEXTMARKER SPANS

  function MarkedSpan(marker, from, to) {
    this.marker = marker;
    this.from = from; this.to = to;
  }

  // Search an array of spans for a span matching the given marker.
  function getMarkedSpanFor(spans, marker) {
    if (spans) for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.marker == marker) return span;
    }
  }
  // Remove a span from an array, returning undefined if no spans are
  // left (we don't store arrays for lines without spans).
  function removeMarkedSpan(spans, span) {
    for (var r, i = 0; i < spans.length; ++i)
      if (spans[i] != span) (r || (r = [])).push(spans[i]);
    return r;
  }
  // Add a span to a line.
  function addMarkedSpan(line, span) {
    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
    span.marker.attachLine(line);
  }

  // Used for the algorithm that adjusts markers for a change in the
  // document. These functions cut an array of spans at a given
  // character position, returning an array of remaining chunks (or
  // undefined if nothing remains).
  function markedSpansBefore(old, startCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
      if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
      }
    }
    return nw;
  }
  function markedSpansAfter(old, endCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
      if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,
                                              span.to == null ? null : span.to - endCh));
      }
    }
    return nw;
  }

  // Given a change object, compute the new set of marker spans that
  // cover the line in which the change took place. Removes spans
  // entirely within the change, reconnects spans belonging to the
  // same marker that appear on both sides of the change, and cuts off
  // spans partially within the change. Returns an array of span
  // arrays with one element for each line in (after) the change.
  function stretchSpansOverChange(doc, change) {
    if (change.full) return null;
    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
    if (!oldFirst && !oldLast) return null;

    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
    // Get the spans that 'stick out' on both sides
    var first = markedSpansBefore(oldFirst, startCh, isInsert);
    var last = markedSpansAfter(oldLast, endCh, isInsert);

    // Next, merge those two ends
    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
    if (first) {
      // Fix up .to properties of first
      for (var i = 0; i < first.length; ++i) {
        var span = first[i];
        if (span.to == null) {
          var found = getMarkedSpanFor(last, span.marker);
          if (!found) span.to = startCh;
          else if (sameLine) span.to = found.to == null ? null : found.to + offset;
        }
      }
    }
    if (last) {
      // Fix up .from in last (or move them into first in case of sameLine)
      for (var i = 0; i < last.length; ++i) {
        var span = last[i];
        if (span.to != null) span.to += offset;
        if (span.from == null) {
          var found = getMarkedSpanFor(first, span.marker);
          if (!found) {
            span.from = offset;
            if (sameLine) (first || (first = [])).push(span);
          }
        } else {
          span.from += offset;
          if (sameLine) (first || (first = [])).push(span);
        }
      }
    }
    // Make sure we didn't create any zero-length spans
    if (first) first = clearEmptySpans(first);
    if (last && last != first) last = clearEmptySpans(last);

    var newMarkers = [first];
    if (!sameLine) {
      // Fill gap with whole-line-spans
      var gap = change.text.length - 2, gapMarkers;
      if (gap > 0 && first)
        for (var i = 0; i < first.length; ++i)
          if (first[i].to == null)
            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
      for (var i = 0; i < gap; ++i)
        newMarkers.push(gapMarkers);
      newMarkers.push(last);
    }
    return newMarkers;
  }

  // Remove spans that are empty and don't have a clearWhenEmpty
  // option of false.
  function clearEmptySpans(spans) {
    for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)
        spans.splice(i--, 1);
    }
    if (!spans.length) return null;
    return spans;
  }

  // Used for un/re-doing changes from the history. Combines the
  // result of computing the existing spans with the set of spans that
  // existed in the history (so that deleting around a span and then
  // undoing brings back the span).
  function mergeOldSpans(doc, change) {
    var old = getOldSpans(doc, change);
    var stretched = stretchSpansOverChange(doc, change);
    if (!old) return stretched;
    if (!stretched) return old;

    for (var i = 0; i < old.length; ++i) {
      var oldCur = old[i], stretchCur = stretched[i];
      if (oldCur && stretchCur) {
        spans: for (var j = 0; j < stretchCur.length; ++j) {
          var span = stretchCur[j];
          for (var k = 0; k < oldCur.length; ++k)
            if (oldCur[k].marker == span.marker) continue spans;
          oldCur.push(span);
        }
      } else if (stretchCur) {
        old[i] = stretchCur;
      }
    }
    return old;
  }

  // Used to 'clip' out readOnly ranges when making a change.
  function removeReadOnlyRanges(doc, from, to) {
    var markers = null;
    doc.iter(from.line, to.line + 1, function(line) {
      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
        var mark = line.markedSpans[i].marker;
        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))
          (markers || (markers = [])).push(mark);
      }
    });
    if (!markers) return null;
    var parts = [{from: from, to: to}];
    for (var i = 0; i < markers.length; ++i) {
      var mk = markers[i], m = mk.find(0);
      for (var j = 0; j < parts.length; ++j) {
        var p = parts[j];
        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;
        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)
          newParts.push({from: p.from, to: m.from});
        if (dto > 0 || !mk.inclusiveRight && !dto)
          newParts.push({from: m.to, to: p.to});
        parts.splice.apply(parts, newParts);
        j += newParts.length - 1;
      }
    }
    return parts;
  }

  // Connect or disconnect spans from a line.
  function detachMarkedSpans(line) {
    var spans = line.markedSpans;
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.detachLine(line);
    line.markedSpans = null;
  }
  function attachMarkedSpans(line, spans) {
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.attachLine(line);
    line.markedSpans = spans;
  }

  // Helpers used when computing which overlapping collapsed span
  // counts as the larger one.
  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }
  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }

  // Returns a number indicating which of two overlapping collapsed
  // spans is larger (and thus includes the other). Falls back to
  // comparing ids when the spans cover exactly the same range.
  function compareCollapsedMarkers(a, b) {
    var lenDiff = a.lines.length - b.lines.length;
    if (lenDiff != 0) return lenDiff;
    var aPos = a.find(), bPos = b.find();
    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
    if (fromCmp) return -fromCmp;
    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
    if (toCmp) return toCmp;
    return b.id - a.id;
  }

  // Find out whether a line ends or starts in a collapsed span. If
  // so, return the marker for that span.
  function collapsedSpanAtSide(line, start) {
    var sps = sawCollapsedSpans && line.markedSpans, found;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&
          (!found || compareCollapsedMarkers(found, sp.marker) < 0))
        found = sp.marker;
    }
    return found;
  }
  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }
  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }

  // Test whether there exists a collapsed span that partially
  // overlaps (covers the start or end, but not both) of a new span.
  // Such overlap is not allowed.
  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
    var line = getLine(doc, lineNo);
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var i = 0; i < sps.length; ++i) {
      var sp = sps[i];
      if (!sp.marker.collapsed) continue;
      var found = sp.marker.find(0);
      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;
      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||
          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))
        return true;
    }
  }

  // A visual line is a line as drawn on the screen. Folding, for
  // example, can cause multiple logical lines to appear on the same
  // visual line. This finds the start of the visual line that the
  // given line is part of (usually that is the line itself).
  function visualLine(line) {
    var merged;
    while (merged = collapsedSpanAtStart(line))
      line = merged.find(-1, true).line;
    return line;
  }

  // Returns an array of logical lines that continue the visual line
  // started by the argument, or undefined if there are no such lines.
  function visualLineContinued(line) {
    var merged, lines;
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      (lines || (lines = [])).push(line);
    }
    return lines;
  }

  // Get the line number of the start of the visual line that the
  // given line number is part of.
  function visualLineNo(doc, lineN) {
    var line = getLine(doc, lineN), vis = visualLine(line);
    if (line == vis) return lineN;
    return lineNo(vis);
  }
  // Get the line number of the start of the next visual line after
  // the given line.
  function visualLineEndNo(doc, lineN) {
    if (lineN > doc.lastLine()) return lineN;
    var line = getLine(doc, lineN), merged;
    if (!lineIsHidden(doc, line)) return lineN;
    while (merged = collapsedSpanAtEnd(line))
      line = merged.find(1, true).line;
    return lineNo(line) + 1;
  }

  // Compute whether a line is hidden. Lines count as hidden when they
  // are part of a visual line that starts with another line, or when
  // they are entirely covered by collapsed, non-widget span.
  function lineIsHidden(doc, line) {
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (!sp.marker.collapsed) continue;
      if (sp.from == null) return true;
      if (sp.marker.widgetNode) continue;
      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))
        return true;
    }
  }
  function lineIsHiddenInner(doc, line, span) {
    if (span.to == null) {
      var end = span.marker.find(1, true);
      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
    }
    if (span.marker.inclusiveRight && span.to == line.text.length)
      return true;
    for (var sp, i = 0; i < line.markedSpans.length; ++i) {
      sp = line.markedSpans[i];
      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&
          (sp.to == null || sp.to != span.from) &&
          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&
          lineIsHiddenInner(doc, line, sp)) return true;
    }
  }

  // LINE WIDGETS

  // Line widgets are block elements displayed above or below a line.

  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {
    if (options) for (var opt in options) if (options.hasOwnProperty(opt))
      this[opt] = options[opt];
    this.doc = doc;
    this.node = node;
  };
  eventMixin(LineWidget);

  function adjustScrollWhenAboveVisible(cm, line, diff) {
    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))
      addToScrollPos(cm, null, diff);
  }

  LineWidget.prototype.clear = function() {
    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
    if (no == null || !ws) return;
    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);
    if (!ws.length) line.widgets = null;
    var height = widgetHeight(this);
    updateLineHeight(line, Math.max(0, line.height - height));
    if (cm) runInOp(cm, function() {
      adjustScrollWhenAboveVisible(cm, line, -height);
      regLineChange(cm, no, "widget");
    });
  };
  LineWidget.prototype.changed = function() {
    var oldH = this.height, cm = this.doc.cm, line = this.line;
    this.height = null;
    var diff = widgetHeight(this) - oldH;
    if (!diff) return;
    updateLineHeight(line, line.height + diff);
    if (cm) runInOp(cm, function() {
      cm.curOp.forceUpdate = true;
      adjustScrollWhenAboveVisible(cm, line, diff);
    });
  };

  function widgetHeight(widget) {
    if (widget.height != null) return widget.height;
    var cm = widget.doc.cm;
    if (!cm) return 0;
    if (!contains(document.body, widget.node)) {
      var parentStyle = "position: relative;";
      if (widget.coverGutter)
        parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
      if (widget.noHScroll)
        parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
      removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
    }
    return widget.height = widget.node.offsetHeight;
  }

  function addLineWidget(doc, handle, node, options) {
    var widget = new LineWidget(doc, node, options);
    var cm = doc.cm;
    if (cm && widget.noHScroll) cm.display.alignWidgets = true;
    changeLine(doc, handle, "widget", function(line) {
      var widgets = line.widgets || (line.widgets = []);
      if (widget.insertAt == null) widgets.push(widget);
      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
      widget.line = line;
      if (cm && !lineIsHidden(doc, line)) {
        var aboveVisible = heightAtLine(line) < doc.scrollTop;
        updateLineHeight(line, line.height + widgetHeight(widget));
        if (aboveVisible) addToScrollPos(cm, null, widget.height);
        cm.curOp.forceUpdate = true;
      }
      return true;
    });
    return widget;
  }

  // LINE DATA STRUCTURE

  // Line objects. These hold state related to a line, including
  // highlighting info (the styles array).
  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
    this.text = text;
    attachMarkedSpans(this, markedSpans);
    this.height = estimateHeight ? estimateHeight(this) : 1;
  };
  eventMixin(Line);
  Line.prototype.lineNo = function() { return lineNo(this); };

  // Change the content (text, markers) of a line. Automatically
  // invalidates cached information and tries to re-estimate the
  // line's height.
  function updateLine(line, text, markedSpans, estimateHeight) {
    line.text = text;
    if (line.stateAfter) line.stateAfter = null;
    if (line.styles) line.styles = null;
    if (line.order != null) line.order = null;
    detachMarkedSpans(line);
    attachMarkedSpans(line, markedSpans);
    var estHeight = estimateHeight ? estimateHeight(line) : 1;
    if (estHeight != line.height) updateLineHeight(line, estHeight);
  }

  // Detach a line from the document tree and its markers.
  function cleanUpLine(line) {
    line.parent = null;
    detachMarkedSpans(line);
  }

  function extractLineClasses(type, output) {
    if (type) for (;;) {
      var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!lineClass) break;
      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
      var prop = lineClass[1] ? "bgClass" : "textClass";
      if (output[prop] == null)
        output[prop] = lineClass[2];
      else if (!(new RegExp("(?:^|\s)" + lineClass[2] + "(?:$|\s)")).test(output[prop]))
        output[prop] += " " + lineClass[2];
    }
    return type;
  }

  function callBlankLine(mode, state) {
    if (mode.blankLine) return mode.blankLine(state);
    if (!mode.innerMode) return;
    var inner = CodeMirror.innerMode(mode, state);
    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);
  }

  function readToken(mode, stream, state, inner) {
    for (var i = 0; i < 10; i++) {
      if (inner) inner[0] = CodeMirror.innerMode(mode, state).mode;
      var style = mode.token(stream, state);
      if (stream.pos > stream.start) return style;
    }
    throw new Error("Mode " + mode.name + " failed to advance stream.");
  }

  // Utility for getTokenAt and getLineTokens
  function takeToken(cm, pos, precise, asArray) {
    function getObj(copy) {
      return {start: stream.start, end: stream.pos,
              string: stream.current(),
              type: style || null,
              state: copy ? copyState(doc.mode, state) : state};
    }

    var doc = cm.doc, mode = doc.mode, style;
    pos = clipPos(doc, pos);
    var line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise);
    var stream = new StringStream(line.text, cm.options.tabSize), tokens;
    if (asArray) tokens = [];
    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
      stream.start = stream.pos;
      style = readToken(mode, stream, state);
      if (asArray) tokens.push(getObj(true));
    }
    return asArray ? tokens : getObj();
  }

  // Run the given mode's parser over a line, calling f for each token.
  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
    var flattenSpans = mode.flattenSpans;
    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;
    var curStart = 0, curStyle = null;
    var stream = new StringStream(text, cm.options.tabSize), style;
    var inner = cm.options.addModeClass && [null];
    if (text == "") extractLineClasses(callBlankLine(mode, state), lineClasses);
    while (!stream.eol()) {
      if (stream.pos > cm.options.maxHighlightLength) {
        flattenSpans = false;
        if (forceToEnd) processLine(cm, text, state, stream.pos);
        stream.pos = text.length;
        style = null;
      } else {
        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);
      }
      if (inner) {
        var mName = inner[0].name;
        if (mName) style = "m-" + (style ? mName + " " + style : mName);
      }
      if (!flattenSpans || curStyle != style) {
        while (curStart < stream.start) {
          curStart = Math.min(stream.start, curStart + 50000);
          f(curStart, curStyle);
        }
        curStyle = style;
      }
      stream.start = stream.pos;
    }
    while (curStart < stream.pos) {
      // Webkit seems to refuse to render text nodes longer than 57444 characters
      var pos = Math.min(stream.pos, curStart + 50000);
      f(pos, curStyle);
      curStart = pos;
    }
  }

  // Compute a style array (an array starting with a mode generation
  // -- for invalidation -- followed by pairs of end positions and
  // style strings), which is used to highlight the tokens on the
  // line.
  function highlightLine(cm, line, state, forceToEnd) {
    // A styles array always starts with a number identifying the
    // mode/overlays that it is based on (for easy invalidation).
    var st = [cm.state.modeGen], lineClasses = {};
    // Compute the base array of styles
    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
      st.push(end, style);
    }, lineClasses, forceToEnd);

    // Run overlays, adjust style array.
    for (var o = 0; o < cm.state.overlays.length; ++o) {
      var overlay = cm.state.overlays[o], i = 1, at = 0;
      runMode(cm, line.text, overlay.mode, true, function(end, style) {
        var start = i;
        // Ensure there's a token end at the current position, and that i points at it
        while (at < end) {
          var i_end = st[i];
          if (i_end > end)
            st.splice(i, 1, end, st[i+1], i_end);
          i += 2;
          at = Math.min(end, i_end);
        }
        if (!style) return;
        if (overlay.opaque) {
          st.splice(start, i - start, end, "cm-overlay " + style);
          i = start + 2;
        } else {
          for (; start < i; start += 2) {
            var cur = st[start+1];
            st[start+1] = (cur ? cur + " " : "") + "cm-overlay " + style;
          }
        }
      }, lineClasses);
    }

    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
  }

  function getLineStyles(cm, line, updateFrontier) {
    if (!line.styles || line.styles[0] != cm.state.modeGen) {
      var result = highlightLine(cm, line, line.stateAfter = getStateBefore(cm, lineNo(line)));
      line.styles = result.styles;
      if (result.classes) line.styleClasses = result.classes;
      else if (line.styleClasses) line.styleClasses = null;
      if (updateFrontier === cm.doc.frontier) cm.doc.frontier++;
    }
    return line.styles;
  }

  // Lightweight form of highlight -- proceed over this line and
  // update state, but don't save a style array. Used for lines that
  // aren't currently visible.
  function processLine(cm, text, state, startAt) {
    var mode = cm.doc.mode;
    var stream = new StringStream(text, cm.options.tabSize);
    stream.start = stream.pos = startAt || 0;
    if (text == "") callBlankLine(mode, state);
    while (!stream.eol() && stream.pos <= cm.options.maxHighlightLength) {
      readToken(mode, stream, state);
      stream.start = stream.pos;
    }
  }

  // Convert a style as returned by a mode (either null, or a string
  // containing one or more styles) to a CSS style. This is cached,
  // and also looks for line-wide styles.
  var styleToClassCache = {}, styleToClassCacheWithMode = {};
  function interpretTokenStyle(style, options) {
    if (!style || /^\s*$/.test(style)) return null;
    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
    return cache[style] ||
      (cache[style] = style.replace(/\S+/g, "cm-$&"));
  }

  // Render the DOM representation of the text of a line. Also builds
  // up a 'line map', which points at the DOM nodes that represent
  // specific stretches of text, and is used by the measuring code.
  // The returned object contains the DOM node, this map, and
  // information about line-wide styles that were set by the mode.
  function buildLineContent(cm, lineView) {
    // The padding-right forces the element to have a 'border', which
    // is needed on Webkit to be able to get line-level bounding
    // rectangles for it (in measureChar).
    var content = elt("span", null, null, webkit ? "padding-right: .1px" : null);
    var builder = {pre: elt("pre", [content]), content: content,
                   col: 0, pos: 0, cm: cm,
                   splitSpaces: (ie || webkit) && cm.getOption("lineWrapping")};
    lineView.measure = {};

    // Iterate over the logical lines that make up this visual line.
    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
      var line = i ? lineView.rest[i - 1] : lineView.line, order;
      builder.pos = 0;
      builder.addToken = buildToken;
      // Optionally wire in some hacks into the token-rendering
      // algorithm, to deal with browser quirks.
      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))
        builder.addToken = buildTokenBadBidi(builder.addToken, order);
      builder.map = [];
      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
      if (line.styleClasses) {
        if (line.styleClasses.bgClass)
          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
        if (line.styleClasses.textClass)
          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
      }

      // Ensure at least a single node is present, for measuring.
      if (builder.map.length == 0)
        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));

      // Store the map and a cache object for the current logical line
      if (i == 0) {
        lineView.measure.map = builder.map;
        lineView.measure.cache = {};
      } else {
        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
        (lineView.measure.caches || (lineView.measure.caches = [])).push({});
      }
    }

    // See issue #2901
    if (webkit && /\bcm-tab\b/.test(builder.content.lastChild.className))
      builder.content.className = "cm-tab-wrap-hack";

    signal(cm, "renderLine", cm, lineView.line, builder.pre);
    if (builder.pre.className)
      builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");

    return builder;
  }

  function defaultSpecialCharPlaceholder(ch) {
    var token = elt("span", "\u2022", "cm-invalidchar");
    token.title = "\\u" + ch.charCodeAt(0).toString(16);
    token.setAttribute("aria-label", token.title);
    return token;
  }

  // Build up the DOM representation for a single token, and add it to
  // the line map. Takes care to render special characters separately.
  function buildToken(builder, text, style, startStyle, endStyle, title, css) {
    if (!text) return;
    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;
    var special = builder.cm.state.specialChars, mustWrap = false;
    if (!special.test(text)) {
      builder.col += text.length;
      var content = document.createTextNode(displayText);
      builder.map.push(builder.pos, builder.pos + text.length, content);
      if (ie && ie_version < 9) mustWrap = true;
      builder.pos += text.length;
    } else {
      var content = document.createDocumentFragment(), pos = 0;
      while (true) {
        special.lastIndex = pos;
        var m = special.exec(text);
        var skipped = m ? m.index - pos : text.length - pos;
        if (skipped) {
          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.map.push(builder.pos, builder.pos + skipped, txt);
          builder.col += skipped;
          builder.pos += skipped;
        }
        if (!m) break;
        pos += skipped + 1;
        if (m[0] == "\t") {
          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
          var txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
          txt.setAttribute("role", "presentation");
          txt.setAttribute("cm-text", "\t");
          builder.col += tabWidth;
        } else {
          var txt = builder.cm.options.specialCharPlaceholder(m[0]);
          txt.setAttribute("cm-text", m[0]);
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.col += 1;
        }
        builder.map.push(builder.pos, builder.pos + 1, txt);
        builder.pos++;
      }
    }
    if (style || startStyle || endStyle || mustWrap || css) {
      var fullStyle = style || "";
      if (startStyle) fullStyle += startStyle;
      if (endStyle) fullStyle += endStyle;
      var token = elt("span", [content], fullStyle, css);
      if (title) token.title = title;
      return builder.content.appendChild(token);
    }
    builder.content.appendChild(content);
  }

  function splitSpaces(old) {
    var out = " ";
    for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\u00a0";
    out += " ";
    return out;
  }

  // Work around nonsense dimensions being reported for stretches of
  // right-to-left text.
  function buildTokenBadBidi(inner, order) {
    return function(builder, text, style, startStyle, endStyle, title, css) {
      style = style ? style + " cm-force-border" : "cm-force-border";
      var start = builder.pos, end = start + text.length;
      for (;;) {
        // Find the part that overlaps with the start of this text
        for (var i = 0; i < order.length; i++) {
          var part = order[i];
          if (part.to > start && part.from <= start) break;
        }
        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);
        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);
        startStyle = null;
        text = text.slice(part.to - start);
        start = part.to;
      }
    };
  }

  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
    var widget = !ignoreWidget && marker.widgetNode;
    if (widget) builder.map.push(builder.pos, builder.pos + size, widget);
    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
      if (!widget)
        widget = builder.content.appendChild(document.createElement("span"));
      widget.setAttribute("cm-marker", marker.id);
    }
    if (widget) {
      builder.cm.display.input.setUneditable(widget);
      builder.content.appendChild(widget);
    }
    builder.pos += size;
  }

  // Outputs a number of spans to make up a line, taking highlighting
  // and marked text into account.
  function insertLineContent(line, builder, styles) {
    var spans = line.markedSpans, allText = line.text, at = 0;
    if (!spans) {
      for (var i = 1; i < styles.length; i+=2)
        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));
      return;
    }

    var len = allText.length, pos = 0, i = 1, text = "", style, css;
    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;
    for (;;) {
      if (nextChange == pos) { // Update current marker set
        spanStyle = spanEndStyle = spanStartStyle = title = css = "";
        collapsed = null; nextChange = Infinity;
        var foundBookmarks = [];
        for (var j = 0; j < spans.length; ++j) {
          var sp = spans[j], m = sp.marker;
          if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
            foundBookmarks.push(m);
          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
            if (sp.to != null && sp.to != pos && nextChange > sp.to) {
              nextChange = sp.to;
              spanEndStyle = "";
            }
            if (m.className) spanStyle += " " + m.className;
            if (m.css) css = m.css;
            if (m.startStyle && sp.from == pos) spanStartStyle += " " + m.startStyle;
            if (m.endStyle && sp.to == nextChange) spanEndStyle += " " + m.endStyle;
            if (m.title && !title) title = m.title;
            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))
              collapsed = sp;
          } else if (sp.from > pos && nextChange > sp.from) {
            nextChange = sp.from;
          }
        }
        if (collapsed && (collapsed.from || 0) == pos) {
          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                             collapsed.marker, collapsed.from == null);
          if (collapsed.to == null) return;
          if (collapsed.to == pos) collapsed = false;
        }
        if (!collapsed && foundBookmarks.length) for (var j = 0; j < foundBookmarks.length; ++j)
          buildCollapsedSpan(builder, 0, foundBookmarks[j]);
      }
      if (pos >= len) break;

      var upto = Math.min(len, nextChange);
      while (true) {
        if (text) {
          var end = pos + text.length;
          if (!collapsed) {
            var tokenText = end > upto ? text.slice(0, upto - pos) : text;
            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,
                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title, css);
          }
          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}
          pos = end;
          spanStartStyle = "";
        }
        text = allText.slice(at, at = styles[i++]);
        style = interpretTokenStyle(styles[i++], builder.cm.options);
      }
    }
  }

  // DOCUMENT DATA STRUCTURE

  // By default, updates that start and end at the beginning of a line
  // are treated specially, in order to make the association of line
  // widgets and marker elements with the text behave more intuitive.
  function isWholeLineUpdate(doc, change) {
    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" &&
      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
  }

  // Perform a change on the document data structure.
  function updateDoc(doc, change, markedSpans, estimateHeight) {
    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}
    function update(line, text, spans) {
      updateLine(line, text, spans, estimateHeight);
      signalLater(line, "change", line, change);
    }
    function linesFor(start, end) {
      for (var i = start, result = []; i < end; ++i)
        result.push(new Line(text[i], spansFor(i), estimateHeight));
      return result;
    }

    var from = change.from, to = change.to, text = change.text;
    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;

    // Adjust the line structure
    if (change.full) {
      doc.insert(0, linesFor(0, text.length));
      doc.remove(text.length, doc.size - text.length);
    } else if (isWholeLineUpdate(doc, change)) {
      // This is a whole-line replace. Treated specially to make
      // sure line objects move the way they are supposed to.
      var added = linesFor(0, text.length - 1);
      update(lastLine, lastLine.text, lastSpans);
      if (nlines) doc.remove(from.line, nlines);
      if (added.length) doc.insert(from.line, added);
    } else if (firstLine == lastLine) {
      if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
      } else {
        var added = linesFor(1, text.length - 1);
        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        doc.insert(from.line + 1, added);
      }
    } else if (text.length == 1) {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
      doc.remove(from.line + 1, nlines);
    } else {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
      var added = linesFor(1, text.length - 1);
      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);
      doc.insert(from.line + 1, added);
    }

    signalLater(doc, "change", doc, change);
  }

  // The document is represented as a BTree consisting of leaves, with
  // chunk of lines in them, and branches, with up to ten leaves or
  // other branch nodes below them. The top node is always a branch
  // node, and is the document object itself (meaning it has
  // additional methods and properties).
  //
  // All nodes have parent links. The tree is used both to go from
  // line numbers to line objects, and to go from objects to numbers.
  // It also indexes by height, and is used to convert between height
  // and line object, and to find the total height of the document.
  //
  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html

  function LeafChunk(lines) {
    this.lines = lines;
    this.parent = null;
    for (var i = 0, height = 0; i < lines.length; ++i) {
      lines[i].parent = this;
      height += lines[i].height;
    }
    this.height = height;
  }

  LeafChunk.prototype = {
    chunkSize: function() { return this.lines.length; },
    // Remove the n lines at offset 'at'.
    removeInner: function(at, n) {
      for (var i = at, e = at + n; i < e; ++i) {
        var line = this.lines[i];
        this.height -= line.height;
        cleanUpLine(line);
        signalLater(line, "delete");
      }
      this.lines.splice(at, n);
    },
    // Helper used to collapse a small branch into a single leaf.
    collapse: function(lines) {
      lines.push.apply(lines, this.lines);
    },
    // Insert the given array of lines at offset 'at', count them as
    // having the given height.
    insertInner: function(at, lines, height) {
      this.height += height;
      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
    },
    // Used to iterate over a part of the tree.
    iterN: function(at, n, op) {
      for (var e = at + n; at < e; ++at)
        if (op(this.lines[at])) return true;
    }
  };

  function BranchChunk(children) {
    this.children = children;
    var size = 0, height = 0;
    for (var i = 0; i < children.length; ++i) {
      var ch = children[i];
      size += ch.chunkSize(); height += ch.height;
      ch.parent = this;
    }
    this.size = size;
    this.height = height;
    this.parent = null;
  }

  BranchChunk.prototype = {
    chunkSize: function() { return this.size; },
    removeInner: function(at, n) {
      this.size -= n;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var rm = Math.min(n, sz - at), oldHeight = child.height;
          child.removeInner(at, rm);
          this.height -= oldHeight - child.height;
          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }
          if ((n -= rm) == 0) break;
          at = 0;
        } else at -= sz;
      }
      // If the result is smaller than 25 lines, ensure that it is a
      // single leaf node.
      if (this.size - n < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
        var lines = [];
        this.collapse(lines);
        this.children = [new LeafChunk(lines)];
        this.children[0].parent = this;
      }
    },
    collapse: function(lines) {
      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
    },
    insertInner: function(at, lines, height) {
      this.size += lines.length;
      this.height += height;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at <= sz) {
          child.insertInner(at, lines, height);
          if (child.lines && child.lines.length > 50) {
            while (child.lines.length > 50) {
              var spilled = child.lines.splice(child.lines.length - 25, 25);
              var newleaf = new LeafChunk(spilled);
              child.height -= newleaf.height;
              this.children.splice(i + 1, 0, newleaf);
              newleaf.parent = this;
            }
            this.maybeSpill();
          }
          break;
        }
        at -= sz;
      }
    },
    // When a node has grown, check whether it should be split.
    maybeSpill: function() {
      if (this.children.length <= 10) return;
      var me = this;
      do {
        var spilled = me.children.splice(me.children.length - 5, 5);
        var sibling = new BranchChunk(spilled);
        if (!me.parent) { // Become the parent node
          var copy = new BranchChunk(me.children);
          copy.parent = me;
          me.children = [copy, sibling];
          me = copy;
        } else {
          me.size -= sibling.size;
          me.height -= sibling.height;
          var myIndex = indexOf(me.parent.children, me);
          me.parent.children.splice(myIndex + 1, 0, sibling);
        }
        sibling.parent = me.parent;
      } while (me.children.length > 10);
      me.parent.maybeSpill();
    },
    iterN: function(at, n, op) {
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var used = Math.min(n, sz - at);
          if (child.iterN(at, used, op)) return true;
          if ((n -= used) == 0) break;
          at = 0;
        } else at -= sz;
      }
    }
  };

  var nextDocId = 0;
  var Doc = CodeMirror.Doc = function(text, mode, firstLine) {
    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine);
    if (firstLine == null) firstLine = 0;

    BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
    this.first = firstLine;
    this.scrollTop = this.scrollLeft = 0;
    this.cantEdit = false;
    this.cleanGeneration = 1;
    this.frontier = firstLine;
    var start = Pos(firstLine, 0);
    this.sel = simpleSelection(start);
    this.history = new History(null);
    this.id = ++nextDocId;
    this.modeOption = mode;

    if (typeof text == "string") text = splitLines(text);
    updateDoc(this, {from: start, to: start, text: text});
    setSelection(this, simpleSelection(start), sel_dontScroll);
  };

  Doc.prototype = createObj(BranchChunk.prototype, {
    constructor: Doc,
    // Iterate over the document. Supports two forms -- with only one
    // argument, it calls that for each line in the document. With
    // three, it iterates over the range given by the first two (with
    // the second being non-inclusive).
    iter: function(from, to, op) {
      if (op) this.iterN(from - this.first, to - from, op);
      else this.iterN(this.first, this.first + this.size, from);
    },

    // Non-public interface for adding and removing lines.
    insert: function(at, lines) {
      var height = 0;
      for (var i = 0; i < lines.length; ++i) height += lines[i].height;
      this.insertInner(at - this.first, lines, height);
    },
    remove: function(at, n) { this.removeInner(at - this.first, n); },

    // From here, the methods are part of the public interface. Most
    // are also available from CodeMirror (editor) instances.

    getValue: function(lineSep) {
      var lines = getLines(this, this.first, this.first + this.size);
      if (lineSep === false) return lines;
      return lines.join(lineSep || "\n");
    },
    setValue: docMethodOp(function(code) {
      var top = Pos(this.first, 0), last = this.first + this.size - 1;
      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),
                        text: splitLines(code), origin: "setValue", full: true}, true);
      setSelection(this, simpleSelection(top));
    }),
    replaceRange: function(code, from, to, origin) {
      from = clipPos(this, from);
      to = to ? clipPos(this, to) : from;
      replaceRange(this, code, from, to, origin);
    },
    getRange: function(from, to, lineSep) {
      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
      if (lineSep === false) return lines;
      return lines.join(lineSep || "\n");
    },

    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},

    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},
    getLineNumber: function(line) {return lineNo(line);},

    getLineHandleVisualStart: function(line) {
      if (typeof line == "number") line = getLine(this, line);
      return visualLine(line);
    },

    lineCount: function() {return this.size;},
    firstLine: function() {return this.first;},
    lastLine: function() {return this.first + this.size - 1;},

    clipPos: function(pos) {return clipPos(this, pos);},

    getCursor: function(start) {
      var range = this.sel.primary(), pos;
      if (start == null || start == "head") pos = range.head;
      else if (start == "anchor") pos = range.anchor;
      else if (start == "end" || start == "to" || start === false) pos = range.to();
      else pos = range.from();
      return pos;
    },
    listSelections: function() { return this.sel.ranges; },
    somethingSelected: function() {return this.sel.somethingSelected();},

    setCursor: docMethodOp(function(line, ch, options) {
      setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
    }),
    setSelection: docMethodOp(function(anchor, head, options) {
      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
    }),
    extendSelection: docMethodOp(function(head, other, options) {
      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
    }),
    extendSelections: docMethodOp(function(heads, options) {
      extendSelections(this, clipPosArray(this, heads, options));
    }),
    extendSelectionsBy: docMethodOp(function(f, options) {
      extendSelections(this, map(this.sel.ranges, f), options);
    }),
    setSelections: docMethodOp(function(ranges, primary, options) {
      if (!ranges.length) return;
      for (var i = 0, out = []; i < ranges.length; i++)
        out[i] = new Range(clipPos(this, ranges[i].anchor),
                           clipPos(this, ranges[i].head));
      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);
      setSelection(this, normalizeSelection(out, primary), options);
    }),
    addSelection: docMethodOp(function(anchor, head, options) {
      var ranges = this.sel.ranges.slice(0);
      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
    }),

    getSelection: function(lineSep) {
      var ranges = this.sel.ranges, lines;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        lines = lines ? lines.concat(sel) : sel;
      }
      if (lineSep === false) return lines;
      else return lines.join(lineSep || "\n");
    },
    getSelections: function(lineSep) {
      var parts = [], ranges = this.sel.ranges;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        if (lineSep !== false) sel = sel.join(lineSep || "\n");
        parts[i] = sel;
      }
      return parts;
    },
    replaceSelection: function(code, collapse, origin) {
      var dup = [];
      for (var i = 0; i < this.sel.ranges.length; i++)
        dup[i] = code;
      this.replaceSelections(dup, collapse, origin || "+input");
    },
    replaceSelections: docMethodOp(function(code, collapse, origin) {
      var changes = [], sel = this.sel;
      for (var i = 0; i < sel.ranges.length; i++) {
        var range = sel.ranges[i];
        changes[i] = {from: range.from(), to: range.to(), text: splitLines(code[i]), origin: origin};
      }
      var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
      for (var i = changes.length - 1; i >= 0; i--)
        makeChange(this, changes[i]);
      if (newSel) setSelectionReplaceHistory(this, newSel);
      else if (this.cm) ensureCursorVisible(this.cm);
    }),
    undo: docMethodOp(function() {makeChangeFromHistory(this, "undo");}),
    redo: docMethodOp(function() {makeChangeFromHistory(this, "redo");}),
    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, "undo", true);}),
    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, "redo", true);}),

    setExtending: function(val) {this.extend = val;},
    getExtending: function() {return this.extend;},

    historySize: function() {
      var hist = this.history, done = 0, undone = 0;
      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;
      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;
      return {undo: done, redo: undone};
    },
    clearHistory: function() {this.history = new History(this.history.maxGeneration);},

    markClean: function() {
      this.cleanGeneration = this.changeGeneration(true);
    },
    changeGeneration: function(forceSplit) {
      if (forceSplit)
        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
      return this.history.generation;
    },
    isClean: function (gen) {
      return this.history.generation == (gen || this.cleanGeneration);
    },

    getHistory: function() {
      return {done: copyHistoryArray(this.history.done),
              undone: copyHistoryArray(this.history.undone)};
    },
    setHistory: function(histData) {
      var hist = this.history = new History(this.history.maxGeneration);
      hist.done = copyHistoryArray(histData.done.slice(0), null, true);
      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
    },

    addLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        if (!line[prop]) line[prop] = cls;
        else if (classTest(cls).test(line[prop])) return false;
        else line[prop] += " " + cls;
        return true;
      });
    }),
    removeLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        var cur = line[prop];
        if (!cur) return false;
        else if (cls == null) line[prop] = null;
        else {
          var found = cur.match(classTest(cls));
          if (!found) return false;
          var end = found.index + found[0].length;
          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
        }
        return true;
      });
    }),

    addLineWidget: docMethodOp(function(handle, node, options) {
      return addLineWidget(this, handle, node, options);
    }),
    removeLineWidget: function(widget) { widget.clear(); },

    markText: function(from, to, options) {
      return markText(this, clipPos(this, from), clipPos(this, to), options, "range");
    },
    setBookmark: function(pos, options) {
      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),
                      insertLeft: options && options.insertLeft,
                      clearWhenEmpty: false, shared: options && options.shared,
                      handleMouseEvents: options && options.handleMouseEvents};
      pos = clipPos(this, pos);
      return markText(this, pos, pos, realOpts, "bookmark");
    },
    findMarksAt: function(pos) {
      pos = clipPos(this, pos);
      var markers = [], spans = getLine(this, pos.line).markedSpans;
      if (spans) for (var i = 0; i < spans.length; ++i) {
        var span = spans[i];
        if ((span.from == null || span.from <= pos.ch) &&
            (span.to == null || span.to >= pos.ch))
          markers.push(span.marker.parent || span.marker);
      }
      return markers;
    },
    findMarks: function(from, to, filter) {
      from = clipPos(this, from); to = clipPos(this, to);
      var found = [], lineNo = from.line;
      this.iter(from.line, to.line + 1, function(line) {
        var spans = line.markedSpans;
        if (spans) for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
          if (!(lineNo == from.line && from.ch > span.to ||
                span.from == null && lineNo != from.line||
                lineNo == to.line && span.from > to.ch) &&
              (!filter || filter(span.marker)))
            found.push(span.marker.parent || span.marker);
        }
        ++lineNo;
      });
      return found;
    },
    getAllMarks: function() {
      var markers = [];
      this.iter(function(line) {
        var sps = line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i)
          if (sps[i].from != null) markers.push(sps[i].marker);
      });
      return markers;
    },

    posFromIndex: function(off) {
      var ch, lineNo = this.first;
      this.iter(function(line) {
        var sz = line.text.length + 1;
        if (sz > off) { ch = off; return true; }
        off -= sz;
        ++lineNo;
      });
      return clipPos(this, Pos(lineNo, ch));
    },
    indexFromPos: function (coords) {
      coords = clipPos(this, coords);
      var index = coords.ch;
      if (coords.line < this.first || coords.ch < 0) return 0;
      this.iter(this.first, coords.line, function (line) {
        index += line.text.length + 1;
      });
      return index;
    },

    copy: function(copyHistory) {
      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first);
      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;
      doc.sel = this.sel;
      doc.extend = false;
      if (copyHistory) {
        doc.history.undoDepth = this.history.undoDepth;
        doc.setHistory(this.getHistory());
      }
      return doc;
    },

    linkedDoc: function(options) {
      if (!options) options = {};
      var from = this.first, to = this.first + this.size;
      if (options.from != null && options.from > from) from = options.from;
      if (options.to != null && options.to < to) to = options.to;
      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from);
      if (options.sharedHist) copy.history = this.history;
      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
      copySharedMarkers(copy, findSharedMarkers(this));
      return copy;
    },
    unlinkDoc: function(other) {
      if (other instanceof CodeMirror) other = other.doc;
      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {
        var link = this.linked[i];
        if (link.doc != other) continue;
        this.linked.splice(i, 1);
        other.unlinkDoc(this);
        detachSharedMarkers(findSharedMarkers(this));
        break;
      }
      // If the histories were shared, split them again
      if (other.history == this.history) {
        var splitIds = [other.id];
        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);
        other.history = new History(null);
        other.history.done = copyHistoryArray(this.history.done, splitIds);
        other.history.undone = copyHistoryArray(this.history.undone, splitIds);
      }
    },
    iterLinkedDocs: function(f) {linkedDocs(this, f);},

    getMode: function() {return this.mode;},
    getEditor: function() {return this.cm;}
  });

  // Public alias.
  Doc.prototype.eachLine = Doc.prototype.iter;

  // Set up methods on CodeMirror's prototype to redirect to the editor's document.
  var dontDelegate = "iter insert remove copy getEditor".split(" ");
  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)
    CodeMirror.prototype[prop] = (function(method) {
      return function() {return method.apply(this.doc, arguments);};
    })(Doc.prototype[prop]);

  eventMixin(Doc);

  // Call f for all linked documents.
  function linkedDocs(doc, f, sharedHistOnly) {
    function propagate(doc, skip, sharedHist) {
      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
        var rel = doc.linked[i];
        if (rel.doc == skip) continue;
        var shared = sharedHist && rel.sharedHist;
        if (sharedHistOnly && !shared) continue;
        f(rel.doc, shared);
        propagate(rel.doc, doc, shared);
      }
    }
    propagate(doc, null, true);
  }

  // Attach a document to an editor.
  function attachDoc(cm, doc) {
    if (doc.cm) throw new Error("This document is already in use.");
    cm.doc = doc;
    doc.cm = cm;
    estimateLineHeights(cm);
    loadMode(cm);
    if (!cm.options.lineWrapping) findMaxLine(cm);
    cm.options.mode = doc.modeOption;
    regChange(cm);
  }

  // LINE UTILITIES

  // Find the line object corresponding to the given line number.
  function getLine(doc, n) {
    n -= doc.first;
    if (n < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
    for (var chunk = doc; !chunk.lines;) {
      for (var i = 0;; ++i) {
        var child = chunk.children[i], sz = child.chunkSize();
        if (n < sz) { chunk = child; break; }
        n -= sz;
      }
    }
    return chunk.lines[n];
  }

  // Get the part of a document between two positions, as an array of
  // strings.
  function getBetween(doc, start, end) {
    var out = [], n = start.line;
    doc.iter(start.line, end.line + 1, function(line) {
      var text = line.text;
      if (n == end.line) text = text.slice(0, end.ch);
      if (n == start.line) text = text.slice(start.ch);
      out.push(text);
      ++n;
    });
    return out;
  }
  // Get the lines between from and to, as array of strings.
  function getLines(doc, from, to) {
    var out = [];
    doc.iter(from, to, function(line) { out.push(line.text); });
    return out;
  }

  // Update the height of a line, propagating the height change
  // upwards to parent nodes.
  function updateLineHeight(line, height) {
    var diff = height - line.height;
    if (diff) for (var n = line; n; n = n.parent) n.height += diff;
  }

  // Given a line object, find its line number by walking up through
  // its parent links.
  function lineNo(line) {
    if (line.parent == null) return null;
    var cur = line.parent, no = indexOf(cur.lines, line);
    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
      for (var i = 0;; ++i) {
        if (chunk.children[i] == cur) break;
        no += chunk.children[i].chunkSize();
      }
    }
    return no + cur.first;
  }

  // Find the line at the given vertical position, using the height
  // information in the document tree.
  function lineAtHeight(chunk, h) {
    var n = chunk.first;
    outer: do {
      for (var i = 0; i < chunk.children.length; ++i) {
        var child = chunk.children[i], ch = child.height;
        if (h < ch) { chunk = child; continue outer; }
        h -= ch;
        n += child.chunkSize();
      }
      return n;
    } while (!chunk.lines);
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i], lh = line.height;
      if (h < lh) break;
      h -= lh;
    }
    return n + i;
  }


  // Find the height above the given line.
  function heightAtLine(lineObj) {
    lineObj = visualLine(lineObj);

    var h = 0, chunk = lineObj.parent;
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i];
      if (line == lineObj) break;
      else h += line.height;
    }
    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
      for (var i = 0; i < p.children.length; ++i) {
        var cur = p.children[i];
        if (cur == chunk) break;
        else h += cur.height;
      }
    }
    return h;
  }

  // Get the bidi ordering for the given line (and cache it). Returns
  // false for lines that are fully left-to-right, and an array of
  // BidiSpan objects otherwise.
  function getOrder(line) {
    var order = line.order;
    if (order == null) order = line.order = bidiOrdering(line.text);
    return order;
  }

  // HISTORY

  function History(startGen) {
    // Arrays of change events and selections. Doing something adds an
    // event to done and clears undo. Undoing moves events from done
    // to undone, redoing moves them in the other direction.
    this.done = []; this.undone = [];
    this.undoDepth = Infinity;
    // Used to track when changes can be merged into a single undo
    // event
    this.lastModTime = this.lastSelTime = 0;
    this.lastOp = this.lastSelOp = null;
    this.lastOrigin = this.lastSelOrigin = null;
    // Used by the isClean() method
    this.generation = this.maxGeneration = startGen || 1;
  }

  // Create a history change event from an updateDoc-style change
  // object.
  function historyChangeFromChange(doc, change) {
    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);
    return histChange;
  }

  // Pop all selection events off the end of a history array. Stop at
  // a change event.
  function clearSelectionEvents(array) {
    while (array.length) {
      var last = lst(array);
      if (last.ranges) array.pop();
      else break;
    }
  }

  // Find the top change event in the history. Pop off selection
  // events that are in the way.
  function lastChangeEvent(hist, force) {
    if (force) {
      clearSelectionEvents(hist.done);
      return lst(hist.done);
    } else if (hist.done.length && !lst(hist.done).ranges) {
      return lst(hist.done);
    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
      hist.done.pop();
      return lst(hist.done);
    }
  }

  // Register a change in the history. Merges changes that are within
  // a single operation, ore are close together with an origin that
  // allows merging (starting with "+") into a single event.
  function addChangeToHistory(doc, change, selAfter, opId) {
    var hist = doc.history;
    hist.undone.length = 0;
    var time = +new Date, cur;

    if ((hist.lastOp == opId ||
         hist.lastOrigin == change.origin && change.origin &&
         ((change.origin.charAt(0) == "+" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||
          change.origin.charAt(0) == "*")) &&
        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
      // Merge this change into the last event
      var last = lst(cur.changes);
      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
        // Optimized case for simple insertion -- don't want to add
        // new changesets for every character typed
        last.to = changeEnd(change);
      } else {
        // Add new sub-event
        cur.changes.push(historyChangeFromChange(doc, change));
      }
    } else {
      // Can not be merged, start a new event.
      var before = lst(hist.done);
      if (!before || !before.ranges)
        pushSelectionToHistory(doc.sel, hist.done);
      cur = {changes: [historyChangeFromChange(doc, change)],
             generation: hist.generation};
      hist.done.push(cur);
      while (hist.done.length > hist.undoDepth) {
        hist.done.shift();
        if (!hist.done[0].ranges) hist.done.shift();
      }
    }
    hist.done.push(selAfter);
    hist.generation = ++hist.maxGeneration;
    hist.lastModTime = hist.lastSelTime = time;
    hist.lastOp = hist.lastSelOp = opId;
    hist.lastOrigin = hist.lastSelOrigin = change.origin;

    if (!last) signal(doc, "historyAdded");
  }

  function selectionEventCanBeMerged(doc, origin, prev, sel) {
    var ch = origin.charAt(0);
    return ch == "*" ||
      ch == "+" &&
      prev.ranges.length == sel.ranges.length &&
      prev.somethingSelected() == sel.somethingSelected() &&
      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
  }

  // Called whenever the selection changes, sets the new selection as
  // the pending selection in the history, and pushes the old pending
  // selection into the 'done' array when it was significantly
  // different (in number of selected ranges, emptiness, or time).
  function addSelectionToHistory(doc, sel, opId, options) {
    var hist = doc.history, origin = options && options.origin;

    // A new event is started when the previous origin does not match
    // the current, or the origins don't allow matching. Origins
    // starting with * are always merged, those starting with + are
    // merged when similar and close together in time.
    if (opId == hist.lastSelOp ||
        (origin && hist.lastSelOrigin == origin &&
         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||
          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))
      hist.done[hist.done.length - 1] = sel;
    else
      pushSelectionToHistory(sel, hist.done);

    hist.lastSelTime = +new Date;
    hist.lastSelOrigin = origin;
    hist.lastSelOp = opId;
    if (options && options.clearRedo !== false)
      clearSelectionEvents(hist.undone);
  }

  function pushSelectionToHistory(sel, dest) {
    var top = lst(dest);
    if (!(top && top.ranges && top.equals(sel)))
      dest.push(sel);
  }

  // Used to store marked span information in the history.
  function attachLocalSpans(doc, change, from, to) {
    var existing = change["spans_" + doc.id], n = 0;
    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
      if (line.markedSpans)
        (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
      ++n;
    });
  }

  // When un/re-doing restores text containing marked spans, those
  // that have been explicitly cleared should not be restored.
  function removeClearedSpans(spans) {
    if (!spans) return null;
    for (var i = 0, out; i < spans.length; ++i) {
      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }
      else if (out) out.push(spans[i]);
    }
    return !out ? spans : out.length ? out : null;
  }

  // Retrieve and filter the old marked spans stored in a change event.
  function getOldSpans(doc, change) {
    var found = change["spans_" + doc.id];
    if (!found) return null;
    for (var i = 0, nw = []; i < change.text.length; ++i)
      nw.push(removeClearedSpans(found[i]));
    return nw;
  }

  // Used both to provide a JSON-safe object in .getHistory, and, when
  // detaching a document, to split the history in two
  function copyHistoryArray(events, newGroup, instantiateSel) {
    for (var i = 0, copy = []; i < events.length; ++i) {
      var event = events[i];
      if (event.ranges) {
        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
        continue;
      }
      var changes = event.changes, newChanges = [];
      copy.push({changes: newChanges});
      for (var j = 0; j < changes.length; ++j) {
        var change = changes[j], m;
        newChanges.push({from: change.from, to: change.to, text: change.text});
        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\d+)$/)) {
          if (indexOf(newGroup, Number(m[1])) > -1) {
            lst(newChanges)[prop] = change[prop];
            delete change[prop];
          }
        }
      }
    }
    return copy;
  }

  // Rebasing/resetting history to deal with externally-sourced changes

  function rebaseHistSelSingle(pos, from, to, diff) {
    if (to < pos.line) {
      pos.line += diff;
    } else if (from < pos.line) {
      pos.line = from;
      pos.ch = 0;
    }
  }

  // Tries to rebase an array of history events given a change in the
  // document. If the change touches the same lines as the event, the
  // event, and everything 'behind' it, is discarded. If the change is
  // before the event, the event's positions are updated. Uses a
  // copy-on-write scheme for the positions, to avoid having to
  // reallocate them all on every rebase, but also avoid problems with
  // shared position objects being unsafely updated.
  function rebaseHistArray(array, from, to, diff) {
    for (var i = 0; i < array.length; ++i) {
      var sub = array[i], ok = true;
      if (sub.ranges) {
        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }
        for (var j = 0; j < sub.ranges.length; j++) {
          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
        }
        continue;
      }
      for (var j = 0; j < sub.changes.length; ++j) {
        var cur = sub.changes[j];
        if (to < cur.from.line) {
          cur.from = Pos(cur.from.line + diff, cur.from.ch);
          cur.to = Pos(cur.to.line + diff, cur.to.ch);
        } else if (from <= cur.to.line) {
          ok = false;
          break;
        }
      }
      if (!ok) {
        array.splice(0, i + 1);
        i = 0;
      }
    }
  }

  function rebaseHist(hist, change) {
    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
    rebaseHistArray(hist.done, from, to, diff);
    rebaseHistArray(hist.undone, from, to, diff);
  }

  // EVENT UTILITIES

  // Due to the fact that we still support jurassic IE versions, some
  // compatibility wrappers are needed.

  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  };
  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
  };
  function e_defaultPrevented(e) {
    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
  }
  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};

  function e_target(e) {return e.target || e.srcElement;}
  function e_button(e) {
    var b = e.which;
    if (b == null) {
      if (e.button & 1) b = 1;
      else if (e.button & 2) b = 3;
      else if (e.button & 4) b = 2;
    }
    if (mac && e.ctrlKey && b == 1) b = 3;
    return b;
  }

  // EVENT HANDLING

  // Lightweight event framework. on/off also work on DOM nodes,
  // registering native DOM handlers.

  var on = CodeMirror.on = function(emitter, type, f) {
    if (emitter.addEventListener)
      emitter.addEventListener(type, f, false);
    else if (emitter.attachEvent)
      emitter.attachEvent("on" + type, f);
    else {
      var map = emitter._handlers || (emitter._handlers = {});
      var arr = map[type] || (map[type] = []);
      arr.push(f);
    }
  };

  var off = CodeMirror.off = function(emitter, type, f) {
    if (emitter.removeEventListener)
      emitter.removeEventListener(type, f, false);
    else if (emitter.detachEvent)
      emitter.detachEvent("on" + type, f);
    else {
      var arr = emitter._handlers && emitter._handlers[type];
      if (!arr) return;
      for (var i = 0; i < arr.length; ++i)
        if (arr[i] == f) { arr.splice(i, 1); break; }
    }
  };

  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {
    var arr = emitter._handlers && emitter._handlers[type];
    if (!arr) return;
    var args = Array.prototype.slice.call(arguments, 2);
    for (var i = 0; i < arr.length; ++i) arr[i].apply(null, args);
  };

  var orphanDelayedCallbacks = null;

  // Often, we want to signal events at a point where we are in the
  // middle of some work, but don't want the handler to start calling
  // other methods on the editor, which might be in an inconsistent
  // state or simply not expect any other events to happen.
  // signalLater looks whether there are any handlers, and schedules
  // them to be executed when the last operation ends, or, if no
  // operation is active, when a timeout fires.
  function signalLater(emitter, type /*, values...*/) {
    var arr = emitter._handlers && emitter._handlers[type];
    if (!arr) return;
    var args = Array.prototype.slice.call(arguments, 2), list;
    if (operationGroup) {
      list = operationGroup.delayedCallbacks;
    } else if (orphanDelayedCallbacks) {
      list = orphanDelayedCallbacks;
    } else {
      list = orphanDelayedCallbacks = [];
      setTimeout(fireOrphanDelayed, 0);
    }
    function bnd(f) {return function(){f.apply(null, args);};};
    for (var i = 0; i < arr.length; ++i)
      list.push(bnd(arr[i]));
  }

  function fireOrphanDelayed() {
    var delayed = orphanDelayedCallbacks;
    orphanDelayedCallbacks = null;
    for (var i = 0; i < delayed.length; ++i) delayed[i]();
  }

  // The DOM events that CodeMirror handles can be overridden by
  // registering a (non-DOM) handler on the editor for the event name,
  // and preventDefault-ing the event in that handler.
  function signalDOMEvent(cm, e, override) {
    if (typeof e == "string")
      e = {type: e, preventDefault: function() { this.defaultPrevented = true; }};
    signal(cm, override || e.type, cm, e);
    return e_defaultPrevented(e) || e.codemirrorIgnore;
  }

  function signalCursorActivity(cm) {
    var arr = cm._handlers && cm._handlers.cursorActivity;
    if (!arr) return;
    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)
      set.push(arr[i]);
  }

  function hasHandler(emitter, type) {
    var arr = emitter._handlers && emitter._handlers[type];
    return arr && arr.length > 0;
  }

  // Add on and off methods to a constructor's prototype, to make
  // registering events on such objects more convenient.
  function eventMixin(ctor) {
    ctor.prototype.on = function(type, f) {on(this, type, f);};
    ctor.prototype.off = function(type, f) {off(this, type, f);};
  }

  // MISC UTILITIES

  // Number of pixels added to scroller and sizer to hide scrollbar
  var scrollerGap = 30;

  // Returned or thrown by various protocols to signal 'I'm not
  // handling this'.
  var Pass = CodeMirror.Pass = {toString: function(){return "CodeMirror.Pass";}};

  // Reused option objects for setSelection & friends
  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};

  function Delayed() {this.id = null;}
  Delayed.prototype.set = function(ms, f) {
    clearTimeout(this.id);
    this.id = setTimeout(f, ms);
  };

  // Counts the column offset in a string, taking tabs into account.
  // Used mostly to find indentation.
  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
    if (end == null) {
      end = string.search(/[^\s\u00a0]/);
      if (end == -1) end = string.length;
    }
    for (var i = startIndex || 0, n = startValue || 0;;) {
      var nextTab = string.indexOf("\t", i);
      if (nextTab < 0 || nextTab >= end)
        return n + (end - i);
      n += nextTab - i;
      n += tabSize - (n % tabSize);
      i = nextTab + 1;
    }
  };

  // The inverse of countColumn -- find the offset that corresponds to
  // a particular column.
  function findColumn(string, goal, tabSize) {
    for (var pos = 0, col = 0;;) {
      var nextTab = string.indexOf("\t", pos);
      if (nextTab == -1) nextTab = string.length;
      var skipped = nextTab - pos;
      if (nextTab == string.length || col + skipped >= goal)
        return pos + Math.min(skipped, goal - col);
      col += nextTab - pos;
      col += tabSize - (col % tabSize);
      pos = nextTab + 1;
      if (col >= goal) return pos;
    }
  }

  var spaceStrs = [""];
  function spaceStr(n) {
    while (spaceStrs.length <= n)
      spaceStrs.push(lst(spaceStrs) + " ");
    return spaceStrs[n];
  }

  function lst(arr) { return arr[arr.length-1]; }

  var selectInput = function(node) { node.select(); };
  if (ios) // Mobile Safari apparently has a bug where select() is broken.
    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };
  else if (ie) // Suppress mysterious IE10 errors
    selectInput = function(node) { try { node.select(); } catch(_e) {} };

  function indexOf(array, elt) {
    for (var i = 0; i < array.length; ++i)
      if (array[i] == elt) return i;
    return -1;
  }
  function map(array, f) {
    var out = [];
    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);
    return out;
  }

  function nothing() {}

  function createObj(base, props) {
    var inst;
    if (Object.create) {
      inst = Object.create(base);
    } else {
      nothing.prototype = base;
      inst = new nothing();
    }
    if (props) copyObj(props, inst);
    return inst;
  };

  function copyObj(obj, target, overwrite) {
    if (!target) target = {};
    for (var prop in obj)
      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))
        target[prop] = obj[prop];
    return target;
  }

  function bind(f) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function(){return f.apply(null, args);};
  }

  var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {
    return /\w/.test(ch) || ch > "\x80" &&
      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
  };
  function isWordChar(ch, helper) {
    if (!helper) return isWordCharBasic(ch);
    if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) return true;
    return helper.test(ch);
  }

  function isEmpty(obj) {
    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;
    return true;
  }

  // Extending unicode characters. A series of a non-extending char +
  // any number of extending chars is treated as a single unit as far
  // as editing and measuring is concerned. This is not fully correct,
  // since some scripts/fonts/browsers also treat other configurations
  // of code points as a group.
  var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }

  // DOM UTILITIES

  function elt(tag, content, className, style) {
    var e = document.createElement(tag);
    if (className) e.className = className;
    if (style) e.style.cssText = style;
    if (typeof content == "string") e.appendChild(document.createTextNode(content));
    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
    return e;
  }

  var range;
  if (document.createRange) range = function(node, start, end, endNode) {
    var r = document.createRange();
    r.setEnd(endNode || node, end);
    r.setStart(node, start);
    return r;
  };
  else range = function(node, start, end) {
    var r = document.body.createTextRange();
    try { r.moveToElementText(node.parentNode); }
    catch(e) { return r; }
    r.collapse(true);
    r.moveEnd("character", end);
    r.moveStart("character", start);
    return r;
  };

  function removeChildren(e) {
    for (var count = e.childNodes.length; count > 0; --count)
      e.removeChild(e.firstChild);
    return e;
  }

  function removeChildrenAndAdd(parent, e) {
    return removeChildren(parent).appendChild(e);
  }

  var contains = CodeMirror.contains = function(parent, child) {
    if (child.nodeType == 3) // Android browser always returns false when child is a textnode
      child = child.parentNode;
    if (parent.contains)
      return parent.contains(child);
    do {
      if (child.nodeType == 11) child = child.host;
      if (child == parent) return true;
    } while (child = child.parentNode);
  };

  function activeElt() { return document.activeElement; }
  // Older versions of IE throws unspecified error when touching
  // document.activeElement in some cases (during loading, in iframe)
  if (ie && ie_version < 11) activeElt = function() {
    try { return document.activeElement; }
    catch(e) { return document.body; }
  };

  function classTest(cls) { return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*"); }
  var rmClass = CodeMirror.rmClass = function(node, cls) {
    var current = node.className;
    var match = classTest(cls).exec(current);
    if (match) {
      var after = current.slice(match.index + match[0].length);
      node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
    }
  };
  var addClass = CodeMirror.addClass = function(node, cls) {
    var current = node.className;
    if (!classTest(cls).test(current)) node.className += (current ? " " : "") + cls;
  };
  function joinClasses(a, b) {
    var as = a.split(" ");
    for (var i = 0; i < as.length; i++)
      if (as[i] && !classTest(as[i]).test(b)) b += " " + as[i];
    return b;
  }

  // WINDOW-WIDE EVENTS

  // These must be handled carefully, because naively registering a
  // handler for each editor will cause the editors to never be
  // garbage collected.

  function forEachCodeMirror(f) {
    if (!document.body.getElementsByClassName) return;
    var byClass = document.body.getElementsByClassName("CodeMirror");
    for (var i = 0; i < byClass.length; i++) {
      var cm = byClass[i].CodeMirror;
      if (cm) f(cm);
    }
  }

  var globalsRegistered = false;
  function ensureGlobalHandlers() {
    if (globalsRegistered) return;
    registerGlobalHandlers();
    globalsRegistered = true;
  }
  function registerGlobalHandlers() {
    // When the window resizes, we need to refresh active editors.
    var resizeTimer;
    on(window, "resize", function() {
      if (resizeTimer == null) resizeTimer = setTimeout(function() {
        resizeTimer = null;
        forEachCodeMirror(onResize);
      }, 100);
    });
    // When the window loses focus, we want to show the editor as blurred
    on(window, "blur", function() {
      forEachCodeMirror(onBlur);
    });
  }

  // FEATURE DETECTION

  // Detect drag-and-drop
  var dragAndDrop = function() {
    // There is *some* kind of drag-and-drop support in IE6-8, but I
    // couldn't get it to work yet.
    if (ie && ie_version < 9) return false;
    var div = elt('div');
    return "draggable" in div || "dragDrop" in div;
  }();

  var zwspSupported;
  function zeroWidthElement(measure) {
    if (zwspSupported == null) {
      var test = elt("span", "\u200b");
      removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
      if (measure.firstChild.offsetHeight != 0)
        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
    }
    var node = zwspSupported ? elt("span", "\u200b") :
      elt("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
    node.setAttribute("cm-text", "");
    return node;
  }

  // Feature-detect IE's crummy client rect reporting for bidi text
  var badBidiRects;
  function hasBadBidiRects(measure) {
    if (badBidiRects != null) return badBidiRects;
    var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA"));
    var r0 = range(txt, 0, 1).getBoundingClientRect();
    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)
    var r1 = range(txt, 1, 2).getBoundingClientRect();
    return badBidiRects = (r1.right - r0.right < 3);
  }

  // See if "".split is the broken IE version, if so, provide an
  // alternative way to split lines.
  var splitLines = CodeMirror.splitLines = "\n\nb".split(/\n/).length != 3 ? function(string) {
    var pos = 0, result = [], l = string.length;
    while (pos <= l) {
      var nl = string.indexOf("\n", pos);
      if (nl == -1) nl = string.length;
      var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
      var rt = line.indexOf("\r");
      if (rt != -1) {
        result.push(line.slice(0, rt));
        pos += rt + 1;
      } else {
        result.push(line);
        pos = nl + 1;
      }
    }
    return result;
  } : function(string){return string.split(/\r\n?|\n/);};

  var hasSelection = window.getSelection ? function(te) {
    try { return te.selectionStart != te.selectionEnd; }
    catch(e) { return false; }
  } : function(te) {
    try {var range = te.ownerDocument.selection.createRange();}
    catch(e) {}
    if (!range || range.parentElement() != te) return false;
    return range.compareEndPoints("StartToEnd", range) != 0;
  };

  var hasCopyEvent = (function() {
    var e = elt("div");
    if ("oncopy" in e) return true;
    e.setAttribute("oncopy", "return;");
    return typeof e.oncopy == "function";
  })();

  var badZoomedRects = null;
  function hasBadZoomedRects(measure) {
    if (badZoomedRects != null) return badZoomedRects;
    var node = removeChildrenAndAdd(measure, elt("span", "x"));
    var normal = node.getBoundingClientRect();
    var fromRange = range(node, 0, 1).getBoundingClientRect();
    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
  }

  // KEY NAMES

  var keyNames = {3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt",
                  19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End",
                  36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert",
                  46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod", 107: "=", 109: "-", 127: "Delete",
                  173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
                  221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete",
                  63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert"};
  CodeMirror.keyNames = keyNames;
  (function() {
    // Number keys
    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
    // Alphabetic keys
    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
    // Function keys
    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
  })();

  // BIDI HELPERS

  function iterateBidiSections(order, from, to, f) {
    if (!order) return f(from, to, "ltr");
    var found = false;
    for (var i = 0; i < order.length; ++i) {
      var part = order[i];
      if (part.from < to && part.to > from || from == to && part.to == from) {
        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr");
        found = true;
      }
    }
    if (!found) f(from, to, "ltr");
  }

  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }
  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }

  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }
  function lineRight(line) {
    var order = getOrder(line);
    if (!order) return line.text.length;
    return bidiRight(lst(order));
  }

  function lineStart(cm, lineN) {
    var line = getLine(cm.doc, lineN);
    var visual = visualLine(line);
    if (visual != line) lineN = lineNo(visual);
    var order = getOrder(visual);
    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);
    return Pos(lineN, ch);
  }
  function lineEnd(cm, lineN) {
    var merged, line = getLine(cm.doc, lineN);
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      lineN = null;
    }
    var order = getOrder(line);
    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);
    return Pos(lineN == null ? lineNo(line) : lineN, ch);
  }
  function lineStartSmart(cm, pos) {
    var start = lineStart(cm, pos.line);
    var line = getLine(cm.doc, start.line);
    var order = getOrder(line);
    if (!order || order[0].level == 0) {
      var firstNonWS = Math.max(0, line.text.search(/\S/));
      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
      return Pos(start.line, inWS ? 0 : firstNonWS);
    }
    return start;
  }

  function compareBidiLevel(order, a, b) {
    var linedir = order[0].level;
    if (a == linedir) return true;
    if (b == linedir) return false;
    return a < b;
  }
  var bidiOther;
  function getBidiPartAt(order, pos) {
    bidiOther = null;
    for (var i = 0, found; i < order.length; ++i) {
      var cur = order[i];
      if (cur.from < pos && cur.to > pos) return i;
      if ((cur.from == pos || cur.to == pos)) {
        if (found == null) {
          found = i;
        } else if (compareBidiLevel(order, cur.level, order[found].level)) {
          if (cur.from != cur.to) bidiOther = found;
          return i;
        } else {
          if (cur.from != cur.to) bidiOther = i;
          return found;
        }
      }
    }
    return found;
  }

  function moveInLine(line, pos, dir, byUnit) {
    if (!byUnit) return pos + dir;
    do pos += dir;
    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
    return pos;
  }

  // This is needed in order to move 'visually' through bi-directional
  // text -- i.e., pressing left should make the cursor go left, even
  // when in RTL text. The tricky part is the 'jumps', where RTL and
  // LTR text touch each other. This often requires the cursor offset
  // to move more than one unit, in order to visually move one unit.
  function moveVisually(line, start, dir, byUnit) {
    var bidi = getOrder(line);
    if (!bidi) return moveLogically(line, start, dir, byUnit);
    var pos = getBidiPartAt(bidi, start), part = bidi[pos];
    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);

    for (;;) {
      if (target > part.from && target < part.to) return target;
      if (target == part.from || target == part.to) {
        if (getBidiPartAt(bidi, target) == pos) return target;
        part = bidi[pos += dir];
        return (dir > 0) == part.level % 2 ? part.to : part.from;
      } else {
        part = bidi[pos += dir];
        if (!part) return null;
        if ((dir > 0) == part.level % 2)
          target = moveInLine(line, part.to, -1, byUnit);
        else
          target = moveInLine(line, part.from, 1, byUnit);
      }
    }
  }

  function moveLogically(line, start, dir, byUnit) {
    var target = start + dir;
    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;
    return target < 0 || target > line.text.length ? null : target;
  }

  // Bidirectional ordering algorithm
  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm
  // that this (partially) implements.

  // One-char codes used for character types:
  // L (L):   Left-to-Right
  // R (R):   Right-to-Left
  // r (AL):  Right-to-Left Arabic
  // 1 (EN):  European Number
  // + (ES):  European Number Separator
  // % (ET):  European Number Terminator
  // n (AN):  Arabic Number
  // , (CS):  Common Number Separator
  // m (NSM): Non-Spacing Mark
  // b (BN):  Boundary Neutral
  // s (B):   Paragraph Separator
  // t (S):   Segment Separator
  // w (WS):  Whitespace
  // N (ON):  Other Neutrals

  // Returns null if characters are ordered as they appear
  // (left-to-right), or an array of sections ({from, to, level}
  // objects) in the order in which they occur visually.
  var bidiOrdering = (function() {
    // Character types for codepoints 0 to 0xff
    var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
    // Character types for codepoints 0x600 to 0x6ff
    var arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";
    function charType(code) {
      if (code <= 0xf7) return lowTypes.charAt(code);
      else if (0x590 <= code && code <= 0x5f4) return "R";
      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);
      else if (0x6ee <= code && code <= 0x8ac) return "r";
      else if (0x2000 <= code && code <= 0x200b) return "w";
      else if (code == 0x200c) return "b";
      else return "L";
    }

    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
    // Browsers seem to always treat the boundaries of block elements as being L.
    var outerType = "L";

    function BidiSpan(level, from, to) {
      this.level = level;
      this.from = from; this.to = to;
    }

    return function(str) {
      if (!bidiRE.test(str)) return false;
      var len = str.length, types = [];
      for (var i = 0, type; i < len; ++i)
        types.push(type = charType(str.charCodeAt(i)));

      // W1. Examine each non-spacing mark (NSM) in the level run, and
      // change the type of the NSM to the type of the previous
      // character. If the NSM is at the start of the level run, it will
      // get the type of sor.
      for (var i = 0, prev = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "m") types[i] = prev;
        else prev = type;
      }

      // W2. Search backwards from each instance of a European number
      // until the first strong type (R, L, AL, or sor) is found. If an
      // AL is found, change the type of the European number to Arabic
      // number.
      // W3. Change all ALs to R.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "1" && cur == "r") types[i] = "n";
        else if (isStrong.test(type)) { cur = type; if (type == "r") types[i] = "R"; }
      }

      // W4. A single European separator between two European numbers
      // changes to a European number. A single common separator between
      // two numbers of the same type changes to that type.
      for (var i = 1, prev = types[0]; i < len - 1; ++i) {
        var type = types[i];
        if (type == "+" && prev == "1" && types[i+1] == "1") types[i] = "1";
        else if (type == "," && prev == types[i+1] &&
                 (prev == "1" || prev == "n")) types[i] = prev;
        prev = type;
      }

      // W5. A sequence of European terminators adjacent to European
      // numbers changes to all European numbers.
      // W6. Otherwise, separators and terminators change to Other
      // Neutral.
      for (var i = 0; i < len; ++i) {
        var type = types[i];
        if (type == ",") types[i] = "N";
        else if (type == "%") {
          for (var end = i + 1; end < len && types[end] == "%"; ++end) {}
          var replace = (i && types[i-1] == "!") || (end < len && types[end] == "1") ? "1" : "N";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // W7. Search backwards from each instance of a European number
      // until the first strong type (R, L, or sor) is found. If an L is
      // found, then change the type of the European number to L.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (cur == "L" && type == "1") types[i] = "L";
        else if (isStrong.test(type)) cur = type;
      }

      // N1. A sequence of neutrals takes the direction of the
      // surrounding strong text if the text on both sides has the same
      // direction. European and Arabic numbers act as if they were R in
      // terms of their influence on neutrals. Start-of-level-run (sor)
      // and end-of-level-run (eor) are used at level run boundaries.
      // N2. Any remaining neutrals take the embedding direction.
      for (var i = 0; i < len; ++i) {
        if (isNeutral.test(types[i])) {
          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}
          var before = (i ? types[i-1] : outerType) == "L";
          var after = (end < len ? types[end] : outerType) == "L";
          var replace = before || after ? "L" : "R";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // Here we depart from the documented algorithm, in order to avoid
      // building up an actual levels array. Since there are only three
      // levels (0, 1, 2) in an implementation that doesn't take
      // explicit embedding into account, we can build up the order on
      // the fly, without following the level-based algorithm.
      var order = [], m;
      for (var i = 0; i < len;) {
        if (countsAsLeft.test(types[i])) {
          var start = i;
          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}
          order.push(new BidiSpan(0, start, i));
        } else {
          var pos = i, at = order.length;
          for (++i; i < len && types[i] != "L"; ++i) {}
          for (var j = pos; j < i;) {
            if (countsAsNum.test(types[j])) {
              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));
              var nstart = j;
              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}
              order.splice(at, 0, new BidiSpan(2, nstart, j));
              pos = j;
            } else ++j;
          }
          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));
        }
      }
      if (order[0].level == 1 && (m = str.match(/^\s+/))) {
        order[0].from = m[0].length;
        order.unshift(new BidiSpan(0, 0, m[0].length));
      }
      if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
        lst(order).to -= m[0].length;
        order.push(new BidiSpan(0, len - m[0].length, len));
      }
      if (order[0].level == 2)
        order.unshift(new BidiSpan(1, order[0].to, order[0].to));
      if (order[0].level != lst(order).level)
        order.push(new BidiSpan(order[0].level, len, len));

      return order;
    };
  })();

  // THE END

  CodeMirror.version = "5.3.0";

  return CodeMirror;
});
</script>
<script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    mod(require("../../lib/codemirror"), "cjs");
  else if (typeof define == "function" && define.amd) // AMD
    define(["../../lib/codemirror"], function(CM) { mod(CM, "amd"); });
  else // Plain browser env
    mod(CodeMirror, "plain");
})(function(CodeMirror, env) {
  if (!CodeMirror.modeURL) CodeMirror.modeURL = "../mode/%N/%N.js";

  var loading = {};
  function splitCallback(cont, n) {
    var countDown = n;
    return function() { if (--countDown == 0) cont(); };
  }
  function ensureDeps(mode, cont) {
    var deps = CodeMirror.modes[mode].dependencies;
    if (!deps) return cont();
    var missing = [];
    for (var i = 0; i < deps.length; ++i) {
      if (!CodeMirror.modes.hasOwnProperty(deps[i]))
        missing.push(deps[i]);
    }
    if (!missing.length) return cont();
    var split = splitCallback(cont, missing.length);
    for (var i = 0; i < missing.length; ++i)
      CodeMirror.requireMode(missing[i], split);
  }

  CodeMirror.requireMode = function(mode, cont) {
    if (typeof mode != "string") mode = mode.name;
    if (CodeMirror.modes.hasOwnProperty(mode)) return ensureDeps(mode, cont);
    if (loading.hasOwnProperty(mode)) return loading[mode].push(cont);

    var file = CodeMirror.modeURL.replace(/%N/g, mode);
    if (env == "plain") {
      var script = document.createElement("script");
      script.src = file;
      var others = document.getElementsByTagName("script")[0];
      var list = loading[mode] = [cont];
      CodeMirror.on(script, "load", function() {
        ensureDeps(mode, function() {
          for (var i = 0; i < list.length; ++i) list[i]();
        });
      });
      others.parentNode.insertBefore(script, others);
    } else if (env == "cjs") {
      require(file);
      cont();
    } else if (env == "amd") {
      requirejs([file], cont);
    }
  };

  CodeMirror.autoLoadMode = function(instance, mode) {
    if (!CodeMirror.modes.hasOwnProperty(mode))
      CodeMirror.requireMode(mode, function() {
        instance.setOption("mode", instance.getOption("mode"));
      });
  };
});
</script>
<script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    mod(require("../lib/codemirror"));
  else if (typeof define == "function" && define.amd) // AMD
    define(["../lib/codemirror"], mod);
  else // Plain browser env
    mod(CodeMirror);
})(function(CodeMirror) {
  "use strict";

  CodeMirror.modeInfo = [
    {name: "APL", mime: "text/apl", mode: "apl", ext: ["dyalog", "apl"]},
    {name: "PGP", mimes: ["application/pgp", "application/pgp-keys", "application/pgp-signature"], mode: "asciiarmor", ext: ["pgp"]},
    {name: "Asterisk", mime: "text/x-asterisk", mode: "asterisk", file: /^extensions\.conf$/i},
    {name: "C", mime: "text/x-csrc", mode: "clike", ext: ["c", "h"]},
    {name: "C++", mime: "text/x-c++src", mode: "clike", ext: ["cpp", "c++", "cc", "cxx", "hpp", "h++", "hh", "hxx"], alias: ["cpp"]},
    {name: "Cobol", mime: "text/x-cobol", mode: "cobol", ext: ["cob", "cpy"]},
    {name: "C#", mime: "text/x-csharp", mode: "clike", ext: ["cs"], alias: ["csharp"]},
    {name: "Clojure", mime: "text/x-clojure", mode: "clojure", ext: ["clj"]},
    {name: "CMake", mime: "text/x-cmake", mode: "cmake", ext: ["cmake", "cmake.in"], file: /^CMakeLists.txt$/},
    {name: "CoffeeScript", mime: "text/x-coffeescript", mode: "coffeescript", ext: ["coffee"], alias: ["coffee", "coffee-script"]},
    {name: "Common Lisp", mime: "text/x-common-lisp", mode: "commonlisp", ext: ["cl", "lisp", "el"], alias: ["lisp"]},
    {name: "Cypher", mime: "application/x-cypher-query", mode: "cypher", ext: ["cyp", "cypher"]},
    {name: "Cython", mime: "text/x-cython", mode: "python", ext: ["pyx", "pxd", "pxi"]},
    {name: "CSS", mime: "text/css", mode: "css", ext: ["css"]},
    {name: "CQL", mime: "text/x-cassandra", mode: "sql", ext: ["cql"]},
    {name: "D", mime: "text/x-d", mode: "d", ext: ["d"]},
    {name: "Dart", mimes: ["application/dart", "text/x-dart"], mode: "dart", ext: ["dart"]},
    {name: "diff", mime: "text/x-diff", mode: "diff", ext: ["diff", "patch"]},
    {name: "Django", mime: "text/x-django", mode: "django"},
    {name: "Dockerfile", mime: "text/x-dockerfile", mode: "dockerfile", file: /^Dockerfile$/},
    {name: "DTD", mime: "application/xml-dtd", mode: "dtd", ext: ["dtd"]},
    {name: "Dylan", mime: "text/x-dylan", mode: "dylan", ext: ["dylan", "dyl", "intr"]},
    {name: "EBNF", mime: "text/x-ebnf", mode: "ebnf"},
    {name: "ECL", mime: "text/x-ecl", mode: "ecl", ext: ["ecl"]},
    {name: "Eiffel", mime: "text/x-eiffel", mode: "eiffel", ext: ["e"]},
    {name: "Embedded Javascript", mime: "application/x-ejs", mode: "htmlembedded", ext: ["ejs"]},
    {name: "Embedded Ruby", mime: "application/x-erb", mode: "htmlembedded", ext: ["erb"]},
    {name: "Erlang", mime: "text/x-erlang", mode: "erlang", ext: ["erl"]},
    {name: "Forth", mime: "text/x-forth", mode: "forth", ext: ["forth", "fth", "4th"]},
    {name: "Fortran", mime: "text/x-fortran", mode: "fortran", ext: ["f", "for", "f77", "f90"]},
    {name: "F#", mime: "text/x-fsharp", mode: "mllike", ext: ["fs"], alias: ["fsharp"]},
    {name: "Gas", mime: "text/x-gas", mode: "gas", ext: ["s"]},
    {name: "Gherkin", mime: "text/x-feature", mode: "gherkin", ext: ["feature"]},
    {name: "GitHub Flavored Markdown", mime: "text/x-gfm", mode: "gfm", file: /^(readme|contributing|history).md$/i},
    {name: "Go", mime: "text/x-go", mode: "go", ext: ["go"]},
    {name: "Groovy", mime: "text/x-groovy", mode: "groovy", ext: ["groovy"]},
    {name: "HAML", mime: "text/x-haml", mode: "haml", ext: ["haml"]},
    {name: "Haskell", mime: "text/x-haskell", mode: "haskell", ext: ["hs"]},
    {name: "Haxe", mime: "text/x-haxe", mode: "haxe", ext: ["hx"]},
    {name: "HXML", mime: "text/x-hxml", mode: "haxe", ext: ["hxml"]},
    {name: "ASP.NET", mime: "application/x-aspx", mode: "htmlembedded", ext: ["aspx"], alias: ["asp", "aspx"]},
    {name: "HTML", mime: "text/html", mode: "htmlmixed", ext: ["html", "htm"], alias: ["xhtml"]},
    {name: "HTTP", mime: "message/http", mode: "http"},
    {name: "IDL", mime: "text/x-idl", mode: "idl", ext: ["pro"]},
    {name: "Jade", mime: "text/x-jade", mode: "jade", ext: ["jade"]},
    {name: "Java", mime: "text/x-java", mode: "clike", ext: ["java"]},
    {name: "Java Server Pages", mime: "application/x-jsp", mode: "htmlembedded", ext: ["jsp"], alias: ["jsp"]},
    {name: "JavaScript", mimes: ["text/javascript", "text/ecmascript", "application/javascript", "application/x-javascript", "application/ecmascript"],
     mode: "javascript", ext: ["js"], alias: ["ecmascript", "js", "node"]},
    {name: "JSON", mimes: ["application/json", "application/x-json"], mode: "javascript", ext: ["json", "map"], alias: ["json5"]},
    {name: "JSON-LD", mime: "application/ld+json", mode: "javascript", ext: ["jsonld"], alias: ["jsonld"]},
    {name: "Jinja2", mime: "null", mode: "jinja2"},
    {name: "Julia", mime: "text/x-julia", mode: "julia", ext: ["jl"]},
    {name: "Kotlin", mime: "text/x-kotlin", mode: "kotlin", ext: ["kt"]},
    {name: "LESS", mime: "text/x-less", mode: "css", ext: ["less"]},
    {name: "LiveScript", mime: "text/x-livescript", mode: "livescript", ext: ["ls"], alias: ["ls"]},
    {name: "Lua", mime: "text/x-lua", mode: "lua", ext: ["lua"]},
    {name: "Markdown", mime: "text/x-markdown", mode: "markdown", ext: ["markdown", "md", "mkd"]},
    {name: "mIRC", mime: "text/mirc", mode: "mirc"},
    {name: "MariaDB SQL", mime: "text/x-mariadb", mode: "sql"},
    {name: "Mathematica", mime: "text/x-mathematica", mode: "mathematica", ext: ["m", "nb"]},
    {name: "Modelica", mime: "text/x-modelica", mode: "modelica", ext: ["mo"]},
    {name: "MUMPS", mime: "text/x-mumps", mode: "mumps"},
    {name: "MS SQL", mime: "text/x-mssql", mode: "sql"},
    {name: "MySQL", mime: "text/x-mysql", mode: "sql"},
    {name: "Nginx", mime: "text/x-nginx-conf", mode: "nginx", file: /nginx.*\.conf$/i},
    {name: "NTriples", mime: "text/n-triples", mode: "ntriples", ext: ["nt"]},
    {name: "Objective C", mime: "text/x-objectivec", mode: "clike", ext: ["m", "mm"]},
    {name: "OCaml", mime: "text/x-ocaml", mode: "mllike", ext: ["ml", "mli", "mll", "mly"]},
    {name: "Octave", mime: "text/x-octave", mode: "octave", ext: ["m"]},
    {name: "Pascal", mime: "text/x-pascal", mode: "pascal", ext: ["p", "pas"]},
    {name: "PEG.js", mime: "null", mode: "pegjs", ext: ["jsonld"]},
    {name: "Perl", mime: "text/x-perl", mode: "perl", ext: ["pl", "pm"]},
    {name: "PHP", mime: "application/x-httpd-php", mode: "php", ext: ["php", "php3", "php4", "php5", "phtml"]},
    {name: "Pig", mime: "text/x-pig", mode: "pig", ext: ["pig"]},
    {name: "Plain Text", mime: "text/plain", mode: "null", ext: ["txt", "text", "conf", "def", "list", "log"]},
    {name: "PLSQL", mime: "text/x-plsql", mode: "sql", ext: ["pls"]},
    {name: "Properties files", mime: "text/x-properties", mode: "properties", ext: ["properties", "ini", "in"], alias: ["ini", "properties"]},
    {name: "Python", mime: "text/x-python", mode: "python", ext: ["py", "pyw"]},
    {name: "Puppet", mime: "text/x-puppet", mode: "puppet", ext: ["pp"]},
    {name: "Q", mime: "text/x-q", mode: "q", ext: ["q"]},
    {name: "R", mime: "text/x-rsrc", mode: "r", ext: ["r"], alias: ["rscript"]},
    {name: "reStructuredText", mime: "text/x-rst", mode: "rst", ext: ["rst"], alias: ["rst"]},
    {name: "RPM Changes", mime: "text/x-rpm-changes", mode: "rpm"},
    {name: "RPM Spec", mime: "text/x-rpm-spec", mode: "rpm", ext: ["spec"]},
    {name: "Ruby", mime: "text/x-ruby", mode: "ruby", ext: ["rb"], alias: ["jruby", "macruby", "rake", "rb", "rbx"]},
    {name: "Rust", mime: "text/x-rustsrc", mode: "rust", ext: ["rs"]},
    {name: "Sass", mime: "text/x-sass", mode: "sass", ext: ["sass"]},
    {name: "Scala", mime: "text/x-scala", mode: "clike", ext: ["scala"]},
    {name: "Scheme", mime: "text/x-scheme", mode: "scheme", ext: ["scm", "ss"]},
    {name: "SCSS", mime: "text/x-scss", mode: "css", ext: ["scss"]},
    {name: "Shell", mime: "text/x-sh", mode: "shell", ext: ["sh", "ksh", "bash"], alias: ["bash", "sh", "zsh"]},
    {name: "Sieve", mime: "application/sieve", mode: "sieve", ext: ["siv", "sieve"]},
    {name: "Slim", mimes: ["text/x-slim", "application/x-slim"], mode: "slim", ext: ["slim"]},
    {name: "Smalltalk", mime: "text/x-stsrc", mode: "smalltalk", ext: ["st"]},
    {name: "Smarty", mime: "text/x-smarty", mode: "smarty", ext: ["tpl"]},
    {name: "Solr", mime: "text/x-solr", mode: "solr"},
    {name: "Soy", mime: "text/x-soy", mode: "soy", ext: ["soy"], alias: ["closure template"]},
    {name: "SPARQL", mime: "application/sparql-query", mode: "sparql", ext: ["rq", "sparql"], alias: ["sparul"]},
    {name: "Spreadsheet", mime: "text/x-spreadsheet", mode: "spreadsheet", alias: ["excel", "formula"]},
    {name: "SQL", mime: "text/x-sql", mode: "sql", ext: ["sql"]},
    {name: "MariaDB", mime: "text/x-mariadb", mode: "sql"},
    {name: "sTeX", mime: "text/x-stex", mode: "stex"},
    {name: "LaTeX", mime: "text/x-latex", mode: "stex", ext: ["text", "ltx"], alias: ["tex"]},
    {name: "SystemVerilog", mime: "text/x-systemverilog", mode: "verilog", ext: ["v"]},
    {name: "Tcl", mime: "text/x-tcl", mode: "tcl", ext: ["tcl"]},
    {name: "Textile", mime: "text/x-textile", mode: "textile", ext: ["textile"]},
    {name: "TiddlyWiki ", mime: "text/x-tiddlywiki", mode: "tiddlywiki"},
    {name: "Tiki wiki", mime: "text/tiki", mode: "tiki"},
    {name: "TOML", mime: "text/x-toml", mode: "toml", ext: ["toml"]},
    {name: "Tornado", mime: "text/x-tornado", mode: "tornado"},
    {name: "troff", mime: "troff", mode: "troff", ext: ["1", "2", "3", "4", "5", "6", "7", "8", "9"]},
    {name: "Turtle", mime: "text/turtle", mode: "turtle", ext: ["ttl"]},
    {name: "TypeScript", mime: "application/typescript", mode: "javascript", ext: ["ts"], alias: ["ts"]},
    {name: "VB.NET", mime: "text/x-vb", mode: "vb", ext: ["vb"]},
    {name: "VBScript", mime: "text/vbscript", mode: "vbscript", ext: ["vbs"]},
    {name: "Velocity", mime: "text/velocity", mode: "velocity", ext: ["vtl"]},
    {name: "Verilog", mime: "text/x-verilog", mode: "verilog", ext: ["v"]},
    {name: "XML", mimes: ["application/xml", "text/xml"], mode: "xml", ext: ["xml", "xsl", "xsd"], alias: ["rss", "wsdl", "xsd"]},
    {name: "XQuery", mime: "application/xquery", mode: "xquery", ext: ["xy", "xquery"]},
    {name: "YAML", mime: "text/x-yaml", mode: "yaml", ext: ["yaml", "yml"], alias: ["yml"]},
    {name: "Z80", mime: "text/x-z80", mode: "z80", ext: ["z80"]}
  ];
  // Ensure all modes have a mime property for backwards compatibility
  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {
    var info = CodeMirror.modeInfo[i];
    if (info.mimes) info.mime = info.mimes[0];
  }

  CodeMirror.findModeByMIME = function(mime) {
    mime = mime.toLowerCase();
    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {
      var info = CodeMirror.modeInfo[i];
      if (info.mime == mime) return info;
      if (info.mimes) for (var j = 0; j < info.mimes.length; j++)
        if (info.mimes[j] == mime) return info;
    }
  };

  CodeMirror.findModeByExtension = function(ext) {
    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {
      var info = CodeMirror.modeInfo[i];
      if (info.ext) for (var j = 0; j < info.ext.length; j++)
        if (info.ext[j] == ext) return info;
    }
  };

  CodeMirror.findModeByFileName = function(filename) {
    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {
      var info = CodeMirror.modeInfo[i];
      if (info.file && info.file.test(filename)) return info;
    }
    var dot = filename.lastIndexOf(".");
    var ext = dot > -1 && filename.substring(dot + 1, filename.length);
    if (ext) return CodeMirror.findModeByExtension(ext);
  };

  CodeMirror.findModeByName = function(name) {
    name = name.toLowerCase();
    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {
      var info = CodeMirror.modeInfo[i];
      if (info.name.toLowerCase() == name) return info;
      if (info.alias) for (var j = 0; j < info.alias.length; j++)
        if (info.alias[j].toLowerCase() == name) return info;
    }
  };
});
</script>
<script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    mod(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css"));
  else if (typeof define == "function" && define.amd) // AMD
    define(["../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css"], mod);
  else // Plain browser env
    mod(CodeMirror);
})(function(CodeMirror) {
"use strict";

CodeMirror.defineMode("htmlmixed", function(config, parserConfig) {
  var htmlMode = CodeMirror.getMode(config, {name: "xml",
                                             htmlMode: true,
                                             multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,
                                             multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag});
  var cssMode = CodeMirror.getMode(config, "css");

  var scriptTypes = [], scriptTypesConf = parserConfig && parserConfig.scriptTypes;
  scriptTypes.push({matches: /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,
                    mode: CodeMirror.getMode(config, "javascript")});
  if (scriptTypesConf) for (var i = 0; i < scriptTypesConf.length; ++i) {
    var conf = scriptTypesConf[i];
    scriptTypes.push({matches: conf.matches, mode: conf.mode && CodeMirror.getMode(config, conf.mode)});
  }
  scriptTypes.push({matches: /./,
                    mode: CodeMirror.getMode(config, "text/plain")});

  function html(stream, state) {
    var tagName = state.htmlState.tagName;
    if (tagName) tagName = tagName.toLowerCase();
    var style = htmlMode.token(stream, state.htmlState);
    if (tagName == "script" && /\btag\b/.test(style) && stream.current() == ">") {
      // Script block: mode to change to depends on type attribute
      var scriptType = stream.string.slice(Math.max(0, stream.pos - 100), stream.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);
      scriptType = scriptType ? scriptType[1] : "";
      if (scriptType && /[\"\']/.test(scriptType.charAt(0))) scriptType = scriptType.slice(1, scriptType.length - 1);
      for (var i = 0; i < scriptTypes.length; ++i) {
        var tp = scriptTypes[i];
        if (typeof tp.matches == "string" ? scriptType == tp.matches : tp.matches.test(scriptType)) {
          if (tp.mode) {
            state.token = script;
            state.localMode = tp.mode;
            state.localState = tp.mode.startState && tp.mode.startState(htmlMode.indent(state.htmlState, ""));
          }
          break;
        }
      }
    } else if (tagName == "style" && /\btag\b/.test(style) && stream.current() == ">") {
      state.token = css;
      state.localMode = cssMode;
      state.localState = cssMode.startState(htmlMode.indent(state.htmlState, ""));
    }
    return style;
  }
  function maybeBackup(stream, pat, style) {
    var cur = stream.current();
    var close = cur.search(pat);
    if (close > -1) stream.backUp(cur.length - close);
    else if (cur.match(/<\/?$/)) {
      stream.backUp(cur.length);
      if (!stream.match(pat, false)) stream.match(cur);
    }
    return style;
  }
  function script(stream, state) {
    if (stream.match(/^<\/\s*script\s*>/i, false)) {
      state.token = html;
      state.localState = state.localMode = null;
      return null;
    }
    return maybeBackup(stream, /<\/\s*script\s*>/,
                       state.localMode.token(stream, state.localState));
  }
  function css(stream, state) {
    if (stream.match(/^<\/\s*style\s*>/i, false)) {
      state.token = html;
      state.localState = state.localMode = null;
      return null;
    }
    return maybeBackup(stream, /<\/\s*style\s*>/,
                       cssMode.token(stream, state.localState));
  }

  return {
    startState: function() {
      var state = htmlMode.startState();
      return {token: html, localMode: null, localState: null, htmlState: state};
    },

    copyState: function(state) {
      if (state.localState)
        var local = CodeMirror.copyState(state.localMode, state.localState);
      return {token: state.token, localMode: state.localMode, localState: local,
              htmlState: CodeMirror.copyState(htmlMode, state.htmlState)};
    },

    token: function(stream, state) {
      return state.token(stream, state);
    },

    indent: function(state, textAfter) {
      if (!state.localMode || /^\s*<\//.test(textAfter))
        return htmlMode.indent(state.htmlState, textAfter);
      else if (state.localMode.indent)
        return state.localMode.indent(state.localState, textAfter);
      else
        return CodeMirror.Pass;
    },

    innerMode: function(state) {
      return {state: state.localState || state.htmlState, mode: state.localMode || htmlMode};
    }
  };
}, "xml", "javascript", "css");

CodeMirror.defineMIME("text/html", "htmlmixed");

});
</script>
<!--
## Code-Mirror
Polymer element wrapping [CodeMirror](http://codemirror.net)

### What is this?
Code-Mirror is a Web Component made with [Polymer](https://www.polymer-project.org/) that wraps a default text-area with CodeMirror's highlight syntax, plugins and options.

### Installation and usage

`bower install --save advanced-rest-client/code-mirror`

### Example:

```html
...
<head>
    <link rel="import" href="bower_components/code-mirror/code-mirror.html"/>
</head>
<body>
  <code-mirror import-location="/bower_components/codemirror/" mode="javascript" theme="ambiance" line-numbers on-change="valueChanged">
      function myScript() {
        return 100;
      }
  </code-mirror>
</body>
```
The `<code-mirror import-location="/bower_components/codemirror/">` element must be initialized with the `mode` property set. Otherwise it will initialize itself without any syntaxt highlighting, indent and autofill support.

### Accessing options
The element exposes the `setOption()` function that should be used to set editor options.

```
this.$.cm.setOption('extraKeys', {
  'Ctrl-Space': (cm) => {
    CodeMirror.showHint(cm, CodeMirror.hint['http-headers'], {
      container: Polymer.dom(this.root)
    });
  }
});
```

Additionaly the element has the `editor` property which is a refferene to CodeMirror instance.

### Rendering hidden element
CodeMirror has issues with rendering while the element is hidden. If the element is active
but not visible (e.g. in `<iron-pages>` element) then you may want to call `refresh()`
function on a CodeMirror instance after showing the element.

### Styling
`<code-mirror import-location="/bower_components/codemirror/">` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--code-mirror` | Mixin applied to the element | `{}`
`--code-mirror-wrapper` | Mixin applied to the wrapper element (where the CM is rendered) | `{}`
`--code-mirror-editor` | Mixin applied to the editor element  | `{}`

@group UI Elements
@element code-mirror
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="code-mirror" assetpath="bower_components/code-mirror/">
  <style>
  :host {
    display: block;
    @apply(--code-mirror);
  }
  #content {
    display: none;
  }
  #wrapper {
    @apply(--code-mirror-wrapper);
  }
  #wrapper .CodeMirror {
    @apply(--code-mirror-editor);
  }
  </style>
  <template strip-whitespace="">
    <style is="custom-style" include="codemirror"></style>
    <style is="custom-style" include="xq-light"></style>
    <div id="wrapper"></div>
    <div id="content">
      <content></content>
    </div>
  </template>
  <script>(function() {
'use strict';

var importLocation = '';
(function() {
  var url;
  if (window.currentImport && window.currentImport.URL) {
    url = window.currentImport.URL;
    if (window.currentImport._URL) {
      url = window.currentImport._URL;
    }
  } else if (window.currentImport._URL) {
    url = window.currentImport._URL;
  } else {
    url = window.location.href;
  }
  if (url === 'about:blank') {
    importLocation = '../';
    // in test cases for edge this will fail because it should be set to ../../
    // but right now I can't waste time to check how to check if this is the particular case.
  } else {
    var path = url.substr(url.indexOf('/', 8));
    path = path.substr(0, path.lastIndexOf('/') + 1);
    if (path.indexOf('/test') !== -1 || path.indexOf('/demo') !== -1) {
      path = path.substr(0, path.length - 1);
      path = path.substr(0, path.lastIndexOf('/') + 1);
    }
    importLocation = path;
  }
})();

Polymer({
  is: 'code-mirror',
  /**
   * Fires every time the content of the editor is changed.
   *
   * @event change
   * @param {Object} change Is a `{from, to, text, removed, origin}` object
   *    containing information about the changes that occurred
   */
  /**
   * Fired before a change is applied, and its handler may choose to modify or
   * cancel the change.
   *
   * @event before-change
   * @param {Object} change It has `from`, `to`, and `text` properties, as with the `change` event.
   *
   *    It also has a `cancel()` method, which can be called to cancel the change, and, if the
   *  change isn't coming from an undo or redo event, an `update(from, to, text)` method, which
   *  may be used to modify the change.
   */
  properties: {
    /**
     * An array of options to set after the editor has been created.
     *
     * @type {Array}
     */
    _pendingOptions: {
      type: Array,
      value: []
    },
    /**
     * Editor's value.
     * If set at initialization time any content inside this element will be replaced by this
     * value.
     *
     * @type {String}
     */
    value: {
      type: String,
      notify: true,
      observer: '_valueChanged'
    },
    /**
     * The mode to use. When not given, this will default to the first mode that was loaded.
     * It may be a string, which either simply names the mode or is a MIME type associated with
     * the mode.
     * Alternatively, it may be an object containing configuration options for the mode, with
     * a name property that names the mode. For example
     * <code>{name: "javascript", json: true}</code>
     *
     * @type {String}
     */
    mode: {
      type: String,
      value: 'htmlmixed',
      observer: '_modeChanged'
    },
    /**
     * Explicitly set the line separator for the editor. By default (value null), the document
     * will be split on CRLFs as well as lone CRs and LFs, and a single LF will be used as line
     * separator in all output.
     *
     * @type {String}
     */
    lineSeparator: {
      type: String,
      observer: '_lineSeparatorChanged'
    },
    /**
     * The theme to style the editor with.
     *
     * @type {String}
     */
    theme: {
      type: String,
      value: 'xq-light',
      observer: '_themeChanged'
    },
    /**
     * The width of a tab character.
     * Defaults to 2.
     *
     * @type {Number}
     */
    tabSize: {
      type: Number,
      observer: '_tabSizeChanged'
    },
    /**
     * Whether to show line numbers to the left of the editor.
     *
     * @type {Boolean}
     */
    lineNumbers: {
      type: Boolean,
      observer: '_lineNumbersChanged'
    },
    /**
     * Whether to use the context-sensitive indentation that the mode provides (or just indent
     * the same as the line before).
     *
     * @type {Boolean}
     */
    smartIndent: {
      type: Boolean,
      observer: '_smartIndentChanged'
    },
    /**
     * Configures the key map to use. The default is "default", which is the only key map defined
     * in codemirror.js itself.
     *
     * @type {String}
     */
    keyMap: {
      type: String,
      observer: '_keyMapChanged'
    },
    /**
     * Whether CodeMirror should scroll or wrap for long lines. Defaults to false (scroll).
     *
     * @type {Boolean}
     */
    lineWrapping: {
      type: Boolean,
      observer: '_lineWrappingChanged'
    },
    /**
     * This disables editing of the editor content by the user. If the special value "nocursor"
     * is given (instead of simply true), focusing of the editor is also disallowed.
     *
     * @type {Boolean}
     */
    readOnly: {
      type: Boolean,
      observer: '_readOnlyChanged'
    },
    /**
     * Whether the cursor should be drawn when a selection is active.
     *
     * @type {Boolean}
     */
    showCursorWhenSelecting: {
      type: Boolean,
      observer: '_showCursorWhenSelectingChanged'
    },
    /**
     * When enabled, which is the default, doing copy or cut when there is no selection will copy
     * or cut the whole lines that have cursors on them.
     *
     * @type {Boolean}
     */
    lineWiseCopyCut: {
      type: Boolean,
      observer: '_lineWiseCopyCutChanged'
    },
    /**
     * The maximum number of undo levels that the editor stores. Note that this includes selection
     * change events. Defaults to 200.
     *
     * @type {Boolean}
     */
    undoDepth: {
      type: Number,
      observer: '_undoDepthChanged'
    },
    /**
     * The period of inactivity (in milliseconds) that will cause a new history event to be
     * started when typing or deleting. Defaults to 1250.
     *
     * @type {Number}
     */
    historyEventDelay: {
      type: Number,
      observer: '_historyEventDelayChanged'
    },
    /**
     * Can be used to make CodeMirror focus itself on initialization. Defaults to off.
     *
     * @type {Boolean}
     */
    autofocus: {
      type: Boolean,
      observer: '_autofocusChanged'
    },
    /**
     * A reference to the CodeMirror instance.
     *
     * @type {Object}
     */
    editor: {
      type: Object,
      readOnly: true
    },
    /**
     * Fires every time the content of the editor is changed.
     *
     * @type {Function}
     */
    _changeHandler: {
      value: function() {
        return this._onChangeEvent.bind(this);
      }
    },
    /**
     * This event is fired before a change is applied, and its handler may choose to modify or
     * cancel the change.
     *
     * @type {Function}
     */
    _beforeChangeHandler: {
      value: function() {
        return this._onBeforeChangeEvent.bind(this);
      }
    },
    /**
     * Tru when value change observer shouldn't set the edir value.
     * E.g. when setting `value` on editor change.
     */
    _settingInternal: Boolean,
    /**
     * Import location of code mirror assets. Relative path to code-mirror directory.
     * This value will be assigned to CodeMirror.modeURL that is used to import scripts. Also the
     * `/mode/%N/%N.js` suffix will be added to the location.
     */
    importLocation: {
      type: String,
      value: function() {
        if (importLocation) {
          // it will be something like /some/path/code-mirror/
          // ad we need /some/path only.
          importLocation = importLocation.replace('code-mirror/', 'codemirror/');
          var base = document.querySelector('base');
          if (base && base.href) {
            if (importLocation[0] === '/') {
              importLocation = importLocation.substr(1);
            }
          }
        }
        return importLocation;
      }
    }
  },

  observers: [
    '_importLocationChanegd(importLocation)'
  ],

  ready: function() {
    if (!this.value) {
      this.value = this.textContent.trim();
    }
    try {
      var editor = CodeMirror(this.$.wrapper, {
        value: this.value,
        mode: this.mode,
        theme: this.theme
      });
      this._setEditor(editor);
      this._pendingOptions.forEach(function(item) {
        this.setOption(item.option, item.value);
        if (item.post) {
          try {
            item.post();
          } catch (e) {}
        }
      }, this);
    } catch (e) {
      console.error('Unable to initialize CodeMirror.', e);
      this.fire('error', e);
    }
  },
  /**
   * Refresh the content when attached to the DOM.
   */
  attached: function() {
    if (!this.editor) {
      return;
    }
    this.editor.on('change', this._changeHandler);
    this.editor.on('beforeChange', this._beforeChangeHandler);
    this.editor.refresh();
    this.focus();
  },

  detached: function() {
    if (!this.editor) {
      return;
    }
    this.editor.off('change', this._changeHandler);
    this.editor.off('beforeChange', this._beforeChangeHandler);
  },
  /**
   * Focus cursor on an editor.
   */
  focus: function() {
    if (!this.editor) {
      return;
    }
    this.editor.focus();
  },
  /**
   * Set option on an editor.
   *
   * @param {String} option An option name to setOption
   * @param {Any} value A value to be set.
   */
  setOption: function(option, value) {
    if (!this.editor) {
      this._pendingOptions.push({
        option: option,
        value: value
      });
      return;
    }
    this.editor.setOption(option, value);
  },
  /**
   * Set an editor value when `value` property changed.
   */
  _valueChanged: function() {
    if (!this.editor) {
      return;
    }

    if (this.editor.getValue() !== this.value && this.value !== undefined && this.value !== null) {
      //console.log('CodeMirror value changed');
      this.editor.setValue(this.value);
    }
  },
  /** Auto-called when mode has changed */
  _modeChanged: function() {
    var val = this.mode;
    var mode;
    var spec;
    var info;
    var m = /.+\.([^.]+)$/.exec(val);
    if (m) {
      info = CodeMirror.findModeByExtension(m[1]);
      if (info) {
        mode = info.mode;
        spec = info.mime;
      }
    } else if (/\//.test(val)) {
      info = CodeMirror.findModeByMIME(val);
      if (info) {
        mode = info.mode;
        spec = val;
      }
    } else {
      mode = spec = val;
    }
    if (!this.editor) {
      this._pendingOptions.push({
        option: 'mode',
        value: mode,
        post: function() {
          CodeMirror.autoLoadMode(this.editor, mode);
        }.bind(this)
      });
      return;
    }
    if (!mode) {
      // spec = 'text/html';
      // mode = 'htmlmixed';

      // disable CM
      this.setOption('mode', null);
      return;
    }
    this.setOption('mode', spec);
    CodeMirror.autoLoadMode(this.editor, mode);
  },
  /** Auto-called when `theme` property has changed  */
  _themeChanged: function(newTheme) {
    newTheme = newTheme || 'xq-light';
    var dom = Polymer.dom(this.root);
    var old = dom.querySelector('[data-theme]');
    if (old) {
      dom.removeChild(old);
    }
    var s = document.createElement('style', 'custom-style');
    s.include = newTheme;
    s.dataset.theme = newTheme;
    dom.appendChild(s);
    this.setOption('theme', newTheme);
    this.updateStyles();
  },

  _tabSizeChanged: function() {
    this.setOption('tabSize', this.tabSize);
  },
  _lineNumbersChanged: function() {
    this.setOption('lineNumbers', this.lineNumbers);
  },
  _lineSeparatorChanged: function() {
    this.setOption('lineSeparator', this.lineSeparator);
  },
  _smartIndentChanged: function() {
    this.setOption('smartIndent', this.smartIndent);
  },
  _keyMapChanged: function() {
    this.setOption('keyMap', this.keyMap);
  },
  _lineWrappingChanged: function() {
    this.setOption('lineWrapping', this.lineWrapping);
  },
  _readOnlyChanged: function() {
    this.setOption('readOnly', this.readOnly);
  },
  _showCursorWhenSelectingChanged: function() {
    this.setOption('showCursorWhenSelecting', this.showCursorWhenSelecting);
  },
  _lineWiseCopyCutChanged: function() {
    this.setOption('lineWiseCopyCut', this.lineWiseCopyCut);
  },
  _undoDepthChanged: function() {
    this.setOption('undoDepth', this.undoDepth);
  },
  _historyEventDelayChanged: function() {
    this.setOption('historyEventDelay', this.historyEventDelay);
  },
  _autofocusChanged: function() {
    this.setOption('autofocus', this.autofocus);
  },
  _onChangeEvent: function(instance, changeObj) {
    this.set('value', this.editor.getValue());
    this.fire('change', {
      change: changeObj
    });
  },
  _onBeforeChangeEvent: function(instance, changeObj) {
    var e = this.fire('before-change', {
      change: changeObj
    });
    if (e.detail.change.canceled) {
      this.set('value', this.editor.getValue());
    }
  },
  /**
   * Sets the CodeMirror.modeURL variable value.
   * To thre import location it will add a `mode/%N/%N.js` pattern.
   */
  _importLocationChanegd: function(importLocation) {
    if (importLocation[importLocation - 1] !== '/') {
      importLocation += '/';
    }
    CodeMirror.modeURL = importLocation + 'mode/%N/%N.js';
  }
});
})();
</script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(g) {
  'use strict';
  g.ArcBehaviors = g.ArcBehaviors || {};
  /**
   * A set of common properties and function used by all elements in the JSON editor.
   *
   * @polymerBehavior ArcBehaviors.BodyJsonEditorBehavior
   */
  g.ArcBehaviors.BodyJsonEditorBehavior = {
    properties: {
      /**
       * The value of the editor. It is the part of the model created in the `body-json-editor`.
       */
      value: {
        type: Object,
        notify: true
      },
      // If true then this element should not show a key field (if possible).
      noKey: {
        type: Boolean
      },
      // A list of suggestion for the name input
      nameSuggestions: Array,
      // Generated schema that contains a possible name / type combination.
      schema: Array,
      // A computed schema for children of this object
      subPropertySchema: {
        type: Array,
        readOnly: true
      },
      // A description for given property. It will be set automatically if name exists in the
      // schema and it has the `description` propery.
      description: String,
      /**
       * List of allowed types that the `simple-type-editor` can show in type selector (or just
       * the user can choose from the types list).
       * This value will be computed if the `schema` is set and will limit array items' types.
       *
       * Keep in mind to keep some value othen than `undefined` on this property or the types
       * list won't be calculated at all.
       */
      allowedTypes: {
        type: Array,
        // value: null
      },
      // Display form in the narrow layout
      narrow: {
        type: Boolean,
        reflectToAttribute: true
      }
    },

    observers: [
      '_schemaChanged(schema.*)',
      '_computeChildSchema(value.name, value.type, schema.*)'
    ],

    /**
     * Check if given type (first arg) is the type in second argument or one of next arguments.
     *
     * @param {String} type Name of the type
     * @param {...String} arguments List of type names
     * @return {Boolean} true if the type is one of the arguments.
     */
    _typeIs: function() {
      var args = Array.from(arguments);
      var type = args.shift();
      return args.indexOf(type) !== -1;
    },
    /**
     * A handler to the schema change.
     * It extracts a list of names from the schema and sets the list of suggestions.
     */
    _schemaChanged: function(record) {
      var s = record.base;
      if (!s || !s.length) {
        this.nameSuggestions = [];
        return;
      }
      // We need only names from the first level of properties. If any property
      // in an object or an array we don't have to put it's children names here.
      // it will be done by extracting this information to the child elements.
      var suggestions = [];
      s.forEach(function(item) {
        if (item instanceof Array) {
          // Union type
          for (var i = 0, len = item.length; i < len; i++) {
            if (suggestions.indexOf(item[i].key) === -1) {
              // In union type duplicates are possible.
              suggestions[suggestions.length] = item[i].key;
            }
          }
        } else {
          if (suggestions.indexOf(item.key) === -1) {
            suggestions[suggestions.length] = item.key;
          }
        }
      });

      if (!suggestions.length) {
        this.nameSuggestions = [];
        return;
      }
      this.set('nameSuggestions', suggestions);
    },
    /**
     * A generic handler for the property name suggestion.
     * It will set the name and the type if the type can be determined from the schema.
     */
    _onSuggestion: function(e) {
      var key = e.detail.value;
      var property = this._getSchemaPropery(key);
      if (!property) {
        return;
      }
      var type = property.type;
      if (type) {
        if (type === 'any') {
          type = '';
        }
        this.set('value.type', type);
        if (type === 'object') {
          this._fillDefaultChildren(property);
        } else if (type === 'array') {
          this._fillDefaultArrayChildren(property);
          // this._setAllowedArrayTypes(property);
        }
      }
      if (property.description) {
        this.description = property.description;
      } else {
        this.description = undefined;
      }
    },
    /**
     * Finds a schema property for given name.
     *
     * @param {String} propertyName The key of the property name in the schema.
     * In case of Union types it will return the first occurence (doesn't really matter).
     * @return {Object|undefined} A property definiotion (the same as in RAML parser output)
     * of undefined if not found.
     */
    _getSchemaPropery: function(propertyName) {
      var p = this.schema;
      var property;
      for (var i = 0, len = p.length; i < len; i++) {
        if (property) {
          break;
        }
        var _item = p[i];
        if (_item instanceof Array) {
          for (var j = 0, _itemLen = _item.length; j < _itemLen; j++) {
            if (_item[j].key === propertyName) {
              property = _item[j];
              break;
            }
          }
        } else {
          if (p[i].key === propertyName) {
            property = p[i];
            break;
          }
        }
      }

      return property;
    },
    // Computes a schema definition for a child of current object.
    _computeChildSchema: function(name, type, record) {
      if (!type || ['object','array','any'].indexOf(type) === -1) {
        return this._setSubPropertySchema(undefined);
      }
      var schema = record.base;
      if (!name) {
        return this._setSubPropertySchema(schema);
      }
      var property = this._getSchemaPropery(name);
      if (property) {
        property = this._generateJsonSchema(property);
        return this._setSubPropertySchema(property);
      }
      return this._setSubPropertySchema(undefined);
    },

    /**
     * Generates a schema object for the JSON editor.
     * The schema is a list of properties from the RAML definition.
     */
    _generateJsonSchema: function(object) {
      object = object || {};
      var properties = (object && object.properties) ? object.properties : [];
      if (object.type === 'union' && object.anyOf && object.anyOf.length) {
        var result = [];
        object.anyOf.forEach(function(item) {
          if (item.properties) {
            result[result.length] = properties.concat(item.properties);
          }
        });
        properties = result;
      } else if (object.type === 'array') {
        // console.warn('Support arrays <3');
        // debugger;
        properties = object.items;
      }
      return properties;
    },
    /**
     * When type change and there's a schema and the object is of type Object then it will
     * update object's child properties automatically.
     *
     * @param {Object} property Schema property. It's `properties` object contains a definition
     * of children.
     */
    _fillDefaultChildren: function(property) {
      if (!property || !property.properties || !property.properties.length) {
        return;
      }
      var properties = property.properties;
      if (!this.value.properties) {
        this.set('value.properties', []);
      }

      properties.forEach(function(property) {
        if (!property.key && !property.name) {
          return;
        }
        var item = Object.assign({}, property);
        if (!item.name && property.key) {
          item.name = property.key;
        }
        if (!item.key && property.name) {
          item.key = property.name;
        }
        this.push('value.properties', item);
      }, this);
    },
    /**
     * Sets the child properties on the array type object.
     * Similar to `_fillDefaultChildren()` but for arrays.
     *
     * @param {Object} property Schema property. It's `items` object contains a definition
     * of children.
     */
    _fillDefaultArrayChildren: function(property) {
      if (!property || !property.items || !property.items.length) {
        return;
      }
      var properties = property.items;
      if (!this.value.items) {
        this.set('value.items', []);
      }
      properties.forEach(function(property) {
        var item = Object.assign({}, property);
        this.push('value.items', item);
      }, this);
    },
    // /**
    //  * Extracts child types of the array and sets the `allowedTypes` property on this element
    //  * that is passed to the child object preventing them to display full type selector.
    //  * The type selector will be limited to the ones computed by this function.
    //  *
    //  * @param {Object} property Schema property. It's `items` object contains a definition
    //  * of children.
    //  */
    // _setAllowedArrayTypes: function(property) {
    //   var allowedTypes = [];
    //   if (!property || !property.items || !property.items.length) {
    //     this.set('allowedTypes', allowedTypes);
    //     return;
    //   }
    //   var properties = property.items;
    //   properties.forEach(function(item) {
    //     if (!item.type) {
    //       return;
    //     }
    //     if (allowedTypes.indexOf(item.type) !== -1) {
    //       return;
    //     }
    //     allowedTypes[allowedTypes.length] = item.type;
    //   });
    //   this.set('allowedTypes', allowedTypes);
    // }
  };
})(window);
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!-- <link rel="import" href="../paper-menu-button/paper-menu-button.html"> -->
<!-- <link rel="import" href="../paper-menu/paper-menu.html"> -->
<!--
@license
Copyright 2016 Pawel Psztyc, The ARC team

Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Material design: [Cards](https://www.google.com/design/spec/components/cards.html)

`paper-material` is a container that renders two shadows on top of each other to
create the effect of a lifted piece of paper.

Example:

    <paper-material elevation="1">
      ... content ...
    </paper-material>

@group Paper Elements
@demo demo/index.html
-->

<dom-module id="paper-material" assetpath="bower_components/paper-material/">
  <template>
    <style include="paper-material-shared-styles"></style>
    <style>
      :host([animated]) {
        @apply(--shadow-transition);
      }
      :host {
        @apply(--paper-material);
      }
    </style>

    <content></content>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'paper-material',

    properties: {
      /**
       * The z-depth of this element, from 0-5. Setting to 0 will remove the
       * shadow, and each increasing number greater than 0 will be "deeper"
       * than the last.
       *
       * @attribute elevation
       * @type number
       * @default 1
       */
      elevation: {
        type: Number,
        reflectToAttribute: true,
        value: 1
      },

      /**
       * Set this to true to animate the shadow when setting a new
       * `elevation` value.
       *
       * @attribute animated
       * @type boolean
       * @default false
       */
      animated: {
        type: Boolean,
        reflectToAttribute: true,
        value: false
      }
    }
  });
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

/**
`iron-a11y-keys` provides a cross-browser interface for processing
keyboard commands. The interface adheres to [WAI-ARIA best
practices](http://www.w3.org/TR/wai-aria-practices/#kbd_general_binding).
It uses an expressive syntax to filter key presses.

## Basic usage

The sample code below is a portion of a custom element. The goal is to call
the `onEnter` method whenever the `paper-input` element is in focus and
the `Enter` key is pressed.

    <iron-a11y-keys id="a11y" target="[[target]]" keys="enter"
                        on-keys-pressed="onEnter"></iron-a11y-keys>
    <paper-input id="input"
                 placeholder="Type something. Press enter. Check console."
                 value="{{userInput::input}}"></paper-input>

The custom element declares an `iron-a11y-keys` element that is bound to a
property called `target`. The `target` property
needs to evaluate to the `paper-input` node. `iron-a11y-keys` registers
an event handler for the target node using Polymer's [annotated event handler
syntax](https://www.polymer-project.org/1.0/docs/devguide/events.html#annotated-listeners). `{{userInput::input}}` sets the `userInput` property to the
user's input on each keystroke.

The last step is to link the two elements within the custom element's
registration.

    ...
    properties: {
      userInput: {
        type: String,
        notify: true,
      },
      target: {
        type: Object,
        value: function() {
          return this.$.input;
        }
      },
    },
    onEnter: function() {
      console.log(this.userInput);
    }
    ...

## The `keys` attribute

The `keys` attribute expresses what combination of keys triggers the event.

The attribute accepts a space-separated, plus-sign-concatenated
set of modifier keys and some common keyboard keys.

The common keys are: `a-z`, `0-9` (top row and number pad), `*` (shift 8 and
number pad), `F1-F12`, `Page Up`, `Page Down`, `Left Arrow`, `Right Arrow`,
`Down Arrow`, `Up Arrow`, `Home`, `End`, `Escape`, `Space`, `Tab`, `Enter`.

The modifier keys are: `Shift`, `Control`, `Alt`, `Meta`.

All keys are expected to be lowercase and shortened. E.g.
`Left Arrow` is `left`, `Page Down` is `pagedown`, `Control` is `ctrl`,
`F1` is `f1`, `Escape` is `esc`, etc.

### Grammar

Below is the [EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)
Grammar of the `keys` attribute.

    modifier = "shift" | "ctrl" | "alt" | "meta";
    ascii = ? /[a-z0-9]/ ? ;
    fnkey = ? f1 through f12 ? ;
    arrow = "up" | "down" | "left" | "right" ;
    key = "tab" | "esc" | "space" | "*" | "pageup" | "pagedown" |
          "home" | "end" | arrow | ascii | fnkey;
    event = "keypress" | "keydown" | "keyup";
    keycombo = { modifier, "+" }, key, [ ":", event ] ;
    keys = keycombo, { " ", keycombo } ;

### Example

Given the following value for `keys`:

`ctrl+shift+f7 up pagedown esc space alt+m`

The event is fired if any of the following key combinations are fired:
`Control` and `Shift` and `F7` keys, `Up Arrow` key, `Page Down` key,
`Escape` key, `Space` key, `Alt` and `M` keys.

### WAI-ARIA Slider Example

The following is an example of the set of keys that fulfills WAI-ARIA's
"slider" role [best
practices](http://www.w3.org/TR/wai-aria-practices/#slider):

    <iron-a11y-keys target="[[target]]" keys="left pagedown down"
                    on-keys-pressed="decrement"></iron-a11y-keys>
    <iron-a11y-keys target="[[target]]" keys="right pageup up"
                    on-keys-pressed="increment"></iron-a11y-keys>
    <iron-a11y-keys target="[[target]]" keys="home"
                    on-keys-pressed="setMin"></iron-a11y-keys>
    <iron-a11y-keys target="[[target]]" keys="end"
                    on-keys-pressed="setMax"></iron-a11y-keys>

The `target` properties must evaluate to a node. See the basic usage
example above.

Each of the values for the `on-keys-pressed` attributes must evalute
to methods. The `increment` method should move the slider a set amount
toward the maximum value. `decrement` should move the slider a set amount
toward the minimum value. `setMin` should move the slider to the minimum
value. `setMax` should move the slider to the maximum value.

@demo demo/index.html
*/



  Polymer({
    is: 'iron-a11y-keys',

    behaviors: [
      Polymer.IronA11yKeysBehavior
    ],

    properties: {
      /** @type {?Node} */
      target: {
        type: Object,
        observer: '_targetChanged'
      },

      /**
       * Space delimited list of keys where each key follows the format:
       * `[MODIFIER+]*KEY[:EVENT]`.
       * e.g. `keys="space ctrl+shift+tab enter:keyup"`.
       * More detail can be found in the "Grammar" section of the documentation
       */
      keys: {
        type: String,
        reflectToAttribute: true,
        observer: '_keysChanged'
      }
    },

    attached: function() {
      if (!this.target) {
        this.target = this.parentNode;
      }
    },

    _targetChanged: function(target) {
      this.keyEventTarget = target;
    },

    _keysChanged: function() {
      this.removeOwnKeyBindings();
      this.addOwnKeyBinding(this.keys, '_fireKeysPressed');
    },

    _fireKeysPressed: function(event) {
      this.fire('keys-pressed', event.detail, {});
    }
  });
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

 /**
 * `iron-range-behavior` provides the behavior for something with a minimum to maximum range.
 *
 * @demo demo/index.html
 * @polymerBehavior
 */
 Polymer.IronRangeBehavior = {

  properties: {

    /**
     * The number that represents the current value.
     */
    value: {
      type: Number,
      value: 0,
      notify: true,
      reflectToAttribute: true
    },

    /**
     * The number that indicates the minimum value of the range.
     */
    min: {
      type: Number,
      value: 0,
      notify: true
    },

    /**
     * The number that indicates the maximum value of the range.
     */
    max: {
      type: Number,
      value: 100,
      notify: true
    },

    /**
     * Specifies the value granularity of the range's value.
     */
    step: {
      type: Number,
      value: 1,
      notify: true
    },

    /**
     * Returns the ratio of the value.
     */
    ratio: {
      type: Number,
      value: 0,
      readOnly: true,
      notify: true
    },
  },

  observers: [
    '_update(value, min, max, step)'
  ],

  _calcRatio: function(value) {
    return (this._clampValue(value) - this.min) / (this.max - this.min);
  },

  _clampValue: function(value) {
    return Math.min(this.max, Math.max(this.min, this._calcStep(value)));
  },

  _calcStep: function(value) {
    // polymer/issues/2493
    value = parseFloat(value);

    if (!this.step) {
      return value;
    }

    var numSteps = Math.round((value - this.min) / this.step);
    if (this.step < 1) {
     /**
      * For small values of this.step, if we calculate the step using
      * `Math.round(value / step) * step` we may hit a precision point issue
      * eg. 0.1 * 0.2 =  0.020000000000000004
      * http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html
      *
      * as a work around we can divide by the reciprocal of `step`
      */
      return numSteps / (1 / this.step) + this.min;
    } else {
      return numSteps * this.step + this.min;
    }
  },

  _validateValue: function() {
    var v = this._clampValue(this.value);
    this.value = this.oldValue = isNaN(v) ? this.oldValue : v;
    return this.value !== v;
  },

  _update: function() {
    this._validateValue();
    this._setRatio(this._calcRatio(this.value) * 100);
  }

};
</script>
<!--
Material design: [Progress & activity](https://www.google.com/design/spec/components/progress-activity.html)

The progress bars are for situations where the percentage completed can be
determined. They give users a quick sense of how much longer an operation
will take.

Example:

    <paper-progress value="10"></paper-progress>

There is also a secondary progress which is useful for displaying intermediate
progress, such as the buffer level during a streaming playback progress bar.

Example:

    <paper-progress value="10" secondary-progress="30"></paper-progress>

### Styling progress bar:

To change the active progress bar color:

    paper-progress {
       --paper-progress-active-color: #e91e63;
    }

To change the secondary progress bar color:

    paper-progress {
      --paper-progress-secondary-color: #f8bbd0;
    }

To change the progress bar background color:

    paper-progress {
      --paper-progress-container-color: #64ffda;
    }

Add the class `transiting` to a paper-progress to animate the progress bar when
the value changed. You can also customize the transition:

    paper-progress {
      --paper-progress-transition-duration: 0.08s;
      --paper-progress-transition-timing-function: ease;
      --paper-progress-transition-transition-delay: 0s;
    }

To change the duration of the indeterminate cycle:

    paper-progress {
      --paper-progress-indeterminate-cycle-duration: 2s;
    }

The following mixins are available for styling:

Custom property                                  | Description                                 | Default
-------------------------------------------------|---------------------------------------------|--------------
`--paper-progress-container`                     | Mixin applied to container                  | `{}`
`--paper-progress-transition-duration`           | Duration of the transition                  | `0.008s`
`--paper-progress-transition-timing-function`    | The timing function for the transition      | `ease`
`--paper-progress-transition-delay`              | delay for the transition                    | `0s`
`--paper-progress-container-color`               | Color of the container                      | `--google-grey-300`
`--paper-progress-active-color`                  | The color of the active bar                 | `--google-green-500`
`--paper-progress-secondary-color`               | The color of the secondary bar              | `--google-green-100`
`--paper-progress-disabled-active-color`         | The color of the active bar if disabled     | `--google-grey-500`
`--paper-progress-disabled-secondary-color`      | The color of the secondary bar if disabled  | `--google-grey-300`
`--paper-progress-height`                        | The height of the progress bar              | `4px`
`--paper-progress-indeterminate-cycle-duration`  | Duration of an indeterminate cycle          | `2s`

@group Paper Elements
@element paper-progress
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-progress" assetpath="bower_components/paper-progress/">
  <template>
    <style>
      :host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]) {
        display: none !important;
      }

      #progressContainer {
        @apply(--paper-progress-container);
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply(--layout-fit);
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, --google-grey-300);
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply(--layout-fit);
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, --google-green-500);
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, --google-green-100);
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, --google-grey-500);
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, --google-grey-300);
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }
    </style>

    <div id="progressContainer">
      <div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div>
      <div id="primaryProgress"></div>
    </div>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'paper-progress',

    behaviors: [
      Polymer.IronRangeBehavior
    ],

    properties: {
      /**
       * The number that represents the current secondary progress.
       */
      secondaryProgress: {
        type: Number,
        value: 0
      },

      /**
       * The secondary ratio
       */
      secondaryRatio: {
        type: Number,
        value: 0,
        readOnly: true
      },

      /**
       * Use an indeterminate progress indicator.
       */
      indeterminate: {
        type: Boolean,
        value: false,
        observer: '_toggleIndeterminate'
      },

      /**
       * True if the progress is disabled.
       */
      disabled: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        observer: '_disabledChanged'
      }
    },

    observers: [
      '_progressChanged(secondaryProgress, value, min, max)'
    ],

    hostAttributes: {
      role: 'progressbar'
    },

    _toggleIndeterminate: function(indeterminate) {
      // If we use attribute/class binding, the animation sometimes doesn't translate properly
      // on Safari 7.1. So instead, we toggle the class here in the update method.
      this.toggleClass('indeterminate', indeterminate, this.$.primaryProgress);
    },

    _transformProgress: function(progress, ratio) {
      var transform = 'scaleX(' + (ratio / 100) + ')';
      progress.style.transform = progress.style.webkitTransform = transform;
    },

    _mainRatioChanged: function(ratio) {
      this._transformProgress(this.$.primaryProgress, ratio);
    },

    _progressChanged: function(secondaryProgress, value, min, max) {
      secondaryProgress = this._clampValue(secondaryProgress);
      value = this._clampValue(value);

      var secondaryRatio = this._calcRatio(secondaryProgress) * 100;
      var mainRatio = this._calcRatio(value) * 100;

      this._setSecondaryRatio(secondaryRatio);
      this._transformProgress(this.$.secondaryProgress, secondaryRatio);
      this._transformProgress(this.$.primaryProgress, mainRatio);

      this.secondaryProgress = secondaryProgress;

      this.setAttribute('aria-valuenow', value);
      this.setAttribute('aria-valuemin', min);
      this.setAttribute('aria-valuemax', max);
    },

    _disabledChanged: function(disabled) {
      this.setAttribute('aria-disabled', disabled ? 'true' : 'false');
    },

    _hideSecondaryProgress: function(secondaryRatio) {
      return secondaryRatio === 0;
    }
  });
</script>
<!--
# `<paper-autocomplete>`

Use `paper-autocomplete` to add autocomplete functionality to the input elements.
It also works wilt polymer inputs.

The element works with static list of suggestions or with dynamic (asynchronous)
operation that require calling te backend or local datastore.
In second case you should set `loader` property which will display a loader animation
while results are loaded.

You must associate suggestions with the input field. This can be done by passing
an element reference to the `target` property.

## Example:

### Static suggestions
```
<paper-input label="Enter fruit name" id="fruits"></paper-input>
<paper-autocomplete
  id="fruitsSuggestions"
  target="[[fruits]]"
  on-selected="_fruitSelected"></paper-input-autocomplete>

<script>
  document.querySelector('#fruitsSuggestions').source = ['Apple', 'Orange', 'Bananas'];
</script>
```
### Dynamic suggestions
```
<paper-input-container>
  <label>Enter friut name</label>
  <input is="iron-input" type="text" value="{{async::input}}" id="asyncField" />
</paper-input-container>
<paper-autocomplete loader id="fruitAsync" on-query="_asyncSuggestions"></paper-input-autocomplete>

<script>
  document.querySelector('#fruitAsync').target = document.querySelector('#asyncField');
  document.querySelector('#fruitAsync').addEventListener('query', (e) => {
    var query = e.detail.value;
    asyncQuery(query, (suggestions) => {
      document.querySelector('#fruitAsync').source = suggestions;
    });
  });
</script>
```

## Displaying the suggestions
Suggestions array can be either an array of strings or objects.
For strings, displayed in the list and inserted to the input field value is the same item.

You can set different list item display value and value inserted into the field when the array contains
onject. Each object must contain `value` and `display` properties where `value` property
will be inserted into the text field and `display` will be used to display description inside the list.

## Query event
The `query` event is fired when the user query change in the way so the element is
not able to display suggestions properly.
This means if the user add a letter to previously entered value the query event will not
fire since it already have list of suggestion that should be used to filter suggestions from.
And again when the user will delete a letter the element will still have list of
source suggestions to filter suggestions from.
However, if the user change the query entirely it will fire `query` event
and the app will expect to `source` to change. Setting source is not mandatory.

## Preventing from changing the input value
To prevent the element to update the value of the target input, listent for
`selected` event and cancel it by calling `event.preventDefault()` function.

## Styling
Suggestions are positioned absolutely! You must include relative positioned parent to contain the suggestion
display in the same area.
Use CSS properties to position the display in the left bottom corner of the input field.

`<paper-autocomplete>` provides the following custom properties and mixins
for styling:

| Custom property | Description | Default |
----------------|-------------|----------
| `--paper-autocomplete` | Mixin applied to the display | `{}` |

@group UI Elements
@element paper-autocomplete
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="paper-autocomplete" assetpath="bower_components/paper-autocomplete/">
  <style>
  :host {
    position: absolute !important;
    left: 0px;
    top: 52px;
    @apply(--paper-autocomplete);
  }

  paper-material {
    background-color: white;
  }

  #container {
    overflow: auto;
  }
  </style>
  <template>
    <paper-material elevation="2" id="container">
      <paper-progress hidden$="[[!_showLoader]]" indeterminate=""></paper-progress>
      <iron-selector selected="{{selectedItem}}" id="selector">
        <template is="dom-repeat" items="{{suggestions}}" id="repeater">
          <paper-item>
            <div>{{_suggestionDisplay(item)}}</div>
            <paper-ripple></paper-ripple>
          </paper-item>
        </template>
      </iron-selector>
    </paper-material>
    <iron-a11y-keys id="a11y" target="[[target]]" keys="up" on-keys-pressed="selectPrevious"></iron-a11y-keys>
    <iron-a11y-keys id="a11y" target="[[target]]" keys="down" on-keys-pressed="selectNext"></iron-a11y-keys>
    <iron-a11y-keys id="a11y" target="[[target]]" keys="enter" on-keys-pressed="acceptSelection"></iron-a11y-keys>
    <iron-a11y-keys id="a11y" target="[[this]]" keys="up" on-keys-pressed="selectPrevious"></iron-a11y-keys>
    <iron-a11y-keys id="a11y" target="[[this]]" keys="down" on-keys-pressed="selectNext"></iron-a11y-keys>
    <iron-a11y-keys id="a11y" target="[[this]]" keys="enter" on-keys-pressed="acceptSelection"></iron-a11y-keys>
  </template>
</dom-module>
<script>
Polymer({
  is: 'paper-autocomplete',
  behaviors: [
    Polymer.IronOverlayBehavior,
    Polymer.IronScrollTargetBehavior
  ],
  /**
   * Fired when user entered some text into the input.
   * It is a time to query external datastore for suggestions and update "source" property.
   * Source should be updated event if the backend result with empty values and should set
   * the list to empty array.
   *
   * Nore that setting up source in response to this event after the user has closed
   * the dropdown it will have no effect at the moment.
   *
   * @event query
   * @param {String} value An entered phrase in text field.
   */
  /**
   * Fired when the item was selected by the user.
   * At the time of receiving this event new value is already set in target input field.
   *
   * @event selected
   * @param {String} value Selected value
   */

  properties: {
    /**
     * List of suggestions to display.
     * If the array items are strings they will be used for display a suggestions and
     * to insert a value.
     * If the list is an object the each object must contain `value` and `display`
     * properties.
     * The `display` property will be used in the suggestions list and the
     * `value` property will be used to insert the value to the referenced text field.
     *
     * @type {Array<Object>|Array<String>}
     */
    source: {
      type: Array
    },
    /**
     * `value` Selected object from the suggestions
     */
    value: {
      type: Object,
      notify: true
    },
    /**
     * List of suggestion that are displayed.
     */
    suggestions: {
      type: Array,
      value: [],
      readOnly: true
    },
    /**
     * A target input field to observe.
     * This may be an ID if the field or an element itself.
     *
     * If this is set the element will not display it's own input field.
     * @type {HTMLElement}
     */
    target: HTMLElement,
    /**
     * Currently selected item on a suggestions list.
     * @type {Number}
     */
    selectedItem: {
      type: Number,
      value: 0
    },
    scrollTarget: {
      type: Object,
      value: function() {
        return this.$.container;
      }
    },
    sizingTarget: {
      type: HTMLElement,
      value: function() {
        return this.$.container;
      }
    },
    /**
     * True when user query changed and waiting for `source` property update
     */
    loading: {
      type: Boolean,
      value: false,
      readOnly: true,
      notify: true
    },
    /**
     * Set this to true if you use async operation in response for query event.
     * This will display a loader when querying for more suggestions.
     * Do not use it it you do not handle suggestions asynchronously.
     */
    loader: {
      type: Boolean,
      value: false
    },

    _showLoader: {
      type: Boolean,
      computed: '_computeShowLoader(loader, loading)'
    },

    isAttached: Boolean,

    // If true it will opend suggestions on input field focus.
    openOnFocus: {
      type: Boolean,
      value: false
    },
    // this property is set when the `target` changes. It is used to remove
    // listeners.
    _oldTarget: HTMLElement
  },

  observers: [
    '_targetChanged(target, isAttached)',
    '_filterSuggestions(source, _oldTarget, isAttached)'
  ],

  listeners: {
    'tap': 'acceptSelection'
  },

  /* Handler for target property change. */
  _targetChanged: function(target, isAttached) {
    if (!isAttached) {
      return;
    }
    this.resetFit();
    if (this._oldTarget) {
      this.unlisten(this._oldTarget, 'input', '_valueChanged');
      this.unlisten(this._oldTarget, 'focus', '_targetFocus');
      this._oldTarget = null;
    }
    if (!target) {
      return;
    }
    if (typeof target === 'string') {
      this.target = this.domHost ? this.domHost.$[target] :
        Polymer.dom(this.ownerDocument).querySelector('#' + target);
      //this will call the function again with the element attached.
    } else if (target) {
      this.listen(target, 'input', '_valueChanged');
      this.listen(target, 'focus', '_targetFocus');
      this._oldTarget = target;
      if (target === document.activeElement) {
        this._targetFocus();
      }
    }
  },
  /**
   * Handler to be called when input of the text field changes.
   */
  _valueChanged: function() {
    if (!this.isAttached || !this._oldTarget) {
      return;
    }
    var value = this._oldTarget.value;
    if (this._previousQuery) {
      if (value.indexOf(this._previousQuery) === 0) {
        this._previousQuery = value;
        this._filterSuggestions();
        return;
      } else {
        //this is a new query
        this._previousQuery = null;
        this._setSuggestions([]);
      }
    } else if (!value && this._previousQuery === undefined) {
      // First query without the value means initialization.
      return;
    }
    this.fire('query', {
      value: value
    });
    this._previousQuery = value;
    if (!this.opened) {
      this.selectedItem = 0;
    }
    this._filterSuggestions();
    this._setLoading(true);
  },
  /**
   * Filter `source` array for current value.
   */
  _filterSuggestions: function() {
    //source, _oldTarget, isAttached
    if (!this.isAttached || !this._oldTarget) {
      return;
    }
    if (this._previousQuery === undefined) {
      return;
    }
    this._setLoading(false);
    var source = this.source;
    if (!source) {
      this._setSuggestions([]);
      return;
    }
    var query = this._previousQuery ? this._previousQuery.toLowerCase() : '';
    var filter = function(item) {
      var value = (typeof item === 'string') ? item : item.value;
      return value.toLowerCase().indexOf(query) !== -1;
    };
    var filtered = query ? source.filter(filter) : source;
    if (filtered.length === 0) {
      this.close();
      return;
    }
    filtered.sort(function(a, b) {
      var valueA = (typeof a === 'string') ? a : a.value;
      var valueB = (typeof b === 'string') ? b : b.value;
      var aIndex = valueA.indexOf(query);
      var bIndex = valueB.indexOf(query);

      if (aIndex === 0 && bIndex !== 0) {
        return 1;
      }
      if (aIndex !== 0 && bIndex === 0) {
        return -1;
      }
      if (valueA > valueB) {
        return 1;
      }
      if (valueA < valueB) {
        return -1;
      }
      return 0;
    });
    this._setSuggestions(filtered);
    this.opened = true;
  },
  /* Compute suggestion display value */
  _suggestionDisplay: function(item) {
    return item.value || item;
  },
  /**
   * Highlight previous suggestion
   */
  selectPrevious: function() {
    if (!this.suggestions || !this.suggestions.length) {
      return;
    }
    if (!this.opened) {
      this.opened = true;
    }
    this.$.selector.selectPrevious();
    this.ensureItemVisible(false);
  },
  /**
   * Highlight next suggestion
   */
  selectNext: function() {
    if (!this.suggestions || !this.suggestions.length) {
      return;
    }
    if (!this.opened) {
      this.opened = true;
    }
    this.$.selector.selectNext();
    this.ensureItemVisible(true);
  },
  /**
   * Accepts currently selected suggestion and enters it into a text field.
   */
  acceptSelection: function() {
    if (!this.opened || !this.suggestions || !this.suggestions.length) {
      return;
    }
    var value = this.$.repeater.itemForElement(this.$.selector.selectedItem);
    if (typeof value !== 'string') {
      value = value.value;
    }
    this.async(function() {
      this._inform(value);
    }, 1);
  },

  _inform: function(value) {
    var e = this.fire('selected', {
      value: value
    }, {
      cancelable: true
    });
    if (!e.defaultPrevented) {
      this.target.value = value;
    }
    this.close();
  },
  /**
   * Ensure that the selected item is visible in the scroller.
   * When there is more elements to show than space available (height)
   * then some elements will be hidden. When the user use arrows to navigate
   * the selection may get out from the screen. This function ensures that
   * currently selected element is visible.
   *
   * @param {Boolean} bottom If trully it will ensure that the element is
   * visible at the bottom of the container. On the top otherwise.
   */
  ensureItemVisible: function(bottom) {
    if (!this.opened || !this.suggestions || !this.suggestions.length) {
      return;
    }
    var container = this.scrollTarget;
    var index = this.$.selector.selected;
    if (bottom && index === 0) {
      this.scroll(0);
      return;
    }
    var toMove;
    if (!bottom && index === this.suggestions.length - 1) {
      toMove = container.scrollHeight - container.offsetHeight;
      this.scroll(0, toMove);
      return;
    }
    var item = this.$.selector.selectedItem;
    var containerOffsetHeight = bottom ? container.offsetHeight : 0;
    var itemOffsetHeight = bottom ? item.offsetHeight : 0;
    var visible = containerOffsetHeight + container.scrollTop;
    var treshold = item.offsetTop + itemOffsetHeight;

    if (bottom && treshold > visible) {
      toMove = item.offsetHeight + item.offsetTop - container.offsetHeight;
      this.scroll(0, toMove);
    } else if (!bottom && visible > treshold) {
      this.scroll(0, treshold);
    }
  },

  _computeShowLoader: function(loader, loading) {
    return !!loader && !!loading;
  },

  _targetFocus: function() {
    if (!this.openOnFocus || this.opened) {
      return;
    }
    this._previousQuery = this._previousQuery || '';
    this.async(this._valueChanged, 100);
  }
});
</script>
<!--
The `simple-type-editor` is the most atomic type editor. It only support basic types like
strings, numbers, booleans or nulls.
It shows the name and value editor and on demand type change / select dropdown.

### Styling
`<simple-type-editor>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--simple-type-editor` | Mixin applied to the element. Note that because of the recurcy this element contains the same element. So setting padding / margin on this element is basically bad idea. | `{}`,
`--inline-documentation-color` | Color of the documentartion font. Inline documentation appears below text fields as a hint for input. | `rgba(0, 0, 0, 0.64)`
`--inline-documentation-text-size` | Size of the documentation font. Inline documentation appears below text fields as a hint for input. | `12px`
`--code-type-text-value-color` | Text color of the code highligted string value | `#080`
`--code-type-number-value-color` | Text color of the code highligted numeric value | `#303F9F`
`--code-type-boolean-value-color` | Text color of the code highligted boolean value | `#4A148C`
`--code-type-null-value-color` | Text color of the code highligted nullable value | `#4A148C`
`--code-punctuation-value-color` | Text color of the code highligted: the punctuation | `rgba(0, 0, 0, 0.54)`

@group UI Elements
@element simple-type-editor
@demo demo/index.html
-->
<dom-module id="simple-type-editor" assetpath="bower_components/body-json-editor/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      @apply(--simple-type-editor);
    }

    #container {
      @apply(--layout-horizontal);
      position: relative;
    }

    .input-values {
      @apply(--layout-flex);
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .input-actions {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    paper-input,
    .input-value {
      width: 100%;
      display: block;
    }

    .value-input[type="text"] {
      --paper-input-container-input: {
        color: var(--code-type-text-value-color, #080);
      }
    }

    .value-input[type="number"] {
      --paper-input-container-input: {
        color: var(--code-type-number-value-color, #303F9F);
      }
    }

    .boolean-input {
      --paper-input-container-input: {
        color: var(--code-type-boolean-value-color, #4A148C);
      }
    }

    .null-input {
      color: var(--code-type-null-value-color, #4A148C);
    }

    .punctuation {
      color: var(--code-punctuation-value-color, rgba(0, 0, 0, 0.54));
      font-size: 14px;
      display: inline-block;
      margin: 0 4px;
    }

    .complex-type-label {
      font-weight: 500;
      color: rgba(0, 0, 0, 0.54);
      text-transform: capitalize;
    }

    paper-icon-button {
      @apply(--icon-button);
    }

    paper-icon-button:hover {
      @apply(--icon-button-hover);
    }

    paper-autocomplete {
      position: fixed !important;
    }

    #docs .markdown-body {
      color: var(--inline-documentation-text-color, rgba(0, 0, 0, 0.64));
      font-size: var(--inline-documentation-text-size, 12px);
      @apply(--code-block);
    }

    .type-selector {
      @apply(--layout-horizontal);
    }

    :host([narrow]) #container {
      margin-bottom: 24px;
    }

    :host([narrow]) .input-values {
      @apply(--layout-vertical);
      @apply(--layout-start);
    }

    :host([narrow]) .input-actions {
      @apply(--layout-start);
      padding-top: 16px;
    }

    :host([narrow]) .punctuation {
      display: none;
    }

    </style>
    <div id="container">
      <div class="input-values">
        <paper-input id="keyInput" hidden$="[[noKey]]" label="property name" class="key-input" no-label-float="[[!narrow]]" value="{{value.name}}"></paper-input>
        <paper-autocomplete target="[[keyInput]]" source="[[nameSuggestions]]" on-selected="_onSuggestion" open-on-focus="" vertical-align="top"></paper-autocomplete>
        <span class="punctuation" hidden$="[[noKey]]">:</span>
        <template is="dom-if" if="[[!_typeIs(value.type, 'array', 'object')]]" restamp="true">
          <!-- String / number types -->
          <template is="dom-if" if="[[_typeIs(value.type, 'number', 'float', 'integer', 'string')]]" restamp="true">
            <paper-input label="property value" class="value-input" no-label-float="[[!narrow]]" auto-validate="" required="[[value.required]]" value="{{value.value}}" type$="[[_compueInputType(value.type)]]" step="[[_computeStep(value.type)]]"></paper-input>
          </template>
          <!-- Boolean type -->
          <template is="dom-if" if="[[_typeIs(value.type, 'boolean')]]" restamp="true">
            <paper-dropdown-menu class="boolean-input" no-label-float="[[!narrow]]" label="Boolean value">
              <paper-listbox class="dropdown-content" selected="{{value.value}}" attr-for-selected="data-value">
                <template is="dom-repeat" items="{{booleanValues}}">
                  <paper-item data-value="[[item.value]]">[[item.display]]</paper-item>
                </template>
              </paper-listbox>
            </paper-dropdown-menu>
          </template>
          <!-- Nullable type -->
          <template is="dom-if" if="[[_typeIs(value.type, 'null')]]" restamp="true">
            <span class="null-input input-value">null</span>
          </template>
        </template>
        <template is="dom-if" if="[[_typeIs(value.type, 'array', 'object')]]">
          <span class="complex-type-label input-value">[[value.type]]</span>
        </template>

        <!-- Type change combobox -->
        <template is="dom-if" if="[[_typeIs(value.type, '')]]" restamp="true">
          <div class="type-selector">
            <paper-dropdown-menu no-label-float="" label="Select type">
              <paper-listbox class="dropdown-content" selected="{{value.type}}" attr-for-selected="data-type">
                <template is="dom-repeat" items="{{_computeTypesList(typesValues, allowedTypes)}}">
                  <paper-item data-type$="[[item.value]]">[[item.display]]</paper-item>
                </template>
              </paper-listbox>
            </paper-dropdown-menu>
            <paper-icon-button hidden$="[[!_previousType]]" icon="arc:cancel" on-tap="_cancelTypeChange" title="Cancel"></paper-icon-button>
          </div>
        </template>
      </div>
      <div class="input-actions" hidden$="[[_typeIs(value.type, '')]]">
        <!-- <paper-menu-button>
          <paper-icon-button icon="arc:more-vert" class="dropdown-trigger"></paper-icon-button>
          <paper-menu class="dropdown-content" on-iron-select="_contextMenuItemSelected">
            <paper-item data-action="type-change">Change type</paper-item>
            <paper-item data-action="delete">Delete</paper-item>
          </paper-menu>
        </paper-menu-button> -->
        <paper-icon-button icon="arc:arc:refresh" on-tap="_changeType" title="Change data type"></paper-icon-button>
        <paper-icon-button icon="arc:remove-circle-outline" on-tap="_remove" title="Remove property"></paper-icon-button>
      </div>
    </div>
    <div id="docs" hidden$="[[!description]]">
      <marked-element markdown="[[description]]">
        <div class="markdown-html markdown-body"></div>
      </marked-element>
    </div>
  </template>
  <script>
    Polymer({
      is: 'simple-type-editor',

      behaviors: [ArcBehaviors.BodyJsonEditorBehavior],

      properties: {
        // A list of boolean value to set in the boolean dropdown list
        booleanValues: {
          type: Array,
          value: function() {
            return [{
              display: 'True',
              value: true
            }, {
              display: 'False',
              value: false
            }];
          },
          readOnly: true
        },
        // A list of types to display in the type selector.
        typesValues: {
          type: Array,
          value: function() {
            return [{
              display: 'String',
              value: 'string'
            }, {
              display: 'Float',
              value: 'float'
            }, {
              display: 'Integer',
              value: 'integer'
            }, {
              display: 'Boolean',
              value: 'boolean'
            }, {
              display: 'Null',
              value: 'null'
            }, {
              display: 'Object',
              value: 'object'
            }, {
              display: 'Array',
              value: 'array'
            }];
          },
          readOnly: true
        },
        // When changing a type this is previously selected type.
        _previousType: {
          type: String,
          value: ''
        },
        // input to the property name input
        keyInput: {
          type: HTMLElement,
          value: function() {
            return this.$.keyInput;
          }
        },
        // List of allowed types
        allowedTypes: {
          type: Array,
          value: []
        },
        narrow: {
          type: Boolean,
          value: false
        }
      },

      observers: ['_descriptionChanged(value.description)'],

      // Computes the input type for given type.
      _compueInputType: function(type) {
        switch (type) {
          case 'number':
          case 'integer':
          case 'float':
            return 'number';
          default:
            return 'text';
        }
      },

      // Computes the `step` attribute value for given type.
      _computeStep: function(type) {
        switch (type) {
          case 'number':
          case 'float':
            return 0.0000001;
          case 'integer':
            return 1;
          default:
            return;
        }
      },
      // // A handler for the item's context menu
      // _contextMenuItemSelected: function(e) {
      //   switch (e.detail.item.dataset.action) {
      //     case 'type-change':
      //       this._changeType();
      //       break;
      //     case 'delete':
      //       this._remove();
      //       break;
      //   }
      //   var target = Polymer.dom(e).rootTarget;
      //   target.selected = -1;
      // },
      // Send an event to the parent element (which must represent object or array) to remove the
      // propety.
      _remove: function() {
        this.fire('remove-property', {
          value: this.value
        });
      },

      _changeType: function() {
        this._previousType = this.value.type;
        this.set('value.type', '');
      },

      // Cancels the type change and sets previous value.
      _cancelTypeChange: function() {
        this.set('value.type', this._previousType);
      },

      // The description is set when the suggestion is selected. But the `value` can also contain
      // a description when the property of object (this value) was pre-filled.
      _descriptionChanged: function(description) {
        if (!description) {
          return;
        }
        this.description = description;
      },

      _computeTypesList: function(typesValues, allowedTypes) {
        if (!allowedTypes || !allowedTypes.length) {
          return typesValues;
        }
        var result = allowedTypes.map(function(item) {
          return {
            display: item,
            value: item
          };
        });
        return result;
      }

    });
  </script>
</dom-module>
<!--
`<object-editor>` Is a part of the `body-json-editor`. This element is used to recursively
display a JSON object editor.

### Styling
`<object-editor>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--body-json-object-editor` | Mixin applied to the element. Note that because of the recurcy this element contains the same element. So setting padding / margin on this element is basically bad idea. | `{}`,
`--paper-dropdown-menu-input` | Mixin applied to the dropdown menu input. | `{color: #673AB7;}`
`--paper-dropdown-menu-button` | Mixin applied to the dropdown menu button. | `{color: #673AB7;}`
`--primary-color` | Color of the action button | ``

@group UI Elements
@element object-editor
@demo demo/index.html
-->
<dom-module id="object-editor" assetpath="bower_components/body-json-editor/">
  <template>
    <style>
     :host {
      display: block;

      @apply(--body-json-object-editor);
      --paper-input-container-color: rgba(0, 0, 0, 0.24);
      --paper-dropdown-menu-input: {
        color: #673AB7;
      }
      --paper-dropdown-menu-button: {
        color: #673AB7;
      }
    }

    .indent {
      margin-left: 12px;
    }

    .action-button {
      color: var(--primary-color);
    }

    </style>
    <template is="dom-if" if="[[_typeIs(value.type, 'object')]]">
      <simple-type-editor value="{{value}}"></simple-type-editor>
      <template is="dom-repeat" items="{{value.properties}}" id="object">
        <object-editor narrow="[[narrow]]" class="indent" value="{{item}}" schema="[[subPropertySchema]]"></object-editor>
      </template>
      <div class="indent add-action">
        <paper-button class="action-button" on-tap="_appendProperty">add subproperty</paper-button>
      </div>
    </template>
    <template is="dom-if" if="[[_typeIs(value.type, 'array')]]">
      <simple-type-editor value="{{value}}"></simple-type-editor>
      <template is="dom-repeat" items="{{value.items}}" id="array">
        <object-editor narrow="[[narrow]]" class="indent" no-key="" value="{{item}}" schema="[[subPropertySchema]]" is-array-item="" allowed-types="[[allowedTypes]]"></object-editor>
      </template>
      <div class="indent add-action">
        <paper-button class="action-button" on-tap="_appendProperty">add array item</paper-button>
      </div>
    </template>
    <template is="dom-if" if="[[!_typeIs(value.type, 'array', 'object')]]">
      <simple-type-editor narrow="[[narrow]]" value="{{value}}" no-key="[[noKey]]" schema="[[schema]]" allowed-types="[[allowedTypes]]"></simple-type-editor>
    </template>
  </template>
  <script>
  Polymer({
    is: 'object-editor',
    behaviors: [ArcBehaviors.BodyJsonEditorBehavior],
    properties: {
      // If true this element should not show a key field.
      noKey: {
        type: Boolean
      },
      // The value of this editor.
      value: {
        type: Object,
        notify: true
      },
      // If set, means that this object is a sub-property of an array.
      isArrayItem: {
        type: Boolean,
        value: false
      }
    },

    observers: [
      '_schemaChanged(schema.*)',
      '_computeChildTypes(isArrayItem, schema.*)'
    ],

    listeners: {
      'remove-property': '_onRemoveProperty'
    },

    /**
     * Removes the property from this object.
     */
    _onRemoveProperty: function(e) {
      var value = this.value;
      if (!value) {
        return;
      }
      if (['object', 'array'].indexOf(value.type) !== -1) {
        var _repeater;
        if (this.value.type === 'object') {
          _repeater = this.$$('#object');
        } else {
          _repeater = this.$$('#array');
        }
        if (!_repeater) {
          return;
        }
        var index = _repeater.indexForElement(e.target);
        if (index === -1 || index === undefined) {
          // top object (in this properties tree) can't remove itself from the parent. Only parent
          // can do this. Stop here and the event bubbles up.
          return;
        }

        if (this.value.type === 'object') {
          this.splice('value.properties', index, 1);
        } else {
          this.splice('value.items', index, 1);
        }

        e.preventDefault();
        e.stopImmediatePropagation();
        e.stopPropagation();
      }
      // pass it to the parent.
    },

    // Appends a new child property to the Object or the Array.
    _appendProperty: function() {
      var property = {
        name: '',
        type: ''
      };
      if (this.value.type === 'object') {
        if (this.value.properties) {
          this.push('value.properties', property);
        } else {
          this.set('value.properties', [property]);
        }
      } else {
        if (this.value.items && this.value.items.length) {
          // set new item's type to the same as the last item
          var type = this.value.items[this.value.items.length - 1].type;
          property.type = type;
          this.push('value.items', property);
        } else {
          this.set('value.items', [property]);
        }
      }
    },

    _computeChildTypes: function(isArray, record) {
      if (!isArray) {
        return;
      }
      var s = record.base;
      if (!s || !s.length) {
        this.set('allowedTypes', null);
        return;
      }
      var allowedTypes = [];
      s.forEach(function(item) {
        if (!item.type) {
          return;
        }
        if (allowedTypes.indexOf(item.type) !== -1) {
          return;
        }
        allowedTypes[allowedTypes.length] = item.type;
      });
      this.set('allowedTypes', allowedTypes);
    }
  });
  </script>
</dom-module>
<!--
`<body-json-editor>` A JSON editor for HTTP body

It provides a visual editor for the JSON body.

### Example
```
<body-json-editor value='["apple", 1234]'></body-json-editor>
```

To set / get value on / from the element use the `value` property. Each time
something change in the editor the string `value` will be regenerated.
It is also possible to set a JavaScript objkect on this element using
`json` property but it is immutable and changes will not be reflected to it.

### Styling
`<body-json-editor>` provides the following custom properties and mixins for
styling:

Custom property | Description | Default
----------------|-------------|----------
`--body-json-editor` | Mixin applied to the element | `{}`
`--body-json-object-editor` | Mixin applied to the `object-editor` element. Note that because of the recurcy this element contains the same element. So setting padding / margin on this element is basically bad idea. | `{}`,
`--paper-dropdown-menu-input` | Mixin applied to the dropdown menu input. | `{color: #673AB7;}`
`--paper-dropdown-menu-button` | Mixin applied to the dropdown menu button. | `{color: #673AB7;}`
`--primary-color` | Color of the action button | ``
`--simple-type-editor` | Mixin applied to the `simple-type-editor` element. Note that because of the recurcy this element contains the same element. So setting padding / margin on this element is basically bad idea. | `{}`,
`--inline-documentation-color` | Color of the documentartion font. Inline documentation appears below text fields as a hint for input. | `rgba(0, 0, 0, 0.64)`
`--inline-documentation-text-size` | Size of the documentation font. Inline documentation appears below text fields as a hint for input. | `12px`
`--code-type-text-value-color` | Text color of the code highligted string value | `#080`
`--code-type-number-value-color` | Text color of the code highligted numeric value | `#303F9F`
`--code-type-boolean-value-color` | Text color of the code highligted boolean value | `#4A148C`
`--code-type-null-value-color` | Text color of the code highligted nullable value | `#4A148C`
`--code-punctuation-value-color` | Text color of the code highligted: the punctuation | `rgba(0, 0, 0, 0.54)`

@group UI Elements
@element body-json-editor
@demo demo/index.html
-->
<dom-module id="body-json-editor" assetpath="bower_components/body-json-editor/">
  <template>
    <style>
     :host {
      display: block;
      @apply(--body-json-editor);
    }

    .action-button {
      color: var(--primary-color);
    }
    </style>
    <template is="dom-if" if="[[_isObject(model.type)]]">
      <template is="dom-repeat" items="{{model.properties}}" id="object">
        <object-editor narrow="[[narrow]]" value="{{item}}" schema="[[schema]]"></object-editor>
      </template>
      <div class="add-action">
        <paper-button class="action-button" on-tap="_appendProperty">add property</paper-button>
      </div>
    </template>
    <template is="dom-if" if="[[_isArray(model.type)]]">
      <template is="dom-repeat" items="{{model.items}}" id="array">
        <object-editor narrow="[[narrow]]" no-key="" value="{{item}}" schema="[[schema]]"></object-editor>
      </template>
      <div class="add-action">
        <paper-button class="action-button" on-tap="_appendProperty">add array item</paper-button>
      </div>
    </template>
  </template>
  <script>
  Number.isInteger = Number.isInteger || function(value) {
    return typeof value === 'number' &&
      isFinite(value) &&
      Math.floor(value) === value;
  };
  // Production steps of ECMA-262, Edition 6, 22.1.2.1
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from
  if (!Array.from) {
    Array.from = (function() {
      var toStr = Object.prototype.toString;
      var isCallable = function(fn) {
        return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
      };
      var toInteger = function(value) {
        var number = Number(value);
        if (isNaN(number)) {
          return 0;
        }
        if (number === 0 || !isFinite(number)) {
          return number;
        }
        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
      };
      var maxSafeInteger = Math.pow(2, 53) - 1;
      var toLength = function(value) {
        var len = toInteger(value);
        return Math.min(Math.max(len, 0), maxSafeInteger);
      };

      return function from(arrayLike /*, mapFn, thisArg */) {
        var C = this;
        var items = Object(arrayLike);
        if (arrayLike === null) {
          throw new TypeError('Array.from requires an array-like object - not null or undefined');
        }
        var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
        var T;
        if (typeof mapFn !== 'undefined') {
          if (!isCallable(mapFn)) {
            throw new TypeError('Array.from: when provided, the second argument must be a function');
          }
          if (arguments.length > 2) {
            T = arguments[2];
          }
        }
        var len = toLength(items.length);
        var A = isCallable(C) ? Object(new C(len)) : new Array(len);
        var k = 0;
        var kValue;
        while (k < len) {
          kValue = items[k];
          if (mapFn) {
            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
          } else {
            A[k] = kValue;
          }
          k += 1;
        }
        A.length = len;
        return A;
      };
    }());
  }

  Polymer({
    is: 'body-json-editor',
    behaviors: [ArcBehaviors.BodyJsonEditorBehavior],
    properties: {
      // A JSON object. Please, use the `value` property to set / get JSON
      json: {
        type: Object,
        notify: true
      },
      // Generated model.
      model: Object,
      /**
       * If available, this is the RAML's type definition. It will provide schema definition
       * for the editor.
       */
      type: Object,
      // gets / sets JSON string value
      value: {
        type: String,
        notify: true,
        value: ''
      },
      /**
       * Determines if the editor is currently displayed in the UI and relevant to the user.
       * If not (parent element/app set it to false) then all computations will be on hold
       * until the element is open again.
       */
      opened: {
        type: Boolean,
        value: true
      }
    },

    observers: [
      '_typeChanged(type.*)',
      '_valueChanged(opened, value)',
      '_jsonChanged(opened, json)',
      '_modelChanged(opened, model.*)',
    ],

    listeners: {
      'remove-property': '_onRemoveProperty'
    },

    ready: function() {
      if (!this.json) {
        this.json = {};
      }
    },

    _jsonChanged: function(opened, json) {
      if (!opened) {
        return;
      }
      this.debounce('model-translator', function() {
        this.model = this._createModel(json);
      }, 250);
    },
    /**
     * Creates an internal model from the `object`.
     * Object can be any JavaScript object.
     *
     * The result object have following strucure:
     * - type {String} "object" or "array"
     * - properties {Array<Object>} if the type is "object"
     * - items {Array<Object>} if the type is "array"
     *
     * Then properties / items array contains a list of objects with following properties:
     * - type {String} any permitted type like string, number, boolean, object and so on
     * - name {String} name of the property
     * - properties {Array<Object>} if the type is "object"
     * - items {Array<Object>} if the type is "array"
     * - value {String|Number|Boolean|null} if the type is neither "object" or "array"
     *
     * @param {Object|Array} object A source object to create a model from it.
     * @param {String?} parentType A type of the parent object. If not set or if it value equals
     * "array" then the resulting object will not contain the `name` property.
     * @return {Object|undefined} A model of undefined if passed object is nullable.
     */
    _createModel: function(object, parentType) {
      var result = {
        type: 'object'
      };
      if (object === undefined) {
        return result;
      }

      if (parentType && parentType !== 'array') {
        result.name = '';
      }
      if (object instanceof Array) {
        result.type = 'array';
        var items = [];
        object.forEach(function(item) {
          var _m = this._createModel(item, 'array');
          if (_m) {
            items[items.length] = _m;
          }
        }, this);
        result.items = items;
      } else if (object instanceof Object) {
        try {
          var keys = Object.keys(object);
          var properties = [];
          keys.forEach(function(key) {
            var _m = this._createModel(object[key], 'object');
            if (_m) {
              _m.name = key;
              properties[properties.length] = _m;
            }
          }, this);
          result.properties = properties;
        } catch (e) {}
      } else {
        if (typeof object === 'string') {
          result.type = 'string';
          result.value = object;
        } else if (typeof object === 'number') {
          result.type = Number.isInteger(object) ? 'integer' : 'float';
          result.value = object;
        } else if (typeof object === 'boolean') {
          result.type = 'boolean';
          result.value = object;
        } else if (object === null) {
          result.type = 'null';
          result.value = null;
        } else {
          return;
        }
      }
      return result;
    },

    _isObject: function(type) {
      return type === 'object';
    },

    _isArray: function(type) {
      return type === 'array';
    },

    /**
     * Removes the property from this object.
     */
    _onRemoveProperty: function(e) {
      e.preventDefault();
      e.stopImmediatePropagation();
      e.stopPropagation();

      var _repeater;
      if (this.model.type === 'object') {
        _repeater = this.$$('#object');
      } else {
        _repeater = this.$$('#array');
      }
      if (!_repeater) {
        return;
      }
      var index = _repeater.indexForElement(e.target);
      if (index === -1) {
        return;
      }
      if (this.model.type === 'object') {
        this.splice('model.properties', index, 1);
      } else {
        this.splice('model.items', index, 1);
      }
    },

    /**
     * A handler to any change in the model object.
     * Model represents a object keys and values. So if any of the object editors change the value
     * (or key) it will be notified here and the value of the editor will be updated.
     *
     * The value won't be updated if the change is comming from the external source.
     */
    _modelChanged: function(opened, record) {
      if (!opened) {
        return;
      }
      var obj = record.base;
      obj = this._computeJson(obj);
      this._internalValueChage = true;
      this.set('value', JSON.stringify(obj, null, 2));
      this._internalValueChage = false;
    },

    _computeJson: function(model) {
      var isArray = model.type === 'array';
      var result = isArray ? [] : {};

      var properties;
      if (isArray) {
        if (!model.items || !model.items.length) {
          return result;
        }
        properties = model.items;
      } else {
        if (!model.properties || !model.properties.length) {
          return result;
        }
        properties = model.properties;
      }
      properties.forEach(function(item) {
        var _value;
        if (item.type === 'object' || item.type === 'array') {
          _value = this._computeJson(item);
        } else {
          _value = item.value;
          if (['integer', 'float'].indexOf(item.type) !== -1) {
            _value = Number(_value);
            if (_value !== _value) {
              _value = item.value;
            }
          }
        }
        if (isArray) {
          result[result.length] = _value;
        } else {
          result[item.name] = _value;
        }
      }, this);
      return result;
    },
    // Appends a new child property to the Object or the Array.
    _appendProperty: function() {
      var property = {
        name: '',
        type: ''
      };
      if (this.model.type === 'object') {
        if (this.model.properties) {
          this.push('model.properties', property);
        } else {
          this.set('model.properties', [property]);
        }
      } else {
        if (this.model.items) {
          // set new item's type to the same as the last item
          var type = this.model.items[this.model.items.length - 1].type;
          property.type = type;
          this.push('model.items', property);
        } else {
          this.set('model.items', [property]);
        }
      }
    },
    // Updates the model if the value attribute change from the outside.
    _valueChanged: function(opened, value) {
      if (!opened) {
        return;
      }
      if (this._internalValueChage) {
        return;
      }
      if (!value) {
        return this.set('json', '{}');
      }
      try {
        var json = JSON.parse(value);
        this.set('json', json);
      } catch (e) {}
    },

    _typeChanged: function(record) {
      var type = record.base;
      if (!type) {
        this.schema = undefined;
      } else {
        this.schema = this._generateJsonSchema(type);
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
iron-request can be used to perform XMLHttpRequests.

    <iron-request id="xhr"></iron-request>
    ...
    this.$.xhr.send({url: url, body: params});
-->
<script>
  'use strict';

  Polymer({
    is: 'iron-request',

    hostAttributes: {
      hidden: true
    },

    properties: {

      /**
       * A reference to the XMLHttpRequest instance used to generate the
       * network request.
       *
       * @type {XMLHttpRequest}
       */
      xhr: {
        type: Object,
        notify: true,
        readOnly: true,
        value: function() {
          return new XMLHttpRequest();
        }
      },

      /**
       * A reference to the parsed response body, if the `xhr` has completely
       * resolved.
       *
       * @type {*}
       * @default null
       */
      response: {
        type: Object,
        notify: true,
        readOnly: true,
        value: function() {
          return null;
        }
      },

      /**
       * A reference to the status code, if the `xhr` has completely resolved.
       */
      status: {
        type: Number,
        notify: true,
        readOnly: true,
        value: 0
      },

      /**
       * A reference to the status text, if the `xhr` has completely resolved.
       */
      statusText: {
        type: String,
        notify: true,
        readOnly: true,
        value: ''
      },

      /**
       * A promise that resolves when the `xhr` response comes back, or rejects
       * if there is an error before the `xhr` completes.
       *
       * @type {Promise}
       */
      completes: {
        type: Object,
        readOnly: true,
        notify: true,
        value: function() {
          return new Promise(function (resolve, reject) {
            this.resolveCompletes = resolve;
            this.rejectCompletes = reject;
          }.bind(this));
        }
      },

      /**
       * An object that contains progress information emitted by the XHR if
       * available.
       *
       * @default {}
       */
      progress: {
        type: Object,
        notify: true,
        readOnly: true,
        value: function() {
          return {};
        }
      },

      /**
       * Aborted will be true if an abort of the request is attempted.
       */
      aborted: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false,
      },

      /**
       * Errored will be true if the browser fired an error event from the
       * XHR object (mainly network errors).
       */
      errored: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false
      },

      /**
       * TimedOut will be true if the XHR threw a timeout event.
       */
      timedOut: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false
      }
    },

    /**
     * Succeeded is true if the request succeeded. The request succeeded if it
     * loaded without error, wasn't aborted, and the status code is ≥ 200, and
     * < 300, or if the status code is 0.
     *
     * The status code 0 is accepted as a success because some schemes - e.g.
     * file:// - don't provide status codes.
     *
     * @return {boolean}
     */
    get succeeded() {
      if (this.errored || this.aborted || this.timedOut) {
        return false;
      }
      var status = this.xhr.status || 0;

      // Note: if we are using the file:// protocol, the status code will be 0
      // for all outcomes (successful or otherwise).
      return status === 0 ||
        (status >= 200 && status < 300);
    },

    /**
     * Sends an HTTP request to the server and returns the XHR object.
     *
     * The handling of the `body` parameter will vary based on the Content-Type
     * header. See the docs for iron-ajax's `body` param for details.
     *
     * @param {{
     *   url: string,
     *   method: (string|undefined),
     *   async: (boolean|undefined),
     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),
     *   headers: (Object|undefined),
     *   handleAs: (string|undefined),
     *   jsonPrefix: (string|undefined),
     *   withCredentials: (boolean|undefined)}} options -
     *     url The url to which the request is sent.
     *     method The HTTP method to use, default is GET.
     *     async By default, all requests are sent asynchronously. To send synchronous requests,
     *         set to false.
     *     body The content for the request body for POST method.
     *     headers HTTP request headers.
     *     handleAs The response type. Default is 'text'.
     *     withCredentials Whether or not to send credentials on the request. Default is false.
     *   timeout: (Number|undefined)
     * @return {Promise}
     */
    send: function (options) {
      var xhr = this.xhr;

      if (xhr.readyState > 0) {
        return null;
      }

      xhr.addEventListener('progress', function (progress) {
        this._setProgress({
          lengthComputable: progress.lengthComputable,
          loaded: progress.loaded,
          total: progress.total
        });
      }.bind(this))

      xhr.addEventListener('error', function (error) {
        this._setErrored(true);
        this._updateStatus();
        this.rejectCompletes(error);
      }.bind(this));

      xhr.addEventListener('timeout', function (error) {
        this._setTimedOut(true);
        this._updateStatus();
        this.rejectCompletes(error);
      }.bind(this));

      xhr.addEventListener('abort', function () {
        this._updateStatus();
        this.rejectCompletes(new Error('Request aborted.'));
      }.bind(this));

      // Called after all of the above.
      xhr.addEventListener('loadend', function () {
        this._updateStatus();
        this._setResponse(this.parseResponse());

        if (!this.succeeded) {
          this.rejectCompletes(new Error('The request failed with status code: ' + this.xhr.status));
          return;
        }

        this.resolveCompletes(this);
      }.bind(this));

      this.url = options.url;
      xhr.open(
        options.method || 'GET',
        options.url,
        options.async !== false
      );

      var acceptType = {
        'json': 'application/json',
        'text': 'text/plain',
        'html': 'text/html',
        'xml': 'application/xml',
        'arraybuffer': 'application/octet-stream'
      }[options.handleAs];
      var headers = options.headers || Object.create(null);
      var newHeaders = Object.create(null);
      for (var key in headers) {
        newHeaders[key.toLowerCase()] = headers[key];
      }
      headers = newHeaders;

      if (acceptType && !headers['accept']) {
        headers['accept'] = acceptType;
      }
      Object.keys(headers).forEach(function (requestHeader) {
        if (/[A-Z]/.test(requestHeader)) {
          Polymer.Base._error('Headers must be lower case, got', requestHeader);
        }
        xhr.setRequestHeader(
          requestHeader,
          headers[requestHeader]
        );
      }, this);

      if (options.async !== false) {
        if (options.async) {
          xhr.timeout = options.timeout;
        }

        var handleAs = options.handleAs;

        // If a JSON prefix is present, the responseType must be 'text' or the
        // browser won’t be able to parse the response.
        if (!!options.jsonPrefix || !handleAs) {
          handleAs = 'text';
        }

        // In IE, `xhr.responseType` is an empty string when the response
        // returns. Hence, caching it as `xhr._responseType`.
        xhr.responseType = xhr._responseType = handleAs;

        // Cache the JSON prefix, if it exists.
        if (!!options.jsonPrefix) {
          xhr._jsonPrefix = options.jsonPrefix;
        }
      }

      xhr.withCredentials = !!options.withCredentials;


      var body = this._encodeBodyObject(options.body, headers['content-type']);

      xhr.send(
        /** @type {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|
                   null|string|undefined} */
        (body));

      return this.completes;
    },

    /**
     * Attempts to parse the response body of the XHR. If parsing succeeds,
     * the value returned will be deserialized based on the `responseType`
     * set on the XHR.
     *
     * @return {*} The parsed response,
     * or undefined if there was an empty response or parsing failed.
     */
    parseResponse: function () {
      var xhr = this.xhr;
      var responseType = xhr.responseType || xhr._responseType;
      var preferResponseText = !this.xhr.responseType;
      var prefixLen = (xhr._jsonPrefix && xhr._jsonPrefix.length) || 0;

      try {
        switch (responseType) {
          case 'json':
            // If the xhr object doesn't have a natural `xhr.responseType`,
            // we can assume that the browser hasn't parsed the response for us,
            // and so parsing is our responsibility. Likewise if response is
            // undefined, as there's no way to encode undefined in JSON.
            if (preferResponseText || xhr.response === undefined) {
              // Try to emulate the JSON section of the response body section of
              // the spec: https://xhr.spec.whatwg.org/#response-body
              // That is to say, we try to parse as JSON, but if anything goes
              // wrong return null.
              try {
                return JSON.parse(xhr.responseText);
              } catch (_) {
                return null;
              }
            }

            return xhr.response;
          case 'xml':
            return xhr.responseXML;
          case 'blob':
          case 'document':
          case 'arraybuffer':
            return xhr.response;
          case 'text':
          default: {
            // If `prefixLen` is set, it implies the response should be parsed
            // as JSON once the prefix of length `prefixLen` is stripped from
            // it. Emulate the behavior above where null is returned on failure
            // to parse.
            if (prefixLen) {
              try {
                return JSON.parse(xhr.responseText.substring(prefixLen));
              } catch (_) {
                return null;
              }
            }
            return xhr.responseText;
          }
        }
      } catch (e) {
        this.rejectCompletes(new Error('Could not parse response. ' + e.message));
      }
    },

    /**
     * Aborts the request.
     */
    abort: function () {
      this._setAborted(true);
      this.xhr.abort();
    },

    /**
     * @param {*} body The given body of the request to try and encode.
     * @param {?string} contentType The given content type, to infer an encoding
     *     from.
     * @return {*} Either the encoded body as a string, if successful,
     *     or the unaltered body object if no encoding could be inferred.
     */
    _encodeBodyObject: function(body, contentType) {
      if (typeof body == 'string') {
        return body;  // Already encoded.
      }
      var bodyObj = /** @type {Object} */ (body);
      switch(contentType) {
        case('application/json'):
          return JSON.stringify(bodyObj);
        case('application/x-www-form-urlencoded'):
          return this._wwwFormUrlEncode(bodyObj);
      }
      return body;
    },

    /**
     * @param {Object} object The object to encode as x-www-form-urlencoded.
     * @return {string} .
     */
    _wwwFormUrlEncode: function(object) {
      if (!object) {
        return '';
      }
      var pieces = [];
      Object.keys(object).forEach(function(key) {
        // TODO(rictic): handle array values here, in a consistent way with
        //   iron-ajax params.
        pieces.push(
            this._wwwFormUrlEncodePiece(key) + '=' +
            this._wwwFormUrlEncodePiece(object[key]));
      }, this);
      return pieces.join('&');
    },

    /**
     * @param {*} str A key or value to encode as x-www-form-urlencoded.
     * @return {string} .
     */
    _wwwFormUrlEncodePiece: function(str) {
      // Spec says to normalize newlines to \r\n and replace %20 spaces with +.
      // jQuery does this as well, so this is likely to be widely compatible.
      if (str === null) {
        return '';
      }
      return encodeURIComponent(str.toString().replace(/\r?\n/g, '\r\n'))
          .replace(/%20/g, '+');
    },

    /**
     * Updates the status code and status text.
     */
    _updateStatus: function() {
      this._setStatus(this.xhr.status);
      this._setStatusText((this.xhr.statusText === undefined) ? '' : this.xhr.statusText);
    }
  });
</script>
<!--
The `iron-ajax` element exposes network request functionality.

    <iron-ajax
        auto
        url="https://www.googleapis.com/youtube/v3/search"
        params='{"part":"snippet", "q":"polymer", "key": "YOUTUBE_API_KEY", "type": "video"}'
        handle-as="json"
        on-response="handleResponse"
        debounce-duration="300"></iron-ajax>

With `auto` set to `true`, the element performs a request whenever
its `url`, `params` or `body` properties are changed. Automatically generated
requests will be debounced in the case that multiple attributes are changed
sequentially.

Note: The `params` attribute must be double quoted JSON.

You can trigger a request explicitly by calling `generateRequest` on the
element.

@demo demo/index.html
@hero hero.svg
-->

<script>
  'use strict';

  Polymer({

    is: 'iron-ajax',

    /**
     * Fired when a request is sent.
     *
     * @event request
     * @event iron-ajax-request
     */

    /**
     * Fired when a response is received.
     *
     * @event response
     * @event iron-ajax-response
     */

    /**
     * Fired when an error is received.
     *
     * @event error
     * @event iron-ajax-error
     */

    hostAttributes: {
      hidden: true
    },

    properties: {
      /**
       * The URL target of the request.
       */
      url: {
        type: String
      },

      /**
       * An object that contains query parameters to be appended to the
       * specified `url` when generating a request. If you wish to set the body
       * content when making a POST request, you should use the `body` property
       * instead.
       */
      params: {
        type: Object,
        value: function() {
          return {};
        }
      },

      /**
       * The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'.
       * Default is 'GET'.
       */
      method: {
        type: String,
        value: 'GET'
      },

      /**
       * HTTP request headers to send.
       *
       * Example:
       *
       *     <iron-ajax
       *         auto
       *         url="http://somesite.com"
       *         headers='{"X-Requested-With": "XMLHttpRequest"}'
       *         handle-as="json"></iron-ajax>
       *
       * Note: setting a `Content-Type` header here will override the value
       * specified by the `contentType` property of this element.
       */
      headers: {
        type: Object,
        value: function() {
          return {};
        }
      },

      /**
       * Content type to use when sending data. If the `contentType` property
       * is set and a `Content-Type` header is specified in the `headers`
       * property, the `headers` property value will take precedence.
       *
       * Varies the handling of the `body` param.
       */
      contentType: {
        type: String,
        value: null
      },

      /**
       * Body content to send with the request, typically used with "POST"
       * requests.
       *
       * If body is a string it will be sent unmodified.
       *
       * If Content-Type is set to a value listed below, then
       * the body will be encoded accordingly.
       *
       *    * `content-type="application/json"`
       *      * body is encoded like `{"foo":"bar baz","x":1}`
       *    * `content-type="application/x-www-form-urlencoded"`
       *      * body is encoded like `foo=bar+baz&x=1`
       *
       * Otherwise the body will be passed to the browser unmodified, and it
       * will handle any encoding (e.g. for FormData, Blob, ArrayBuffer).
       *
       * @type (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object)
       */
      body: {
        type: Object,
        value: null
      },

      /**
       * Toggle whether XHR is synchronous or asynchronous. Don't change this
       * to true unless You Know What You Are Doing™.
       */
      sync: {
        type: Boolean,
        value: false
      },

      /**
       * Specifies what data to store in the `response` property, and
       * to deliver as `event.detail.response` in `response` events.
       *
       * One of:
       *
       *    `text`: uses `XHR.responseText`.
       *
       *    `xml`: uses `XHR.responseXML`.
       *
       *    `json`: uses `XHR.responseText` parsed as JSON.
       *
       *    `arraybuffer`: uses `XHR.response`.
       *
       *    `blob`: uses `XHR.response`.
       *
       *    `document`: uses `XHR.response`.
       */
      handleAs: {
        type: String,
        value: 'json'
      },

      /**
       * Set the withCredentials flag on the request.
       */
      withCredentials: {
        type: Boolean,
        value: false
      },

      /**
       * Set the timeout flag on the request.
       */
      timeout: {
        type: Number,
        value: 0
      },

      /**
       * If true, automatically performs an Ajax request when either `url` or
       * `params` changes.
       */
      auto: {
        type: Boolean,
        value: false
      },

      /**
       * If true, error messages will automatically be logged to the console.
       */
      verbose: {
        type: Boolean,
        value: false
      },

      /**
       * The most recent request made by this iron-ajax element.
       */
      lastRequest: {
        type: Object,
        notify: true,
        readOnly: true
      },

      /**
       * True while lastRequest is in flight.
       */
      loading: {
        type: Boolean,
        notify: true,
        readOnly: true
      },

      /**
       * lastRequest's response.
       *
       * Note that lastResponse and lastError are set when lastRequest finishes,
       * so if loading is true, then lastResponse and lastError will correspond
       * to the result of the previous request.
       *
       * The type of the response is determined by the value of `handleAs` at
       * the time that the request was generated.
       *
       * @type {Object}
       */
      lastResponse: {
        type: Object,
        notify: true,
        readOnly: true
      },

      /**
       * lastRequest's error, if any.
       *
       * @type {Object}
       */
      lastError: {
        type: Object,
        notify: true,
        readOnly: true
      },

      /**
       * An Array of all in-flight requests originating from this iron-ajax
       * element.
       */
      activeRequests: {
        type: Array,
        notify: true,
        readOnly: true,
        value: function() {
          return [];
        }
      },

      /**
       * Length of time in milliseconds to debounce multiple automatically generated requests.
       */
      debounceDuration: {
        type: Number,
        value: 0,
        notify: true
      },

      /**
       * Prefix to be stripped from a JSON response before parsing it.
       *
       * In order to prevent an attack using CSRF with Array responses
       * (http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/)
       * many backends will mitigate this by prefixing all JSON response bodies
       * with a string that would be nonsensical to a JavaScript parser.
       *
       */
      jsonPrefix: {
        type: String,
        value: ''
      },

      /**
       * By default, iron-ajax's events do not bubble. Setting this attribute will cause its
       * request and response events as well as its iron-ajax-request, -response,  and -error
       * events to bubble to the window object. The vanilla error event never bubbles when
       * using shadow dom even if this.bubbles is true because a scoped flag is not passed with
       * it (first link) and because the shadow dom spec did not used to allow certain events,
       * including events named error, to leak outside of shadow trees (second link).
       * https://www.w3.org/TR/shadow-dom/#scoped-flag
       * https://www.w3.org/TR/2015/WD-shadow-dom-20151215/#events-that-are-not-leaked-into-ancestor-trees
       */
      bubbles: {
        type: Boolean,
        value: false
      },

      _boundHandleResponse: {
        type: Function,
        value: function() {
          return this._handleResponse.bind(this);
        }
      }
    },

    observers: [
      '_requestOptionsChanged(url, method, params.*, headers, contentType, ' +
          'body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)'
    ],

    /**
     * The query string that should be appended to the `url`, serialized from
     * the current value of `params`.
     *
     * @return {string}
     */
    get queryString () {
      var queryParts = [];
      var param;
      var value;

      for (param in this.params) {
        value = this.params[param];
        param = window.encodeURIComponent(param);

        if (Array.isArray(value)) {
          for (var i = 0; i < value.length; i++) {
            queryParts.push(param + '=' + window.encodeURIComponent(value[i]));
          }
        } else if (value !== null) {
          queryParts.push(param + '=' + window.encodeURIComponent(value));
        } else {
          queryParts.push(param);
        }
      }

      return queryParts.join('&');
    },

    /**
     * The `url` with query string (if `params` are specified), suitable for
     * providing to an `iron-request` instance.
     *
     * @return {string}
     */
    get requestUrl() {
      var queryString = this.queryString;
      var url = this.url || '';

      if (queryString) {
        var bindingChar = url.indexOf('?') >= 0 ? '&' : '?';
        return url + bindingChar + queryString;
      }

      return url;
    },

    /**
     * An object that maps header names to header values, first applying the
     * the value of `Content-Type` and then overlaying the headers specified
     * in the `headers` property.
     *
     * @return {Object}
     */
    get requestHeaders() {
      var headers = {};
      var contentType = this.contentType;
      if (contentType == null && (typeof this.body === 'string')) {
        contentType = 'application/x-www-form-urlencoded';
      }
      if (contentType) {
        headers['content-type'] = contentType;
      }
      var header;

      if (this.headers instanceof Object) {
        for (header in this.headers) {
          headers[header] = this.headers[header].toString();
        }
      }

      return headers;
    },

    /**
     * Request options suitable for generating an `iron-request` instance based
     * on the current state of the `iron-ajax` instance's properties.
     *
     * @return {{
     *   url: string,
     *   method: (string|undefined),
     *   async: (boolean|undefined),
     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),
     *   headers: (Object|undefined),
     *   handleAs: (string|undefined),
     *   jsonPrefix: (string|undefined),
     *   withCredentials: (boolean|undefined)}}
     */
    toRequestOptions: function() {
      return {
        url: this.requestUrl || '',
        method: this.method,
        headers: this.requestHeaders,
        body: this.body,
        async: !this.sync,
        handleAs: this.handleAs,
        jsonPrefix: this.jsonPrefix,
        withCredentials: this.withCredentials,
        timeout: this.timeout
      };
    },

    /**
     * Performs an AJAX request to the specified URL.
     *
     * @return {!IronRequestElement}
     */
    generateRequest: function() {
      var request = /** @type {!IronRequestElement} */ (document.createElement('iron-request'));
      var requestOptions = this.toRequestOptions();

      this.push('activeRequests', request);

      request.completes.then(
        this._boundHandleResponse
      ).catch(
        this._handleError.bind(this, request)
      ).then(
        this._discardRequest.bind(this, request)
      );

      request.send(requestOptions);

      this._setLastRequest(request);
      this._setLoading(true);

      this.fire('request', {
        request: request,
        options: requestOptions
      }, {bubbles: this.bubbles});

      this.fire('iron-ajax-request', {
        request: request,
        options: requestOptions
      }, {bubbles: this.bubbles});

      return request;
    },

    _handleResponse: function(request) {
      if (request === this.lastRequest) {
        this._setLastResponse(request.response);
        this._setLastError(null);
        this._setLoading(false);
      }
      this.fire('response', request, {bubbles: this.bubbles});
      this.fire('iron-ajax-response', request, {bubbles: this.bubbles});
    },

    _handleError: function(request, error) {
      if (this.verbose) {
        Polymer.Base._error(error);
      }

      if (request === this.lastRequest) {
        this._setLastError({
          request: request,
          error: error,
          status: request.xhr.status,
          statusText: request.xhr.statusText,
          response: request.xhr.response
        });
        this._setLastResponse(null);
        this._setLoading(false);
      }

      // Tests fail if this goes after the normal this.fire('error', ...)
      this.fire('iron-ajax-error', {
        request: request,
        error: error
      }, {bubbles: this.bubbles});

      this.fire('error', {
        request: request,
        error: error
      }, {bubbles: this.bubbles});
    },

    _discardRequest: function(request) {
      var requestIndex = this.activeRequests.indexOf(request);

      if (requestIndex > -1) {
        this.splice('activeRequests', requestIndex, 1);
      }
    },

    _requestOptionsChanged: function() {
      this.debounce('generate-request', function() {
        if (this.url == null) {
          return;
        }

        if (this.auto) {
          this.generateRequest();
        }
      }, this.debounceDuration);
    },

  });
</script>
<script>
/*
`<iron-form>` is an HTML `<form>` element that can validate and submit any custom
elements that implement `Polymer.IronFormElementBehavior`, as well as any
native HTML elements. For more information on which attributes are
available on the native form element, see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form

It supports both `get` and `post` methods, and uses an `iron-ajax` element to
submit the form data to the action URL.

  Example:

    <form is="iron-form" id="form" method="post" action="/form/handler">
      <paper-input name="name" label="name"></paper-input>
      <input name="address">
      ...
    </form>

By default, a native `<button>` element will submit this form. However, if you
want to submit it from a custom element's click handler, you need to explicitly
call the form's `submit` method.

  Example:

    <paper-button raised onclick="submitForm()">Submit</paper-button>

    function submitForm() {
      document.getElementById('form').submit();
    }

To customize the request sent to the server, you can listen to the `iron-form-presubmit`
event, and modify the form's[`iron-ajax`](https://elements.polymer-project.org/elements/iron-ajax)
object. However, If you want to not use `iron-ajax` at all, you can cancel the
event and do your own custom submission:

  Example of modifying the request, but still using the build-in form submission:

    form.addEventListener('iron-form-presubmit', function() {
      this.request.method = 'put';
      this.request.params = someCustomParams;
    });

  Example of bypassing the build-in form submission:

    form.addEventListener('iron-form-presubmit', function(event) {
      event.preventDefault();
      var firebase = new Firebase(form.getAttribute('action'));
      firebase.set(form.serialize());
    });

@demo demo/index.html
*/
  Polymer({

    is: 'iron-form',

    extends: 'form',

    properties: {
      /**
       * By default, the form will display the browser's native validation
       * UI (i.e. popup bubbles and invalid styles on invalid fields). You can
       * manually disable this; however, if you do, note that you will have to
       * manually style invalid *native* HTML fields yourself, as you are
       * explicitly preventing the native form from doing so.
       */
      disableNativeValidationUi: {
        type: Boolean,
        value: false
      },

      /**
      * Set the withCredentials flag when sending data.
      */
      withCredentials: {
        type: Boolean,
        value: false
      },

      /**
       * Content type to use when sending data. If the `contentType` property
       * is set and a `Content-Type` header is specified in the `headers`
       * property, the `headers` property value will take precedence.
       * If Content-Type is set to a value listed below, then
       * the `body` (typically used with POST requests) will be encoded accordingly.
       *
       *    * `content-type="application/json"`
       *      * body is encoded like `{"foo":"bar baz","x":1}`
       *    * `content-type="application/x-www-form-urlencoded"`
       *      * body is encoded like `foo=bar+baz&x=1`
       */
      contentType: {
        type: String,
        value: "application/x-www-form-urlencoded"
      },

      /**
      * HTTP request headers to send.
      *
      * Note: setting a `Content-Type` header here will override the value
      * specified by the `contentType` property of this element.
      */
      headers: {
        type: Object,
        value: function() {
          return {};
        }
      },

      /**
      * iron-ajax request object used to submit the form.
      */
      request: {
        type: Object,
      }
    },

    /**
     * Fired if the form cannot be submitted because it's invalid.
     *
     * @event iron-form-invalid
     */

    /**
     * Fired before the form is submitted.
     *
     * @event iron-form-presubmit
     */

    /**
     * Fired after the form is submitted.
     *
     * @event iron-form-submit
     */

     /**
      * Fired after the form is reset.
      *
      * @event iron-form-reset
      */

    /**
    * Fired after the form is submitted and a response is received. An
    * IronRequestElement is included as the event.detail object.
    *
    * @event iron-form-response
    */

    /**
     * Fired after the form is submitted and an error is received. An
     * IronRequestElement is included as the event.detail object.
     *
     * @event iron-form-error
     */
    listeners: {
      'iron-form-element-register': '_registerElement',
      'iron-form-element-unregister': '_unregisterElement',
      'submit': '_onSubmit',
      'reset': '_onReset'
    },

    registered: function() {
      // Dear reader: I apologize for what you're about to experience. You see,
      // Safari does not respect `required` on input elements, so it never
      // has any browser validation bubbles to show. And we have to feature
      // detect that, since we rely on the form submission to do the right thing.
      // See http://caniuse.com/#search=required.

      // Create a fake form, with an invalid input. If it gets submitted, it's Safari.
      var form = document.createElement('form');
      var input = document.createElement('input');
      input.setAttribute('required', 'true');
      form.appendChild(input);

      // If you call submit(), the form doesn't actually fire a submit event,
      // so you can't intercept it and cancel it. The event is only fired
      // from the magical button click submission.
      // See http://wayback.archive.org/web/20090323062817/http://blogs.vertigosoftware.com/snyholm/archive/2006/09/27/3788.aspx.
      var button = document.createElement('input');
      button.setAttribute('type', 'submit');
      form.appendChild(button);

      Polymer.clientSupportsFormValidationUI = true;
      form.addEventListener('submit', function(event) {
        // Oh good! We don't handle `required` correctly.
        Polymer.clientSupportsFormValidationUI = false;
        event.preventDefault();
      });
      button.click();
    },

    ready: function() {
      // Object that handles the ajax form submission request.
      this.request = document.createElement('iron-ajax');
      this.request.addEventListener('response', this._handleFormResponse.bind(this));
      this.request.addEventListener('error', this._handleFormError.bind(this));

      // Holds all the custom elements registered with this form.
      this._customElements = [];
      // Holds the initial values of the custom elements registered with this form.
      this._customElementsInitialValues = [];
    },

    /**
     * Submits the form.
     */
    submit: function() {
      if (!this.noValidate && !this.validate()) {
        // In order to trigger the native browser invalid-form UI, we need
        // to do perform a fake form submit.
        if (Polymer.clientSupportsFormValidationUI && !this.disableNativeValidationUi) {
          this._doFakeSubmitForValidation();
        }
        this.fire('iron-form-invalid');
        return;
      }

      var json = this.serialize();

      // Native forms can also index elements magically by their name (can't make
      // this up if I tried) so we need to get the correct attributes, not the
      // elements with those names.
      this.request.url = this.getAttribute('action');
      this.request.method = this.getAttribute('method');
      this.request.contentType = this.contentType;
      this.request.withCredentials = this.withCredentials;
      this.request.headers = this.headers;

      if (this.request.method.toUpperCase() === 'POST') {
        this.request.body = json;
      } else {
        this.request.params = json;
      }

      // Allow for a presubmit hook
      var event = this.fire('iron-form-presubmit', {}, {cancelable: true});
      if(!event.defaultPrevented) {
        this.request.generateRequest();
        this.fire('iron-form-submit', json);
      }
    },

    /**
     * Handler that is called when the native form fires a `submit` event
     *
     * @param {Event} event A `submit` event.
     */
    _onSubmit: function(event) {
      this.submit();

      // Don't perform a page refresh.
      if (event) {
        event.preventDefault();
      }

      return false;
    },

    /**
     * Handler that is called when the native form fires a `reset` event
     *
     * @param {Event} event A `reset` event.
     */
    _onReset: function(event) {
      this._resetCustomElements();
    },

    /**
     * Returns a json object containing name/value pairs for all the registered
     * custom components and native elements of the form. If there are elements
     * with duplicate names, then their values will get aggregated into an
     * array of values.
     *
     * @return {!Object}
     */
    serialize: function() {
      var json = {};

      function addSerializedElement(name, value) {
        // If the name doesn't exist, add it. Otherwise, serialize it to
        // an array,
        if (!json[name]) {
          json[name] = value;
        } else {
          if (!Array.isArray(json[name])) {
            json[name] = [json[name]];
          }
          json[name].push(value);
        }
      }

      // Go through all of the registered custom components.
      for (var el, i = 0; el = this._customElements[i], i < this._customElements.length; i++) {
        // If this custom element is inside a custom element that has already
        // registered to this form, skip it.
        if (!this._isChildOfRegisteredParent(el, true) && this._useValue(el)) {
          addSerializedElement(el.name, el.value);
        }
      }

      // Also go through the form's native elements.
      for (var el, i = 0; el = this.elements[i], i < this.elements.length; i++) {
        // If this native element is inside a custom element that has already
        // registered to this form, skip it.
        if (this._isChildOfRegisteredParent(el, true) || !this._useValue(el)) {
          continue;
        }

        // A <select multiple> has an array of values.
        if (el.tagName.toLowerCase() === 'select' && el.multiple) {
          for (var o = 0; o < el.options.length; o++) {
            if (el.options[o].selected) {
              addSerializedElement(el.name, el.options[o].value);
            }
          }
        } else {
          addSerializedElement(el.name, el.value);
        }
      }

      return json;
    },

    _handleFormResponse: function (event) {
      this.fire('iron-form-response', event.detail);
    },

    _handleFormError: function (event) {
      this.fire('iron-form-error', event.detail);
    },

    _registerElement: function(e) {
      // Get the actual element that fired the event
      var element = Polymer.dom(e).rootTarget;

      element._parentForm = this;
      this._customElements.push(element);

      // Save the original value of this input.
      this._customElementsInitialValues.push(
          this._usesCheckedInsteadOfValue(element) ? element.checked : element.value);
    },

    _unregisterElement: function(e) {
      var target = e.detail.target;
      if (target) {
        var index = this._customElements.indexOf(target);
        if (index > -1) {
          this._customElements.splice(index, 1);
          this._customElementsInitialValues.splice(index, 1);
        }
      }
    },

    /**
     * Validates all the required elements (custom and native) in the form.
     * @return {boolean} True if all the elements are valid.
     */
    validate: function() {
      var valid = true;

      // Validate all the custom elements.
      var validatable;
      for (var el, i = 0; el = this._customElements[i], i < this._customElements.length; i++) {
        if (!this._isChildOfRegisteredParent(el, false) && !el.disabled) {
          validatable = /** @type {{validate: (function() : boolean)}} */ (el);
          // Some elements may not have correctly defined a validate method.
          if (validatable.validate)
            valid = !!validatable.validate() && valid;
        }
      }

      // Validate the form's native elements.
      for (var el, i = 0; el = this.elements[i], i < this.elements.length; i++) {
        // If this native element is inside a custom element that has already
        // registered to this form, skip it.
        if (this._isChildOfRegisteredParent(el, false)) {
          continue;
        }

        // Custom elements that extend a native element will also appear in
        // this list, but they've already been validated.
        if (!el.hasAttribute('is') && el.willValidate && el.checkValidity) {
          valid = el.checkValidity() && valid;
        }
      }

      return valid;
    },

    /**
     * Returns whether the given element is a radio-button or a checkbox.
     * @return {boolean} True if the element has a `checked` property.
     */
    _usesCheckedInsteadOfValue: function(el) {
      if (el.type == 'checkbox' ||
          el.type == 'radio' ||
          el.getAttribute('role') == 'checkbox' ||
          el.getAttribute('role') == 'radio' ||
          el['_hasIronCheckedElementBehavior']) {
        return true;
      }
      return false;
    },

    _useValue: function(el) {
      // Skip disabled elements or elements that don't have a `name` attribute.
      if (el.disabled || !el.name) {
        return false;
      }

      // Checkboxes and radio buttons should only use their value if they're
      // checked. Custom paper-checkbox and paper-radio-button elements
      // don't have a type, but they have the correct role set.
      if (this._usesCheckedInsteadOfValue(el))
        return el.checked;
      return true;
    },

    _doFakeSubmitForValidation: function() {
      var fakeSubmit = document.createElement('input');
      fakeSubmit.setAttribute('type', 'submit');
      fakeSubmit.style.display = 'none';
      this.appendChild(fakeSubmit);

      fakeSubmit.click();

      this.removeChild(fakeSubmit);
    },

    /**
     * Resets all non-disabled form custom elements to their initial values.
     */
    _resetCustomElements: function() {
      // Reset all the registered custom components. We need to do this after
      // the native reset, since programmatically changing the `value` of some
      // native elements (iron-input in particular) does not notify its
      // parent `paper-input`, which will now display the wrong value.
      this.async(function() {
        for (var el, i = 0; el = this._customElements[i], i < this._customElements.length; i++) {
          if (el.disabled)
            continue;

          if (this._usesCheckedInsteadOfValue(el)) {
            el.checked = this._customElementsInitialValues[i];
          } else {
            // The native input/textarea displays literal "undefined" when its
            // its value is set to undefined, so default to null instead.
            var value = this._customElementsInitialValues[i];
            if (value === undefined) {
              value = null;
            }
            el.value = value;

            // In the shady DOM, the native form is all-seeing, and will
            // reset the nested inputs inside <paper-input> and <paper-textarea>.
            // In particular, it resets them to what it thinks the default value
            // is (i.e. "", before the bindings have ran), and since this is
            // a programmatic update, it also doesn't fire any events.
            // Which means we need to manually update the native element's value.
            if (el.inputElement) {
              el.inputElement.value = el.value;
            } else if (el.textarea) {
              el.textarea.value = el.value;
            }
          }
          el.invalid = false;
        }

        this.fire('iron-form-reset');
      }, 1);
    },

    /**
     * Returns true if `node` is in the shadow DOM of a different element,
     * that has also implemented IronFormElementBehavior and is registered
     * to this form. The second parameter specifies if the parent must have a
     * name to be considered.
     */
    _isChildOfRegisteredParent: function(node, checkHasName) {
      var parent = node;

      // At some point going up the tree we'll find either this form or the document.
      while (parent && parent !== document && parent != this) {
        // Use logical parentnode, or native ShadowRoot host.
        parent = Polymer.dom(parent).parentNode || parent.host;

        // Check if the parent was registered and submittable.
        if (parent &&
            (!checkHasName || parent.name) &&
            parent._parentForm === this) {
          return true;
        }
      }
      return false;
    }

  });

</script>
<!--
`<body-form-editor>` A Form data editor for the HTTP body

The element provides varlidation against RAML type it the `type` proeprty is set. Although it will
display form error (invalida data, wrong pattern, type, etc) it will set the value as the form
controls has them right now. So the output bight be not valid in terms of the spec. But the user
will be warned in the UI.

### Example
```
<body-form-editor value="{{value}}" type="[[ramlType]]"></body-form-editor>
```

If the `type` is provided (as a RAML definition type) and it contains the `formParameters` object
then the for will render predefinied fields.

### Styling
The `<body-form-editor>` is consistent with the `<raml-request-parameters-form>` styling.

Custom property | Description | Default
----------------|-------------|----------
`--body-form-editor` | Mixin applied to the element | `{}`
`--raml-request-parameters-form` | The same as above. | `{}`
`--raml-request-parameters-editor-input-label-color` | Color of the paper input's labels | `rgba(0, 0, 0, 0.48)`
`--raml-request-parameters-editor-predefined-label-color` | Color of the predefinied parameter name label | `rgba(0, 0, 0, 0.87)`
`--raml-request-parameters-editor-docs-color` | Color of the documentation string below the input field. Note that it will appy also `marked-element` styles to this element | `rgba(0, 0, 0, 0.87)`
`--raml-request-parameters-editor-predefined-row` | Mixin applied to each predefined by schema row of the form | `{}`
`--raml-request-parameters-editor-user-defined-row` | Mixin applied to each user defined row of the form | `{}`
`--form-label` | Mixin applied to the predefinied parameter name label | `{}`

Additionally when the `narrow` attribute is set then the form will be displayed in the mobile friendly view.

@group UI Elements
@element body-form-editor
@demo demo/index.html
-->
<dom-module id="body-form-editor" assetpath="bower_components/body-form-editor/">
  <template>
    <style>
    :host {
      display: block;
      padding: 8px;

      @apply(--raml-request-parameters-form);
      @apply(--body-form-editor);

      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-input-label-color, rgba(0, 0, 0, 0.48));
      }
    }

    .user-defined-row,
    .predefined-row {
      @apply(--layout-horizontal);
      position: relative;

    }

    .predefined-row {
      @apply(--raml-request-parameters-editor-predefined-row);
    }

    .user-defined-row {
      @apply(--raml-request-parameters-editor-user-defined-row);
    }

    .predefined-row label {
      display: block;
      min-width: 120px;
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
      @apply(--paper-font-body1);
      font-size: 15px;
      color: var(--raml-request-parameters-editor-predefined-label-color, rgba(0, 0, 0, 0.87));
      text-align: right;
      margin-right: 8px;
      padding-top: 12px;
      @apply(--form-label);
    }

    .param-name {
      margin-right: 8px;
      @apply(--layout-flex);
    }

    .param-value {
      @apply(--layout-vertical);
      @apply(--layout-flex);
    }

    .param-value .input {
      @apply(--layout-horizontal);
    }

    paper-input {
      width: 100%;
    }

    .docs {
      @apply(--paper-font-common-base);
      font-size: 13px;
      font-weight: 200;
      line-height: 24px;
      color: var(--raml-request-parameters-editor-docs-color, rgba(0, 0, 0, 0.87));
    }

    .action-button {
      color: var(--primary-color);
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    paper-icon-button {
      @apply(--icon-button);
    }

    paper-icon-button:hover {
      @apply(--icon-button-hover);
    }

    </style>
    <form is="iron-form" id="form">
      <template is="dom-repeat" items="{{schema}}">
        <div class="predefined-row">
          <label class="label" for="body-form-editor-[[index]]" hidden="[[narrow]]">[[item.name]]<span hidden$="[[!item.required]]">*</span></label>
          <div class="param-value">
            <template is="dom-if" if="[[_computeIsEnum(item.enum)]]" restamp="">
              <paper-dropdown-menu no-label-float="" label="[[_computeInputLabel(item.*, narrow)]]" name="[[item.name]]" required="" id="body-form-editor-[[index]]">
                <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{item.value}}">
                  <template is="dom-repeat" items="[[item.enum]]">
                    <paper-item data-value="[[item]]">[[item]]</paper-item>
                  </template>
                  <paper-item label=" ">(empty value)</paper-item>
                </paper-listbox>
              </paper-dropdown-menu>
            </template>
            <template is="dom-if" if="[[!_computeIsEnum(item.enum)]]" restamp="">
              <div class="input">
                <paper-input no-label-float="[[!narrow]]" label="[[_computeInputLabel(item.*, narrow)]]" id="body-form-editor-[[index]]" value="{{item.value}}" required="[[item.required]]" pattern="[[item.pattern]]" name="[[item.name]]" auto-validate="" type="[[_computeInputType(item.type)]]" min="[[item.minimum]]" max="[[item.maximum]]" maxlength="[[item.maxLength]]"></paper-input>
              </div>
            </template>
            <div class="docs" hidden$="[[!_hasValue(item.description)]]">
              <marked-element markdown="[[item.description]]">
                <div class="markdown-html markdown-body"></div>
              </marked-element>
            </div>
          </div>
        </div>
      </template>
      <template is="dom-repeat" items="{{userParams}}" user-params="">
        <div class="user-defined-row">
          <div class="param-name">
            <paper-input no-label-float="[[!narrow]]" label="Param name" value="{{item.name}}" type="text"></paper-input>
          </div>
          <div class="param-value">
            <div class="input">
              <paper-input no-label-float="[[!narrow]]" label="Param value" name="[[item.name]]" value="{{item.value}}" type="text"></paper-input>
            </div>
          </div>
          <paper-icon-button icon="arc:close" on-tap="_removeUserParam" title="Remove form parameter"></paper-icon-button>
        </div>
      </template>
      <div class="add-action">
        <paper-button class="action-button" on-tap="_addUserParam" title="Add form parameter">add</paper-button>
      </div>
    </form>
  </template>
  <script>
  Polymer({
    is: 'body-form-editor',

    behaviors: [Polymer.IronValidatableBehavior],

    properties: {
      /**
       * If available, this is the RAML's type definition. It will provide schema definition
       * for the editor.
       */
      type: Object, //
      // gets / sets JSON string value
      value: {
        type: String,
        notify: true,
        value: ''
      },
      /**
       * Determines if the editor is currently displayed in the UI and relevant to the user.
       * If not (parent element/app set it to false) then all computations will be on hold
       * until the element is open again.
       */
      opened: {
        type: Boolean,
        value: true
      },
      // A schema as a list of properties that raml JS parser returns.
      schema: Array,
      // If true then narrow layout will be applied.
      narrow: {
        type: Boolean,
        value: false
      },
      // User defined parameters
      userParams: Array
    },

    observers: [
      '_typeChanged(type.*)',
      '_schemaChanged(schema.*)',
      '_schemaChanged(userParams.*)',
      '_valueChanged(opened, value)'
    ],
    // Handler to type change observer.
    _typeChanged: function(record) {
      var type = record.base;
      if (!type || !type.formParameters) {
        this.schema = undefined;
      } else {
        this.schema = this.readSchema(type.formParameters);
      }
    },
    // Computes if given array item has enum values.
    _computeIsEnum: function(itemEnum) {
      return !!(itemEnum && itemEnum.length);
    },
    // Computes input type attribute based on item's type
    _computeInputType: function(itemType) {
      if (!itemType || itemType === 'text') {
        return 'text';
      }
      switch (itemType) {
        case 'number':
        case 'integer':
        case 'float':
          return 'number';
        default:
          return 'text';
      }
    },
    // Computes the name of the label to display in the input field.
    _computeInputLabel: function(record, narrow) {
      var object = record.base;
      if (!object) {
        return;
      }
      if (narrow) {
        return object.name;
      }
      if (!!object.examples && object.examples.length && object.examples[0]) {
        return 'Example: ' + object.examples[0];
      }
      return 'Param value';
    },
    /**
     * Check if passed object is not empty.
     * 0 (zero) returns true while empty string returns false.
     *
     * @return {Boolean} True/False depending if passed object has a value.
     */
    _hasValue: function(obj) {
      if (typeof obj === 'number' && obj === 0) {
        return true;
      }
      if (typeof obj === 'boolean') {
        return true;
      }
      return !!obj;
    },
    // Overidden from Polymer.IronValidatableBehavior. Will set the `invalid`
    // attribute automatically, which should be used for styling.
    _getValidity: function() {
      return this.$.form.validate();
    },
    /**
     * Creates schema object from the type properties.
     *
     * @param {Object} obj The RAML type form peroperties
     * @return {Array}
     */
    readSchema: function(obj) {
      if (!obj) {
        return [];
      }
      if (obj instanceof Array) {
        return obj;
      }
      var names = Object.keys(obj);
      if (!names) {
        return [];
      }
      return names.map(function(key) {
        var item = obj[key];
        item.key = key;
        if (typeof item.default !== 'undefined' && !item.value) {
          item.value = item.default;
        }
        if (typeof item.value === 'undefined' && item.required) {
          if (item.examples) {
            item.value = item.examples[0];
          } else if (item.example) {
            item.value = item.example;
          }
          if (item.value && item.value.indexOf && item.value.indexOf(item.name + '=') === 0) {
            item.value = item.value.substr(item.name.length + 1);
          }
        }
        if (typeof item.value === 'undefined' && item.enum && item.enum.length) {
          item.value = item.enum[0];
        }
        return Object.assign({}, item);
      });
    },
    /**
     * A handler to the scheme change observer.
     * Serializes the form value and sets the `value` property.
     */
    _schemaChanged: function() {
      this.async(function() {
        var values = this.$.form.serialize();
        var value = this._wwwFormUrlEncode(values);
        this._internalValueChange = true;
        this.set('value', value);
        this._internalValueChange = false;
      }, 1);
    },

    /**
     * @param {Object} object The object to encode as x-www-form-urlencoded.
     * @return {string} .
     */
    _wwwFormUrlEncode: function(object) {
      if (!object) {
        return '';
      }
      var pieces = [];
      Object.keys(object).forEach(function(key) {
        var value = object[key];
        if (!value) {
          if (!this._isKeyRequired(key)) {
            return;
          }
        }
        pieces.push(
            this._wwwFormUrlEncodePiece(key) + '=' +
            this._wwwFormUrlEncodePiece(value));
      }, this);
      return pieces.join('&');
    },
    /**
     * @param {*} str A key or value to encode as x-www-form-urlencoded.
     * @return {string} .
     */
    _wwwFormUrlEncodePiece: function(str) {
      // Spec says to normalize newlines to \r\n and replace %20 spaces with +.
      // jQuery does this as well, so this is likely to be widely compatible.
      if (!str) {
        return '';
      }
      return encodeURIComponent(str.toString().replace(/\r?\n/g, '\r\n'))
          .replace(/%20/g, '+');
    },
    /**
     * @param {String} str A key or value to decode as x-www-form-urlencoded.
     * @return {string} .
     */
    _wwwFormUrlDecode: function(str) {
      // Spec says to normalize newlines to \r\n and replace %20 spaces with +.
      if (!str) {
        return '';
      }
      return decodeURIComponent(str.toString().replace(/\+/g, ' '));
    },
    // Checks if the param name is required by the type spec.
    _isKeyRequired: function(key) {
      if (!key) {
        return false;
      }
      var schema = this.schema;
      if (!schema || !schema.length) {
        return false;
      }
      for (var i = 0, len = schema.length; i < len; i++) {
        if (schema[i].key === key) {
          return schema[i].required === true;
        }
      }
      return false;
    },

    _valueChanged: function(opened, value) {
      if (!opened || this._internalValueChange) {
        return;
      }
      if (!value) {
        return this._updateValues({});
      }
      var map = this._deserializeValues(value);
      this._updateValues(map);
    },
    /**
     * Reads the key - value properties from the string.
     *
     * @param {String} data www-url-encoded string to decode.
     * @return {Object} A map of key - value part of the form data. If passed value is not the
     * string then it will return empty map.
     */
    _deserializeValues: function(data) {
      if (!data || typeof data !== 'string') {
        return {};
      }
      var params = data.split('&').map(function(pair) {
        if (!pair) {
          return null;
        }
        var _param = pair.split('=');
        if (!_param.length) {
          return null;
        }
        return {
          name: this._wwwFormUrlDecode(_param[0]),
          value: this._wwwFormUrlDecode(_param[1])
        };
      }, this)
      .filter(function(item) {
        return !!item;
      });
      var result = {};
      params.forEach(function(item) {
        result[item.name] = item.value;
      });
      return result;
    },
    /**
     * Updates the form values for given map.
     * The map's key will be mapped to the scheme's or userParams' name property
     * and value to their values. If the map does not contain value.
     */
    _updateValues: function(map) {
      map = map || {};
      var mapNames = Object.keys(map);
      var schema = this.schema;
      if (schema) {
        // it should also clear the values if they are not in the map.
        schema.forEach(function(item, i) {
          var _name = item.name;
          var _index = mapNames.indexOf(_name);
          if (_index === -1) {
            this.set(['schema', i, 'value'], '');
          } else {
            this.set(['schema', i, 'value'], map[_name]);
            mapNames.splice(_index, 1);
          }
        }, this);
      }
      if (!mapNames.length) {
        return;
      }
      if (!this.userParams) {
        this.userParams = [];
      }
      var userParamsNames = this.userParams.map(function(item, i) {
        if (mapNames.indexOf(item.name) === -1) {
          this.splice('userParams', i, 1);
          return null;
        }
        return item.name;
      }, this)
      .filter(function(item) {
        return !!item;
      });
      // What's left is not in the schema
      mapNames.forEach(function(item) {
        var _index = userParamsNames.indexOf(item);
        if (_index !== -1) {
          this.set(['userParams', _index, 'value'], map[item]);
        } else {
          this.push('userParams', {
            name: item,
            value: map[item]
          });
        }
      }, this);
    },
    // Handler for the user param click event
    _removeUserParam: function(e) {
      var rp = this.$$('template[user-params]');
      var index = rp.indexForElement(e.target);
      if (index === undefined || index === -1) {
        return;
      }
      this.splice('userParams', index, 1);
    },
    // Append new user param to the form
    _addUserParam: function() {
      if (!this.userParams) {
        this.userParams = [];
      }
      this.push('userParams', {
        name: '',
        value: ''
      });
    }
  });
  </script>
</dom-module>
<dom-module id="cm-arc" assetpath="bower_components/raml-body-editor-panel/">
  <template>
    <style>
      /* BASICS */

      .CodeMirror.cm-s-cm-arc {
        font-family: monospace;
        font-size: 15px;
        height: inherit;
        min-height: 60px;
        padding: 8px;
        color: var(--arc-code-mirror-color: #757575);
        background-color: var(--arc-code-mirror-background-color; #fff);
        cursor: text;
      }

      .CodeMirror.cm-s-cm-arc.parsed-content {
        white-space: pre-line;
      }

      /* PADDING */

      .cm-s-cm-arc .CodeMirror-lines {
        padding: 4px 0;
        /* Vertical padding around content */
      }

      .CodeMirror.cm-s-cm-arc pre {
        padding: 0 4px;
        /* Horizontal padding of content */
      }

      .cm-s-cm-arc .CodeMirror-scrollbar-filler,
      .cm-s-cm-arc .CodeMirror-gutter-filler {
        background-color: white;
        /* The little square between H and V scrollbars */
      }

      /* GUTTER */

      .cm-s-cm-arc .CodeMirror-gutters {
        border-right: 1px solid #ddd;
        background-color: #f7f7f7;
        white-space: nowrap;
      }

      .cm-s-cm-arc .CodeMirror-linenumbers {}

      .cm-s-cm-arc .CodeMirror-linenumber {
        padding: 0 3px 0 5px;
        min-width: 20px;
        text-align: right;
        color: #999;
        white-space: nowrap;
      }

      .cm-s-cm-arc .CodeMirror-guttermarker {
        color: black;
      }

      .cm-s-cm-arc .CodeMirror-guttermarker-subtle {
        color: #999;
      }

      /* CURSOR */

      .CodeMirror.cm-s-cm-arc div.CodeMirror-cursor {
        border-left: 1px solid black;
      }
      /* Shown when moving in bi-directional text */
      .CodeMirror.cm-s-cm-arc div.CodeMirror-secondarycursor {
        border-left: 1px solid silver;
      }

      .CodeMirror.cm-fat-cursor div.CodeMirror-cursor {
        width: auto;
        border: 0;
        background: #7e7;
      }

      .CodeMirror.cm-fat-cursor div.CodeMirror-cursors {
        z-index: 1;
      }

      .cm-animate-fat-cursor {
        width: auto;
        border: 0;
        -webkit-animation: blink 1.06s steps(1) infinite;
        -moz-animation: blink 1.06s steps(1) infinite;
        animation: blink 1.06s steps(1) infinite;
      }

      @-webkit-keyframes blink {
        0% {
          background: #7e7;
        }

        50% {
          background: none;
        }

        100% {
          background: #7e7;
        }
      }

      @keyframes blink {
        0% {
          background: #7e7;
        }

        50% {
          background: none;
        }

        100% {
          background: #7e7;
        }
      }

      /* Can style cursor different in overwrite (non-insert) mode */
      div.CodeMirror-overwrite div.CodeMirror-cursor {}

      .cm-tab {
        display: inline-block;
        text-decoration: inherit;
      }

      .CodeMirror-ruler {
        border-left: 1px solid #ccc;
        position: absolute;
      }

      /* DEFAULT THEME */

      .cm-s-cm-arc .cm-keyword {
        color: #708;
      }

      .cm-s-cm-arc .cm-atom {
        color: #B71C1C;
      }

      .cm-s-cm-arc .cm-number {
        color: #164;
      }

      .cm-s-cm-arc .cm-def {
        color: #00f;
      }

      .cm-s-cm-arc .cm-variable,
      .cm-s-cm-arc .cm-punctuation,
      .cm-s-cm-arc .cm-property,
      .cm-s-cm-arc .cm-operator {

      }

      .cm-s-cm-arc .cm-string.cm-property {
        color: #43A047;
      }

      .cm-s-cm-arc .cm-variable-2 {
        color: #05a;
      }

      .cm-s-cm-arc .cm-variable-3 {
        color: #085;
      }

      .cm-s-cm-arc .cm-comment {
        color: #a50;
      }

      .cm-s-cm-arc .cm-string {
        color: #009688;
      }

      .cm-s-cm-arc .cm-string-2 {
        color: #f50;
      }

      .cm-s-cm-arc .cm-meta {
        color: #555;
      }

      .cm-s-cm-arc .cm-qualifier {
        color: #555;
      }

      .cm-s-cm-arc .cm-builtin {
        color: #30a;
      }

      .cm-s-cm-arc .cm-bracket {
        color: #997;
      }

      .cm-s-cm-arc .cm-tag {
        color: #170;
      }

      .cm-s-cm-arc .cm-attribute {
        color: #00c;
      }

      .cm-s-cm-arc .cm-header {
        color: blue;
      }

      .cm-s-cm-arc .cm-quote {
        color: #090;
      }

      .cm-s-cm-arc .cm-hr {
        color: #999;
      }

      .cm-s-cm-arc .cm-link {
        color: #00c;
      }

      .cm-negative {
        color: #d44;
      }

      .cm-positive {
        color: #292;
      }

      .cm-header,
      .cm-strong {
        font-weight: bold;
      }

      .cm-em {
        font-style: italic;
      }

      .cm-link {
        text-decoration: underline;
      }

      .cm-strikethrough {
        text-decoration: line-through;
      }

      .cm-s-cm-arc .cm-error {
        color: #f00;
      }

      .cm-invalidchar {
        color: #f00;
      }

      .CodeMirror-composing {
        border-bottom: 2px solid;
      }

      /* Default styles for common addons */

      div.CodeMirror span.CodeMirror-matchingbracket {
        color: #0f0;
      }

      div.CodeMirror span.CodeMirror-nonmatchingbracket {
        color: #f22;
      }

      .CodeMirror-matchingtag {
        background: rgba(255, 150, 0, .3);
      }

      .CodeMirror-activeline-background {
        background: #e8f2ff;
      }

      /* STOP */

      /* The rest of this file contains styles related to the mechanics of
 the editor. You probably shouldn't touch them. */

      .CodeMirror {
        position: relative;
        overflow: hidden;
        background: white;
      }

      .cm-s-cm-arc .CodeMirror-scroll {
        overflow: auto !important;
        /* Things will break if this is overridden */
        /* 30px is the magic margin used to hide the element's real scrollbars */
        /* See overflow: hidden in .CodeMirror */
        margin-bottom: -30px;
        margin-right: -30px;
        padding-bottom: 30px;
        height: 100%;
        outline: none;
        /* Prevent dragging from highlighting the element */
        position: relative;
      }

      .CodeMirror-sizer {
        position: relative;
        border-right: 30px solid transparent;
      }

      /* The fake, visible scrollbars. Used to force redraw during scrolling
 before actuall scrolling happens, thus preventing shaking and
 flickering artifacts. */
      .CodeMirror-vscrollbar,
      .CodeMirror-hscrollbar,
      .CodeMirror-scrollbar-filler,
      .CodeMirror-gutter-filler {
        position: absolute;
        z-index: 6;
        display: none;
      }

      .CodeMirror-vscrollbar {
        right: 0;
        top: 0;
        overflow-x: hidden;
        overflow-y: scroll;
      }

      .CodeMirror-hscrollbar {
        bottom: 0;
        left: 0;
        overflow-y: hidden;
        overflow-x: scroll;
      }

      .CodeMirror-scrollbar-filler {
        right: 0;
        bottom: 0;
      }

      .CodeMirror-gutter-filler {
        left: 0;
        bottom: 0;
      }

      .CodeMirror-gutters {
        position: absolute;
        left: 0;
        top: 0;
        z-index: 3;
      }

      .CodeMirror-gutter {
        white-space: normal;
        height: 100%;
        display: inline-block;
        margin-bottom: -30px;
        /* Hack to make IE7 behave */
        *zoom: 1;
        *display: inline;
      }

      .CodeMirror-gutter-wrapper {
        position: absolute;
        z-index: 4;
        height: 100%;
      }

      .CodeMirror-gutter-elt {
        position: absolute;
        cursor: default;
        z-index: 4;
      }

      .CodeMirror-gutter-wrapper {
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      .CodeMirror-lines {
        cursor: text;
        min-height: 1px;
        /* prevents collapsing before first draw */
        ;
      }

      .CodeMirror pre {
        /* Reset some styles that the rest of the page might have set */
        -moz-border-radius: 0;
        -webkit-border-radius: 0;
        border-radius: 0;
        border-width: 0;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        margin: 0;
        white-space: pre;
        word-wrap: normal;
        line-height: inherit;
        color: inherit;
        z-index: 2;
        position: relative;
        overflow: visible;
        -webkit-tap-highlight-color: transparent;
      }

      .CodeMirror-wrap pre {
        word-wrap: break-word;
        white-space: pre-wrap;
        word-break: normal;
      }

      .CodeMirror-linebackground {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 0;
      }

      .CodeMirror-linewidget {
        position: relative;
        z-index: 2;
        overflow: auto;
      }

      .CodeMirror-widget {}

      .CodeMirror-code {
        outline: none;
      }

      /* Force content-box sizing for the elements where we expect it */
      .CodeMirror-scroll,
      .CodeMirror-sizer,
      .CodeMirror-gutter,
      .CodeMirror-gutters,
      .CodeMirror-linenumber {
        -moz-box-sizing: content-box;
        box-sizing: content-box;
      }

      .CodeMirror-measure {
        position: absolute;
        width: 100%;
        height: 0;
        overflow: hidden;
        visibility: hidden;
      }

      .CodeMirror-measure pre {
        position: static;
      }

      .CodeMirror div.CodeMirror-cursor {
        position: absolute;
        border-right: none;
        width: 0;
      }

      div.CodeMirror-cursors {
        visibility: hidden;
        position: relative;
        z-index: 3;
      }

      .CodeMirror-focused div.CodeMirror-cursors {
        visibility: visible;
      }

      .CodeMirror-selected {
        background: #d9d9d9;
      }

      .CodeMirror-focused .CodeMirror-selected {
        background: #d7d4f0;
      }

      .CodeMirror-crosshair {
        cursor: crosshair;
      }
      .CodeMirror ::selection {
        background: #d7d4f0;
      }
      .CodeMirror ::-moz-selection {
        background: #d7d4f0;
      }

      .cm-searching {
        background: #ffa;
        background: rgba(255, 255, 0, .4);
      }

      /* IE7 hack to prevent it from returning funny offsetTops on the spans */
      .CodeMirror span {
        *vertical-align: text-bottom;
      }

      /* Used to force a border model for a node */
      .cm-force-border {
        padding-right: 0.1px;
      }

      @media print {
        /* Hide the cursor when printing */
        .CodeMirror div.CodeMirror-cursors {
          visibility: hidden;
        }
      }

      /* See issue #2901 */
      .cm-tab-wrap-hack:after {
        content: '';
      }

      /* Help users use markselection to safely style text background */
      span.CodeMirror-selectedtext {
        background: none;
      }

    </style>
  </template>
</dom-module>
<!--
`<raml-body-editor-panel>` A body editor panel containin JSON, XML and form editors.

It is meant to work with the RAML spec. However without it, it will work as a CodeMirror editor.

The default view for the editor is source editor (powered by CodeMirror).
User can switch to the form view at any time using editor controls.

### Example
```
<raml-body-editor-panel></raml-body-editor-panel>
```

### Styling
`<raml-body-editor-panel>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-body-editor-panel` | Mixin applied to the element | `{}`

Use `paper-tabs` and `code-mirror` variables to style this elements.

@group RAML Elements
@element raml-body-editor-panel
@demo demo/index.html
-->
<dom-module id="raml-body-editor-panel" assetpath="bower_components/raml-body-editor-panel/">
  <template>
    <style>
     :host {
      display: block;

      @apply(--raml-body-editor-panel);

      --paper-tabs-content: {
        overflow: auto;
      }
    }

    .content-actions {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .actions-divider {
      @apply(--layout-flex);
    }

    paper-icon-button[active] {
      background-color: var(--raml-body-editor-panel-button-active, #BDBDBD);
    }
    </style>
    <div class="content-actions">
      <paper-icon-button icon="arc:content-copy" id="copyButton"></paper-icon-button>
      <paper-icon-button icon="arc:list" id="formButton" toggles="" active="{{formView}}"></paper-icon-button>
      <paper-tooltip for="copyButton">Copy current editor value to clipboard</paper-tooltip>
      <paper-tooltip for="formButton">Toggle form / source editor view</paper-tooltip>

      <template is="dom-if" if="[[_computeHasMany(mimeTypes)]]">
        <paper-dropdown-menu label="Select content type" no-label-float="">
          <paper-listbox class="dropdown-content" attr-for-selected="data-mime" selected="{{contentType}}">
            <template is="dom-repeat" items="[[mimeTypes]]">
              <paper-item data-mime$="[[item]]">[[item]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </template>

      <span class="actions-divider"></span>

      <paper-menu-button horizontal-align="right">
        <paper-icon-button icon="arc:more-vert" class="dropdown-trigger"></paper-icon-button>
        <paper-menu class="dropdown-content">
          <paper-item on-tap="clearForm">Clear form</paper-item>
          <!-- <paper-item on-tap="prePopulate">Pre populate from schema</paper-item> -->
        </paper-menu>
      </paper-menu-button>
    </div>
    <iron-pages selected="{{selected}}" attr-for-selected="data-editor" selected-attribute="opened">
      <div class="cm-tab-editor" data-editor="code-mirror">
        <code-mirror import-location="/bower_components/codemirror/" opened="" mode="[[cmMode]]" value="{{_valueCodeMirror}}" theme="cm-arc"></code-mirror>
      </div>
      <body-json-editor data-editor="json" narrow="[[narrow]]" value="{{_valueJson}}" type="[[selectedType]]"></body-json-editor>
      <body-form-editor data-editor="form" value="{{_valueForm}}" type="[[selectedType]]"></body-form-editor>
      <!-- <body-xml-editor data-editor="xml" value="{{_valueXml}}" type="[[selectedType]]">XML</body-xml-editor> -->
    </iron-pages>
  </template>
  <script>
  Polymer({
    is: 'raml-body-editor-panel',
    /**
     * Fires when the value change.
     *
     * @event body-value-changed
     * @param {String} value Current editor value
     */
    properties: {
      // Selected tab.
      selected: {
        type: String,
        value: 'code-mirror',
        observer: '_selectedChanged'
      },
      // Sets and gets the editor value.
      value: {
        type: String,
        value: '',
        notify: true
      },
      // Code mirror mode. See `<code-mirror>` docs for more information.
      // This is computed from the content type property.
      cmMode: {
        type: String,
        value: 'application/json',
        computed: '_computeCmMode(contentType)'
      },
      /**
       * When set it will attempt to run associated code mirror mode.
       * This element listens for the `content-type-changed` event and when
       * handled it will automatically update content type and `mode`.
       * If this value is set than it will override code-mirror `mode`
       * until this value change.
       *
       * Also, this property notifies parent element about the change. It may be changed by the
       * element when the user start filling the body panel for particular content type and
       * the type is not the once that is set.
       * The use case is when a RAML method has more than one body defined (xml and json for
       * example) and the default is JSON but the user switch to the xml form and start filling it.
       * Then the content type must be changed to `application/xml`. The `content-type-changed`
       * will be fired as well in this case.
       */
      contentType: {
        type: String,
        notify: true
      },
      /**
       * Body definition from the RAML file.
       * It should be array of the body types.
       * It expects to have expanded types (so there's no sub-types). This can be done by using
       * the `<raml-js-parser>` element which expands the types definition.
       *
       * When set then the editor will show only forms for correstponding types that are available
       * for the method.
       */
      body: {
        type: Array,
        observer: '_bodyChanged'
      },
      /**
       * The mime types found in the `body` array.
       */
      mimeTypes: {
        type: Array,
        readOnly: true,
        observer: '_mimeTypesChanged'
      },
      /**
       * RAML's type definition.
       * A JSON editor uses it to create a schema definition (as a JSON object of {name: type}) to
       * display autosuggestions.
       */
      selectedType: {
        type: Object,
        computed: '_computeSelectedType(contentType, body)'
      },
      // Example from selected type to dispaly in the body panel on type change.
      selectedExample: {
        type: String,
        computed: '_computeSelectedExample(selectedType.*)'
      },
      // Internal value of the CodeMirror editor.
      _valueCodeMirror: String,
      // Internal value of the JSON editor.
      _valueJson: String,
      // Internal value of the XML editor.
      _valueForm: String,
      // Internal value of the Form editor.
      _valueXml: String,
      // if set it will display narrow (mobile) layout.
      narrow: {
        type: Boolean,
        value: false
      },
      /**
       * If set then the form editor instead of source editor will be displayed.
       */
      formView: {
        type: Boolean,
        observer: '_formViewChanged'
      }
    },

    observers: [
      '_valueChanged(value)',
      '_editorCodeMirrorChanged(selected, _valueCodeMirror)',
      '_editorJsonChanged(selected, _valueJson)',
      '_editorFormChanged(selected, _valueForm)',
      '_editorXmlChanged(selected, _valueXml)',
      '_upgateBodyFromExample(selectedExample)'
    ],

    attached: function() {
      this.listen(window, 'content-type-changed', '_ctHandler');
    },

    detached: function() {
      this.unlisten(window, 'content-type-changed', '_ctHandler');
    },

    ready: function() {
      this._isReady = true;
    },
    /**
     * Function created for code mirror. Refreshes the editor value when window is resized
     * to update the view.
     * This sgould be called when the element become visible after being hidden.
     */
    notifyResize: function() {
      var cm = this.$$('code-mirror');
      if (!cm) {
        return; //view not ready.
      }
      cm.editor.refresh();
    },

    _selectedChanged: function(newVal, oldVal) {
      if (oldVal === undefined) {
        // initialization
        return;
      }
      if (newVal === 'code-mirror') {
        switch (oldVal) {
          case 'json': this.set('_valueCodeMirror', this._valueJson); break;
          case 'xml': this.set('_valueCodeMirror', this._valueXml); break;
          case 'form': this.set('_valueCodeMirror', this._valueForm); break;
        }
        this.$$('code-mirror').editor.refresh();
      } else {
        switch (newVal) {
          case 'json': this.set('_valueJson', this._valueCodeMirror); break;
          case 'xml': this.set('_valueXml', this._valueCodeMirror); break;
          case 'form': this.set('_valueForm', this._valueCodeMirror); break;
        }
      }
    },

    /**
     * If currently selected editor is CodeMirror then it will update
     * element's value to the same as in the editor.
     */
    _editorCodeMirrorChanged: function(selected, value) {
      if (selected !== 'code-mirror') {
        return;
      }
      this.set('value', value);
    },

    /**
     * If currently selected editor is JSON editor then it will update
     * element's value to the same as in the editor.
     */
    _editorJsonChanged: function(selected, value) {
      if (selected !== 'json') {
        return;
      }
      this.set('value', value);
    },

    /**
     * If currently selected editor is Form data editor then it will update
     * element's value to the same as in the editor.
     */
    _editorFormChanged: function(selected, value) {
      if (selected !== 'form') {
        return;
      }
      this.set('value', value);
    },

    /**
     * If currently selected editor is XML editor then it will update
     * element's value to the same as in the editor.
     */
    _editorXmlChanged: function(selected, value) {
      if (selected !== 'xml') {
        return;
      }
      this.set('value', value);
    },

    // Handler for content type changed event.
    _ctHandler: function(e) {
      this.set('contentType', e.detail.value);
    },
    // Computes to CodeMirror mode based on the content type.
    _computeCmMode: function(contentType) {
      return contentType;
    },
    // Fires the `body-value-changed` event when the value has changed.
    _valueChanged: function(value) {
      this.fire('body-value-changed', {
        value: value
      });
    },
    // Cleaning of the variables when the body change
    _cleanBodySettings: function() {
      this._setMimeTypes(undefined);
    },
    /**
     * Called when `body` array change to set up the `mimeTypes` array.
     */
    _bodyChanged: function(body) {
      this._cleanBodySettings();
      if (!body || !(body instanceof Array)) {
        return;
      }
      var mimes = body.map(function(item) {
        return item.key;
      });
      this._setMimeTypes(mimes);
      if (mimes && mimes.length) {
        this.set('contentType', mimes[0]);
        // this.fire('content-type-changed', {
        //   value: mimes[0]
        // });
      }
    },
    /**
     * A handler for the `mimeTypes` array change.
     * It will select firts available mime as
     */
    _mimeTypesChanged: function(mimes) {
      if (!mimes) {
        return;
      }

      if (mimes[0] !== this.contentType) {
        this.fire('content-type-changed', {
          value: mimes[0]
        });
      }
    },
    // Computes if given argument is an array and has more than one item.
    _computeHasMany: function(arr) {
      return (arr && arr instanceof Array) ? arr.length > 1 : false;
    },

    /**
     * Computes the `selectedType` property that is passed to the editors.
     * Editors uses it to display autocomplete feature.
     */
    _computeSelectedType: function(mimeType, body) {
      if (!mimeType || !body || !body.length) {
        return;
      }
      return this._getBodyForMime(mimeType, body);
    },
    /**
     * Returns a body definition object for given `mime`.
     *
     * @param {String} mime The mime type of the body.
     * @param {Array?} body The list of body definition. If not set then `this.body` will be used
     * @param {Object|undefined} A body definition or undefined if not found.
     */
    _getBodyForMime: function(mime, body) {
      body = body || this.body;
      if (!mime || !body || !body.length) {
        return;
      }
      for (var i = 0, len = body.length; i < len; i++) {
        // the `key` property is set by `raml-to-object` element.
        if (body[i].key === mime) {
          return body[i];
        }
      }
    },
    /**
     * Toggles the editor view between source editor (code mirror) and dedicated
     * form editors for JSON, XML and form data.
     */
    _formViewChanged: function(formView, oldVal) {
      if (oldVal === undefined) {
        return;
      }
      if (formView) {
        var ct = this.contentType;
        var toEditor;
        if (ct) {
          if (ct.indexOf('json') !== -1) {
            toEditor = 'json';
          } else if (ct.indexOf('xml') !== -1) {
            toEditor = 'xml';
          } else if (ct.indexOf('form-urlencoded') !== -1) {
            toEditor = 'form';
          }
        } else {
          toEditor = 'json'; //falback to any...
        }
        this.set('selected', toEditor);
      } else {
        this.set('selected', 'code-mirror');
      }
    },

    clearForm: function() {
      switch (this.selected) {
        case 'code-mirror':
          this.set('_valueCodeMirror', '');
          this.$$('code-mirror').editor.refresh();
        break;
        case 'json': this.set('_valueJson', ''); break;
        case 'xml': this.set('_valueXml', ''); break;
        case 'form': this.set('_valueForm', ''); break;
      }
    },
    // Computes an example for currently selected body
    _computeSelectedExample: function(record) {
      if (!record || !record.base) {
        return;
      }
      var selectedType = record.base;
      if (selectedType.example) {
        return selectedType.example;
      }
      if (selectedType.examples && selectedType.examples.length) {
        return selectedType.examples[0];
      }
    },
    // Called when the example change
    _upgateBodyFromExample: function(newBody) {
      if (!newBody) {
        return;
      }
      switch (this.selected) {
        case 'code-mirror':
          this.set('_valueCodeMirror', newBody);
          this.$$('code-mirror').editor.refresh();
        break;
        case 'json': this.set('_valueJson', newBody); break;
        case 'xml': this.set('_valueXml', newBody); break;
        case 'form': this.set('_valueForm', newBody); break;
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<arc-definitions>` Internal data definitions used in ARC. Contains definitions for status codes and
request and response headers.

The fileds may be empty when not yet initialized.

The `<arc-definitions>` element listens at its nearest shadow root boundary for query events.
Other elements can send the `query-headers` and `query-status-codes` events that will be
handled by this element. Events will be stopped from propagation. Event returned value will
contain the data.

### Example
```
<arc-definitions
  requests="{{requestsDefinitions}}"
  responses="{{responsesDefinitions}}"
  status-codes="{{statusCodesDefinitions}}"></arc-definitions>
```

### Firing events Example
This is a Polymer way but regular JavaScript event will do.
```
let event = this.fire('query-headers', {
  'type': 'request', // or response, mandatory
  'query': 'Acce' // finds all request headers containing `acce` in their name
});
let headers = event.detail.headers;
```

```
let event = this.fire('query-status-codes', {
  'code': 200
});
let statusCode = event.detail.statusCode;
```

@group Logic Elements
@element arc-definitions
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="arc-definitions" assetpath="bower_components/arc-definitions/">
  <template>
    <style>
     :host {
      display: none;
    }
    </style>
    <script id="content" type="application/json">
    {
     "requests":[
      {"key":"Accept","desc":"Content-Types that are acceptable.","example":"Accept: text/plain"},
      {"key":"Accept-Charset","desc":"Character sets that are acceptable","example":"Accept-Charset: utf-8"},
      {"key":"Accept-Encoding","desc":"Acceptable encodings","example":"Accept-Encoding: &lt;compress | gzip | deflate | identity&gt;"},
      {"key":"Accept-Language","desc":"Acceptable languages for response","example":"Accept-Language: en-US"},
      {"key":"Authorization","desc":"Authentication credentials for HTTP authentication","example":"Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=="},
      {"key":"Cache-Control","desc":"Used to specify directives that MUST be obeyed by all caching mechanisms along the request/response chain","example":"Cache-Control: no-cache"},
      {"key":"Connection","desc":"What type of connection the user-agent would prefer","example":"Connection: close"},
      {"key":"Cookie","desc":"an HTTP cookie previously sent by the server with Set-Cookie","example":"Cookie: $Version=1; Skin=new;"},
      {"key":"Content-Length","desc":"The length of the request body in octets (8-bit bytes)","example":"Content-Length: 348"},
      {"key":"Content-Type","desc":"The mime type of the body of the request (used with POST and PUT requests)","example":"Content-Type: application/x-www-form-urlencoded"},
      {"key":"Date","desc":"The date and time that the message was sent","example":"Date: Tue, 15 Nov 1994 08:12:31 GMT"},
      {"key":"Expect","desc":"Indicates that particular server behaviors are required by the client","example":"Expect: 100-continue"},
      {"key":"From","desc":"The email address of the user making the request","example":"From: user@example.com"},
      {"key":"Host","desc":"The domain name of the server (for virtual hosting), mandatory since HTTP/1.1","example":"Host: en.wikipedia.org"},
      {"key":"If-Match","desc":"Only perform the action if the client supplied entity matches the same entity on the server. This is mainly for methods like PUT to only update a resource if it has not been modified since the user last updated it.","example":"If-Match: \"737060cd8c284d8af7ad3082f209582d\""},
      {"key":"If-Modified-Since","desc":"Allows a 304 Not Modified to be returned if content is unchanged","example":"If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT"},
      {"key":"If-None-Match","desc":"Allows a 304 Not Modified to be returned if content is unchanged, see HTTP ETag","example":"If-None-Match: \"737060cd8c284d8af7ad3082f209582d\""},
      {"key":"If-Range","desc":"If the entity is unchanged, send me the part(s) that I am missing; otherwise, send me the entire new entity","example":"If-Range: \"737060cd8c284d8af7ad3082f209582d\""},
      {"key":"If-Unmodified-Since","desc":"Only send the response if the entity has not been modified since a specific time.","example":"If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT"},
      {"key":"Max-Forwards","desc":"Limit the number of times the message can be forwarded through proxies or gateways.","example":"Max-Forwards: 10"},
      {"key":"Pragma","desc":"Implementation-specific headers that may have various effects anywhere along the request-response chain","example":"Pragma: no-cache"},
      {"key":"Proxy-Authorization","desc":"Authorization credentials for connecting to a proxy.","example":"Proxy-Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=="},
      {"key":"Range","desc":"Request only part of an entity. Bytes are numbered from 0.","example":"Range: bytes=500-999"},
      {"key":"Referer","desc":"This is the address of the previous web page from which a link to the currently requested page was followed.","example":"Referer: http://en.wikipedia.org/wiki/Main_Page"},
      {"key":"TE","desc":"The transfer encodings the user agent is willing to accept: the same values as for the response header Transfer-Encoding can be used, plus the \"trailers\" value (related to the \"chunked\" transfer method) to notify the server it accepts to receive additional headers (the trailers) after the last, zero-sized, chunk.","example":"TE: trailers, deflate"},
      {"key":"Upgrade","desc":"Ask the server to upgrade to another protocol","example":"Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11"},
      {"key":"User-Agent","desc":"The user agent string of the user agent","example":"User-Agent: Mozilla/5.0 (Linux; X11)"},
      {"key":"Via","desc":"Informs the server of proxies through which the request was sent.","example":"Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1)"},
      {"key":"Warning","desc":"A general warning about possible problems with the entity body.","example":"Warning: 199 Miscellaneous warning"}
     ],
     "responses": [
      {"key":"Accept-Ranges","desc":"What partial content range types this server supports","example":"Accept-Ranges: bytes"},
      {"key":"Age","desc":"The age the object has been in a proxy cache in seconds","example":"Age: 12"},
      {"key":"Allow","desc":"Valid actions for a specified resource. To be used for a 405 Method not allowed","example":"Allow: GET, HEAD"},
      {"key":"Cache-Control","desc":"Tells all caching mechanisms from server to client whether they may cache this object","example":"Cache-Control: max-age"},
      {"key":"Content-Encoding","desc":"The type of encoding used on the data","example":"Content-Encoding: gzip"},
      {"key":"Content-Language","desc":"The language the content is in","example":"Content-Language: da"},
      {"key":"Content-Length","desc":"The length of the response body in octets (8-bit bytes)","example":"Content-Length: 348"},
      {"key":"Content-Location","desc":"An alternate location for the returned data","example":"Content-Location: /index.htm"},
      {"key":"Content-Disposition","desc":"An opportunity to raise a \"File Download\" dialogue box for a known MIME type","example":"Content-Disposition: attachment; filename=fname.ext"},
      {"key":"Content-MD5","desc":"A Base64-encoded binary MD5 sum of the content of the response","example":"Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ=="},
      {"key":"Content-Range","desc":"Where in a full body message this partial message belongs","example":"Content-Range: bytes 21010-47021/47022"},
      {"key":"Content-Type","desc":"The mime type of this content","example":"Content-Type: text/html; charset=utf-8"},
      {"key":"Date","desc":"The date and time that the message was sent","example":"Date: Tue, 15 Nov 1994 08:12:31 GMT"},
      {"key":"ETag","desc":"An identifier for a specific version of a resource, often a Message Digest, see ETag","example":"ETag: \"737060cd8c284d8af7ad3082f209582d\""},
      {"key":"Expires","desc":"Gives the date/time after which the response is considered stale","example":"Expires: Thu, 01 Dec 1994 16:00:00 GMT"},
      {"key":"Last-Modified","desc":"The last modified date for the requested object, in RFC 2822 format","example":"Last-Modified: Tue, 15 Nov 1994 12:45:26 GMT"},
      {"key":"Link","desc":"Used to express a typed relationship with another resource, where the relation type is defined by RFC 5988","example":"Link: &lt;/feed&gt;; rel=\"alternate\""},
      {"key":"Location","desc":"Used in redirection, or when a new resource has been created.","example":"Location: http://www.w3.org/pub/WWW/People.html"},
      {"key":"P3P","desc":"This header is supposed to set P3P policy, in the form of P3P:CP=\"your_compact_policy\". However, P3P did not take off[2], most browsers have never fully implemented it, a lot of websites set this header with fake policy text, that was enough to fool browsers the existence of P3P policy and grant permissions for third party cookies.","example":"P3P: CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\""},
      {"key":"Pragma","desc":"Implementation-specific headers that may have various effects anywhere along the request-response chain.","example":"Pragma: no-cache"},
      {"key":"Proxy-Authenticate","desc":"Request authentication to access the proxy.","example":"Proxy-Authenticate: Basic"},
      {"key":"Refresh","desc":"Used in redirection, or when a new resource has been created. This refresh redirects after 5 seconds.(This is a proprietary/non-standard header extension introduced by Netscape and supported by most web browsers.)","example":"Refresh: 5; url=http://www.w3.org/pub/WWW/People.html"},
      {"key":"Retry-After","desc":"If an entity is temporarily unavailable, this instructs the client to try again after a specified period of time.","example":"Retry-After: 120"},
      {"key":"Server","desc":"A name for the server","example":"Server: Apache/1.3.27 (Unix) (Red-Hat/Linux)"},
      {"key":"Set-Cookie","desc":"an HTTP cookie","example":"Set-Cookie: UserID=JohnDoe; Max-Age=3600; Version=1"},
      {"key":"Trailer","desc":"The Trailer general field value indicates that the given set of header fields is present in the trailer of a message encoded with chunked transfer-coding.","example":"Trailer: Max-Forwards"},
      {"key":"Transfer-Encoding","desc":"The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity.","example":"Transfer-Encoding: chunked"},
      {"key":"Vary","desc":"Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server.","example":"Vary: *"},
      {"key":"Via","desc":"Informs the client of proxies through which the response was sent.","example":"Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1)"},
      {"key":"Warning","desc":"A general warning about possible problems with the entity body.","example":"Warning: 199 Miscellaneous warning"},
      {"key":"WWW-Authenticate","desc":"Indicates the authentication scheme that should be used to access the requested entity.","example":"WWW-Authenticate: Basic"}
     ],
     "codes":[
      {"key":100, "label":"Continue","desc":"This means that the server has received the request headers, and that the client should proceed to send the request body (in the case of a request for which a body needs to be sent; for example, a POST request). If the request body is large, sending it to a server when a request has already been rejected based upon inappropriate headers is inefficient. To have a server check if the request could be accepted based on the request's headers alone, a client must send Expect: 100-continue as a header in its initial request and check if a 100 Continue status code is received in response before continuing (or receive 417 Expectation Failed and not continue)."},
      {"key":101, "label":"Switching Protocols","desc":"This means the requester has asked the server to switch protocols and the server is acknowledging that it will do so"},
      {"key":102, "label":"Processing","desc":"As a WebDAV request may contain many sub-requests involving file operations, it may take a long time to complete the request. This code indicates that the server has received and is processing the request, but no response is available yet. This prevents the client from timing out and assuming the request was lost."},
      {"key":200, "label":"OK","desc":"Standard response for successful HTTP requests. The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource. In a POST request the response will contain an entity describing or containing the result of the action."},
      {"key":201, "label":"Created","desc":"The request has been fulfilled and resulted in a new resource being created."},
      {"key":202, "label":"Accepted","desc":"The request has been accepted for processing, but the processing has not been completed. The request might or might not eventually be acted upon, as it might be disallowed when processing actually takes place."},
      {"key":203, "label":"Non-Authoritative Information (since HTTP/1.1)","desc":"The server successfully processed the request, but is returning information that may be from another source."},
      {"key":204, "label":"No Content","desc":"The server successfully processed the request, but is not returning any content."},
      {"key":205, "label":"Reset Content","desc":"The server successfully processed the request, but is not returning any content. Unlike a 204 response, this response requires that the requester reset the document view."},
      {"key":206, "label":"Partial Content","desc":"The server is delivering only part of the resource due to a range header sent by the client. The range header is used by tools like wget to enable resuming of interrupted downloads, or split a download into multiple simultaneous streams."},
      {"key":207, "label":"Multi-Status (WebDAV) (RFC 4918)","desc":"The message body that follows is an XML message and can contain a number of separate response codes, depending on how many sub-requests were made."},
      {"key":300, "label":"Multiple Choices","desc":"Indicates multiple options for the resource that the client may follow. It, for instance, could be used to present different format options for video, list files with different extensions, or word sense disambiguation."},
      {"key":301, "label":"Moved Permanently","desc":"This and all future requests should be directed to the given URI."},
      {"key":302, "label":"Found","desc":"This is an example of industrial practice contradicting the standard. HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302 with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307 to distinguish between the two behaviours. However, the majority of Web applications and frameworks still use the 302 status code as if it were the 303."},
      {"key":303, "label":"See Other (since HTTP/1.1)","desc":"The response to the request can be found under another URI using a GET method. When received in response to a PUT, it should be assumed that the server has received the data and the redirect should be issued with a separate GET message."},
      {"key":304, "label":"Not Modified","desc":"Indicates the resource has not been modified since last requested. Typically, the HTTP client provides a header like the If-Modified-Since header to provide a time against which to compare. Using this saves bandwidth and reprocessing on both the server and client, as only the header data must be sent and received in comparison to the entirety of the page being re-processed by the server, then sent again using more bandwidth of the server and client."},
      {"key":305, "label":"Use Proxy (since HTTP/1.1)","desc":"Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons."},
      {"key":306, "label":"Switch Proxy","desc":"No longer used."},
      {"key":307, "label":"Temporary Redirect (since HTTP/1.1)","desc":"In this occasion, the request should be repeated with another URI, but future requests can still use the original URI. In contrast to 303, the request method should not be changed when reissuing the original request. For instance, a POST request must be repeated using another POST request."},
      {"key":400, "label":"Bad Request","desc":"The request cannot be fulfilled due to bad syntax."},
      {"key":401, "label":"Unauthorized","desc":"Similar to 403 Forbidden, but specifically for use when authentication is possible but has failed or not yet been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the requested resource. See Basic access authentication and Digest access authentication."},
      {"key":402, "label":"Payment Required","desc":"Reserved for future use. The original intention was that this code might be used as part of some form of digital cash or micropayment scheme, but that has not happened, and this code is not usually used. As an example of its use, however, Apple's MobileMe service generates a 402 error (\"httpStatusCode:402\" in the Mac OS X Console log) if the MobileMe account is delinquent."},
      {"key":403, "label":"Forbidden","desc":"The request was a legal request, but the server is refusing to respond to it. Unlike a 401 Unauthorized response, authenticating will make no difference."},
      {"key":404, "label":"Not Found","desc":"The requested resource could not be found but may be available again in the future. Subsequent requests by the client are permissible."},
      {"key":405, "label":"Method Not Allowed","desc":"A request was made of a resource using a request method not supported by that resource; for example, using GET on a form which requires data to be presented via POST, or using PUT on a read-only resource."},
      {"key":406, "label":"Not Acceptable","desc":"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request."},
      {"key":407, "label":"Proxy Authentication Required","desc":"This code is similar to 401 (Unauthorized), but indicates that the client must first authenticate itself with the proxy."},
      {"key":408, "label":"Request Timeout","desc":"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time."},
      {"key":409, "label":"Conflict","desc":"Indicates that the request could not be processed because of conflict in the request, such as an edit conflict."},
      {"key":410, "label":"Gone","desc":"Indicates that the resource requested is no longer available and will not be available again.[2] This should be used when a resource has been intentionally removed and the resource should be purged. Upon receiving a 410 status code, the client should not request the resource again in the future."},
      {"key":411, "label":"Length Required","desc":"The request did not specify the length of its content, which is required by the requested resource."},
      {"key":412, "label":"Precondition Failed","desc":"The server does not meet one of the preconditions that the requester put on the request."},
      {"key":413, "label":"Request Entity Too Large","desc":"The request is larger than the server is willing or able to process."},
      {"key":414, "label":"Request-URI Too Long","desc":"The URI provided was too long for the server to process."},
      {"key":415, "label":"Unsupported Media Type","desc":"The request entity has a media type which the server or resource does not support.[2] For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format."},
      {"key":416, "label":"Requested Range Not Satisfiable","desc":"The client has asked for a portion of the file, but the server cannot supply that portion. For example, if the client asked for a part of the file that lies beyond the end of the file."},
      {"key":417, "label":"Expectation Failed","desc":"The server cannot meet the requirements of the Expect request-header field."},
      {"key":418, "label":"I'm a teapot","desc":"This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol, and is not expected to be implemented by actual HTTP servers."},
      {"key":422, "label":"Unprocessable Entity (WebDAV) (RFC 4918)","desc":"The request was well-formed but was unable to be followed due to semantic errors."},
      {"key":423, "label":"Locked (WebDAV) (RFC 4918)","desc":"The resource that is being accessed is locked."},
      {"key":424, "label":"Failed Dependency (WebDAV) (RFC 4918)","desc":"The request failed due to failure of a previous request (e.g. a PROPPATCH)."},
      {"key":425, "label":"Unordered Collection (RFC 3648)","desc":"Defined in drafts of \"WebDAV Advanced Collections Protocol\", but not present in \"Web Distributed Authoring and Versioning (WebDAV) Ordered Collections Protocol\""},
      {"key":426, "label":"Upgrade Required (RFC 2817)","desc":"The client should switch to a different protocol such as TLS/1.0."},
      {"key":444, "label":"No Response","desc":"An Nginx HTTP server extension. The server returns no information to the client and closes the connection (useful as a deterrent for malware)."},
      {"key":449, "label":"Retry With","desc":"A Microsoft extension. The request should be retried after performing the appropriate action."},
      {"key":450, "label":"Blocked by Windows Parental Controls","desc":"A Microsoft extension. This error is given when Windows Parental Controls are turned on and are blocking access to the given webpage."},
      {"key":499, "label":"Client Closed Request","desc":"An Nginx HTTP server extension. This code is introduced to log the case when the connection is closed by client while HTTP server is processing its request, making server unable to send the HTTP header back."},
      {"key":500, "label":"Internal Server Error","desc":"A generic error message, given when no more specific message is suitable."},
      {"key":501, "label":"Not Implemented","desc":"The server either does not recognise the request method, or it lacks the ability to fulfill the request."},
      {"key":502, "label":"Bad Gateway","desc":"The server was acting as a gateway or proxy and received an invalid response from the upstream server."},
      {"key":503, "label":"Service Unavailable","desc":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state."},
      {"key":504, "label":"Gateway Timeout","desc":"The server was acting as a gateway or proxy and did not receive a timely response from the upstream server."},
      {"key":505, "label":"HTTP Version Not Supported","desc":"The server does not support the HTTP protocol version used in the request"},
      {"key":506, "label":"Variant Also Negotiates","desc":"Transparent content negotiation for the request results in a circular reference."},
      {"key":507, "label":"Insufficient Storage (WebDAV) (RFC 4918)","desc":"The 507 status code means the method could not be performed on the resource because the server is unable to store the representation needed to successfully complete the request."},
      {"key":509, "label":"Bandwidth Limit Exceeded (Apache bw/limited extension)","desc":"This status code, while used by many servers, is not specified in any RFCs."},
      {"key":510, "label":"Not Extended (RFC 2774)","desc":"Further extensions to the request are required for the server to fulfill it."}
     ]
    }
    </script>
  </template>
  <script>
    Polymer({
      is: 'arc-definitions',
      properties: {
        /**
         * A list of request headers.
         *
         * Each object contains a `key`, `desc` and `example` property. `key` is a header name,
         * `desc` is a description of the header and `example` is an example of usage.
         *
         * ### Example
         * ```
         * [{
         *  "key": "Accept",
         *  "desc": "Content-Types that are acceptable.",
         *  "example": "Accept: text/plain"
         * }],
         * ```
         */
        requestHeaders: {
          type: Array,
          notify: true,
          readOnly: true,
          value: function() {
            return [];
          }
        },
        /**
         * A list of response headers.
         *
         * Each object contains a `key`, `desc` and `example` property. `key` is a header name,
         * `desc` is a description of the header and `example` is an example of usage.
         *
         * ### Example
         * ```
         * [{
         *  "key": "Age",
         *  "desc": "The age the object has been in a proxy cache in seconds",
         *  "example": "Age: 12"
         * }],
         * ```
         */
        responseHeaders: {
          type: Array,
          notify: true,
          readOnly: true,
          value: function() {
            return [];
          }
        },
        /**
         * A list of status codes definitions.
         *
         * Each object contains a `key`, `label` and `desc` property. `key` is a status code (as
         * a number), `label` is a status code message and `desc` is description for the status
         * code.
         *
         * ### Example
         * ```
         * [{
         *  "key": 306,
         *  "label": "Switch Proxy",
         *  "desc": "No longer used."
         * }]
         */
        statusCodes: {
          type: Array,
          notify: true,
          readOnly: true,
          value: function() {
            return [];
          }
        }
      },

      ready: function() {
        var defs = JSON.parse(this.$.content.textContent);
        this._setRequestHeaders(defs.requests);
        this._setResponseHeaders(defs.responses);
        this._setStatusCodes(defs.codes);
      },

      attached: function() {
        this._eventTarget = Polymer.dom(this).host || window;
        this.listen(this._eventTarget, 'query-headers', '_queryHeadersHandler');
        this.listen(this._eventTarget, 'query-status-codes', '_queryCodesHandler');
      },

      detached: function() {
        this.unlisten(this._eventTarget, 'query-headers', '_queryHeadersHandler');
        this.unlisten(this._eventTarget, 'query-status-codes', '_queryCodesHandler');
      },
      /**
       * Query for request headers containin a `query`.
       *
       * @param {String} name A header name to look for. It will match a header where the header
       * name contains the `name` param.
       * @return {Array<Object>} Array of the request headers matched `name` in the `key` field.
       */
      queryRequestHeaders: function(name) {
        return this.queryHeaders(name, 'request');
      },

      /**
       * Query for response headers containin a `query`.
       *
       * @param {String} name A header name to look for. It will match a header where the header
       * name contains the `name` param.
       * @return {Array<Object>} Array of the response headers matched `name` in the `key` field.
       */
      queryResponseHeaders: function(name) {
        return this.queryHeaders(name);
      },

      /**
       * Query for headers containin a `query`.
       *
       * @param {String} query A query to search for in the `key` field of the headers array.
       * @param {String} type If this equals `request` then it will look in the request headers
       *                       array. In the response headers list otherwise.
       * @return {Array<Object>} Array of the headers of selected `type` matched a `query` in a
       * `key` field.
       */
      queryHeaders: function(query, type) {
        var headers = type === 'request' ? this.requestHeaders : this.responseHeaders;
        if (!query || !headers || !headers.length) {
          return [];
        }
        query = query.trim().toLowerCase();
        if (!query) {
          return [];
        }
        return headers.filter(function(item) {
          return item.key.toLowerCase().indexOf(query) !== -1;
        });
      },

      /**
       * Convinient function to look for a status code in the array.
       *
       * @param {Number} code The status code to look for.
       * @return {Object|null} Status code definition or null if not found.
       */
      getStatusCode: function(code) {
        var codes = this.statusCodes;
        if (!code || !codes || !codes.length) {
          return null;
        }
        code = Number(code);
        if (code !== code) {
          console.warn('Passed code is not a number.');
          return null;
        }
        var res = codes.filter(function(item) {
          return item.key === code;
        });
        if (!res.length) {
          return null;
        }
        return res[0];
      },

      _queryHeadersHandler: function(event) {
        // Always stop the event from being propagated.
        event.stopImmediatePropagation();
        var type = event.detail.type;
        if (!type) {
          event.detail.headers = [];
          return;
        }
        event.detail.headers = this.queryHeaders(event.detail.query, type);
      },

      _queryCodesHandler: function(event) {
        // Always stop the event from being propagated.
        event.stopImmediatePropagation();
        event.detail.statusCode = this.getStatusCode(event.detail.code);
      }
    });
  </script>
</dom-module>
<!--
A headers form to be used to rended a form of pre-defined headers with documentation comming
from the RAML definition.

### Example
```
<raml-headers-form></raml-headers-form>
```
```
var form = document.querySelector('raml-headers-form');
form.ramlHeaders = []; // Put headers property from the RAML JS parser.
form.addEventListener('value-changed', function(e) {
  var value = e.detail.value;
});
```
Note: this element mean to use `raml-js-parser` elements. This element transforms parser output
to the one recognizable by this element.

### Styling
`<raml-headers-form>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-headers-form` | Mixin applied to the element | `{}`
`--raml-headers-form-input-label-color` | Color of the lable of the `paper-input` element. | `rgba(0, 0, 0, 0.48)`
`--raml-headers-form-input-label-color-required` | Color of the lable of the `paper-input` element when it's required. | `rgba(0, 0, 0, 0.72)`
`--raml-headers-form-prodefined-name-color` | Color of the prodefined header name | `rgba(0, 0, 0, 0.87)`
`--raml-headers-form-docs-color` | Color of the description below the input field | `rgba(0, 0, 0, 0.87)`
`--primary-color` | Color of the button to add new header | `--primary-color`
`--inline-help-icon-color` | Color of the icon button to display help | `rgba(0, 0, 0, 0.24)`
`--inline-help-icon-color-hover` | Color of the icon button to display help when hovered | `--accent-color` or `rgba(0, 0, 0, 0.74)`
`--inline-documentation-color` | Color of the documentation string below the input field. Note that it will appy also `marked-element` styles to this element | `rgba(0, 0, 0, 0.87)`
`--raml-headers-form-action-button-color` | Color of the action button. | `--secondary-button-color` or `--accent-color`
`--raml-headers-form-action-button-background` | Background of the acction button | `--secondary-button-background` or `#fff`
`--secondary-button` | Theme mixin applied to the secondary button | `{}`
`--raml-headers-form-action-button-hover` | Mixin applied to the secondary button when hovered | `{}`
`--raml-headers-form-action-button-color-hover` | Color of the action button when hovered | `--secondary-button-color` or `--accent-color`
`--raml-headers-form-action-button-background-hover` | Background of the acction button when hovered | `--secondary-button-background` or `#fff`
`--secondary-button-hover` | Theme mixin applied to the secondary button when hovered | `{}`
`--raml-headers-form-action-button-hover` | Mixin applied to the secondary button when hovered | `{}`

@group RAML Elements
@element raml-headers-form
@demo demo/index.html
-->
<dom-module id="raml-headers-form" assetpath="bower_components/raml-headers-form/">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      @apply(--raml-headers-form);
      --paper-input-container-label: {
        color: var(--raml-headers-form-input-label-color, var(--raml-request-parameters-editor-input-label-color, rgba(0, 0, 0, 0.48)));
      }
    }

    .required paper-input {
      --paper-input-container-label: {
        color: var(--raml-headers-form-input-label-color-required, var(--raml-request-parameters-editor-required-input-label-color, rgba(0, 0, 0, 0.72)));
      }
    }

    .header-value {
      @apply(--raml-request-parameters-editor-row);
      @apply(--raml-headers-form);
      position: relative;
    }

    .header-value .input {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
    }

    .docs {
      @apply(--arc-font-common-base);
      font-size: 13px !important;
      font-weight: 200;
      line-height: 24px;
      color: var(--inline-documentation-color, rgba(0, 0, 0, 0.87));
    }

    .markdown-html * {
      font-size: 13px !important;
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .help-icon {
      color: var(--inline-help-icon-color, rgba(0, 0, 0, 0.24));
      transition: color 0.2s linear;
    }

    .help-icon:hover {
      color: var(--inline-help-icon-color-hover, var(--accent-color, rgba(0, 0, 0, 0.74)));
    }

    .value-input {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--layout-flex);
    }

    .value-input paper-dropdown-menu,
    .value-input paper-input {
      @apply(--layout-flex);
    }

    .header-name {
      margin-right: 8px;
    }

    .action-button {
      color: var(--raml-headers-form-action-button-color, var(--secondary-button-color, --accent-color));
      background: var(--raml-headers-form-action-button-background, var(--secondary-button-background, #fff));
      @apply(--secondary-button);
      @apply(--raml-headers-form-action-button);
    }

    .action-button:hover {
      color: var(--raml-headers-form-action-button-color-hover, var(--secondary-button-color, --accent-color));
      background: var(--raml-headers-form-action-button-background-hover, var(--secondary-button-background, #fff));
      @apply(--secondary-button-hover);
      @apply(--raml-headers-form-action-button-hover);
    }
    </style>

    <form is="iron-form" id="form">
      <template is="dom-repeat" items="{{renderedRamlHeaders}}" id="headersList">
        <div class$="[[_computeRowClass(item)]]">
          <div class="value-input">
            <template is="dom-if" if="[[item.isEnum]]">
              <paper-dropdown-menu label="[[item.inputLabel]]" name="[[item.name]]" required$="[[item.required]]" id="rrpv-[[index]]">
                <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{item.value}}">
                  <template is="dom-repeat" items="[[item.enum]]">
                    <paper-item data-value="[[item]]">[[item]]</paper-item>
                  </template>
                  <paper-item label=" ">(empty value)</paper-item>
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!item.hasDescription]]" on-tap="_openDocs"></paper-icon-button>
            </template>
            <template is="dom-if" if="[[!item.isEnum]]">
              <div class="input">
                <template is="dom-if" if="[[item.customHeader]]">
                  <!-- custom header name -->
                  <paper-input-container class="header-name" auto-validate="">
                    <label>Header name</label>
                    <input is="iron-input" class="name-change-input" on-focus="_headerNameFocus" type="text" value="{{item.name::input}}" required="" pattern="\S*" on-change="_headerNameChanged">
                    <paper-input-error>Header name is not valid</paper-input-error>
                  </paper-input-container>
                </template>
                <paper-input label="[[item.inputLabel]]" id="rrpv-[[index]]" value="{{item.value}}" required$="[[item.required]]" pattern="[[item.pattern]]" name="[[item.name]]" auto-validate="" type="[[item.inputType]]" min="[[item.minimum]]" max="[[item.maximum]]" maxlength="[[item.maxLength]]" always-float-label="[[item.inputFloatLabel]]" placeholder="[[item.inputPlaceholder]]">
                </paper-input>
              </div>
              <paper-icon-button title="Remove header" class="delete-icon" suffix="" icon="arc:close" hidden$="[[!item.customHeader]]" on-tap="_removeHeader"></paper-icon-button>
              <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!item.hasDescription]]" on-tap="_openDocs"></paper-icon-button>
            </template>
          </div>
          <template is="dom-if" if="[[item.hasDescription]]">
            <div class="docs">
              <iron-collapse>
                <marked-element markdown="[[item.description]]">
                  <div class="markdown-html markdown-body"></div>
                </marked-element>
              </iron-collapse>
            </div>
          </template>
          <paper-autocomplete open-on-focus="" on-query="_queryHeaderName" on-selected="_onHeaderNameSelected"></paper-autocomplete>
        </div>
      </template>
    </form>
    <div class="add-action">
      <paper-button class="action-button" on-tap="add" hidden$="[[disallowCustom]]">Add custom header</paper-button>
    </div>
    <arc-definitions></arc-definitions>
  </template>
  <script>
  Polymer({
    is: 'raml-headers-form',

    behaviors: [ArcBehaviors.HeadersParserBehavior],

    /**
     * Fired when the headers value changed.
     *
     * @event headers-value-changed
     * @param {String} value The headers value.
     */

    properties: {
      // Headers description defined in the RAML file.
      ramlHeaders: Array,
      // It's a copy of the `ramlHeaders` array that can be manipulated by the user.
      renderedRamlHeaders: {
        type: Array,
        value: function() {
          return [];
        },
        computed: '_computeRenderedRamlHeaders(ramlHeaders.*)'
      },
      /**
       * It is currently focused input field for header name.
       * This field will receive autocomplete support.
       * @type {HTMLElement}
       */
      activeHeaderNameField: {
        type: HTMLElement,
        readOnly: true
      },
      /**
       * Active autocomplete element.
       *
       * @type {HTMLElement}
       */
      activeAutocompleteNameField: {
        type: HTMLElement,
        readOnly: true
      },
      // Current value of the headers. Changing the value will update the list of the headers.
      value: {
        type: String,
        value: '',
        notify: true
      },
      // A node on which this element add it's listeners.
      _eventTarget: HTMLElement,
      /**
       * If set, custom headers won't be available.
       */
      disallowCustom: Boolean
    },

    observers: [
      '_renderedRamlHeaders(renderedRamlHeaders.*)',
      '_valueChanged(value)'
    ],

    attached: function() {
      this._eventTarget = Polymer.dom(this).host || document;
      this.listen(this._eventTarget, 'headers-value-changed', '_extValueChangedHandler');
    },

    detached: function() {
      if (!this._eventTarget) {
        return;
      }
      this.unlisten(this._eventTarget, 'headers-value-changed', '_extValueChangedHandler');
    },

    _computeRenderedRamlHeaders: function(record) {
      var h = record && record.base;
      if (!h || !h.length) {
        return [];
      }
      return this._transformHeaders(h);
    },

    _transformHeaders: function(headers) {
      return headers.map(function(item) {
        item = Object.assign({}, item);
        return this._createFormModel(item);
      }, this);
    },

    _createFormModel: function(item) {
      item.isEnum = !!(item.enum && item.enum.length);
      item.hasDescription = !!item.description;
      item.inputLabel = item.displayName || item.name || 'Header value';
      if (item.required) {
        item.inputLabel += '*';
      }
      if (['number', 'integer', 'float'].indexOf(item.type) !== -1) {
        item.inputType = 'number';
      } else {
        item.inputType = 'text';
      }
      if (item.examples && item.examples.length && item.examples[0]) {
        item.inputPlaceholder = 'Example: ' + item.examples[0];
      } else if (item.example && typeof item.example === 'string') {
        item.inputPlaceholder = 'Example: ' + item.example;
      }
      if (item.inputPlaceholder) {
        item.inputFloatLabel = true;
      }

      if (item.required && typeof item.default !== 'undefined' && !item.value) {
        item.value = item.default;
      }
      if (typeof item.value === 'undefined' && item.required) {
        if (item.examples) {
          item.value = item.examples[0];
        } else if (item.example) {
          item.value = item.example;
        }
        if (item.value && item.value.indexOf && item.value.indexOf(item.name + ':') === 0) {
          item.value = item.value.substr(item.name.length + 1);
        }
        if (typeof item.value === 'undefined' && item.isEnum) {
          item.value = item.enum[0];
        }
      }
      return item;
    },

    // Handler for the remove button click.
    _removeHeader: function(e) {
      if (!e.model) {
        return;
      }
      var i = e.model.get('index');
      if (i < 0) {
        return;
      }
      this.splice('renderedRamlHeaders', i, 1);
    },
    // Appends an empty header to the list.
    add: function() {
      if (this.disallowCustom) {
        return;
      }
      var obj = {
        type: 'string',
        value: '',
        name: '',
        customHeader: true
      };
      obj = this._createFormModel(obj);
      if (!this.renderedRamlHeaders) {
        this.set('renderedRamlHeaders', [obj]);
      } else {
        this.push('renderedRamlHeaders', obj);
      }
    },

    // Handler for header name field focus
    _headerNameFocus: function(e) {
      var i = this.$.headersList.indexForElement(e.target);
      if (i === undefined || i < 0) {
        return;
      }
      var elm = Polymer.dom(this.root)
        .querySelector('.header-value:nth-child(' + (i + 1) + ') paper-autocomplete');
      if (!elm) {
        console.warn('Autocomplete element not found.');
        return;
      }
      elm.target = e.target;
      this._setActiveHeaderNameField(e.target);
      this._setActiveAutocompleteNameField(elm);
    },

    /**
     * A handler called when the user selects a suggestion.
     * @param {[type]} e [description]
     * @return {[type]}
     */
    _onHeaderNameSelected: function(e) {
      var index = e.model.get('index');
      // var index = this.$.headersList.indexForElement(this.activeHeaderNameField);
      if (index || index === 0) {
        this.set(['renderedRamlHeaders', index, 'name'], e.detail.value);
        var elm = Polymer.dom(this.root)
          .querySelector('.header-value:nth-child(' + (index + 1) + ') .name-change-input');
        if (elm) {
          elm.fire('bind-value-changed');
        }
        if (!this._queryHeaderInfo(e.detail.value)) {
          this._updateCustomHeaderMeta(index);
        }
      }
    },

    /**
     * A handler for the name change.
     * It updates the description and example of the header is the header is known.
     */
    _headerNameChanged: function(e) {
      if (!e.model) {
        return;
      }
      var item = e.model.get('item');
      var index = this.$.headersList.indexForElement(e.target);
      if (!index) {
        return;
      }
      if (item.name) {
        if (this._queryHeaderInfo(item.name)) {
          return;
        }
      }
      this._updateCustomHeaderMeta(index);
    },

    /**
     * Queries for header description and examples.
     * If details for the header name are available then it will set the
     * corresponding item's example and description properties.
     *
     * @param {String} name Header name.
     * @return {Boolean} True if the example and description has been updated.
     */
    _queryHeaderInfo: function(name) {
      var info = this._queryHeaderNameSuggestions(name);
      var helpItem;
      var i;
      var len;
      if (info && info.length) {
        for (i = 0, len = info.length; i < len; i++) {
          if (info[i].key === name) {
            helpItem = info[i];
            break;
          }
        }
      }
      if (!helpItem) {
        return false;
      }
      // search for the source input.
      var headers = this.renderedRamlHeaders;
      var index;
      for (i = 0, len = headers.length; i < len; i++) {
        if (headers[i].name === name) {
          index = i;
          break;
        }
      }
      if (index === undefined) {
        return false;
      }
      this._updateCustomHeaderMeta(index, helpItem.desc, helpItem.example);
      return true;
    },

    _updateCustomHeaderMeta: function(index, desc, example) {
      desc = desc || '';
      example = example || '';
      this.set(['renderedRamlHeaders', index, 'description'], desc);
      this.set(['renderedRamlHeaders', index, 'hasDescription'], desc ? true : false);
      this.set(['renderedRamlHeaders', index, 'examples'], [example]);
    },

    /**
     * Handler for autosuggestion element.
     * It takes value from currently focused header name element (input) and query the datastore
     * for suggestions.
     *
     * @param {Event} e Autocomplete event
     */
    _queryHeaderName: function(e) {
      if (!this.activeAutocompleteNameField) {
        return;
      }
      var value = e.detail.value;
      if (!value) {
        var defs = this.$$('arc-definitions');
        if (defs && defs.requestHeaders) {
          this.activeAutocompleteNameField.source = defs.requestHeaders.map(function(item) {
            return item.key;
          });
        } else {
          this.activeAutocompleteNameField.source = [];
        }
        return;
      }
      var suggestions = this._queryHeaderNameSuggestions(value);
      if (!suggestions || !suggestions.length) {
        this.activeAutocompleteNameField.source = [];
        return;
      }
      this.activeAutocompleteNameField.source = suggestions.map(function(item) {
        return {
          value: item.key,
          display: item.key
        };
      });
    },

    _queryHeaderNameSuggestions: function(q) {
      var event = this.fire('query-headers', {
        'type': 'request',
        'query': q
      });
      return event.detail.headers;
    },

    _renderedRamlHeaders: function(record) {
      if (this._internalValueChange) {
        return;
      }
      if (record.path === 'renderedRamlHeaders') {
        // whole object has changed
        this._updateValue();
      } else if (record.path.match(/renderedRamlHeaders.#\d+.(name|value)/)) {
        this._updateValue();
      } else if (record.path === 'renderedRamlHeaders.splices') {
        this._updateValue();
      }
    },

    _updateValue: function() {
      var h = this.renderedRamlHeaders;
      if (!h || !h.length) {
        this.value = '';
        return;
      }
      var value = h.map(function(item) {
        var n = item.name || '';
        var v = item.value || '';
        if (!n && !v) {
          return;
        }
        return n + ': ' + v;
      }).filter(function(item) {
        return !!item;
      }).join('\n');
      this._internalValueChange = true;
      this.set('value', value);
      this._internalValueChange = false;
    },

    _valueChanged: function(value) {
      if (this._internalValueChange) {
        this.fire('headers-value-changed', {
          value: value
        });
        return;
      }

      var headers = this.headersToJSON(value);
      if (!headers || !headers.length) {
        return;
      }

      var def = this.renderedRamlHeaders;
      var i;
      var len;
      this._internalValueChange = true;
      if (def && def.length) {
        var defLength = def.length;
        for (i = 0, len = headers.length; i < len; i++) {
          var found = false;
          for (var j = 0; j < defLength; j++) {
            if (headers[i].name === def[j].name) {
              found = true;
              this.set(['renderedRamlHeaders', j, 'value'], headers[i].value);
              break;
            }
          }
          if (!found) {
            this.push('renderedRamlHeaders', this._headersModelFromObject(headers[i]));
          }
        }
        // remove headers that are currently in the form but they are not set in
        // the parsed values array.
        var parsedNames = headers.map(function(item) {
          return item.name;
        });
        for (i = def.length - 1; i >= 0; i--) {
          if (parsedNames.indexOf(def[i].name) === -1) {
            this.splice('renderedRamlHeaders', i, 1);
          }
        }
      } else {
        for (i = 0, len = headers.length; i < len; i++) {
          this.push('renderedRamlHeaders', this._headersModelFromObject(headers[i]));
        }
      }
      this._internalValueChange = false;
    },
    /**
     * Transforms generated from headers source string header object to
     * form's internal data object.
     *
     * @param {Object<string, string>} header Map of header properties (name
     * and value)
     * @return {Object} Internal datamodel created from the header.
     */
    _headersModelFromObject: function(header) {
      var obj = {
        key: header.name,
        name: header.name,
        value: header.value,
        customHeader: true
      };
      return this._createFormModel(obj);
    },

    /**
     * A handler for the `url-value-changed` event.
     * If this element is not the source of the event then it will update the `value` property.
     * It's to be used besides the Polymer's data binding system.
     */
    _extValueChangedHandler: function(e) {
      if (e.target === this) {
        return;
      }
      this.set('value', e.detail.value);
    },

    // Overidden from Polymer.IronValidatableBehavior. Will set the `invalid`
    // attribute automatically, which should be used for styling.
    _getValidity: function() {
      return this.$.form.validate();
    },

    // Opens the documentation for item.
    _openDocs: function(e) {
      var model = e.model;
      var collapse = this.$.form.querySelector('.header-value:nth-child(' + (model.index + 1) +
        ') iron-collapse');
      if (!collapse) {
        return;
      }
      collapse.opened = !collapse.opened;
    },

    // Computes class for the header item form container.
    _computeRowClass: function(item) {
      var clazz = 'header-value';
      if (item.required) {
        clazz += ' required';
      } else {
        clazz += ' optional';
      }
      return clazz;
    }

  });
  </script>
</dom-module>
<!-- CodeMirror autocomplete -->
<dom-module id="cm-arc" assetpath="bower_components/raml-request-headers-editor/">
  <template>
    <style>
      /* BASICS */

      .CodeMirror.cm-s-cm-arc {
        font-family: monospace;
        font-size: 15px;
        height: inherit;
        min-height: 60px;
        padding: 8px;
        color: #757575;
        cursor: text;
      }

      .CodeMirror.cm-s-cm-arc.parsed-content {
        white-space: pre-line;
      }

      /* PADDING */

      .cm-s-cm-arc .CodeMirror-lines {
        padding: 4px 0;
        /* Vertical padding around content */
      }

      .CodeMirror.cm-s-cm-arc pre {
        padding: 0 4px;
        /* Horizontal padding of content */
      }

      .cm-s-cm-arc .CodeMirror-scrollbar-filler,
      .cm-s-cm-arc .CodeMirror-gutter-filler {
        background-color: white;
        /* The little square between H and V scrollbars */
        ;
      }

      /* GUTTER */

      .cm-s-cm-arc .CodeMirror-gutters {
        border-right: 1px solid #ddd;
        background-color: #f7f7f7;
        white-space: nowrap;
      }

      .cm-s-cm-arc .CodeMirror-linenumbers {}

      .cm-s-cm-arc .CodeMirror-linenumber {
        padding: 0 3px 0 5px;
        min-width: 20px;
        text-align: right;
        color: #999;
        white-space: nowrap;
      }

      .cm-s-cm-arc .CodeMirror-guttermarker {
        color: black;
      }

      .cm-s-cm-arc .CodeMirror-guttermarker-subtle {
        color: #999;
      }

      /* CURSOR */

      .CodeMirror.cm-s-cm-arc div.CodeMirror-cursor {
        border-left: 1px solid black;
      }
      /* Shown when moving in bi-directional text */
      .CodeMirror.cm-s-cm-arc div.CodeMirror-secondarycursor {
        border-left: 1px solid silver;
      }

      .CodeMirror.cm-fat-cursor div.CodeMirror-cursor {
        width: auto;
        border: 0;
        background: #7e7;
      }

      .CodeMirror.cm-fat-cursor div.CodeMirror-cursors {
        z-index: 1;
      }

      .cm-animate-fat-cursor {
        width: auto;
        border: 0;
        -webkit-animation: blink 1.06s steps(1) infinite;
        -moz-animation: blink 1.06s steps(1) infinite;
        animation: blink 1.06s steps(1) infinite;
      }

      @-webkit-keyframes blink {
        0% {
          background: #7e7;
        }

        50% {
          background: none;
        }

        100% {
          background: #7e7;
        }
      }

      @keyframes blink {
        0% {
          background: #7e7;
        }

        50% {
          background: none;
        }

        100% {
          background: #7e7;
        }
      }

      /* Can style cursor different in overwrite (non-insert) mode */
      div.CodeMirror-overwrite div.CodeMirror-cursor {}

      .cm-tab {
        display: inline-block;
        text-decoration: inherit;
      }

      .CodeMirror-ruler {
        border-left: 1px solid #ccc;
        position: absolute;
      }

      /* DEFAULT THEME */

      .cm-s-cm-arc .cm-keyword {
        color: #708;
      }

      .cm-s-cm-arc .cm-atom {
        color: #B71C1C;
      }

      .cm-s-cm-arc .cm-number {
        color: #164;
      }

      .cm-s-cm-arc .cm-def {
        color: #00f;
      }

      .cm-s-cm-arc .cm-variable,
      .cm-s-cm-arc .cm-punctuation,
      .cm-s-cm-arc .cm-property,
      .cm-s-cm-arc .cm-operator {

      }

      .cm-s-cm-arc .cm-string.cm-property {
        color: #43A047;
      }

      .cm-s-cm-arc .cm-variable-2 {
        color: #05a;
      }

      .cm-s-cm-arc .cm-variable-3 {
        color: #085;
      }

      .cm-s-cm-arc .cm-comment {
        color: #a50;
      }

      .cm-s-cm-arc .cm-string {
        color: #009688;
      }

      .cm-s-cm-arc .cm-string-2 {
        color: #f50;
      }

      .cm-s-cm-arc .cm-meta {
        color: #555;
      }

      .cm-s-cm-arc .cm-qualifier {
        color: #555;
      }

      .cm-s-cm-arc .cm-builtin {
        color: #30a;
      }

      .cm-s-cm-arc .cm-bracket {
        color: #997;
      }

      .cm-s-cm-arc .cm-tag {
        color: #170;
      }

      .cm-s-cm-arc .cm-attribute {
        color: #00c;
      }

      .cm-s-cm-arc .cm-header {
        color: blue;
      }

      .cm-s-cm-arc .cm-quote {
        color: #090;
      }

      .cm-s-cm-arc .cm-hr {
        color: #999;
      }

      .cm-s-cm-arc .cm-link {
        color: #00c;
      }

      .cm-negative {
        color: #d44;
      }

      .cm-positive {
        color: #292;
      }

      .cm-header,
      .cm-strong {
        font-weight: bold;
      }

      .cm-em {
        font-style: italic;
      }

      .cm-link {
        text-decoration: underline;
      }

      .cm-strikethrough {
        text-decoration: line-through;
      }

      .cm-s-cm-arc .cm-error {
        color: #f00;
      }

      .cm-invalidchar {
        color: #f00;
      }

      .CodeMirror-composing {
        border-bottom: 2px solid;
      }

      /* Default styles for common addons */

      div.CodeMirror span.CodeMirror-matchingbracket {
        color: #0f0;
      }

      div.CodeMirror span.CodeMirror-nonmatchingbracket {
        color: #f22;
      }

      .CodeMirror-matchingtag {
        background: rgba(255, 150, 0, .3);
      }

      .CodeMirror-activeline-background {
        background: #e8f2ff;
      }

      /* STOP */

      /* The rest of this file contains styles related to the mechanics of
 the editor. You probably shouldn't touch them. */

      .CodeMirror {
        position: relative;
        overflow: hidden;
        background: white;
      }

      .cm-s-cm-arc .CodeMirror-scroll {
        overflow: auto !important;
        /* Things will break if this is overridden */
        /* 30px is the magic margin used to hide the element's real scrollbars */
        /* See overflow: hidden in .CodeMirror */
        margin-bottom: -30px;
        margin-right: -30px;
        padding-bottom: 30px;
        height: 100%;
        outline: none;
        /* Prevent dragging from highlighting the element */
        position: relative;
      }

      .CodeMirror-sizer {
        position: relative;
        border-right: 30px solid transparent;
      }

      /* The fake, visible scrollbars. Used to force redraw during scrolling
 before actuall scrolling happens, thus preventing shaking and
 flickering artifacts. */
      .CodeMirror-vscrollbar,
      .CodeMirror-hscrollbar,
      .CodeMirror-scrollbar-filler,
      .CodeMirror-gutter-filler {
        position: absolute;
        z-index: 6;
        display: none;
      }

      .CodeMirror-vscrollbar {
        right: 0;
        top: 0;
        overflow-x: hidden;
        overflow-y: scroll;
      }

      .CodeMirror-hscrollbar {
        bottom: 0;
        left: 0;
        overflow-y: hidden;
        overflow-x: scroll;
      }

      .CodeMirror-scrollbar-filler {
        right: 0;
        bottom: 0;
      }

      .CodeMirror-gutter-filler {
        left: 0;
        bottom: 0;
      }

      .CodeMirror-gutters {
        position: absolute;
        left: 0;
        top: 0;
        z-index: 3;
      }

      .CodeMirror-gutter {
        white-space: normal;
        height: 100%;
        display: inline-block;
        margin-bottom: -30px;
        /* Hack to make IE7 behave */
        *zoom: 1;
        *display: inline;
      }

      .CodeMirror-gutter-wrapper {
        position: absolute;
        z-index: 4;
        height: 100%;
      }

      .CodeMirror-gutter-elt {
        position: absolute;
        cursor: default;
        z-index: 4;
      }

      .CodeMirror-gutter-wrapper {
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      .CodeMirror-lines {
        cursor: text;
        min-height: 1px;
        /* prevents collapsing before first draw */
        ;
      }

      .CodeMirror pre {
        /* Reset some styles that the rest of the page might have set */
        -moz-border-radius: 0;
        -webkit-border-radius: 0;
        border-radius: 0;
        border-width: 0;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        margin: 0;
        white-space: pre;
        word-wrap: normal;
        line-height: inherit;
        color: inherit;
        z-index: 2;
        position: relative;
        overflow: visible;
        -webkit-tap-highlight-color: transparent;
      }

      .CodeMirror-wrap pre {
        word-wrap: break-word;
        white-space: pre-wrap;
        word-break: normal;
      }

      .CodeMirror-linebackground {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 0;
      }

      .CodeMirror-linewidget {
        position: relative;
        z-index: 2;
        overflow: auto;
      }

      .CodeMirror-widget {}

      .CodeMirror-code {
        outline: none;
      }

      /* Force content-box sizing for the elements where we expect it */
      .CodeMirror-scroll,
      .CodeMirror-sizer,
      .CodeMirror-gutter,
      .CodeMirror-gutters,
      .CodeMirror-linenumber {
        -moz-box-sizing: content-box;
        box-sizing: content-box;
      }

      .CodeMirror-measure {
        position: absolute;
        width: 100%;
        height: 0;
        overflow: hidden;
        visibility: hidden;
      }

      .CodeMirror-measure pre {
        position: static;
      }

      .CodeMirror div.CodeMirror-cursor {
        position: absolute;
        border-right: none;
        width: 0;
      }

      div.CodeMirror-cursors {
        visibility: hidden;
        position: relative;
        z-index: 3;
      }

      .CodeMirror-focused div.CodeMirror-cursors {
        visibility: visible;
      }

      .CodeMirror-selected {
        background: #d9d9d9;
      }

      .CodeMirror-focused .CodeMirror-selected {
        background: #d7d4f0;
      }

      .CodeMirror-crosshair {
        cursor: crosshair;
      }
      .CodeMirror ::selection {
        background: #d7d4f0;
      }
      .CodeMirror ::-moz-selection {
        background: #d7d4f0;
      }

      .cm-searching {
        background: #ffa;
        background: rgba(255, 255, 0, .4);
      }

      /* IE7 hack to prevent it from returning funny offsetTops on the spans */
      .CodeMirror span {
        *vertical-align: text-bottom;
      }

      /* Used to force a border model for a node */
      .cm-force-border {
        padding-right: 0.1px;
      }

      @media print {
        /* Hide the cursor when printing */
        .CodeMirror div.CodeMirror-cursors {
          visibility: hidden;
        }
      }

      /* See issue #2901 */
      .cm-tab-wrap-hack:after {
        content: '';
      }

      /* Help users use markselection to safely style text background */
      span.CodeMirror-selectedtext {
        background: none;
      }

    </style>
  </template>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(mod) {
  if (typeof exports == 'object' && typeof module == 'object') { // CommonJS
    mod(require('../../lib/codemirror'));
  } else if (typeof define == 'function' && define.amd) { // AMD
    define(['../../lib/codemirror'], mod);
  } else { // Plain browser env
    mod(CodeMirror);
  }
})(function(CodeMirror) {
  'use strict';

  CodeMirror.defineMode('http-headers', function() {

    function failRest(stream, state) {
      stream.skipToEnd();
      state.cur = failRest;
      return 'error';
    }

    function header(stream) {
      if (stream.sol() && !stream.eat(/[ \t]/)) {
        if (stream.match(/^.*?:/)) {
          return 'atom';
        } else {
          stream.skipToEnd();
          return 'error';
        }
      } else {
        stream.skipToEnd();
        return 'string';
      }
    }

    return {
      token: function(stream, state) {
        var cur = state.cur;
        if (!cur || cur !== header && stream.eatSpace()) {
          return null;
        }
        return cur(stream, state);
      },

      blankLine: function(state) {
        state.cur = failRest;
      },

      startState: function() {
        return {
          cur: header
        };
      }
    };
  });
  CodeMirror.defineMIME('message/http-headers', 'http-headers');
});
</script>
<script>(function(mod) {
  if (typeof exports == 'object' && typeof module == 'object') { // CommonJS
    mod(require('../../lib/codemirror'));
  } else if (typeof define == 'function' && define.amd) { // AMD
    define(['../../lib/codemirror'], mod);
  } else { // Plain browser env
    mod(CodeMirror);
  }
})(function(CodeMirror) {
  'use strict';

  var Pos = CodeMirror.Pos;
  var accept = [
    '*/*',
    'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'application/xml,application/xhtml+xml,text/html;q=0.9, text/plain;q=0.8,image/png,*/*;q=0.5',
    'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'image/jpeg, application/x-ms-application, image/gif, application/xaml+xml, image/pjpeg, ' +
      'application/x-ms-xbap, application/x-shockwave-flash, application/msword, */*',
    'text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg,' +
      ' image/gif, image/x-xbitmap, */*;q=0.1',
    'image/png,image/*;q=0.8,*/*;q=0.5',
    'audio/webm, audio/ogg, audio/wav, audio/*;q=0.9, application/ogg;q=0.7, video/*;q=0.6; ' +
      '*/*;q=0.5',
    'video/webm, video/ogg, video/*;q=0.9, application/ogg=0.7, audio/*;q=0.6; */*;q=0.5',
    'application/javascript, */*;q=0.8',
    'text/css,*/*;q=0.1',
    'text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg' +
      ', image/gif, image/x-xbitmap, */*;q=0.1'
  ];
  var contentTypes = [
    'application/json',
    'application/xml',
    'application/atom+xml',
    'multipart-form-data',
    'application/x-www-form-urlencoded',
    'application/base64',
    'application/octet-stream',
    'text/plain',
    'text/css',
    'text/html',
    'application/javascript'
  ];
  var authorizationHeaders = ['Basic {base64 of user:password}','Bearer {OAuth2 bearer}'];
  var authorizationParams = {
    'base64 of user:password': {
      type: String,
      call: 'authorizationBasic'
    },
    'OAuth2 bearer': {
      type: String,
      call: 'authorizationGoogleOauth2'
    }
  };

  var headersStructure = [{
    key: 'Accept',
    values: accept
  }, {
    key: 'Accept-Charset',
    values: [
      'UTF-8',
      'UTF-16',
      'ISO-8859-1',
      'ISO-8859-1,utf-8;q=0.7,*;q=0.7']
  }, {
    key: 'Accept-Encoding',
    values: [
      'compress',
      'gzip',
      'deflate',
      'identity',
      'br',
      '*',
      'gzip, deflate, sdch']
  }, {
    key: 'Accept-Language',
    values: [
      'en-US',
      'cad',
      'en-gb;q=0.8, en;q=0.7'
    ]
  }, {
    key: 'Authorization',
    values: authorizationHeaders,
    params: authorizationParams
  }, {
    key: 'Access-Control-Request-Method',
    values: ['GET','POST','PUT','DELETE']
  }, {
    key: 'Access-Control-Request-Headers',
    values: ['{list-of-headers}'],
    params: {
      'list-of-headers': {
        type: String
      }
    }
  }, {
    key: 'Cache-Control',
    values: [
      'no-cache',
      'no-store',
      'max-age={seconds}',
      'max-stale={seconds}',
      'min-fresh={seconds}',
      'no-transform',
      'only-if-cached'
    ],
    params: {
      seconds: {
        type: Number
      }
    }
  }, {
    key: 'Connection',
    values: ['close', 'keep-alive']
  }, {
    key: 'Content-MD5',
    values: ['{md5-of-message}'],
    params: {
      'length-in-bytes': {
        type: String
      }
    }
  }, {
    key: 'Content-Length',
    values: ['{length-in-bytes}'],
    params: {
      'length-in-bytes': {
        type: Number
      }
    }
  }, {
    key: 'Content-Type',
    values: contentTypes /*,
    params: {
      '*': {
        type: String,
        call: 'contentType'
      }
    }*/
  }, {
    key: 'Cookie',
    values: [
      '{cookie name}={cookie value}',
      '{cookie name}={cookie value}; expires={insert GMT date here}; domain={domain.com}; ' +
        'path=/; secure'
    ],
    params: {
      '*': {
        type: String,
        call: 'cookie'
      }
    }
  }, {
    key: 'Date',
    values: [
      '{insert GMT date here}'
    ]
  }, {
    key: 'DNT',
    values: [0, 1]
  }, {
    key: 'Expect',
    values: [
      '200-OK',
      '100-continue'
    ]
  }, {
    key: 'From',
    values: ['user@domain.com']
  }, {
    key: 'Front-End-Https',
    values: ['on', 'off']
  }, {
    key: 'Host',
    values: [
      'www.domain.com',
      'www.domain.com:80'
    ]
  }, {
    key: 'If-Match',
    values: ['{insert entity tag}']
  }, {
    key: 'If-Modified-Since',
    values: ['{insert GMT date here}']
  }, {
    key: 'If-None-Match',
    values: ['{insert entity tag}']
  }, {
    key: 'If-Range',
    values: ['{insert entity tag}', '{insert GMT date here}']
  }, {
    key: 'If-Unmodified-Since',
    values: ['{insert GMT date here}']
  }, {
    key: 'Max-Forwards',
    values: ['{number of forwards}'],
    params: {
      'number of forwards': {
        type: Number
      }
    }
  }, {
    key: 'Origin',
    values: []
  }, {
    key: 'Pragma',
    values: ['no-cache']
  }, {
    key: 'Proxy-Authorization',
    values: authorizationHeaders,
    params: authorizationParams
  }, {
    key: 'Proxy-Connection',
    values: ['close', 'keep-alive']
  }, {
    key: 'Range',
    values: [
      'bytes={from bytes}-{to bytes}',
      'bytes=-{final bytes}'
    ]
  }, {
    key: 'Referer',
    values: ['{http://www.domain.com/}']
  }, {
    key: 'TE',
    values: [
      '{header name}',
      'trailers, deflate;q=0.5'
    ]
  }, {
    key: 'Upgrade',
    values: ['HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11']
  }, {
    key: 'User-Agent',
    values: [
      navigator.userAgent,
      'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:33.0) Gecko/20120101 Firefox/33.0',
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10; rv:33.0) Gecko/20100101 Firefox/33.0',
      'Opera/9.80 (Windows NT 6.0) Presto/2.12.388 Version/12.14',
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko)' +
        ' Version/7.0.3 Safari/7046A194A',
      'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; WOW64; Trident/4.0; SLCC1)',
      'Mozilla/5.0 (MSIE 10.0; Windows NT 6.1; Trident/5.0)',
      'Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gec' +
        'ko) Version/6.0 Mobile/10A5376e Safari/8536.25',
      'Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) ' +
        'Version/6.0 Mobile/10A5376e Safari/8536.25',
      'Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, ' +
        'like Gecko) Chrome/34.0.1847.114 Mobile Safari/537.36',
      'Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM;' +
        ' Touch; NOKIA; Lumia 920)'
    ]
  }, {
    key: 'Via',
    values: []
  }, {
    key: 'Warning',
    values: [
      '{code} {agent} {message} {date}'
    ],
    properties: {
      code: {
        type: Number
      },
      agent: {
        type: String
      },
      message: {
        type: String
      },
      date: {
        type: Date
      }
    }
  }, {
    key: 'X-ATT-DeviceId',
    values: []
  }, {
    key: 'X-Forwarded-For',
    values: []
  }, {
    key: 'X-Forwarded-Proto',
    values: ['http', 'https']
  }, {
    key: 'X-Requested-With',
    values: ['XMLHttpRequest']
  }, {
    key: 'X-Wap-Profile',
    values: []
  }];

  function getToken(editor, cur) {
    return editor.getTokenAt(cur);
  }
  /**
   * Get all keywords (headers names).
   * @param {Array} headersStructure List of possible headers
   * @return {Array} Array of founded header names.
   */
  var getKeywords = function(headersStructure) {
    var keywords = [];
    var clb = function(header, cm, data, completion) {
      cm.replaceRange(completion.text + ': ', data.from, data.to);
      CodeMirror.signal(cm, 'header-key-selected', completion.text);
    };
    for (var i = 0; i < headersStructure.length; i++) {
      keywords.push({
        text: headersStructure[i].key,
        hint: clb.bind(this, headersStructure[i])
      });
    }
    return keywords;
  };
  var getHeaderValuesFor = function(headersStructure, key) {
    var keywords = [];
    var clb = function(header, cm, data, completion) {
      cm.replaceRange(completion.text, data.from, data.to);
      CodeMirror.signal(cm, 'header-value-selected', completion.text);

      if (header.params && header.params['*'] && header.params['*'].call) {
        var fromChar = Math.min(data.from.ch, data.to.ch);
        var charTo = fromChar + completion.text.length;
        var line = data.from.line;
        cm.setSelection({
          line: line,
          ch: fromChar
        }, {
          line: line,
          ch: charTo
        });
        CodeMirror.signal(cm, 'header-value-support', {
          type: header.params['*'],
          key: header.key,
          value: completion.text
        });
      } else {
        var match = completion.text.match(/\{(.*?)\}/);
        if (match) {
          if (header.params && (match[1] in header.params)) {
            var fromChar = Math.min(data.from.ch, data.to.ch);
            var line = data.from.line;
            fromChar += completion.text.indexOf('{');
            var charTo = fromChar + match[1].length + 2;
            cm.setSelection({line: line, ch: fromChar}, {line: line, ch: charTo});
            CodeMirror.signal(cm, 'header-value-support', {
              type: header.params[match[1]],
              key: header.key,
              value: completion.text
            });
          }
        }
      }
    };

    for (var i = 0; i < headersStructure.length; i++) {
      if (headersStructure[i].key.toLowerCase() === key) {
        var valuesLenght = headersStructure[i].values && headersStructure[i].values.length || 0;
        for (var j = 0; j < valuesLenght; j++) {
          var item = headersStructure[i].values[j];
          var completion = {
            text: item,
            hint: clb.bind(this, headersStructure[i])
          };
          keywords.push(completion);
        }
        break;
      }
    }
    return keywords;
  };

  var cleanResults = function(text, keywords) {
    var results = [];
    var i = 0;
    for (i = 0; i < keywords.length; i++) {
      if (keywords[i].text) {
        if (keywords[i].text.toLowerCase().substring(0, text.length) === text) {
          results.push(keywords[i]);
        }
      } else {
        if (keywords[i].toLowerCase().substring(0, text.length) === text) {
          results.push(keywords[i]);
        }
      }
    }
    return results;
  };

  function getHints(editor) {
    var cur = editor.getCursor();
    var token = getToken(editor, cur);
    var tokenString = (!!token.string) ? '' : token.string.trim();
    var keywords = [];
    var i = 0;
    var fromCur = {
      line: cur.line,
      ch: cur.ch + 2
    };
    var toCur = {
      line: cur.line,
      ch: cur.ch
    };
    var flagClean = true;
    var last = editor.getRange({
      line: cur.line,
      ch: cur.ch - 1
    }, cur);
    var last2 = editor.getRange({
      line: cur.line,
      ch: cur.ch - 2
    }, cur);

    if ((last === ':' || last2 === ': ') || (last === ',' || last2 === ', ')) {
      var key = editor.getRange({
        line: cur.line,
        ch: 0
      }, cur);
      if (!key) {
        key = '';
      }
      key = key.substr(0, key.indexOf(':')).trim().toLowerCase();
      keywords = getHeaderValuesFor(headersStructure, key);

    } else if (editor.getRange({
        line: cur.line,
        ch: 0
      }, cur).trim() !== '') {
      var prev = editor.getRange({
        line: cur.line,
        ch: 0
      }, cur).trim();
      if (prev.indexOf(':') > -1) {
        //looking for value
        tokenString = prev.substr(prev.indexOf(':') + 1).trim().toLowerCase();
        keywords = getHeaderValuesFor(headersStructure, key);
      } else {
        //looking for header name starting with...
        tokenString = prev.toLowerCase();
        keywords = getKeywords(headersStructure);
      }
      fromCur.ch = token.start;

    } else {
      for (i = 0; i < headersStructure.length; i++) {
        keywords = getKeywords(headersStructure);
      }
    }

    if (flagClean === true && tokenString.trim() === '') {
      flagClean = false;
    }

    if (flagClean) {
      keywords = cleanResults(tokenString, keywords);
    }
    /*
     * from: replaceToken ? Pos(cur.line, tagStart == null ? token.start : tagStart) : cur,
     to: replaceToken ? Pos(cur.line, token.end) : cur
     */
    return {
      list: keywords,
      from: fromCur,
      to: toCur
    };
  }

  CodeMirror.registerHelper('hint', 'http-headers', getHints);
});
</script>
<script>// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
(function(mod) {
  if (typeof exports == 'object' && typeof module == 'object') {// CommonJS
    mod(require('./../lib/codemirror'));
  } else if (typeof define == 'function' && define.amd) {// AMD
    define(['../../lib/codemirror'], mod);
  } else {// Plain browser env
    mod(CodeMirror);
  }
})(function(CodeMirror) {
  'use strict';

  var HINT_ELEMENT_CLASS = 'CodeMirror-hint';
  var ACTIVE_HINT_ELEMENT_CLASS = 'iron-selected';

  // This is the old interface, kept around for now to stay
  // backwards-compatible.
  CodeMirror.showHint = function(cm, getHints, options) {
    if (!getHints) {
      return cm.showHint(options);
    }
    if (options && options.async) {
      getHints.async = true;
    }
    var newOpts = {
      hint: getHints
    };
    if (options) {
      for (var prop in options) {
        newOpts[prop] = options[prop];
      }
    }
    return cm.showHint(newOpts);
  };

  CodeMirror.defineExtension('showHint', function(options) {
    // We want a single cursor position.
    if (this.listSelections().length > 1 || this.somethingSelected()) {
      return;
    }

    if (this.state.completionActive) {
      this.state.completionActive.close();
    }
    var completion = this.state.completionActive = new Completion(this, options);
    if (!completion.options.hint) {
      return;
    }

    CodeMirror.signal(this, 'startCompletion', this);
    completion.update(true);
  });

  function Completion(cm, options) {
    this.cm = cm;
    this.options = this.buildOptions(options);
    this.widget = null;
    this.debounce = 0;
    this.tick = 0;
    this.startPos = this.cm.getCursor();
    this.startLen = this.cm.getLine(this.startPos.line).length;

    var self = this;
    cm.on('cursorActivity', this.activityFunc = function() {
      self.cursorActivity();
    });
  }

  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {
    return setTimeout(fn, 1000 / 60);
  };
  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;

  Completion.prototype = {
    close: function() {
      if (!this.active()) {
        return;
      }
      this.cm.state.completionActive = null;
      this.tick = null;
      this.cm.off('cursorActivity', this.activityFunc);

      if (this.widget && this.data) {
        CodeMirror.signal(this.data, 'close');
      }
      if (this.widget) {
        this.widget.close();
      }
      CodeMirror.signal(this.cm, 'endCompletion', this.cm);
    },

    active: function() {
      return this.cm.state.completionActive == this;
    },

    pick: function(data, i) {
      var completion = data.list[i];
      if (completion.hint) {
        completion.hint(this.cm, data, completion);
      } else {
        this.cm.replaceRange(getText(completion), completion.from || data.from,
          completion.to || data.to, 'complete');
      }
      CodeMirror.signal(data, 'pick', completion);
      this.close();
    },

    cursorActivity: function() {
      if (this.debounce) {
        cancelAnimationFrame(this.debounce);
        this.debounce = 0;
      }

      var pos = this.cm.getCursor();
      var line = this.cm.getLine(pos.line);
      if (pos.line != this.startPos.line ||
        line.length - pos.ch != this.startLen - this.startPos.ch ||
        pos.ch < this.startPos.ch || this.cm.somethingSelected() ||
        (pos.ch && this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {
        this.close();
      } else {
        var self = this;
        this.debounce = requestAnimationFrame(function() {
          self.update();
        });
        if (this.widget) {
          this.widget.disable();
        }
      }
    },

    update: function(first) {
      if (this.tick == null) {
        return;
      }
      if (this.data) {
        CodeMirror.signal(this.data, 'update');
      }
      if (!this.options.hint.async) {
        this.finishUpdate(this.options.hint(this.cm, this.options), first);
      } else {
        var myTick = ++this.tick;
        var self = this;
        this.options.hint(this.cm, function(data) {
          if (self.tick == myTick) {
            self.finishUpdate(data, first);
          }
        }, this.options);
      }
    },

    finishUpdate: function(data, first) {
      this.data = data;

      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);
      if (this.widget) {
        this.widget.close();
      }
      if (data && data.list.length) {
        if (picked && data.list.length == 1) {
          this.pick(data, 0);
        } else {
          this.widget = new Widget(this, data);
          CodeMirror.signal(data, 'shown');
        }
      }
    },

    buildOptions: function(options) {
      var editor = this.cm.options.hintOptions;
      var out = {};
      for (var prop in defaultOptions) {
        out[prop] = defaultOptions[prop];
      }
      if (editor) {
        for (var prop in editor) {
          if (editor[prop] !== undefined) {
            out[prop] = editor[prop];
          }
        }
      }
      if (options) {
        for (var prop in options) {
          if (options[prop] !== undefined) {
            out[prop] = options[prop];
          }
        }
      }
      return out;
    }
  };

  function getText(completion) {
    if (typeof completion === 'string') {
      return completion;
    } else {
      return completion.text;
    }
  }

  function buildKeyMap(completion, handle) {
    var baseMap = {
      Up: function() {
        handle.moveFocus(-1);
      },
      Down: function() {
        handle.moveFocus(1);
      },
      PageUp: function() {
        handle.moveFocus(-handle.menuSize() + 1, true);
      },
      PageDown: function() {
        handle.moveFocus(handle.menuSize() - 1, true);
      },
      Home: function() {
        handle.setFocus(0);
      },
      End: function() {
        handle.setFocus(handle.length - 1);
      },
      Enter: handle.pick,
      Tab: handle.pick,
      Esc: handle.close
    };
    var custom = completion.options.customKeys;
    var ourMap = custom ? {} : baseMap;

    function addBinding(key, val) {
      var bound;
      if (typeof val !== 'string') {
        bound = function(cm) {
          return val(cm, handle);
        };
        // This mechanism is deprecated
      } else if (baseMap.hasOwnProperty(val)) {
        bound = baseMap[val];
      } else {
        bound = val;
      }
      ourMap[key] = bound;
    }
    if (custom) {
      for (var key in custom) {
        if (custom.hasOwnProperty(key)) {
          addBinding(key, custom[key]);
        }
      }
    }
    var extra = completion.options.extraKeys;
    if (extra) {
      for (var key in extra) {
        if (extra.hasOwnProperty(key)) {
          addBinding(key, extra[key]);
        }
      }
    }
    return ourMap;
  }

  function getHintElement(hintsElement, el) {
    while (el && el != hintsElement) {
      if (el.nodeName.toUpperCase() === 'LI' && el.parentNode === hintsElement) {
        return el;
      }
      el = el.parentNode;
    }
  }

  function Widget(completion, data) {
    this.completion = completion;
    this.data = data;
    this.picked = false;
    var widget = this;
    var cm = completion.cm;

    var hints = this.hints = document.createElement('paper-material');
    hints.className = 'CodeMirror-hints';
    this.selectedHint = data.selectedHint || 0;
    var container = document.createElement('paper-menu');
    container.selected = 0;
    hints.appendChild(container);
    hints.elevation = 2;

    var completions = data.list;
    for (var i = 0; i < completions.length; ++i) {
      var elt = container.appendChild(document.createElement('paper-item'));
      var cur = completions[i];
      var className = HINT_ELEMENT_CLASS + (i !== this.selectedHint ? '' : ' ' +
        ACTIVE_HINT_ELEMENT_CLASS);
      if (cur.className !== null) {
        className = cur.className ? cur.className + ' ' + className : className;
      }
      elt.className = className;
      if (cur.render) {
        cur.render(elt, data, cur);
      } else {
        elt.appendChild(document.createTextNode(cur.displayText || getText(cur)));
      }
      elt.hintId = i;
    }
    if (hints.children[0].children[0].nodeName === 'DIV') {
      this._indexOffset = 1;
    } else {
      this._indexOffset = 0;
    }
    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null, 'local');
    var left = pos.left;
    var top = pos.bottom;
    var below = true;
    hints.style.left = left + 'px';
    hints.style.top = top + 'px';
    // If we're at the edge of the screen, then we want the menu to appear on the left of the
    // cursor.
    var winW = window.innerWidth || Math.max(document.body.offsetWidth,
      document.documentElement.offsetWidth);
    var winH = window.innerHeight || Math.max(document.body.offsetHeight,
      document.documentElement.offsetHeight);
    (completion.options.container || document.body).appendChild(hints);
    var box = hints.getBoundingClientRect();
    var overlapY = box.bottom - winH;
    if (overlapY > 0) {
      var height = box.bottom - box.top;
      var curTop = pos.top - (pos.bottom - box.top);
      if (curTop - height > 0) { // Fits above cursor
        hints.style.top = (top = pos.top - height) + 'px';
        below = false;
      } else if (height > winH) {
        hints.style.height = (winH - 5) + 'px';
        hints.style.top = (top = pos.bottom - box.top) + 'px';
        var cursor = cm.getCursor();
        if (data.from.ch != cursor.ch) {
          pos = cm.cursorCoords(cursor);
          hints.style.left = (left = pos.left) + 'px';
          box = hints.getBoundingClientRect();
        }
      }
    }
    var overlapX = box.right - winW;
    if (overlapX > 0) {
      if (box.right - box.left > winW) {
        hints.style.width = (winW - 5) + 'px';
        overlapX -= (box.right - box.left) - winW;
      }
      hints.style.left = (left = pos.left - overlapX) + 'px';
    }

    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {
      moveFocus: function(n, avoidWrap) {
        widget.changeActive(widget.selectedHint + n, avoidWrap);
      },
      setFocus: function(n) {
        widget.changeActive(n);
      },
      menuSize: function() {
        return widget.screenAmount();
      },
      length: completions.length,
      close: function() {
        completion.close();
      },
      pick: function() {
        widget.pick();
      },
      data: data
    }));

    if (completion.options.closeOnUnfocus) {
      var closingOnBlur;
      cm.on('blur', this.onBlur = function() {
        closingOnBlur = setTimeout(function() {
          completion.close();
        }, 100);
      });
      cm.on('focus', this.onFocus = function() {
        clearTimeout(closingOnBlur);
      });
    }

    var startScroll = cm.getScrollInfo();
    cm.on('scroll', this.onScroll = function() {
      var curScroll = cm.getScrollInfo();
      var editor = cm.getWrapperElement().getBoundingClientRect();
      var newTop = top + startScroll.top - curScroll.top;
      var point = newTop -
        (window.pageYOffset || (document.documentElement || document.body).scrollTop);
      if (!below) {
        point += hints.offsetHeight;
      }
      if (point <= editor.top || point >= editor.bottom) {
        return completion.close();
      }
      hints.style.top = newTop + 'px';
      hints.style.left = (left + startScroll.left - curScroll.left) + 'px';
    });

    CodeMirror.on(hints, 'dblclick', function(e) {
      var t = getHintElement(hints.children[0], e.target || e.srcElement);
      if (t && t.hintId != null) {
        widget.changeActive(t.hintId);
        widget.pick();
      }
    });

    CodeMirror.on(hints, 'click', function(e) {
      var t = getHintElement(hints.children[0], e.target || e.srcElement);
      if (t && t.hintId != null) {
        widget.changeActive(t.hintId);
        if (completion.options.completeOnSingleClick) {
          widget.pick();
        }
      }
    });

    CodeMirror.on(hints, 'mousedown', function() {
      setTimeout(function() {
        cm.focus();
      }, 20);
    });

    CodeMirror.signal(data, 'select', completions[0], hints.children[0].firstChild);
    return true;
  }

  Widget.prototype = {
    close: function() {
      if (this.completion.widget != this) {
        return;
      }
      this.completion.widget = null;
      this.hints.parentNode.removeChild(this.hints);
      this.completion.cm.removeKeyMap(this.keyMap);

      var cm = this.completion.cm;
      if (this.completion.options.closeOnUnfocus) {
        cm.off('blur', this.onBlur);
        cm.off('focus', this.onFocus);
      }
      cm.off('scroll', this.onScroll);
    },

    disable: function() {
      this.completion.cm.removeKeyMap(this.keyMap);
      var widget = this;
      this.keyMap = {
        Enter: function() {
          widget.picked = true;
        }
      };
      this.completion.cm.addKeyMap(this.keyMap);
    },

    pick: function() {
      this.completion.pick(this.data, this.selectedHint);
    },

    changeActive: function(i, avoidWrap) {
      // i += this._indexOffset;
      if (i >= this.data.list.length) {
        i = avoidWrap ? this.data.list.length - 1 : 0;
      } else if (i < 0) {
        i = avoidWrap ? 0 : this.data.list.length - 1;
      }
      if (this.selectedHint === i) {
        return;
      }
      var selectedHint = this.selectedHint + this._indexOffset;
      var node = this.hints.children[0].children[selectedHint];
      node.classList.remove(ACTIVE_HINT_ELEMENT_CLASS);
      selectedHint = i + this._indexOffset;
      this.selectedHint = i;
      node = this.hints.children[0].children[selectedHint];
      node.classList.add(ACTIVE_HINT_ELEMENT_CLASS);
      if (node.offsetTop < this.hints.scrollTop) {
        this.hints.scrollTop = node.offsetTop - 3;
      } else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop +
        this.hints.clientHeight) {
        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;
      }
      CodeMirror.signal(this.data, 'select', this.data.list[selectedHint], node);
    },

    screenAmount: function() {
      return Math.floor(this.hints.clientHeight /
        this.hints.children[0].children[0].offsetHeight) || 1;
    }
  };

  CodeMirror.registerHelper('hint', 'auto', function(cm, options) {
    var helpers = cm.getHelpers(cm.getCursor(), 'hint');
    var words;
    if (helpers.length) {
      for (var i = 0; i < helpers.length; i++) {
        var cur = helpers[i](cm, options);
        if (cur && cur.list.length) {
          return cur;
        }
      }
    } else if (words = cm.getHelper(cm.getCursor(), 'hintWords')) {
      if (words) {
        return CodeMirror.hint.fromList(cm, {
          words: words
        });
      }
    } else if (CodeMirror.hint.anyword) {
      return CodeMirror.hint.anyword(cm, options);
    }
  });

  CodeMirror.registerHelper('hint', 'fromList', function(cm, options) {
    var cur = cm.getCursor();
    var token = cm.getTokenAt(cur);
    var found = [];
    for (var i = 0; i < options.words.length; i++) {
      var word = options.words[i];
      if (word.slice(0, token.string.length) === token.string) {
        found.push(word);
      }
    }

    if (found.length) {
      return {
        list: found,
        from: CodeMirror.Pos(cur.line, token.start),
        to: CodeMirror.Pos(cur.line, token.end)
      };
    }
  });

  CodeMirror.commands.autocomplete = CodeMirror.showHint;

  var defaultOptions = {
    hint: CodeMirror.hint.auto,
    completeSingle: true,
    alignWithWord: true,
    closeCharacters: /[\s()\[\]{};:>,]/,
    closeOnUnfocus: true,
    completeOnSingleClick: false,
    container: null,
    customKeys: null,
    extraKeys: null
  };

  CodeMirror.defineOption('hintOptions', null);
});
</script>
<!--
`<raml-request-headers-editor>` A headers editor to be used with the RAML defined requests

### Example
```
<raml-request-headers-editor></raml-request-headers-editor>
```

## Events
This element listens for the `request-headers-changed` and `request-header-changed` events.
The first event when handled will replace current editor value. New value mast be set to a `value`
property of the event's detail object.
Second event, when handled, will update single header value if the header is on the list of append
header if it is a new header. Event handler expects `name` and `value` properties to be set on event's
detail object.

### `request-headers-changed` example
```
var init = {
  detail: {
    value: 'Authorization: Basic base64 string'
  },
  bubbles: true,
  cancelable: true
};
var event = new CustomEvent('request-headers-changed', init);
document.dispatchEvent(event);
```
This event will set editor value to:
```
Authorization: Basic base64 string
```

### `request-header-changed` example
```
var init = {
  detail: {
    name: 'Authorization',
    value: 'custom'
  },
  bubbles: true,
  cancelable: true
};
var event = new CustomEvent('request-header-changed', init);
document.dispatchEvent(event);
```
This event will update the Authorization header value to `custom`.

If the event was canceled by calling `event.preventDefault()` then the value won't be updated.

### Styling
`<raml-request-headers-editor>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-request-headers-editor` | Mixin applied to the element | `{}`

@group RAML Elements
@element raml-request-headers-editor
@demo demo/index.html
-->
<dom-module id="raml-request-headers-editor" assetpath="bower_components/raml-request-headers-editor/">
  <template>
    <style>
     :host {
      display: block;
      position: relative;

      @apply(--raml-request-headers-editor);

      --code-mirror-editor: {
        z-index: 0;
      }

      --paper-autocomplete: {
        top: 32px;
      }
    }
    .CodeMirror-hints {
      position: absolute;
      z-index: 10;
      background: white;
      overflow: hidden;
      overflow-y: auto;
      max-height: 20em;
      margin-left: 20px;
    }

    .editor-actions {
      padding: 0 8px;
      @apply(--raml-body-editor-actions-container);
    }

    #copyContainer {
      margin: 0;
      padding: 0;
    }

    paper-icon-button[active] {
      background-color: var(--raml-body-editor-panel-button-active, #e0e0e0);
      border-radius: 50%;
      @apply(--raml-body-editor-panel-button);
    }
    </style>
    <div class="content">
      <div class="editor-actions">
        <paper-icon-button icon="arc:content-copy" id="copyButton" on-tap="_copyToClipboard"></paper-icon-button>
        <paper-icon-button icon="arc:code" id="editMode" toggles="" active="{{sourceMode}}"></paper-icon-button>
        <paper-tooltip for="copyButton">Copy headers value to clipboard</paper-tooltip>
        <paper-tooltip for="editMode">Toggle source edit mode</paper-tooltip>
      </div>
      <iron-pages content="" selected="{{selected}}" on-iron-select="_tabChangedHandler" selected-attribute="active">
        <raml-headers-form value="{{value}}" narrow="[[narrow]]" narrow-width="[[narrowWidth]]" raml-headers="[[ramlHeaders]]"></raml-headers-form>
        <code-mirror import-location="/bower_components/codemirror/" mode="http-headers" theme="cm-arc" value="{{value}}"></code-mirror>
      </iron-pages>
    </div>
    <p id="copyContainer"></p>
  </template>
  <script>
  Polymer({
    is: 'raml-request-headers-editor',
    behaviors: [ArcBehaviors.HeadersParserBehavior],
    /**
     * Fired when the content type header has been set / updated.
     *
     * @event content-type-changed
     * @param {String} value New Content type.
     */
    /**
     * Fired when the editor value change
     *
     * @event request-headers-changed
     * @param {String} value Current editor value.
     */
    properties: {
      /**
       * A HTTP headers message part as defined in HTTP spec.
       *
       * @type {String}
       */
      value: {
        type: String,
        notify: true
      },
      // Currently selected editor. Can be raw (CodeMirror) (0) or form editor (1).
      selected: {
        type: Number,
        value: 0
      },
      /**
       * RAML headers definition.
       */
      ramlHeaders: Object,
      /**
       * Value of a Content-Type header.
       * When this value change then editor update the value for the content type. However,
       * to change a single header value, please, use `request-headers-changed` event with `name`
       * and `value` properties set on the detail object.
       *
       * @type {Stirng}
       */
      contentType: {
        type: String,
        notify: true,
        observer: '_onContentTypeChanged'
      },

      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        value: false,
        notify: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      // When set to true then the source edit mode is enabled
      sourceMode: Boolean
    },

    observers: [
      '_valueChanged(value)',
      '_sourceModeChanged(sourceMode)'
    ],

    attached: function() {
      this.listen(window, 'request-headers-changed', '_headersChangedHandler');
      this.listen(window, 'request-header-changed', '_headerChangedHandler');
    },

    detached: function() {
      this.unlisten(window, 'request-headers-changed', '_headersChangedHandler');
      this.unlisten(window, 'request-header-changed', '_headerChangedHandler');
    },

    ready: function() {
      var cm = this.$$('code-mirror');
      cm.setOption('extraKeys', {
        'Ctrl-Space': function(cm) {
          CodeMirror.showHint(cm, CodeMirror.hint['http-headers'], {
            container: Polymer.dom(this.root)
          });
        }.bind(this)
      });
    },

    _sourceModeChanged: function(sourceMode) {
      if (sourceMode) {
        this.set('selected', 1);
      } else {
        this.set('selected', 0);
      }
    },

    /**
     * Called by CodeMirror editor.
     * When something change n the headers list, detect content type header.
     */
    _valueChanged: function(value) {
      this._detectContentType(value);
      if (!this._cacncelChangeEvent) {
        this.fire('request-headers-changed', {
          value: value
        });
      }
    },

    _detectContentType: function(value) {
      if (!value && this.contentType) {
        this.set('contentType', null);
        return;
      }
      if (!this.value) {
        return;
      }
      var ct = this.getContentType(value);
      if (!ct) {
        return;
      }
      this.set('contentType', ct);
    },

    _onContentTypeChanged: function(currentCt) {
      if (!currentCt) {
        this.fire('content-type-changed', {
          'value': ''
        });
        return;
      }
      var arr = this.headersToJSON(this.value);
      var updated = false;
      var notChanged = false; //True when values are equal, no change needed.
      arr.map(function(item) {
        if (updated || item.name.toLowerCase() !== 'content-type') {
          return item;
        }
        updated = true;
        if (item.value === currentCt) {
          notChanged = true;
          return item;
        }
        item.value = currentCt;
        return item;
      });

      if (notChanged) {
        return;
      }
      if (!updated) {
        arr.push({
          name: 'Content-Type',
          value: currentCt
        });
      }

      var headers = this.headersToString(arr);
      this.set('value', headers);
      this.fire('content-type-changed', {
        'value': currentCt
      });
    },

    _tabChangedHandler: function(e) {
      var name = e.detail.item && e.detail.item.nodeName;
      if (!name) {
        return;
      }
      if (name === 'CODE-MIRROR') {
        e.detail.item.editor.refresh();
      }
    },

    _copyToClipboard: function() {
      // From https://github.com/google/material-design-lite/blob/master/docs/_assets/snippets.js
      this.$.copyContainer.innerText = this.value;
      var snipRange = document.createRange();
      snipRange.selectNodeContents(this.$.copyContainer);
      var selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(snipRange);
      var result = false;
      try {
        result = document.execCommand('copy');
        this.$.copyButton.icon = 'arc:done';
      } catch (err) {
        // Copy command is not available
        Polymer.Base._error(err);
        this.$.copyButton.icon = 'arc:error';
      }
      this.$.copyContainer.innerText = '';
      // Return to the copy button after a second.
      setTimeout(this._resetCopyButtonState.bind(this), 1000);
      selection.removeAllRanges();
      return result;
    },

    _resetCopyButtonState: function() {
      this.$.copyButton.icon = 'arc:content-copy';
    },
    /**
     * Handler tor the `request-headers-changed` event.
     * Updates the editor value to the value of the event detail object.
     */
    _headersChangedHandler: function(e) {
      if (e.target === this) {
        return;
      }
      if (e.defaultPrevented) {
        return;
      }
      var value = e.detail.value;
      this._cacncelChangeEvent = true;
      this.set('value', value);
      this._cacncelChangeEvent = false;
    },
    /**
     * Handler for the `request-header-changed` event.
     * It updates value for a single header.
     */
    _headerChangedHandler: function(e) {
      if (e.defaultPrevented) {
        return;
      }
      var name = e.detail.name;
      if (!name) {
        return console.warn('request-header-changed fired without the name.');
      }
      var value = e.detail.value;
      var arr = this.headersToJSON(this.value);
      var updated = false;
      for (var i = 0, len = arr.length; i < len; i++) {
        if (arr[i].name.toLowerCase() === name.toLowerCase()) {
          arr[i].value = value;
          updated = true;
          break;
        }
      }
      if (!updated) {
        arr.push({
          name: name,
          value: value
        });
      }
      var headers = this.headersToString(arr);
      this._cacncelChangeEvent = true;
      this.set('value', headers);
      this._cacncelChangeEvent = false;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /**
   * Use `Polymer.IronCheckedElementBehavior` to implement a custom element
   * that has a `checked` property, which can be used for validation if the
   * element is also `required`. Element instances implementing this behavior
   * will also be registered for use in an `iron-form` element.
   *
   * @demo demo/index.html
   * @polymerBehavior Polymer.IronCheckedElementBehavior
   */
  Polymer.IronCheckedElementBehaviorImpl = {

    properties: {
      /**
       * Fired when the checked state changes.
       *
       * @event iron-change
       */

      /**
       * Gets or sets the state, `true` is checked and `false` is unchecked.
       */
      checked: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        notify: true,
        observer: '_checkedChanged'
      },

      /**
       * If true, the button toggles the active state with each tap or press
       * of the spacebar.
       */
      toggles: {
        type: Boolean,
        value: true,
        reflectToAttribute: true
      },

      /* Overriden from Polymer.IronFormElementBehavior */
      value: {
        type: String,
        value: 'on',
        observer: '_valueChanged'
      }
    },

    observers: [
      '_requiredChanged(required)'
    ],

    created: function() {
      // Used by `iron-form` to handle the case that an element with this behavior
      // doesn't have a role of 'checkbox' or 'radio', but should still only be
      // included when the form is serialized if `this.checked === true`.
      this._hasIronCheckedElementBehavior = true;
    },

    /**
     * Returns false if the element is required and not checked, and true otherwise.
     * @param {*=} _value Ignored.
     * @return {boolean} true if `required` is false or if `checked` is true.
     */
    _getValidity: function(_value) {
      return this.disabled || !this.required || this.checked;
    },

    /**
     * Update the aria-required label when `required` is changed.
     */
    _requiredChanged: function() {
      if (this.required) {
        this.setAttribute('aria-required', 'true');
      } else {
        this.removeAttribute('aria-required');
      }
    },

    /**
     * Fire `iron-changed` when the checked state changes.
     */
    _checkedChanged: function() {
      this.active = this.checked;
      this.fire('iron-change');
    },

    /**
     * Reset value to 'on' if it is set to `undefined`.
     */
    _valueChanged: function() {
      if (this.value === undefined || this.value === null) {
        this.value = 'on';
      }
    }
  };

  /** @polymerBehavior Polymer.IronCheckedElementBehavior */
  Polymer.IronCheckedElementBehavior = [
    Polymer.IronFormElementBehavior,
    Polymer.IronValidatableBehavior,
    Polymer.IronCheckedElementBehaviorImpl
  ];

</script>
<script>
  /**
   * Use `Polymer.PaperCheckedElementBehavior` to implement a custom element
   * that has a `checked` property similar to `Polymer.IronCheckedElementBehavior`
   * and is compatible with having a ripple effect.
   * @polymerBehavior Polymer.PaperCheckedElementBehavior
   */
  Polymer.PaperCheckedElementBehaviorImpl = {
    /**
     * Synchronizes the element's checked state with its ripple effect.
     */
    _checkedChanged: function() {
      Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);
      if (this.hasRipple()) {
        if (this.checked) {
          this._ripple.setAttribute('checked', '');
        } else {
          this._ripple.removeAttribute('checked');
        }
      }
    },

    /**
     * Synchronizes the element's `active` and `checked` state.
     */
    _buttonStateChanged: function() {
      Polymer.PaperRippleBehavior._buttonStateChanged.call(this);
      if (this.disabled) {
        return;
      }
      if (this.isAttached) {
        this.checked = this.active;
      }
    }
  };

  /** @polymerBehavior Polymer.PaperCheckedElementBehavior */
  Polymer.PaperCheckedElementBehavior = [
    Polymer.PaperInkyFocusBehavior,
    Polymer.IronCheckedElementBehavior,
    Polymer.PaperCheckedElementBehaviorImpl
  ];
</script>
<!--
Material design: [Checkbox](https://www.google.com/design/spec/components/selection-controls.html#selection-controls-checkbox)

`paper-checkbox` is a button that can be either checked or unchecked.  User
can tap the checkbox to check or uncheck it.  Usually you use checkboxes
to allow user to select multiple options from a set.  If you have a single
ON/OFF option, avoid using a single checkbox and use `paper-toggle-button`
instead.

Example:

    <paper-checkbox>label</paper-checkbox>

    <paper-checkbox checked> label</paper-checkbox>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-checkbox-unchecked-background-color` | Checkbox background color when the input is not checked | `transparent`
`--paper-checkbox-unchecked-color` | Checkbox border color when the input is not checked | `--primary-text-color`
`--paper-checkbox-unchecked-ink-color` | Selected/focus ripple color when the input is not checked | `--primary-text-color`
`--paper-checkbox-checked-color` | Checkbox color when the input is checked | `--primary-color`
`--paper-checkbox-checked-ink-color` | Selected/focus ripple color when the input is checked | `--primary-color`
`--paper-checkbox-checkmark-color` | Checkmark color | `white`
`--paper-checkbox-label-color` | Label color | `--primary-text-color`
`--paper-checkbox-label-checked-color` | Label color when the input is checked | `--paper-checkbox-label-color`
`--paper-checkbox-label-spacing` | Spacing between the label and the checkbox | `8px`
`--paper-checkbox-label` | Mixin applied to the label | `{}`
`--paper-checkbox-label-checked` | Mixin applied to the label when the input is checked | `{}`
`--paper-checkbox-error-color` | Checkbox color when invalid | `--error-color`
`--paper-checkbox-size` | Size of the checkbox | `18px`
`--paper-checkbox-ink-size` | Size of the ripple | `48px`
`--paper-checkbox-margin` | Margin around the checkbox container | `initial`
`--paper-checkbox-vertical-align` | Vertical alignment of the checkbox container | `middle`

This element applies the mixin `--paper-font-common-base` but does not import `paper-styles/typography.html`.
In order to apply the `Roboto` font to this element, make sure you've imported `paper-styles/typography.html`.

@demo demo/index.html
-->

<dom-module id="paper-checkbox" assetpath="bower_components/paper-checkbox/">
  <template strip-whitespace="">
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        cursor: pointer;
        --calculated-paper-checkbox-size: var(--paper-checkbox-size, 18px);
        /* -1px is a sentinel for the default and is replaced in `attached`. */
        --calculated-paper-checkbox-ink-size: var(--paper-checkbox-ink-size, -1px);
        @apply(--paper-font-common-base);
        line-height: 0;
        -webkit-tap-highlight-color: transparent;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:focus) {
        outline: none;
      }

      .hidden {
        display: none;
      }

      #checkboxContainer {
        display: inline-block;
        position: relative;
        width: var(--calculated-paper-checkbox-size);
        height: var(--calculated-paper-checkbox-size);
        min-width: var(--calculated-paper-checkbox-size);
        margin: var(--paper-checkbox-margin, initial);
        vertical-align: var(--paper-checkbox-vertical-align, middle);
        background-color: var(--paper-checkbox-unchecked-background-color, transparent);
      }

      #ink {
        position: absolute;

        /* Center the ripple in the checkbox by negative offsetting it by
         * (inkWidth - rippleWidth) / 2 */
        top: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        width: var(--calculated-paper-checkbox-ink-size);
        height: var(--calculated-paper-checkbox-ink-size);
        color: var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
      }

      :host-context([dir="rtl"]) #ink {
        right: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: auto;
      }

      #ink[checked] {
        color: var(--paper-checkbox-checked-ink-color, var(--primary-color));
      }

      #checkbox {
        position: relative;
        box-sizing: border-box;
        height: 100%;
        border: solid 2px;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        border-radius: 2px;
        pointer-events: none;
        -webkit-transition: background-color 140ms, border-color 140ms;
        transition: background-color 140ms, border-color 140ms;
      }

      /* checkbox checked animations */
      #checkbox.checked #checkmark {
        -webkit-animation: checkmark-expand 140ms ease-out forwards;
        animation: checkmark-expand 140ms ease-out forwards;
      }

      @-webkit-keyframes checkmark-expand {
        0% {
          -webkit-transform: scale(0, 0) rotate(45deg);
        }
        100% {
          -webkit-transform: scale(1, 1) rotate(45deg);
        }
      }

      @keyframes checkmark-expand {
        0% {
          transform: scale(0, 0) rotate(45deg);
        }
        100% {
          transform: scale(1, 1) rotate(45deg);
        }
      }

      #checkbox.checked {
        background-color: var(--paper-checkbox-checked-color, var(--primary-color));
        border-color: var(--paper-checkbox-checked-color, var(--primary-color));
      }

      #checkmark {
        position: absolute;
        width: 36%;
        height: 70%;
        border-style: solid;
        border-top: none;
        border-left: none;
        border-right-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-bottom-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-color: var(--paper-checkbox-checkmark-color, white);
        -webkit-transform-origin: 97% 86%;
        transform-origin: 97% 86%;
        box-sizing: content-box; /* protect against page-level box-sizing */
      }

      :host-context([dir="rtl"]) #checkmark {
        -webkit-transform-origin: 50% 14%;
        transform-origin: 50% 14%;
      }

      /* label */
      #checkboxLabel {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-checkbox-label-spacing, 8px);
        white-space: normal;
        line-height: normal;
        color: var(--paper-checkbox-label-color, var(--primary-text-color));
        @apply(--paper-checkbox-label);
      }

      :host([checked]) #checkboxLabel {
        color: var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));
        @apply(--paper-checkbox-label-checked);
      }

      :host-context([dir="rtl"]) #checkboxLabel {
        padding-right: var(--paper-checkbox-label-spacing, 8px);
        padding-left: 0;
      }

      #checkboxLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #checkbox {
        opacity: 0.5;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
      }

      :host([disabled][checked]) #checkbox {
        background-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #checkboxLabel  {
        opacity: 0.65;
      }

      /* invalid state */
      #checkbox.invalid:not(.checked) {
        border-color: var(--paper-checkbox-error-color, var(--error-color));
      }
    </style>

    <div id="checkboxContainer">
      <div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]">
        <div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div>
      </div>
    </div>

    <div id="checkboxLabel"><content></content></div>
  </template>

  <script>
    Polymer({
      is: 'paper-checkbox',

      behaviors: [
        Polymer.PaperCheckedElementBehavior
      ],

      hostAttributes: {
        role: 'checkbox',
        'aria-checked': false,
        tabindex: 0
      },

      properties: {
        /**
         * Fired when the checked state changes due to user interaction.
         *
         * @event change
         */

        /**
         * Fired when the checked state changes.
         *
         * @event iron-change
         */
        ariaActiveAttribute: {
          type: String,
          value: 'aria-checked'
        }
      },

      attached: function() {
        var inkSize = this.getComputedStyleValue('--calculated-paper-checkbox-ink-size').trim();
        // If unset, compute and set the default `--paper-checkbox-ink-size`.
        if (inkSize === '-1px') {
          var checkboxSize = parseFloat(this.getComputedStyleValue('--calculated-paper-checkbox-size').trim());
          var defaultInkSize = Math.floor((8 / 3) * checkboxSize);

          // The checkbox and ripple need to have the same parity so that their
          // centers align.
          if (defaultInkSize % 2 !== checkboxSize % 2) {
            defaultInkSize++;
          }

          this.customStyle['--paper-checkbox-ink-size'] = defaultInkSize + 'px';
          this.updateStyles();
        }
      },

      _computeCheckboxClass: function(checked, invalid) {
        var className = '';
        if (checked) {
          className += 'checked ';
        }
        if (invalid) {
          className += 'invalid';
        }
        return className;
      },

      _computeCheckmarkClass: function(checked) {
        return checked ? '' : 'hidden';
      },

      // create ripple inside the checkboxContainer
      _createRipple: function() {
        this._rippleContainer = this.$.checkboxContainer;
        return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this);
      }

    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
A form element required to provide a value for the query / URI paramter
depending on model type.

It will render text or numeric inputs or a dropdown for enum values.
Also, if the item is type of array it will render more than one input
with ability to add / remove controls.
-->
<dom-module id="query-parameter-input" assetpath="bower_components/raml-request-parameters-editor/">
  <template strip-whitespace="">
    <style>
    :host([required]) paper-input {
      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-required-input-label-color, rgba(0, 0, 0, 0.72));
      }
    }

    :host([is-array]) {
      padding-left: 8px;
      border-left: 1px rgba(0, 0, 0, 0.14) solid;
    }

    .help-icon {
      color: var(--accent-color, rgba(0, 0, 0, 0.74));
      transition: opacity 0.2s ease-in-out;
      opacity: 0.54;
    }

    .help-icon:hover {
      opacity: 0.74;
    }

    .array-item {
      @apply(--layout-horizontal);
    }

    .array-item paper-input{
      @apply(--layout-flex);
    }

    paper-dropdown-menu {
      width: 100%;
    }

    paper-button iron-icon {
      margin-right: 12px;
    }

    label {
      @apply(--paper-font-caption);
    }
    </style>
    <template is="dom-if" if="[[isEnum]]">
      <paper-dropdown-menu label="[[model.inputLabel]]" name="[[name]]" required="[[model.required]]">
        <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{value}}">
          <template is="dom-repeat" items="[[model.enum]]">
            <paper-item data-value$="[[item]]">[[item]]</paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
    </template>

    <template is="dom-if" if="[[isInput]]">
      <paper-input label="[[model.inputLabel]]" value="{{value}}" required="[[model.required]]" pattern="[[model.pattern]]" name="[[name]]" auto-validate="" type="[[model.inputType]]" min="[[model.minimum]]" max="[[model.maximum]]" maxlength="[[model.maxLength]]" always-float-label="[[model.inputFloatLabel]]" placeholder="[[model.inputPlaceholder]]"></paper-input>
    </template>

    <template is="dom-if" if="[[isArray]]">
      <label>[[model.inputLabel]]</label>
      <template is="dom-repeat" items="[[arrayValue]]">
        <div class="array-item">
          <paper-input label="Parameter value" value="{{item.value}}" required="[[model.required]]" pattern="[[model.pattern]]" name="[[name]]" auto-validate="" type="[[model.inputType]]" min="[[model.minimum]]" max="[[model.maximum]]" maxlength="[[model.maxLength]]" no-label-float="" on-input="_arrayValueChanged">
          </paper-input>
          <template is="dom-if" if="[[index]]">
            <span>
              <paper-icon-button class="help-icon" suffix="" icon="arc:remove-circle-outline" on-tap="_removeArrayValue"></paper-icon-button>
              <paper-tooltip position="left" offset="1" margin-top="1" animation-delay="300">Remove array value</paper-tooltip>
            </span>
          </template>
        </div>
      </template>
      <div class="add-action">
        <paper-button on-tap="_addArrayValue"><iron-icon class="help-icon" icon="arc:add-circle-outline"></iron-icon>Add array value</paper-button>
      </div>
    </template>
  </template>
  <script>
  Polymer({
    is: 'query-parameter-input',

    behaviors: [Polymer.IronFormElementBehavior],

    properties: {
      model: {
        type: Object,
        observer: '_modelChanged'
      },
      // Computed value, True if current item is a dropdown with values.
      isEnum: Boolean,
      // Computed value, True if current item is an regular input
      isInput: Boolean,
      // Computed value, True if current item is an array object
      isArray: {
        type: Boolean,
        reflectToAttribute: true
      },
      arrayValue: {
        type: Array,
        value: function() {
          return [];
        }
      }
    },

    observers: [
      '_isArrayChanged(isArray, value)'
    ],

    resetStates: function() {
      this.isEnum = undefined;
      this.isInput = undefined;
      this.isArray = undefined;
    },
    // Sets the template depending on model configuration
    _modelChanged: function(model) {
      this.resetStates();
      if (!model) {
        return;
      }
      if (model.isEnum) {
        this.isEnum = true;
        return;
      }
      if (model.isArray) {
        this.isArray = true;
        return;
      }
      this.isInput = true;
    },
    // Sets array values if needed
    _isArrayChanged: function(isArray) {
      if (this.__internalChange) {
        return;
      }
      var v = this.value;
      if (!v || !isArray) {
        this.arrayValue = [];
        return;
      }
      this.arrayValue = this._itemsForArray(v);
    },
    /**
     * The `dom-repeat` requires an object to properly support changes.
     * In order to do this simple values has to be transformed into objects.
     *
     * @param {Array<String>} value An array of values.
     */
    _itemsForArray: function(value) {
      var result = [];
      if (value instanceof Array) {
        result = value.map(function(item) {
          return {
            value: item
          };
        });
      } else {
        result.push({
          value: value
        });
      }
      return result;
    },
    // Handles array value change and sets the `value` property.
    _arrayValueChanged: function() {
      var arr = this.arrayValue;
      if (arr) {
        arr = arr.map(function(item) {
          return item.value;
        });
      }
      this.__internalChange = true;
      this.set('value', arr);
      this.__internalChange = false;
    },
    // Adds new element to the array value.
    _addArrayValue: function() {
      this.push('arrayValue', {value: ''});
    },
    // Removes item from array value.
    _removeArrayValue: function(e) {
      var repeater = this.$$('template[is="dom-repeat"]');
      var index = repeater.indexForElement(e.target);
      this.splice('arrayValue', index, 1);
      this._arrayValueChanged();
    }
  });
  </script>
</dom-module>
<!--
The `raml-request-parameters-form` element is responsible for displaying the form od URI / query
parameters. It is meant to work with the `raml-request-parameters-editor`. See its docs to
learn how to use this element.

### Styling
`<raml-request-parameters-form>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-request-parameters-form` | Mixin applied to the element | `{}`
`--raml-request-parameters-editor-input-label-color` | Color of the paper input's labels | `rgba(0, 0, 0, 0.48)`
`--inline-documentation-color` | Color of the documentation string below the input field. Note that it will appy also `marked-element` styles to this element | `rgba(0, 0, 0, 0.87)`
`--raml-request-parameters-editor-row` | Mixin applied to each row of the form | `{}`
`--raml-request-parameters-form-optional-toggle-button` | Mixin applied to a "toggle optional parameters" button | `{}`

@group RAML Elements
@element raml-request-parameters-form
@demo demo/index.html
-->
<dom-module id="raml-request-parameters-form" assetpath="bower_components/raml-request-parameters-editor/">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style>
     :host {
      display: block;
      @apply(--raml-request-parameters-form);

      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-input-label-color, rgba(0, 0, 0, 0.48));
      }
    }

    .param-value {
      @apply(--raml-request-parameters-editor-row);
    }

    .param-value.optional {
      display: none;
    }

    .param-value.required {
    }

    .param-value.optional.with-optional {
      display: block;
    }

    .param-value .input {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
    }

    .docs {
      @apply(--arc-font-common-base);
      font-size: 13px !important;
      font-weight: 200;
      line-height: 24px;
      color: var(--inline-documentation-color, rgba(0, 0, 0, 0.87));
    }

    .markdown-html * {
      font-size: 13px !important;
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .help-icon {
      color: var(--accent-color, rgba(0, 0, 0, 0.74));
      transition: opacity 0.2s ease-in-out;
      opacity: 0.54;
    }

    .help-icon:hover {
      opacity: 0.74;
    }

    .value-input {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--layout-flex);
    }

    .optional-toggle-button {
      font-size: 13px;
      @apply(--raml-request-parameters-form-optional-toggle-button);
    }

    query-parameter-input {
      @apply(--layout-flex);
      margin-bottom: 8px;
    }
    </style>
    <form is="iron-form" id="form">
      <template is="dom-repeat" items="{{parameters}}" items-repeater="">
        <div class$="[[_computeRowClass(item, optionalOpened)]]">
          <div class="value-input">
            <query-parameter-input model="[[item]]" name="[[item.name]]" value="{{item.value}}" required$="[[item.required]]" on-value-changed="_parameterValueChanged"></query-parameter-input>
            <span>
              <paper-icon-button class="help-icon" suffix="" icon="arc:help" hidden$="[[!item.hasDescription]]" on-tap="_openDocs"></paper-icon-button>
              <paper-tooltip position="left" offset="1" margin-top="1" animation-delay="300">Display documentation</paper-tooltip>
            </span>
          </div>
          <template is="dom-if" if="[[item.hasDescription]]">
            <div class="docs">
              <iron-collapse>
                <marked-element markdown="[[item.description]]">
                  <div class="markdown-html markdown-body"></div>
                </marked-element>
              </iron-collapse>
            </div>
          </template>
        </div>
      </template>
    </form>
  </template>
  <script>
  Polymer({
    is: 'raml-request-parameters-form',

    behaviors: [Polymer.IronValidatableBehavior],

    properties: {
      // A list of parameters to display. It may be URI or query parameters array.
      parameters: Array,
      /**
       * Set to true to show optional parameters.
       */
      optionalOpened: {
        type: Boolean,
        value: false
      },
      /**
       * The form can display query or URI parameters. When anything change in the form
       * it will send a corresponding custom event (`query-parameter-changed` or
       * `uri-parameter-changed`). To make this happen set the value of this property to
       * either `query` or `uri`.
       */
      formType: String
    },

    // Overidden from Polymer.IronValidatableBehavior. Will set the `invalid`
    // attribute automatically, which should be used for styling.
    _getValidity: function() {
      return this.$.form.validate();
    },
    // Link to the form's serialize function.
    serialize: function() {
      return this.$.form.serialize();
    },
    // Opens the documentation for item.
    _openDocs: function(e) {
      var template = this.$.form.querySelector('[items-repeater]');
      var model = template.modelForElement(e.target);
      var collapse = this.$.form.querySelector('.param-value:nth-child(' + (model.index + 1) +
        ') iron-collapse');
      if (!collapse) {
        return;
      }
      collapse.opened = !collapse.opened;
    },

    _computeRowClass: function(item, optionalOpened) {
      var clazz = 'param-value';
      if (item.required) {
        clazz += ' required';
      } else {
        clazz += ' optional';
      }
      if (optionalOpened) {
        clazz += ' with-optional';
      }
      return clazz;
    },
    /**
     * Toggles visibility of optional parameters.
     */
    toggleOptionalParams: function() {
      this.optionalOpened = !this.optionalOpened;
    },

    /**
     * When query parameter value changes then it will file the `query-parameter-changed` custom
     * event to inform other observers about this event.
     */
    _parameterValueChanged: function(e) {
      var formType = this.formType;
      if (!formType || ['query', 'uri'].indexOf(formType) === -1) {
        return;
      }
      var item = e.model.get('item');
      var name = item.name || item.key;
      var value = item.value;
      
      this.fire(formType + '-parameter-changed', {
        name: name,
        value: value
      });
    }
  });
  </script>
</dom-module>
<!--
`<raml-request-parameters-editor>`

An element responsible for displaying a form of query / uri parameters. It produces a request URL
by altering the one provided in the `url` property. The `url` property has to be a APIs base URL
and the endpoint's relative URL. In short absoluteUri.

The element is a form element and it will validate if all parameters that are marked as required
are filled. You can call the `validate()` function manually to check form validity.

This element handles logic for URL and params change. For view is responsible the
`raml-request-parameters-form` element.

### Example
```
<raml-request-parameters-editor
  query-parameters="[[method.queryParameters]]"
  uri-parameters="[[method.allUriParameters]]"
  url="[[method.absoluteUri]]"
  value="{{url}}"></raml-request-parameters-editor>
```

Note: the `allUriParameters` property used in the example is not a standard RAML's JS parser
property. It has to be computed value of all URI parameters from all traits and security schemes.
The same is for the `absoluteUri` which will be produced by `raml-js-parser`.

### Validation
This element implements `Polymer.IronValidatableBehavior`. You can call `validate()` function
to check if the form is valid. An attribute `invalid` will be set if the form is invalid. It can be
used for styling.

URI parameters are always required sice they are part of the main URL.
Query parameters validation criteria are set according to the spec.

### Styling
`<raml-request-parameters-editor>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-request-parameters-editor` | Mixin applied to the element | `{}`
`--raml-request-parameters-editor-subheader` | Mixin applied to section's subheader | `--paper-font-subhead`
`--raml-request-parameters-editor-input-label-color` | Color of the paper input's labels | `rgba(0, 0, 0, 0.48)`
`--inline-documentation-color` | Color of the documentation string below the input field. Note that it will appy also `marked-element` styles to this element | `rgba(0, 0, 0, 0.87)`
`--raml-request-parameters-editor-row` | Mixin applied to each row of the form | `{}`
`--raml-request-parameters-editor-no-params` | Mixin applied to the empty info section | `{}`
`--raml-request-parameters-editor-no-params-message` | Mixin applied to the empty info paragraph (the message) | `{}`

Also, use variables and misins defined for `paper-input` to style inputs, and
`paper-dropdown-menu`, `paper-listbox`, `paper-item` to style dropdown menus.

@group RAML Elements
@element raml-request-parameters-editor
@demo demo/index.html
-->
<dom-module id="raml-request-parameters-editor" assetpath="bower_components/raml-request-parameters-editor/">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style>
     :host {
      display: block;
      @apply(--raml-request-parameters-editor);
    }

    h3 {
      @apply(--raml-request-parameters-editor-subheader);
    }

    .params-title {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .params-title h3 {
      display: inline-block;
      margin-right: 12px;
    }

    .params-title paper-checkbox {
      --paper-checkbox-label-color: rgba(0, 0, 0, 0.54);
    }

    .empty-message {
      @apply(--raml-request-parameters-editor-no-params);
    }

    .empty-message p {
      @apply(--raml-request-parameters-editor-no-params-message);
    }
    </style>
    <section hidden$="[[hasParameters]]" class="empty-message">
      <p>This API doesn't require to declare query or URI parameters.</p>
    </section>
    <section hidden$="[[!hasUriParameters]]">
      <h3>URI parameters</h3>
      <raml-request-parameters-form id="uriParametersForm" form-type="uri" parameters="{{_renderUriParameters}}"></raml-request-parameters-form>
    </section>
    <section hidden$="[[!hasQueryParameters]]">
      <div class="params-title">
        <h3>Query parameters</h3>
        <paper-checkbox hidden$="[[!hasOptionalQueryParameters]]" checked="{{optionalQueryParamsOpened}}">Show optional parameters</paper-checkbox>
      </div>
      <raml-request-parameters-form id="queryParametersForm" form-type="query" optional-opened="[[optionalQueryParamsOpened]]" parameters="{{_renderQueryParameters}}"></raml-request-parameters-form>
    </section>
  </template>
  <script>
  (function() {
    var NUMBER_INPUT_TYPES = ['number', 'integer', 'float'];

    Polymer({
      is: 'raml-request-parameters-editor',

      behaviors: [Polymer.IronValidatableBehavior],
      /**
       * Fired when the editor changed it's `value` which is the URL.
       *
       * @event url-value-changed
       * @param {String} value The URL.
       */

      properties: {
        // List of RAML definitoin of query parameters
        queryParameters: Array,
        /**
         * Copy of the `queryParameters` list transformed to be used with the editor.
         * It will have additional propery `value` without affecting original array
         * (changes to the `queryParameters` list are propagated outside this element).
         */
        _renderQueryParameters: {
          type: Array,
          computed: '_computeParameters(queryParameters.*)'
        },
        // Computed value if the `queryParameters` are set.
        hasQueryParameters: {
          type: Boolean,
          value: false,
          computed: '_computeHasParameters(_renderQueryParameters)'
        },
        // List of all URI parameters that can be applied to selected method.
        uriParameters: Array,
        /**
         * Copy of the `uriParameters` list transformed to be used with the editor.
         * It will have additional propery `value` without affecting original array
         * (changes to the `uriParameters` list are propagated outside this element).
         */
        _renderUriParameters: {
          type: Array,
          computed: '_computeParameters(uriParameters.*)'
        },
        // Computed value if the `uriParameters` are set.
        hasUriParameters: {
          type: Boolean,
          value: false,
          computed: '_computeHasParameters(uriParameters)'
        },
        // Computed value, true if has query or URI parameters.
        hasParameters: {
          type: Boolean,
          computed: '_computeParametersSet(hasUriParameters, hasQueryParameters)'
        },
        /**
         * The absolute URL for the method.
         * Note, that value won't be changed and is immutable in this element.
         * The parsed URL value can be read from the `value` property
         */
        url: String,
        // List of base parameters in proper order applied to the `url`
        urlParams: {
          type: Array,
          computed: '_computeUrlParams(url)'
        },
        // A computed regexp for the `url` value to search for the URI parameters.
        urlSearchRegexp: {
          type: String,
          computed: '_computeUrlRegexp(url)'
        },

        // An URL value produced by this editor. It has all parameters applied to it.
        value: {
          type: String,
          notify: true
        },

        /**
         * Computed value. True if current query parameters set has any
         * optional value.
         */
        hasOptionalQueryParameters: {
          type: Boolean,
          value: false,
          computed: '_computeHasOptionalParameters(_renderQueryParameters.*)',
          notify: true
        },
        // If true the optional query parameters will be displayed in the table.
        optionalQueryParamsOpened: Boolean
      },

      observers: [
        '_valueChanged(value)'
      ],

      attached: function() {
        this.listen(window, 'url-value-changed', '_extValueChangedHandler');
        this.listen(window, 'query-parameter-changed', '_queryParameterChangedHandler');
        this.listen(window, 'uri-parameter-changed', '_uriParameterChangedHandler');
      },

      detached: function() {
        this.unlisten(window, 'url-value-changed', '_extValueChangedHandler');
        this.unlisten(window, 'query-parameter-changed', '_queryParameterChangedHandler');
        this.unlisten(window, 'uri-parameter-changed', '_uriParameterChangedHandler');
      },

      // Computes a copy of input parameters array
      _computeParameters: function(record) {
        var array = record.base;
        if (!array || !array.length) {
          return [];
        }
        return this._transformQueryParameters(array);
      },
      /**
       * Transforms query parameters that are received from the RAML parser into
       * internal data structure.
       */
      _transformQueryParameters: function(array) {
        var items = [];
        for (var i = 0, len = array.length; i < len; i++) {
          var item = Object.assign({}, array[i]);
          if (item.type === 'array' && item.required) {
            var example = null;
            if (item.examples) {
              example = item.examples[0];
            } else if (item.example) {
              example = item.example;
            }
            if (example) {
              example = this.__parseArrayExample(example);
              item.examples = undefined;
              item.example = example;
              // if (example instanceof Array) {
              //   for (var j = 0, lenEx = example.length; j < lenEx; j++) {
              //     var _res = Object.assign({}, item, {
              //       example: example[j]
              //     });
              //     items.push(this._createRenderObject(_res));
              //   }
              //   continue;
              // }
            }
          }
          items.push(this._createRenderObject(item));
        }
        return items;
      },
      /**
       * Creates a render item (with internal data mode) out of RAML definition.
       *
       * In complex objects value of properties are passed by reference so the function do not return
       * the same object.
       *
       * @param {Object} item A query or URL parameter value as an output of the RAML parser.
       */
      _createRenderObject: function(item) {
        item.isEnum = !!(item.enum && item.enum.length);
        item.isArray = item.type === 'array';
        item.hasDescription = !!item.description;
        item.inputLabel = item.displayName || item.name || 'Value';
        if (item.required) {
          item.inputLabel += '*';
        }
        item.inputType = this._computeItemInputType(item);

        if (item.examples && item.examples.length && item.examples[0]) {
          item.inputPlaceholder = 'Example: ' + item.examples[0];
        } else if (item.example && typeof item.example === 'string') {
          item.inputPlaceholder = 'Example: ' + item.example;
        }
        if (item.inputPlaceholder) {
          item.inputFloatLabel = true;
        }

        if (item.required && typeof item.default !== 'undefined' && !item.value) {
          item.value = item.isArray ? this.__parseArrayExample(item.default) :
            item.default;
        }
        if (typeof item.value === 'undefined' && item.required) {
          if (item.examples) {
            item.value = item.examples[0];
          } else if (item.example) {
            item.value = item.example;
          }
          if (item.value && item.value.indexOf && item.value.indexOf(item.name + '=') === 0) {
            item.value = item.value.substr(item.name.length + 1);
          }
          if (typeof item.value === 'undefined' && item.isEnum) {
            item.value = item.enum[0];
          }
        }
        if (item.value && typeof item.value === 'string') {
          item.value = decodeURIComponent(item.value.replace(/\+/g, ' '));
        }

        if (item.value && item.isArray && typeof item.value === 'string') {
          item.value = [item.value];
        }

        if (item.isArray && !item.value) {
          item.value = [''];
        }
        return item;
      },
      __parseArrayExample: function(example) {
        try {
          var arr = JSON.parse(example);
          if (arr instanceof Array) {
            return arr;
          }
        } catch (e) {}
        return example;
      },
      /**
       * Computes rendered item input field type based on RAML definition.
       *
       * It will be either numeric or text. Type will be determined from
       * item's type or, in case of array, item's items property.
       *
       * @return {String} Input field type.
       */
      _computeItemInputType: function(item) {
        if (item.type === 'array') {
          if (typeof item.items === 'string') {
            return this.__computeInputType(item.items);
          }
          return this.__computeInputType(item.items.type);
        }
        return this.__computeInputType(item.type);
      },

      __computeInputType: function(type) {
        if (type && NUMBER_INPUT_TYPES.indexOf(type) !== -1) {
          return 'number';
        }
        return 'text';
      },

      // Computes if passed argument is an array and has values.
      _computeHasParameters: function(params) {
        return !!(params && params instanceof Array && params.length);
      },
      // Computes if any parameters are available.
      _computeParametersSet: function(hasUriParameters, hasQueryParameters) {
        return hasUriParameters || hasQueryParameters;
      },
      /**
       * A function to be called when any value change in forms.
       */
      _processInput: function() {
        if (!this.url) {
          this._internalValueChange = true;
          this.set('value', undefined);
          this._internalValueChange = false;
          return;
        }

        var url = this.url;
        if (this.hasUriParameters) {
          url = this._applyUriParams(url);
        }
        if (this.hasQueryParameters) {
          url = this._applyQueryParams(url);
        }

        this._internalValueChange = true;
        this.set('value', url);
        this._internalValueChange = false;
      },
      /**
       * Applies URI parameters to the URL.
       *
       * @param {String} url An URL to apply the params to
       * @return {String} The URL.
       */
      _applyUriParams: function(url) {
        var uriParams = this.$.uriParametersForm.serialize();
        for (var paramName in uriParams) {
          var value = uriParams[paramName];
          if (!value) {
            continue;
          }
          value = String(value);
          if (value.trim() === '') {
            continue;
          }
          value = this._wwwFormUrlEncodePiece(value);
          var re = new RegExp('{' + paramName + '}');
          url = url.replace(re, value);
        }
        return url;
      },
      /**
       * Applies query parameters to the URL.
       * Query parameters that are not required by the API spec and don't have a value
       * will be removed from the URL. The once that are required and don't have a value will be
       * set to the URL but with empty value.
       *
       * @param {String} url An URL to apply the params to
       * @return {String} The URL.
       */
      _applyQueryParams: function(url) {
        var params = this.$.queryParametersForm.serialize();
        var items = [];

        for (var paramName in params) {
          var value = params[paramName];
          if (!value && value !== 0 && value !== null && value !== false) {
            continue;
          }
          var isArray = false;
          if (value instanceof Array) {
            isArray = true;
            if (!value.length || (value.length === 1 && !value[0])) {
              continue;
            }
          } else {
            value = String(value);
            if (value.trim() === '') {
              delete params[paramName];
              continue;
            }
          }
          if (isArray) {
            for (var i = 0, len = value.length; i < len; i++) {
              if (value || value === 0 || value === false) {
                items.push({
                  name: paramName,
                  value: value[i]
                });
              }
            }
          } else {
            items.push({
              name: paramName,
              value: value
            });
          }
        }
        params = this._wwwFormUrlEncode(items);
        if (!params) {
          return url;
        }
        if (url.indexOf('?') !== -1) {
          url += '&' + params;
        } else {
          url += '?' + params;
        }
        return url;
      },
      /**
       * @param {Array} object The list of objects to encode as
       * x-www-form-urlencoded string. Each entry should have `name` and `value`
       * properties.
       * @return {string} .
       */
      _wwwFormUrlEncode: function(object) {
        if (!object || !object.length) {
          return '';
        }

        var pieces = object.map(function(item) {
          return this._wwwFormUrlEncodePiece(item.name) + '=' +
            this._wwwFormUrlEncodePiece(item.value);
        }, this);
        return pieces.join('&');
      },

      /**
       * @param {*} str A key or value to encode as x-www-form-urlencoded.
       * @return {string} .
       */
      _wwwFormUrlEncodePiece: function(str) {
        // Spec says to normalize newlines to \r\n and replace %20 spaces with +.
        // jQuery does this as well, so this is likely to be widely compatible.
        if (!str) {
          return '';
        }
        return encodeURIComponent(str.toString().replace(/\r?\n/g, '\r\n'))
          .replace(/%20/g, '+');
      },
      /**
       * A handler for attribute change function for the `url`.
       * It will parse input value and set the parameters values.
       */
      _valueChanged: function(value) {
        if (this._internalValueChange) {
          this.fire('url-value-changed', {
            value: value
          });
          return;
        }
        if (!value) {
          return;
        }
        var url = this.url;
        if (!url) {
          return;
        }
        var matches;

        if (this.urlParams && this.urlSearchRegexp) {
          matches = value.match(this.urlSearchRegexp);
          if (matches) {
            matches.shift();
            this._applyUriValues(matches, this.urlParams);
          }
        }
        matches = value.match(/[^&?]*?=[^&?]*/g);
        if (matches) {
          var params = {};
          matches.forEach(function(item) {
            var parts = item.split('=');
            var name = parts[0];
            if (name in params) {
              if (!(params[name] instanceof Array)) {
                params[name] = [params[name]];
              }
              params[name].push(parts[1]);
            } else {
              params[name] = parts[1];
            }
          });
          this._applyQueryParamsValues(params);
        }
      },
      /**
       * Creates a regular expression from the `url` to match the parameters in the `value` url.
       *
       * @param {String} url Enpoint's absolute URL with possibly parameters.
       * @return {String} A RegExp that can be used to search for parameters values.
       */
      _computeUrlRegexp: function(url) {
        if (!url) {
          return null;
        }
        url = url.replace(/(\.|\/)/g, '\\$1');
        url = url.replace(/{\w+}/g, '(\\w+)');
        return new RegExp(url);
      },
      /**
       * Computes ordered list of parameters applied to the `url`.
       * For example the URL: `http://{environment}.domain.com/{apiVersion}/`
       * will be mapped to
       * ```
       * [
       *   "environment",
       *   "apiVersion"
       * ]
       * ```
       *
       * @param {String} url The URL to test for the parameters.
       * @return {Array|null} An ordered list of parameters or null if none found.
       */
      _computeUrlParams: function(url) {
        if (!url) {
          return null;
        }
        var paramsNames = url.match(/\{\w+\}/g);
        if (paramsNames) {
          paramsNames = paramsNames.map(function(item) {
            return item.substr(1, item.length - 2);
          });
        }
        return paramsNames;
      },

      /**
       * Applies values from the `values` array to the uri parametes which names are in the `names`
       * array.
       * Both lists are ordered list of paramerters.
       *
       * @param {Array<String>} values Values for the parameters
       * @param {Array<String>} names List of variables names (uri parameters).
       */
      _applyUriValues: function(values, names) {
        var up = this._renderUriParameters;
        var len = up.length;
        this._internalValueChange = true;
        names.forEach(function(item, index) {
          for (var i = 0; i < len; i++) {
            if (up[i].name === item) {
              this.set(['_renderUriParameters', i, 'value'], values[index]);
              break;
            }
          }
        }, this);
        this._internalValueChange = false;
      },
      /**
       * Applies query parameters values to the render list.
       *
       * @param {Object} map A map where keys are names of the parameters in the `queryParametes`
       * list
       */
      _applyQueryParamsValues: function(map) {
        var qp = this._renderQueryParameters;
        var len = qp.length;
        this._internalValueChange = true;
        for (var _key in map) {
          for (var i = 0; i < len; i++) {
            if (qp[i].name === _key) {
              this.set(['_renderQueryParameters', i, 'value'], map[_key]);
              break;
            }
          }
        }
        this._internalValueChange = false;
      },
      /**
       * A handler for the `url-value-changed` event.
       * If this element is not the source of the event then it will update the `value` property.
       * It's to be used besides the Polymer's data binding system.
       */
      _extValueChangedHandler: function(e) {
        if (e.target === this) {
          return;
        }
        this.set('value', e.detail.value);
      },

      // Overidden from Polymer.IronValidatableBehavior. Will set the `invalid`
      // attribute automatically, which should be used for styling.
      _getValidity: function() {
        var validUri = true;
        var validUrl = true;
        if (this.hasUriParameters) {
          validUri = this.$.uriParametersForm.validate();
        }
        if (this.hasQueryParameters) {
          validUrl = this.$.queryParametersForm.validate();
        }

        return validUri && validUrl;
      },

      /**
       * Computes if any of the query parameters are required.
       */
      _computeHasOptionalParameters: function(record) {
        if (!record || !record.base || !record.base.length) {
          return false;
        }
        var list = record.base;
        for (var i = 0, len = list.length; i < len; i++) {
          if (!list[i].required) {
            return true;
          }
        }
        return false;
      },

      /**
       * Handler for the `query-parameter-changed` event.
       * It updates value for a single query parameter.
       */
      _queryParameterChangedHandler: function(e) {
        if (this._isChildEvent(e)) {
          this._processInput();
          return;
        }
        this._updateEventValue('_renderQueryParameters', e);
      },
      /**
       * Handler for the `uri-parameter-changed` event.
       * It updates value for a single query parameter.
       */
      _uriParameterChangedHandler: function(e) {
        if (this._isChildEvent(e)) {
          this._processInput();
          return;
        }
        this._updateEventValue('_renderUriParameters', e);
      },
      // Checks if the event comes from any of the children.
      _isChildEvent: function(e) {
        e = Polymer.dom(e);
        var path = e.path;
        for (var i = 0, len = path.length; i < len; i++) {
          if (path[i] === this) {
            return true;
          }
        }
        return false;
      },

      /**
       * Update array value for given type (`_renderQueryParameters` or
       * `_renderUriParameters`) for given event.
       */
      _updateEventValue: function(target, e) {
        if (e.target === this) {
          return;
        }
        if (e.defaultPrevented) {
          return;
        }
        var name = e.detail.name;
        if (!name) {
          return;
        }
        var parameters = this[target];
        if (!parameters || !parameters.length) {
          return;
        }
        for (var i = 0, len = parameters.length; i < len; i++) {
          var paramName = parameters[i].name || parameters[i].key;
          if (!paramName) {
            continue;
          }
          if (paramName === name) {
            this.set([target, i, 'value'], e.detail.value);
            this._processInput();
            return;
          }
        }
      }
    });
  })();
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<raml-request-url-editor>` An URL editor for the RAML request panel

Use this input element to provide URI variables support.
If the `uriParameters` array is set, and the user click on the variable name
then the documentation for this variable will be displayed.
This behavior can be turned off by setting `skip-docs` attribute (or `skipDocs`
property).

The element has custom validation. If the value contains a variable string
("{some string}") then it will display a validation error.

### Example
```html
<raml-request-url-editor auto-validate required></raml-request-url-editor>
```
```javascript
var input = document.querySelector('raml-request-url-editor');
input.addEventListener('value-changed', function(e) {
  if (input.validate())
    var url = e.detail.value;
});
```

When the `value` of this control change then the `url-value-changed` event will
be fired. Also, if other element or the application will send this event then
the value of this form control will be updated. This is a way to update URL
value without directly accessing the element.

```jsvascript
document.dispatchEvent(new CustomEvent('url-value-changed', {
  bubbles: true,
  detail: {
    value: 'http://www.domain.com'
  }
}));
```

Firing this event will update the value to `http://www.domain.com`.

### Styling
`<raml-request-url-editor>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-request-url-editor` | Mixin applied to the element | `{}`
`--raml-request-url-editor-documentation` | Mixin applied to the documentation field. Not that this node has the `--arc-font-body1` mixin and also `markdown-styles` applies. | `{}`

Additionally use styles defined for the `paper-input` element.

@group RAML Elements
@element raml-request-url-editor
@demo demo/index.html
-->
<dom-module id="raml-request-url-editor" assetpath="bower_components/raml-request-url-editor/">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      outline: none;
      display: block;
      @apply(--raml-request-url-editor);
    }

    .markdown-body {
      @apply(--arc-font-body1);
      margin-top: 12px;
      color: rgba(0, 0, 0, 0.54);
      @apply(--raml-request-url-editor-documentation);
    }

    </style>
    <paper-input-container no-label-float="[[noLabelFloat]]" attr-for-value="bind-value" always-float-label="[[alwaysFloatLabel]]" disabled$="[[disabled]]" invalid="[[invalid]]">
      <label hidden$="[[!label]]">[[label]]</label>
      <input is="iron-input" id="input" class="paper-input-input" aria-label-prefix="[[_ariaLabelledBy]]" bind-value="{{value}}" disabled$="[[disabled]]" required$="[[required]]" autofocus$="[[autofocus]]" readonly$="[[readonly]]" type="url" on-tap="_inputTap" on-blur="_onElementBlur">
      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error>[[errorMessage]]</paper-input-error>
      </template>
    </paper-input-container>
    <template is="dom-if" if="[[documentation]]">
      <marked-element markdown="[[documentation]]">
        <div class="markdown-html markdown-body"></div>
      </marked-element>
    </template>
  </template>
  <script>
  Polymer({
    is: 'raml-request-url-editor',

    behaviors: [
      Polymer.PaperInputBehavior,
      Polymer.IronValidatableBehavior,
      Polymer.IronFormElementBehavior
    ],

    /**
     * Fired when the URL value change.
     * Note that this event is fifed before validation occur and therefore the URL may be invalid.
     *
     * @event url-value-changed
     * @param {String} value The URL.
     */

    properties: {
      // A list of RAML defined URI parameters
      uriParameters: Array,
      // A RAML defined absolute URL for this endpoint. It may contain variables
      url: {
        type: String,
        observer: '_onUrlChanged'
      },
      /**
       * The label for this input.
       */
      label: {
        type: String,
        value: 'Request URL'
      },
      // A value generated by this editor - the URL.
      value: {
        type: String,
        notify: true,
        observer: '_onValueChanged'
      },
      errorMessage: {
        type: String,
        value: 'Fill the URI parameters before making a request'
      },
      // A documentation to show.
      documentation: {
        type: String
      },
      // If true it will not display documentation for the variable (if available).
      skipDocs: Boolean
    },

    hostAttributes: {
      'tabindex': -1,
      focusable: true
    },

    ready: function() {
      this._ready = true;
      // If there's an initial input, validate it.
      if (this.value) {
        this._handleAutoValidate();
      }
    },

    attached: function() {
      this.listen(window, 'url-value-changed', '_extValueChangedHandler');
    },

    detached: function() {
      this.unlisten(window, 'url-value-changed', '_extValueChangedHandler');
    },

    /**
     * A handler that is called on input
     */
    _onValueChanged: function() {
      if (!this._ready) {
        return;
      }
      this.fire('url-value-changed', {
        value: this.value
      });
      this._handleAutoValidate();
    },

    /**
     * If called it mean that the method has changed. And possibly the url value.
     * If the old value id the same as the new value it means that the user switched a method
     * staying with the same andpoint. Therefore nothing needs to be done.
     */
    _onUrlChanged: function(value, oldValue) {
      if (value === oldValue && value !== undefined) {
        return;
      }
      this.set('value', value);
    },

    // Displays the doc for the variable.
    _displayVariableDoc: function(id) {
      if (this.skipDocs) {
        return;
      }
      var up = this.uriParameters;
      if (!id || !up) {
        this.documentation = '';
        return;
      }
      var item;
      for (var i = 0, len = up.length; i < len; i++) {
        if (up[i].name === id) {
          item = up[i];
          break;
        }
      }
      if (!item || !item.description) {
        this.documentation = '';
        return;
      }
      this.documentation = item.description;
    },

    _onElementBlur: function() {
      this.documentation = '';
    },

    /**
     * A handler for the `url-value-changed` event.
     * If this element is not the source of the event then it will update the `value` property.
     * It's to be used besides the Polymer's data binding system.
     */
    _extValueChangedHandler: function(e) {
      if (e.target === this) {
        return;
      }
      this.set('value', e.detail.value);
    },

    _getValidity: function() {
      var value = this.value;
      if (!this.required && !value) {
        return true;
      }

      if (value === undefined) {
        return true;
      }

      if (!value && this.required) {
        return false;
      }

      if (!value) {
        return true;
      }

      if (value.indexOf('{') !== -1 && value.indexOf('}') !== -1) {
        return false;
      }

      if ('URL' in window) {
        try {
          new URL(value);
          return true;
        } catch (e) {
          return false;
        }
      }
      return this.$.input.validity.valid;
    },
    // Handler for input click / tap.
    _inputTap: function() {
      var variable = this._getSelectedVariable();
      this._displayVariableDoc(variable);
    },
    /**
     * Returns variable name for current caret position.
     * This can be used for mouse on keyboard events to determine
     * if current action involve a variable.
     * It takes a selection start as a orientation point to find a variable.
     *
     * @return {String|undefined} Variable name or undefined if at current
     * position there's no variable.
     */
    _getSelectedVariable: function() {
      var start = this.$.input.selectionStart;
      var variable = this._computeVariableFromPosition(start);
      return variable;
    },
    /**
     * Computes variable from current caret position.
     * It looks for brackets to the left and right from the selection and
     * everything between is a variable name.
     *
     * @param {Number} start Caret position in thex field.
     * @return {String|undefined} Variable name or undefined if at current
     * position there's no variable.
     */
    _computeVariableFromPosition: function(start) {
      var value = this.value;
      if (!start || !value) {
        return;
      }
      // Check existance of the left bracket "{".
      var pos;
      var leftBracketPos = -1;
      for (pos = start; pos > 0; pos--) {
        if (value[pos] === '}') {
          break;
        }
        if (value[pos] === '{') {
          leftBracketPos = pos;
          break;
        }
      }
      if (leftBracketPos === -1) {
        // Click is not in the vartiable.
        return;
      }
      var rightBracketPos = -1;
      for (pos = leftBracketPos; pos < value.length; pos++) {
        var _val = value[pos];
        if (_val === '}') {
          rightBracketPos = pos;
          break;
        } else if (_val === '.' || _val === '/') {
          break;
        }
      }
      if (rightBracketPos === -1) {
        return;
      }
      var variable = value.substr(leftBracketPos + 1,
        rightBracketPos - leftBracketPos - 1);
      return variable;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

  /** @polymerBehavior */
  Polymer.PaperSpinnerBehavior = {

    listeners: {
      'animationend': '__reset',
      'webkitAnimationEnd': '__reset'
    },

    properties: {
      /**
       * Displays the spinner.
       */
      active: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        observer: '__activeChanged'
      },

      /**
       * Alternative text content for accessibility support.
       * If alt is present, it will add an aria-label whose content matches alt when active.
       * If alt is not present, it will default to 'loading' as the alt value.
       */
      alt: {
        type: String,
        value: 'loading',
        observer: '__altChanged'
      },

      __coolingDown: {
        type: Boolean,
        value: false
      }
    },

    __computeContainerClasses: function(active, coolingDown) {
      return [
        active || coolingDown ? 'active' : '',
        coolingDown ? 'cooldown' : ''
      ].join(' ');
    },

    __activeChanged: function(active, old) {
      this.__setAriaHidden(!active);
      this.__coolingDown = !active && old;
    },

    __altChanged: function(alt) {
      // user-provided `aria-label` takes precedence over prototype default
      if (alt === this.getPropertyInfo('alt').value) {
        this.alt = this.getAttribute('aria-label') || alt;
      } else {
        this.__setAriaHidden(alt==='');
        this.setAttribute('aria-label', alt);
      }
    },

    __setAriaHidden: function(hidden) {
      var attr = 'aria-hidden';
      if (hidden) {
        this.setAttribute(attr, 'true');
      } else {
        this.removeAttribute(attr);
      }
    },

    __reset: function() {
      this.active = false;
      this.__coolingDown = false;
    }
  };
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><dom-module id="paper-spinner-styles" assetpath="bower_components/paper-spinner/">
  <template>
    <style>
      /*
      /**************************/
      /* STYLES FOR THE SPINNER */
      /**************************/

      /*
       * Constants:
       *      ARCSIZE     = 270 degrees (amount of circle the arc takes up)
       *      ARCTIME     = 1333ms (time it takes to expand and contract arc)
       *      ARCSTARTROT = 216 degrees (how much the start location of the arc
       *                                should rotate each time, 216 gives us a
       *                                5 pointed star shape (it's 360/5 * 3).
       *                                For a 7 pointed star, we might do
       *                                360/7 * 3 = 154.286)
       *      SHRINK_TIME = 400ms
       */

      :host {
        display: inline-block;
        position: relative;
        width: 28px;
        height: 28px;

        /* 360 * ARCTIME / (ARCSTARTROT + (360-ARCSIZE)) */
        --paper-spinner-container-rotation-duration: 1568ms;

        /* ARCTIME */
        --paper-spinner-expand-contract-duration: 1333ms;

        /* 4 * ARCTIME */
        --paper-spinner-full-cycle-duration: 5332ms;

        /* SHRINK_TIME */
        --paper-spinner-cooldown-duration: 400ms;
      }

      #spinnerContainer {
        width: 100%;
        height: 100%;

        /* The spinner does not have any contents that would have to be
         * flipped if the direction changes. Always use ltr so that the
         * style works out correctly in both cases. */
        direction: ltr;
      }

      #spinnerContainer.active {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
      }

      @-webkit-keyframes container-rotate {
        to { -webkit-transform: rotate(360deg) }
      }

      @keyframes container-rotate {
        to { transform: rotate(360deg) }
      }

      .spinner-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        white-space: nowrap;
        border-color: var(--paper-spinner-color, --google-blue-500);
      }

      .layer-1 {
        border-color: var(--paper-spinner-layer-1-color, --google-blue-500);
      }

      .layer-2 {
        border-color: var(--paper-spinner-layer-2-color, --google-red-500);
      }

      .layer-3 {
        border-color: var(--paper-spinner-layer-3-color, --google-yellow-500);
      }

      .layer-4 {
        border-color: var(--paper-spinner-layer-4-color, --google-green-500);
      }

      /**
       * IMPORTANT NOTE ABOUT CSS ANIMATION PROPERTIES (keanulee):
       *
       * iOS Safari (tested on iOS 8.1) does not handle animation-delay very well - it doesn't
       * guarantee that the animation will start _exactly_ after that value. So we avoid using
       * animation-delay and instead set custom keyframes for each color (as layer-2undant as it
       * seems).
       */
      .active .spinner-layer {
        -webkit-animation-name: fill-unfill-rotate;
        -webkit-animation-duration: var(--paper-spinner-full-cycle-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-name: fill-unfill-rotate;
        animation-duration: var(--paper-spinner-full-cycle-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
        opacity: 1;
      }

      .active .spinner-layer.layer-1 {
        -webkit-animation-name: fill-unfill-rotate, layer-1-fade-in-out;
        animation-name: fill-unfill-rotate, layer-1-fade-in-out;
      }

      .active .spinner-layer.layer-2 {
        -webkit-animation-name: fill-unfill-rotate, layer-2-fade-in-out;
        animation-name: fill-unfill-rotate, layer-2-fade-in-out;
      }

      .active .spinner-layer.layer-3 {
        -webkit-animation-name: fill-unfill-rotate, layer-3-fade-in-out;
        animation-name: fill-unfill-rotate, layer-3-fade-in-out;
      }

      .active .spinner-layer.layer-4 {
        -webkit-animation-name: fill-unfill-rotate, layer-4-fade-in-out;
        animation-name: fill-unfill-rotate, layer-4-fade-in-out;
      }

      @-webkit-keyframes fill-unfill-rotate {
        12.5% { -webkit-transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { -webkit-transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { -webkit-transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { -webkit-transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { -webkit-transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { -webkit-transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { -webkit-transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { -webkit-transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @keyframes fill-unfill-rotate {
        12.5% { transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @-webkit-keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @-webkit-keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      .circle-clipper {
        display: inline-block;
        position: relative;
        width: 50%;
        height: 100%;
        overflow: hidden;
        border-color: inherit;
      }

      /**
       * Patch the gap that appear between the two adjacent div.circle-clipper while the
       * spinner is rotating (appears on Chrome 50, Safari 9.1.1, and Edge).
       */
      .spinner-layer::after {
        left: 45%;
        width: 10%;
        border-top-style: solid;
      }

      .spinner-layer::after,
      .circle-clipper::after {
        content: '';
        box-sizing: border-box;
        position: absolute;
        top: 0;
        border-width: var(--paper-spinner-stroke-width, 3px);
        border-color: inherit;
        border-radius: 50%;
      }

      .circle-clipper::after {
        bottom: 0;
        width: 200%;
        border-style: solid;
        border-bottom-color: transparent !important;
      }

      .circle-clipper.left::after {
        left: 0;
        border-right-color: transparent !important;
        -webkit-transform: rotate(129deg);
        transform: rotate(129deg);
      }

      .circle-clipper.right::after {
        left: -100%;
        border-left-color: transparent !important;
        -webkit-transform: rotate(-129deg);
        transform: rotate(-129deg);
      }

      .active .gap-patch::after,
      .active .circle-clipper::after {
        -webkit-animation-duration: var(--paper-spinner-expand-contract-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-duration: var(--paper-spinner-expand-contract-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
      }

      .active .circle-clipper.left::after {
        -webkit-animation-name: left-spin;
        animation-name: left-spin;
      }

      .active .circle-clipper.right::after {
        -webkit-animation-name: right-spin;
        animation-name: right-spin;
      }

      @-webkit-keyframes left-spin {
        0% { -webkit-transform: rotate(130deg) }
        50% { -webkit-transform: rotate(-5deg) }
        to { -webkit-transform: rotate(130deg) }
      }

      @keyframes left-spin {
        0% { transform: rotate(130deg) }
        50% { transform: rotate(-5deg) }
        to { transform: rotate(130deg) }
      }

      @-webkit-keyframes right-spin {
        0% { -webkit-transform: rotate(-130deg) }
        50% { -webkit-transform: rotate(5deg) }
        to { -webkit-transform: rotate(-130deg) }
      }

      @keyframes right-spin {
        0% { transform: rotate(-130deg) }
        50% { transform: rotate(5deg) }
        to { transform: rotate(-130deg) }
      }

      #spinnerContainer.cooldown {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
      }

      @-webkit-keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Progress & activity](https://www.google.com/design/spec/components/progress-activity.html)

Element providing a multiple color material design circular spinner.

    <paper-spinner active></paper-spinner>

The default spinner cycles between four layers of colors; by default they are
blue, red, yellow and green. It can be customized to cycle between four different
colors. Use <paper-spinner-lite> for single color spinners.

### Accessibility

Alt attribute should be set to provide adequate context for accessibility. If not provided,
it defaults to 'loading'.
Empty alt can be provided to mark the element as decorative if alternative content is provided
in another form (e.g. a text block following the spinner).

    <paper-spinner alt="Loading contacts list" active></paper-spinner>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-spinner-layer-1-color` | Color of the first spinner rotation | `--google-blue-500`
`--paper-spinner-layer-2-color` | Color of the second spinner rotation | `--google-red-500`
`--paper-spinner-layer-3-color` | Color of the third spinner rotation | `--google-yellow-500`
`--paper-spinner-layer-4-color` | Color of the fourth spinner rotation | `--google-green-500`
`--paper-spinner-stroke-width` | The width of the spinner stroke | 3px

@group Paper Elements
@element paper-spinner
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-spinner" assetpath="bower_components/paper-spinner/">
  <template strip-whitespace="">
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]">
      <div class="spinner-layer layer-1">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-2">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-3">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-4">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: 'paper-spinner',

      behaviors: [
        Polymer.PaperSpinnerBehavior
      ]
    });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 Pawel Psztyc, The ARC team
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
Material design: [Text fields](https://www.google.com/design/spec/components/text-fields.html)

`<paper-masked-input>` is a single-line password field with Material Design styling and option to unmask the value.
    <paper-masked-input label="Your password"></paper-masked-input>

It may include an optional error message.
    <paper-masked-input label="Your password" error-message="Invalid password!"></paper-masked-input>

The password input will rener two additional icon buttons: clear and visibility toggle.
When the user toggle visibility it will change to regular text field and back.

### Focus
To focus a paper-masked-input, you can call the native `focus()` method as long as the paper input has a tab index.

### Styling
See `Polymer.PaperInputContainer` for a list of custom properties used to style this element.

@group UI Elements
@element paper-masked-input
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="paper-masked-input" assetpath="bower_components/paper-masked-input/">
  <template>
    <style>
    :host {
      display: block;
    }

    :host([disabled]) {
      pointer-events: none;
      outline: none;
      @apply(--paper-masked-input-disabled);
    }
    </style>
    <paper-input label="[[label]]" type="[[type]]" value="{{value}}" error-message="[[errorMessage]]" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" pattern$="[[pattern]]" autocomplete$="[[autocomplete]]" required$="[[required]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" tabindex$="[[tabindex]]" disabled$="[[disabled]]" no-label-float="[[noLabelFloat]]" always-float-label="[[alwaysFloatLabel]]" auto-validate$="[[autoValidate]]" id="input">
      <paper-icon-button suffix="" on-tap="toggle" icon="[[icon]]" alt="[[alt]]" title$="[[title]]" disabled$="[[disabled]]"></paper-icon-button>
      <paper-icon-button suffix="" on-tap="clear" icon="arc:clear" alt="Clear input icon" title="Clear input" disabled$="[[disabled]]"></paper-icon-button>
    </paper-input>
  </template>
  <script>Polymer({
  is: 'paper-masked-input',

  properties: {
    /**
     * The label for this input.
     */
    label: String,
    //The value for this input.
    value: {
      type: String,
      notify: true
    },
    // Set to true to show the text in the input field.
    visible: {
      type: Boolean,
      value: false,
      notify: true
    },

    // Icon name to display
    icon: {
      type: String,
      value: 'arc:visibility',
      readOnly: true
    },

    // Current input field type
    type: {
      type: String,
      value: 'password',
      readOnly: true
    },

    // Icon's alt label
    alt: {
      type: String,
      computed: '_computeAlt(title)'
    },

    // Icon's title label
    title: {
      type: String,
      value: 'Show password',
      readOnly: true
    },
    // The error message to display when the input is invalid.
    errorMessage: String,
    /**
     * Returns true if the value is invalid.
     * If `autoValidate` is true, the `invalid` attribute is managed automatically,
     * which can clobber attempts to manage it manually.
     */
    invalid: {
      type: Boolean,
      notify: true
    },
    // Set to true to prevent the user from entering invalid input.
    preventInvalidInput: Boolean,
    // Set this to specify the pattern allowed by `preventInvalidInput`.
    allowedPattern: String,
    // Name of the validator to use.
    validator: String,
    // A pattern to validate the `input` with.
    pattern: String,
    // `<input>`'s autocomplete property
    autocomplete: {
      type: String,
      value: 'off'
    },
    // Set to true to mark the input as required.
    required: {
      type: Boolean,
      value: false
    },
    // Binds to `<input>`'s `autofocus` property
    autofocus: Boolean,
    // Binds to `<input>`'s `inputmode` property
    inputmode: String,
    // The minimum length of the input value.
    minlength: Number,
    // The maximum length of the input value.
    maxlength: Number,
    // Binds to `<input>`'s `name` property
    name: String,
    /**
     * A placeholder string in addition to the label. If this is set, the label will always float.
     */
    placeholder: {
      type: String,
      value: ''
    },
    // Binds to `<input>`'s `readonly` property
    readonly: {
      type: Boolean,
      value: false
    },
    // Binds to `<input>`'s `size` property
    size: Number,
    // Binds to `<input>`'s `autocapitalize` property
    autocapitalize: {
      type: String,
      value: 'none'
    },
    // Binds to `<input>`'s `autocorrect` property
    autocorrect: {
      type: String,
      value: 'off'
    },
    // Set to true to disable this input.
    disabled: {
      type: Boolean,
      value: false
    },
    // Set to true to disable the floating label.
    noLabelFloat: {
      type: Boolean,
      value: false
    },
    // Set to true to always float the label.
    alwaysFloatLabel: {
      type: Boolean,
      value: false
    },
    // Set to true to auto-validate the input value.
    autoValidate: {
      type: Boolean,
      value: false
    }
  },

  hostAttributes: {
    tabindex: 0
  },

  observers: [
    '_visibleChanged(visible)'
  ],
  // Toggle password visibility.
  toggle: function() {
    this.set('visible', !this.visible);
  },

  _visibleChanged: function(visible) {
    if (visible) {
      this._setType('text');
      this._setIcon('arc:visibility-off');
      this._setTitle('Hide password');
    } else {
      this._setType('password');
      this._setIcon('arc:visibility');
      this._setTitle('Show password');
    }
  },

  _computeAlt: function(title) {
    return title + ' icon';
  },

  // Clears the value of the field.
  clear: function() {
    this.set('value', '');
  },

  validate: function() {
    this.$.input.validate();
  },

  get inputElement() {
    return this.$.input;
  }
});
</script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function() {

  window.ArcBehaviors = window.ArcBehaviors || {};
  /**
   * Contains a common properties and methods used in the Auth methods element set.
   *
   * Elements that implements this behavior may use `getSettings()` function to return an object
   * that will be passed to the `authorization-enabled` and `authorization-disabled` event.
   * Before sending this event it will try to collect settings data from this function. Whole object
   * will be passed to the event detail.
   *
   * @polymerBehavior ArcBehaviors.AuthMethodsBehavior
   */
  window.ArcBehaviors.AuthMethodsBehavior = {
    properties: {
      /**
       * A start index for elements step counter.
       * Basic assumption is that this elements are used inside the
       * `authorization` panel which has the first step (auth type selector).
       * If the element is to be used as a standalone element then this
       * should be set to `0` (zero) so the number for the first step will be
       * `1`.
       * Basic and NTLM auth elements has only one step. Other elements, with
       * more complex structure has more steps.
       */
      stepStartIndex: {
        type: Number,
        value: 1
      },
      /**
       * If true then the auth method will not render progress bar (stepper).
       */
      noStepper: {
        type: Boolean,
        reflectToAttribute: true
      }
    },
    /**
     * Gets a oauth type by the elemnt name.
     * Possible values: 'basic', 'ntlm', 'oauth1', 'oauth2', 'digest', 'custom'
     * or undefined.
     */
    _getAuthType: function() {
      var name = this.nodeName.toLowerCase();
      switch (name) {
        case 'auth-method-basic':
          return 'basic';
        case 'auth-method-ntlm':
          return 'ntlm';
        case 'auth-method-oauth1':
          return 'oauth1';
        case 'auth-method-oauth2':
          return 'oauth2';
        case 'auth-method-digest':
          return 'digest';
      }
    },

    _computeStep: function(stepStartIndex, currentStep) {
      return stepStartIndex + currentStep;
    }
  };
})();

</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><dom-module id="auth-methods-styles" assetpath="bower_components/auth-methods/">
  <template>
    <style>
    .stepper {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      padding: 12px 0;
      position: relative;
      pointer-events: none;
    }

    .stepper.active {
      pointer-events: all;
      cursor: pointer;
    }

    .stepper .step {
      display: inline-block;
      background-color: var(--stepper-step-number-background-color, #3D8099);
      color: var(--stepper-step-number-color, #fff);
      font-size: 14px;
      @apply(--layout-center-center);
      @apply(--layout-horizontal);
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 12px;
    }

    .stepper .step-header {
      position: relative;
      @apply(--layout-flex);
    }

    .stepper .step-title {
      @apply(--arc-font-body1);
      display: block;
      color: var(--stepper-step-title-color, #3D8099);
      font-size: 16px;
      font-weight: 500;
    }

    .stepper .step-selection {
      @apply(--arc-font-body1);
      color: var(--stepper-step-selection-label-color, rgba(0, 0, 0, 0.54));
      position: absolute;
      bottom: -16px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      max-width: 100%;
    }

    .stepper paper-ripple {
      color: var(--stepper-step-title-color, #3D8099);
    }

    .step-content {
      @apply(--layout-horizontal);
      margin-bottom: 12px;
      min-height: 32px;
    }

    .step-content .line {
      min-width: 11px;
      max-width: 11px;
      border-right: 1px var(--stepper-line-color, rgba(0, 0, 0, 0.12)) solid;
      margin-right: 24px;
    }

    .step-content .content {
      @apply(--layout-flex);
    }

    paper-input,
    paper-masked-input {
      max-width: 560px;
    }

    .step-content .content {
      max-width: calc(100% - 16px);
    }

    #form {
      width: 100%;
    }

    :host([no-stepper]) .step-content .line,
    :host([no-stepper]) .stepper {
      display: none;
    }

    .edit-icon {
      visibility: hidden;
    }

    .active .step-header:hover .edit-icon {
      visibility: visible;
    }
    </style>
  </template>
</dom-module>
<!--
The `<auth-method-basic>` element displays a form to provide the Basic auth credentials.
It calculates base64 has while typing into username or password field.

It accepts `hash` as a property and once set it will atempt to decode it and set username and
paswword.

### Example
```
<auth-method-basic hash="dGVzdDp0ZXN0"></auth-method-basic>
```
This example will produce a form with prefilled username and passowrd with value "test".

### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-basic` | Mixin applied to the element. | `{}`
`--auth-method-panel` | Mixin applied to all auth elements. | `{}`

This is very basic element. Style inputs using `paper-input`'s or `paper-toggle`'s css variables.

@group UI Elements
@element auth-method-basic
@demo demo/basic.html
-->
<dom-module id="auth-method-basic" assetpath="bower_components/auth-methods/">
  <template>
    <style include="auth-methods-styles">
     :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-basic);
    }
    </style>
    <div class="row">
      <div class="stepper">
        <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
        <span class="step-header">
          <span class="step-title">Set authorization data</span>
        </span>
      </div>
      <div class="step-content">
        <div class="line"></div>
        <form is="iron-form" id="form" autocomplete="on">
          <paper-input label="User name" value="{{username}}" type="text" required="" auto-validate="" autocomplete="on">
            <paper-icon-button suffix="" on-tap="clearUsername" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
          </paper-input>
          <paper-masked-input label="Password" value="{{password}}" auto-validate="" autocomplete="on"></paper-masked-input>
        </form>
      </div>
    </div>
  </template>
  <script>
  Polymer({
    is: 'auth-method-basic',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],
    /**
     * Fired when error occured when decoding hash.
     *
     * @event error
     * @param {Error} error The error object.
     */
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * @event auth-settings-changed
     * @param {Object} settings Current settings containing hash, password
     * and username.
     * @param {String} type The authorization type - basic
     * @param {Boolean} valid True if the form has been validated.
     */
    properties: {
      // base64 hash of the uid and passwd. When set it will override current username and password.
      hash: {
        type: String,
        notify: true
      },
      // The password.
      password: {
        type: String,
        notify: true,
        value: ''
      },
      // The username.
      username: {
        type: String,
        notify: true,
        value: ''
      }
    },

    attached: function() {
      this.listen(window, 'auth-settings-changed', '_onAuthSettings');
    },

    detached: function() {
      this.unlisten(window, 'auth-settings-changed', '_onAuthSettings');
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },

    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    observers: [
      '_hashChanged(hash)',
      '_userInputChanged(username, password)',
      '_settingsChanged(hash)'
    ],

    _settingsChanged: function() {
      var validationResult = this.$.form.validate();
      var settings = this._getSettings();
      var detail = {
        settings: settings,
        type: 'basic',
        valid: validationResult
      };
      this.fire('auth-settings-changed', detail);
    },

    _getSettings: function() {
      return {
        hash: this.hash,
        password: this.password,
        username: this.username
      };
    },

    _hashChanged: function(hash) {
      if (this._internalHashChange || !hash) {
        return;
      }
      var encoded;
      try {
        encoded = atob(hash);
        var parts = encoded.split(':');
        if (parts.length) {
          this.username = parts[0];
          if (parts[1]) {
            this.password = parts[1];
          }
        }
      } catch (e) {
        console.warn(e);
        this.fire('error', {
          error: e
        });
      }
    },

    _userInputChanged: function(uid, passwd) {
      if (!uid) {
        uid = '';
      }
      if (!passwd) {
        passwd = '';
      }
      var enc = uid + ':' + passwd;
      var hash = btoa(enc);
      this._internalHashChange = true;
      this.set('hash', hash);
      this._internalHashChange = false;
    },

    clearUsername: function() {
      this.username = '';
    },

    /**
     * Handler to the `auth-settings-changed` event (fired by all auth panels).
     * If the event was fired by other element with the same method ttype
     * then the form will be updated to incomming values.
     * This helps to sync changes between elements in the same app.
     */
    _onAuthSettings: function(e) {
      if (!this._initialized) {
        return;
      }
      var event = Polymer.dom(e);
      if (event.rootTarget === this) {
        return;
      }
      if (e.detail.type !== 'basic') {
        return;
      }
      var otherSettings = e.detail.settings;
      for (var _key in otherSettings) {
        if (this[_key] !== otherSettings[_key]) {
          this[_key] = otherSettings[_key];
        }
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS=CryptoJS||function(s,p){var m={},l=m.lib={},n=function(){},r=l.Base={extend:function(b){n.prototype=this;var h=new n;b&&h.mixIn(b);h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)});h.init.prototype=h;h.$super=this;return h},create:function(){var b=this.extend();b.init.apply(b,arguments);return b},init:function(){},mixIn:function(b){for(var h in b)b.hasOwnProperty(h)&&(this[h]=b[h]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},
q=l.WordArray=r.extend({init:function(b,h){b=this.words=b||[];this.sigBytes=h!=p?h:4*b.length},toString:function(b){return(b||t).stringify(this)},concat:function(b){var h=this.words,a=b.words,j=this.sigBytes;b=b.sigBytes;this.clamp();if(j%4)for(var g=0;g<b;g++)h[j+g>>>2]|=(a[g>>>2]>>>24-8*(g%4)&255)<<24-8*((j+g)%4);else if(65535<a.length)for(g=0;g<b;g+=4)h[j+g>>>2]=a[g>>>2];else h.push.apply(h,a);this.sigBytes+=b;return this},clamp:function(){var b=this.words,h=this.sigBytes;b[h>>>2]&=4294967295<<
32-8*(h%4);b.length=s.ceil(h/4)},clone:function(){var b=r.clone.call(this);b.words=this.words.slice(0);return b},random:function(b){for(var h=[],a=0;a<b;a+=4)h.push(4294967296*s.random()|0);return new q.init(h,b)}}),v=m.enc={},t=v.Hex={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++){var k=a[j>>>2]>>>24-8*(j%4)&255;g.push((k>>>4).toString(16));g.push((k&15).toString(16))}return g.join("")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j+=2)g[j>>>3]|=parseInt(b.substr(j,
2),16)<<24-4*(j%8);return new q.init(g,a/2)}},a=v.Latin1={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++)g.push(String.fromCharCode(a[j>>>2]>>>24-8*(j%4)&255));return g.join("")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j++)g[j>>>2]|=(b.charCodeAt(j)&255)<<24-8*(j%4);return new q.init(g,a)}},u=v.Utf8={stringify:function(b){try{return decodeURIComponent(escape(a.stringify(b)))}catch(g){throw Error("Malformed UTF-8 data");}},parse:function(b){return a.parse(unescape(encodeURIComponent(b)))}},
g=l.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=u.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(b){var a=this._data,g=a.words,j=a.sigBytes,k=this.blockSize,m=j/(4*k),m=b?s.ceil(m):s.max((m|0)-this._minBufferSize,0);b=m*k;j=s.min(4*b,j);if(b){for(var l=0;l<b;l+=k)this._doProcessBlock(g,l);l=g.splice(0,b);a.sigBytes-=j}return new q.init(l,j)},clone:function(){var b=r.clone.call(this);
b._data=this._data.clone();return b},_minBufferSize:0});l.Hasher=g.extend({cfg:r.extend(),init:function(b){this.cfg=this.cfg.extend(b);this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){b&&this._append(b);return this._doFinalize()},blockSize:16,_createHelper:function(b){return function(a,g){return(new b.init(g)).finalize(a)}},_createHmacHelper:function(b){return function(a,g){return(new k.HMAC.init(b,
g)).finalize(a)}}});var k=m.algo={};return m}(Math);
(function(s){function p(a,k,b,h,l,j,m){a=a+(k&b|~k&h)+l+m;return(a<<j|a>>>32-j)+k}function m(a,k,b,h,l,j,m){a=a+(k&h|b&~h)+l+m;return(a<<j|a>>>32-j)+k}function l(a,k,b,h,l,j,m){a=a+(k^b^h)+l+m;return(a<<j|a>>>32-j)+k}function n(a,k,b,h,l,j,m){a=a+(b^(k|~h))+l+m;return(a<<j|a>>>32-j)+k}for(var r=CryptoJS,q=r.lib,v=q.WordArray,t=q.Hasher,q=r.algo,a=[],u=0;64>u;u++)a[u]=4294967296*s.abs(s.sin(u+1))|0;q=q.MD5=t.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878])},
_doProcessBlock:function(g,k){for(var b=0;16>b;b++){var h=k+b,w=g[h];g[h]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var b=this._hash.words,h=g[k+0],w=g[k+1],j=g[k+2],q=g[k+3],r=g[k+4],s=g[k+5],t=g[k+6],u=g[k+7],v=g[k+8],x=g[k+9],y=g[k+10],z=g[k+11],A=g[k+12],B=g[k+13],C=g[k+14],D=g[k+15],c=b[0],d=b[1],e=b[2],f=b[3],c=p(c,d,e,f,h,7,a[0]),f=p(f,c,d,e,w,12,a[1]),e=p(e,f,c,d,j,17,a[2]),d=p(d,e,f,c,q,22,a[3]),c=p(c,d,e,f,r,7,a[4]),f=p(f,c,d,e,s,12,a[5]),e=p(e,f,c,d,t,17,a[6]),d=p(d,e,f,c,u,22,a[7]),
c=p(c,d,e,f,v,7,a[8]),f=p(f,c,d,e,x,12,a[9]),e=p(e,f,c,d,y,17,a[10]),d=p(d,e,f,c,z,22,a[11]),c=p(c,d,e,f,A,7,a[12]),f=p(f,c,d,e,B,12,a[13]),e=p(e,f,c,d,C,17,a[14]),d=p(d,e,f,c,D,22,a[15]),c=m(c,d,e,f,w,5,a[16]),f=m(f,c,d,e,t,9,a[17]),e=m(e,f,c,d,z,14,a[18]),d=m(d,e,f,c,h,20,a[19]),c=m(c,d,e,f,s,5,a[20]),f=m(f,c,d,e,y,9,a[21]),e=m(e,f,c,d,D,14,a[22]),d=m(d,e,f,c,r,20,a[23]),c=m(c,d,e,f,x,5,a[24]),f=m(f,c,d,e,C,9,a[25]),e=m(e,f,c,d,q,14,a[26]),d=m(d,e,f,c,v,20,a[27]),c=m(c,d,e,f,B,5,a[28]),f=m(f,c,
d,e,j,9,a[29]),e=m(e,f,c,d,u,14,a[30]),d=m(d,e,f,c,A,20,a[31]),c=l(c,d,e,f,s,4,a[32]),f=l(f,c,d,e,v,11,a[33]),e=l(e,f,c,d,z,16,a[34]),d=l(d,e,f,c,C,23,a[35]),c=l(c,d,e,f,w,4,a[36]),f=l(f,c,d,e,r,11,a[37]),e=l(e,f,c,d,u,16,a[38]),d=l(d,e,f,c,y,23,a[39]),c=l(c,d,e,f,B,4,a[40]),f=l(f,c,d,e,h,11,a[41]),e=l(e,f,c,d,q,16,a[42]),d=l(d,e,f,c,t,23,a[43]),c=l(c,d,e,f,x,4,a[44]),f=l(f,c,d,e,A,11,a[45]),e=l(e,f,c,d,D,16,a[46]),d=l(d,e,f,c,j,23,a[47]),c=n(c,d,e,f,h,6,a[48]),f=n(f,c,d,e,u,10,a[49]),e=n(e,f,c,d,
C,15,a[50]),d=n(d,e,f,c,s,21,a[51]),c=n(c,d,e,f,A,6,a[52]),f=n(f,c,d,e,q,10,a[53]),e=n(e,f,c,d,y,15,a[54]),d=n(d,e,f,c,w,21,a[55]),c=n(c,d,e,f,v,6,a[56]),f=n(f,c,d,e,D,10,a[57]),e=n(e,f,c,d,t,15,a[58]),d=n(d,e,f,c,B,21,a[59]),c=n(c,d,e,f,r,6,a[60]),f=n(f,c,d,e,z,10,a[61]),e=n(e,f,c,d,j,15,a[62]),d=n(d,e,f,c,x,21,a[63]);b[0]=b[0]+c|0;b[1]=b[1]+d|0;b[2]=b[2]+e|0;b[3]=b[3]+f|0},_doFinalize:function(){var a=this._data,k=a.words,b=8*this._nDataBytes,h=8*a.sigBytes;k[h>>>5]|=128<<24-h%32;var l=s.floor(b/
4294967296);k[(h+64>>>9<<4)+15]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;k[(h+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;a.sigBytes=4*(k.length+1);this._process();a=this._hash;k=a.words;for(b=0;4>b;b++)h=k[b],k[b]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return a},clone:function(){var a=t.clone.call(this);a._hash=this._hash.clone();return a}});r.MD5=t._createHelper(q);r.HmacMD5=t._createHmacHelper(q)})(Math);
</script>
<!--
The `<auth-method-digest>` element displays a form for digest authentication.
The user have to choose is he want to provide username and password only or
all digest parameters to calculate final authorization header.

In first case, the listeners and the transport method must perform handshake
by it's own. Otherwise authorization header should be set with calculated value.

### Example
```
<auth-method-digest username="john" password="doe"></auth-method-digest>
```

The `settings` property (of the element or even detail property) for full form
has the following structure:

```
{
  "username": String,
  "realm": String,
  "nonce": String,
  "uri": String,
  "response": String,
  "opaque": String,
  "qop": String - can be empty,
  "nc": String,
  "cnonce": String
}
```

## Response calculation
Depending on the algorithm and quality of protection (qop) properties the hasing
algorithm may need following data:
- request URL
- request payload (body)
- request HTTP method

The element should be provided with this information by setting it's properties.
However, the element will listen for `url-value-changed`, `http-method-changed`
and `body-value-changed` events on the window object. Once the event is handled
it will set up corresponding properties.
All this events must have a `value` property set on event's detail object.

### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-digest` | Mixin applied to the element. | `{}`
`--auth-method-panel` | Mixin applied to all auth elements. | `{}`

@group UI Elements
@element auth-method-digest
@demo demo/digest.html
-->
<dom-module id="auth-method-digest" assetpath="bower_components/auth-methods/">
  <template>
    <style include="auth-methods-styles">
     :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-digest);
    }
    </style>
    <div class="row">
      <div class="stepper">
        <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
        <span class="step-header">
          <span class="step-title">Set authorization data</span>
        </span>
      </div>
      <div class="step-content">
        <div class="line"></div>
        <form is="iron-form" id="form" autocomplete="on">
          <paper-input label="User name" value="{{username}}" type="text" required="" auto-validate="" autocomplete="on">
            <paper-icon-button suffix="" on-tap="clearUsername" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
          </paper-input>
          <paper-masked-input label="Password" value="{{password}}" required="" auto-validate="" autocomplete="on"></paper-masked-input>
          <paper-checkbox class="adv-settings-input" checked="{{fullForm}}">Advanced settings</paper-checkbox>
          <iron-collapse opened="[[fullForm]]">
            <div class="extended-form">
              <paper-input label="Server issued realm" value="{{realm}}" type="text" required="[[fullForm]]" auto-validate="" autocomplete="on"></paper-input>
              <paper-input label="Server issued nonce" value="{{nonce}}" type="text" required="[[fullForm]]" auto-validate="" autocomplete="on"></paper-input>
              <paper-dropdown-menu label="Quality of protection">
                <paper-listbox class="dropdown-content" selected="{{qop}}" attr-for-selected="data-qop">
                  <paper-item data-qop="auth">auth</paper-item>
                  <paper-item data-qop="auth-int">auth-int</paper-item>
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-input label="Nounce count" value="{{nc}}" type="number" required="[[fullForm]]" auto-validate="" autocomplete="on"></paper-input>
              <paper-dropdown-menu label="Hash algorithm">
                <paper-listbox class="dropdown-content" selected="{{algorithm}}" attr-for-selected="data-algorithm">
                  <paper-item data-algorithm="MD5">MD5</paper-item>
                  <paper-item data-algorithm="MD5-sess">MD5-sess</paper-item>
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-input label="Server issued opaque string" value="{{opaque}}" type="string" autocomplete="on"></paper-input>
              <paper-input label="Client nounce" value="{{cnonce}}" type="string" autocomplete="on"></paper-input>
            </div>
          </iron-collapse>
        </form>
      </div>
    </div>
  </template>
  <script>
  Polymer({
    is: 'auth-method-digest',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],
    /**
     * Fired when error occured when decoding hash.
     *
     * @event error
     * @param {Error} error The error object.
     */
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * @event auth-settings-changed
     * @param {Object} settings Current settings containing hash, password
     * and username.
     * @param {String} type The authorization type - basic
     * @param {Boolean} valid True if the form has been validated.
     */
    properties: {
      // The password.
      password: {
        type: String,
        notify: true,
        value: ''
      },
      // The username.
      username: {
        type: String,
        notify: true,
        value: ''
      },
      // If set then it will display all form fields.
      fullForm: {
        type: Boolean,
        value: false
      },
      // Server issued realm.
      realm: {
        type: String,
        value: ''
      },
      // Server issued nonce.
      nonce: {
        type: String,
        value: ''
      },
      // The realm value for the digest response.
      algorithm: {
        type: String,
        value: ''
      },
      /**
       * The quality of protection value for the digest response.
       * Either '', 'auth' or 'auth-int'
       */
      qop: {
        type: String,
        value: ''
      },
      // Nonce count - increments with each request used with the same nonce
      nc: {
        type: Number,
        value: 1
      },
      // Client nonce
      cnonce: {
        type: String,
        value: ''
      },
      // A string of data specified by the server
      opaque: {
        type: String,
        value: ''
      },
      // Hashed response to server challenge
      response: {
        type: String,
        value: ''
      },
      // Request HTTP method
      httpMethod: {
        type: String,
        value: ''
      },
      // Current request URL.
      requestUrl: {
        type: String,
        value: ''
      },
      // Current request body.
      requestBody: {
        type: String,
        value: ''
      }
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },

    attached: function() {
      this.listen(window, 'url-value-changed', '_onUrlChanged');
      this.listen(window, 'http-method-changed', '_onHttpMethodChanged');
      this.listen(window, 'body-value-changed', '_onBodyChanged');
      this.listen(window, 'auth-settings-changed', '_onAuthSettings');
    },

    detached: function() {
      this.unlisten(window, 'url-value-changed', '_onUrlChanged');
      this.unlisten(window, 'http-method-changed', '_onHttpMethodChanged');
      this.unlisten(window, 'body-value-changed', '_onBodyChanged');
      this.unlisten(window, 'auth-settings-changed', '_onAuthSettings');
    },

    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    observers: [
      // jscs:disable maximumLineLength
      '_userInputChanged(username, password, realm, nonce, qop, nc, algorithm, opaque, cnonce, httpMethod, requestUrl, fullForm)'
      // jscs:enable maximumLineLength
    ],

    /**
     * Returns current settings. Object's structure depends on `fullForm`
     * property. If it's `false` then the object will contain username and
     * password. Otherwise it will contain a list of parameters of the
     * Authorization header.
     */
    _getSettings: function() {
      if (!this.fullForm) {
        return {
          password: this.password,
          username: this.username
        };
      }
      this.response =  this.generateResponse();
      var settings = {};
      settings.username = this.username;
      settings.realm = this.realm;
      settings.nonce = this.nonce;
      settings.uri = this.requestUrl;
      settings.response = this.response;
      settings.opaque = this.opaque;
      settings.qop = this.qop;
      settings.nc = ('00000000' + this.nc).slice(-8);
      settings.cnonce = this.cnonce;
      return settings;
    },

    _userInputChanged: function(username, password, realm, nonce, qop, nc,
      algorithm, opaque, cnonce, httpMethod, requestUrl, fullForm) {
      var detail;
      if (!fullForm) {
        if (!username || !password) {
          detail = {
            settings: undefined,
            type: 'digest',
            valid: false
          };
          this.fire('auth-settings-changed', detail);
          return;
        }
        detail = {
          settings: this._getSettings(),
          type: 'digest',
          valid: true
        };
        this.fire('auth-settings-changed', detail);
        return;
      }
      if (!username || !password || !realm || !nonce || !httpMethod || !requestUrl) {
        detail = {
          settings: undefined,
          type: 'digest',
          valid: false
        };
        this.fire('auth-settings-changed', detail);
        return;
      }

      if (!nc) {
        return this.set('nc', 1);
      }
      if (!cnonce) {
        return this.set('cnonce', this.generateCnonce());
      }

      var settings = this._getSettings();
      detail = {
        settings: settings,
        type: 'digest',
        valid: true
      };
      this.fire('auth-settings-changed', detail);
    },

    clearUsername: function() {
      this.username = '';
    },

    /**
     * Generates client nonce.
     *
     * @return Generated client nonce.
     */
    generateCnonce: function() {
      var characters = 'abcdef0123456789';
      var token = '';
      for (var i = 0; i < 16; i++) {
        var randNum = Math.round(Math.random() * characters.length);
        token += characters.substr(randNum, 1);
      }
      return token;
    },
    /**
     * Generates the response header based on the parameters provided in the
     * form.
     *
     * See https://en.wikipedia.org/wiki/Digest_access_authentication#Overview
     *
     * @return {String} A response part of the authenticated digest request.
     */
    generateResponse: function() {
      var HA1 = this._getHA1();
      var HA2 = this._getHA2();
      var ncString = ('00000000' + this.nc).slice(-8);
      var responseStr = HA1 + ':' + this.nonce;
      if (!this.qop) {
        responseStr += ':' + HA2;
      } else {
        responseStr += ':' + ncString + ':' + this.cnonce + ':' + this.qop + ':' + HA2;
      }
      return CryptoJS.MD5(responseStr).toString();
    },
    // Generates HA1 as defined in Digest spec.
    _getHA1: function() {
      var HA1param = this.username + ':' + this.realm + ':' + this.password;
      var HA1 = CryptoJS.MD5(HA1param).toString();

      if (this.algorithm === 'MD5-sess') {
        HA1param = HA1 + ':' + this.nonce + ':' + this.cnonce;
        HA1 = CryptoJS.MD5(HA1param).toString();
      }
      return HA1;
    },
    // Generates HA2 as defined in Digest spec.
    _getHA2: function() {
      var HA2param = this.httpMethod + ':' + this.requestUrl;
      if (this.qop === 'auth-int') {
        HA2param += ':' + CryptoJS.MD5(this.requestBody).toString();
      }
      return CryptoJS.MD5(HA2param).toString();
    },
    /**
     * Handler to the `url-value-changed` event. When the element handle this
     * event it will update the `requestUrl` property.
     */
    _onUrlChanged: function(e) {
      this.requestUrl = e.detail.value;
    },
    /**
     * Handler to the `http-method-changed` event. When the element handle this
     * event it will update the `httpMethod` property.
     */
    _onHttpMethodChanged: function(e) {
      this.httpMethod = e.detail.value;
    },
    /**
     * Handler to the `body-value-changed` event. When the element handle this
     * event it will update the `requestBody` property.
     */
    _onBodyChanged: function(e) {
      this.requestBody = e.detail.value;
    },

    /**
     * Handler to the `auth-settings-changed` event (fired by all auth panels).
     * If the event was fired by other element with the same method ttype
     * then the form will be updated to incomming values.
     * This helps to sync changes between elements in the same app.
     */
    _onAuthSettings: function(e) {
      if (!this._initialized) {
        return;
      }
      var event = Polymer.dom(e);
      if (event.rootTarget === this) {
        return;
      }
      if (e.detail.type !== 'basic') {
        return;
      }
      var otherSettings = e.detail.settings;
      for (var _key in otherSettings) {
        var _localKey;
        var _newValue;
        if (_key === 'uri') {
          _localKey = 'requestUrl';
          _newValue = otherSettings[_key];
        } else if (_key === 'nc') {
          _newValue = Number(otherSettings[_key].replace(/0+/, ''));
          _localKey = _key;
        } else {
          _localKey = _key;
          _newValue = otherSettings[_key];
        }
        if (this[_localKey] !== _newValue) {
          this[_localKey] = _newValue;
        }
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<auth-method-ntlm>` element displays a form to provide the NTLM auth credentials.
It only provides data since NTLM authentication and all calculations must be conducted
when working on socket.

This form requires to provide at least username and password. The domain parameter is not required
in NTLM so it may be empty.

### Example
```
<auth-method-basic username="john" password="doe" domain="my-nt-domain"></auth-method-basic>
```
### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-panel` | Mixin applied to the element. | `{}`
`--auth-method-ntlm` | Mixin applied to all uath elements. | `{}`

This is very basic element. Style inputs using input's or toggle's css variables.

@group UI Elements
@element auth-method-ntlm
@demo demo/ntlm.html
-->
<dom-module id="auth-method-ntlm" assetpath="bower_components/auth-methods/">
  <template>
    <style include="auth-methods-styles">
    :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-ntlm);
    }
    </style>
    <div class="row">
      <div class="stepper">
        <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
        <span class="step-header">
          <span class="step-title">Set authorization data</span>
        </span>
      </div>
      <div class="step-content">
        <div class="line"></div>
        <form is="iron-form" id="form" autocomplete="on">
          <paper-input required="" auto-validate="" label="User name" value="{{username}}" type="text" autocomplete="on">
            <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear username"></paper-icon-button>
          </paper-input>
          <paper-masked-input required="" auto-validate="" label="Password" value="{{password}}" autocomplete="on"></paper-masked-input>
          <paper-input label="NT domain" value="{{domain}}" type="text">
            <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear domain"></paper-icon-button>
          </paper-input>
        </form>
      </div>
    </div>
  </template>
  <script>
  Polymer({
    is: 'auth-method-ntlm',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],
    /**
     * Fired when error occured when decoding hash.
     *
     * @event error
     * @param {Error} error The error object.
     */
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * The `domain` field is not required in the form so check for missing `domain` value if it's
     * required in your application.
     *
     * @event auth-settings-changed
     * @param {Object} settings Current settings containing domain, password
     * and username.
     * @param {String} type The authorization type - ntlm
     * @param {Boolean} valid True if the form has been validated.
     */
    properties: {
      // The domain parameter for the request.
      domain: {
        type: String,
        notify: true,
        value: ''
      },
      // The password.
      password: {
        type: String,
        notify: true,
        value: ''
      },
      // The username.
      username: {
        type: String,
        notify: true,
        value: ''
      }
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },

    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    observers: [
      '_settingsChanged(username, password, domain)'
    ],

    _settingsChanged: function() {
      var validationResult = this.$.form.validate();
      var settings = this._getSettings();
      var detail = {
        settings: settings,
        type: 'ntlm',
        valid: validationResult
      };
      this.fire('auth-settings-changed', detail);
    },

    _getSettings: function() {
      return {
        domain: this.domain,
        password: this.password,
        username: this.username
      };
    },

    // Removes a value from the (paper-)input going up through path of the event.
    _clearField: function(e) {
      e = Polymer.dom(e);
      var path = e.path;
      var inputTarget;
      while ((inputTarget = path.shift())) {
        if (inputTarget.nodeName === 'INPUT' || inputTarget.nodeName === 'PAPER-INPUT') {
          break;
        }
      }
      if (!inputTarget) {
        return;
      }
      inputTarget.value = '';
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
Use `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two- or
three- line items. It is a flex item that is a vertical flexbox.

    <paper-item>
      <paper-item-body two-line>
        <div>Show your status</div>
        <div secondary>Your status is visible to everyone</div>
      </paper-item-body>
    </paper-item>

The child elements with the `secondary` attribute is given secondary text styling.

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-item-body-two-line-min-height`   | Minimum height of a two-line item          | `72px`
`--paper-item-body-three-line-min-height` | Minimum height of a three-line item        | `88px`
`--paper-item-body-secondary-color`       | Foreground color for the `secondary` area  | `--secondary-text-color`
`--paper-item-body-secondary`             | Mixin applied to the `secondary` area      | `{}`

-->

<dom-module id="paper-item-body" assetpath="bower_components/paper-item/">
  <template>
    <style>
      :host {
        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */
        @apply(--layout-vertical);
        @apply(--layout-center-justified);
        @apply(--layout-flex);
      }

      :host([two-line]) {
        min-height: var(--paper-item-body-two-line-min-height, 72px);
      }

      :host([three-line]) {
        min-height: var(--paper-item-body-three-line-min-height, 88px);
      }

      :host > ::content > * {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      :host > ::content [secondary] {
        @apply(--paper-font-body1);

        color: var(--paper-item-body-secondary-color, --secondary-text-color);

        @apply(--paper-item-body-secondary);
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({
      is: 'paper-item-body'
    });
  </script>
</dom-module>
<!--
A selector for the OAuth scope. It provides an UI to enter a scope for the AOuth settings.

### Example
```
<oauth2-scope-selector></oauth2-scope-selector>
```

Use the `allowed-scopes` attribute to provide a list of predefined scopes supported by the
endpoint. When the list is set, autocomplete will be enabled in the selector. Autocomplete
is supported by the `paper-autocomplete` element.

Setting `prevent-custom-scopes` it will dissallow adding a scope that is not defined
in the `allowed-scopes` array.

#### Example
```
<oauth2-scope-selector prevent-custom-scopes></oauth2-scope-selector>
```
And in JavaScript
```
var selector = document.querySelector('oauth2-scope-selector');
selector.allowedScopes = ['profile', 'email'];
```

### Adding scope documentation
It is possible to display a documentation alongside the scope. In this case the user will see
a description below the scope name in the selected scopes list.

For it to work the `allowedScopes` array must contain objects with required keys: `label` and
`description`.

```
var scopes = [
  {'label': 'user', 'description': 'Grants read/write access to profile info only. Note that this scope includes user:email and user:follow.'},
  {'label': 'user:email', 'description': 'Grants read access to a user\'s email addresses.'},
  {'label': 'user:follow', 'description': 'Grants access to follow or unfollow other users.'}
];
var selector = document.querySelector('oauth2-scope-selector');
selector.allowedScopes = scopes;
```
The list will be passed to the `paper-autocomplete` (which is not supporting the `description`
property yet), and will render different list of selected scopes with the description.

See demo for more details.

### Styling
`<oauth2-scope-selector>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--oauth2-scope-selector` | Mixin applied to the element | `{}`
`--oauth2-scope-selector-label` | Mixin applied to the label element (title of the control) | `{}`
`--oauth2-scope-selector-list-item` | Mixin applied to each selected scope item. Consider setting `paper-item` styles for theming. | `{}`

### Theming
Use this mixins as a theming option across all ARC elements.

Custom property | Description | Default
----------------|-------------|----------
`--icon-button` | Mixin applied to `paper-icon-buttons`. | `{}`
`--icon-button-hover` | Mixin applied to `paper-icon-buttons` when hovered. | `{}`
`--form-label` | Mixin applied to all labels that are form elements | `{}`

@group UI Elements
@element oauth2-scope-selector
@demo demo/index.html
-->
<dom-module id="oauth2-scope-selector" assetpath="bower_components/oauth2-scope-selector/">
  <template>
    <style>
     :host {
      display: block;
      outline: none;
      @apply(--oauth2-scope-selector);
    }

    .form-label {
      @apply(--form-label);
      @apply(--oauth2-scope-selector-label);
    }

    .item {
      /*max-width: calc(100% - 32px);*/
      width: calc(100% - 32px);
      @apply(--oauth2-scope-selector-list-item);
    }

    paper-autocomplete {
      top: 32px;
    }

    paper-icon-button {
      color: var(--hint-trigger-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
      @apply(--icon-button);
    }

    paper-icon-button:hover {
      color: var(--hint-trigger-hover-color, rgba(0, 0, 0, 0.78));
      @apply(--icon-button-hover);
    }

    .scope-item {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .scope-display {
      @apply(--layout-flex);
      overflow: hidden;
      @apply(--arc-font-body1);
      font-size: 16px;
    }

    .scope-item[two-line] {
      margin-bottom: 12px;
    }

    .scope-item[two-line] .scope-display {
      font-weight: 400;
    }

    .scope-item-label {
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }

    .scope-display div[secondary] {
      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
      color: #737373;
    }
    </style>
    <div class="container">
      <label class="form-label">Scopes</label>
      <paper-input-container no-label-float="" invalid="[[invalid]]">
        <label>Scope value</label>
        <input is="iron-input" bind-value="{{currentValue}}" on-keydown="_keyDown" id="input" autocomplete="off">
        <paper-icon-button suffix="" icon="arc:add-circle-outline" on-tap="_appendScope" title="Add scope"></paper-icon-button>
        <paper-autocomplete target="[[_inputTarget]]" source="[[_normalizeScopes(allowedScopes)]]" on-selected="_suggestionSelected" open-on-focus="">
      </paper-autocomplete></paper-input-container>
      <paper-tooltip for="input" position="bottom">Enter authorization scopes for this API endpoint. Check your provider's documentation for more information about scopes.</paper-tooltip>
      <section class="scopes-list" role="list">
        <template is="dom-repeat" items="[[scopes]]">
          <div class="scope-item" two-line$="[[_allowedIsObject]]">
            <div class="scope-display">
              <div class="scope-item-label">[[item]]</div>
              <div secondary="">[[_computeItemDescription(item)]]</div>
            </div>
            <paper-icon-button icon="arc:remove-circle-outline" on-tap="_removeScope"></paper-icon-button>
          </div>
        </template>
      </section></div>
    
    <paper-toast text="Enter scope value to add a scope."></paper-toast>
    <paper-toast dissalowed="" text="You can't enter this scope. Use one of the provided scopes."></paper-toast>
  </template>
  <script>
  Polymer({
    is: 'oauth2-scope-selector',

    behaviors: [
      Polymer.IronControlState,
      Polymer.IronFormElementBehavior,
      Polymer.IronValidatableBehavior
    ],

    properties: {
      /**
       * List of scopes entered by the user. It can be used it pre-select scopes
       * by providing an array with scope values.
       */
      scopes: {
        type: Array,
        value: function() {
          return [];
        },
        notify: true
      },
      /**
       * Current value entered by the user. This is not a scope and it is not
       * yet in the scopes list. User has to accept the scope before it become
       * available in the scopes list.
       */
      currentValue: String,
      // Target for `paper-autocomplete`
      _inputTarget: {
        type: HTMLElement,
        value: function() {
          return this.$$('input[is="iron-input"]');
        }
      },
      /**
       * List of available scopes.
       * It can be either list of string or list of object. If this is the
       * list of object then this expects to each object contain a `label`
       * and `description` keys.
       *
       * ### Example
       * ```
       * {
       *   'label': 'user',
       *   'description': 'Grants read/write access to profile info only. '
       * }
       * ```
       * When the description is provided it will be displayed below the name
       * of the scope.
       */
      allowedScopes: Array,
      // If true then scopes that are in the `allowedScopes` list will be
      // allowed to be add.
      preventCustomScopes: Boolean,
      // Computed value, true if the `allowedScopes` is a list of objects
      _allowedIsObject: {
        type: Boolean,
        value: false,
        computed: '_computeAllowedInputType(allowedScopes)'
      },
      /**
       * Set to true to auto-validate the input value when it changes.
       */
      autoValidate: {
        type: Boolean,
        value: false
      },

      _oldTabIndex: {
        type: Number,
        value: -1
      }
    },

    hostAttributes: {
      'tabIndex': '-1'
    },

    observers: ['_handleAutoValidate(autoValidate, scopes.*)'],

    get value() {
      return this.scopes;
    },

    set value(scopes) {
      this.scopes = scopes;
    },

    // Add currently entered scope value to the scopes list.
    _appendScope: function() {
      var value = this.currentValue;
      if (!value) {
        this.$$('paper-toast').opened = true;
        return;
      }
      this.currentValue = '';
      this.append(value);
    },

    // Remove scope button click handler
    _removeScope: function(e) {
      var item = this.$$('template[is="dom-repeat"]').itemForElement(e.target);
      if (!item) {
        return;
      }
      var all = this.scopes;
      var index = all.indexOf(item);
      if (index === -1) {
        return;
      }
      this.splice('scopes', index, 1);
    },
    // Handler for the `paper-autocomplete` selected event.
    _suggestionSelected: function(e, detail) {
      e.preventDefault();

      var scope = detail.value;
      this.append(scope);
      this.async(function() {
        this.currentValue = '';
      }, 1);
    },
    /**
     * Adds a scope to the list. The same as pushing item to the `scopes`
     * array but it will check for duplicates first.
     */
    append: function(scope) {
      var scopeValue = typeof scope === 'string' ? scope : scope.value;
      var all = this.scopes;
      var index = all.indexOf(scopeValue);
      if (index !== -1) {
        return;
      }
      if (this.preventCustomScopes && this.allowedScopes &&
        this.allowedScopes.length) {
        index = this._findAllowedScopeIndex(scopeValue);
        if (index === -1) {
          this.$$('paper-toast[dissalowed]').opened = true;
          return;
        }
      }
      this.push('scopes', scopeValue);
    },
    /**
     * Finds an index if the `scope` in the `allowedScopes` list.
     *
     * @param {String} scope A scope value (label) to find.
     * @return {Number} An index of scope or `-1` if not found.
     */
    _findAllowedScopeIndex: function(scope) {
      var index = -1;
      var scopes = this.allowedScopes;
      if (!scopes || !scopes.length || !scope) {
        return index;
      }
      if (this._allowedIsObject) {
        for (var i = 0, len = scopes.length; i < len; i++) {
          if (scopes[i].label === scope) {
            index = i;
            break;
          }
        }
      } else {
        index = this.allowedScopes.indexOf(scope);
      }
      return index;
    },
    // A handler for the input's key down event. Handles ENTER press.
    _keyDown: function(e) {
      if (e.keyCode !== 13) {
        return;
      }
      if (this.$$('paper-autocomplete').opened) {
        return;
      }
      this._appendScope();
      this.async(function() {
        this.currentValue = '';
        this.$$('input[is="iron-input"]').focus();
        // this.$$('input[is="iron-input"]').bindValue = '';
      }, 10);
    },
    // Normalize scopes to use with autocomplete
    _normalizeScopes: function(scopes) {
      if (!scopes || !scopes.length) {
        return undefined;
      }
      return scopes.map(function(item) {
        if (typeof item === 'string') {
          return item;
        }
        return {
          'display': item.label,
          'value': item.label,
        };
      });
    },
    /**
     * Compute function for the _allowedIsObject. Check first item of the
     * `allowedScopes` array if it is an object (return `true`) or
     * string (return `false`);
     */
    _computeAllowedInputType: function(allowedScopes) {
      if (!allowedScopes || !allowedScopes.length) {
        return false;
      }
      var first = allowedScopes[0];
      return typeof first !== 'string';
    },
    /**
     * Returns a description for the selected scope.
     *
     * @return {String} Description of the scope or `` (empty string) if the
     * item do not exists.
     */
    _computeItemDescription: function(scope) {
      var index = this._findAllowedScopeIndex(scope);
      if (index === -1) {
        return '';
      }
      return this.allowedScopes[index].description;
    },

    /**
     * Returns false if the element is required and does not have a selection,
     * and true otherwise.
     *
     * @return {boolean} true if `required` is false, or if `required` is true
     * and the element has a valid selection.
     */
    _getValidity: function() {
      return this.disabled || !this.required || (this.required &&
        !!(this.scopes && this.scopes.length));
    },

    _handleAutoValidate: function(autoValidate) {
      if (autoValidate) {
        this.invalid = !this._getValidity();
      }
    }

  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 jarrod
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>// All polyfills source: Mozilla Developer Network
if (typeof Object.assign !== 'function') {
  Object.assign = function(target) {
    'use strict';
    if (target === null) {
      throw new TypeError('Cannot convert undefined or null to object');
    }
    var to = Object(target);
    for (var index = 1; index < arguments.length; index++) {
      var nextSource = arguments[index];
      if (nextSource !== null) {
        for (var nextKey in nextSource) {
          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
    }
    return to;
  };
}
if (!Object.keys) {
  Object.keys = (function() {
    'use strict';
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    var hasDontEnumBug = !({
      toString: null
    }).propertyIsEnumerable('toString');
    var dontEnums = [
      'toString',
      'toLocaleString',
      'valueOf',
      'hasOwnProperty',
      'isPrototypeOf',
      'propertyIsEnumerable',
      'constructor'
    ];
    var dontEnumsLength = dontEnums.length;
    return function(obj) {
      if (typeof obj !== 'function' && (typeof obj !== 'object' || obj === null)) {
        throw new TypeError('Object.keys called on non-object');
      }

      var result = [];
      var prop;
      var i;

      for (prop in obj) {
        if (hasOwnProperty.call(obj, prop)) {
          result.push(prop);
        }
      }

      if (hasDontEnumBug) {
        for (i = 0; i < dontEnumsLength; i++) {
          if (hasOwnProperty.call(obj, dontEnums[i])) {
            result.push(dontEnums[i]);
          }
        }
      }
      return result;
    };
  }());
}
if (!Array.isArray) {
  Array.isArray = function(arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
  };
}
</script>
<!--
`<arc-polyfills>` Set of web polyfills used in ARC project

Just import the element into your element / project and it will provide polyfills for most of
APIs used by the ARC elements.

```html
<head>
...
<link rel="import" href="bower_components/arc-polyfills/arc-polyfills.html">
</head>
```

@group Logic Elements
@element arc-polyfills
-->
<script>
Polymer({
  is: 'arc-polyfills'
});
</script>
<!--
The `<auth-method-oauth2>` element displays a form to provide the OAuth 2.0 settings.

### Example
```
<auth-method-oauth2></auth-method-oauth2>
```

This element uses `oauth2-scope-selector` so the `allowedScopes`, `preventCustomScopes` and
`scopes` properties will be set on this element. See documentation of `oauth2-scope-selector`
for more description.

### Forcing the user to select scope from the list
```
<auth-method-oauth2 prevent-custom-scopes></auth-method-oauth2>
```
```
var form = document.querySelector('auth-method-oauth2');
form.allowedScopes = ['profile', 'email'];
```

## Authorizing the user
The element sends the `oauth2-token-requested` with the OAuth settings provided with the form.
Any element / app can handle this event and perform authorization.

When the authorization is performed the app / other element should set back `tokenValue` property
of this element or send the `oauth2-token-response` with token response value so the change will
can reflected in the UI.
ARC provides the `oauth2-authorization` element that can handle this events.

### Example
```
<auth-method-oauth2></auth-method-oauth2>
<oauth2-authorization></oauth2-authorization>
```
The `oauth2-authorization` can be set anywhere in the DOM up from this element siblings to the
body. See demo for example usage.

## Redirect URL
Most OAuth 2 providers requires setting the redirect URL with the request. This can't be changed
by the user and redirect URL can be only set in the provider's settings panel. The element
accepts the `redirectUrl` property which will be displayed to the user that (s)he has to set up
this callback URL in the OAuth provider settings. It can be any URL where token / code will be
handled properly and the value returned to the `oauth2-authorization` element.
See `oauth2-authorization` documentation for more information.

If you going to use `oauth2-authorization` popup then the redirect URL value must be set to:
`/bower_components/oauth-authorization/oauth-popup.html`. Mind missing `2` in `oauth-authorization`.
This popup is a common popup for auth methods.

### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-oauth2` | Mixin applied to the element. | `{}`
`--auth-method-panel` | Mixin applied to all auth elements. | `{}`

### Theming
Use this mixins as a theming option across all ARC elements.

Custom property | Description | Default
----------------|-------------|----------
`--icon-button` | Mixin applied to `paper-icon-buttons`. | `{}`
`--icon-button-hover` | Mixin applied to `paper-icon-buttons` when hovered. | `{}`
`--input-line-color` | Mixin applied to the input underline | `{}`
`--form-label` | Mixin applied to form labels. It will not affect `paper-*` labels | `{}`
`--auth-button` | Mixin applied to authorization and next buttons` | `{}`
`--auth-button-hover` | Mixin for :hover state for authorization and next buttons` | `{}`
`--auth-button-disabled` | Mixin for disabled state for authorization and next buttons` | `{}`

@group UI Elements
@element auth-method-oauth2
@demo demo/oauth2.html
-->
<dom-module id="auth-method-oauth2" assetpath="bower_components/auth-methods/">
  <template strip-whitespace="">
    <style include="auth-methods-styles">
     :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-oauth2);

      --paper-icon-button: {
        color: var(--hint-trigger-color, rgba(0, 0, 0, 0.54));
        transition: color 0.25s linear;
        @apply(--icon-button);
      }

      --paper-icon-button-hover: {
        color: var(--hint-trigger-hover-color, rgba(0, 0, 0, 0.78));
        @apply(--icon-button-hover);
      }
    }

    .form-panel {
      @apply(--layout-horizontal);
    }

    .form {
      @apply(--layout-flex);
      max-width: 700px;
    }

    oauth2-scope-selector {
      margin: 24px 0;
      outline: none;
    }

    .grant-dropdown {
      width: 320px;
    }

    .next-button,
    .auth-button {
      color: var(--accent-color);
      background-color: #fff;
      @apply(--auth-button);
    }

    .next-button:hover,
    .auth-button:hover {
      @apply(--auth-button-hover);
    }

    .next-button[disabled],
    .auth-button[disabled] {
      background-color: rgba(0, 0, 0, 0.24);
      color: rgba(0, 0, 0, 0.54);
      @apply(--auth-button-disabled);
    }

    .authorize-actions {
      margin-top: 12px;
    }

    .read-only-param-field {
      background-color: rgba(0, 0, 0, 0.12);
      @apply(--arc-font-body1);
      display: block;
      white-space: pre-wrap;
      word-wrap: break-word;
      word-break: break-all;
      @apply(--layout-horizontal);
    }

    .read-only-param-field.padding {
      padding: 12px;
    }

    .read-only-param-field.no-background {
      background-color: transparent;
    }

    .current-token {
      margin-top: 24px;
    }

    .top-line {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .enable-container {
      @apply(--layout-flex);
    }

    label {
      @apply(--form-label);
    }

    .token-info,
    .redirect-info {
      @apply(--arc-font-body1);
      font-weight: 200;
      color: rgba(0, 0, 0, 0.54);
    }

    .code {
      font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
      -webkit-font-smoothing: antialiased;
      @apply(--arc-font-code1);
      @apply(--layout-flex);
    }

    .token-label {
      font-weight: 500;
      font-size: 16px;
    }

    .current-token {
      padding: 12px;
      border: 2px #3D8099 solid;
    }

    .current-token,
    .redirect-section,
    oauth2-scope-selector {
      max-width: 560px;
      width: calc(100% - 16px);
      box-sizing: border-box;
    }

    *[hiddable] {
      display: none;
    }

    *[data-grant="authorization_code"] *[data-visible~="authorization_code"],
    *[data-grant="client_credentials"] *[data-visible~="client_credentials"],
    *[data-grant="implicit"] *[data-visible~="implicit"],
    *[data-grant="password"] *[data-visible~="password"] {
      display: block;
    }
    </style>
    <form is="iron-form" id="form" data-grant$="[[grantType]]">
      <div class="row" hidden$="[[noGrantType]]">
        <div class$="[[_computeStepperClass(isSelectedType)]]" on-tap="_clearTypeSelection">
          <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
          <span class="step-header">
            <span class="step-title">
              Select OAuth 2.0 grant type
              <iron-icon icon="arc:edit" class="edit-icon" title="Click to make changes"></iron-icon>
            </span>
          <span class="step-selection" hidden$="[[!isSelectedType]]">[[_computeSelectedTypeLabel(grantType)]]</span>
          </span>
          <paper-ripple></paper-ripple>
        </div>
        <div class="step-content">
          <div class="line"></div>
          <iron-collapse opened="[[typeSelectorOpened]]" class="content">
            <div class="content">
              <paper-dropdown-menu label="Grant type" class="grant-dropdown" required="" auto-validate="">
                <paper-listbox class="dropdown-content" selected="{{grantType}}" attr-for-selected="data-type">
                  <template is="dom-repeat" items="[[grantTypes]]">
                    <paper-item data-type="[[item.type]]">[[item.label]]</paper-item>
                  </template>
                </paper-listbox>
              </paper-dropdown-menu>
            </div>
          </iron-collapse>
        </div>
      </div>
      <div class="row">
        <div class="stepper">
          <span class="step">[[_computeStep(stepStartIndex, 2)]]</span>
          <span class="step-header">
            <span class="step-title">Set authorization data</span>
          </span>
        </div>
        <div class="step-content" id="authDataForm">
          <div class="line"></div>
          <div class="content">
            <paper-masked-input auto-validate="" required="" label="Client id" value="{{clientId}}" id="clientId" autocomplete="on"></paper-masked-input>
            <paper-tooltip for="clientId" position="bottom">Your client ID registered in your OAuth provider.</paper-tooltip>
            <paper-masked-input auto-validate="" required="" label="Client secret" value="{{clientSecret}}" id="clientSecret" hiddable="" data-visible="client_credentials authorization_code" disabled$="[[_isFieldHidden(grantType, 'client_credentials', 'authorization_code')]]" autocomplete="on"></paper-masked-input>
            <paper-tooltip for="clientSecret" position="bottom">The client secret is generated by your provider unique string for your app. Check provider's console to get the code.</paper-tooltip>
            <template is="dom-if" if="[[isAdvanced]]">
              <paper-checkbox class="adv-settings-input" checked="{{advancedOpened}}">Advanced settings</paper-checkbox>
            </template>
            <iron-collapse opened="[[advancedOpened]]">
              <paper-input auto-validate="" required="" label="Authorization url" value="{{authUrl}}" id="authUrl" hiddable="" data-visible="implicit authorization_code" disabled$="[[_isFieldHidden(grantType, 'implicit', 'authorization_code')]]" type="text" autocomplete="on">
                <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
              </paper-input>
              <paper-tooltip for="authUrl" position="bottom">The authorization URL initializes the OAuth flow. If you don't know the authorization URL check your provider's documentation.</paper-tooltip>
              <paper-input auto-validate="" required="" label="Access token URL" value="{{accessTokenUrl}}" id="accessTokenUrl" hiddable="" data-visible="client_credentials authorization_code password" disabled$="[[_isFieldHidden(grantType, 'client_credentials', 'authorization_code', 'password')]]" type="text" autocomplete="on">
                <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
              </paper-input>
              <paper-tooltip for="accessTokenUrl" position="bottom">The access token URL is used by server implementations to exchange access code for access token.</paper-tooltip>
              <paper-masked-input auto-validate="" required="" label="Username" value="{{username}}" id="username" hiddable="" data-visible="password" disabled$="[[_isFieldHidden(grantType, 'password')]]" autocomplete="on"></paper-masked-input>
              <paper-tooltip for="username" position="bottom">The username required for this OAuth authentication.</paper-tooltip>
              <paper-masked-input auto-validate="" required="" label="Password" value="{{password}}" id="password" hiddable="" data-visible="password" disabled$="[[_isFieldHidden(grantType, 'password')]]" autocomplete="on"></paper-masked-input>
              <paper-tooltip for="password" position="bottom">The password required for this OAuth authentication.</paper-tooltip>
              <div hiddable="" data-visible="implicit authorization_code">
                <oauth2-scope-selector required="" auto-validate="" allowed-scopes="[[allowedScopes]]" prevent-custom-scopes="[[preventCustomScopes]]" scopes="{{scopes}}" disabled$="[[_isFieldHidden(grantType, 'implicit', 'authorization_code')]]"></oauth2-scope-selector>
              </div>
            </iron-collapse>
          </div>
        </div>
      </div>
      <div class="row" hiddable="" data-visible="implicit authorization_code">
        <div class="stepper">
          <span class="step">[[_computeStep(stepStartIndex, 3)]]</span>
          <span class="step-header">
            <span class="step-title">Set redirect URL</span>
          </span>
        </div>
        <div class="step-content">
          <div class="line"></div>
          <div class="content">
            <div class="redirect-section">
              <p class="redirect-info">Set this redirect URL in OAuth 2.0 provider settings.</p>
              <p class="read-only-param-field padding">
                <span class="code" tabindex="0" id="redirectLabel">[[redirectUrl]]</span>
                <paper-icon-button icon="arc:content-copy" on-tap="_copyRedirectUrl" data-src="redirect" id="redirectCopyButton"></paper-icon-button>
              </p>
            </div>
            <div class="authorize-actions" hidden$="[[hasTokenValue]]">
              <paper-button disabled$="[[_authorizing]]" class="auth-button" on-tap="authorize">Get access token</paper-button>
              <paper-spinner active="[[_authorizing]]"></paper-spinner>
            </div>
            <div class="current-token" hidden$="[[!hasTokenValue]]">
              <label class="token-label">Current token</label>
              <p class="token-info">The token will be set to the corresponding field (header or query parameter).</p>
              <p class="read-only-param-field no-background">
                <span class="code" tabindex="0" id="tokenLabel">[[tokenValue]]</span>
                <paper-icon-button icon="arc:content-copy" on-tap="_copyRedirectUrl" data-src="token" id="tokenCopyButton"></paper-icon-button>
              </p>
              <div class="authorize-actions">
                <paper-button disabled$="[[_authorizing]]" class="auth-button" on-tap="authorize">Refresh access token</paper-button>
                <paper-spinner active="[[_authorizing]]"></paper-spinner>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
    <paper-toast text="" duration="5000"></paper-toast>
  </template>
  <script>
  Polymer({
    is: 'auth-method-oauth2',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],

    /**
     * Fired when user requested to perform an authorization.
     * The details object vary depends on the `grantType` property.
     * However this event always fire two properties set on the `detail` object: `type` and
     * `clientId`.
     *
     * @event oauth2-token-requested
     * @param {String} type The type of grant option selected by the user. `implicit` is
     * the browser flow where token ir requested. `authorization_code` or server flow is where
     * client asks for the authorization code and exchange it later for the auth token using
     * client secret. Other options are `password` and `client_credentials`.
     * @param {String} clientId Every type requires `clientId`.
     * @param {String} authorizationUrl Token authorization URL. Used in `implicit` and
     * `authorization_code` types. In both cases means the initial endpoint to request for token
     * or the authorization code.
     * @param {Array<String>} scopes A list of scopes seleted by the user. Used in `implicit`
     * and `authorization_code` types.
     * @param {String} redirectUrl A redirect URL of the client after authorization (or error).
     * This must be set in the provider's OAuth settings. Callback URL must communicate with
     * the app to pass the information back to the application. User can't change the `redirectUrl`
     * but the app shouldn't rely on this value since in browser environment it is possible to
     * temper with variables. The `redirectUrl` must be set to this element by owner app (which
     * must know this value). A `redirectUrl` is set for `implicit` and `authorization_code`
     * types.
     * @param {String} clientSecret The client secret that user can get from the OAuth provider
     * settings console. User in `authorization_code` and `client_credentials` types.
     * @param {String} accessTokenUrl An URL to exchange code for the access token. Used by
     * `authorization_code`, `client_credentials` and `password` types.
     * @param {String} username Used with `password` type.
     * @param {String} password Used with `password` type.
     */
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * This event will set current settings as a detail object which are the same as for the
     * `oauth2-token-requested` event. Additionally it will contain a `tokenValue` property. This
     * valye can be `undefined` if token hasn't been requested yet by the user.
     * Clients should support a situaltion when the user do not request the token before requesting
     * the resource and perform authorization.
     *
     * @event auth-settings-changed
     * @param {Object} settings See the `oauth2-token-requested` for detailed
     * description
     * @param {String} type The authentication type selected by the user.
     * @param {Boolean} valid True if the form has been validated.
     */
    /**
     * Fired when the request token has been obtained and it's ready to serve.
     * Because only one auth panel can be displayed ad a time it can be assumed
     * that if new token has been obtained then it is current authorization
     * method.
     *
     * @event oauth2-token-ready
     * @param {String} token The OAuth 2.0 token
     */
    properties: {
      // Seleted authorization grand type.
      grantType: {
        type: String,
        value: '',
        notify: true
      },
      // Computed value, true if the `grantType` is set.
      isSelectedType: {
        type: Boolean,
        value: false,
        computed: '_computeIsSelectedType(grantType)'
      },
      /**
       * If true, OAuth flow selector will be collapsed.
       */
      forceHideTypeSelector: {
        type: Boolean,
        value: false
      },
      // Computed value, true if the type selector is allowd to be hidden
      typeSelectorOpened: {
        type: Boolean,
        value: false,
        // jscs:disable maximumLineLength
        computed: '_computeTypeSelectorOpened(isSelectedType, forceHideTypeSelector, _typeSelectorForceOpened)'
        // jscs:enable maximumLineLength
      },
      // The client ID for the auth token.
      clientId: {
        type: String,
        notify: true,
        value: ''
      },
      // The client secret. It to be used when selected server flow.
      clientSecret: {
        type: String,
        notify: true,
        value: ''
      },
      // The authorization URL to initialize the OAuth flow.
      authUrl: {
        type: String,
        notify: true,
        value: ''
      },
      // The access token URL to exchange code for token. It is used in server flow.
      accessTokenUrl: {
        type: String,
        notify: true,
        value: ''
      },
      // The password. To be used with the password flow.
      password: {
        type: String,
        notify: true,
        value: ''
      },
      // The password. To be used with the password flow.
      username: {
        type: String,
        notify: true,
        value: ''
      },
      /**
       * A callback URL to be used with this element.
       * User can't change the callback URL and it will inform the user to setup OAuth to use
       * this value.
       *
       * This is relevant when selected flow is the browser flow.
       */
      redirectUrl: String,
      /**
       * List of user selected scopes.
       * It can be pre-populated with list of scopes (array of strings).
       */
      scopes: Array,
      /**
       * List of pre-defined scopes to choose from. It will be passed to the `oauth2-scope-selector`
       * element.
       */
      allowedScopes: Array,
      /**
       * If true then the `oauth2-scope-selector` will disallow to add a scope that is not
       * in the `allowedScopes` list. Has no effect if the `allowedScopes` is not set.
       */
      preventCustomScopes: Boolean,
      // True when currently authorizing the user.
      _authorizing: Boolean,
      /**
       * When the user authorized the app it should be set to the token value.
       * This element do not perform authorization. Other elements must intercept
       * `oauth2-token-requested` and perform the authorization. As a result the element
       * performing an authorization should set back the auth token on the event target object
       * (this element).
       */
      tokenValue: {
        type: String,
        observer: '_tokenValueChanged',
        value: ''
      },
      // Computed value, true if access token is set.
      hasTokenValue: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      /**
       * RAML `securedBy` obejct definition.
       * If set, it will prefill the settings in the auth panel.
       */
      ramlSettings: Object,
      // List of all possible grant types;
      _supportedGrantTypes: {
        type: Array,
        value: function() {
          return [{
            type: 'implicit',
            label: 'Access token (browser flow)'
          }, {
            type: 'authorization_code',
            label: 'Authorization code (server flow)'
          }, {
            type: 'client_credentials',
            label: 'Client credentials'
          }, {
            type: 'password',
            label: 'Password'
          }];
        }
      },
      // Currently available grant types.
      grantTypes: {
        type: Array
      },
      // Tru whem the element has been initialized.
      _initialized: Boolean,
      // If true, the flow type selector will be forced to be opened
      _typeSelectorForceOpened: {
        type: Boolean,
        value: false
      },
      /**
       * The element will automatically hide following fileds it the element has been initialized
       * with values for this fields (without user interaction):
       *
       * - autorization url
       * - token url
       * - scopes
       *
       * If all this values are set then the element will set `isAdvanced` attribute and set
       * `advancedOpened` to false
       *
       * Setting this property will prevent this behavior.
       */
      noAuto: Boolean,
      /**
       * If set it will render autorization url, token url and scopes as advanced options
       * activated on user interaction.
       */
      isAdvanced: Boolean,
      /**
       * If true then the advanced options are opened.
       */
      advancedOpened: Boolean,
      /**
       * If set, the grant typr selector will be hidden from the UI.
       */
      noGrantType: {
        type: Boolean,
        observer: '_noGrantTypeChanged'
      }
    },

    observers: [
      // jscs:disable maximumLineLength
      '_settingsChanged(grantType, clientId, clientSecret, authUrl, accessTokenUrl, password, username, scopes.*, tokenValue, _initialized)',
      // jscs:enable maximumLineLength
      '_ramlSettingsChanged(ramlSettings.*)',
      '_updateStepperState(noStepper)'
    ],

    ready: function() {
      this._initialized = true;
      this._autoHide();
    },

    attached: function() {
      this.listen(window, 'oauth2-error', '_oauth2ErrorHandler');
      this.listen(window, 'oauth2-token-response', '_oauth2SccessHandler');
      this.listen(window, 'auth-settings-changed', '_onAuthSettings');
      this._updateGrantTypes();
    },

    detached: function() {
      this.unlisten(window, 'oauth2-error', '_oauth2ErrorHandler');
      this.unlisten(window, 'oauth2-token-response', '_oauth2SccessHandler');
      this.unlisten(window, 'auth-settings-changed', '_onAuthSettings');
    },
    /**
     * This function hides all non-crucial fields that has been pre-filled when element has been
     * initialize (values not provided by the user). Hidden fields will be available under
     * "advanced" options.
     *
     * To prevent this behavior set `no-auto` attribute on this element.
     */
    _autoHide: function() {
      if (this.noAuto) {
        this.advancedOpened = true;
        return;
      }
      if (!!this.authUrl && !!this.accessTokenUrl && !!(this.scopes && this.scopes.length)) {
        this.isAdvanced = true;
        this.advancedOpened = false;
      } else {
        this.advancedOpened = true;
      }
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },
    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    _settingsChanged: function() {
      var validationResult = this.$.form.validate();
      var settings = this._getSettings();
      var detail = {
        settings: settings,
        type: 'oauth2',
        valid: validationResult
      };
      this.fire('auth-settings-changed', detail);
    },

    // Removes a value from the (paper-)input going up through path of the event.
    _clearField: function(e) {
      e = Polymer.dom(e);
      var path = e.path;
      var inputTarget;
      while ((inputTarget = path.shift())) {
        if (inputTarget.nodeName === 'INPUT' || inputTarget.nodeName === 'PAPER-INPUT') {
          break;
        }
      }
      if (!inputTarget) {
        return;
      }
      inputTarget.value = '';
    },
    // Checks if the HTML element should be visible in the UI for given properties.
    _isFieldHidden: function() {
      var args = Array.from(arguments);
      var grantType = args.splice(0, 1)[0];
      return args.indexOf(grantType) === -1;
    },

    // Handler for "authorize" button click. Sends the `oauth2-token-requested` event.
    authorize: function() {
      var validationResult = this.$.form.validate();
      if (!validationResult) {
        return;
      }
      var detail = this._getSettings();
      this._authorizing = true;
      this.fire('oauth2-token-requested', detail);
    },

    /**
     * Returns current configuration of the OAuth2.
     *
     * @return {Object} Current OAuth2 configuration.
     */
    _getSettings: function() {
      var detail = {
        type: this.grantType,
        clientId: this.clientId,
        tokenValue: this.tokenValue || ''
      };
      switch (this.grantType) {
        case 'implicit':
          // The browser flow.
          detail.authorizationUrl = this.authUrl;
          detail.redirectUrl = this.redirectUrl;
          detail.scopes = this.scopes;
          break;
        case 'authorization_code':
          // The server flow.
          detail.authorizationUrl = this.authUrl;
          detail.clientSecret = this.clientSecret;
          detail.accessTokenUrl = this.accessTokenUrl;
          detail.redirectUrl = this.redirectUrl;
          detail.scopes = this.scopes;
          break;
        case 'client_credentials':
          // The server flow.
          detail.clientSecret = this.clientSecret;
          detail.accessTokenUrl = this.accessTokenUrl;
          break;
        case 'password':
          // The server flow.
          detail.username = this.username;
          detail.password = this.password;
          detail.accessTokenUrl = this.accessTokenUrl;
          break;
      }
      return detail;
    },
    // Handler for the OAuth token value change. Enables the method if not active.
    _tokenValueChanged: function(newValue) {
      this._authorizing = false;
      if (newValue) {
        this._setHasTokenValue(true);
      } else {
        this._setHasTokenValue(false);
      }
    },

    _oauth2ErrorHandler: function(e, detail) {
      this._authorizing = false;

      var toast = this.$$('paper-toast');
      toast.text = detail.message;
      toast.opened = true;
    },

    _oauth2SccessHandler: function(e, detail) {
      if (detail.accessToken && detail.accessToken !== this.tokenValue) {
        this.set('tokenValue', detail.accessToken);
        this.fire('oauth2-token-ready', {
          token: detail.accessToken
        });
      }
    },

    _ramlSettingsChanged: function(record) {
      if (!record || !record.base) {
        return;
      }
      var type = record.base;
      if (!type || !type.settings) {
        return;
      }
      this.preFill(type.settings);
      this._autoHide();
    },

    preFill: function(settings) {
      if (!settings) {
        throw new Error('The `settings` argument is not set.');
      }
      if (settings.authorizationGrants &&
        settings.authorizationGrants instanceof Array &&
        settings.authorizationGrants.length) {
        var index = settings.authorizationGrants.indexOf('code');
        if (index !== -1) {
          settings.authorizationGrants[index] = 'authorization_code';
        }
        this._updateGrantTypes(settings.authorizationGrants);
      } else {
        this._updateGrantTypes();
      }
      if (settings.accessTokenUri) {
        this.accessTokenUrl = settings.accessTokenUri;
      }
      if (settings.authorizationUri) {
        this.authUrl = settings.authorizationUri;
      }
      if (settings.scopes) {
        this.scopes = settings.scopes;
      }
    },
    /**
     * Updates list of OAuth grant types supported by current endpoint.
     * The information should be available in RAML file.
     *
     * @param {Array<String>?} supportedTypes List of supported types. If empty
     * or not set then all available types will be displayed.
     */
    _updateGrantTypes: function(supportedTypes) {
      var available = this._supportedGrantTypes.map(function(item) {
        return item;
      });
      if (!supportedTypes || !supportedTypes.length) {
        this.set('grantTypes', available);
        return;
      }
      var i;
      for (i = available.length - 1; i >= 0; i--) {
        if (supportedTypes.indexOf(available[i].type) === -1) {
          available.splice(i, 1);
        }
      }
      this.set('grantTypes', available);
      // check if current selection is still available
      var current = this.grantType;
      var hasCurrent = false;
      for (i = available.length - 1; i >= 0; i--) {
        if (available[i].type === current) {
          hasCurrent = true;
          break;
        }
      }
      if (!hasCurrent) {
        if (available && available[0]) {
          this.set('grantType', available[0].type);
        } else {
          this.set('grantType', '');
        }
      }
    },

    // Computes boolean value if the `grantType` is set.
    _computeIsSelectedType: function(grantType) {
      return !!grantType;
    },

    _computeStepperClass: function(isSelected) {
      var cls = 'stepper';
      if (isSelected) {
        cls += ' active';
      }
      return cls;
    },

    _clearTypeSelection: function() {
      this.grantType = '';
    },

    _computeSelectedTypeLabel: function(grantType) {
      switch (grantType) {
        case 'implicit':
          return 'Access token (browser flow)';
        case 'authorization_code':
          return 'Authorization code (server flow)';
        case 'client_credentials':
          return 'Client credentials';
        case 'password':
          return 'Password';
      }
    },

    _copyRedirectUrl: function(e) {
      e = Polymer.dom(e);
      var src = e.localTarget.dataset.src;
      if (!src) {
        throw new Error('Copy to clipboard require the data-src attribute.');
      }
      var params;
      switch (src) {
        case 'redirect':
          params = {
            container: this.$.redirectLabel,
            button: this.$.redirectCopyButton
          };
          break;
        case 'token':
          params = {
            container: this.$.tokenLabel,
            button: this.$.tokenCopyButton
          };
          break;
        default:
          throw new Error('Unknown src value');
      }
      return this._copyToClipboard(params);
    },

    _copyToClipboard: function(params) {
      // From https://github.com/google/material-design-lite/blob/master/docs/_assets/snippets.js
      var snipRange = document.createRange();
      snipRange.selectNodeContents(params.container);
      var selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(snipRange);
      var result = false;
      try {
        result = document.execCommand('copy');
        params.button.icon = 'done';
      } catch (err) {
        // Copy command is not available
        Polymer.Base._error(err);
        params.button.icon = 'error';
      }
      // Return to the copy button after a second.
      setTimeout(this._resetCopyButtonState.bind(this, params.button), 1000);
      selection.removeAllRanges();
      return result;
    },

    _resetCopyButtonState: function(button) {
      button.icon = 'content-copy';
    },

    /**
     * Handler to the `auth-settings-changed` event (fired by all auth panels).
     * If the event was fired by other element with the same method ttype
     * then the form will be updated to incomming values.
     * This helps to sync changes between elements in the same app.
     */
    _onAuthSettings: function(e) {
      if (!this._initialized) {
        return;
      }
      var event = Polymer.dom(e);
      if (event.rootTarget === this) {
        return;
      }
      if (e.detail.type !== 'oauth2') {
        return;
      }

      var otherSettings = e.detail.settings;
      for (var _key in otherSettings) {
        var _localKey;
        if (_key === 'type') {
          _localKey = 'grantType';
        } else if (_key === 'authorizationUrl') {
          _localKey = 'authUrl';
        } else {
          _localKey = _key;
        }
        if (this[_localKey] !== otherSettings[_key]) {
          this[_localKey] = otherSettings[_key];
        }
      }
    },

    _updateStepperState: function(noStepper) {
      this._typeSelectorForceOpened = noStepper ? true : false; // can be undefined
    },

    _computeTypeSelectorOpened: function(isSelectedType, forceHideTypeSelector,
      _typeSelectorForceOpened) {
      if (forceHideTypeSelector) {
        return false;
      }
      if (_typeSelectorForceOpened || !isSelectedType) {
        return true;
      }
      return false;
    },

    _noGrantTypeChanged: function(newValue, oldValue) {
      if (newValue) {
        this.stepStartIndex--;
      } else if (oldValue !== undefined) {
        this.stepStartIndex++;
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<auth-method-oauth1>` element displays a form to provide the OAuth 1a settings.

### Example
```
<auth-method-oauth1 consumer-key="xyz" toke="abc"></auth-method-oauth1>
```

### Required form fields
- Consumer key
- Token
- Timestamp
- Nonce
- Signature method

### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-oauth1` | Mixin applied to the element. | `{}`
`--auth-method-panel` | Mixin applied to all auth elements. | `{}`

### Theming
Use this mixins as a theming option across all ARC elements.

Custom property | Description | Default
----------------|-------------|----------
`--icon-button` | Mixin applied to `paper-icon-buttons`. | `{}`
`--icon-button-hover` | Mixin applied to `paper-icon-buttons` when hovered. | `{}`
`--input-line-color` | Mixin applied to the input underline | `{}`
`--form-label` | Mixin applied to form labels. It will not affect `paper-*` labels | `{}`
`--auth-button` | Mixin applied to authorization and next buttons` | `{}`
`--auth-button-hover` | Mixin for :hover state for authorization and next buttons` | `{}`
`--auth-button-disabled` | Mixin for disabled state for authorization and next buttons` | `{}`

@group UI Elements
@element auth-method-oauth1
@demo demo/oauth1.html
-->
<dom-module id="auth-method-oauth1" assetpath="bower_components/auth-methods/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-oauth1);

      --paper-icon-button: {
        color: var(--hint-trigger-color, rgba(0, 0, 0, 0.54));
        transition: color 0.25s linear;
        @apply(--icon-button);
      }

      --paper-icon-button-hover: {
        color: var(--hint-trigger-hover-color, rgba(0, 0, 0, 0.78));
        @apply(--icon-button-hover);
      }

      --paper-input-container-focus-color: {
        @apply(--input-line-color);
      }
    }

    paper-input,
    paper-masked-input {
      max-width: 700px;
    }

    .hints .hint {
      display: none;
      color: rgba(0, 0, 0, 0.54);
    }

    .hints .hint[active] {
      display: block;
    }

    .form-panel {
      @apply(--layout-horizontal);
    }

    .form {
      @apply(--layout-flex);
      max-width: 700px;
    }

    .hints {
      margin-left: 0;
      padding-left: 0;
      border-left: 1px rgba(0,0,0,0) solid;
      max-width: 300px;
      width: 0;
      @apply(--paper-font-body1);
      transition: width 0.35s linear, margin 0.2s linear, padding 0.2s linear, border-color 0.15s linear;
      overflow: hidden;
    }

    .hints.active {
      width: 100%;
      margin-left: 16px;
      padding-left: 16px;
      border-left-color: rgba(0,0,0,0.12);
      overflow: auto;
    }

    oauth2-scope-selector {
      margin: 24px 0;
    }

    .grant-dropdown {
      width: 320px;
    }

    .auth-button {
      background-color: var(--primary-color);
      color: rgba(255, 255, 255, 0.87);
      @apply(--auth-button);
    }

    .auth-button:hover {
      @apply(--auth-button-hover);
    }

    .auth-button[disabled] {
      background-color: rgba(0, 0, 0, 0.24);
      color: rgba(0, 0, 0, 0.54);
      @apply(--auth-button-disabled);
    }

    .authorize-actions {
      margin-top: 12px;
    }

    .read-only-param-field {
      padding: 12px;
      background-color: rgba(0, 0, 0, 0.12);
      @apply(--paper-font-body1);
      display: block;
      white-space: pre-wrap;
      word-wrap: break-word;
      word-break: break-all;
    }

    .current-token {
      margin-top: 24px;
    }

    .top-line {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .enable-container {
      @apply(--layout-flex);
    }

    label {
      @apply(--form-label);
    }

    </style>

    <div class="form-panel">
      <div class="form">
        <form is="iron-form" id="form">

          <paper-masked-input auto-validate="" required="" label="Consumer key" value="{{consumeKey}}" data-field="consumeKey" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on"></paper-masked-input>
          <paper-masked-input label="Consumer secret" value="{{consumerSecret}}" data-field="consumerSecret" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on"></paper-masked-input>
          <paper-masked-input auto-validate="" required="" label="Token" value="{{token}}" data-field="token" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on"></paper-masked-input>
          <paper-masked-input label="Token secret" value="{{tokenSecret}}" data-field="tokenSecret" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on"></paper-masked-input>

          <paper-input auto-validate="" required="" label="Timestamp" value="{{timestamp}}" type="text" data-field="timestamp" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on">
            <paper-icon-button suffix="" on-tap="_genTimestamp" icon="arc:cached" alt="Regenerate input icon" title="Regenerate timestamp"></paper-icon-button>
            <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
          </paper-input>

          <paper-input auto-validate="" required="" label="Nonce" value="{{nonce}}" type="text" data-field="nonce" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on">
            <paper-icon-button suffix="" on-tap="_genNonce" icon="arc:cached" alt="Regenerate input icon" title="Regenerate nonce"></paper-icon-button>
            <paper-icon-button suffix="" on-tap="_clearField" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
          </paper-input>

          <paper-input label="Realm" value="{{realm}}" type="text" data-field="realm" on-focus="_activateHint" on-blur="_deactivateHint" on-mouseover="_activateHint" on-mouseout="_deactivateHint" autocomplete="on"></paper-input>

          <paper-dropdown-menu label="Signature method" class="grant-dropdown" required="" auto-validate="">
            <paper-listbox class="dropdown-content" selected="{{signatureMethod}}" attr-for-selected="data-type">
              <paper-item data-type="HMAC-SHA256">HMAC-SHA256</paper-item>
              <paper-item data-type="HMAC-SHA1">HMAC-SHA1</paper-item>
              <paper-item data-type="PLAINTEXT">PLAINTEXT</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>

          <div class="authorize-actions">
            <paper-button disabled$="[[_authorizing]]" class="auth-button" on-tap="authorize">Authorize</paper-button>
            <paper-spinner active="[[_authorizing]]"></paper-spinner>
          </div>

          <div class="current-token" hidden$="[[!signatureValue]]">
            <label>Current signature</label>
            <p class="read-only-param-field">[[signatureValue]]</p>
          </div>
        </form>
      </div>
      <div class$="[[_computeHintsClass(hintsEnabled)]]">
        <p class="hint" field="consumeKey">The consumer key identifies which application is making the request. It can be found in your provider's API console.</p>
        <p class="hint" field="consumerSecret">The consumer secret is generated by your provider unique string for your app. Check provider's console to get the code.</p>
        <p class="hint" field="token">The token typically represents a user’s permission to share access to their account with your application. You can typically generate the token in your provider's API console.</p>
        <p class="hint" field="tokenSecret">A secret used by the application to establish ownership of a given Token. As stored by the Service Provider.</p>
        <p class="hint" field="timestamp">The timestamp parameter indicates when the request was created. This value should be the number of seconds since the Unix epoch at the point the request is generated, and should be easily generated in most programming languages.</p>
        <p class="hint" field="nonce">The nonce is a unique token your application should generate for each unique request. It was autogenerated when you've opened this form.</p>
        <p class="hint" field="realm"></p>
      </div>
    </div>
    <paper-toast text="" duration="5000"></paper-toast>
  </template>
  <script>
  Polymer({
    is: 'auth-method-oauth1',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],
    /**
     * Fired when user requested to perform an authorization.
     * The details object vary depends on the `grantType` property.
     * However this event always fire two properties set on the `detail` object: `type` and
     * `clientId`.
     *
     * @event oauth1-token-requested
     * @param {String} consumeKey The consumer key. May be undefined if not provided.
     * @param {String} consumerSecret May be undefined if not provided.
     * @param {String} token May be undefined if not provided.
     * @param {String} tokenSecret May be undefined if not provided.
     * @param {String} timestamp May be undefined if not provided.
     * @param {String} nonce May be undefined if not provided.
     * @param {String} realm May be undefined if not provided.
     * @param {String} signatureMethod May be undefined if not provided.
     */
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * @event auth-settings-changed
     * @param {Object} settings Current settings. See the
     * `oauth1-token-requested` for detailed description.
     * @param {String} type The authorization type - oauth1
     */
    properties: {
      // Client ID aka consumer key
      consumeKey: {
        type: String,
        notify: true
      },
      // The client secret aka consumer secret
      consumerSecret: {
        type: String,
        notify: true
      },
      // Oauth 1 token (from the oauth console)
      token: {
        type: String,
        notify: true
      },
      // Oauth 1 token secret (from the oauth console)
      tokenSecret: {
        type: String,
        notify: true
      },
      // Timestamp
      timestamp: {
        type: Number,
        notify: true
      },
      // The nonce generated for this request
      nonce: {
        type: String,
        notify: true
      },
      // Optional realm
      realm: {
        type: String,
        notify: true
      },
      /**
       * Signature method. Enum {`HMAC-SHA256`, `HMAC-SHA1`, `PLAINTEXT`}
       */
      signatureMethod: {
        type: String,
        value: 'HMAC-SHA1',
        notify: true
      },
      // Signature generated for this set of parameters.
      signatureValue: {
        type: String,
        value: ''
      },
      // If true then half of the space will be available for hints.
      hintsEnabled: {
        type: Boolean,
        value: false
      },
      // True when currently authorizing the user.
      _authorizing: Boolean
    },

    observers: [
      //jscs:disable
      '_settingsChanged(consumeKey, consumerSecret, token, tokenSecret, timestamp, nonce, realm, signatureMethod)'
      //jscs:enable
    ],

    attached: function() {
      this.listen(window, 'oauth1-error', '_oauth1ErrorHandler');
    },

    detached: function() {
      this.unlisten(window, 'oauth1-error', '_oauth1ErrorHandler');
    },

    ready: function() {
      this._genTimestamp();
      this._genNonce();
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },

    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    _settingsChanged: function() {
      var validationResult = this.$.form.validate();
      if (!validationResult) {
        return;
      }
      var settings = this._getSettings();
      var detail = {
        settings: settings,
        type: 'oauth1'
      };
      this.fire('auth-settings-changed', detail);
    },

    _getSettings: function() {
      return {
        consumeKey: this.consumeKey,
        consumerSecret: this.consumerSecret,
        token: this.token,
        tokenSecret: this.tokenSecret,
        timestamp: this.timestamp,
        nonce: this.nonce,
        realm: this.realm,
        signatureMethod: this.signatureMethod
      };
    },

    // Removes a value from the (paper-)input going up through path of the event.
    _clearField: function(e) {
      e = Polymer.dom(e);
      var path = e.path;
      var inputTarget;
      while ((inputTarget = path.shift())) {
        if (inputTarget.nodeName === 'INPUT' || inputTarget.nodeName === 'PAPER-INPUT') {
          break;
        }
      }
      if (!inputTarget) {
        return;
      }
      inputTarget.value = '';
    },
    // Handler for UI events to activate a hint.
    _activateHint: function(e) {
      if (!this.hintsEnabled) {
        return;
      }
      var field = this.__getHintField(e);
      if (!field) {
        return;
      }
      field.setAttribute('active', true);
    },
    // Handler for UI events to deactivate a hint.
    _deactivateHint: function(e) {
      if (!this.hintsEnabled) {
        return;
      }
      var field = this.__getHintField(e);
      if (!field) {
        return;
      }
      field.removeAttribute('active');
    },
    // Searches the DOM for related to evet's target hint.
    __getHintField: function(e) {
      e = Polymer.dom(e);
      var set = e.localTarget.dataset;
      if (!('field' in set)) {
        return;
      }
      var field = set.field;
      return Polymer.dom(this.root).querySelector('.hint[field="' + field + '"]');
    },
    // Computes class for hints pane depending on `hintsEnabled` state.
    _computeHintsClass: function(hintsEnabled) {
      var clazz = 'hints';
      if (hintsEnabled) {
        clazz += ' active';
      }
      return clazz;
    },
    // Toggles hits panel
    _toggleHints: function() {
      this.hintsEnabled = !this.hintsEnabled;
    },

    // Handler for "authorize" button click. Sends the `oauth2-token-requested` event.
    authorize: function() {
      var detail = {};
      if (this.consumeKey) {
        detail.consumeKey = this.consumeKey;
      }
      if (this.consumeKey) {
        detail.consumeKey = this.consumeKey;
      }
      if (this.consumerSecret) {
        detail.consumerSecret = this.consumerSecret;
      }
      if (this.token) {
        detail.token = this.token;
      }
      if (this.tokenSecret) {
        detail.tokenSecret = this.tokenSecret;
      }
      if (this.timestamp) {
        detail.timestamp = this.timestamp;
      }
      if (this.nonce) {
        detail.nonce = this.nonce;
      }
      if (this.realm) {
        detail.realm = this.realm;
      }
      if (this.signatureMethod) {
        detail.signatureMethod = this.signatureMethod;
      }
      this.fire('oauth1-token-requested', detail);
    },

    _oauth1ErrorHandler: function(e, detail) {
      this._authorizing = false;

      var toast = this.$$('paper-toast');
      toast.text = detail.message;
      toast.opened = true;
    },

    _genTimestamp: function() {
      var t = Math.floor(Date.now() / 1000);
      this.timestamp = t;
    },

    _genNonce: function(length) {
      var result = [];
      var chrs = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      var chrsLength = chrs.length;
      length = Number(length || 32);
      if (length !== length) {
        length = 32;
      }
      for (var i = 0; i < length; i++) {
        result[result.length] = (chrs[Math.floor(Math.random() * chrsLength)]);
      }
      this.nonce = result.join('');
    }

  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<auth-method-custom>` element displays a form to provide the authorization details for RAML's
custom security scheme.

This element works differently than other authorization panels because it sends
`request-header-changed` and `query-parameter-changed` custom events directly and it doesn't
care if it's wrapped with the `authorization-panel` element that will handle this.
This element will also listen for this events and if the application uses other ARC elements
that use this events to communicate (like `raml-request-panel`) then the value for headers or query
parameters will be updated when event occur.

Besides events listed above it will also fire the `auth-settings-changed` custom event as other
authorization methods.

This element will rended empty if `ramlSettings` property is not set or is empty.
Parent element should check if `securedBy` property of RAML method contains values.

### Example
```
<auth-method-custom raml-settings="{...}"></auth-method-custom>
```

### Styling
`<auth-methods>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--auth-method-custom` | Mixin applied to the element. | `{}`
`--auth-method-panel` | Mixin applied to all auth elements. | `{}`
`--inline-help-icon-color` | Color of the icon button to display help | `rgba(0, 0, 0, 0.24)`
`--inline-help-icon-color-hover` | Color of the icon button to display help when hovered | `--accent-color` or `rgba(0, 0, 0, 0.74)`
`--raml-headers-form-input-label-color` | Color of the lable of the `paper-input` element. | `rgba(0, 0, 0, 0.48)`
`raml-headers-form-input-label-color-required` | Color of the lable of the `paper-input` element when it's required. | `rgba(0, 0, 0, 0.72)`

Input styles are consistent with `raml-headers-form` element.

@group UI Elements
@element auth-method-custom
@demo demo/custom.html
-->
<dom-module id="auth-method-custom" assetpath="bower_components/auth-methods/">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style include="auth-methods-styles">
    :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-custom);

      --paper-input-container-label: {
        color: var(--raml-headers-form-input-label-color, rgba(0, 0, 0, 0.48));
      }
    }

    paper-input[required] {
      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-required-input-label-color, rgba(0, 0, 0, 0.72));
      }
    }

    .input-row {
      display: block;
    }

    .docs {
      @apply(--arc-font-common-base);
      font-size: 13px !important;
      font-weight: 200;
      line-height: 24px;
      color: var(--inline-documentation-color, rgba(0, 0, 0, 0.87));
    }

    .markdown-html * {
      font-size: 13px !important;
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .help-icon {
      color: var(--inline-help-icon-color, rgba(0, 0, 0, 0.24));
      transition: color 0.2s linear;
    }

    .help-icon:hover {
      color: var(--inline-help-icon-color-hover, var(--accent-color, rgba(0, 0, 0, 0.74)));
    }

    .value-input {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--layout-flex);
    }

    .value-input paper-input,
    .value-input paper-dropdown-menu {
      @apply(--layout-flex);
    }
    </style>
    <form is="iron-form" id="form">
      <div class="row">
        <div class="stepper">
          <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
          <span class="step-header">
            <span class="step-title">Set authorization data</span>
          </span>
        </div>
        <div class="step-content">
          <div class="line"></div>
          <div class="content">
            <template is="dom-if" if="[[hasHeaders]]">
              <section id="headersList">
                <template is="dom-repeat" items="[[headers]]" headers-repeater="">
                  <div class="input-row">
                    <div class="value-input">
                      <paper-input label="[[item.inputLabel]]" value="{{item.value}}" required="[[item.required]]" pattern="[[item.pattern]]" name="[[item.name]]" auto-validate="" type="[[item.inputType]]" min="[[item.minimum]]" max="[[item.maximum]]" maxlength="[[item.maxLength]]" always-float-label="[[item.inputFloatLabel]]" placeholder="[[item.inputPlaceholder]]" on-input="_headerValueChanged">
                      </paper-input>
                      <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!item.hasDescription]]" on-tap="_openHeaderDoc"></paper-icon-button>
                    </div>
                    <template is="dom-if" if="[[item.hasDescription]]">
                      <div class="docs">
                        <iron-collapse>
                          <marked-element markdown="[[item.description]]">
                            <div class="markdown-html markdown-body"></div>
                          </marked-element>
                        </iron-collapse>
                      </div>
                    </template>
                  </div>
                </template>
              </section>
            </template>
            <template is="dom-if" if="[[hasQueryParameters]]">
              <section id="paramsList">
                <template is="dom-repeat" items="[[queryParameters]]" params-repeater="">
                  <div class="input-row">
                    <div class="value-input">
                      <template is="dom-if" if="[[item.isEnum]]">
                        <paper-dropdown-menu label="[[item.inputLabel]]" name="[[item.name]]" required="[[item.required]]" on-iron-select="_parameterValueChanged">
                          <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{item.value}}">
                            <template is="dom-repeat" items="[[item.enum]]">
                              <paper-item data-value$="[[item]]">[[item]]</paper-item>
                            </template>
                          </paper-listbox>
                        </paper-dropdown-menu>
                      </template>
                      <template is="dom-if" if="[[!item.isEnum]]">
                        <paper-input label="[[item.inputLabel]]" value="{{item.value}}" required="[[item.required]]" pattern="[[item.pattern]]" name="[[item.name]]" auto-validate="" type="[[item.inputType]]" min="[[item.minimum]]" max="[[item.maximum]]" maxlength="[[item.maxLength]]" always-float-label="[[item.inputFloatLabel]]" placeholder="[[item.inputPlaceholder]]" on-input="_parameterValueChanged">
                        </paper-input>
                      </template>
                      <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!item.hasDescription]]" on-tap="_openParamDoc"></paper-icon-button>
                    </div>
                    <template is="dom-if" if="[[item.hasDescription]]">
                      <div class="docs">
                        <iron-collapse>
                          <marked-element markdown="[[item.description]]">
                            <div class="markdown-html markdown-body"></div>
                          </marked-element>
                        </iron-collapse>
                      </div>
                    </template>
                  </div>
                </template>
              </section>
            </template>
          </div>
        </div>
      </div>
    </form>
  </template>
  <script>
  Polymer({
    is: 'auth-method-custom',
    behaviors: [ArcBehaviors.AuthMethodsBehavior],
    /**
     * Fired when the any of the auth method settings has changed.
     * This event will be fired quite frequently - each time anything in the text field changed.
     * With one exception. This event will not be fired if the validation of the form didn't passed.
     *
     * @event auth-settings-changed
     * @param {Object} settings Current settings containing hash, password
     * and username.
     * @param {String} type The authorization type - basic
     * @param {Boolean} valid True if the form has been validated.
     * @param {String} name Name of the custom method to differeciante them if many.
     */
    /**
     * Fired when the header value has changed.
     *
     * @event request-header-changed
     * @param {String} name Name of the header
     * @param {String} value Value of the header
     */
    /**
     * Fired when the header value has changed.
     *
     * @event query-parameter-changed
     * @param {String} name Name of the parameter
     * @param {String} value Value of the parameter
     */

    properties: {
      /**
       * RAML `securedBy` obejct definition.
       */
      ramlSettings: Object,
      /**
       * List of headers to render in the form.
       * Note, this value will be computed from the `ramlSettings` object after any change to it.
       */
      headers: {
        type: Array,
        computed: '_computeHeaders(ramlSettings.describedBy.*)'
      },
      /**
       * List of query parameters to render.
       * Note, this value will be computed from the `ramlSettings` object after any change to it.
       */
      queryParameters: {
        type: Array,
        computed: '_computeParameters(ramlSettings.describedBy.queryParameters.*)'
      },
      // Computed value, true if headers are defined in RAML settings.
      hasHeaders: {
        type: Boolean,
        computed: '_computeHasHeaders(ramlSettings.describedBy.*)'
      },
      // Computed value, true if query parameters are defined in RAML settings.
      hasQueryParameters: {
        type: Boolean,
        computed: '_computeHasQueryParameters(ramlSettings.describedBy.*)'
      }
    },

    attached: function() {
      this.listen(window, 'request-header-changed', '_headerChangedHandler');
      this.listen(window, 'query-parameter-changed', '_parameterChangedHandler');
    },

    detached: function() {
      this.unlisten(window, 'request-header-changed', '_headerChangedHandler');
      this.unlisten(window, 'query-parameter-changed', '_parameterChangedHandler');
    },

    /**
     * Gets a map of current settings (user provided data).
     */
    get settings() {
      return this._getSettings();
    },

    /**
     * Validate the form.
     *
     * @param {Boolean} passive If true then it will check validity of the form but will not
     * highlight the fields when invalid. Default to false.
     * @return {Boolean} `true` if valid, `false` otherwise.
     */
    validate: function(passive) {
      return passive ? this.$.form.checkValidity() : this.$.form.validate();
    },

    // Computes a list of query parameters to display
    _computeParameters: function(record) {
      var array = record && record.base;
      if (!array || !array.length) {
        return;
      }
      return this._computeFormData(array);
    },
    // Computes a list of headers to display
    _computeHeaders: function(record) {
      var describedBy = record && record.base;
      if (!(describedBy && describedBy.headers && describedBy.headers.length)) {
        return;
      }
      return this._computeFormData(describedBy.headers);
    },
    // Computes form items data based on headers / query parameters input.
    _computeFormData: function(array) {
      var numTypes = ['number', 'integer', 'float'];
      return array.map(function(item) {
        item = Object.assign({}, item);
        item.isEnum = !!(item.enum && item.enum.length);
        item.hasDescription = !!item.description;
        item.inputLabel = item.displayName || item.name || 'Value';
        if (item.required) {
          item.inputLabel += '*';
        }
        if (numTypes.indexOf(item.type) !== -1) {
          item.inputType = 'number';
        } else {
          item.inputType = 'text';
        }

        if (item.examples && item.examples.length && item.examples[0]) {
          item.inputPlaceholder = 'Example: ' + item.examples[0];
        } else if (item.example && typeof item.example === 'string') {
          item.inputPlaceholder = 'Example: ' + item.example;
        }

        if (item.inputPlaceholder) {
          item.inputFloatLabel = true;
        }

        if (item.required && typeof item.default !== 'undefined' && !item.value) {
          item.value = item.default;
        }
        if (typeof item.value === 'undefined' && item.required) {
          if (item.examples) {
            item.value = item.examples[0];
          } else if (item.example) {
            item.value = item.example;
          }
          if (item.value && item.value.indexOf && item.value.indexOf(item.name + '=') === 0) {
            item.value = item.value.substr(item.name.length + 1);
          }
          if (typeof item.value === 'undefined' && item.isEnum) {
            item.value = item.enum[0];
          }
        }
        if (item.value && typeof item.value === 'string') {
          item.value = decodeURIComponent(item.value.replace(/\+/g, ' '));
        }
        return item;
      });
    },

    _computeHasHeaders: function(record) {
      var describedBy = record && record.base;
      return !!(describedBy && describedBy.headers && describedBy.headers.length);
    },

    _computeHasQueryParameters: function(record) {
      var describedBy = record && record.base;
      return !!(describedBy && describedBy.queryParameters && describedBy.queryParameters.length);
    },

    _getSettings: function() {
      return this.$.form.serialize();
    },

    notifySettingsChanged: function() {
      var validationResult = this.$.form.validate();
      var settings = this._getSettings();
      var detail = {
        settings: settings,
        type: 'x-custom',
        name: this.ramlSettings.name,
        valid: validationResult
      };
      this.fire('auth-settings-changed', detail);
    },

    /**
     * When header value changes then it will file the `request-header-changed` to inform other
     * observers about this event.
     */
    _headerValueChanged: function(e) {
      var item = e.model.get('item');
      var name = item.name || item.key;
      var value = item.value;
      this.fire('request-header-changed', {
        name: name,
        value: value
      });
      this.notifySettingsChanged();
    },

    // Opens the documentation for headers item.
    _openHeaderDoc: function(e) {
      var model = this._getItemModel('headers', e);
      this._toggleDoc('headers', model);
    },
    // Opens the documentation for query parameters item.
    _openParamDoc:  function(e) {
      var model = this._getItemModel('params', e);
      this._toggleDoc('params', model);
    },
    /**
     * Returns model for event fired by a repeater defined as the `source`
     */
    _getItemModel: function(source, e) {
      var template = this.$.form.querySelector('[' + source + '-repeater]');
      return template.modelForElement(e.target);
    },

    _toggleDoc: function(type, model) {
      var i = model.index + 1;
      var collapse = this.$$('#' + type + 'List')
        .querySelector('.input-row:nth-child(' + i + ') iron-collapse');
      if (!collapse) {
        return;
      }
      collapse.opened = !collapse.opened;
    },
    /**
     * When query parameter value changes then it will file the `query-parameter-changed` custom
     * event to inform other observers about this event.
     */
    _parameterValueChanged: function(e) {
      var item = e.model.get('item');
      var name = item.name || item.key;
      var value = item.value;
      this.fire('query-parameter-changed', {
        name: name,
        value: value
      });
      this.notifySettingsChanged();
    },

    /**
     * Handler for the `request-header-changed` event.
     * It updates value for a single header if this header is already on the list.
     */
    _headerChangedHandler: function(e) {
      this._updateEventValue('headers', e);
    },

    /**
     * Handler for the `query-parameter-changed` event.
     * It updates value for a single parameter if this parameter is already on the list.
     */
    _parameterChangedHandler: function(e) {
      this._updateEventValue('queryParameters', e);
    },
    /**
     * Update array value for given type (`headers` or `queryParameters`) for given event.
     */
    _updateEventValue: function(target, e) {
      if (e.target === this) {
        return;
      }
      if (e.defaultPrevented) {
        return;
      }
      var name = e.detail.name;
      if (!name) {
        return;
      }
      // Headers are case insensitive.
      name = target === 'headers' ? name.toLowerCase() : name;
      var parameters = this[target];
      if (!parameters || !parameters.length) {
        return;
      }
      for (var i = 0, len = parameters.length; i < len; i++) {
        var paramName = parameters[i].name || parameters[i].key;
        if (!paramName) {
          continue;
        }
        paramName = target === 'headers' ? paramName.toLowerCase() : paramName;
        if (paramName === name) {
          this.set([target, i, 'value'], e.detail.value);
          return;
        }
      }
    }
  });
  </script>
</dom-module>
<!--
`<authorization-panel>` The authorization panel used in the request panel.
It is a set of forms that allow set up the authorization method for a HTTP request.

The element do not perform authorization. Depending on selected method there are
different ways of dealing with the authorization.

### Auth methods availability
By default the element will display all authorization methods available in it.
Currently they are:
- basic
- digest
- OAuth 2.0

If `securedBy` property is set (which is the `securedBy` property of the RAML's
definition produced by [raml-js-parser](https://elements.advancedrestclient.com/elements/raml-js-parser)
and [raml-json-enhance](https://elements.advancedrestclient.com/elements/raml-json-enhance))
then it will show only those methods that are supported by this known endpoint.
See this element's documentation for more information.

Detailed information about authorization methods can be find in the [auth-methods documentation page](https://elements.advancedrestclient.com/elements/auth-methods).

### Basic authorization
The element sends the `request-header-changed` custom event to inform any other
element that is listening to this event that header value has changed
(Authorization in this case). The `raml-headers-form` is an example of an
element that is listening for this event and change request headers value
when auth data change.

### OAuth 2.0
The [Oauth 2 form](https://elements.advancedrestclient.com/elements/auth-methods?active=auth-method-oauth2)
sends the `oauth2-token-requested` custom event with the OAuth settings provided
by the user.
Any element / hosting app can handle this event and perform authorization.
ARC elements provides the [oauth2-authorization](https://elements.advancedrestclient.com/elements/oauth-authorization) element
(from the `oauth-authorization` repo) that can be placed anywhere in the DOM
(from current element where `authorization-panel` is attached up to
the body) and perform OAuth athorization.
However it can be also done by any other element / app  or even server.
See `<oauth2-authorization>` for detailed documentation.

Note: OAuth 2.0 server flow probably will not work in regular browser
environment because main providers aren't setting CORS headers. Therefore the
request will be canceled by the browser.
To make it work, handle the `oauth2-token-requested` fired from the inside of this element.
If it's browser flow type (implicit) then the `oauth2-authorization` element can be used.
For other other types, handle and cancel the event and use server to handle token exchange.
The ARC elements offers a [Chrome extension](https://github.com/advanced-rest-client/api-console-extension)
that once installed will propxy auth requests and made the exchange even for
the server flow. The application should use [api-console-ext-comm](https://github.com/advanced-rest-client/api-console-ext-comm)
element to communicate with the extension.

#### `redirect-url` property for OAuth 2.0
OAuth protocol requires to define a redirect URL that is registered in the
OAuth provider. The redirect URL should point to a page that will pass the URL
parameters to the opener page (OAuth 2 panel).
If you application uses the [oauth-authorization](https://elements.advancedrestclient.com/elements/oauth-authorization)
element then it provides a popup that pases the data back to the application.
In this case your redirect URL would be `https://your.domain.com/bower_components/oauth-authorization/oauth-popup.html`.
User have to change OAuth provider's settings and adjust the redirect URL to
point to this page.

You can also use the [oauth-popup.html](https://github.com/advanced-rest-client/oauth-authorization/blob/stage/oauth-popup.html)
to build your own page.

### OAuth 1.0a
Oauth 1a is not currently supported. The form is ready and available but there's no
authorization method in the ARC components set.

### Digest Authentication
When the user provide all required information for Digest authorization then
this element will fire `request-header-changed` custom event which will do the
same thing as in case of basic authorization.

### Example
```
<authorization-panel redirect-url="http://domain.com/bower_components/oauth-authorization/oauth-popup.html"></authorization-panel>
```

### Styling
`<authorization-panel>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--authorization-panel` | Mixin applied to the element | `{}`
`--stepper-step-number-background-color` | Background color of the step number (if selected auth method support this) | `#3D8099`
`--stepper-step-number-color` | Color of the step number (if selected auth method support this) | `#fff`
`--stepper-step-title-color` | Color of the label of the step (if selected auth method support this) | `#3D8099`
`--stepper-step-selection-label-color` | Color of the label of closed section (with selected option) | `rgba(0, 0, 0, 0.54)`
`--stepper-line-color` | Left hand side line color of the stepper. | `rgba(0, 0, 0, 0.12)`
`--arc-font-body1` | Theme mixin, Mixin applied to the elements that are containg text | ``

@group UI Elements
@element authorization-panel
@demo demo/index.html
-->
<dom-module id="authorization-panel" assetpath="bower_components/authorization-panel/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--authorization-panel);
    }

    #container {
      position: relative;
    }

    .stepper {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      padding: 12px 0;
      position: relative;
      pointer-events: none;
    }

    .stepper.active {
      pointer-events: all;
      cursor: pointer;
    }

    .step {
      display: inline-block;
      background-color: var(--stepper-step-number-background-color, #3D8099);
      color: var(--stepper-step-number-color, #fff);
      font-size: 14px;
      @apply(--layout-center-center);
      @apply(--layout-horizontal);
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 12px;
    }

    .step-header {
      position: relative;
    }

    .step-title {
      @apply(--arc-font-body1);
      display: block;
      color: var(--stepper-step-title-color, #3D8099);
      font-size: 16px;
      font-weight: 500;
    }

    .step-selection {
      @apply(--arc-font-body1);
      color: var(--stepper-step-selection-label-color, rgba(0, 0, 0, 0.54));
      position: absolute;
      bottom: -16px;
    }

    paper-ripple {
      color: var(--stepper-step-title-color, #3D8099);
    }

    .step-content {
      @apply(--layout-horizontal);
      @apply(--arc-font-body1);
      margin-bottom: 12px;
      min-height: 32px;
    }

    .line {
      width: 11px;
      border-right: 1px var(--stepper-line-color, rgba(0, 0, 0, 0.12)) solid;
      margin-right: 24px;
    }

    .edit-icon {
      visibility: hidden;
    }

    .active .step-header:hover .edit-icon {
      visibility: visible;
    }
    </style>
    <div id="container">
      <div class="row" hidden$="[[noSelector]]">
        <div class$="[[_computeStepperClass(isSelected)]]" on-tap="_clearCelection">
          <span class="step">1</span>
          <span class="step-header">
            <span class="step-title">
              Select authorization method
              <iron-icon icon="arc:edit" class="edit-icon"></iron-icon>
            </span>
            <span class="step-selection" hidden$="[[!isSelected]]">[[_computeSelectedLabel(selected)]]</span>
          </span>
          <paper-ripple></paper-ripple>
        </div>
        <div class="step-content">
          <div class="line"></div>
          <iron-collapse opened="[[!isSelected]]">
            <div class="content">
              <paper-dropdown-menu label="Authorization method">
                <paper-listbox class="dropdown-content" selected="{{selected}}" attr-for-selected="data-type">
                  <template is="dom-repeat" items="[[authMethods]]">
                    <paper-item data-type="[[item.id]]">[[item.name]]</paper-item>
                  </template>
                </paper-listbox>
              </paper-dropdown-menu>
            </div>
          </iron-collapse>
        </div>
      </div>
      <iron-pages selected="[[selected]]" attr-for-selected="data-type" hidden$="[[!isSelected]]">
        <auth-method-basic data-type="basic" no-stepper="[[noSelector]]"></auth-method-basic>
        <auth-method-digest data-type="digest" no-stepper="[[noSelector]]"></auth-method-digest>
        <!-- <auth-method-oauth1 data-type="ntlm" redirect-url="[[redirectUrl]]" raml-settings="[[_computeSettings(securedBy, 'OAuth 1.0')]]"></auth-method-oauth1> -->
        <auth-method-oauth2 data-type="oauth2" no-stepper="[[noSelector]]" redirect-url="[[redirectUrl]]" raml-settings="[[_computeSettings(securedBy, 'OAuth 2.0')]]"></auth-method-oauth2>
        <template is="dom-repeat" items="[[customSchemes]]">
          <auth-method-custom data-type$="[[item]]" no-stepper="[[noSelector]]" raml-settings="[[_computeSettings(securedBy, item)]]"></auth-method-custom>
        </template>
      </iron-pages>
    </div>
  </template>
  <script>
  Polymer({
    is: 'authorization-panel',
    /**
     * Fired when auth settings change.
     *
     * It will be fired when any of types is currently selected and
     * any value of any property has changed.
     *
     * @event authorization-settings-changed
     * @param {Object} settings Current auth settings. It depends on enabled `type`.
     * @param {String} type Enabled auth type. For example `basic`, `ntlm` or `oauth2`.
     */
    /**
     * Fired when the authorization type changed.
     * Note that the `settings` property may not be updated at the moment of of
     * firing the event.
     *
     * @event authorization-type-changed
     * @param {String} type Current auth type
     */
    /**
     * Fired when the request header changed and all listeners should update
     * header value.
     *
     * @event request-header-changed
     * @param {String} name Name of the header that has changed
     * @param {String} value Header new value
     */
    /**
     * Fired when the query param changed and all listeners should update
     * parameters / URL value.
     *
     * @event query-parameter-changed
     * @param {String} name Name of the header that has changed
     * @param {String} value Header new value
     */
    properties: {
      // Selected authorization type. E.g. `basic`, `oauth2` etc.
      selected: {
        type: String,
        notify: true
      },
      // Computed value. True when selection has been made.
      isSelected: {
        type: Boolean,
        value: false,
        computed: '_computeIsSelected(selected)'
      },
      // If true then according to the API spec authorization is required.
      isRequired: {
        type: Boolean,
        value: false,
        readOnly: true,
        notify: true
      },
      /**
       * Current settings of enabled auth type.
       * Can be `undefined` if the user hasn't filled all required fields in the form.
       */
      settings: {
        type: Object,
        readOnly: true,
        notify: true
      },
      /**
       * A definition of the RAML `securedBy` node of the method. description.
       * If set it will limit number of panels to show only those which are
       * defined in the RAML spec and provide the fill data.
       */
      securedBy: {
        type: Object,
        observer: '_securedByChanged'
      },
      /**
       * The OAuth2 redirect URL to be set in the OAuth2 form pane.
       */
      redirectUrl: String,
      /**
       * If true, then the RAML data is set (the `securedBy` property) but
       * methods described in the API spec does not fit those supported by this
       * element. In this case, to prevent displaying empty widget,
       * the element displays all possible auth forms. Though, authors can hide
       * this element from the view so they should use this property to be
       * aware of this condition.
       */
      noRamlSelected: {
        type: Boolean,
        value: false,
        readOnly: true,
        notify: true
      },

      // The auth methods to display in the auth method selector.
      authMethods: {
        type: Array
      },

      _availableAuthMethods: {
        type: Array,
        value: function() {
          return [{
            'id': 'basic',
            'name': 'Basic authorization'
          }, /*{
            'id': 'ntlm',
            'name': 'NTLM'
          },*/ {
            'id': 'digest',
            'name': 'Digest Authentication'
          }, {
            'id': 'oauth2',
            'name': 'Oauth 2.0'
          }];
        }
      },
      /**
       * Computed value. True if the authorization form is filled with all required data.
       * For basic only login is required for the form to be valid. In case of OAuth 2 panel
       * validation is more complex.
       * Check auth methods panels documentation for more info.
       */
      valid: {
        type: Boolean,
        value: true,
        notify: true,
        computed: '_checkAuthorizationReady(settings.valid, selected, required)'
      },
      /**
       * If true then the auth method selector will be hidden (no steps will be visible)
       */
      noSelector: {
        type: Boolean
      },
      // List of currently available custom security schemes
      customSchemes: Array
    },

    observers: [
      '_authSettingsChanged(selected, settings.*)',
      '_selectedChanged(selected)'
    ],

    ready: function() {
      if (!this.authMethods) {
        this.set('authMethods', this._availableAuthMethods);
      }
      this._updateValidationState();
    },

    listeners: {
      'auth-settings-changed': '_authSettingsHandler',
      'authorization-settings-changed': '_onAuthSettingsChanged'
    },
    /**
     * Updates validation state for the selected form.
     * When element is initializing and RAML's `securedBy` property is set
     * during the initialization time, events with settings are fired before the form
     * is ready.
     */
    _updateValidationState: function() {
      this.debounce('check-validation-state', function() {
        if (!this.selected || !this.settings) {
          return;
        }
        var panel = this.$$('[data-type="' + this.selected + '"]');
        if (!panel) {
          console.warn('The auth panel for %s not set', this.selected);
          return;
        }
        this.set('settings.valid', panel.validate());
      }, 200);
    },

    _authSettingsHandler: function(e) {
      if (e.detail.type !== this.selected) {
        return;
      }
      this._setSettings(e.detail);
    },

    // Fires the `authorization-settings-changed` event when something change
    _authSettingsChanged: function(selected, record) {
      if (!selected || !record || !record.base) {
        return;
      }
      var set = record.base;
      this._notifySettings(set, selected);
    },
    /**
     * Notifies settings change if currently selected method is the same as
     * `settings.type`.
     *
     * @param {Object} settings Authorization settings to notify.
     * @param {String} selected Currently selected method name.
     * @return {CustomEvent} The event fired to the listeners.
     */
    _notifySettings: function(settings, selected) {
      if (!settings) {
        return this.fire('authorization-settings-changed', {
          settings: undefined,
          valid: false,
          type: selected
        });
      }
      if (settings.type !== selected) {
        return;
      }
      return this.fire('authorization-settings-changed', {
        settings: settings.settings,
        valid: settings.valid,
        type: this.selected
      });
    },

    /**
     * Fires the `authorization-type-changed` event when the selection change.
     */
    _selectedChanged: function(selected) {
      this.fire('authorization-type-changed', {
        type: selected
      });
      var settings = this._readCurrentSettings();
      this._setSettings(settings);
      this._notifySettings(settings, this.selected);
    },

    /**
     * A handler called when the `securedBy` property changes.
     * It sets up the list of available auth methods
     */
    _securedByChanged: function(secured) {
      if (!secured || !secured.length) {
        // If no RAML then show them all.
        this._setIsRequired(false);
        return this._updateMethodsSelection();
      }

      var state = {
        oauth1: false,
        oauth2: false,
        basic: false,
        ntlm: false,
        digest: false,
        custom: false,
        customData: []
      };
      // When one of `secured` antries is null, then no authorization
      // is possible among having an authorization.
      var forceNoRequired = false;
      for (var i = 0, len = secured.length; i < len; i++) {
        // has unexpanded data, use raml-json-enhance!
        if (typeof secured[i] === 'string') {
          continue;
        }

        if (!secured[i]) {
          forceNoRequired = true;
          continue;
        }
        switch (secured[i].type) {
          case 'OAuth 1.0': state.oauth1 = true; break;
          case 'OAuth 2.0': state.oauth2 = true; break;
          case 'Basic Authentication': state.basic = true; break;
          case 'Digest Authentication': state.digest = true; break;
          case 'Pass Through': break;
          default:
            if (secured[i].type && secured[i].type.indexOf('x-') === 0) {
              state.custom = true;
              state.customData.push({
                name: secured[i].name,
                type: secured[i].type
              });
            } else {
              console.warn('Unsupported auth method', secured[i]);
            }
        }
      }
      this._updateMethodsSelection(state);
      this._updateValidationState();
      var required = false;
      if (!forceNoRequired) {
        for (var key in state) {
          if (state[key]) {
            required = true;
            break;
          }
        }
      }
      this._setIsRequired(required);
    },
    /**
     * Updates number of possible type selection when RAML definition change.
     *
     * @param {Object} state A map where keys are auth types and values is
     * the boolean value of the state. True for show the auth option in the
     * selector.
     */
    _updateMethodsSelection: function(state) {
      // makes a copy of the array. Otherwise `this._availableAuthMethods`
      // may change
      var available = this._availableAuthMethods.map(function(item) {
        return item;
      });
      if (!state) {
        this.set('authMethods', available);
        return;
      }
      for (var key in state) {
        if (!state[key]) {
          delete state[key];
        }
      }

      var allowedKeys = Object.keys(state);
      var i;
      for (i = available.length - 1; i >= 0; i--) {
        if (allowedKeys.indexOf(available[i].id) === -1) {
          available.splice(i, 1);
        }
      }
      this.customSchemes = undefined;
      if (state.custom) {
        var ids = [];
        state.customData.forEach(function(data) {
          available.push({
            'id': data.type,
            'name': data.name
          });
          ids.push(data.type);
        });
        this.customSchemes = ids;
      }

      this.set('authMethods', available);
      // check if current selection is still available
      var current = this.selected;
      var hasCurrent = false;
      for (i = available.length - 1; i >= 0; i--) {
        if (available[i].id === current) {
          hasCurrent = true;
          break;
        }
      }
      if (!hasCurrent) {
        if (available && available[0]) {
          this.set('selected', available[0].id);
        } else {
          this.set('selected', '');
        }
      }
      this.set('noSelector', available.length === 1);
    },
    /**
     * Computes settings for the auth panel if RAML's `securedBy`
     * property is set and the `type` matches one of the defined types.
     *
     * @param {Array} secured The `securedBy` value.
     * @param {String} type RAML's one of predefined authorization types.
     * @return {Object|undefined} A scheme definition object if `type` matches.
     */
    _computeSettings: function(secured, type) {
      if (!secured || !secured.length || !type) {
        return undefined;
      }
      for (var i = 0, len = secured.length; i < len; i++) {
        if (secured[i] && (secured[i].type === type || secured[i].name === type)) {
          return secured[i];
        }
      }
    },

    _computeIsSelected: function(selected) {
      return !!selected;
    },

    _computeSelectedLabel: function(selected) {
      switch (selected) {
        case 'basic': return 'Basic';
        case 'oauth2': return 'OAuth 2.0';
        case 'oauth1': return 'OAuth 1.0';
        case 'ntlm': return 'NTLM';
        case 'custom': return 'x-custom';
        default: return selected;
      }
    },

    _computeStepperClass: function(isSelected) {
      var cls = 'stepper';
      if (isSelected) {
        cls += ' active';
      }
      return cls;
    },

    _clearCelection: function() {
      this.set('selected', undefined);
    },

    _checkAuthorizationReady: function(formValid, selected, required) {
      if (!required) {
        return true;
      }
      if (!selected || !formValid) {
        return false;
      }
      return true;
    },

    /**
     * Forces element to read settings from currently selected element.
     *
     * @return {Object|undefined} Settings object or undefined.
     */
    _readCurrentSettings: function() {
      if (!this.selected) {
        return;
      }
      var panel = this.$$('[data-type="' + this.selected + '"]');
      if (!panel) {
        // Custom scheme can be unavailable yet.
        return;
      }
      var settings = panel.settings;
      var validationResult = panel.validate();
      var detail = {
        settings: settings,
        type: this.selected,
        valid: validationResult
      };
      return detail;
    },

    /**
     * The function will determine if current settings are valid for selected
     * method. If they are it will send a header / query parameter change
     * request event so the corresponding editors update their values.
     *
     * It will determine if either headers or query parameters should
     * be updated from RAML spec or from default behavior for given method.
     */
    _onAuthSettingsChanged: function(e) {
      var settings = e.detail;
      if (!settings) {
        return;
      }
      var type = settings.type;
      if (!type) {
        return;
      }
      var method = this._getSecuredMethod(type);
      switch (type) {
        case 'basic': this._handleBasicSettings(settings); break;
        case 'oauth2': this._handleOauth2Settings(settings, method); break;
        case 'digest': this._handleDigestSettings(settings); break;
        default:
          if (type && type.indexOf('x-') === 0) {
            /* Auth panel updates headers and query parameters by its own. */
            return;
          }
          console.warn('Unsupported auth method', type);
      }
    },

    /**
     * Handles the case when basic settings changed.
     *
     * @param {Object} settings Basic auth settings object
     */
    _handleBasicSettings: function(settings) {
      settings = settings || {};
      var value = (settings.settings && settings.settings.hash) ?
        'Basic ' + settings.settings.hash : '';
      this.fire('request-header-changed', {
        name: 'authorization',
        value: value
      });
    },
    /**
     * Handles the case when OAuth2 settings changed.
     *
     * @param {Object} settings Oauth2 auth settings object
     * @param {Object?} secureMethod If set, it's RAML's auth definition.
     * If this parameter is not defined then default behavior will be to
     * notify listeners to set Authorization header with Bearer token.
     */
    _handleOauth2Settings: function(settings, secureMethod) {
      settings = settings || {};
      settings = settings.settings || {};
      var token = settings.tokenValue;
      var transportType = 'header';
      var paramName = 'authorization';
      if (secureMethod) {
        if (secureMethod.describedBy) {
          var desc = secureMethod.describedBy;
          if (desc.headers && desc.headers.length) {
            paramName = desc.headers[0].name;
          } else if (desc.queryParameters && desc.queryParameters.length) {
            paramName = desc.queryParameters[0].name;
            transportType = 'query-parameter';
          }
        }
      }

      if (transportType === 'header') {
        this.fire('request-header-changed', {
          name: paramName,
          value: token ? 'Bearer ' + token : ''
        });
      } else if (transportType === 'query-parameter') {
        this.fire('query-parameter-changed', {
          name: paramName,
          value: token ? token : ''
        });
      }
    },
    /**
     * Handles the case when digest auth method settings changed.
     *
     * @param {Object} settings Digest auth method settings object
     * It can be either username and password (that will be passed to
     * transport method) then this function do nothing or list of Authorization
     * header parameters.
     */
    _handleDigestSettings: function(settings) {
      if (!settings.valid) {
        return this.fire('request-header-changed', {
          name: 'authorization',
          value: ''
        });
      }
      if (!settings.settings) {
        return;
      }
      var data = settings.settings;
      if (data.username && data.password) {
        return;
      }
      var value = 'Digest ';
      var names = Object.getOwnPropertyNames(data);
      names.forEach(function(name) {
        value += name + '="' +  data[name] + '", ';
      });
      value = value.substr(0, value.length - 2);
      this.fire('request-header-changed', {
        name: 'authorization',
        value: value
      });
    },
    /**
     * Gets selected security scheme for selected type.
     *
     * @param {String} type One of `basic`, `oauth1`, `oauth2`
     * @return {Object} Corresponding security scheme for given type or undefined if not found.
     */
    _getSecuredMethod: function(type) {
      var securedBy = this.securedBy;
      if (!securedBy || !securedBy.length) {
        return;
      }
      var securityMethodsMapping = {
        'OAuth 1.0': 'oauth1',
        'OAuth 2.0': 'oauth2',
        'Basic Authentication': 'basic',
        'Digest Authentication': 'digest',
        'Pass Through': 'passthrough'
      };
      for (var i = 0, len = securedBy.length; i < len; i++) {
        if (securityMethodsMapping[securedBy[i].type] === type) {
          return securedBy[i];
        }
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
The `<outh2-authorization>` performs an OAuth2 requests to get a token for given settings.

There are 4 basic token requests flows:
- Authorization Code for apps running on a web server (`authorization_code` type)
- Implicit for browser-based or mobile apps (`implicit` type)
- Password for logging in with a username and password (`password` type)
- Client credentials for application access (`client_credentials` type)

This element uses them all.

Main function is the `authorize()` function that can be also used via event system.
This function accepts different set of parameters depending on request type. However it will
not perform a validation on the settings. It will try to perform the request for given set of
parameters. If it fails, than it fail on the server side.

### Example
```
<outh2-authorization></outh2-authorization>
```
```
var settings = {
  type: 'implicit',
  clientId: 'CLIENT ID',
  redirectUrl: 'https://example.com/auth-popup.html',
  authorizationUrl: 'https://auth.example.com/token'
  scopes: ['email']
};
var factory = document.querySelector('outh2-authorization');
factory.authorize(settings)

// or event based
var event = new CustomEvent('oauth2-token-requested', { 'detail': settings, bubbles: true });
document.dispatchEvent(event);
```

There is one difference for from using event based approach. When the token has been received
this will set `tokenValue` property on the target of the event.
The event will be canceled one it reach this element so other elements will not double the action.

An element or app that requesting the token should observe the `oauth2-token-response` and
`oauth2-error` events to get back the response.

## Popup in authorization flow
This element conatin a `oauth-popup.html` that can be used to exchange token / code data with
hosting page. Other page can be used as well. But in must `window.postMessage` back to the
`window.opener`. The structure of the message if the parsed query or has string to the map
of parameters. Furthermore it must camel case the parameters. Example script is source code
of the `oauth-popup.html` page.
Popup should be served over the SSL.

## The state parameter and security
This element is intened to be used in debug applications where confidentialy is already
compromised because users may be asked to provide client secret parameter (depending on the flow).
**It should not be used in client applications** that don't serve debugging purposes.
Client secret should never be used on the client side.

To have at least minimum of protection (in already compromised environment) this library generates
a `state` parameter as a series of alphanumeric characters and append them to the request.
It is expected to return the same string in the response (as defined in rfc6749). Though this
parameter is optional, it will reject the response if the `state` parameter is not the same as the
one generated before the request.

## Demo
See `auth-methods` > `auth-method-oauth2` element for the demo.

@group Logic Elements
@element oauth-authorization
-->
<script>
Polymer({
  is: 'oauth2-authorization',
  /**
   * Fired when OAuth2 token has been received.
   * Properties of the `detail` object will contain the response from the authentication server.
   * It will contain the original parameteres but also camel case of the parameters.
   *
   * So for example 'implicit' will be in the response as well as `accessToken` with the same
   * value. The puropse of this is to support JS application that has strict formatting rules
   * and disallow using '_' in property names. Like ARC.
   *
   * @event oauth2-token-response
   */
  /**
   * Fired wne error occurred.
   * An error may occure when `state` parameter of the OAuth2 response is different from
   * the requested one. Another example is when the popup window has been closed before it passed
   * response token. It may happen when the OAuth request was invalid.
   *
   * @event oauth2-error
   * @param {String} message A message that can be displayed to the user.
   * @param {String} code A message code: `invalid_state` - when `state` parameter is different;
   * `no_response` when the popup was closed before sendin token data; `response_parse` - when
   * the response from the code exchange can't be parsed; `request_error` when the request
   * errored by the transport library. Other status codes are defined in
   * [rfc6749](https://tools.ietf.org/html/rfc6749).
   */
  properties: {
    // A full data returned by the authorization endpoint.
    tokenInfo: {
      type: Object,
      readOnly: true
    }
  },

  attached: function() {
    this.listen(window, 'oauth2-token-requested', '_tokenRequestedHandler');
    this.listen(window, 'message', '_listenPopup');
  },

  detached: function() {
    this.unlisten(window, 'oauth2-token-requested', '_tokenRequestedHandler');
    this.unlisten(window, 'message', '_listenPopup');
  },

  clear: function() {
    this._popup = undefined;

    this._state = undefined;
  },

  _tokenRequestedHandler: function(e, detail) {
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();
    this._eventSource = e.target;
    this.authorize(detail);
  },

  /**
   * Authorize the user using provided settings.
   * See `auth-methods/auth-method-oauth2` element for more information about settings.
   */
  authorize: function(settings) {
    this._setTokenInfo(undefined);
    this._type = settings.type;
    switch (settings.type) {
      case 'implicit':
        this._authorizeToken(settings);
        break;
      case 'authorization_code':
        this._authorizeCode(settings);
        break;
      case 'client_credentials':
        this._authorizeClientCredential(settings);
        break;
      case 'password':
        this._authorizePassword(settings);
        break;
      default:
        throw new Error('Unknown authorization method ' + settings.type);
    }
  },
  // Authorize the user in the browser flow.
  _authorizeToken: function(settings) {
    var url = this._constructPopupUrl(settings, 'token');
    var op = 'menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,width=800,height=600';
    this._popup = window.open(url, 'oauth-window', op);
    if (!this._popup) {
      // popup blocked.
      this.fire('oauth2-error', {
        'message': 'Authorization popup is being blocked.',
        'code': 'popup_blocked'
      });
      return;
    }
    this._popup.window.focus();
    this._observePopupState();
  },

  // Authorize the user in the browser flow.
  _authorizeCode: function(settings) {
    this._settings = settings;
    var url = this._constructPopupUrl(settings, 'code');
    var op = 'menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,width=800,height=600';
    this._popup = window.open(url, 'oauth-window-code', op);
    if (!this._popup) {
      // popup blocked.
      this.fire('oauth2-error', {
        'message': 'Authorization popup is being blocked.',
        'code': 'popup_blocked'
      });
      return;
    }
    this._popup.window.focus();
    this._observePopupState();
  },
  // Observer if the popup has been closed befor the data has been received.
  _observePopupState: function() {
    var context = this;
    var popupCheckInterval = setInterval(function() {
      if (!context._popup || context._popup.closed) {
        clearInterval(popupCheckInterval);
        context._beforePopupUnloadHandler();
      }
    }, 500);
  },
  // Browser or server flow: open the initial popup.
  _constructPopupUrl: function(settings, type) {
    this._state = this.randomString(6);
    var url = settings.authorizationUrl + '?response_type=' + type + '&';
    url += 'client_id=' + encodeURIComponent(settings.clientId) + '&';
    if (settings.redirectUrl) {
      url += 'redirect_uri=' + encodeURIComponent(settings.redirectUrl) + '&';
    }
    url += 'scope=' + encodeURIComponent(settings.scopes.join(' '));
    url += '&state=' + encodeURIComponent(this._state);
    return url;
  },
  /**
   * Listen for a message from the popup.
   * The message from the popup will be accepted only if following conditions are met:
   * - origin of the event is the same as current origin
   * - event's source location is the same as opened popup location.
   * Token will be extracted and `oauth2-token-response` will be fired. Also, if the initial
   * request came from an event, a `tokenValue` property fill be set on the event target.
   */
  _listenPopup: function(e) {
    if (!location || !e.source || !this._popup || e.origin !== location.origin ||
      e.source.location.href !== this._popup.location.href) {
      return;
    }
    var tokenInfo = e.data;
    if (tokenInfo.state !== this._state) {
      this.clear();
      this._eventSource = undefined;
      this.fire('oauth2-error', {
        'message': 'Invalid state returned by the oauth server.',
        'code': 'invalid_state'
      });
      return;
    }

    if ('error' in tokenInfo) {
      this.fire('oauth2-error', {
        'message': tokenInfo.errorDescription || 'The request is invalid.',
        'code': tokenInfo.error
      });
    } else {
      if (this._type === 'implicit') {
        this._setTokenInfo(tokenInfo);
        if (this._eventSource) {
          this._eventSource.tokenValue = tokenInfo.accessToken;
        }
        this.fire('oauth2-token-response', tokenInfo);
        this._eventSource = undefined;
      } else if (this._type === 'authorization_code') {
        this._exchangeCodeValue = tokenInfo.code;
        this._exchangeCode(tokenInfo.code);
      }
    }

    this._popup.close();
    this.clear();
  },
  // http://stackoverflow.com/a/10727155/1127848
  randomString: function(len) {
    return Math.round((Math.pow(36, len + 1) - Math.random() * Math.pow(36, len)))
      .toString(36).slice(1);
  },

  _beforePopupUnloadHandler: function() {
    // Popup is closed by this element so if data is not yet set it means that the
    // user closed the window - probably some error.
    // The UI state should reset if needed.
    if (this.tokenInfo || (this._type === 'authorization_code' && this._exchangeCodeValue)) {
      return;
    }
    this.clear();
    this._eventSource = undefined;
    this.fire('oauth2-error', {
      'message': 'No response has been recorded.',
      'code': 'no_response'
    });
  },

  /**
   * Exchange code for token.
   * One note here. This element is intened to use with applications that test endpoints.
   * It asks user to provide `client_secret` parameter and it is not a security concern to him.
   * However, this method **can't be used in regular web applications** because it is a
   * security risk and whole OAuth token exchange can be compromised. Secrets should never be
   * present on client side.
   *
   * @param {String} code Returned code from the authorization endpoint.
   */
  _exchangeCode: function(code) {
    var url = this._settings.accessTokenUrl;
    var body = this._getCodeEchangeBody(this._settings, code);
    this._tokenCodeRequest(url, body);
  },

  _getCodeEchangeBody: function(settings, code) {
    var url = 'grant_type=authorization_code&';
    url += 'client_id=' + encodeURIComponent(settings.clientId) + '&';
    if (settings.redirectUrl) {
      url += 'redirect_uri=' + encodeURIComponent(settings.redirectUrl) + '&';
    }
    url += 'code=' + encodeURIComponent(code) + '&';
    url += 'client_secret=' + settings.clientSecret;
    return url;
  },

  _tokenCodeRequest: function(url, body) {
    var xhr = new XMLHttpRequest();
    xhr.addEventListener('load', function(e) {
      try {
        this._handleTokenCodeResponse(e.target.response,
          e.target.getResponseHeader('content-type'));
      } catch (e) {
        this.fire('oauth2-error', {
          'message': e.message || 'App error while decoding the token.',
          'code': 0
        });
      }
    }.bind(this));
    xhr.addEventListener('error', this._handleTokenCodeError.bind(this));
    xhr.open('POST', url);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send(body);
  },

  // Decode token information from the response body.
  _handleTokenCodeResponse: function(data, contentType) {
    var tokenInfo;
    if (contentType.indexOf('json') !== -1) {
      try {
        tokenInfo = JSON.parse(data);
        for (var name in tokenInfo) {
          var camelName = this._camel(name);
          if (camelName) {
            tokenInfo[camelName] = tokenInfo[name];
          }
        }
      } catch (e) {
        this.fire('oauth2-error', {
          'message': 'The response could not be parsed. ' + e.message,
          'code': 'response_parse'
        });
        this._settings = undefined;
        this._eventSource = undefined;
        this._exchangeCodeValue = undefined;
        return;
      }
    } else {
      tokenInfo = {};
      data.split('&').forEach(function(p) {
        var item = p.split('=');
        var name = item[0];
        var camelName = this._camel(name);
        var value = decodeURIComponent(item[1]);
        tokenInfo[name] = value;
        tokenInfo[camelName] = value;
      }, this);
    }
    this._setTokenInfo(tokenInfo);
    if ('error' in tokenInfo) {
      this.fire('oauth2-error', {
        'message': tokenInfo.errorDescription || 'The request is invalid.',
        'code': tokenInfo.error
      });
    } else {
      if (this._eventSource) {
        this._eventSource.tokenValue = tokenInfo.accessToken;
      }
      this.fire('oauth2-token-response', tokenInfo);
    }

    this._settings = undefined;
    this._eventSource = undefined;
    this._exchangeCodeValue = undefined;
  },

  _handleTokenCodeError: function(e) {
    this.fire('oauth2-error', {
      'message': 'Couldn\'t connect to the server. ' + e.message,
      'code': 'request_error'
    });
    this._settings = undefined;
    this._eventSource = undefined;
  },

  _camel: function(name) {
    var i = 0;
    var l;
    var changed = false;
    while ((l = name[i])) {
      if ((l === '_' || l === '-') && i + 1 < name.length) {
        name = name.substr(0, i) + name[i + 1].toUpperCase() + name.substr(i + 2);
        changed = true;
      }
      i++;
    }
    return changed ? name : undefined;
  },

  _authorizePassword: function(settings) {
    var url = this._settings.accessTokenUrl;
    var body = this._getPasswordBody(settings);
    var xhr = new XMLHttpRequest();
    xhr.addEventListener('load', function(e) {
      try {
        this._handleTokenCodeResponse(e.target.response,
          e.target.getResponseHeader('content-type'));
      } catch (e) {
        this.fire('oauth2-error', {
          'message': e.message || 'App error while decoding the token.',
          'code': 0
        });
      }
    }.bind(this));
    xhr.addEventListener('error', this._handleTokenCodeError.bind(this));
    xhr.open('POST', url);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send(body);
  },

  _getPasswordBody: function(settings) {
    var url = 'grant_type=password';
    url += '&username=' + encodeURIComponent(settings.username);
    url += '&password=' + encodeURIComponent(settings.password);
    if (settings.clientId) {
      url += '&client_id=' + encodeURIComponent(settings.clientId);
    }
    if (settings.scopes && settings.scopes.length) {
      url += 'scope=' + encodeURIComponent(settings.scopes.join(' '));
    }
    return url;
  },

  _authorizeClientCredential: function(settings) {
    var url = this._settings.accessTokenUrl;
    var body = this._getClientCredentialBody(settings);
    var xhr = new XMLHttpRequest();
    xhr.addEventListener('load', function(e) {
      try {
        this._handleTokenCodeResponse(e.target.response,
          e.target.getResponseHeader('content-type'));
      } catch (e) {
        this.fire('oauth2-error', {
          'message': e.message || 'App error while decoding the token.',
          'code': 0
        });
      }
    }.bind(this));
    xhr.addEventListener('error', this._handleTokenCodeError.bind(this));
    xhr.open('POST', url);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send(body);
  },

  _getClientCredentialBody: function(settings) {
    var url = 'grant_type=client_credentials';
    if (settings.clientId) {
      url += '&client_id=' + encodeURIComponent(settings.clientId);
    }
    if (settings.clientSecret) {
      url += '&client_secret=' + settings.clientSecret;
    }
    if (settings.scopes && settings.scopes.length) {
      url += 'scope=' + encodeURIComponent(settings.scopes.join(' '));
    }
    return url;
  }
});
</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><script>

/**
Use `Polymer.PaperDialogBehavior` and `paper-dialog-shared-styles.html` to implement a Material Design
dialog.

For example, if `<paper-dialog-impl>` implements this behavior:

    <paper-dialog-impl>
        <h2>Header</h2>
        <div>Dialog body</div>
        <div class="buttons">
            <paper-button dialog-dismiss>Cancel</paper-button>
            <paper-button dialog-confirm>Accept</paper-button>
        </div>
    </paper-dialog-impl>

`paper-dialog-shared-styles.html` provide styles for a header, content area, and an action area for buttons.
Use the `<h2>` tag for the header and the `buttons` class for the action area. You can use the
`paper-dialog-scrollable` element (in its own repository) if you need a scrolling content area.

Use the `dialog-dismiss` and `dialog-confirm` attributes on interactive controls to close the
dialog. If the user dismisses the dialog with `dialog-confirm`, the `closingReason` will update
to include `confirmed: true`.

### Accessibility

This element has `role="dialog"` by default. Depending on the context, it may be more appropriate
to override this attribute with `role="alertdialog"`.

If `modal` is set, the element will prevent the focus from exiting the element.
It will also ensure that focus remains in the dialog.

@hero hero.svg
@demo demo/index.html
@polymerBehavior Polymer.PaperDialogBehavior
*/

  Polymer.PaperDialogBehaviorImpl = {

    hostAttributes: {
      'role': 'dialog',
      'tabindex': '-1'
    },

    properties: {

      /**
       * If `modal` is true, this implies `no-cancel-on-outside-click`, `no-cancel-on-esc-key` and `with-backdrop`.
       */
      modal: {
        type: Boolean,
        value: false
      }

    },

    observers: [
      '_modalChanged(modal, _readied)'
    ],

    listeners: {
      'tap': '_onDialogClick'
    },

    ready: function () {
      // Only now these properties can be read.
      this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;
      this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;
      this.__prevWithBackdrop = this.withBackdrop;
    },

    _modalChanged: function(modal, readied) {
      // modal implies noCancelOnOutsideClick, noCancelOnEscKey and withBackdrop.
      // We need to wait for the element to be ready before we can read the
      // properties values.
      if (!readied) {
        return;
      }

      if (modal) {
        this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;
        this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;
        this.__prevWithBackdrop = this.withBackdrop;
        this.noCancelOnOutsideClick = true;
        this.noCancelOnEscKey = true;
        this.withBackdrop = true;
      } else {
        // If the value was changed to false, let it false.
        this.noCancelOnOutsideClick = this.noCancelOnOutsideClick &&
          this.__prevNoCancelOnOutsideClick;
        this.noCancelOnEscKey = this.noCancelOnEscKey &&
          this.__prevNoCancelOnEscKey;
        this.withBackdrop = this.withBackdrop && this.__prevWithBackdrop;
      }
    },

    _updateClosingReasonConfirmed: function(confirmed) {
      this.closingReason = this.closingReason || {};
      this.closingReason.confirmed = confirmed;
    },

    /**
     * Will dismiss the dialog if user clicked on an element with dialog-dismiss
     * or dialog-confirm attribute.
     */
    _onDialogClick: function(event) {
      // Search for the element with dialog-confirm or dialog-dismiss,
      // from the root target until this (excluded).
      var path = Polymer.dom(event).path;
      for (var i = 0; i < path.indexOf(this); i++) {
        var target = path[i];
        if (target.hasAttribute && (target.hasAttribute('dialog-dismiss') || target.hasAttribute('dialog-confirm'))) {
          this._updateClosingReasonConfirmed(target.hasAttribute('dialog-confirm'));
          this.close();
          event.stopPropagation();
          break;
        }
      }
    }

  };

  /** @polymerBehavior */
  Polymer.PaperDialogBehavior = [Polymer.IronOverlayBehavior, Polymer.PaperDialogBehaviorImpl];

</script>
<!--
Material design: [Dialogs](https://www.google.com/design/spec/components/dialogs.html)

`paper-dialog-scrollable` implements a scrolling area used in a Material Design dialog. It shows
a divider at the top and/or bottom indicating more content, depending on scroll position. Use this
together with elements implementing `Polymer.PaperDialogBehavior`.

    <paper-dialog-impl>
      <h2>Header</h2>
      <paper-dialog-scrollable>
        Lorem ipsum...
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button>OK</paper-button>
      </div>
    </paper-dialog-impl>

It shows a top divider after scrolling if it is not the first child in its parent container,
indicating there is more content above. It shows a bottom divider if it is scrollable and it is not
the last child in its parent container, indicating there is more content below. The bottom divider
is hidden if it is scrolled to the bottom.

If `paper-dialog-scrollable` is not a direct child of the element implementing `Polymer.PaperDialogBehavior`,
remember to set the `dialogElement`:

    <paper-dialog-impl id="myDialog">
      <h2>Header</h2>
      <div class="my-content-wrapper">
        <h4>Sub-header</h4>
        <paper-dialog-scrollable>
          Lorem ipsum...
        </paper-dialog-scrollable>
      </div>
      <div class="buttons">
        <paper-button>OK</paper-button>
      </div>
    </paper-dialog-impl>

    <script>
      var scrollable = Polymer.dom(myDialog).querySelector('paper-dialog-scrollable');
      scrollable.dialogElement = myDialog;
    </script>

### Styling
The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-dialog-scrollable` | Mixin for the scrollable content | {}

@group Paper Elements
@element paper-dialog-scrollable
@demo demo/index.html
@hero hero.svg
-->

<dom-module id="paper-dialog-scrollable" assetpath="bower_components/paper-dialog-scrollable/">

  <template>
    <style>

      :host {
        display: block;
        @apply(--layout-relative);
      }

      :host(.is-scrolled:not(:first-child))::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      .scrollable {
        padding: 0 24px;

        @apply(--layout-scroll);
        @apply(--paper-dialog-scrollable);
      }

      .fit {
        @apply(--layout-fit);
      }
    </style>

    <div id="scrollable" class="scrollable">
      <content></content>
    </div>
  </template>

</dom-module>

<script>

  Polymer({

    is: 'paper-dialog-scrollable',

    properties: {

      /**
       * The dialog element that implements `Polymer.PaperDialogBehavior` containing this element.
       * @type {?Node}
       */
      dialogElement: {
        type: Object
      }

    },

    listeners: {
      'scrollable.scroll': '_scroll'
    },

    /**
     * Returns the scrolling element.
     */
    get scrollTarget() {
      return this.$.scrollable;
    },

    ready: function () {
      this._ensureTarget();
    },

    attached: function() {
      this.classList.add('no-padding');
      this._ensureTarget();
      requestAnimationFrame(this._scroll.bind(this));
    },

    _scroll: function() {
      this.toggleClass('is-scrolled', this.scrollTarget.scrollTop > 0);
      this.toggleClass('can-scroll', this.scrollTarget.offsetHeight < this.scrollTarget.scrollHeight);
      this.toggleClass('scrolled-to-bottom',
        this.scrollTarget.scrollTop + this.scrollTarget.offsetHeight >= this.scrollTarget.scrollHeight);
    },

    _ensureTarget: function () {
      // read parentNode on attached because if dynamically created,
      // parentNode will be null on creation.
      this.dialogElement = this.dialogElement || Polymer.dom(this).parentNode;
      // Check if parent implements paper-dialog-behavior. If not, fit scrollTarget to host.
      if (this.dialogElement && this.dialogElement.behaviors &&
          this.dialogElement.behaviors.indexOf(Polymer.PaperDialogBehaviorImpl) >= 0) {
        this.dialogElement.sizingTarget = this.scrollTarget;
        this.scrollTarget.classList.remove('fit');
      } else if (this.dialogElement) {
        this.scrollTarget.classList.add('fit');
      }
    }

  });

</script>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><!--
### Styling

The following custom properties and mixins are available for styling.

Custom property | Description | Default
----------------|-------------|----------
`--paper-dialog-background-color` | Dialog background color                     | `--primary-background-color`
`--paper-dialog-color`            | Dialog foreground color                     | `--primary-text-color`
`--paper-dialog`                  | Mixin applied to the dialog                 | `{}`
`--paper-dialog-title`            | Mixin applied to the title (`<h2>`) element | `{}`
`--paper-dialog-button-color`     | Button area foreground color                | `--default-primary-color`
-->

<dom-module id="paper-dialog-shared-styles" assetpath="bower_components/paper-dialog-behavior/">
  <template>
    <style>
      :host {
        display: block;
        margin: 24px 40px;

        background: var(--paper-dialog-background-color, --primary-background-color);
        color: var(--paper-dialog-color, --primary-text-color);

        @apply(--paper-font-body1);
        @apply(--shadow-elevation-16dp);
        @apply(--paper-dialog);
      }

      :host > ::content > * {
        margin-top: 20px;
        padding: 0 24px;
      }

      :host > ::content > .no-padding {
        padding: 0;
      }

      :host > ::content > *:first-child {
        margin-top: 24px;
      }

      :host > ::content > *:last-child {
        margin-bottom: 24px;
      }

      :host > ::content h2 {
        position: relative;
        margin: 0;
        @apply(--paper-font-title);

        @apply(--paper-dialog-title);
      }

      :host > ::content .buttons {
        position: relative;
        padding: 8px 8px 8px 24px;
        margin: 0;

        color: var(--paper-dialog-button-color, --primary-color);

        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
      }
    </style>
  </template>
</dom-module>
<!--
Material design: [Dialogs](https://www.google.com/design/spec/components/dialogs.html)

`<paper-dialog>` is a dialog with Material Design styling and optional animations when it is
opened or closed. It provides styles for a header, content area, and an action area for buttons.
You can use the `<paper-dialog-scrollable>` element (in its own repository) if you need a scrolling
content area. To autofocus a specific child element after opening the dialog, give it the `autofocus`
attribute. See `Polymer.PaperDialogBehavior` and `Polymer.IronOverlayBehavior` for specifics.

For example, the following code implements a dialog with a header, scrolling content area and
buttons. Focus will be given to the `dialog-confirm` button when the dialog is opened.

    <paper-dialog>
      <h2>Header</h2>
      <paper-dialog-scrollable>
        Lorem ipsum...
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm autofocus>Accept</paper-button>
      </div>
    </paper-dialog>

### Styling

See the docs for `Polymer.PaperDialogBehavior` for the custom properties available for styling
this element.

### Animations

Set the `entry-animation` and/or `exit-animation` attributes to add an animation when the dialog
is opened or closed. See the documentation in
[PolymerElements/neon-animation](https://github.com/PolymerElements/neon-animation) for more info.

For example:

    <link rel="import" href="components/neon-animation/animations/scale-up-animation.html">
    <link rel="import" href="components/neon-animation/animations/fade-out-animation.html">

    <paper-dialog entry-animation="scale-up-animation"
                  exit-animation="fade-out-animation">
      <h2>Header</h2>
      <div>Dialog body</div>
    </paper-dialog>

### Accessibility

See the docs for `Polymer.PaperDialogBehavior` for accessibility features implemented by this
element.

@group Paper Elements
@element paper-dialog
@hero hero.svg
@demo demo/index.html
-->

<dom-module id="paper-dialog" assetpath="bower_components/paper-dialog/">
  <template>
    <style include="paper-dialog-shared-styles"></style>
    <content></content>
  </template>
</dom-module>

<script>

(function() {

  Polymer({

    is: 'paper-dialog',

    behaviors: [
      Polymer.PaperDialogBehavior,
      Polymer.NeonAnimationRunnerBehavior
    ],

    listeners: {
      'neon-animation-finish': '_onNeonAnimationFinish'
    },

    _renderOpened: function() {
      this.cancelAnimation();
      this.playAnimation('entry');
    },

    _renderClosed: function() {
      this.cancelAnimation();
      this.playAnimation('exit');
    },

    _onNeonAnimationFinish: function() {
      if (this.opened) {
        this._finishRenderOpened();
      } else {
        this._finishRenderClosed();
      }
    }

  });

})();

</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--

The `raml-request-panel-simple-xhr` is an element that executes the request if the hosted app do
not handle the `api-console-request` event.

It can be used as a boilerplate for communication with the `raml-request-panel` element to handle
request event, execute the request and return the result.

The `raml-request-panel` is based on the fetch's API Request and Response object. The returning
event transport them to the source element.
Because the Response object is not intended to carry a custom errors, in case of error, the
Response object only carrying nformation `response.ok` equals `false` and the `error` Error
object is added to the event's detail object.

This element don't listen for the `api-console-request` event giving a chance for the hosted app to
handle it. If the hosted app intend to handle the requests it should listen for an event:

```
window.addEventListener('api-console-request', function(e) {
  var data = e.detail;
  console.log(data.url);
  console.log(data.method);
  console.log(data.payload);
  console.log(data.headers);
  console.log(data.auth); // optional, see `raml-request-panel.serializeRequest()`
});

```

After the request is made (successfully or not) the `api-console-response` event must be fired.
It should have `request` and `response` objects added to the event's `detail` object. If the request
is errored the it must contain additional `error` proeprty which is JS' Error object with the human
readable message (it will be displayed as an error message).
Additionaly the detail object can contain the `isXhr` property which is set to true be default.
It should be set to false if the request has been made by more than XHR advanced transport which
dives information about timings and redirects.

See the `response-panel` for more information.

```
var event = new CustomEvent('api-console-request', {
  cancelable: false,
  bubbles: true,
  composed: true,
  detail: {
    request: new Request(...),
    response: new Response(body, {status: 200})
  }
});
this.dispatchEvent(event);
```

Becaue the Fetch API is a new API not all browsers support it. Therefore the polyfill must be used
in the hosted app. Add the `fetch-polyfill` element (advanced-rest-client/fetch-polyfill) to the
hosted app to have it supported.

Because this element fires back an event it has to be attached to the DOM.

@group RAML Elements
@element raml-request-panel
@demo demo/index.html
-->
<script>
  Polymer({
    is: 'raml-request-panel-simple-xhr',

    properties: {
      // If true then the request is currently loaded.
      loading: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false
      },
      /**
       * Generated Request object during the latest request
       */
      request: Object,
      /**
       * Generated Response object during the latest request
       */
      response: Object,
      /**
       * Generated error object during the latest request
       */
      error: Object,
      // Total request / response time
      loadingTime: Number
    },

    /**
     * Executes the request.
     *
     * @param {Object} data A request configuration object with `method`, `url`, `headers` and
     * `payload` properties.
     */
    execute: function(data) {
      this._setLoading(true);
      this.error = undefined;
      this.response = undefined;
      this.request = this._createRequest(data);
      var requestStart = performance.now();
      fetch(this.request)
      .then(function(response) {
        this.loadingTime = performance.now() - requestStart;
        this.response = response;
        if (!response.ok) {
          this.error = new Error('Resource is unavailable');
        }
        this._finishRequest();
      }.bind(this))
      .catch(function(e) {
        this.loadingTime = performance.now() - requestStart;
        this.response = Response.error();
        this.error = e;
        this._finishRequest();
      }.bind(this));
    },
    // Sends the event with data to be handled by the `raml-request-panel`.
    _finishRequest: function() {
      var detail = {
        request: this.request,
        response: this.response,
        loadingTime: this.loadingTime,
        isXhr: true
      };
      if (this.error) {
        detail.error = this.error;
      }
      var event = new CustomEvent('api-console-response', {
        cancelable: false,
        bubbles: true,
        composed: true,
        detail: detail
      });
      this.dispatchEvent(event);
    },

    _createRequest: function(data) {
      var init = {
        method: data.method,
        mode: 'cors'
      };
      if (data.headers) {
        var headers = new Headers();
        var list = data.headers.split('\n').map(function(line) {
          var _parts = line.split(':');
          var _name = _parts[0];
          var _value = _parts[1];
          _name = _name ? _name.trim() : null;
          _value = _value ? _value.trim() : null;
          if (!_name || !_value) {
            return null;
          }
          return {
            name: _name,
            value: _value
          };
        }).filter(function(item) {
          return !!item;
        });
        list.forEach(function(item) {
          headers.append(item.name, item.value);
        });
        init.headers = headers;
      }
      if (['GET', 'HEAD'].indexOf(data.method) !== -1) {
        data.payload = undefined;
      } else {
        if (data.payload) {
          init.body = data.payload;
        }
      }

      return new Request(data.url, init);
    }
  });
</script>
<!--
The request panel view for the request defined as a RAML method.
It is a main view element for the API console to display the request panel related to the RAML
specification.

The element has it's own XHR / Fetch transport method and it will be used if the hostng application
do not handle the `api-console-request` event.

When the user request to make the HTTP request then cancellable `api-console-request` event will
be fired with the request details (see below).
The hosting application, if it about to use different transport method, should cancel the event by
calling `preventDefault()` function on the event (and possibly `stopPropagation()`) and handle the
request. If the event was not prevented (canceled) then internall Fetch/XHR will be used.

When the request is ready then the hosting app must fire the `api-console-response` event with
created Request and Response objects. This element listens on the `window` property for the
`api-console-response` event.

## Events
### api-console-request
This event is fired when the user request to make a HTTP request.
This event will have the following properties set on the `detail` object:

Property | Type | Description
----------------|-------------|----------
`url` | String | The request URL
`method` | String | The HTTP method
`headers` | String | Headers to send
`payload` | String | Payload to send
`auth` | Object | Optional. For some authorization methodss (like NTLM) the authorization header or query param can't be set and the authorization must be made on the connection. In this cases the auth object will be set with `type` and `settings` properties. While `type` is the name of the authorization method, the `settings` object depends on the authorization method and may vary. Detailed documentation for the auth methods is in the `auth-methods` element.

### api-console-response
This event must be fired when the hosring app finish the request. It must contains generated Request
and Response object according to the [Fetch specification](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch).

Becaue the Fetch API is a new API not all browsers support it. In this case the polyfill must be used
in the hosted app. Add the `fetch-polyfill` element (advanced-rest-client/fetch-polyfill) to the
hosted app to have the support. It is recommended to use this element so the polyfill will be loaded
only once. See the `raml-request-panel-simple-xhr` element for example implementation.

Property | Type | Description
----------------|-------------|----------
`request` | Object | The request object as defined in the Fetch API spec.
`response` | Object | The response object as defined in the Fetch API spec.
`isXhr` | Boolean | If not set the element assumes it's true. Indicated if the transport method doesn't support advanced timings and redirects information. See below.
`error` | Error | When the request / response is errored (`request.ok` equals `false`) then the error object should be set with the human readable message that will be displayed to the user.
`loadingTime` | Number | The response full loading time

See `Advanced transport options` for more event options.

### Example
```
<raml-request-panel
  method="[[ramlMethod]]"
  redirect-url="http://oauth.redirect.url"
  request="{{request}}"
  response="{{response}}"
  response-error="{{responseError}}"
  loading-time="{{loadingTime}}"></raml-request-panel>
```

## Advanced transport options
The response panel in the ARC elements is able to display the response in simple and advanced view.

Simple is meant to be used when the HTTP request has been made by the simple transports like XHR or
Fetch. It just displays the response status, headers and paylaod.

Advanced view is reserved for transport methods that are able to generate additional informations
about the request and resposne. This information is timings for the request/response, timings for
the redirects and information about redirects.

When the advanced options are set then the `isXhr` flag on the `api-console-response` event's detail
object must be set to true.

#### timings
The `timings` propery added to the `api-console-response` is the request / response timings as
defined in HAR 1.2 spec. For example:
```
"timings": {
  "blocked": 0,
  "dns": -1,
  "connect": 15,
  "send": 20,
  "wait": 38,
  "receive": 12,
  "ssl": -1,
  "comment": ""
}
```
If the `timings` property is set the `loadingTime` property is optional since it will be calculated
from the detailed timing.

#### redirectTimings
The `redirectTimings` propery added to the `api-console-response` is the list of the `timings`
objects as defined in HAR 1.2 specification.
The list should be ordered list of redirections. For example:

```
"redirect-timings": [{
  "blocked": 0,
  "dns": -1,
  "connect": 15,
  "send": 20,
  "wait": 38,
  "receive": 12,
  "ssl": -1,
  "comment": ""
}]
```

#### redirects
The `redirects` property added to the `api-console-response` event is the list of objects. Each
object should have the `headers` property as a HTTP headers string, `status` as a HTTP status
and optionally `statusText`. It is consisted with the `Response` object except the headers are
String instead of the Headers object.

```
"redirects": [Response {
  "status": 301,
  "statusText": "Moved Permanently",
  "headers": "Content-lenght: 0"
}]
```

#### sourceMessage
The HTTP source message sent to the server. It should be full message from the message header to
the request body.

### Advanced event example
```
var event = new CustomEvent('api-console-response', {
  cancelable: true,
  bubbles: true,
  composed: true,
  detail: {
    isXhr: true,
    request: request,
    response: response,
    error: new Error('Dummy error'), // Has the response details so it shouldn't be set.
    loadingTime: 125, // This is optional because timings is set
    timings: { dns: 123, ... }
    redirectTimings: [{ dns: 123, ... }],
    redirects: [redirectResponse1, ...],
    sourceMessage: 'HTTP/1.1 200 OK\n ....'
  }
});
document.body.dispatchEvent(event);
```

### Styling
`<raml-request-panel>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--raml-request-panel` | Mixin applied to the element | `{}`
`--raml-request-panel-panel-border-color` | Border color of each block in the tabs | `rgba(0, 0, 0, 0.24)`
`--raml-request-panel-container` | Mixin applied to the main content container | `{}`
`--raml-request-panel-container-narrow` | Mixin applied to the main content container when layout is narrow | `{}`
`--action-button` | Mixin applied to the action button | `{}`
`--action-button-hover` | Mixin applied to :hover state for the action button | `{}`
`--action-button-disabled` | Mixin applied to disbaled action button | `{}`
`--primary-color` | background-color of the main action button | `--primary-color`
`--primary-action-color` | Color of the main action button | `--primary-action-color`
`--action-accent-button-disabled-color` | Color of disabled action button | ``
`--primary-button-background-color` | Background color of the primary button. |`--accent-color`
`--primary-button-color` | Font color of the primary button | `#fff`
`--primary-button-hover-background-color` | Background color of the primary button when hovered. |`--accent-color`
`--primary-button-hover-color` | Font color of the primary button when hovered. | `#fff`

You can set the `narrow` property so the element will be rendered in the mobile view.
This property will be propagated to all sub-elements that uses this property to change layout.

@group RAML Elements
@element raml-request-panel
@demo demo/index.html
-->
<dom-module id="raml-request-panel" assetpath="bower_components/raml-request-panel/">
  <template>
    <style>
     :host {
      display: block;
      @apply(--raml-request-panel);
    }

    *[hidden] {
      display: none !important;
    }

    .content {
      height: 100%;
      @apply(--layout-vertical);
      @apply(--raml-request-panel-container);
    }

    h2 {
      @apply(--paper-font-subhead);
      margin: 8px 12px;
      font-weight: var(--raml-request-panel-navigation-title-font-weight, 500);
    }

    *[hidden] {
      display: none !important;
    }

    iron-pages>* {
      border: 1px var(--raml-request-panel-panel-border-color, transparent) solid;
      min-height: 120px;
    }

    .action-bar {
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
      @apply(--layout-center);
      margin-top: 8px;
    }

    .action-button {
      background-color: var(--primary-button-background-color, --accent-color);
      color: var(--primary-button-color, #fff);
      @apply(--action-button);
    }

    .action-button:hover {
      background-color: var(--primary-button-hover-background-color, --accent-color);
      color: var(--primary-button-hover-color, #fff);
      @apply(--action-button-hover);
    }

    .action-button[disabled] {
      background-color: var(--action-accent-button-disabled-color);
      color: #fff;
      @apply(--action-button-disabled);
    }

    .url-editor {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    raml-request-url-editor {
      @apply(--layout-flex);
    }

    :host([narrow]) .content {
      @apply(--layout-vertical);
      @apply(--raml-request-panel-container-narrow);
    }

    :host([narrow]) raml-request-url-editor {
      width: auto;
    }

    paper-spinner {
      margin-right: 8px;
    }

    .panel-warning {
      width: 16px;
      height: 16px;
      margin-left: 4px;
      color: #FF5722;
    }

    /*.auth-required-info {
      color: rgba(0, 0, 0, 0.54);
    }*/
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <div class="content">
      <div class="url-editor" hidden$="[[noUrlEditor]]">
        <raml-request-url-editor auto-validate="" required="" uri-parameters="[[method.allUriParameters]]" url="[[method.absoluteUri]]" value="{{url}}" invalid="{{urlInvalid}}"></raml-request-url-editor>
      </div>
      <paper-tabs selected="{{selectedTab}}">
        <paper-tab hidden$="[[!authRequired]]">
          Authorization
          <iron-icon icon="arc:warning" class="panel-warning" hidden$="[[authValid]]" title="Fill up missing auth data"></iron-icon>
        </paper-tab>
        <paper-tab>Parameters</paper-tab>
        <paper-tab>Headers</paper-tab>
        <paper-tab hidden$="[[!isPayloadRequest]]">Body</paper-tab>
      </paper-tabs>
      <iron-pages selected="{{selectedTab}}">
        <authorization-panel hidden$="[[!authRequired]]" secured-by="[[method.securedBy]]" narrow="[[narrow]]" request-url="[[url]]" request-method="[[method.method]]" redirect-url="[[redirectUrl]]" is-required="{{authRequired}}"></authorization-panel>
        <raml-request-parameters-editor narrow="[[narrow]]" query-parameters="[[method.queryParameters]]" uri-parameters="[[method.allUriParameters]]" url="[[method.absoluteUri]]" value="{{url}}"></raml-request-parameters-editor>
        <raml-request-headers-editor narrow="[[narrow]]" raml-headers="[[method.headers]]" content-type="{{contentType}}" is-payload="[[isPayloadRequest]]" value="{{headers}}"></raml-request-headers-editor>
        <raml-body-editor-panel narrow="[[narrow]]" body="[[method.body]]" hidden$="[[!isPayloadRequest]]" content-type="{{contentType}}" value="{{payload}}"></raml-body-editor-panel>
      </iron-pages>
      <div class="action-bar">
        <paper-spinner alt="Loading contacts list" active="[[loadingRequest]]"></paper-spinner>
        <span class="url-invalid-info" hidden$="[[!urlInvalid]]">Request URL is invalid.</span>
        <paper-button class="action-button" on-tap="execute" hidden$="[[authNeeded]]" disabled="[[urlInvalid]]">Send</paper-button>
        <div hidden$="[[!authNeeded]]">
          <paper-button class="action-button" on-tap="authAndExecute" disabled="[[urlInvalid]]">Authorize and send</paper-button>
        </div>
      </div>
    </div>
    <paper-dialog opened="[[authDialogOpened]]">
      <h2>Authorization</h2>
      <paper-dialog-scrollable>
        <template is="dom-if" if="[[authDialogOpened]]" restamp="">
          <authorization-panel secured-by="[[method.securedBy]]" narrow="[[narrow]]" request-url="[[url]]" request-method="[[method.method]]" redirect-url="[[redirectUrl]]"></authorization-panel>
        </template>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss="" autofocus="">Cancel</paper-button>
        <paper-button dialog-confirm="" on-tap="_onAuthAndSend">Authorize</paper-button>
      </div>
    </paper-dialog>
    <oauth2-authorization></oauth2-authorization>
    <raml-request-panel-simple-xhr id="xhr"></raml-request-panel-simple-xhr>
    <paper-toast text="Authorization is required for this endpoint" id="authRequired" horizontal-align="right" horizontal-offset="12"></paper-toast>
    <paper-toast text="Fill in the authorization form first" id="authFormError" horizontal-align="right" horizontal-offset="12"></paper-toast>
  </template>
  <script>
  Polymer({
    is: 'raml-request-panel',

    /**
     * Fired when the response has been recorded and request, response, redirects and timings data
     * are set.
     *
     * @event api-console-response-ready
     *
     * @param {Boolean} isXhr True if the transport method is a basic transport.
     * @param {Response} response The response object
     * @param {Error} responseError Error object if the response is errored
     * @param {Request} request The request object.
     * @param {Number} loadingTime Request loading time
     * @param {Object} timings As defined in HAR 1.2 timnings object
     * @param {Array<Object>} redirectTimings List of redirect timings
     * @param {Array} redirects List of redirect Responses
     * @param {String} sourceMessage Source HTTP message sent to the server.
     */
    /**
     * Event fired when the console want to make a request to an endpoint.
     * If the hosting application can handle the event and will make a request on behalf of the
     * console, this event must be cancelled. Otherwise internal XHR request will be made.
     *
     * @event api-console-request
     * @param {String} method The HTTP method name
     * @param {String} url Endpoint's URL
     * @param {String} headers A HTTP headers string (as defined in the spec)
     * @param {String} payload A message body (encoded if necessary).
     */
    properties: {
      /**
       * A RAML node representing a method node in RAML definition.
       * It should be obtained from the `raml-path-to-object` element.
       */
      method: Object,
      // Selected request tab.
      selectedTab: {
        type: Number,
        value: 0,
        notify: true
      },
      // Current content type.
      contentType: {
        type: String,
        notify: true
      },
      // Computed value if the method can carry a payload
      isPayloadRequest: {
        type: Boolean,
        value: false,
        computed: '_computeIsPayloadRequest(method.*)'
      },
      // Headers for the request.
      headers: String,
      // Body for the request
      payload: String,
      // Current URL
      url: {
        type: String,
        notify: true
      },
      /**
       * If set it will renders the view in the narrow layout.
       */
      narrow: {
        type: Boolean,
        notify: true,
        reflectToAttribute: true
      },
      // A widith below which the `narrow` property will be set to true.
      narrowWidth: {
        type: String,
        value: '768px'
      },
      // If true then the request is currently loaded.
      loadingRequest: {
        type: Boolean,
        notify: true,
        readOnly: true,
        value: false
      },
      // If true then the request was made using the XHR object (it has less data in the response).
      responseIsXhr: {
        type: Boolean,
        notify: true,
        readOnly: true
      },
      /**
       * The request object created by the transport.
       * It should be the `Request` object as defined in the Fetch API spec.
       * This element provides the polyfill for this API.
       */
      request: {
        type: Request,
        notify: true,
        readOnly: true
      },
      /**
       * The response object from the transport.
       * It should be the `Response` object as defined in the Fetch API spec.
       * This element provides the polyfill for this API.
       */
      response: {
        type: Response,
        notify: true,
        readOnly: true
      },
      // Set when the response errored.
      responseError: {
        type: Object,
        notify: true,
        readOnly: true
      },
      // Response full loading time.
      loadingTime: {
        type: Number,
        notify: true,
        readOnly: true
      },
      /**
       * If the transport method is able to collect detailed information about request timings
       * then this value will be set. It's the `timings` property from the HAR 1.2 spec.
       */
      timings: {
        type: Object,
        notify: true,
        readOnly: true
      },
      /**
       * If the transport method is able to collect detailed information about redirects timings
       * then this value will be set. It's a list of `timings` property from the HAR 1.2 spec.
       */
      redirectTimings: {
        type: Array,
        notify: true,
        readOnly: true
      },
      /**
       * It will be set if the transport method can generate information about redirections.
       */
      redirects: {
        type: Array,
        notify: true,
        readOnly: true
      },
      /**
       * Http message sent to the server.
       *
       * This information should be available only in case of advanced HTTP transport.
       */
      sourceMessage: {
        type: String,
        notify: true,
        readOnly: true
      },
      // Computed value if current method is secured
      authRequired: Boolean,
      // OAuth2 redirect URL
      redirectUrl: String,
      // Selected by the user auth method (if any)
      authorizationMethod: String,
      // Current authorization settings.
      authorizationSettings: Object,
      // If true then the authorization panel passed validation and auth data are set.
      authValid: Boolean,
      /**
       * Computes if all data required for authorization are set.
       * It check for the `authValid` property as a native form validation and in case of OAuth2
       * for token information. If the token is not set then the auth is still invalid.
       */
      authNeeded: {
        type: Boolean,
        value: false,
        computed: '_computeAuthNeeded(authValid,authorizationMethod,authorizationSettings)'
      },
      /**
       * Computed value when the URL change.
       * If not valid form submission won't be possible.
       */
      urlInvalid: {
        type: Boolean
      },
      /**
       * Hides the URL editor from the view.
       * The editor is still in the DOM and the `urlInvalid` property still will be set.
       */
      noUrlEditor: Boolean,
      /**
       * If true then the authorization dialog is opened.
       * It will be opened when the authorization is required, no auth data were set, the user
       * is in other tab than authorization panel and clicked on "send request" button.
       */
      authDialogOpened: Boolean
    },

    observers: [
      '_isPayloadRequestChanged(isPayloadRequest)',
      '_authRequiredChanged(authRequired)',
      '_selectedTabChanged(selectedTab)'
    ],

    listeners: {
      'authorization-settings-changed': '_authSettingsChanged'
    },

    attached: function() {
      this.listen(window, 'api-console-response', '_responseHandler');
    },

    detached: function() {
      this.unlisten(window, 'api-console-response', '_responseHandler');
    },

    // Computes boolean value if the selected object (method) can carry a payload
    _computeIsPayloadRequest: function(record) {
      var base = record.base;
      if (!base || !base.method) {
        return false;
      }
      return ['get', 'head'].indexOf(base.method) === -1;
    },

    _isPayloadRequestChanged: function(required) {
      if (!required && this.selectedTab === 3) {
        if (this.authRequired) {
          this.selectedTab = 0;
        } else {
          this.selectedTab = 1;
        }
      }
      var tabs = this.$$('paper-tabs');
      if (!tabs) {
        return;
      }
      tabs.notifyResize();
    },

    _authRequiredChanged: function(required) {
      if (required && this.selectedTab === 2) {
        this.selectedTab = 0;
      } else if (!required && this.selectedTab === 0) {
        this.selectedTab = 1;
      }
      var tabs = this.$$('paper-tabs');
      if (!tabs) {
        return;
      }
      tabs.notifyResize();
    },
    /**
     * Execute the request with current settings.
     * This method fires the `api-console-request` so the request can be handled by the
     * hosting app.
     * Hosting app must call `event.preventDefault()` on the event otherwise the console
     * will attempt to make a request usnig XHR object.
     */
    execute: function() {
      this._clearRequestData();
      this._setLoadingRequest(true);
      var event = new CustomEvent('api-console-request', {
        cancelable: true,
        bubbles: true,
        composed: true,
        detail: this.serializeRequest()
      });
      this.dispatchEvent(event);
      if (!event.defaultPrevented) {
        this._executeRequest(event.detail);
      }
    },
    /**
     * Performs an authorization by bringing up the authorization
     * form in a popup and after successful authorization executes the
     * request.
     */
    authAndExecute: function() {
      if (this.selectedTab === 0) {
        this.$.authFormError.opened = true;
        return;
      }
      this.authDialogOpened = true;
    },
    /**
     * Handler for "authorize" button click in the authorization dialog.
     * If nescessary it will signal OAuth token request and wait until
     * the token is ready before executing the request.
     */
    _onAuthAndSend: function() {
      if (!this.authValid) {
        this.$.authRequired.opened = true;
        return;
      }
      var callSend = false;
      switch (this.authorizationMethod) {
        case 'oauth2':
          if (!this.authorizationSettings || !this.authorizationSettings.tokenValue) {
            this.fire('oauth2-token-requested', this.authorizationSettings);
          } else {
            callSend = true;
          }
          break;
        case 'basic':
          if (!this.authorizationSettings || !this.authorizationSettings.hash) {
            this.$.authRequired.opened = true;
            return;
          } else {
            callSend = true;
          }
          break;
      }
      if (callSend) {
        this.execute();
      } else {
        this.__pendingRequest = true;
      }
    },
    /**
     * Returns an object with the request properties.
     * The object contains:
     * - method (String)
     * - url (String)
     * - headers (String)
     * - payload (String)
     * - auth (Object)
     *
     * The `auth` property is optional and is only added to the request if simple `authorization`
     * header will not work. For example NTLM auth method has to be made on a single socket
     * connection (authorization and the request) so it can't be made before the request.
     *
     * The `auth` object contains 2 properties:
     * - type (String) the authorization type - one of from the `auth-methods` element
     * - settings (Object) Authorization parameters entered by the user. It vary and depends on
     * selected auth method. For example in case of the NTLM it will be: `username`, `password` and
     * `domain`.
     */
    serializeRequest: function() {
      var result = {
        method: this.method.method.toUpperCase(),
        url: this.url,
        headers: this.headers,
        payload: this.payload
      };
      return result;
    },

    _executeRequest: function(data) {
      this.$.xhr.execute(data);
    },

    // A handler for the `api-console-response` event.
    _responseHandler: function(e) {
      this._setResponseIsXhr(e.detail.isXhr || true);
      this._setResponse(e.detail.response);
      this._setResponseError(e.detail.error);
      this._setRequest(e.detail.request);
      this._setLoadingTime(e.detail.loadingTime);
      this._setTimings(e.detail.timings);
      this._setRedirectTimings(e.detail.redirectTimings);
      this._setRedirects(e.detail.redirects);
      this._setSourceMessage(e.detail.sourceMessage);
      this.fire('api-console-response-ready', {
        isXhr: e.detail.isXhr,
        response: e.detail.response,
        responseError: e.detail.error,
        request: e.detail.request,
        loadingTime: e.detail.loadingTime,
        timings: e.detail.timings,
        redirectTimings: e.detail.redirectTimings,
        redirects: e.detail.redirects,
        sourceMessage: e.detail.sourceMessage
      });
      this._setLoadingRequest(false);
    },

    _clearRequestData: function() {
      this._setResponseIsXhr(false);
      this._setResponse(undefined);
      this._setResponseError(undefined);
      this._setRequest(undefined);
      this._setLoadingTime(undefined);
      this._setTimings(undefined);
      this._setRedirectTimings(undefined);
      this._setRedirects(undefined);
    },

    _authSettingsChanged: function(e) {
      this.authorizationMethod = e.detail.type;
      this.authorizationSettings = e.detail.settings;
      this.set('authValid', e.detail.valid);
      if (this.__pendingRequest) {
        this.__pendingRequest = false;
        this.execute();
      }
    },

    _computeAuthNeeded: function(authValid, authorizationMethod, authorizationSettings) {
      if (!authValid) {
        return true;
      }
      if (authorizationMethod === 'oauth2') {
        if (!authorizationSettings.tokenValue) {
          return true;
        }
      }
      return false;
    },
    /**
     * Updates the body editor if selected.
     */
    _selectedTabChanged: function(selectedTab) {
      if (selectedTab === 3) {
        this.$$('raml-body-editor-panel').notifyResize();
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!-- Polyfill for the Response, Request, and Headers objects  -->
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<date-time>` An element to display formatted date and time.

The `date` propery accepts Date object, Number as a timestamp or string that
will be parsed to the Date object.

This element uses the `Intl` interface which is available in IE 11+ browsers.
It will throw an error in IE 10 unless you'll provide a polyfill for the `Intl`.

To format the date use [Intl.DateTimeFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat) inteface options.

The default value for each date-time component property is undefined, but if all component properties are undefined, then year, month, and day are assumed to be "numeric".

### Example
```
<date-time date="2010-12-10T11:50:45Z" year="numeric" month="narrow" day="numeric"></date-time>
```

The element provides accessibility by using the `time` element and setting the `datetime` attribute on it.

### Styling
`<date-time>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--date-time` | Mixin applied to the element | `{}`

@group UI Elements
@element date-time
@demo demo/index.html
-->
<dom-module id="date-time" assetpath="bower_components/date-time/">
  <template>
    <style>
    :host {
      display: inline;
      @apply(--date-time);
    }
    </style>
    <time datetime$="[[iso]]">[[display]]</time>
  </template>
  <script>
  Number.isInteger = Number.isInteger || function(value) {
    return typeof value === 'number' &&  isFinite(value) &&
      Math.floor(value) === value;
  };
  Polymer({
    is: 'date-time',
    properties: {
      /**
       * A string with a BCP 47 language tag, or an array of such strings.
       * For the general form and interpretation of the locales argument,
       * see the Intl page.
       * The following Unicode extension keys are allowed:
       * - nu - Numbering system. Possible values include: "arab", "arabext",
       * "bali", "beng", "deva", "fullwide", "gujr", "guru", "hanidec", "khmr",
       * "knda", "laoo", "latn", "limb", "mlym", "mong", "mymr", "orya",
       * "tamldec", "telu", "thai", "tibt".
       * - ca - Calendar. Possible values include: "buddhist", "chinese",
       * "coptic", "ethioaa", "ethiopic", "gregory", "hebrew", "indian",
       * "islamic", "islamicc", "iso8601", "japanese", "persian", "roc".
       */
      locales: {
        type: String,
        observer: '_update'
      },
      /**
       * A date object to display
       */
      date: {
        type: Date,
        observer: '_update'
      },
      /**
       * A string to display
       */
      display: String,
      /**
       * The representation of the year.
       * Possible values are "numeric", "2-digit".
       */
      year: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the month.
       * Possible values are "numeric", "2-digit", "narrow", "short", "long".
       */
      month: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the day.
       * Possible values are "numeric", "2-digit".
       */
      day: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the hour.
       * Possible values are "numeric", "2-digit".
       */
      hour: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the minute.
       * Possible values are "numeric", "2-digit".
       */
      minute: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the second.
       * Possible values are "numeric", "2-digit".
       */
      second: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the weekday.
       * Possible values are "narrow", "short", "long".
       */
      weekday: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the time zone name. Possible values are
       * "short", "long".
       */
      timeZoneName: {
        type: String,
        observer: '_update'
      },
      /**
       * The representation of the era. Possible values are "narrow",
       * "short", "long".
       */
      era: {
        type: String,
        observer: '_update'
      },
      /**
       * The time zone to use. The only value implementations must recognize
       * is "UTC"; the default is the runtime's default time zone.
       * Implementations may also recognize the time zone names of the IANA
       * time zone database, such as "Asia/Shanghai", "Asia/Kolkata",
       * "America/New_York".
       */
      timeZone: {
        type: String,
        observer: '_update'
      },
      /**
       * Whether to use 12-hour time (as opposed to 24-hour time).
       * Possible values are `true` and `false`; the default is locale
       * dependent.
       */
      hour12: {
        type: Boolean,
        observer: '_update'
      },
      /**
       * An ISO string to attach to the `<time>` element.
       */
      iso: {
        type: String,
        readOnly: true
      },
      // True when the element is ready.
      isReady: Boolean
    },

    ready: function() {
      this.isReady = true;
      this._update();
    },
    // Handler for date property change. Computes date value.
    _update: function() {
      if (!this.isReady) {
        return;
      }
      var date = this.date;
      if (!date) {
        date = new Date();
      } else if (typeof date === 'string') {
        try {
          date = new Date(date);
          var _test = date.getDate();
          if (_test !== _test) {
            date = new Date();
          }
        } catch (e) {
          date = new Date();
        }
      } else if (Number.isInteger(date)) {
        date = new Date(date);
      } else if (!(date instanceof Date)) {
        date = new Date();
      }
      var options = {
        year: this.year ? this.year : undefined,
        month: this.month ? this.month : undefined,
        day: this.day ? this.day : undefined,
        hour: this.hour ? this.hour : undefined,
        minute: this.minute ? this.minute : undefined,
        second: this.second ? this.second : undefined,
        weekday: this.weekday ? this.weekday : undefined,
        era: this.era ? this.era : undefined,
        timeZoneName: this.timeZoneName ? this.timeZoneName : undefined,
        timeZone: this.timeZone ? this.timeZone : undefined
      };

      if (this.hour12 !== undefined) {
        options.hour12 = this.hour12;
      }
      var locales;
      if (this.locales) {
        locales = this.locales;
      }
      var value = new Intl.DateTimeFormat(locales, options).format(date);
      this.set('display', value);
      this._setIso(date.toISOString());
    }
  });
  </script>
</dom-module>
<!--
`<request-timings>`
An element to display request timings information as a timeline according to the HAR 1.2 spec.

The `timings` property should contain timings object as defined in [HAR 1.2 spec](https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HAR/Overview.html#sec-object-types-timings).

The timings object is consisted of:
- **blocked** [number, optional] - Time spent in a queue waiting for a network connection. Use -1 if the timing does not apply to the current request.
- **dns** [number, optional] - DNS resolution time. The time required to resolve a host name. Use -1 if the timing does not apply to the current request.
- **connect** [number, optional] - Time required to create TCP connection. Use -1 if the timing does not apply to the current request.
- **send** [number] - Time required to send HTTP request to the server.
- **wait** [number] - Waiting for a response from the server.
- **receive** [number] - Time required to read entire response from the server (or cache).
- **ssl** [number, optional] - Time required for SSL/TLS negotiation. If this field is defined then the time is also included in the connect field (to ensure backward compatibility with HAR 1.1). Use -1 if the timing does not apply to the current request.

Additionally the object can contain the `startTime` property that indicates
the request start time. If can be Date object, timestamp or formatted string
representing a date.

The timeline for `connect`, `send`, `wait` and `receive` are always shown.
`blocked`, `dns` and `ssl` are visible only if values for it was set and value
was > 0.

### Example
```
<request-timings timings="[[requestTimings]]"></request-timings>
```

### Styling
`<request-timings>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--request-timings` | Mixin applied to the element | `{}`
`--select-text` | Mixin applied to the text elements that should have text selection enabled (in some platforms text selection is disabled by default) | `{}`
`--form-label` | Mixin applied to labels elements | `{}`
`--request-timings-progress-height` | The height of the progress bar | `12px`
`--request-timings-progress-background` | Background color of the progress bar. | `#F5F5F5`
`--request-timings-progress-color` | Color of the progress bar. | `#4a4`
`--request-timings-label-width` | Width of the label | `160px`
`--request-timings-value-width` | Width of the value column | `120px`

@group UI Elements
@element request-timings
@demo demo/index.html
-->
<dom-module id="request-timings" assetpath="bower_components/request-timings/">
  <template>
    <style>
     :host {
      display: block;
      --paper-progress-height: var(--request-timings-progress-height, 12px);
      --paper-progress-container-color: var(--request-timings-progress-background, #F5F5F5);
      --paper-progress-active-color: var(--request-timings-progress-background, #F5F5F5);
      --paper-progress-secondary-color: var(--request-timings-progress-color, #4a4);
      @apply(--request-timings);
    }

    .row {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .flex,
    .timing-chart {
      @apply(--layout-flex);
    }

    .label,
    .date-value {
      @apply(--select-text);
      @apply(--form-label);
    }

    .timing-label {
      width: var(--request-timings-label-width, 160px);
      @apply(--form-label);
    }

    .timing-value {
      width: var(--request-timings-value-width, 120px);
      text-align: right;
      @apply(--select-text);
    }

    paper-progress {
      width: 100%;
    }

    .total {
      margin-top: 12px;
      padding-top: 12px;
      font-weight: 500;
      border-top: 2px var(--paper-grey-200, rgba(255, 0, 0, 0.74)) solid;
    }
    </style>
    <div class="row" hidden$="[[!_hasValue(startTime)]]">
      <div class="flex">
        <span class="label">Start date</span>:
        <date-time year="numeric" month="numeric" day="numeric" hour="numeric" minute="numeric" second="numeric" class="date-value" date="[[startTime]]"></date-time>
      </div>
    </div>
    <div class="row" hidden$="[[!_hasValue(blocked)]]">
      <div class="timing-label label" id="queueing">
        Queueing:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="queueing" value="0" secondary-progress="[[blocked]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(blocked)]] ms</span>
    </div>
    <div class="row" hidden$="[[!_hasValue(dns)]]">
      <div class="timing-label label" id="dnsLookup">
        DNS Lookup:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="dnsLookup" value="[[_computeSum(blocked)]]" secondary-progress="[[_computeSum(blocked, dns)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(dns)]] ms</span>
    </div>
    <div class="row">
      <div class="timing-label label" id="ttc">
        Time to connect:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="ttc" value="[[_computeSum(blocked, dns)]]" secondary-progress="[[_computeSum(blocked, dns, connect)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(connect)]] ms</span>
    </div>
    <div class="row" hidden$="[[!_hasValue(ssl)]]">
      <div class="timing-label label" id="ssl">
        SSL negotiation:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="ssl" secondary-progress="[[_computeSum(blocked, dns, connect, ssl)]]" value="[[_computeSum(blocked, dns, connect)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(ssl)]] ms</span>
    </div>
    <div class="row">
      <div class="timing-label label" id="sendTime">
        Send time:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="sendTime" secondary-progress="[[_computeSum(blocked, dns, connect, ssl, send)]]" value="[[_computeSum(blocked, dns, connect, ssl)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(send)]] ms</span>
    </div>
    <div class="row">
      <div class="timing-label label" id="ttfb">
        Wait time (TTFB):
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="ttfb" secondary-progress="[[_computeSum(blocked, dns, connect, send, ssl, wait)]]" value="[[_computeSum(blocked, dns, connect, send, ssl)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(wait)]] ms</span>
    </div>
    <div class="row">
      <div class="timing-label label" id="receive">
        Content download:
      </div>
      <div class="timing-chart">
        <paper-progress aria-labelledby="receive" secondary-progress="[[_computeSum(blocked, dns, connect, send, ssl, wait, receive)]]" value="[[_computeSum(blocked, dns, connect, send, ssl, wait)]]" max="[[fullTime]]" step="0.0001"></paper-progress>
      </div>
      <span class="timing-value">[[_round(receive)]] ms</span>
    </div>
    <div class="row">
      <div class="flex"></div>
      <span class="timing-value total">[[_round(fullTime)]] ms</span>
    </div>
  </template>
  <script>
  Polymer({
    is: 'request-timings',
    properties: {
      /**
       * A timings object as described in HAR 1.2 spec.
       */
      timings: {
        type: Object
      },
      /**
       * Request stat time. It can be either Date object,
       * timestamp or a string representing the date.
       *
       * If the `timings` property contains the `startTime` property it
       * will be overwritten.
       */
      startTime: {
        type: String
      },
      /**
       * Computed value. Calculated full time of the request and response
       */
      fullTime: {
        type: Number,
        readOnly: true
      },
      // Computed value. Time required to establish the connection
      connect: {
        type: Number,
        readOnly: true
      },
      // Computed value. Time of receiving data from the remote machine.
      receive: {
        type: Number,
        readOnly: true
      },
      // Computed value. Time to send data to the remote machine.
      send: {
        type: Number,
        readOnly: true
      },
      // Computed value. Wait time for the first byte to arrive.
      wait: {
        type: Number,
        readOnly: true
      },
      // Computed value. Time spent in a queue waiting for a network connection
      blocked: {
        type: Number,
        readOnly: true
      },
      // Computed value. DNS resolution time.
      dns: {
        type: Number,
        readOnly: true
      },
      // Computed value. Time required for SSL/TLS negotiation.
      ssl: {
        type: Number,
        readOnly: true
      }
    },

    observers: [
      '_update(timings.*)'
    ],

    ready: function() {
      this.isReady = true;
      this._update();
    },

    detached: function() {
      this.reset();
    },
    // Resets the timeline.
    reset: function() {
      this._setFullTime(0);
      this._setConnect(0);
      this._setReceive(0);
      this._setSend(0);
      this._setWait(0);
      this._setDns(-1);
      this._setBlocked(-1);
      this._setSsl(-1);
      this.startTime = 0;
    },

    // Updates the view after `timings` change.
    _update: function() {
      if (!this.isReady) {
        return;
      }
      var timings = this.timings || {};
      var fullTime = 0;
      var connect = Number(timings.connect);
      var receive = Number(timings.receive);
      var send = Number(timings.send);
      var wait = Number(timings.wait);
      var blocked = Number(timings.blocked);
      var dns = Number(timings.dns);
      var ssl = Number(timings.ssl);
      if (connect !== connect || connect < 0) {
        connect = 0;
      }
      if (receive !== receive || receive < 0) {
        receive = 0;
      }
      if (send !== send || send < 0) {
        send = 0;
      }
      if (wait !== wait || wait < 0) {
        wait = 0;
      }
      if (dns !== dns || dns < 0) {
        dns = -1;
      }
      if (blocked !== blocked || blocked < 0) {
        blocked = -1;
      }
      if (ssl !== ssl || ssl < 0) {
        ssl = -1;
      }
      fullTime += connect + receive + send + wait;
      if (dns > 0) {
        fullTime += dns;
      }
      if (blocked > 0) {
        fullTime += blocked;
      }
      if (ssl > 0) {
        fullTime += ssl;
      }
      this._setFullTime(fullTime);
      this._setConnect(connect);
      this._setReceive(receive);
      this._setSend(send);
      this._setWait(wait);
      this._setDns(dns);
      this._setBlocked(blocked);
      this._setSsl(ssl);
      if (timings.startTime) {
        this.set('startTime', timings.startTime);
      } else {
        this.set('startTime', this.startTime || -1);
      }
    },
    /**
     * Round numeric value to presision defined in the `power` argument.
     *
     * @param {Number} value The value to round
     * @param {Number} power The precision. 0 for integers. Default 4.
     * @return {Number} Rounded value.
     */
    _round: function(value, power) {
      value = Number(value);
      if (value !== value) {
        return 'unknown';
      }
      power = +power;
      if (power === 0) {
        return Math.round(value);
      }
      if (!power || power !== power) {
        power = 4;
      }
      power = Math.pow(10, power);
      return Math.round(value * power) / power;
    },
    // Computes sum of the arguments.
    _computeSum: function(/* args */) {
      var sum = 0;
      var values = Array.prototype.slice.call(arguments);
      values.forEach(function(i) {
        i = Number(i);
        if (i < 0) {
          return;
        }
        sum += i;
      });
      return sum;
    },

    _hasValue: function(num) {
      if (num === undefined) {
        return false;
      }
      if (typeof num === 'string') {
        return !!num;
      }
      return num > 0;
    }
  });
  </script>
</dom-module>
<!--

The `request-timings-panel` element is a panel to display a set of timings
for the request / response. The use case is to display timings for the request
where redirects are possible and timings for the redirects are calculated.

The timings accepted by this element is defined in the HAR 1.2 spec. See The
`request-timings` element docs for more info.

Custom property | Description | Default
----------------|-------------|----------
`--request-timings-panel` | Mixin applied to the element | `{}`
`--arc-font-subhead` | Mixin applied to the headers element. Similar to `--paper-font-subhead` mixin in Paper elements. | `{}`

Use `request-timings` properties an mixins to style the charts.

@group UI Elements
@element request-timings-panel
@demo demo/request-timings-panel.html
-->
<dom-module id="request-timings-panel" assetpath="bower_components/request-timings/">
  <template>
    <style>
     :host {
      display: block;
      @spply(--request-timings-panel);
    }

    .status-row,
    .timings-row {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      min-height: 56px;
    }

    .status-row {
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
    }

    .sub-title {
      @apply(--arc-font-subhead);
    }

    .status-label {
      width: 60px;
      font-size: var(--request-timings-panel-timing-total-size, 16px);
      font-weight: var(--request-timings-panel-timing-total-weigth, 400);
      @apply(--arc-font-subhead);
    }

    .text {
      -webkit-user-select: text;
      cursor: text;
    }

    .redirect-value {
      margin-top: 12px;
      @apply(--layout-flex);
    }
    </style>
    <template is="dom-if" if="[[hasRedirects]]" restamp="">
      <h3 class="sub-title">Redirects</h3>
      <template is="dom-repeat" items="[[redirects]]">
        <div class="timings-row">
          <div class="status-label text">
            #<span>{{_computeIndexName(index)}}</span>
          </div>
          <div class="redirect-value">
            <request-timings timings="[[item]]"></request-timings>
          </div>
        </div>
      </template>
      <template is="dom-if" if="[[hasTimings]]">
        <h3 class="sub-title">Final request</h3>
        <div class="timings-row">
          <div class="redirect-value">
            <request-timings timings="[[timings]]"></request-timings>
          </div>
        </div>
      </template>
      <div class="status-row">
        <div class="flex"></div>
        <span class="timing-value total text">[[requestTotalTime]] ms</span>
      </div>
    </template>
    <template is="dom-if" if="[[!hasRedirects]]" restamp="">
      <request-timings timings="[[timings]]"></request-timings>
    </template>
  </template>
  <script>
  Polymer({
    is: 'request-timings-panel',
    properties: {
      // Computed value, if true it will display redirects details
      hasRedirects: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      // Computed value, True if any request timings are available.
      hasTimings: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      /**
       * An array of HAR 1.2 timings object.
       * It should contain a timings objects for any redirect object during
       * the request.
       * List should be arelady ordered by the time of occurence.
       */
      redirects: {
        type: Array,
        value: function() {
          return [];
        }
      },
      // The request / response HAR timings.
      timings: {
        type: Object,
        value: function() {
          return {};
        }
      },
      /**
       * Calculated total request time (final response + redirects).
       */
      requestTotalTime: {
        type: Number,
        value: 0,
        readOnly: true
      }
    },

    observers: [
      '_redirectsChanged(redirects.*)',
      '_timingsChanged(timings.*)',
      '_computeRequestTime(redirects.*)',
      '_computeRequestTime(timings.*)'
    ],

    _redirectsChanged: function() {
      var rt = this.redirects;
      if (!rt || !rt.length) {
        this._setHasRedirects(false);
      } else {
        this._setHasRedirects(true);
      }
    },
    // Handler for the timings change.
    _timingsChanged: function() {
      var rt = this.timings;
      if (!rt) {
        this._setHasTimings(false);
      } else {
        this._setHasTimings(true);
      }
    },

    _computeIndexName: function(index) {
      return index + 1;
    },

    _computeRequestTime: function() {
      var rt = this.redirects;
      var timings = this.timings;
      var time = 0;
      if (!!rt && rt.length) {
        rt.forEach(function(timing) {
          time += this._computeHarTime(timing);
        }, this);
      }
      var add = this._computeHarTime(timings);
      if (add) {
        time += add;
      }
      time = Math.round(time * 10000) / 10000;
      this._setRequestTotalTime(time);
    },

    _computeHarTime: function(har) {
      var fullTime = 0;
      if (!har) {
        return fullTime;
      }
      var connect = Number(har.connect);
      var receive = Number(har.receive);
      var send = Number(har.send);
      var wait = Number(har.wait);
      var blocked = Number(har.blocked);
      var dns = Number(har.dns);
      var ssl = Number(har.ssl);
      if (connect !== connect || connect < 0) {
        connect = 0;
      }
      if (receive !== receive || receive < 0) {
        receive = 0;
      }
      if (send !== send || send < 0) {
        send = 0;
      }
      if (wait !== wait || wait < 0) {
        wait = 0;
      }
      if (dns !== dns || dns < 0) {
        dns = -1;
      }
      if (blocked !== blocked || blocked < 0) {
        blocked = -1;
      }
      if (ssl !== ssl || ssl < 0) {
        ssl = -1;
      }
      fullTime += connect + receive + send + wait;
      if (dns > 0) {
        fullTime += dns;
      }
      if (blocked > 0) {
        fullTime += blocked;
      }
      if (ssl > 0) {
        fullTime += ssl;
      }
      return fullTime;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
An element that will display a header list value as a link.

Regular data binding in Polymer is using innerText setter to assign the value.
Thus any HTML tag won't be recognized and displayed as text.
This element will find links in the header value and display it as a link
if necessary.
Parent elements may catch link action and prohibit from navigation and use
the link value somehow.

To catch autogenerated link check class name on an event target. It should
contain `auto-link` CSS class name.

### Styling
`<headers-list-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--headers-list-item-value` | Mixin applied to the element | `{}`
`--arc-link` | Mixin applied to autogenerated link | `{}`

@group UI Elements
@element headers-list-item-value
-->
<dom-module id="headers-list-item-value" assetpath="bower_components/headers-list-view/">
  <template>
    <style>
    :host {
      display: inline;
      font-family: inherit;
      font-size: inherit;
      @apply(--headers-list-item-value);
    }

    .auto-link {
      @apply(--arc-link);
    }
    </style>
    <span id="display"></span>
  </template>
</dom-module>
<script>
Polymer({
  is: 'headers-list-item-value',
  properties: {
    /**
     * Header value to display
     */
    value: {
      type: String,
      observer: '_valueChanged'
    }
  },
  _valueChanged: function() {
    var value = this.value;
    if (!value) {
      this.$.display.innerHTML = '';
      return;
    }
    this.$.display.innerHTML = this._autoLink(this._encodeHtml(value));
  },
  // Encodes HTML entities
  _encodeHtml: function(input) {
    if (typeof input !== 'string') {
      return input;
    }
    return input.replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');
  },
  // Finds URLs in input string and adds anchors tags.
  _autoLink: function(input) {
    var r = new RegExp('(https?:\\/\\/([^" >]*))', 'gim');
    return input.replace(r, '<a target="_blank" class="auto-link" href="$1">$1</a>');
  }

});
</script>
<!--
This element is to fix an issue #347
https://github.com/jarrodek/ChromeRestClient/issues/347

When the app is using paper-item as a line for header line it is impossible to
copy header line text in one line because it is copied in two lines (HTML behavior).
And because of it the user can't properly paste headers into notepad / headers input in the app.

This element will imitate paper-item but without using flex layout.
-->
<dom-module id="headers-list-item" assetpath="bower_components/headers-list-view/">
  <template>
    <style include="paper-item-shared-styles">
     :host {
      min-height: var(--headers-list-item-min-height, 20px);
      -webkit-user-select: text;
      word-break: break-word;
      @apply(--arc-font-code1);
      @apply(--layout-horizontal);
      @apply(--headers-list-item);
    }

    headers-list-item-value {
      margin-left: 8px;
    }
    </style>
    <span class="header-name">[[name]]:</span>
    <headers-list-item-value class="header-value" value="[[value]]"></headers-list-item-value>
  </template>
</dom-module>
<script>
Polymer({
  is: 'headers-list-item',
  properties: {
    // Header name to display
    name: String,
    // Header value to display
    value: String
  },
  behaviors: [
    Polymer.PaperItemBehavior
  ]
});
</script>
<!--
`<headers-list-view>` An element that displays a list of headers.

List items are active and on double click it will send the `query-headers`
event. Hosting app should handle this event to display header details.

Such behavior is supported by the `arc-definitions` element.

Any links in the header value will be converted to anchor and hosting app
can handle click on this link by listening for click event and checking if the
target element contains `auto-link` class name. If the click is not prevented
then it will open the target in new tab.

The `headers` accepts a HTTP headers string or the Headers object.
It will be parsed to array of objects with `name` and `value` keys and
passed to the `_headers` property.

### Example
```
<headers-list-view headers="[[myHeaders]]"></headers-list-view>
```

### Styling
`<headers-list-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--headers-list-view` | Mixin applied to the element | `{}`
`--arc-font-body1` | Mixin applied to the example section in the details dialog. | `{}`
`--arc-font-body2` | Mixin applied to the description section in the details dialog. | `{}`

@group UI Elements
@element headers-list-view
@demo demo/index.html
-->
<dom-module id="headers-list-view" assetpath="bower_components/headers-list-view/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--headers-list-view);
    }

    .dialog-header-example {
      @apply(--arc-font-body1);
      margin-top: 16px;
    }

    .dialog-header-desc {
      @apply(--arc-font-body2);
    }
    </style>

    <template is="dom-repeat" items="[[_headers]]">
      <headers-list-item on-dblclick="_displayHeaderInfo" name="[[item.name]]" value="[[item.value]]"></headers-list-item>
    </template>

    <paper-dialog id="headerInfo">
      <h2>[[_hdTitle]]</h2>
      <paper-dialog-scrollable>
        <section class="dialog-header-desc">[[_hdBody]]</section>
        <section class="dialog-header-example">
          <span>Example:</span>
          <span>[[_hdExample]]</span>
        </section>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-confirm="" autofocus="">Close</paper-button>
      </div>
    </paper-dialog>
  </template>
  <script>
  Polymer({
    is: 'headers-list-view',

    behaviors: [ArcBehaviors.HeadersParserBehavior],

    properties: {
      /**
       * A HTTP headers to display.
       *
       * @type {String}
       */
      headers: String,
      /**
       * Parsed headers to the array of headers.
       *
       * @type {Array<Object>}
       */
      _headers: Array,
      /**
       * Type of the header.
       * Can be either `request` or `response`.
       * It is required for displaying the help for the headers. The element
       * fires the `query-headers` event on double click which requires this
       * information to be set.
       *
       * @type {String}
       */
      type: {
        type: String,
        value: 'response'
      },
      /**
       * Header title in the details dialog.
       *
       * @type {String}
       */
      _hdTitle: String,
      /**
       * Header description in the details dialog.
       *
       * @type {String}
       */
      _hdBody: String,
      /**
       * Header example in the details dialog.
       *
       * @type {String}
       */
      _hdExample: String,
    },

    observers: [
      '_headersChanged(headers)'
    ],
    // Handler on headers change. Parses headers to an array.
    _headersChanged: function(headers) {
      this._headers = this.headersToJSON(headers);
    },
    /**
     * Double click on header line handler.
     * Will call model for data to display.
     */
    _displayHeaderInfo: function(e) {
      var item = e.model.get('item');
      var header = item.name.toLowerCase();
      var event = this.fire('query-headers', {
        'type': this.type,
        'query': header
      });
      var headers = event.detail.headers;
      if (headers && headers.length) {
        var result = headers[0];
        this._hdTitle = result.key;
        this._hdBody = result.desc;
        this._hdExample = result.example;
        this.$.headerInfo.open();
      }
      this.fire('send-analytics', {
        type: 'event',
        category: 'Headers list',
        action: 'Display header info',
        label: header
      });
    },
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`http-source-message-view` displays the HTTP source message that has been sent
to the remote mchine.
-->
<dom-module id="http-source-message-view" assetpath="bower_components/response-status-view/">
  <template>
    <style>
     :host {
      margin: 16px 16px 0 16px;
      overflow: auto;
      display: block;
      @apply(--http-source-message-view);
    }

    pre {
      word-break: break-all;
      @apply(--arc-font-code1);
      -webkit-user-select: text;
      cursor: text;
      @apply(--http-source-message);
      margin-bottom: 0;
    }

    h5 {
      margin: 0;
      display: inline-block;
      cursor: pointer;
    }
    </style>
    <h5 on-tap="toggle">
      Source message
      <paper-icon-button icon="[[_computeIcon(opened)]]"></paper-icon-button>
    </h5>
    <iron-collapse id="collapse" opened="{{opened}}">
      <pre>[[message]]</pre>
    </iron-collapse>
  </template>
  <script>
  Polymer({
    is: 'http-source-message-view',

    properties: {
      // A HTTP message to display.
      message: String,
      // True if the message is visible.
      opened: Boolean
    },

    toggle: function() {
      this.$.collapse.toggle();
    },

    _computeIcon: function(opened) {
      return opened ? 'arc:expand-less' : 'arc:expand-more';
    }
  });
  </script>
</dom-module>
<script>
/**
 * Use the `<status-message>` element to generate status message for corresponding
 * status code.
 *
 * ## Usage
 * Create an element and set the `code` property. The `message` property will be
 * set synchronously with the corresponding HTTP status message (in spec defined
 * as a reason message).
 * If the status code is non standard status code then the message property
 * will be `undefined`.
 *
 * ### Example:
 * ```
 * var element = document.createElement('status-message');
 * element.code = 201;
 * console.log(element.message);
 * ```
 * Note that the `code` can be string and it will be converted into the numeric
 * value.
 */
Polymer({
  is: 'status-message',
  properties: {
    /**
     * The status code.
     */
    code: {
      type: Number,
      observer: 'setMessage'
    },
    /**
     * Mesage associated with the status code.
     * It will be filled as soon as `code` change.
     */
    message: {
      type: String,
      readOnly: true,
      notify: true
    }
  },

  /**
   * Associates status message to the `code`.
   * Don't call this method after setting the `code` property. It will be called
   * automatically.
   */
  setMessage: function() {
    var code = this.code;
    code = Number(code);
    var message;
    switch (code) {
      case 0:
        message = 'Request error';
        break;
      case 100:
        message = 'Continue';
        break;
      case 101:
        message = 'Switching Protocols';
        break;
      case 200:
        message = 'OK';
        break;
      case 201:
        message = 'Created';
        break;
      case 202:
        message = 'Accepted';
        break;
      case 203:
        message = 'Non-Authoritative Information';
        break;
      case 204:
        message = 'No Content';
        break;
      case 205:
        message = 'Reset Content';
        break;
      case 206:
        message = 'Partial Content';
        break;
      case 300:
        message = 'Multiple Choices';
        break;
      case 301:
        message = 'Moved Permanently';
        break;
      case 302:
        message = 'Found';
        break;
      case 303:
        message = 'See Other';
        break;
      case 304:
        message = 'Not Modified';
        break;
      case 305:
        message = 'Use Proxy';
        break;
      case 306:
        message = '(Unused)';
        break;
      case 307:
        message = 'Temporary Redirect';
        break;
      case 400:
        message = 'Bad Request';
        break;
      case 401:
        message = 'Unauthorized';
        break;
      case 402:
        message = 'Payment Required';
        break;
      case 403:
        message = 'Forbidden';
        break;
      case 404:
        message = 'Not Found';
        break;
      case 405:
        message = 'Method Not Allowed';
        break;
      case 406:
        message = 'Not Acceptable';
        break;
      case 407:
        message = 'Proxy Authentication Required';
        break;
      case 408:
        message = 'Request Timeout';
        break;
      case 409:
        message = 'Conflict';
        break;
      case 410:
        message = 'Gone';
        break;
      case 411:
        message = 'Length Required';
        break;
      case 412:
        message = 'Precondition Failed';
        break;
      case 413:
        message = 'Request Entity Too Large';
        break;
      case 414:
        message = 'Request-URI Too Long';
        break;
      case 415:
        message = 'Unsupported Media Type';
        break;
      case 416:
        message = 'Requested Range Not Satisfiable';
        break;
      case 417:
        message = 'Expectation Failed';
        break;
      case 500:
        message = 'Internal Server Error';
        break;
      case 501:
        message = 'Not Implemented';
        break;
      case 502:
        message = 'Bad Gateway';
        break;
      case 503:
        message = 'Service Unavailable';
        break;
      case 504:
        message = 'Gateway Timeout';
        break;
      case 505:
        message = 'HTTP Version Not Supported';
        break;
    }
    return this._setMessage(message);
  }
});
</script>
<!--
`<response-status-view>` HTTP response status view, including status, headers redirects and timings

### Full example
```
<response-status-view
  status-code="[[statusCode]]"
  status-message="[[statusMessage]]"
  request-headers="[[requestHeaders]]"
  response-headers="[[responseHeaders]]"
  loading-time="[[loadingTime]]"
  http-message="[[_computeHttpMessage(requestHeaders)]]"
  redirects="[[redirects]]"
  redirect-timings="[[redirectTimings]]"
  timings="[[timings]]"></response-status-view>
```
### Minimal example
```
<response-status-view
  status-code="[[statusCode]]"
  status-message="[[statusMessage]]"
  response-headers="[[responseHeaders]]"
  loading-time="[[loadingTime]]"></response-status-view>
```

## Data Structure

### Redirects
#### `redirects`
Array of objects. Each objects need to have the `headers` property as a HTTP headers string, `status` as a HTTP status and optionally `statusText`.
#### `redirectTimings`
Array of objects. Each object represent a HAR 1.2 timings object. See the `request-timings` element documentation for more information.
### `responseError`
A JavaScript Error object.
### `timings`
Object that represent a HAR 1.2 timings object. See the `request-timings` element documentation for more information.

## Status message
The element will set a status message if, after 100 ms of setting the status code
property, the `statusMessage` property is not set. This is to ensure that the
user will always see any status message.

## Styling
`<response-status-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-status-view` | Mixin applied to the element | `{}`
`--raml-docs-response-panel` | Mixin applied to the element | `{}`
`--arc-status-code-color-200` | Color of the 200 status code (ARC theme option) | `rgba(56, 142, 60, 1)` |
`--arc-status-code-color-300` | Color of the 300 status code (ARC theme option) | `rgba(48, 63, 159, 1)` |
`--arc-status-code-color-400` | Color of the 400 status code (ARC theme option) | `rgba(245, 124, 0, 1)` |
`--arc-status-code-color-500` | Color of the 500 status code (ARC theme option) | `rgba(211, 47, 47, 1)` |
`--arc-font-subhead` | Mixin applied to sub headers (low implortance headers). It's a theme mixin. | `{}`
`--no-info-message` | Mixin applied to the messages information that there's no information available. | `{}`
`--arc-font-code1` | Mixin applied to the source message. It's a theme mixin. | `{}`
`--response-status-view-badge-color` | Color of the badge with number of the headers / redirections in advanced view | `#fff`
`--response-status-view-badge-background` | Background color of the badge with number of the headers / redirections in advanced view | `--accent-color`
`--response-status-view-empty-badge-color` | Color of the badge with number of the headers / redirections in advanced view | `#fff`
`--response-status-view-empty-badge-background` | Background color of the badge with number of the headers / redirections in advanced view | `#9e9e9e`
`--response-status-view-status-info-border-color` | Border color separating status from the response headers | `#e5e5e5`
`--response-status-view-status-container` | Mixin applied to the status row in the main view and in the redirects view (in advanced mode). | `{}`

@group UI Elements
@element response-status-view
@demo demo/index.html
-->
<dom-module id="response-status-view" assetpath="bower_components/response-status-view/">
  <template>
    <style>
    :host {
      @apply(--layout-vertical);
      @apply(--response-status-view);
    }

    .status-row,
    .timings-row {
      @apply(--layout-horizontal);
      @apply(--arc-font-subhead);
      @apply(--layout-center);
      min-height: 56px;
    }

    .status-row {
      border-bottom: 1px var(--response-status-view-status-info-border-color, #e5e5e5) solid;
    }

    .timings-row {
      padding-right: 0;
    }

    .status-label {
      width: 40px;
      @apply(--arc-font-subhead);
    }

    .status-value {
      @apply(--layout-flex);
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-status-view-status-container);
    }

    .status-value > span {
      display: block;
    }

    .status-value.status {
      padding: 0 16px;
    }

    .redirect-value {
      margin-top: 12px;
      @apply(--layout-flex);
    }

    .no-redirects-container {
      @apply(--layout-vertical);
      @apply(--layout-center);
    }

    .no-redirects-info {
      @apply(--no-info-message);
    }

    headers-list-view {
      margin-top: 12px;
    }

    .text {
      @apply(--select-text);
    }

    .badge {
      display: block;
      background-color: var(--response-status-view-badge-background, --accent-color);
      color: var(--response-status-view-badge-color, #fff);
      width: 20px;
      height: 20px;
      border-radius: 50%;
      font-size: 12px;
      margin-left: 12px;
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
    }

    .badge.empty {
      background-color: var(--response-status-view-empty-badge-background, #9e9e9e);
      color: var(--response-status-view-empty-badge-color, #fff);
    }

    .status-value.status.text > span:not(:first-child) {
      margin-left: 8px;
    }

    .status-code-value {
      padding: 4px 8px;
      color: #fff;
      border-radius: 2px;
      background-color: var(--arc-status-code-color-200, rgba(56, 142, 60, 1));
    }

    .info.status-code-value {
      background-color: var(--arc-status-code-color-300, rgba(48, 63, 159, 1));
    }

    .warning.status-code-value {
      background-color: var(--arc-status-code-color-400, rgba(245, 124, 0, 1));
    }

    .error.status-code-value {
      background-color: var(--arc-status-code-color-500, rgba(211, 47, 47, 1));
    }

    .response-time {
      color: var(--response-status-view-loading-time-color, rgba(0, 0, 0, 0.54));
      margin-left: 8px;
    }

    .status-info {
      @apply(--layout-flex);
    }

    .toggle-button {
      color: var(--response-status-view-toggle-icon-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
    }

    .toggle-icon {
      transform: rotateZ(0deg);
      transition: transform 0.3s linear;
    }

    .toggle-icon.opened {
      transform: rotateZ(-180deg);
    }

    .toggle-button:hover {
      color: var(--response-status-view-toggle-icon-hover-color, rgba(0, 0, 0, 0.78));
    }

    .xhr-title {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      padding: 0px 16px;
      @apply(--arc-font-subhead);
    }

    .redirect-location {
      margin-left: 8px;
    }

    .response-error-label {
      margin-left: 12px;
      color: var(--arc-status-code-color-500, rgba(211, 47, 47, 1));
    }

    .status-url {
      @apply(--arc-font-body1);
      @apply(--layout-horizontal);
      @apply(--layout-center);
      padding-top: 12px;
      padding-bottom: 12px;
      font-size: 120%;
      padding-left: 16px;
      background: var(--response-status-view-request-url-background-color, #6B6C6D); /*--anypoint-steel1*/
      color: var(--response-status-view-request-url-color, #fff);
      @apply(--arc-font-code);
      @apply(--response-status-view-request-url-info);
    }

    .http-method {
      margin-right: 12px;
    }

    .request-url {
      word-break: break-all;
    }

    .no-info {
      padding-left: 16px;
      @apply(--no-info-message);
    }
    </style>
    <div class="status-row">
      <div class="status-value status">
        <template is="dom-if" if="[[!isError]]">
          <div class="status-info text">
            <span class$="[[_computeStatusClass(statusCode)]]">[[statusCode]] [[statusMessage]]</span>
            <span class="response-time" hidden$="[[!loadingTime]]">[[_roundTime(loadingTime)]] ms</span>
          </div>
          <div class="status-details">
            <paper-button on-tap="toggleCollapse" class="toggle-button" title="Toogle response headers">
              Details
              <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(opened)]]"></iron-icon>
            </paper-button>
          </div>
        </template>
        <template is="dom-if" if="[[isError]]">
          <span class="error status-code-value">0</span>
          <span class="response-time" hidden$="[[!loadingTime]]">[[_roundTime(loadingTime)]] ms</span>
          <p class="response-error-label">Error in the response.</p>
        </template>
      </div>
    </div>
    <iron-collapse opened="[[opened]]">

      <template is="dom-if" if="[[requestUrl]]">
        <div class="status-url">
          <span class="http-method" hidden$="[[!requestMethod]]">[[requestMethod]]</span>
          <span class="request-url">[[requestUrl]]</span>
        </div>
      </template>

      <paper-tabs selected="{{selectedTab}}">
        <paper-tab>
          <span>Response headers</span>
          <span class$="[[_computeBageClass(responseHeaders)]]">[[_computeHeadersLength(responseHeaders)]]</span>
        </paper-tab>
        <paper-tab>
          <span>Request headers</span>
          <span class$="[[_computeBageClass(requestHeaders)]]">[[_computeHeadersLength(requestHeaders)]]</span>
        </paper-tab>
        <template is="dom-if" if="[[!isXhr]]">
          <paper-tab>
            <span>Redirects</span>
            <span class$="[[_computeBageClass(redirects.length)]]">[[redirects.length]]</span>
          </paper-tab>
          <paper-tab>Timings</paper-tab>
        </template>
      </paper-tabs>
      <iron-pages selected="[[selectedTab]]">
        <headers-list-view on-tap="_handleLink" headers="[[responseHeaders]]"></headers-list-view>
        <section class="request-header-panel">
          <template is="dom-if" if="[[hasRequestHeaders]]">
            <headers-list-view type="request" on-tap="_handleLink" headers="[[requestHeaders]]"></headers-list-view>
            <http-source-message-view hidden$="[[!hasHttpMessage]]" message="[[httpMessage]]"></http-source-message-view>
          </template>
          <template is="dom-if" if="[[!hasRequestHeaders]]">
            <p class="no-info">Nothing to display here</p>
          </template>
        </section>
        <section class="redirects-panel">
          <template is="dom-if" if="[[!redirects.length]]">
            <div class="no-redirects-container">
              <p class="no-redirects-info">There were no redirects during this request</p>
            </div>
          </template>
          <template is="dom-repeat" items="[[redirects]]">
            <div class="status-row">
              <div class="status-label text">
                #<span>[[_computeIndexName(index)]]</span>
              </div>
              <div class="redirect-value" on-tap="_handleLink">
                <div class="status-value status text">
                  <span class$="[[_computeStatusClass(item.status)]]">[[item.status]] [[item.statusText]]</span>
                  <span class="redirect-location">to: <a href="[[_computeRedirectLocation(item.headers)]]" class="auto-link">[[_computeRedirectLocation(item.headers)]]</a></span>
                </div>
                <headers-list-view headers="[[item.headers]]"></headers-list-view>
              </div>
            </div>
          </template>
        </section>
        <section class="timings-panel">
          <request-timings-panel redirects="[[redirectTimings]]" timings="[[timings]]"></request-timings-panel>
        </section>
      </iron-pages>
    </iron-collapse>
  </template>
  <script>
  Polymer({
    is: 'response-status-view',
    properties: {
      // Response status code.
      statusCode: {
        type: Number,
        observer: '_statusCodeChanged'
      },
      // Status message (if any)
      statusMessage: String,
      // The request/response loading time.
      loadingTime: {
        type: Number,
        value: 0
      },
      // The response headers as a HTTP headers string
      responseHeaders: {
        type: String
      },
      // The request headers as a HTTP headers string
      requestHeaders: String,
      // Computed value, true when request headers are set.
      hasRequestHeaders: {
        type: String,
        value: false,
        computed: '_computeHasRequestHeaders(requestHeaders)'
      },
      /**
       * Raw HTTP message sent to the server.
       * It will be displayed in the request headers tab.
       * Optional for transports that do not expose this information.
       */
      httpMessage: {
        type: String,
        observer: '_httpMessageChanged'
      },
      // Computed value, true when source HTTP message is not set.
      hasHttpMessage: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      /**
       * An Error object representing the response error.
       */
      responseError: {
        type: Object,
        observer: '_computeError'
      },
      // Calculated to be true if responseError object is set.
      isError: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      /**
       * An array of redirect responses.
       * Each of the response objects should be regular Response objects.
       */
      redirects: {
        type: Array,
        value: []
      },
      /**
       * List of timings occured during the redirects.
       * This list should be ordered by the time of redirection.
       * See the `request-timings` element documentation for more
       * information.
       */
      redirectTimings: {
        type: Array,
        value: function() {
          return [];
        }
      },
      // Currently selected tab.
      selectedTab: {
        type: Number,
        value: 0
      },
      /**
       * The timings object to display request/response timing information
       * as defined in HAR 1.2 spec.
       * See the `request-timings` element documentation for more
       * information.
       */
      timings: {
        type: Object,
        notify: true
      },
      /**
       * If true it means that the request has been made by the basic
       * transport and advanced details of the request/response like
       * redirects, timings, source message are not available.
       * It this case it will hide unused tabs.
       */
      isXhr: {
        type: Boolean,
        observer: '_isXhrChanged'
      },
      // True if the collapsable element is opened
      opened: {
        type: Boolean,
        value: false
      },
      // A request URL that has been used to make a request
      requestUrl: String,
      // A HTTP method used to make a request
      requestMethod: String
    },

    attached: function() {
      if (this.statusCode) {
        this._statusCodeChanged();
      }
    },

    _computeStatusClass: function(code) {
      var cls = 'status-code-value';
      if (code >= 500 || code === 0) {
        cls += ' error';
      }
      if (code >= 400 && code < 500) {
        cls += ' warning';
      }
      if (code >= 300 && code < 400) {
        cls += ' info';
      }
      return cls;
    },

    _statusCodeChanged: function() {
      if (!this.statusCode) {
        this.statusCode = 0;
      }
      this.assignStatusMessage();
    },

    /** Compute index to 1-based index. */
    _computeIndexName: function(index) {
      return index + 1;
    },
    /** Catch headers link click and send proper event to the listeners. */
    _handleLink: function(e) {
      e.preventDefault();
      e = Polymer.dom(e);
      if (e.rootTarget.nodeName === 'A') {
        this.fire('action-link-change', {
          url: e.rootTarget.href
        });
      }
    },
    /**
     * Extracts a location URL form the headers.
     *
     * @param {String} headers A HTTP headers string.
     * @return {String} A value of the location header or `unknown` if not
     * found.
     */
    _computeRedirectLocation: function(headers) {
      if (!headers) {
        return 'unknown';
      }
      var match = headers.match(/^location: (.*)$/im);
      if (!match) {
        return 'unknown';
      }
      return match[1];
    },
    // Computes if this is a response error and sets isError flag.
    _computeError: function(re) {
      this._setIsError(!!re);
    },
    /**
     * Computes CSS class for the badge in the tabs.
     * If passed `input` is string it only check if string is not empty.
     * Otherwise it checks if passed value is !== 0.
     *
     * @param {String|Number} input String or number to check.
     * @return {String} Computed class name for this badge.
     */
    _computeBageClass: function(input) {
      if (typeof input === 'string') {
        return !!input ? 'badge' : 'badge empty';
      }
      return input === 0 ? 'badge empty' : 'badge';
    },
    /**
     * Compute size of the HTTP headers.
     * Note, it only checks for number of lines. It doeasn't check if each line
     * contains string.
     *
     * @param {String} headers The headers strings to count.
     * @return {Number} Size of the headers in passed string.
     */
    _computeHeadersLength: function(headers) {
      if (!headers) {
        return 0;
      }
      return headers.split('\n').length;
    },
    // Computes if `statusMessage` is set.
    _httpMessageChanged: function(message) {
      var status = !!message;
      this._setHasHttpMessage(status);
    },

    _roundTime: function(num) {
      num = Number(num);
      if (num !== num) {
        return '';
      }
      return num.toFixed(2);
    },
    // Toggles collapsable element.
    toggleCollapse: function() {
      this.opened = !this.opened;
    },
    // Computes class for the toggle's button icon.
    _computeToggleIconClass: function(opened) {
      var clazz = 'toggle-icon';
      if (opened) {
        clazz += ' opened';
      }
      return clazz;
    },
    /**
     * This async function is executed after some thime of setting the status
     * code. If after set period of time the `statusMessage` is still not set
     * the it will use the `<status-message>` element to generate default
     * status text message as defined in the spec.
     */
    assignStatusMessage: function() {
      this.async(function() {
        if (this.statusMessage) {
          return;
        }
        var element = document.createElement('status-message');
        element.code = this.statusCode;
        this.statusMessage = element.message;
      }, 100);
    },
    // Resets current tab when isXhr is true.
    _isXhrChanged: function(value) {
      if (value === undefined) {
        return;
      }
      if (value && this.selectedTab > 1) {
        this.selectedTab = 0;
      }
      var tabs = this.$$('paper-tabs');
      if (!tabs) {
        console.warn('Tabs panel not found in DOM');
        return;
      }
      tabs.notifyResize();
    },
    // Computes if request headers has been set.
    _computeHasRequestHeaders: function(requestHeaders) {
      return !!requestHeaders;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<response-error-view>` A view for the response error.

The element displays predefined error message with icon and depending on the
`message` property it will display custom message or a predefined explanation
if the message is one of the Chrome's network errors (net::*).

If the `message` property is not set then a defaulot message will be displayed.

### Example
#### Custom message
```
<response-error-view message="Unable to run the request"></response-error-view>
```

### predefined message (chrome network error)
```
<response-error-view message="net::ERR_BAD_SSL_CLIENT_AUTH_CERT"></response-error-view>
<response-error-view message="net::ERR_CONNECTION_REFUSED"></response-error-view>
```

## Predefined messages
- Request aborted
- net::ERR_CERT_AUTHORITY_INVALID
- net::ERR_CONNECTION_REFUSED
- net::ERR_CERT_COMMON_NAME_INVALID
- net::ERR_ADDRESS_UNREACHABLE
- net::ERR_BAD_SSL_CLIENT_AUTH_CERT
- net::ERR_BLOCKED_BY_ADMINISTRATOR
- net::ERR_BLOCKED_BY_CLIENT
- net::ERR_BLOCKED_ENROLLMENT_CHECK_PENDING
- net::ERR_CERT_CONTAINS_ERRORS
- net::ERR_CERT_DATE_INVALID
- net::ERR_CERT_END
- net::ERR_CERT_ERROR_IN_SSL_RENEGOTIATION
- net::ERR_CERT_INVALID
- net::ERR_CERT_NAME_CONSTRAINT_VIOLATION
- net::ERR_CERT_NON_UNIQUE_NAME
- net::ERR_CERT_NO_REVOCATION_MECHANISM
- net::ERR_CERT_REVOKED
- net::ERR_CERT_UNABLE_TO_CHECK_REVOCATION
- net::ERR_CERT_VALIDITY_TOO_LONG
- net::ERR_CERT_WEAK_KEY
- net::ERR_CERT_WEAK_SIGNATURE_ALGORITHM
- net::ERR_CONNECTION_CLOSED
- net::ERR_CONNECTION_RESET
- net::ERR_CONNECTION_FAILED
- net::ERR_CONNECTION_REFUSED
- net::ERR_CONNECTION_TIMED_OUT
- net::ERR_CONTENT_LENGTH_MISMATCH
- net::ERR_INCOMPLETE_CHUNKED_ENCODING
- net::ERR_FILE_NOT_FOUND
- net::ERR_ICANN_NAME_COLLISION
- net::ERR_INTERNET_DISCONNECTED
- net::ERR_NAME_NOT_RESOLVED
- net::ERR_NAME_RESOLUTION_FAILED
- net::ERR_NETWORK_ACCESS_DENIED
- net::ERR_NETWORK_CHANGED
- net::ERR_NETWORK_IO_SUSPENDED
- net::ERR_PROXY_CONNECTION_FAILED
- net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION
- net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH
- net::ERR_RESPONSE_HEADERS_MULTIPLE_LOCATION
- net::ERR_SSL_FALLBACK_BEYOND_MINIMUM_VERSION
- net::ERR_SSL_PROTOCOL_ERROR
- net::ERR_SSL_PINNED_KEY_NOT_IN_CERT_CHAIN
- net::ERR_SSL_SERVER_CERT_BAD_FORMAT
- net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH
- net::ERR_SSL_WEAK_SERVER_EPHEMERAL_DH_KEY
- net::ERR_TEMPORARY_BACKOFF
- net::ERR_TIMED_OUT
- net::ERR_TOO_MANY_REDIRECTS

### Styling
The styling is consistent with the `error-message` element styling options.

`<response-error-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-error-view` | Mixin applied to the element | `{}`
`--error-message-icon-color` | Color of the icon | `rgba(0, 0, 0, 0.56)`
`--error-message-icon` | Mixin apllied to the icon | `{}`
`--arc-font-subhead` | Theme mixin, applied to the predefined description message. | `{}`
`--error-message-color` | Color of the predefined description message | `#db4437`
`--error-message-text` | Mixin applied ot the predefined description message | `{}`
`--error-message-code-color` | Color of the message passed to the element. It's meant to be a less visible information and probably define an error code. | `#9e9e9e`

@group UI Elements
@element response-error-view
@demo demo/index.html
-->
<dom-module id="response-error-view" assetpath="bower_components/response-error-view/">
  <template>
    <style>
     :host {
      @apply(--layout-vertical);
      @apply(--layout-flex);
      -webkit-user-select: text;
      margin: 0 16px;
      @apply(--response-error-view);
    }

    .message-wrapper {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .error-icon {
      width: 128px;
      height: 128px;
      color: var(--error-message-icon-color, rgba(0, 0, 0, 0.56));
      @apply(--error-message-icon);
    }

    .error-desc {
      @apply(--arc-font-subhead);
      color: var(--error-message-color, #db4437);
      @apply(--error-message-text);
    }

    .error-code {
      color: var(--error-message-code-color, #9e9e9e);
    }

    .inherit {
      color: inherit !important;
      background-color: inherit !important;
      text-decoration: inherit !important;
    }

    p,
    h3 {
      cursor: text;
    }
    </style>
    <div class="message-wrapper">
      <div>
        <iron-icon class="error-icon" icon="[[icon]]"></iron-icon>
      </div>
      <div class="error-desc">
        <iron-pages selected="[[detailsPage]]">
          <section>
            <!-- 0 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service might be temporarily down or it may have moved permanently to a new web address.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 1 -->
            <h3>Install self signed certificate in Chrome</h3>
            <p>The app can't work if the self-signed certificate is not installed in Chrome.</p>
            <a class="inherit" href="http://restforchrome.blogspot.co.uk/2016/04/advanced-rest-client.html" target="_blank">
              <paper-button raised="">Tell me more</paper-button>
            </a>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 2 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service refused to connect.</p>
            <p>
              Please, check if:
            </p>
            <ul>
              <li>you and remote machine are connected to the internet,</li>
              <li>all required services (like www) are up and running on server</li>
              <li>port number is correct</li>
              <li>url is correct</li>
            </ul>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20102" target="_blank">chrome network error 102</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 3 -->
            <h3>Certificate is invalid for given domain</h3>
            <p>Certificate presented to the app has different CN (common name) than the domain of the request.</p>
            <p>Please, generate certificate again with valid domain name or use free certificate service like <a href="https://letsencrypt.org/" target="_blank">letsencrypt.org</a> to get a new certificate.</p>
            <a class="inherit" href="http://restforchrome.blogspot.co.uk/2016/04/advanced-rest-client.html" target="_blank">
              <paper-button raised="">Tell me more</paper-button>
            </a>
            <a class="inherit" href="https://bugs.chromium.org/p/chromium/issues/detail?id=603104" target="_blank">
              <paper-button raised="">See CR bug</paper-button>
            </a>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 4 -->
            <h3>Abort / timeout</h3>
            <p>The request has been aborted manually or because of the conection timeout. There were no response from the server but the connection wasn't closed.</p>
            <p>You can adjust timeout in settings.</p>
            <p>
              Try to:
            </p>
            <ul>
              <li>add "Connection: close" header which should be used by the server to close the connection after it finish generating response</li>
            </ul>
            <p>
              Please, check if:
            </p>
            <ul>
              <li>all required services (like www) are up and running on server</li>
              <li>method is correct</li>
              <li>port number is correct</li>
              <li>url is correct</li>
              <li>all required headers and/or payload has been added to the request</li>
            </ul>
            <h4>Example</h4>
            <p>
              Sometimes it may happen when you use <b>http</b> protocol instead of <b>https</b>. Also it may happen when you use different URL (port / protocol) and the server is not configured properly.
            </p>
          </section>
          <section>
            <!-- 5 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service is unreachable.</p>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20109" target="_blank">chrome network error 109</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 6 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p><b>The URL</b> didn’t accept your login certificate or your login certificate may have expired.</p>
            <p>Try contacting the system admin.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 7 -->
            <h3>The URL is blocked</h3>
            <p>The person who set up this computer has chosen to block this site.</p>
            <p>Try contacting the system admin.</p>
            <p><b>Check your administrator's policies</b></p>
            <p>Visit <b>chrome://policy</b> to see the list of blacklisted URLs and other policies enforced by your system administrator.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 8 -->
            <h3>The URL is blocked</h3>
            <p>Requests to the server have been blocked by an extension.</p>
            <p>Try</p>
            <ul>
              <li>Again...</li>
              <li>Disabling your extensions</li>
            </ul>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 9 -->
            <h3>There is no Internet connection</h3>
            <p>Chrome OS hasn’t completed its initial setup.</p>
            <ul>
              <li>Fix your connection using the <a href="data:text/html,chromewebdata#buttons" target="_blank">diagnostics app</a></li>
              <li>Sign out and complete setup</li>
            </ul>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 10 -->
            <h3>Certificate error</h3>
            <p>Certificate presented to the app is invalid.</p>
            <p>Please, generate certificate again or use free certificate service like <a href="https://letsencrypt.org/" target="_blank">letsencrypt.org</a> to get a new certificate.</p>
            <a class="inherit" href="http://restforchrome.blogspot.co.uk/2016/04/advanced-rest-client.html" target="_blank">
              <paper-button raised="">Tell me more</paper-button>
            </a>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 11 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service unexpectedly closed the connection.</p>
            <p>Try</p>
            <ul>
              <li>Again...</li>
              <li>Checking the connection</li>
              <li>Checking the proxy and the firewall</li>
            </ul>
            <p class="error-code">[[message]]</p>
            <p><b>Check your Internet connection</b></p>
            <p>Check any cables and reboot any routers, modems or other network devices you may be using.</p>
            <p><b>Allow Chrome to access the network in your firewall or antivirus settings.</b></p>
            <p>If it is already listed as a program allowed to access the network, try removing it from the list and adding it again.</p>
            <p><b>If you use a proxy server...</b></p>
            <p>Check your proxy settings or contact your network administrator to make sure that the proxy server is working. If you don't believe you should be using a proxy server: Go to the Chrome menu &gt; Settings &gt; + Show advanced settings &gt; Change proxy settings... and make sure your configuration is set to "no proxy" or "direct."</p>
          </section>
          <section>
            <!-- 12 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service is unreachable.</p>
            <p>Search Google for <a href="https://www.google.co.uk/search?q=chrome%20network%20error%20104" target="_blank">chrome network error 104</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 13 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service refused to connect.</p>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20102" target="_blank">chrome network error 102</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 14 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service took too long to respond.</p>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20118" target="_blank">chrome network error 118</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 15 -->
            <h3>The requested URL isn’t working</h3>
            <p>The service unexpectedly closed the connection.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 16 -->
            <h3>The requested URL was not found</h3>
            <p>It may have been moved or deleted.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 17 -->
            <h3>The requested URL can’t be reached</h3>
            <p>This site on the company, organisation or school intranet has the same URL as an external website.</p>
            <p>Try contacting your system administrator.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 18 -->
            <h3>There is no Internet connection</h3>
            <p>Your computer is offline.</p>
            <p>Try:</p>
            <ul>
              <li>Checking the network cable or router</li>
              <li>Resetting the modem or router</li>
              <li>Reconnecting to Wi-Fi</li>
            </ul>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 19 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service's server DNS address could not be found.</p>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20105" target="_blank">chrome network error 105</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 20 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service might be temporarily down or it may have moved permanently to a new web address.</p>
            <p>Search Google for <a href="https://www.google.com/search?q=chrome%20network%20error%20137" target="_blank">chrome network error 137</a></p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 21 -->
            <h3>Your Internet access is blocked</h3>
            <p>Firewall or antivirus software may have blocked the connection.</p>
            <p>Try:</p>
            <ul>
              <li>Checking the connection</li>
              <li>Checking firewall and antivirus configurations</li>
            </ul>
            <p class="error-code">[[message]]</p>
            <p><b>Check your Internet connection</b></p>
            <p>Check any cables and reboot any routers, modems or other network devices you may be using.</p>
            <p><b>Allow Chrome to access the network in your firewall or antivirus settings</b></p>
            <p>If it is already listed as a program allowed to access the network, try removing it from the list and adding it again.</p>
          </section>
          <section>
            <!-- 22 -->
            <h3>Your connection was interrupted</h3>
            <p>A network change was detected.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 23 -->
            <h3>Your connection was interrupted</h3>
            <p>Your computer went to sleep. Zzzzzzz.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 24 -->
            <h3>There is no Internet connection</h3>
            <p>There is something wrong with the proxy server or the address is incorrect.</p>
            <p>Try:</p>
            <ul>
              <li>Checking the proxy address</li>
              <li>Contacting the system admin</li>
            </ul>
            <p class="error-code">[[message]]</p>
            <p><b>If you use a proxy server...</b></p>
            <p>Check your proxy settings or contact your network administrator to make sure that the proxy server is working. If you don't believe you should be using a proxy server: Go to the Chrome menu &gt; Settings &gt; + Show advanced settings &gt; Change proxy settings... and make sure your configuration is set to "no proxy" or "direct."</p>
          </section>
          <section>
            <!-- 25 -->
            <h3>The requested URL isn’t working</h3>
            <p>The service sent an invalid response.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 26 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p><b>The URL</b> sent an invalid response.</p>
            <p><a href="https://support.google.com/chrome?p=ir_ssl_error" target="_blank">Learn more</a> about this problem.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 27 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p>The server presented a certificate that doesn't match built-in expectations. These expectations are included for certain, high-security websites in order to protect you.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 28 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p>The server doesn't adhere to security standards.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 29 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p>The server uses an unsupported protocol.</p>
            <p class="error-code">[[message]]</p>
            <p><b>Unsupported protocol</b></p>
            <p>The client and server don't support a common SSL protocol version or cipher suite. This is likely to be caused when the server needs RC4, which is no longer considered secure.</p>
          </section>
          <section>
            <!-- 30 -->
            <h3>The requested URL can’t provide a secure connection</h3>
            <p>The server doesn't adhere to security standards.</p>
            <p><a href="https://support.google.com/chrome?p=dh_error&amp;" target="_blank">Learn more</a> about this problem.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 31 -->
            <h3>Access to network-error was denied</h3>
            <p>The server hosting the web page might be overloaded or under maintenance. In order to avoid generating too much traffic and make the situation worse, requests to this URL have been temporarily disallowed.</p>
            <p class="error-code">[[message]]</p>
          </section>
          <section>
            <!-- 32 -->
            <h3>The requested URL can't be reached</h3>
            <p>The service took too long to respond.</p>
            <p>Try</p>
            <ul>
              <li>Again...</li>
              <li>Checking the connection</li>
              <li>Checking the proxy and the firewall</li>
            </ul>
            <p class="error-code">[[message]]</p>
            <p><b>Check your Internet connection</b></p>
            <p>Check any cables and reboot any routers, modems or other network devices you may be using.</p>
            <p><b>Allow the browser to access the network in your firewall or antivirus settings.</b></p>
            <p>If it is already listed as a program allowed to access the network, try removing it from the list and adding it again.</p>
            <p><b>If you use a proxy server...</b></p>
            <p>Check your proxy settings or contact your network administrator to make sure that the proxy server is working. If you don't believe you should be using a proxy server: Go to the Chrome menu &gt; Settings &gt; + Show advanced settings &gt; Change proxy settings... and make sure your configuration is set to "no proxy" or "direct."</p>
          </section>
          <section>
            <!-- 33 -->
            <h3>The requested URL isn’t working</h3>
            <p>The service redirected you too many times.</p>
            <p>Try</p>
            <ul>
              <li>Again...</li>
              <li>Clearing your cookies</li>
            </ul>
            <p class="error-code">[[message]]</p>
            <p><b>Clearing your cookies</b></p>
            <p>Go to app's settings and click on "Clear cookies".</p>
          </section>
        </iron-pages>
      </div>
    </div>
  </template>
  <script>
  Polymer({
    is: 'response-error-view',
    properties: {
      /**
       * Message to display.
       *
       * The message can be one of the Chrome's net::* error codes. In this
       * case the element will display predefined message.
       */
      message: {
        type: String,
        observer: '_messageChanged'
      },
      /**
       * An icon to display.
       */
      icon: {
        type: String,
        value: 'arc:sentiment-very-dissatisfied'
      },
      // Opened detailed message page.
      detailsPage: Number
    },

    ready: function() {
      if (this.detailsPage === undefined) {
        this.detailsPage = 0;
      }
    },

    // handler to the message change event.
    _messageChanged: function(msg) {
      if (msg) {
        msg = msg.trim();
      }
      switch (msg) {
        case 'net::ERR_CERT_AUTHORITY_INVALID':
          this.detailsPage = 1;
          break;
        case 'net::ERR_CONNECTION_REFUSED':
          this.detailsPage = 2;
          break;
        case 'net::ERR_CERT_COMMON_NAME_INVALID':
          this.detailsPage = 3;
          break;
        case 'Request aborted':
          this.detailsPage = 4;
          break;
        case 'net::ERR_ADDRESS_UNREACHABLE':
          this.detailsPage = 5;
          break;
        case 'net::ERR_BAD_SSL_CLIENT_AUTH_CERT':
          this.detailsPage = 6;
          break;
        case 'net::ERR_BLOCKED_BY_ADMINISTRATOR':
          this.detailsPage = 7;
          break;
        case 'net::ERR_BLOCKED_BY_CLIENT':
          this.detailsPage = 8;
          break;
        case 'net::ERR_BLOCKED_ENROLLMENT_CHECK_PENDING':
          this.detailsPage = 9;
          break;
        case 'net::ERR_CERT_CONTAINS_ERRORS':
        case 'net::ERR_CERT_DATE_INVALID':
        case 'net::ERR_CERT_END':
        case 'net::ERR_CERT_ERROR_IN_SSL_RENEGOTIATION':
        case 'net::ERR_CERT_INVALID':
        case 'net::ERR_CERT_NAME_CONSTRAINT_VIOLATION':
        case 'net::ERR_CERT_NON_UNIQUE_NAME':
        case 'net::ERR_CERT_NO_REVOCATION_MECHANISM':
        case 'net::ERR_CERT_REVOKED':
        case 'net::ERR_CERT_UNABLE_TO_CHECK_REVOCATION':
        case 'net::ERR_CERT_VALIDITY_TOO_LONG':
        case 'net::ERR_CERT_WEAK_KEY':
        case 'net::ERR_CERT_WEAK_SIGNATURE_ALGORITHM':
          this.detailsPage = 10;
          break;
        case 'net::ERR_CONNECTION_CLOSED':
        case 'net::ERR_CONNECTION_RESET':
          this.detailsPage = 11;
          break;
        case 'net::ERR_CONNECTION_FAILED':
          this.detailsPage = 12;
          break;
        case 'net::ERR_CONNECTION_REFUSED':
          this.detailsPage = 13;
          break;
        case 'net::ERR_CONNECTION_TIMED_OUT':
          this.detailsPage = 14;
          break;
        case 'net::ERR_CONTENT_LENGTH_MISMATCH':
        case 'net::ERR_INCOMPLETE_CHUNKED_ENCODING':
          this.detailsPage = 15;
          break;
        case 'net::ERR_FILE_NOT_FOUND':
          this.detailsPage = 16;
          break;
        case 'net::ERR_ICANN_NAME_COLLISION':
          this.detailsPage = 17;
          break;
        case 'net::ERR_INTERNET_DISCONNECTED':
          this.detailsPage = 18;
          break;
        case 'net::ERR_NAME_NOT_RESOLVED':
          this.detailsPage = 19;
          break;
        case 'net::ERR_NAME_RESOLUTION_FAILED':
          this.detailsPage = 20;
          break;
        case 'net::ERR_NETWORK_ACCESS_DENIED':
          this.detailsPage = 21;
          break;
        case 'net::ERR_NETWORK_CHANGED':
          this.detailsPage = 22;
          break;
        case 'net::ERR_NETWORK_IO_SUSPENDED':
          this.detailsPage = 23;
          break;
        case 'net::ERR_PROXY_CONNECTION_FAILED':
          this.detailsPage = 24;
          break;
        case 'net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION':
        case 'net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH':
        case 'net::ERR_RESPONSE_HEADERS_MULTIPLE_LOCATION':
          this.detailsPage = 25;
          break;
        case 'net::ERR_SSL_FALLBACK_BEYOND_MINIMUM_VERSION':
        case 'net::ERR_SSL_PROTOCOL_ERROR':
          this.detailsPage = 26;
          break;
        case 'net::ERR_SSL_PINNED_KEY_NOT_IN_CERT_CHAIN':
          this.detailsPage = 27;
          break;
        case 'net::ERR_SSL_SERVER_CERT_BAD_FORMAT':
          this.detailsPage = 28;
          break;
        case 'net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH':
          this.detailsPage = 29;
          break;
        case 'net::ERR_SSL_WEAK_SERVER_EPHEMERAL_DH_KEY':
          this.detailsPage = 30;
          break;
        case 'net::ERR_TEMPORARY_BACKOFF':
          this.detailsPage = 31;
          break;
        case 'net::ERR_TIMED_OUT':
          this.detailsPage = 32;
          break;
        case 'net::ERR_TOO_MANY_REDIRECTS':
          this.detailsPage = 33;
          break;
        default:
          this.detailsPage = 0;
          break;
      }
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function() {
  'use strict';
  /**
  @license
  Copyright 2016 Pawel Psztyc, The ARC team

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
  */
  window.ArcBehaviors = window.ArcBehaviors || {};
  /**
   * A behavior that is responsible for text search in a selected node.
   * All marked occurance of a search word / text will be wrapped with a
   * `<mark class="arc-search-mark">` element.
   *
   * By default the _textSearch property is pointing to the body. Elements that
   * implement this behavior can point to another node. This node will be search
   * for occurence of the given word.
   *
   * ## Usage
   * Call the `mark(input)` function where the input is the word(s) to search for.
   * Call the `cleanMarked()` to cancel the results.
   * Call the `highlightMarked(position)` to mark result on a position
   * `position`.
   * The position must be >= 0 and < `markedCount`.
   *
   * To style the search results use `.arc-search-mark` css class added to
   * the `<mark>` element. The `.selected` class means currently highlighted
   * word.
   *
   * See demo for more information.
   *
   * Inspired by http://www.the-art-of-web.com/javascript/search-highlight/
   *
   * @polymerBehavior ArcBehaviors.TextSearchBehavior
   */
  window.ArcBehaviors.TextSearchBehavior = {
    properties: {
      /**
       * Number of occurance for text search.
       * Parent node (controller) can use it to instruct search bar about
       * number of occurance found in text.
       */
      markedCount: {
        type: Number,
        value: 0,
        readOnly: true,
        notify: true
      },

      /**
       * An element which should be searched for text.
       * Element that implements this behaviour should use it to point to
       * a node that contain a text / nodes to search.
       */
      _textSearch: {
        type: HTMLElement,
        value: function() {
          return document.body;
        }
      },
      // compiled RegExp.
      matchRegex: {
        type: String,
        value: '',
        readOnly: true
      },
      // True when should match whole word from left
      openLeft: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      // True when should match whole word from right
      openRight: {
        type: Boolean,
        value: false,
        readOnly: true
      },
      /**
       * The type of text matching:
       * `open` match every occurance of search word.
       * `left` matches whole word from the left.
       * `right` matches whole word from the right.
       * `both` matches whole word occurance.
       */
      matchType: {
        type: String,
        value: 'open'
      },
      /**
       * If set it will search for exact word (including whitespaces).
       * The search results will contain only those phrases that exactly match
       * the query. Otherwise it will use alternatives when space is used.
       *
       * For example in phrase:
       * `Lorem ipsum dolor sit amet`
       *
       * Query: `lorem i`
       *
       * Will highlight 3 different matches when this is false:
       *     `<mark>Lorem ipsum</mark> dolor s<mark>i</mark>t amet`
       *
       * And will highlight only one if it's true:
       *     `<mark>Lorem ipsum</mark> dolor sit amet`
       */
      wholeMatch: {
        type: Boolean
      }
    },

    observers: [
      '_setMatchType(matchType)'
    ],

    _setMatchType: function(matchType) {
      switch (matchType) {
        case 'left':
          this._setOpenLeft(false);
          this._setOpenRight(true);
          break;
        case 'right':
          this._setOpenLeft(true);
          this._setOpenRight(false);
          break;
        case 'open':
          this._setOpenLeft(true);
          this._setOpenRight(true);
          break;
        default:
          this._setOpenLeft(false);
          this._setOpenRight(false);
      }
    },
    // Adds language support to match accent letters.
    _addAccents: function(input) {
      var retval = input;
      retval = retval.replace(/([ao])e/ig, '$1');
      retval = retval.replace(/\\u00E[024]/ig, 'a');
      retval = retval.replace(/\\u00E7/ig, 'c');
      retval = retval.replace(/\\u00E[89AB]/ig, 'e');
      retval = retval.replace(/\\u00E[EF]/ig, 'i');
      retval = retval.replace(/\\u00F[46]/ig, 'o');
      retval = retval.replace(/\\u00F[9BC]/ig, 'u');
      retval = retval.replace(/\\u00FF/ig, 'y');
      retval = retval.replace(/\\u00DF/ig, 's');
      retval = retval.replace(/a/ig, '([aàâäąá]|ae)');
      retval = retval.replace(/c/ig, '[cçćč]');
      retval = retval.replace(/e/ig, '[eèéêëęě]');
      retval = retval.replace(/i/ig, '[iîïí]');
      retval = retval.replace(/o/ig, '([oôöó]|oe)');
      retval = retval.replace(/u/ig, '[uùûüúů]');
      retval = retval.replace(/y/ig, '[yÿý]');
      retval = retval.replace(/s/ig, '(śšss|[sß])');
      retval = retval.replace(/l/ig, '[lł]');
      retval = retval.replace(/z/ig, '[zżźž]');
      retval = retval.replace(/n/ig, '[nńň]');
      return retval;
    },
    /**
     * Compiles the regexp for given input.
     *
     * @param {String} input A search string.
     */
    _compile: function(input) {
      input = input.replace(/\\([^u]|$)/g, '$1');
      input = input.replace(/([\.\+\?\{\}\[\]\|=:\$\^])+/g, '\\$1');
      // input = input.replace(/[^\w\\\s']+/g, '').replace(/\s+/g, '|');
      if (!this.wholeMatch) {
        input = input.replace(/\s+/g, '|');
      }
      input = input.replace(/^\||\|$/g, '');
      input = this._addAccents(input);
      if (input) {
        var re = '(' + input + ')';
        if (!this.openLeft) {
          re = '(?:^|[\\b\\s])' + re;
        }
        if (!this.openRight) {
          re = re + '(?:[\\b\\s]|$)';
        }
        this._setMatchRegex(new RegExp(re, 'i'));
        return true;
      }
      return false;
    },
    /**
     * Searches words inside `this._textSearch` element.
     *
     * @return {Number} A number of marked occurances.
     */
    _searchWords: function() {
      if (!this.matchRegex) {
        return;
      }
      var walker = document.createTreeWalker(
        this._textSearch,
        NodeFilter.SHOW_TEXT,
        null,
        false
      );
      var count = 0;
      while (walker.nextNode()) {
        var node = walker.currentNode;
        if (node.parentNode.nodeName === 'MARK') {
          continue;
        }
        var nv = node.nodeValue;
        var regs = this.matchRegex.exec(nv);
        if (nv && regs) {
          var match = document.createElement('MARK');
          match.classList.add('arc-search-mark');
          match.appendChild(document.createTextNode(regs[1]));
          var after;
          if (regs[0].match(/^\s/)) { // in case of leading whitespace
            after = node.splitText(regs.index + 1);
          } else {
            after = node.splitText(regs.index);
          }
          after.nodeValue = after.nodeValue.substring(regs[1].length);
          node.parentNode.insertBefore(match, after);
          count++;
        }
      }
      return count;
    },
    // added by Yanosh Kunsh to include utf-8 string comparison
    _dec2hex4: function(textString) {
      var hexequiv = new Array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B',
        'C', 'D', 'E', 'F');
      return hexequiv[(textString >> 12) & 0xF] +
        hexequiv[(textString >> 8) & 0xF] +
        hexequiv[(textString >> 4) & 0xF] +
        hexequiv[textString & 0xF];
    },
    // Converts a string of characters to JavaScript escapes
    // str: sequence of Unicode characters
    _convertCharStr2jEsc: function(str, cstyle) {
      var highsurrogate = 0;
      var suppCP;
      var pad;
      // var n = 0;
      var outputString = '';
      for (var i = 0; i < str.length; i++) {
        var cc = str.charCodeAt(i);
        if (cc < 0 || cc > 0xFFFF) {
          outputString += '!Error in convertCharStr2UTF16: unexpected charCodeAt result, cc=' +
            cc + '!';
        }
        if (highsurrogate !== 0) { // this is a supp char, and cc contains the low surrogate
          if (0xDC00 <= cc && cc <= 0xDFFF) {
            suppCP = 0x10000 + ((highsurrogate - 0xD800) << 10) + (cc - 0xDC00);
            if (cstyle) {
              pad = suppCP.toString(16);
              while (pad.length < 8) {
                pad = '0' + pad;
              }
              outputString += '\\U' + pad;
            } else {
              suppCP -= 0x10000;
              outputString += '\\u' + this._dec2hex4(0xD800 | (suppCP >> 10)) + '\\u' +
                this._dec2hex4(0xDC00 | (suppCP & 0x3FF));
            }
            highsurrogate = 0;
            continue;
          } else {
            outputString += 'Error in convertCharStr2UTF16: low surrogate expected, cc=' + cc + '!';
            highsurrogate = 0;
          }
        }
        if (0xD800 <= cc && cc <= 0xDBFF) { // start of supplementary character
          highsurrogate = cc;
        } else { // this is a BMP character
          switch (cc) {
            case 0:
              outputString += '\\0';
              break;
            case 8:
              outputString += '\\b';
              break;
            case 9:
              outputString += '\\t';
              break;
            case 10:
              outputString += '\\n';
              break;
            case 13:
              outputString += '\\r';
              break;
            case 11:
              outputString += '\\v';
              break;
            case 12:
              outputString += '\\f';
              break;
            case 34:
              outputString += '\\\"';
              break;
            case 39:
              outputString += '\\\'';
              break;
            case 92:
              outputString += '\\\\';
              break;
            default:
              if (cc > 0x1f && cc < 0x7F) {
                outputString += String.fromCharCode(cc);
              } else {
                pad = cc.toString(16).toUpperCase();
                while (pad.length < 4) {
                  pad = '0' + pad;
                }
                outputString += '\\u' + pad;
              }
          }
        }
      }
      return outputString;
    },
    /**
     * Mark all occurance of given `word`.
     *
     * @param {String} input A word to search.
     */
    mark: function(input) {
      this.cleanMarked();
      var count = 0;
      if (!input || !(input = input.replace(/(^\s+|\s+$)/g, ''))) {
        return;
      } else {
        input = this._convertCharStr2jEsc(input);
        if (this._compile(input)) {
          count = this._searchWords(this._textSearch);
        }
      }
      this._setMarkedCount(count);
    },
    /**
     * Clean markers and restore original view.
     */
    cleanMarked: function() {
      var arr = this._textSearch.getElementsByTagName('MARK');
      var el;
      while (arr.length && (el = arr[0])) {
        var parent = el.parentNode;
        if (!el.firstChild) {
          continue;
        }
        parent.replaceChild(el.firstChild, el);
        parent.normalize();
      }
    },
    /**
     * Highlights marked word and scolls the view to the position of the word
     * if not visible on screen.
     *
     * @param {Number} posiotion A position of the word in the found array.
     */
    highlightMarked: function(position) {
      this.clearHighlight();
      var marked = this._textSearch.querySelectorAll('mark.arc-search-mark');
      if (marked.length === 0 || marked.length < position) {
        return;
      }
      marked[position].classList.add('selected');
      if (marked[position].scrollIntoViewIfNeeded) {
        marked[position].scrollIntoViewIfNeeded();
      } else if (marked[position].scrollIntoView) {
        marked[position].scrollIntoView(true);
      } else {
        // change your browser...
      }
    },
    /**
     * Clears highlight for marked word.
     */
    clearHighlight: function() {
      var marked = this._textSearch.querySelector('mark.arc-search-mark.selected');
      if (!marked) {
        return;
      }
      marked.classList.remove('selected');
    }
  };

})();
</script>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>

Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script>
(function(global) {
  'use strict';

  global.ArcBehaviors = global.ArcBehaviors || {};
  /**
   * A behavior to be implemented to elements that need to parse
   * request / response body.
   * It contains functions to encode / decode form data and to escape HTML.
   *
   * @polymerBehavior ArcBehaviors.PayloadParserBehavior
   */
  global.ArcBehaviors.PayloadParserBehavior = {
    properties: {
      // Regexp to search for the `&` character
      AMP_RE: {
        type: RegExp,
        readOnly: true,
        value: function() {
          return new RegExp(/&/g);
        }
      },
      // Regexp to search for the `>` character
      GT_RE: {
        type: RegExp,
        readOnly: true,
        value: function() {
          return new RegExp(/>/g);
        }
      },
      // Regexp to search for the `<` character
      LT_RE: {
        type: RegExp,
        readOnly: true,
        value: function() {
          return new RegExp(/</g);
        }
      },
      // Regexp to search for the `'` character
      SQUOT_RE: {
        type: RegExp,
        readOnly: true,
        value: function() {
          return new RegExp(/'/g);
        }
      },
      // Regexp to search for the `"` character
      QUOT_RE: {
        type: RegExp,
        readOnly: true,
        value: function() {
          return new RegExp(/"/g);
        }
      }
    },
    /**
     * Escape HTML to save HTML text.
     *
     * @param {String} s A HTML string to be escaped.
     */
    htmlEscape: function(s) {
      if (s.indexOf('&') !== -1) {
        s = s.replace(this.AMP_RE, '&amp;');
      }
      if (s.indexOf('<') !== -1) {
        s = s.replace(this.LT_RE, '&lt;');
      }
      if (s.indexOf('>') !== -1) {
        s = s.replace(this.GT_RE, '&gt;');
      }
      if (s.indexOf('"') !== -1) {
        s = s.replace(this.QUOT_RE, '&quot;');
      }
      if (s.indexOf('\'') !== -1) {
        s = s.replace(this.SQUOT_RE, '&#39;');
      }
      return s;
    },

    /**
     * Parse input array to string x-www-form-urlencoded.
     *
     * Note that this function doesn't encodes the name and value. Use
     * `this.formArrayToString(this.encodeUrlEncoded(arr))`
     * to create a encoded string from the array.
     *
     * @param {Array<Object>} arr Input array. Each element must contain an
     * object with `name` and `value` keys.
     * @return {String} A parsed string of `name`=`value` pairs of the input objects.
     */
    formArrayToString: function(arr) {
      var result = '';
      if (!arr) {
        return result;
      }
      arr.forEach(function(item) {
        var name = this._paramValue(item.name);
        var value = this._paramValue(item.value);
        if (!name && !value) {
          return;
        }
        if (result) {
          result += '&';
        }
        result += name + '=' + value;
      }, this);
      return result;
    },

    /**
     * Parse input string to array of x-www-form-urlencoded form parameters.
     *
     * This function will not url-decode names and values. Please, use
     * `this.decodeUrlEncoded(this.stringToArray(str))` to create an array
     * of decoded parameters.
     *
     * @param {String} input A string of HTTP x-www-form-urlencoded parameters
     * @return {Array<Object>} An array of params with `name` and `value` keys.
     */
    stringToArray: function(input) {
      var result = [];
      if (!input || !input.trim()) {
        return result;
      }
      //Chrome inspector has FormData output in format: `param-name`:`param-value`
      //When copying from inspector the ':' must be replaced with '='
      var htmlInputCheck = /^([^\\=]{1,})=(.*)$/m;
      if (!htmlInputCheck.test(input)) {
        //replace chome inspector data.
        input = input.replace(/^([^\\:]{1,}):(.*)$/gm, '$1=$2&').replace(/\n/gm, '');
        input = input.substr(0, input.length - 1);
      }

      result = this._createParamsArray(input);
      return result;
    },
    /**
     * Converts a string to an array with objects containing name and value keys
     * @param {String} input An input string
     * @return {Array.<Object>} An array of params with `name` and `value` keys.
     */
    _createParamsArray: function(input) {
      var result = [];
      if (!input) {
        return result;
      }
      var state = 0; // 0 - reading name, 1 - reading value
      var i = 0;
      var _tmpName = '';
      var _tmpValue = '';
      while (true) {
        var ch = input[i++];
        if (ch === undefined) {
          if (_tmpValue || _tmpName) {
            result[result.length] = {
              name: _tmpName,
              value: _tmpValue
            };
          }
          break;
        }
        if (ch === '=') {
          if (state !== 1) {
            state = 1;
            continue;
          }
        }
        if (ch === '&') {
          state = 0;
          result[result.length] = {
            name: _tmpName,
            value: _tmpValue
          };
          _tmpName = '';
          _tmpValue = '';
          continue;
        }
        if (state === 0) {
          _tmpName += ch;
        } else if (state === 1) {
          _tmpValue += ch;
        }
      }
      return result;
    },

    /**
     * Encode payload to x-www-form-urlencoded string.
     *
     * @param {Array<object>|String} input An input data.
     */
    encodeUrlEncoded: function(input) {
      if (!input || !input.length) {
        return input;
      }
      var isArray = true;
      if (!(input instanceof Array)) {
        isArray = false;
        input = this.stringToArray(input);
      }
      input.forEach(function(obj) {
        obj.name = this.encodeQueryString(obj.name);
        obj.value = this.encodeQueryString(obj.value);
      }, this);
      if (isArray) {
        return input;
      }
      return this.formArrayToString(input);
    },

    /**
     * Decode x-www-form-urlencoded data.
     *
     * @param {Array<object>|String} input An input data.
     */
    decodeUrlEncoded: function(input) {
      if (!input || !input.length) {
        return input;
      }
      var isArray = true;
      if (!(input instanceof Array)) {
        isArray = false;
        input = this.stringToArray(input);
      }
      input.forEach(function(obj) {
        obj.name = this.decodeQueryString(obj.name);
        obj.value = this.decodeQueryString(obj.value);
      }, this);
      if (isArray) {
        return input;
      }
      return this.formArrayToString(input);
    },

    /**
     * Parse input string as a payload param key or value.
     *
     * @param {String} input An input to parse.
     */
    _paramValue: function(input) {
      if (!input) {
        return String();
      }
      input = String(input);
      input = input.trim();
      return input;
    },
    /**
     * Parse a line of key=value http params into an object with `name` and `value` keys.
     *
     * @param {String} input A input line of x-www-form-urlencoded text tike `param=value`
     * @return {Object} A parsed object with `name` and `value` keys.
     * @deprecated It's old parser. Use `_createParamsArray` instead.
     */
    _paramLineToFormObject: function(input) {
      if (!input) {
        return;
      }
      var _tmp = input.split('=');
      var name = _tmp[0].trim();
      if (!name && _tmp.length === 1) {
        return;
      }
      var value;
      if (_tmp.length === 1) {
        value = '';
      } else {
        value = _tmp[1].trim();
      }
      return {
        name: name,
        value: value
      };
    },
    /**
     * Returns a string where all characters that are not valid for a URL
     * component have been escaped. The escaping of a character is done by
     * converting it into its UTF-8 encoding and then encoding each of the
     * resulting bytes as a %xx hexadecimal escape sequence.
     *
     * Note: this method will convert any space character into its escape
     * short form, '+' rather than %20. It should therefore only be used for
     * query-string parts.
     *
     * The following character sets are **not** escaped by this method:
     * - ASCII digits or letters
     * - ASCII punctuation characters: ```- _ . ! ~ * ' ( )</pre>```
     *
     * Notice that this method <em>does</em> encode the URL component delimiter
     * characters:<blockquote>
     *
     * ```
     * ; / ? : & = + $ , #
     * ```
     *
     * @param {String} str A string containing invalid URL characters
     * @return {String} a string with all invalid URL characters escaped
     */
    encodeQueryString: function(str) {
      if (!str) {
        return str;
      }
      var regexp = /%20/g;
      return encodeURIComponent(str).replace(regexp, '+');
    },
    /**
     * Returns a string where all URL component escape sequences have been
     * converted back to their original character representations.
     *
     * Note: this method will convert the space character escape short form, '+',
     * into a space. It should therefore only be used for query-string parts.
     *
     * @param {String} str string containing encoded URL component sequences
     * @return {String} string with no encoded URL component encoded sequences
     */
    decodeQueryString: function(str) {
      if (!str) {
        return str;
      }
      var regexp = /\+/g;
      return decodeURIComponent(str.replace(regexp, '%20'));
    }
  };
})(window);
</script>
<!--
An element to display the raw response data without syntax highlighting.


### Example
```
<response-raw-viewer response-text="Some response"></response-raw-viewer>
```
```
var display = document.querySelector('response-raw-viewer');
display.responseText = someResponse;
```

## Content actions
By default the user can copy content of the code to clipboard and wrap the code.
This actions are always visible.
You can add more actions in the actions bar by putting elements as a children
of this element.


### Example
```
<response-raw-viewer>
  <paper-icon-button content-action title="Copy content to clipboard" icon="arc:content-copy"></paper-icon-button>
</response-raw-viewer>
```
See demo for more information.

## Custom search
If the platform doesn't support native text search, this element implements
`ArcBehaviors.TextSearchBehavior` and exposes the `query` attribute.
Set any text to the `query` attribute and it will automatically highlight
occurance of the text.

## Content actions
The element can render actions pane above the code view. Action pane is to
display content actions that is relevan in context of the response displayed
below the icon buttons. It should be icon buttons or just buttons added to this
view.

Buttons need to have `content-action` property set to be included to this view.

```
<response-raw-viewer>
  <paper-icon-button content-action title="Copy content to clipboard" icon="arc:content-copy"></paper-icon-button>
</json-viewer>
```

## Content text wrapping
Set `wrap-text` property on the element to force the wiewer to wrap text.

### Styling
`<response-raw-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-raw-viewer` | Mixin applied to the element | `{}`
`--arc-font-code1` | Mixin applied to the code block (theme mixin) | `{}`
`--response-raw-viewer-button-active` | Background color of the `wrap` button | `#BDBDBD`
`--response-raw-viewer-action-bar` | Mixin applied to the action bar above the highlighted code | `{}`
`--no-info-message` | Mixin applied to the "nothing to display" message (theme variable) | `{}`

@group UI Elements
@element response-raw-viewer
@demo demo/index.html
-->
<dom-module id="response-raw-viewer" assetpath="bower_components/response-raw-viewer/">
  <template>
    <style>
    :host {
      display: block;
      overflow: overlay;
      width: 100%;
      @apply(--response-raw-viewer);
    }

    .raw-content {
      font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 500;
      line-height: 20px;
      -webkit-user-select: text;
      white-space: pre;
      width: 100%;
      @apply(--arc-font-code1);
    }

    :host([wrap-text]) .raw-content {
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .actions-panel {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-raw-viewer-action-bar);
    }

    .actions-panel.hidden {
      display: none;
    }

    .no-info {
      @apply(--no-info-message);
    }
    </style>
    <div class$="[[_computeActionsPanelClass(hasResponse)]]">
      <content select="[content-action]"></content>
    </div>
    <code id="rawContent" class="raw-content" hidden$="[[!hasResponse]]"></code>
    <p class="no-info" hidden$="[[hasResponse]]">Nothing to dispplay.</p>
  </template>
  <script>
  Polymer({
    is: 'response-raw-viewer',
    behaviors: [
      ArcBehaviors.TextSearchBehavior,
      ArcBehaviors.PayloadParserBehavior
    ],
    properties: {
      /**
       * The response text to display.
       */
      responseText: {
        type: String,
        observer: '_responseChanged'
      },
      // Computed value, true if the responseText has text.
      hasResponse: {
        type: Boolean,
        value: false,
        computed: '_computeHasResponse(responseText)'
      },
      // An element that should be searched for the query.
      _textSearch: {
        type: HTMLElement,
        value: function() {
          return this.$.rawContent;
        }
      },
      /**
       * If set it will highlight each occurance of the query in the
       * XML viewer.
       */
      query: {
        type: String,
        observer: '_queryChanged'
      }
    },

    _responseChanged: function(response) {
      if (!response) {
        this.$.rawContent.innerHTML = '';
      } else {
        this.$.rawContent.innerHTML = this.htmlEscape(response);
      }
    },

    // Highlights the query in text.
    _queryChanged: function(query) {
      if (!query) {
        this.cleanMarked();
        return;
      }
      this.mark(query);
    },
    // Computes if the response is available and content is displayed.
    _computeHasResponse: function(responseText) {
      return !!responseText;
    },
    /**
     * Computes CSS class for the actions pane.
     *
     * @param {Boolean} hasResponse The `hasResponse` propety value of the
     * element.
     * @return CSS class names for the panel depending on state of the
     * `hasResponse`property.
     */
    _computeActionsPanelClass: function(hasResponse) {
      var clazz = 'actions-panel';
      if (!hasResponse) {
        clazz += ' hidden';
      }
      return clazz;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!-- Icons are set in the web worker. Must be included here. -->
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
`<error-message>` A standarized error information

### Example
```
<error-message icon="warning">
  <p>This is a warning!</p>
</error-message>
```

### Styling
`<error-message>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--error-message` | Mixin applied to the element | `{}`
`--error-message-icon-color` | Fill color of the icon. Only if an icon is a SVG icon. | `rgba(0, 0, 0, 0.56)`
`--error-message-icon` | Mixin applied to the icon | `{}`
`--error-message-text` | Mixin applied to the text message. | `{}`
`--error-message-color` | Color of the message text. | `--google-red-500`

@group UI Elements
@element error-message
@demo demo/index.html
-->
<dom-module id="error-message" assetpath="bower_components/error-message/">
  <template>
    <style>
    :host {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--error-message);
    }

    .error-icon {
      width: 128px;
      height: 128px;
      color: var(--error-message-icon-color, rgba(0, 0, 0, 0.56));
      @apply(--error-message-icon);
    }

    .error-desc ::content > * {
      @apply(--arc-font-subhead);
      color: var(--error-message-color, --google-red-500);
      @apply(--error-message-text);
    }
    </style>
    <div>
      <iron-icon class="error-icon" icon="[[icon]]"></iron-icon>
    </div>
    <div class="error-desc">
      <content></content>
    </div>
  </template>
  <script>
  Polymer({
    is: 'error-message',
    properties: {
      icon: {
        type: String,
        value: 'arc:sentiment-very-dissatisfied'
      }
    }
  });
  </script>
</dom-module>
<!--
`<xml-viewer>` An XML payload viewer for the XML response

### Example
```
<xml-viewer xml="&lt;tag&gt;&lt;/tag&gt;"></xml-viewer>
```

 **Note** This element uses web workers with dependencies. It expect to find
workers files in current directory in the `workers` folder.
Your build process has to ensure that this files will be avaiable.

## Content actions
By default the user can copy content of the code to clipboard. This action is
always visible.
You can add more actions in the actions bar by putting elements as a children
of this element.
### Example
```
<xml-viewer>
  <paper-icon-button title="Additional action" icon="arc:cached"></paper-icon-button>
  <paper-icon-button title="Clear the code" icon="arc:clear"></paper-icon-button>
</xml-viewer>
```

### Styling
`<xml-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--xml-viewer` | Mixin applied to the element | `{}`
`--xml-viewer-comment-color` | Color of the comment section. | `#236E25`
`--xml-viewer-punctuation-color` | Color of the punctuation signs | `black`
`--xml-viewer-tag-name-color` | Color of the XML tag name | `#881280`
`--xml-viewer-attribute-name-color` | Color of the XML attribute. | `#994500`
`--xml-viewer-attribute-value-color` | Color of the attribute's value. | `#1A1AA6`
`--xml-viewer-cdata-color` | CDATA section color. | `#48A`
`--xml-viewer-document-declaration-color` | XML document declaration (header) color. | `#999`
`--xml-viewer-constant-color` | Constant (boolean, null, number) color. | `#283593`

@group UI Elements
@element xml-viewer
@demo demo/index.html
-->
<dom-module id="xml-viewer" assetpath="bower_components/xml-viewer/">
  <template>
    <style>
     :host {
      display: block;
      color: black;
      cursor: text;
      -webkit-user-select: text;
      user-select: text;
      overflow: auto;
      word-wrap: break-word;
      @apply(--xml-viewer);
    }

    .material-icons {
      font-family: 'Material Icons';
      font-weight: normal;
      font-style: normal;
      font-size: 24px;
      /* Preferred icon size */
      display: inline-block;
      line-height: 1;
      text-transform: none;
      letter-spacing: normal;
      word-wrap: normal;
      white-space: nowrap;
      direction: ltr;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      -moz-osx-font-smoothing: grayscale;
    }

    .prettyPrint {
      font-family: monospace;
      font-size: 15px;
    }

    .arrowEmpty {}

    .node {
      margin: 1px 0px;
    }

    .opened {}

    .comment {
      color: var(--xml-viewer-comment-color, #236E25);
    }

    .punctuation {
      color: var(--xml-viewer-punctuation-color, black);
    }

    .tagname {
      color: var(--xml-viewer-tag-name-color, #881280);
    }

    .attname {
      color: var(--xml-viewer-attribute-name-color, #994500);
    }

    .attribute {
      color: var(--xml-viewer-attribute-value-color, #1A1AA6);
    }

    .cdata {
      color: var(--xml-viewer-cdata-color, #48A);
    }

    .cdata *[collapsible] {
      white-space: pre;
    }

    .arrowExpanded,
    .arrowEmpty {
      display: inline-block;
      width: 24px;
      height: 18px;
    }

    .processing {
      color: var(--xml-viewer-document-declaration-color, #999);
    }

    .inline,
    .inline > div {
      display: inline-block;
      text-indent: 0px;
    }

    .node.opened >. arrowEmpty {
      text-indent: 0;
      font-size: 10px;
      letter-spacing: 0.1em;
      width: 21px;
      margin-left: 3px;
      margin-right: 3px;
    }

    .nodeMargin {
      margin-left: 44px;
    }

    .collapseIndicator {
      display: none;
      margin: 0px 1px;
      text-indent: 0px;
    }

    *[colapse-marker] {
      -webkit-user-select: none;
      cursor: pointer;
    }

    *[less] {
      display: inline-block;
    }

    *[more] {
      display: none;
    }

    *[data-expanded="false"] .arrowEmpty {
      display: none;
    }

    *[data-expanded="false"] *[less] {
      display: none;
    }

    *[data-expanded="false"] *[more] {
      display: inline-block;
    }

    *[data-expanded="false"] *[collapsible] {
      display: none !important;
    }

    *[data-expanded="false"] *[collapse-indicator] {
      display: inline-block !important;
    }

    .value.number,
    .value.null,
    .value.boolean {
      color: var(--xml-viewer-constant-color, #283593);
    }

    .arc-search-mark.selected {
      background-color: #ff9632;
    }

    .actions-panel {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-highlighter-action-bar);
    }

    .actions-panel.hidden {
      display: none;
    }
    </style>
    <script id="worker" type="javascript/worker">
// Minified version of the web workers using: http://closure-compiler.appspot.com/home
var whitespace="\n\r\t ";XMLP=function(a){a=SAXStrings.replace(a,null,null,"\r\n","\n");this.m_xml=a=SAXStrings.replace(a,null,null,"\r","\n");this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=new Stack;this._clearAttributes()};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;
XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";
XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';
XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infininte loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._addAttribute=function(a,b){this.m_atts[this.m_atts.length]=[a,b]};
XMLP.prototype._checkStructure=function(a){if(XMLP._STATE_PROLOG==this.m_iState){if((XMLP._TEXT==a||XMLP._ENTITY==a)&&-1!=SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd()))return this._setErr(XMLP.ERR_DOC_STRUCTURE);if(XMLP._ELM_B==a||XMLP._ELM_EMP==a)this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT==this.m_iState){XMLP._ELM_B!=a&&XMLP._ELM_EMP!=a||this.m_stack.push(this.getName());if(XMLP._ELM_E==a||XMLP._ELM_EMP==a){var b=this.m_stack.pop();
if(null==b||b!=this.getName())return this._setErr(XMLP.ERR_ELM_NESTING)}if(0==this.m_stack.count())return this.m_iState=XMLP._STATE_MISC,a}return XMLP._STATE_MISC!=this.m_iState||XMLP._ELM_B!=a&&XMLP._ELM_E!=a&&XMLP._ELM_EMP!=a&&XMLP.EVT_DTD!=a&&(XMLP._TEXT!=a&&XMLP._ENTITY!=a||-1==SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd()))?a:this._setErr(XMLP.ERR_DOC_STRUCTURE)};XMLP.prototype._clearAttributes=function(){this.m_atts=[]};
XMLP.prototype._findAttributeIndex=function(a){for(var b=0;b<this.m_atts.length;b++)if(this.m_atts[b][XMLP._ATT_NAME]==a)return b;return-1};XMLP.prototype.getAttributeCount=function(){return this.m_atts?this.m_atts.length:0};XMLP.prototype.getAttributeName=function(a){return 0>a||a>=this.m_atts.length?null:this.m_atts[a][XMLP._ATT_NAME]};XMLP.prototype.getAttributeValue=function(a){return 0>a||a>=this.m_atts.length?null:__unescapeString(this.m_atts[a][XMLP._ATT_VAL])};
XMLP.prototype.getAttributeValueByName=function(a){return this.getAttributeValue(this._findAttributeIndex(a))};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return this.m_cSrc==XMLP._CONT_XML?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};
XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};
XMLP.prototype._parse=function(){return this.m_iP==this.m_xml.length?XMLP._NONE:this.m_iP==this.m_xml.indexOf("<?",this.m_iP)?this._parsePI(this.m_iP+2):this.m_iP==this.m_xml.indexOf("<!DOCTYPE",this.m_iP)?this._parseDTD(this.m_iP+9):this.m_iP==this.m_xml.indexOf("\x3c!--",this.m_iP)?this._parseComment(this.m_iP+4):this.m_iP==this.m_xml.indexOf("<![CDATA[",this.m_iP)?this._parseCDATA(this.m_iP+9):this.m_iP==this.m_xml.indexOf("<",this.m_iP)?this._parseElement(this.m_iP+1):this.m_iP==this.m_xml.indexOf("&",
this.m_iP)?this._parseEntity(this.m_iP+1):this._parseText(this.m_iP)};
XMLP.prototype._parseAttribute=function(a,b){this.m_cAlt="";var c=SAXStrings.indexOfNonWhitespace(this.m_xml,a,b);if(-1==c||c>=b)return c;var d=this.m_xml.indexOf("=",c);if(-1==d||d>b)return this._setErr(XMLP.ERR_ATT_VALUES);var f=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,c,d);d=SAXStrings.indexOfNonWhitespace(this.m_xml,d+1,b);if(-1==d||d>b)return this._setErr(XMLP.ERR_ATT_VALUES);var g=this.m_xml.charAt(d);if(-1==SAXStrings.QUOTES.indexOf(g))return this._setErr(XMLP.ERR_ATT_VALUES);g=this.m_xml.indexOf(g,
d+1);if(-1==g||g>b)return this._setErr(XMLP.ERR_ATT_VALUES);c=this.m_xml.substring(c,f+1);f=this.m_xml.substring(d+1,g);if(-1!=c.indexOf("<"))return this._setErr(XMLP.ERR_ATT_LT_NAME);if(-1!=f.indexOf("<"))return this._setErr(XMLP.ERR_ATT_LT_VALUE);f=SAXStrings.replace(f,null,null,"\n"," ");f=SAXStrings.replace(f,null,null,"\t"," ");iRet=this._replaceEntities(f);if(iRet==XMLP._ERROR)return iRet;f=this.m_cAlt;if(-1==this._findAttributeIndex(c))this._addAttribute(c,f);else return this._setErr(XMLP.ERR_ATT_DUP);
this.m_iP=g+2;return XMLP._ATT};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]\x3e",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_CDATA);this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("--\x3e",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_COMMENT);this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._COMMENT};
XMLP.prototype._parseDTD=function(a){var b=this.m_xml.indexOf(">",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_DTD);var c=this.m_xml.indexOf("[",a);for(c=-1!=c&&c<b?"]>":">";;){if(b==d)return this._setErr(XMLP.ERR_INFINITELOOP);var d=b;b=this.m_xml.indexOf(c,a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_DTD);if("]]\x3e"!=this.m_xml.substring(b-1,b+2))break}this.m_iP=b+c.length;return XMLP._DTD};
XMLP.prototype._parseElement=function(a){var b;var c=b=this.m_xml.indexOf(">",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_ELM);if("/"==this.m_xml.charAt(a)){var d=XMLP._ELM_E;a++}else d=XMLP._ELM_B;if("/"==this.m_xml.charAt(b-1)){if(d==XMLP._ELM_E)return this._setErr(XMLP.ERR_ELM_EMPTY);d=XMLP._ELM_EMP;c--}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,a,c);if(1!=b-a&&SAXStrings.indexOfNonWhitespace(this.m_xml,a,c)!=a)return this._setErr(XMLP.ERR_ELM_NAME);this._clearAttributes();var f=SAXStrings.indexOfWhitespace(this.m_xml,
a,c);if(-1==f)f=c+1;else for(this.m_iP=f;this.m_iP<c;){if(this.m_iP==g)return this._setErr(XMLP.ERR_INFINITELOOP);var g=this.m_iP;var e=this._parseAttribute(this.m_iP,c);if(e==XMLP._ERROR)return e}a=this.m_xml.substring(a,f);if(-1!=a.indexOf("<"))return this._setErr(XMLP.ERR_ELM_LT_NAME);this.m_name=a;this.m_iP=b+1;return d};
XMLP.prototype._parseEntity=function(a){var b=this.m_xml.indexOf(";",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_ENTITY);this.m_iP=b+1;return this._replaceEntity(this.m_xml,a,b)};
XMLP.prototype._parsePI=function(a){var b=this.m_xml.indexOf("?>",a);if(-1==b)return this._setErr(XMLP.ERR_CLOSE_PI);a=SAXStrings.indexOfNonWhitespace(this.m_xml,a,b);if(-1==a)return this._setErr(XMLP.ERR_PI_TARGET);var c=SAXStrings.indexOfWhitespace(this.m_xml,a,b);-1==c&&(c=b);var d=SAXStrings.indexOfNonWhitespace(this.m_xml,c,b);-1==d&&(d=b);var f=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,d,b);-1==f&&(f=b-1);this.m_name=this.m_xml.substring(a,c);this._setContent(XMLP._CONT_XML,d,f+1);this.m_iP=
b+2;return XMLP._PI};XMLP.prototype._parseText=function(a){var b=this.m_xml.indexOf("<",a);-1==b&&(b=this.m_xml.length);var c=this.m_xml.indexOf("&",a);-1!=c&&c<=b&&(b=c);this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b;return XMLP._TEXT};
XMLP.prototype._replaceEntities=function(a,b,c){if(SAXStrings.isEmpty(a))return"";b=b||0;c=c||a.length;var d,f="";for(d=a.indexOf("&",b);0<d&&d<c;){f+=a.substring(b,d);b=a.indexOf(";",d)+1;if(0==b||b>c)return this._setErr(XMLP.ERR_CLOSE_ENTITY);iRet=this._replaceEntity(a,d+1,b-1);if(iRet==XMLP._ERROR)return iRet;f+=this.m_cAlt;d=a.indexOf("&",b)}b!=c&&(f+=a.substring(b,c));this._setContent(XMLP._CONT_ALT,f);return XMLP._ENTITY};
XMLP.prototype._replaceEntity=function(a,b,c){if(SAXStrings.isEmpty(a))return-1;b=b||0;c=c||a.length;switch(a.substring(b,c)){case "amp":strEnt="&";break;case "lt":strEnt="<";break;case "gt":strEnt=">";break;case "apos":strEnt="'";break;case "quot":strEnt='"';break;default:if("#"==a.charAt(b))strEnt=String.fromCharCode(parseInt(a.substring(b+1,c)));else return this._setErr(XMLP.ERR_ENTITY_UNKNOWN)}this._setContent(XMLP._CONT_ALT,strEnt);return XMLP._ENTITY};
XMLP.prototype._setContent=function(a){var b=arguments;XMLP._CONT_XML==a?(this.m_cAlt=null,this.m_cB=b[1],this.m_cE=b[2]):(this.m_cAlt=b[1],this.m_cB=0,this.m_cE=b[1].length);this.m_cSrc=a};XMLP.prototype._setErr=function(a){this.m_cAlt=a=XMLP._errs[a];this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXDriver=function(){this.m_hndLex=this.m_hndErr=this.m_hndDoc=null};SAXDriver.DOC_B=1;SAXDriver.DOC_E=2;SAXDriver.ELM_B=3;SAXDriver.ELM_E=4;SAXDriver.CHARS=5;
SAXDriver.PI=6;SAXDriver.CD_B=7;SAXDriver.CD_E=8;SAXDriver.CMNT=9;SAXDriver.DTD_B=10;SAXDriver.DTD_E=11;SAXDriver.prototype.parse=function(a){a=new XMLP(a);this.m_hndDoc&&this.m_hndDoc.setDocumentLocator&&this.m_hndDoc.setDocumentLocator(this);this.m_parser=a;this.m_bErr=!1,this._fireEvent(SAXDriver.DOC_B);this._parseLoop();this.m_bErr||this._fireEvent(SAXDriver.DOC_E);this.m_xml=null;this.m_iP=0};SAXDriver.prototype.setDocumentHandler=function(a){this.m_hndDoc=a};
SAXDriver.prototype.setErrorHandler=function(a){this.m_hndErr=a};SAXDriver.prototype.setLexicalHandler=function(a){this.m_hndLex=a};SAXDriver.prototype.getColumnNumber=function(){return this.m_parser.getColumnNumber()};SAXDriver.prototype.getLineNumber=function(){return this.m_parser.getLineNumber()};SAXDriver.prototype.getMessage=function(){return this.m_strErrMsg};SAXDriver.prototype.getPublicId=function(){return null};SAXDriver.prototype.getSystemId=function(){return null};
SAXDriver.prototype.getLength=function(){return this.m_parser.getAttributeCount()};SAXDriver.prototype.getName=function(a){return this.m_parser.getAttributeName(a)};SAXDriver.prototype.getValue=function(a){return this.m_parser.getAttributeValue(a)};SAXDriver.prototype.getValueByName=function(a){return this.m_parser.getAttributeValueByName(a)};SAXDriver.prototype._fireError=function(a){this.m_strErrMsg=a;this.m_bErr=!0;this.m_hndErr&&this.m_hndErr.fatalError&&this.m_hndErr.fatalError(this)};
SAXDriver.prototype._fireEvent=function(a){var b=arguments,c=b.length-1;if(!this.m_bErr){if(SAXDriver.DOC_B==a){var d="startDocument";var f=this.m_hndDoc}else SAXDriver.DOC_E==a?(d="endDocument",f=this.m_hndDoc):SAXDriver.ELM_B==a?(d="startElement",f=this.m_hndDoc):SAXDriver.ELM_E==a?(d="endElement",f=this.m_hndDoc):SAXDriver.CHARS==a?(d="characters",f=this.m_hndDoc):SAXDriver.PI==a?(d="processingInstruction",f=this.m_hndDoc):SAXDriver.CD_B==a?(d="startCDATA",f=this.m_hndLex):SAXDriver.CD_E==a?(d=
"endCDATA",f=this.m_hndLex):SAXDriver.CMNT==a&&(d="comment",f=this.m_hndLex);if(f&&f[d])if(0==c)f[d]();else if(1==c)f[d](b[1]);else if(2==c)f[d](b[1],b[2]);else if(3==c)f[d](b[1],b[2],b[3])}};
SAXDriver.prototype._parseLoop=function(a){for(a=this.m_parser;!this.m_bErr;){var b=a.next();if(b==XMLP._ELM_B)this._fireEvent(SAXDriver.ELM_B,a.getName(),this);else if(b==XMLP._ELM_E)this._fireEvent(SAXDriver.ELM_E,a.getName());else if(b==XMLP._ELM_EMP)this._fireEvent(SAXDriver.ELM_B,a.getName(),this),this._fireEvent(SAXDriver.ELM_E,a.getName());else if(b==XMLP._TEXT)this._fireEvent(SAXDriver.CHARS,a.getContent(),a.getContentBegin(),a.getContentEnd()-a.getContentBegin());else if(b==XMLP._ENTITY)this._fireEvent(SAXDriver.CHARS,
a.getContent(),a.getContentBegin(),a.getContentEnd()-a.getContentBegin());else if(b==XMLP._PI)this._fireEvent(SAXDriver.PI,a.getName(),a.getContent().substring(a.getContentBegin(),a.getContentEnd()));else if(b==XMLP._CDATA)this._fireEvent(SAXDriver.CD_B),this._fireEvent(SAXDriver.CHARS,a.getContent(),a.getContentBegin(),a.getContentEnd()-a.getContentBegin()),this._fireEvent(SAXDriver.CD_E);else if(b==XMLP._COMMENT)this._fireEvent(SAXDriver.CMNT,a.getContent(),a.getContentBegin(),a.getContentEnd()-
a.getContentBegin());else if(b!=XMLP._DTD)if(b==XMLP._ERROR)this._fireError(a.getContent());else if(b==XMLP._NONE)break}};SAXStrings=function(){};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(a,b){if(SAXStrings.isEmpty(a))return-1;b=b||a.length;var c=a.substring(0,b).split("\n");c.length--;c=c.join("\n").length;return b-c};SAXStrings.getLineNumber=function(a,b){if(SAXStrings.isEmpty(a))return-1;b=b||a.length;return a.substring(0,b).split("\n").length};
SAXStrings.indexOfNonWhitespace=function(a,b,c){if(SAXStrings.isEmpty(a))return-1;c=c||a.length;for(b=b||0;b<c;b++)if(-1==SAXStrings.WHITESPACE.indexOf(a.charAt(b)))return b;return-1};SAXStrings.indexOfWhitespace=function(a,b,c){if(SAXStrings.isEmpty(a))return-1;c=c||a.length;for(b=b||0;b<c;b++)if(-1!=SAXStrings.WHITESPACE.indexOf(a.charAt(b)))return b;return-1};SAXStrings.isEmpty=function(a){return null==a||0==a.length};
SAXStrings.lastIndexOfNonWhitespace=function(a,b,c){if(SAXStrings.isEmpty(a))return-1;b=b||0;c=c||a.length;for(--c;c>=b;c--)if(-1==SAXStrings.WHITESPACE.indexOf(a.charAt(c)))return c;return-1};SAXStrings.replace=function(a,b,c,d,f){if(SAXStrings.isEmpty(a))return"";c=c||a.length;return a.substring(b||0,c).split(d).join(f)};Stack=function(){this.m_arr=[]};Stack.prototype.clear=function(){this.m_arr=[]};Stack.prototype.count=function(){return this.m_arr.length};
Stack.prototype.destroy=function(){this.m_arr=null};Stack.prototype.peek=function(){return 0==this.m_arr.length?null:this.m_arr[this.m_arr.length-1]};Stack.prototype.pop=function(){if(0==this.m_arr.length)return null;var a=this.m_arr[this.m_arr.length-1];this.m_arr.length--;return a};Stack.prototype.push=function(a){this.m_arr[this.m_arr.length]=a};function isEmpty(a){return null==a||0==a.length}
function trim(a,b,c){if(isEmpty(a))return"";null==b&&(b=!0);null==c&&(c=!0);var d=0,f=0,g=0;if(1==b)for(;g<a.length&&-1!=whitespace.indexOf(a.charAt(g++));)d++;if(1==c)for(b=a.length-1;b>=d&&-1!=whitespace.indexOf(a.charAt(b--));)f++;return a.substring(d,a.length-f)}function __escapeString(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/"/g,"&quot;");return a=a.replace(/'/g,"&apos;")}
function __unescapeString(a){a=a.replace(/&amp;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&quot;/g,'"');return a=a.replace(/&apos;/g,"'")}function addClass(a,b){a?0>a.indexOf("|"+b+"|")&&(a+=b+"|"):a="|"+b+"|";return a}DOMException=function(a){this._class=addClass(this._class,"DOMException");this.code=a};DOMException.INDEX_SIZE_ERR=1;DOMException.DOMSTRING_SIZE_ERR=2;DOMException.HIERARCHY_REQUEST_ERR=3;DOMException.WRONG_DOCUMENT_ERR=4;
DOMException.INVALID_CHARACTER_ERR=5;DOMException.NO_DATA_ALLOWED_ERR=6;DOMException.NO_MODIFICATION_ALLOWED_ERR=7;DOMException.NOT_FOUND_ERR=8;DOMException.NOT_SUPPORTED_ERR=9;DOMException.INUSE_ATTRIBUTE_ERR=10;DOMException.INVALID_STATE_ERR=11;DOMException.SYNTAX_ERR=12;DOMException.INVALID_MODIFICATION_ERR=13;DOMException.NAMESPACE_ERR=14;DOMException.INVALID_ACCESS_ERR=15;
DOMImplementation=function(){this._class=addClass(this._class,"DOMImplementation");this._p=null;this.preserveWhiteSpace=!1;this.errorChecking=this.namespaceAware=!0};DOMImplementation.prototype.escapeString=function(a){return __escapeString(a)};DOMImplementation.prototype.unescapeString=function(a){return __unescapeString(a)};DOMImplementation.prototype.hasFeature=function(a,b){var c=!1;"xml"==a.toLowerCase()?c=!b||"1.0"==b||"2.0"==b:"core"==a.toLowerCase()&&(c=!b||"2.0"==b);return c};
DOMImplementation.prototype.loadXML=function(a){try{var b=new XMLP(a)}catch(c){alert("Error Creating the SAX Parser. Did you include xmlsax.js or tinyxmlsax.js in your web page?\nThe SAX parser is needed to populate XML for <SCRIPT>'s W3C DOM Parser with data.")}a=new DOMDocument(this);this._parseLoop(a,b);a._parseComplete=!0;return a};
DOMImplementation.prototype.translateErrCode=function(a){switch(a){case DOMException.INDEX_SIZE_ERR:a="INDEX_SIZE_ERR: Index out of bounds";break;case DOMException.DOMSTRING_SIZE_ERR:a="DOMSTRING_SIZE_ERR: The resulting string is too long to fit in a DOMString";break;case DOMException.HIERARCHY_REQUEST_ERR:a="HIERARCHY_REQUEST_ERR: The Node can not be inserted at this location";break;case DOMException.WRONG_DOCUMENT_ERR:a="WRONG_DOCUMENT_ERR: The source and the destination Documents are not the same";
break;case DOMException.INVALID_CHARACTER_ERR:a="INVALID_CHARACTER_ERR: The string contains an invalid character";break;case DOMException.NO_DATA_ALLOWED_ERR:a="NO_DATA_ALLOWED_ERR: This Node / NodeList does not support data";break;case DOMException.NO_MODIFICATION_ALLOWED_ERR:a="NO_MODIFICATION_ALLOWED_ERR: This object cannot be modified";break;case DOMException.NOT_FOUND_ERR:a="NOT_FOUND_ERR: The item cannot be found";break;case DOMException.NOT_SUPPORTED_ERR:a="NOT_SUPPORTED_ERR: This implementation does not support function";
break;case DOMException.INUSE_ATTRIBUTE_ERR:a="INUSE_ATTRIBUTE_ERR: The Attribute has already been assigned to another Element";break;case DOMException.INVALID_STATE_ERR:a="INVALID_STATE_ERR: The object is no longer usable";break;case DOMException.SYNTAX_ERR:a="SYNTAX_ERR: Syntax error";break;case DOMException.INVALID_MODIFICATION_ERR:a="INVALID_MODIFICATION_ERR: Cannot change the type of the object";break;case DOMException.NAMESPACE_ERR:a="NAMESPACE_ERR: The namespace declaration is incorrect";break;
case DOMException.INVALID_ACCESS_ERR:a="INVALID_ACCESS_ERR: The object does not support this function";break;default:a="UNKNOWN: Unknown Exception Code ("+a+")"}return a};
DOMImplementation.prototype._parseLoop=function(a,b){var c;iNodeParent=a;var d=[],f=[];if(this.namespaceAware){var g=a.createNamespace("");g.setValue("http://www.w3.org/2000/xmlns/");a._namespaces.setNamedItem(g)}for(;;){var e=b.next();if(e==XMLP._ELM_B){e=b.getName();trim(e,!0,!0);if(this.namespaceAware){e=a.createElementNS("",b.getName());e._namespaces=iNodeParent._namespaces._cloneNodes(e);for(c=0;c<b.getAttributeCount();c++){var h=b.getAttributeName(c);this._isNamespaceDeclaration(h)?(this._parseNSName(h),
g="xmlns"!=h?a.createNamespace(h):a.createNamespace(""),g.setValue(b.getAttributeValue(c)),e._namespaces.setNamedItem(g)):((g=e.getAttributeNode(h))||(g=a.createAttributeNS("",h)),g.setValue(b.getAttributeValue(c)),e.setAttributeNodeNS(g),this._isIdDeclaration(h)&&(e.id=b.getAttributeValue(c)))}e._namespaces.getNamedItem(e.prefix)&&(e.namespaceURI=e._namespaces.getNamedItem(e.prefix).value);for(c=0;c<e.attributes.length;c++)""!=e.attributes.item(c).prefix&&e._namespaces.getNamedItem(e.attributes.item(c).prefix)&&
(e.attributes.item(c).namespaceURI=e._namespaces.getNamedItem(e.attributes.item(c).prefix).value)}else for(e=a.createElement(b.getName()),c=0;c<b.getAttributeCount();c++)h=b.getAttributeName(c),(g=e.getAttributeNode(h))||(g=a.createAttribute(h)),g.setValue(b.getAttributeValue(c)),e.setAttributeNode(g);iNodeParent.nodeType==DOMNode.DOCUMENT_NODE&&(iNodeParent.documentElement=e);iNodeParent.appendChild(e);iNodeParent=e}else if(e==XMLP._ELM_E)iNodeParent=iNodeParent.parentNode;else if(e==XMLP._ELM_EMP){e=
b.getName();e=trim(e,!0,!0);if(this.namespaceAware){e=a.createElementNS("",b.getName());e._namespaces=iNodeParent._namespaces._cloneNodes(e);for(c=0;c<b.getAttributeCount();c++)h=b.getAttributeName(c),this._isNamespaceDeclaration(h)?(this._parseNSName(h),g="xmlns"!=h?a.createNamespace(h):a.createNamespace(""),g.setValue(b.getAttributeValue(c)),e._namespaces.setNamedItem(g)):((g=e.getAttributeNode(h))||(g=a.createAttributeNS("",h)),g.setValue(b.getAttributeValue(c)),e.setAttributeNodeNS(g),this._isIdDeclaration(h)&&
(e.id=b.getAttributeValue(c)));e._namespaces.getNamedItem(e.prefix)&&(e.namespaceURI=e._namespaces.getNamedItem(e.prefix).value);for(c=0;c<e.attributes.length;c++)""!=e.attributes.item(c).prefix&&e._namespaces.getNamedItem(e.attributes.item(c).prefix)&&(e.attributes.item(c).namespaceURI=e._namespaces.getNamedItem(e.attributes.item(c).prefix).value)}else for(e=a.createElement(e),c=0;c<b.getAttributeCount();c++)h=b.getAttributeName(c),(g=e.getAttributeNode(h))||(g=a.createAttribute(h)),g.setValue(b.getAttributeValue(c)),
e.setAttributeNode(g);iNodeParent.nodeType==DOMNode.DOCUMENT_NODE&&(iNodeParent.documentElement=e);iNodeParent.appendChild(e)}else if(e==XMLP._TEXT||e==XMLP._ENTITY)c=b.getContent().substring(b.getContentBegin(),b.getContentEnd()),this.preserveWhiteSpace||""==trim(c,!0,!0)&&(c=""),0<c.length&&(c=a.createTextNode(c),iNodeParent.appendChild(c),e==XMLP._ENTITY?d[d.length]=c:f[f.length]=c);else if(e==XMLP._PI)iNodeParent.appendChild(a.createProcessingInstruction(b.getName(),b.getContent().substring(b.getContentBegin(),
b.getContentEnd())));else if(e==XMLP._CDATA)c=b.getContent().substring(b.getContentBegin(),b.getContentEnd()),this.preserveWhiteSpace||(c=trim(c,!0,!0),c.replace(/ +/g," ")),0<c.length&&iNodeParent.appendChild(a.createCDATASection(c));else if(e==XMLP._COMMENT)c=b.getContent().substring(b.getContentBegin(),b.getContentEnd()),this.preserveWhiteSpace||(c=trim(c,!0,!0),c.replace(/ +/g," ")),0<c.length&&iNodeParent.appendChild(a.createComment(c));else if(e!=XMLP._DTD){if(e==XMLP._ERROR)throw new DOMException(DOMException.SYNTAX_ERR);
if(e==XMLP._NONE)if(iNodeParent==a)break;else throw new DOMException(DOMException.SYNTAX_ERR);}}e=d.length;for(intLoop=0;intLoop<e;intLoop++)if(c=d[intLoop].getParentNode())if(c.normalize(),!this.preserveWhiteSpace)for(c=c.getChildNodes(),g=c.getLength(),intLoop2=0;intLoop2<g;intLoop2++)if(h=c.item(intLoop2),h.getNodeType()==DOMNode.TEXT_NODE){var k=h.getData(),k=trim(k,!0,!0);k.replace(/ +/g," ");h.setData(k)}if(!this.preserveWhiteSpace)for(e=f.length,intLoop=0;intLoop<e;intLoop++)d=f[intLoop],null!=
d.getParentNode()&&(c=d.getData(),c=trim(c,!0,!0),c.replace(/ +/g," "),d.setData(c))};DOMImplementation.prototype._isNamespaceDeclaration=function(a){return-1<a.indexOf("xmlns")};DOMImplementation.prototype._isIdDeclaration=function(a){return"id"==a.toLowerCase()};DOMImplementation.prototype._isValidName=function(a){return a.match(re_validName)};re_validName=/^[a-zA-Z_:][a-zA-Z0-9\.\-_:]*$/;DOMImplementation.prototype._isValidString=function(a){return 0>a.search(re_invalidStringChars)};
re_invalidStringChars=/\x01|\x02|\x03|\x04|\x05|\x06|\x07|\x08|\x0B|\x0C|\x0E|\x0F|\x10|\x11|\x12|\x13|\x14|\x15|\x16|\x17|\x18|\x19|\x1A|\x1B|\x1C|\x1D|\x1E|\x1F|\x7F/;DOMImplementation.prototype._parseNSName=function(a){var b={};b.prefix=a;b.namespaceName="";delimPos=a.indexOf(":");-1<delimPos&&(b.prefix=a.substring(0,delimPos),b.namespaceName=a.substring(delimPos+1,a.length));return b};
DOMImplementation.prototype._parseQName=function(a){var b={};b.localName=a;b.prefix="";delimPos=a.indexOf(":");-1<delimPos&&(b.prefix=a.substring(0,delimPos),b.localName=a.substring(delimPos+1,a.length));return b};DOMNodeList=function(a,b){this._class=addClass(this._class,"DOMNodeList");this._nodes=[];this.length=0;this.parentNode=b;this.ownerDocument=a;this._readonly=!1};DOMNodeList.prototype.getLength=function(){return this.length};
DOMNodeList.prototype.item=function(a){var b=null;0<=a&&a<this._nodes.length&&(b=this._nodes[a]);return b};DOMNodeList.prototype._findItemIndex=function(a){var b=-1;if(-1<a)for(var c=0;c<this._nodes.length;c++)if(this._nodes[c]._id==a){b=c;break}return b};
DOMNodeList.prototype._insertBefore=function(a,b){if(0<=b&&b<this._nodes.length){var c=this._nodes.slice(0,b);a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE?c=c.concat(a.childNodes._nodes):c[c.length]=a;this._nodes=c.concat(this._nodes.slice(b));this.length=this._nodes.length}};
DOMNodeList.prototype._replaceChild=function(a,b){var c=null;if(0<=b&&b<this._nodes.length)if(c=this._nodes[b],a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){var d=this._nodes.slice(0,b);d=d.concat(a.childNodes._nodes);this._nodes=d.concat(this._nodes.slice(b+1))}else this._nodes[b]=a;return c};DOMNodeList.prototype._removeChild=function(a){var b=null;-1<a&&(b=this._nodes[a],this._nodes=this._nodes.slice(0,a).concat(this._nodes.slice(a+1)),this.length=this._nodes.length);return b};
DOMNodeList.prototype._appendChild=function(a){a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE?this._nodes=this._nodes.concat(a.childNodes._nodes):this._nodes[this._nodes.length]=a;this.length=this._nodes.length};DOMNodeList.prototype._cloneNodes=function(a,b){for(var c=new DOMNodeList(this.ownerDocument,b),d=0;d<this._nodes.length;d++)c._appendChild(this._nodes[d].cloneNode(a));return c};DOMNodeList.prototype.toString=function(){for(var a="",b=0;b<this.length;b++)a+=this._nodes[b].toString();return a};
DOMNamedNodeMap=function(a,b){this._class=addClass(this._class,"DOMNamedNodeMap");this.DOMNodeList=DOMNodeList;this.DOMNodeList(a,b)};DOMNamedNodeMap.prototype=new DOMNodeList;DOMNamedNodeMap.prototype.getNamedItem=function(a){var b=null;a=this._findNamedItemIndex(a);-1<a&&(b=this._nodes[a]);return b};
DOMNamedNodeMap.prototype.setNamedItem=function(a){if(this.ownerDocument.implementation.errorChecking){if(this.ownerDocument!=a.ownerDocument)throw new DOMException(DOMException.WRONG_DOCUMENT_ERR);if(this._readonly||this.parentNode&&this.parentNode._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(a.ownerElement&&a.ownerElement!=this.parentNode)throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);}var b=this._findNamedItemIndex(a.name),c=null;if(-1<b){c=this._nodes[b];
if(this.ownerDocument.implementation.errorChecking&&c._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this._nodes[b]=a}else this._nodes[this.length]=a;this.length=this._nodes.length;a.ownerElement=this.parentNode;return c};
DOMNamedNodeMap.prototype.removeNamedItem=function(a){if(this.ownerDocument.implementation.errorChecking&&(this._readonly||this.parentNode&&this.parentNode._readonly))throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);a=this._findNamedItemIndex(a);if(this.ownerDocument.implementation.errorChecking&&0>a)throw new DOMException(DOMException.NOT_FOUND_ERR);var b=this._nodes[a];if(this.ownerDocument.implementation.errorChecking&&b._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);
return this._removeChild(a)};DOMNamedNodeMap.prototype.getNamedItemNS=function(a,b){var c=null,d=this._findNamedItemNSIndex(a,b);-1<d&&(c=this._nodes[d]);return c};
DOMNamedNodeMap.prototype.setNamedItemNS=function(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly||this.parentNode&&this.parentNode._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.ownerDocument!=a.ownerDocument)throw new DOMException(DOMException.WRONG_DOCUMENT_ERR);if(a.ownerElement&&a.ownerElement!=this.parentNode)throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);}var b=this._findNamedItemNSIndex(a.namespaceURI,a.localName),c=null;
if(-1<b){c=this._nodes[b];if(this.ownerDocument.implementation.errorChecking&&c._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this._nodes[b]=a}else this._nodes[this.length]=a;this.length=this._nodes.length;a.ownerElement=this.parentNode;return c};
DOMNamedNodeMap.prototype.removeNamedItemNS=function(a,b){if(this.ownerDocument.implementation.errorChecking&&(this._readonly||this.parentNode&&this.parentNode._readonly))throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);var c=this._findNamedItemNSIndex(a,b);if(this.ownerDocument.implementation.errorChecking&&0>c)throw new DOMException(DOMException.NOT_FOUND_ERR);var d=this._nodes[c];if(this.ownerDocument.implementation.errorChecking&&d._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);
return this._removeChild(c)};DOMNamedNodeMap.prototype._findNamedItemIndex=function(a){for(var b=-1,c=0;c<this._nodes.length;c++)if(this._nodes[c].name==a){b=c;break}return b};DOMNamedNodeMap.prototype._findNamedItemNSIndex=function(a,b){var c=-1;if(b)for(var d=0;d<this._nodes.length;d++)if(this._nodes[d].namespaceURI==a&&this._nodes[d].localName==b){c=d;break}return c};DOMNamedNodeMap.prototype._hasAttribute=function(a){var b=!1;-1<this._findNamedItemIndex(a)&&(b=!0);return b};
DOMNamedNodeMap.prototype._hasAttributeNS=function(a,b){var c=!1;-1<this._findNamedItemNSIndex(a,b)&&(c=!0);return c};DOMNamedNodeMap.prototype._cloneNodes=function(a){a=new DOMNamedNodeMap(this.ownerDocument,a);for(var b=0;b<this._nodes.length;b++)a._appendChild(this._nodes[b].cloneNode(!1));return a};DOMNamedNodeMap.prototype.toString=function(){for(var a="",b=0;b<this.length-1;b++)a+=this._nodes[b].toString()+" ";0<this.length&&(a+=this._nodes[this.length-1].toString());return a};
DOMNamespaceNodeMap=function(a,b){this._class=addClass(this._class,"DOMNamespaceNodeMap");this.DOMNamedNodeMap=DOMNamedNodeMap;this.DOMNamedNodeMap(a,b)};DOMNamespaceNodeMap.prototype=new DOMNamedNodeMap;DOMNamespaceNodeMap.prototype._findNamedItemIndex=function(a){for(var b=-1,c=0;c<this._nodes.length;c++)if(this._nodes[c].localName==a){b=c;break}return b};
DOMNamespaceNodeMap.prototype._cloneNodes=function(a){a=new DOMNamespaceNodeMap(this.ownerDocument,a);for(var b=0;b<this._nodes.length;b++)a._appendChild(this._nodes[b].cloneNode(!1));return a};DOMNamespaceNodeMap.prototype.toString=function(){for(var a,b="",c=0;c<this._nodes.length;c++){a=null;try{a=this.parentNode.parentNode._namespaces.getNamedItem(this._nodes[c].localName)}catch(d){break}a&&""+a.nodeValue==""+this._nodes[c].nodeValue||(b+=this._nodes[c].toString()+" ")}return b};
DOMNode=function(a){this._class=addClass(this._class,"DOMNode");a&&(this._id=a._genId());this.nodeValue=this.nodeName=this.localName=this.prefix=this.namespaceURI="";this.nodeType=0;this.parentNode=null;this.childNodes=new DOMNodeList(a,this);this.nextSibling=this.previousSibling=this.lastChild=this.firstChild=null;this.attributes=new DOMNamedNodeMap(a,this);this.ownerDocument=a;this._namespaces=new DOMNamespaceNodeMap(a,this);this._readonly=!1};DOMNode.ELEMENT_NODE=1;DOMNode.ATTRIBUTE_NODE=2;
DOMNode.TEXT_NODE=3;DOMNode.CDATA_SECTION_NODE=4;DOMNode.ENTITY_REFERENCE_NODE=5;DOMNode.ENTITY_NODE=6;DOMNode.PROCESSING_INSTRUCTION_NODE=7;DOMNode.COMMENT_NODE=8;DOMNode.DOCUMENT_NODE=9;DOMNode.DOCUMENT_TYPE_NODE=10;DOMNode.DOCUMENT_FRAGMENT_NODE=11;DOMNode.NOTATION_NODE=12;DOMNode.NAMESPACE_NODE=13;DOMNode.prototype.hasAttributes=function(){return 0==this.attributes.length?!1:!0};DOMNode.prototype.getNodeName=function(){return this.nodeName};DOMNode.prototype.getNodeValue=function(){return this.nodeValue};
DOMNode.prototype.setNodeValue=function(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this.nodeValue=a};DOMNode.prototype.getNodeType=function(){return this.nodeType};DOMNode.prototype.getParentNode=function(){return this.parentNode};DOMNode.prototype.getChildNodes=function(){return this.childNodes};DOMNode.prototype.getFirstChild=function(){return this.firstChild};DOMNode.prototype.getLastChild=function(){return this.lastChild};
DOMNode.prototype.getPreviousSibling=function(){return this.previousSibling};DOMNode.prototype.getNextSibling=function(){return this.nextSibling};DOMNode.prototype.getAttributes=function(){return this.attributes};DOMNode.prototype.getOwnerDocument=function(){return this.ownerDocument};DOMNode.prototype.getNamespaceURI=function(){return this.namespaceURI};DOMNode.prototype.getPrefix=function(){return this.prefix};
DOMNode.prototype.setPrefix=function(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(!this.ownerDocument.implementation._isValidName(a))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);if(!this.ownerDocument._isValidNamespace(this.namespaceURI,a+":"+this.localName))throw new DOMException(DOMException.NAMESPACE_ERR);if("xmlns"==a&&"http://www.w3.org/2000/xmlns/"!=this.namespaceURI)throw new DOMException(DOMException.NAMESPACE_ERR);
if(""==a&&"xmlns"==this.localName)throw new DOMException(DOMException.NAMESPACE_ERR);}this.prefix=a;this.nodeName=""!=this.prefix?this.prefix+":"+this.localName:this.localName};DOMNode.prototype.getLocalName=function(){return this.localName};
DOMNode.prototype.insertBefore=function(a,b){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.ownerDocument!=a.ownerDocument)throw new DOMException(DOMException.WRONG_DOCUMENT_ERR);if(this._isAncestor(a))throw new DOMException(DOMException.HIERARCHY_REQUEST_ERR);}if(b){var c=this.childNodes._findItemIndex(b._id);if(this.ownerDocument.implementation.errorChecking&&0>c)throw new DOMException(DOMException.NOT_FOUND_ERR);
(c=a.parentNode)&&c.removeChild(a);this.childNodes._insertBefore(a,this.childNodes._findItemIndex(b._id));c=b.previousSibling;if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(0<a.childNodes._nodes.length){for(var d=0;d<a.childNodes._nodes.length;d++)a.childNodes._nodes[d].parentNode=this;b.previousSibling=a.childNodes._nodes[a.childNodes._nodes.length-1]}}else a.parentNode=this,b.previousSibling=a}else c=this.lastChild,this.appendChild(a);a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE?0<a.childNodes._nodes.length&&
(c?c.nextSibling=a.childNodes._nodes[0]:this.firstChild=a.childNodes._nodes[0],a.childNodes._nodes[0].previousSibling=c,a.childNodes._nodes[a.childNodes._nodes.length-1].nextSibling=b):(c?c.nextSibling=a:this.firstChild=a,a.previousSibling=c,a.nextSibling=b);return a};
DOMNode.prototype.replaceChild=function(a,b){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.ownerDocument!=a.ownerDocument)throw new DOMException(DOMException.WRONG_DOCUMENT_ERR);if(this._isAncestor(a))throw new DOMException(DOMException.HIERARCHY_REQUEST_ERR);}var c=this.childNodes._findItemIndex(b._id);if(this.ownerDocument.implementation.errorChecking&&0>c)throw new DOMException(DOMException.NOT_FOUND_ERR);
var d=a.parentNode;d&&d.removeChild(a);c=this.childNodes._replaceChild(a,c);if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(0<a.childNodes._nodes.length){for(d=0;d<a.childNodes._nodes.length;d++)a.childNodes._nodes[d].parentNode=this;b.previousSibling?b.previousSibling.nextSibling=a.childNodes._nodes[0]:this.firstChild=a.childNodes._nodes[0];b.nextSibling?b.nextSibling.previousSibling=a:this.lastChild=a.childNodes._nodes[a.childNodes._nodes.length-1];a.childNodes._nodes[0].previousSibling=b.previousSibling;
a.childNodes._nodes[a.childNodes._nodes.length-1].nextSibling=b.nextSibling}}else a.parentNode=this,b.previousSibling?b.previousSibling.nextSibling=a:this.firstChild=a,b.nextSibling?b.nextSibling.previousSibling=a:this.lastChild=a,a.previousSibling=b.previousSibling,a.nextSibling=b.nextSibling;return c};
DOMNode.prototype.removeChild=function(a){if(this.ownerDocument.implementation.errorChecking&&(this._readonly||a._readonly))throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);var b=this.childNodes._findItemIndex(a._id);if(this.ownerDocument.implementation.errorChecking&&0>b)throw new DOMException(DOMException.NOT_FOUND_ERR);this.childNodes._removeChild(b);a.parentNode=null;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling?a.nextSibling.previousSibling=
a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling=null;a.nextSibling=null;return a};
DOMNode.prototype.appendChild=function(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.ownerDocument!=a.ownerDocument)throw new DOMException(DOMException.WRONG_DOCUMENT_ERR);if(this._isAncestor(a))throw new DOMException(DOMException.HIERARCHY_REQUEST_ERR);}var b=a.parentNode;b&&b.removeChild(a);this.childNodes._appendChild(a);if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(0<a.childNodes._nodes.length){for(b=
0;b<a.childNodes._nodes.length;b++)a.childNodes._nodes[b].parentNode=this;this.lastChild?(this.lastChild.nextSibling=a.childNodes._nodes[0],a.childNodes._nodes[0].previousSibling=this.lastChild,this.lastChild=a.childNodes._nodes[a.childNodes._nodes.length-1]):(this.lastChild=a.childNodes._nodes[a.childNodes._nodes.length-1],this.firstChild=a.childNodes._nodes[0])}}else a.parentNode=this,this.lastChild?(this.lastChild.nextSibling=a,a.previousSibling=this.lastChild,this.lastChild=a):this.firstChild=
this.lastChild=a;return a};DOMNode.prototype.hasChildNodes=function(){return 0<this.childNodes.length};DOMNode.prototype.cloneNode=function(a){try{return this.ownerDocument.importNode(this,a)}catch(b){return null}};
DOMNode.prototype.normalize=function(){var a=new DOMNodeList;if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){for(var b=null,c=0;c<this.childNodes.length;c++){var d=this.childNodes.item(c);d.nodeType==DOMNode.TEXT_NODE?1>d.length?a._appendChild(d):b?(b.appendData(d.data),a._appendChild(d)):b=d:(b=null,d.normalize())}for(c=0;c<a.length;c++)d=a.item(c),d.parentNode.removeChild(d)}};
DOMNode.prototype.isSupported=function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)};DOMNode.prototype.getElementsByTagName=function(a){return this._getElementsByTagNameRecursive(a,new DOMNodeList(this.ownerDocument))};
DOMNode.prototype._getElementsByTagNameRecursive=function(a,b){if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){this.nodeName!=a&&"*"!=a||b._appendChild(this);for(var c=0;c<this.childNodes.length;c++)b=this.childNodes.item(c)._getElementsByTagNameRecursive(a,b)}return b};DOMNode.prototype.getXML=function(){return this.toString()};DOMNode.prototype.getElementsByTagNameNS=function(a,b){return this._getElementsByTagNameNSRecursive(a,b,new DOMNodeList(this.ownerDocument))};
DOMNode.prototype._getElementsByTagNameNSRecursive=function(a,b,c){if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){this.namespaceURI!=a&&"*"!=a||this.localName!=b&&"*"!=b||c._appendChild(this);for(var d=0;d<this.childNodes.length;d++)c=this.childNodes.item(d)._getElementsByTagNameNSRecursive(a,b,c)}return c};DOMNode.prototype._isAncestor=function(a){return this==a||this.parentNode&&this.parentNode._isAncestor(a)};
DOMNode.prototype.importNode=function(a,b){this.getOwnerDocument()._performingImportNodeOperation=!0;try{if(a.nodeType==DOMNode.ELEMENT_NODE)if(this.ownerDocument.implementation.namespaceAware){var c=this.ownerDocument.createElementNS(a.namespaceURI,a.nodeName);for(d=0;d<a.attributes.length;d++)c.setAttributeNS(a.attributes.item(d).namespaceURI,a.attributes.item(d).name,a.attributes.item(d).value);for(d=0;d<a._namespaces.length;d++)c._namespaces._nodes[d]=this.ownerDocument.createNamespace(a._namespaces.item(d).localName),
c._namespaces._nodes[d].setValue(a._namespaces.item(d).value)}else{c=this.ownerDocument.createElement(a.tagName);for(var d=0;d<a.attributes.length;d++)c.setAttribute(a.attributes.item(d).name,a.attributes.item(d).value)}else if(a.nodeType==DOMNode.ATTRIBUTE_NODE){if(this.ownerDocument.implementation.namespaceAware)for(c=this.ownerDocument.createAttributeNS(a.namespaceURI,a.nodeName),d=0;d<a._namespaces.length;d++)c._namespaces._nodes[d]=this.ownerDocument.createNamespace(a._namespaces.item(d).localName),
c._namespaces._nodes[d].setValue(a._namespaces.item(d).value);else c=this.ownerDocument.createAttribute(a.name);c.setValue(a.value)}else if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT)c=this.ownerDocument.createDocumentFragment();else if(a.nodeType==DOMNode.NAMESPACE_NODE)c=this.ownerDocument.createNamespace(a.nodeName),c.setValue(a.value);else if(a.nodeType==DOMNode.TEXT_NODE)c=this.ownerDocument.createTextNode(a.data);else if(a.nodeType==DOMNode.CDATA_SECTION_NODE)c=this.ownerDocument.createCDATASection(a.data);
else if(a.nodeType==DOMNode.PROCESSING_INSTRUCTION_NODE)c=this.ownerDocument.createProcessingInstruction(a.target,a.data);else if(a.nodeType==DOMNode.COMMENT_NODE)c=this.ownerDocument.createComment(a.data);else throw new DOMException(DOMException.NOT_SUPPORTED_ERR);if(b)for(d=0;d<a.childNodes.length;d++)c.appendChild(this.ownerDocument.importNode(a.childNodes.item(d),!0));this.getOwnerDocument()._performingImportNodeOperation=!1;return c}catch(f){throw this.getOwnerDocument()._performingImportNodeOperation=
!1,f;}};DOMNode.prototype.__escapeString=function(a){return __escapeString(a)};DOMNode.prototype.__unescapeString=function(a){return __unescapeString(a)};
DOMDocument=function(a){this._class=addClass(this._class,"DOMDocument");this.DOMNode=DOMNode;this.DOMNode(this);this.doctype=null;this.implementation=a;this.documentElement=null;this.all=[];this.nodeName="#document";this.nodeType=DOMNode.DOCUMENT_NODE;this._lastId=this._id=0;this._parseComplete=!1;this.ownerDocument=this;this._performingImportNodeOperation=!1};DOMDocument.prototype=new DOMNode;DOMDocument.prototype.getDoctype=function(){return this.doctype};
DOMDocument.prototype.getImplementation=function(){return this.implementation};DOMDocument.prototype.getDocumentElement=function(){return this.documentElement};DOMDocument.prototype.createElement=function(a){if(this.ownerDocument.implementation.errorChecking&&!this.ownerDocument.implementation._isValidName(a))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);var b=new DOMElement(this);b.tagName=a;b.nodeName=a;return this.all[this.all.length]=b};
DOMDocument.prototype.createDocumentFragment=function(){return new DOMDocumentFragment(this)};DOMDocument.prototype.createTextNode=function(a){var b=new DOMText(this);b.data=a;b.nodeValue=a;b.length=a.length;return b};DOMDocument.prototype.createComment=function(a){var b=new DOMComment(this);b.data=a;b.nodeValue=a;b.length=a.length;return b};DOMDocument.prototype.createCDATASection=function(a){var b=new DOMCDATASection(this);b.data=a;b.nodeValue=a;b.length=a.length;return b};
DOMDocument.prototype.createProcessingInstruction=function(a,b){if(this.ownerDocument.implementation.errorChecking&&!this.implementation._isValidName(a))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);var c=new DOMProcessingInstruction(this);c.target=a;c.nodeName=a;c.data=b;c.nodeValue=b;c.length=b.length;return c};
DOMDocument.prototype.createAttribute=function(a){if(this.ownerDocument.implementation.errorChecking&&!this.ownerDocument.implementation._isValidName(a))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);var b=new DOMAttr(this);b.name=a;b.nodeName=a;return b};
DOMDocument.prototype.createElementNS=function(a,b){if(this.ownerDocument.implementation.errorChecking){if(!this.ownerDocument._isValidNamespace(a,b))throw new DOMException(DOMException.NAMESPACE_ERR);if(!this.ownerDocument.implementation._isValidName(b))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);}var c=new DOMElement(this),d=this.implementation._parseQName(b);c.nodeName=b;c.namespaceURI=a;c.prefix=d.prefix;c.localName=d.localName;c.tagName=b;return this.all[this.all.length]=c};
DOMDocument.prototype.createAttributeNS=function(a,b){if(this.ownerDocument.implementation.errorChecking){if(!this.ownerDocument._isValidNamespace(a,b,!0))throw new DOMException(DOMException.NAMESPACE_ERR);if(!this.ownerDocument.implementation._isValidName(b))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);}var c=new DOMAttr(this),d=this.implementation._parseQName(b);c.nodeName=b;c.namespaceURI=a;c.prefix=d.prefix;c.localName=d.localName;c.name=b;c.nodeValue="";return c};
DOMDocument.prototype.createNamespace=function(a){var b=new DOMNamespace(this),c=this.implementation._parseQName(a);b.nodeName=a;b.prefix=c.prefix;b.localName=c.localName;b.name=a;b.nodeValue="";return b};DOMDocument.prototype.getElementById=function(a){retNode=null;for(var b=0;b<this.all.length;b++){var c=this.all[b];if(c.id==a&&c._isAncestor(c.ownerDocument.documentElement)){retNode=c;break}}return retNode};DOMDocument.prototype._genId=function(){return this._lastId+=1};
DOMDocument.prototype._isValidNamespace=function(a,b,c){if(1==this._performingImportNodeOperation)return!0;var d=!0;b=this.implementation._parseQName(b);1==this._parseComplete&&(-1<b.localName.indexOf(":")&&(d=!1),d&&!c&&(a||(d=!1)),d&&""==b.prefix&&(d=!1));d&&"xml"===b.prefix&&"http://www.w3.org/XML/1998/namespace"!==a&&"base"!==b.localName&&(d=!1);return d};DOMDocument.prototype.toString=function(){return""+this.childNodes};
DOMElement=function(a){this._class=addClass(this._class,"DOMElement");this.DOMNode=DOMNode;this.DOMNode(a);this.id=this.tagName="";this.nodeType=DOMNode.ELEMENT_NODE};DOMElement.prototype=new DOMNode;DOMElement.prototype.getTagName=function(){return this.tagName};DOMElement.prototype.getAttribute=function(a){var b="";if(a=this.attributes.getNamedItem(a))b=a.value;return b};
DOMElement.prototype.setAttribute=function(a,b){var c=this.attributes.getNamedItem(a);c||(c=this.ownerDocument.createAttribute(a));b=new String(b);if(this.ownerDocument.implementation.errorChecking){if(c._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(!this.ownerDocument.implementation._isValidString(b))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);}this.ownerDocument.implementation._isIdDeclaration(a)&&(this.id=b);c.value=b;c.nodeValue=b;c.specified=0<b.length?
!0:!1;this.attributes.setNamedItem(c)};DOMElement.prototype.removeAttribute=function(a){return this.attributes.removeNamedItem(a)};DOMElement.prototype.getAttributeNode=function(a){return this.attributes.getNamedItem(a)};DOMElement.prototype.setAttributeNode=function(a){this.ownerDocument.implementation._isIdDeclaration(a.name)&&(this.id=a.value);return this.attributes.setNamedItem(a)};
DOMElement.prototype.removeAttributeNode=function(a){if(this.ownerDocument.implementation.errorChecking&&a._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);a=this.attributes._findItemIndex(a._id);if(this.ownerDocument.implementation.errorChecking&&0>a)throw new DOMException(DOMException.NOT_FOUND_ERR);return this.attributes._removeChild(a)};DOMElement.prototype.getAttributeNS=function(a,b){var c="",d=this.attributes.getNamedItemNS(a,b);d&&(c=d.value);return c};
DOMElement.prototype.setAttributeNS=function(a,b,c){var d=this.attributes.getNamedItem(a,b);d||(d=this.ownerDocument.createAttributeNS(a,b));c=new String(c);if(this.ownerDocument.implementation.errorChecking){if(d._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(!this.ownerDocument._isValidNamespace(a,b))throw new DOMException(DOMException.NAMESPACE_ERR);if(!this.ownerDocument.implementation._isValidString(c))throw new DOMException(DOMException.INVALID_CHARACTER_ERR);
}this.ownerDocument.implementation._isIdDeclaration(name)&&(this.id=c);d.value=c;d.nodeValue=c;d.specified=0<c.length?!0:!1;this.attributes.setNamedItemNS(d)};DOMElement.prototype.removeAttributeNS=function(a,b){return this.attributes.removeNamedItemNS(a,b)};DOMElement.prototype.getAttributeNodeNS=function(a,b){return this.attributes.getNamedItemNS(a,b)};
DOMElement.prototype.setAttributeNodeNS=function(a){""==a.prefix&&this.ownerDocument.implementation._isIdDeclaration(a.name)&&(this.id=a.value);return this.attributes.setNamedItemNS(a)};DOMElement.prototype.hasAttribute=function(a){return this.attributes._hasAttribute(a)};DOMElement.prototype.hasAttributeNS=function(a,b){return this.attributes._hasAttributeNS(a,b)};
DOMElement.prototype.toString=function(){var a=this._namespaces.toString();0<a.length&&(a=" "+a);var b=this.attributes.toString();0<b.length&&(b=" "+b);a=""+("<"+this.nodeName+a+b+">");a+=this.childNodes.toString();return a+="</"+this.nodeName+">"};DOMAttr=function(a){this._class=addClass(this._class,"DOMAttr");this.DOMNode=DOMNode;this.DOMNode(a);this.name="";this.specified=!1;this.value="";this.nodeType=DOMNode.ATTRIBUTE_NODE;this.attributes=this.childNodes=this.ownerElement=null};
DOMAttr.prototype=new DOMNode;DOMAttr.prototype.getName=function(){return this.nodeName};DOMAttr.prototype.getSpecified=function(){return this.specified};DOMAttr.prototype.getValue=function(){return this.nodeValue};DOMAttr.prototype.setValue=function(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this.setNodeValue(a)};
DOMAttr.prototype.setNodeValue=function(a){this.value=this.nodeValue=new String(a);this.specified=0<this.value.length};DOMAttr.prototype.toString=function(){return""+(this.nodeName+'="'+this.__escapeString(this.nodeValue)+'"')};DOMAttr.prototype.getOwnerElement=function(){return this.ownerElement};DOMNamespace=function(a){this._class=addClass(this._class,"DOMNamespace");this.DOMNode=DOMNode;this.DOMNode(a);this.name="";this.specified=!1;this.value="";this.nodeType=DOMNode.NAMESPACE_NODE};
DOMNamespace.prototype=new DOMNode;DOMNamespace.prototype.getValue=function(){return this.nodeValue};DOMNamespace.prototype.setValue=function(a){this.value=this.nodeValue=new String(a)};DOMNamespace.prototype.toString=function(){var a="";return a=""!=this.nodeName?a+(this.nodeName+'="'+this.__escapeString(this.nodeValue)+'"'):a+('xmlns="'+this.__escapeString(this.nodeValue)+'"')};
DOMCharacterData=function(a){this._class=addClass(this._class,"DOMCharacterData");this.DOMNode=DOMNode;this.DOMNode(a);this.data="";this.length=0};DOMCharacterData.prototype=new DOMNode;DOMCharacterData.prototype.getData=function(){return this.nodeValue};DOMCharacterData.prototype.setData=function(a){this.setNodeValue(a)};
DOMCharacterData.prototype.setNodeValue=function(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this.data=this.nodeValue=new String(a);this.length=this.nodeValue.length};DOMCharacterData.prototype.getLength=function(){return this.nodeValue.length};
DOMCharacterData.prototype.substringData=function(a,b){var c=null;if(this.data){if(this.ownerDocument.implementation.errorChecking&&(0>a||a>this.data.length||0>b))throw new DOMException(DOMException.INDEX_SIZE_ERR);c=b?this.data.substring(a,a+b):this.data.substring(a)}return c};DOMCharacterData.prototype.appendData=function(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this.setData(""+this.data+a)};
DOMCharacterData.prototype.insertData=function(a,b){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.data){if(this.ownerDocument.implementation.errorChecking&&(0>a||a>this.data.length))throw new DOMException(DOMException.INDEX_SIZE_ERR);this.setData(this.data.substring(0,a).concat(b,this.data.substring(a)))}else{if(this.ownerDocument.implementation.errorChecking&&0!=a)throw new DOMException(DOMException.INDEX_SIZE_ERR);
this.setData(b)}};DOMCharacterData.prototype.deleteData=function(a,b){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.data){if(this.ownerDocument.implementation.errorChecking&&(0>a||a>this.data.length||0>b))throw new DOMException(DOMException.INDEX_SIZE_ERR);!b||a+b>this.data.length?this.setData(this.data.substring(0,a)):this.setData(this.data.substring(0,a).concat(this.data.substring(a+b)))}};
DOMCharacterData.prototype.replaceData=function(a,b,c){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(this.data){if(this.ownerDocument.implementation.errorChecking&&(0>a||a>this.data.length||0>b))throw new DOMException(DOMException.INDEX_SIZE_ERR);this.setData(this.data.substring(0,a).concat(c,this.data.substring(a+b)))}else this.setData(c)};
DOMText=function(a){this._class=addClass(this._class,"DOMText");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#text";this.nodeType=DOMNode.TEXT_NODE};DOMText.prototype=new DOMCharacterData;
DOMText.prototype.splitText=function(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(0>a||a>this.data.length)throw new DOMException(DOMException.INDEX_SIZE_ERR);}if(this.parentNode){var b=this.substringData(a);b=this.ownerDocument.createTextNode(b);this.nextSibling?this.parentNode.insertBefore(b,this.nextSibling):this.parentNode.appendChild(b);this.deleteData(a)}return b};
DOMText.prototype.toString=function(){return this.__escapeString(""+this.nodeValue)};DOMCDATASection=function(a){this._class=addClass(this._class,"DOMCDATASection");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#cdata-section";this.nodeType=DOMNode.CDATA_SECTION_NODE};DOMCDATASection.prototype=new DOMCharacterData;
DOMCDATASection.prototype.splitText=function(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);if(0>a||a>this.data.length)throw new DOMException(DOMException.INDEX_SIZE_ERR);}if(this.parentNode){var b=this.substringData(a);b=this.ownerDocument.createCDATASection(b);this.nextSibling?this.parentNode.insertBefore(b,this.nextSibling):this.parentNode.appendChild(b);this.deleteData(a)}return b};
DOMCDATASection.prototype.toString=function(){return""+("<![CDATA["+this.nodeValue+"]]\x3e")};DOMComment=function(a){this._class=addClass(this._class,"DOMComment");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#comment";this.nodeType=DOMNode.COMMENT_NODE};DOMComment.prototype=new DOMCharacterData;DOMComment.prototype.toString=function(){return""+("\x3c!--"+this.nodeValue+"--\x3e")};
DOMProcessingInstruction=function(a){this._class=addClass(this._class,"DOMProcessingInstruction");this.DOMNode=DOMNode;this.DOMNode(a);this.data=this.target="";this.nodeType=DOMNode.PROCESSING_INSTRUCTION_NODE};DOMProcessingInstruction.prototype=new DOMNode;DOMProcessingInstruction.prototype.getTarget=function(){return this.nodeName};DOMProcessingInstruction.prototype.getData=function(){return this.nodeValue};DOMProcessingInstruction.prototype.setData=function(a){this.setNodeValue(a)};
DOMProcessingInstruction.prototype.setNodeValue=function(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly)throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR);this.data=this.nodeValue=new String(a)};DOMProcessingInstruction.prototype.toString=function(){return""+("<?"+this.nodeName+" "+this.nodeValue+" ?>")};
DOMDocumentFragment=function(a){this._class=addClass(this._class,"DOMDocumentFragment");this.DOMNode=DOMNode;this.DOMNode(a);this.nodeName="#document-fragment";this.nodeType=DOMNode.DOCUMENT_FRAGMENT_NODE};DOMDocumentFragment.prototype=new DOMNode;DOMDocumentFragment.prototype.toString=function(){var a="",b=this.getChildNodes().getLength();for(intLoop=0;intLoop<b;intLoop++)a+=this.getChildNodes().item(intLoop).toString();return a};DOMDocumentType=function(){alert("DOMDocumentType.constructor(): Not Implemented")};
DOMEntity=function(){alert("DOMEntity.constructor(): Not Implemented")};DOMEntityReference=function(){alert("DOMEntityReference.constructor(): Not Implemented")};DOMNotation=function(){alert("DOMNotation.constructor(): Not Implemented")};
Strings={WHITESPACE:" \t\n\r",QUOTES:"\"'",isEmpty:function(a){return null==a||0==a.length},indexOfNonWhitespace:function(a,b,c){if(Strings.isEmpty(a))return-1;c=c||a.length;for(b=b||0;b<c;b++)if(-1==Strings.WHITESPACE.indexOf(a.charAt(b)))return b;return-1},lastIndexOfNonWhitespace:function(a,b,c){if(Strings.isEmpty(a))return-1;b=b||0;c=c||a.length;for(--c;c>=b;c--)if(-1==Strings.WHITESPACE.indexOf(a.charAt(c)))return c;return-1},indexOfWhitespace:function(a,b,c){if(Strings.isEmpty(a))return-1;c=
c||a.length;for(b=b||0;b<c;b++)if(-1!=Strings.WHITESPACE.indexOf(a.charAt(b)))return b;return-1},replace:function(a,b,c,d,f){if(Strings.isEmpty(a))return"";c=c||a.length;return a.substring(b||0,c).split(d).join(f)},getLineNumber:function(a,b){if(Strings.isEmpty(a))return-1;b=b||a.length;return a.substring(0,b).split("\n").length},getColumnNumber:function(a,b){if(Strings.isEmpty(a))return-1;b=b||a.length;var c=a.substring(0,b).split("\n");c.length--;c=c.join("\n").length;return b-c}};
StringBuffer=function(){this._a=[]};StringBuffer.prototype.append=function(a){this._a[this._a.length]=a};StringBuffer.prototype.toString=function(){return this._a.join("")};
var SafeHtmlUtils={AMP_RE:new RegExp(/&/g),GT_RE:new RegExp(/>/g),LT_RE:new RegExp(/</g),SQUOT_RE:new RegExp(/'/g),QUOT_RE:new RegExp(/"/g),htmlEscape:function(a){-1!==a.indexOf("&")&&(a=a.replace(SafeHtmlUtils.AMP_RE,"&amp;"));-1!==a.indexOf("<")&&(a=a.replace(SafeHtmlUtils.LT_RE,"&lt;"));-1!==a.indexOf(">")&&(a=a.replace(SafeHtmlUtils.GT_RE,"&gt;"));-1!==a.indexOf('"')&&(a=a.replace(SafeHtmlUtils.QUOT_RE,"&quot;"));-1!==a.indexOf("'")&&(a=a.replace(SafeHtmlUtils.SQUOT_RE,"&#39;"));return a}};
function XMLViewer(a){this.latestError=this.xml=null;this.cssPrefix=a.cssPrefix||"";var b=new DOMImplementation;b.errorChecking=!1;try{this.xml=b.loadXML(a.xml)}catch(c){throw Error(b.translateErrCode(c.code));}}
XMLViewer.prototype={getHTML:function(){var a=this.xml.childNodes,b=a.length;if(0===b)return"no xml";for(var c='<div class="'+this.cssPrefix+'prettyPrint" data-expanded="true">',d=0;d<b;d++)c+=this.parse(a.item(d));return c+"</div>"},parse:function(a){var b="";switch(a.nodeType){case 1:b+=this._parseElement(a);break;case 3:a=a.nodeValue;a=SafeHtmlUtils.htmlEscape(a);if(""===a)return"";b+=this._parseValue(a);break;case 4:b+='<span colapse-marker="true" class="'+this.cssPrefix+'"><iron-icon more icon="arc:expand-more" class="'+
this.cssPrefix+'"></iron-icon><iron-icon less icon="arc:expand-less" class="'+this.cssPrefix+'"></iron-icon></span>';b+='<span class="'+this.cssPrefix+'cdata">&lt;![CDATA[</span>';b+='<div collapsible class="'+this.cssPrefix+'">';b+=SafeHtmlUtils.htmlEscape(a.nodeValue);b+='</div><span class="'+this.cssPrefix+'cdata">]]&gt;</span>';break;case 7:b+='<div class="'+this.cssPrefix+'processing">&lt;?xml '+a.nodeValue+" ?&gt;</div>";break;case 8:b+='<div class="'+this.cssPrefix+'comment">&lt;--',b+=a.nodeValue,
b+="--&gt</div>"}return b='<div class="'+this.cssPrefix+'node">'+b+"</div>"},_parseValue:function(a){a=a.trim();var b="value";isNaN(a)?"true"===a||"false"===a?b+=" boolean":"null"===a&&(b+=" null"):b+=" number";return a='<span class="'+this.cssPrefix+b+'">'+a+"</span>"},_parseElement:function(a){var b=a.childNodes.length,c="",d=!1;if(1<b||this._childIsCDATA(a))c+='<span colapse-marker="true" class="'+this.cssPrefix+'"><iron-icon more icon="arc:expand-more" class="'+this.cssPrefix+'"></iron-icon><iron-icon less icon="arc:expand-less" class="'+
this.cssPrefix+'"></iron-icon></span>',d=!0;c+='<span class="'+this.cssPrefix+'punctuation">&lt;</span>';c+='<span class="'+this.cssPrefix+'tagname">'+a.nodeName+"</span>";c+=this.parseAttributes(a);if(0<b){var f=a.childNodes,c=c+('<span class="'+this.cssPrefix+'punctuation">&gt;</span>'),e=!1;1===b&&3===f.item(0).getNodeType()&&(e=!0);e?c+='<div class="'+this.cssPrefix+'inline">':(c+='<div collapse-indicator colapse-marker="true" class="'+this.cssPrefix+'collapseIndicator">...</div>',c+='<div collapsible class="'+
this.cssPrefix+'nodeMargin">');for(e=0;e<b;e++)c+=this.parse(f.item(e));c+="</div>";d&&(c+='<span arrowEmpty class="'+this.cssPrefix+'arrowEmpty">&nbsp;</span>');c+='<span class="'+this.cssPrefix+'punctuation end">&lt;/</span>';c+='<span class="'+this.cssPrefix+'tagname end">'+a.nodeName+"</span>";c+='<span class="'+this.cssPrefix+'punctuation">&gt;</span>'}else c+='<span class="'+this.cssPrefix+'punctuation"> /&gt;</span>';return c},_childIsCDATA:function(a){return a.firstChild instanceof DOMCDATASection?
!0:!1},parseAttributes:function(a){var b="";a=a.attributes;if(null!==a&&0<a.length)for(var c=0;c<a.length;c++)b+=" "+this.getAttributesString(a.item(c));return b},getAttributesString:function(a){var b='<span class="'+this.cssPrefix+'attname">',c=a.getName(),c=SafeHtmlUtils.htmlEscape(c),b=b+c+"</span>"+('<span class="'+this.cssPrefix+'punctuation">=</span>'),b=b+('<span class="'+this.cssPrefix+'attribute">&quot;');a=a.getValue();a=SafeHtmlUtils.htmlEscape(a);b+=a;return b+="&quot;</span>"},urlify:function(a){return a.replace(/([^"\s&;]*:\/\/[^"\s]*)(&quot;)?/gim,
'<a class="'+this.cssPrefix+'" response-anchor href="$1">$1</a>')}};self.onmessage=function(a){a=a.data;var b="";try{b=(new XMLViewer(a)).getHTML()}catch(c){throw Error(c.message);}self.postMessage(b)};
    </script>
    <div class$="[[_computeActionsPanelClass(showOutput)]]">
      <content select="[content-action]"></content>
    </div>
    <paper-spinner active="[[working]]"></paper-spinner>
    <error-message hidden$="[[!isError]]">
      <p>There was an error parsing XML data</p>
      <p>[[errorMessage]]</p>
    </error-message>
    <output id="output" hidden$="[[!showOutput]]" on-tap="_handleDisplayClick"></output>
  </template>
  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'xml-viewer',
      properties: {
        /**
         * XML data to parse and display
         */
        xml: {
          type: Object,
          observer: '_changed'
        },
        /**
         * True if error ocurred when parsing data
         */
        isError: {
          type: Boolean,
          readOnly: true,
          value: false,
          notify: true
        },
        /**
         * True when XML is parsing
         */
        working: {
          type: Boolean,
          readOnly: true,
          value: false,
          notify: true
        },
        /**
         * True when output should be shown.
         */
        showOutput: {
          type: Boolean,
          readOnly: true,
          value: false,
          computed: '_computeShowOutput(working, isError, xml)'
        },
        /**
         * An error message to display.
         */
        errorMessage: {
          type: String,
          readOnly: true
        },
        // A reference to the web worker object.
        _worker: Object,
        // function to be called when worker data are received
        _workerDataHandler: {
          type: Function,
          value: function() {
            return this._workerData.bind(this);
          }
        },
        // function to be called when worker error data are received
        _workerErrorHandler: {
          type: Function,
          value: function() {
            return this._workerError.bind(this);
          }
        },

        // An element that should be searched for text.
        _textSearch: {
          type: HTMLElement,
          value: function() {
            return this.$.output;
          }
        },
        /**
         * If set it will highlight each occurance of the query in the
         * XML viewer.
         */
        query: {
          type: String,
          observer: '_queryChanged'
        }
      },

      behaviors: [
        ArcBehaviors.TextSearchBehavior
      ],

      detached: function() {
        if (this._worker) {
          this._worker.removeEventListener('message', this._workerDataHandler);
          this._worker.removeEventListener('error', this._workerErrorHandler);
          this._worker = undefined;
          // Created URL via URL.createObjectURL will be cleaned by the browser.
        }
      },

      _changed: function() {
        if (!this.xml) {
          return;
        }
        this._setWorking(true);
        this._setIsError(false);
        this._setErrorMessage(null);
        this.$.output.innerText = '';

        if (!this._worker) {
          var blob = new Blob([this.$.worker.textContent]);
          var workerUrl = window.URL.createObjectURL(blob);
          var worker = new Worker(workerUrl);
          worker.addEventListener('message', this._workerDataHandler);
          worker.addEventListener('error', this._workerErrorHandler);
          this._worker = worker;
        }
        this._worker.postMessage({
          xml: this.xml,
          cssPrefix: this.nodeName.toLowerCase() + ' style-scope '
        });
      },

      _workerData: function(e) {
        this._setWorking(false);
        this.$.output.innerHTML = e.data;
      },

      _workerError: function(e) {
        this._setIsError(true);
        this._setWorking(false);
        var err = e.message.replace('Uncaught Error: ', '');
        if (err) {
          this._setErrorMessage(err);
        }
      },

      _computeShowOutput: function(working, isError, xml) {
        return !working && !isError && !!xml;
      },

      _handleDisplayClick: function(e) {
        if (!e.target) {
          return;
        }
        var target = e.target;
        if (!target.getAttribute('colapse-marker')) {
          target = target.parentNode;
          if (!target || !target.getAttribute('colapse-marker')) {
            return;
          }
        }
        target = target.parentNode;
        var expanded = target.dataset.expanded;
        if (!expanded || expanded === 'true') {
          target.dataset.expanded = 'false';
        } else {
          target.dataset.expanded = 'true';
        }
      },

      _queryChanged: function(query) {
        if (!query) {
          this.cleanMarked();
          return;
        }
        this.mark(query);
      },

      // Computes CSS class for the content actions pane.
      _computeActionsPanelClass: function(showOutput) {
        var clazz = 'actions-panel';
        if (!showOutput) {
          clazz += ' hidden';
        }
        return clazz;
      }
    });
  })();
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--

-->
<dom-module id="js-max-number-error" assetpath="bower_components/json-viewer/">
  <template>
    <style>
      :host {
        display: inline-block;
        vertical-align: text-bottom;
      }
      .parsed-value ::content > * {
        color: #D32F2F;
        font-weight: 500;
      }
      .content {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        color: #D32F2F;
        font-weight: 500;
        cursor: pointer;
      }

      iron-icon {
        height: 18px;
        width: 18px;
        margin-right: 8px;
      }

      #collapse {
        white-space: initial;
        @apply(--paper-font-body2);
        color: rgba(0, 0, 0, 0.74);
      }

      p {
        margin: 0;
      }

      .message {
        padding: 12px;
        background-color: #FFECB3;
        margin: 12px 24px;
      }

      .expected {
        font-weight: 700;
      }
    </style>
    <div class="content" on-tap="toggle">
      <iron-icon icon="arc:info"></iron-icon>
      <div class="parsed-value">
        <content></content>
      </div>
    </div>
    <iron-collapse id="collapse">
      <div class="message">
        <p>The number used in the response is unsafe in JavaScript environment and therefore as a JSON value.</p>
        <p>Original value for the number (represented as string) is <span class="expected">"[[expectedNumber]]"</span></p>
        <p>This number will not work in web environment and should be passed as a string, not a number.</p>
        <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank">Read more about numbers in JavaScript</a>.</p>
      </div>
    </iron-collapse>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'js-max-number-error',
      properties: {
        // A number that is expected to be true.
        expectedNumber: {
          type: String,
          value: '[unknown]'
        }
      },
      // Toggles the collapse element.
      toggle: function() {
        this.$.collapse.toggle();
      }
    });
  })();
  </script>
</dom-module>
<!--
`<json-viewer>` A JSON payload viewer for the JSON response.

This element uses a web worker to process the JSON data.
To simplify our lives and app build process the worker script is embeded in the
imported template body. It will extract worker data from it and create the
worker. Otherwise build process would need to incude a worker script file
into set path which is not very programmer friendly.

### Example
```
<json-viewer json='{"json": "test"}'></json-viewer>
```

## Custom search
If the platform doesn't support native text search, this element implements
`ArcBehaviors.TextSearchBehavior` and exposes the `query` attribute.
Set any text to the `query` attribute and it will automatically highlight
occurance of the text.
See demo for example.

## Big numbers in JavaScript
This element marks all numbers that are above `Number.MAX_SAFE_INTEGER` value
and locates the numeric value in source json if passed json was a string or
when `raw` attribute was set. In this case it will display a warning and
explanation about use of big numbers in JavaScript.
See js-max-number-error element documentation for more information.

## Content actions
The element can render a actions pane above the code view. Action pane is to
display content actions that is relevan in context of the response displayed
below the icon buttons. It should be icon buttons or just buttons added to this
view.

Buttons need to have `content-action` property set to be included to this view.

```
<json-viewer json='{"json": "test"}'>
  <paper-icon-button content-action title="Copy content to clipboard" icon="arc:content-copy"></paper-icon-button>
</json-viewer>
```

### Styling
`<json-viewer>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--json-viewer` | Mixin applied to the element | `{}`
`--code-type-null-value-color` | Color of the null value. | `#708`
`--code-type-boolean-value-color` | Color of the boolean value | `#708`
`--code-punctuation-value-color` | Punctuation color. | `black`
`--code-type-number-value-color` | Color of the numeric value | `blue`
`--code-type-text-value-color` | Color of the string value. | `#48A`
`--code-array-index-color` | Color of the array counter. | `rgb(119, 119, 119)`
`--code-type-link-color` | Color of link inserted into the viewer. | `#1976d2`

@group UI Elements
@element json-viewer
@demo demo/index.html
-->
<dom-module id="json-viewer" assetpath="bower_components/json-viewer/">
  <template>
    <style>
     :host {
      display: block;
      font-family: monospace;
      font-size: 10pt;
      color: black;
      cursor: text;
      -webkit-user-select: text;
      @apply(--json-viewer);
    }

    .prettyPrint {
      padding: 8px;
    }

    .stringValue {
      white-space: normal;
    }

    .brace {
      display: inline-block;
    }

    .numeric {
      color: var(--code-type-number-value-color, blue);
    }

    .nullValue {
      color: var(--code-type-null-value-color, #708);
    }

    .booleanValue {
      color: var(--code-type-boolean-value-color, #708);
    }

    .punctuation {
      color: var(--code-punctuation-value-color, black);
    }

    .stringValue {
      color: var(--code-type-text-value-color, #48A);
    }

    .node {
      position: relative;
      white-space: nowrap;
      margin-bottom: 4px;
      word-wrap: break-word;
    }

    .array-counter {
      color: gray;
      font-size: 11px;
    }

    .array-counter::before {
      content: "Array[" attr(count) "]";
      user-select: none;
      pointer-events: none;
    }

    *[data-expanded="false"] > .array-counter::before {
      content: "Array[" attr(count) "] ...";
      user-select: none;
      pointer-events: none;
    }

    .array-key-number::before {
      content: "" attr(index) ":";
      user-select: none;
      pointer-events: none;
    }

    .key-name {
      color: var(--code-type-text-value-color, #48A);
    }

    .rootElementToggleButton {
      position: absolute;
      top: 0;
      left: -9px;
      font-size: 14px;
      cursor: pointer;
      font-weight: bold;
      user-select: none;
    }

    .rootElementToggleButton::after {
      content: "-";
    }

    .array-key-number {
      color: var(--code-array-index-color, rgb(119, 119, 119));
    }

    .info-row {
      display: none;
      margin: 0 8px;
      text-indent: 0;
    }

    div[data-expanded="false"] div[collapse-indicator] {
      display: inline-block !important;
    }

    div[data-expanded="false"] div[data-element] {
      display: none !important;
    }

    .arc-search-mark.selected {
      background-color: #ff9632;
    }

    div[data-expanded="false"] .punctuation.hidden {
      opacity: 0;
    }

    .hidden {
      color: rgba(0, 0, 0, 0.24);
    }

    a[response-anchor] {
      color: var(--code-type-link-color, #1976d2);
    }

    paper-spinner:not([active]) {
      display: none;
    }

    .actions-panel {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-raw-viewer-action-bar);
    }

    .actions-panel.hidden {
      display: none;
    }
    </style>
    <paper-spinner active="[[working]]"></paper-spinner>
    <div class="error" hidden$="[[!isError]]">
      <p>There was an error parsing JSON data</p>
    </div>
    <div class$="[[_computeActionsPanelClass(showOutput)]]">
      <content select="[content-action]"></content>
    </div>
    <output id="output" hidden$="[[!showOutput]]" on-tap="_handleDisplayClick"></output>
    <script id="jsonWorker" type="text/js-worker">
    var SafeHtmlUtils = {
      AMP_RE: new RegExp(/&/g),
      GT_RE: new RegExp(/>/g),
      LT_RE: new RegExp(/</g),
      SQUOT_RE: new RegExp(/'/g),
      QUOT_RE: new RegExp(/"/g),

      htmlEscape: function(s) {
        if (s.indexOf('&') !== -1) {
          s = s.replace(SafeHtmlUtils.AMP_RE, '&amp;');
        }
        if (s.indexOf('<') !== -1) {
          s = s.replace(SafeHtmlUtils.LT_RE, '&lt;');
        }
        if (s.indexOf('>') !== -1) {
          s = s.replace(SafeHtmlUtils.GT_RE, '&gt;');
        }
        if (s.indexOf('"') !== -1) {
          s = s.replace(SafeHtmlUtils.QUOT_RE, '&quot;');
        }
        if (s.indexOf('\'') !== -1) {
          s = s.replace(SafeHtmlUtils.SQUOT_RE, '&#39;');
        }
        return s;
      }
    };

    function JSONViewer(data) {
      var jsonData = data.json;
      this.rawData = data.raw || '';
      this.cssPrefix = data.cssPrefix || '';
      this.debug = data.debug || false;
      this._numberIndexes = {}; // Regexp number indexes
      this.jsonValue = null;
      this.latestError = null;
      this.elementsCounter = 0;
      if (typeof jsonData === 'string') {
        try {
          this.jsonValue = JSON.parse(jsonData);
          if (!this.rawData) {
            this.rawData = jsonData;
          }
        } catch (e) {
          this.latestError = e.message;
        }
      } else {
        this.jsonValue = jsonData;
      }
    }
    /**
     * Uses the performance API to mark an event.
     */
    JSONViewer.prototype.mark = function(title) {
      // I hate you IE! <\3
      if (!this.debug) {
        return;
      }
      if (!(performance in self)) {
        return;
      }
      performance.mark(title);
    };
    /**
     * Creates a list of measurements performed during the HTML generation.
     */
    JSONViewer.prototype.getMeasurements = function() {
      if (!this.debug) {
        return;
      }
      if (!(performance in self)) {
        return;
      }
      performance.measure('get-html', 'get-html-start', 'get-html-end');
      var items = performance.getEntriesByType('mark');
      items.forEach(function(mark) {
        if (~mark.name.indexOf('parse-start-')) {
          var id = mark.name.substr(12);
          performance.measure('parse-' + id, 'parse-start-' + id, 'parse-start-' + id);
        }
      });
      var items = performance.getEntriesByType('measure');
      var result = items.map(function(measure) {
        return {
          duration: measure.duration,
          name: measure.name,
          startTime: measure.startTime
        }
      });
      return {
        items: result
      };
    };
    /**
     * Get created HTML content.
     */
    JSONViewer.prototype.getHTML = function() {
      this.mark('get-html-start');
      var parsedData = '<div class="' + this.cssPrefix + 'prettyPrint">';
      parsedData += this.parse(this.jsonValue);
      parsedData += '</div>';
      this.mark('get-html-end');
      return parsedData;
    };
    /**
     * Parse JSON data
     */
    JSONViewer.prototype.parse = function(data, opts) {
      opts = opts || {};
      this.__parseCallCounter = this.__parseCallCounter || 0;
      this.__parseCallCounter++;
      this.mark('parse-start-' + this.__parseCallCounter);
      var result = '';
      if (data === null) {
        result += this.parseNullValue();
      } else if (typeof data === 'number') {
        result += this.parseNumericValue(data);
      } else if (typeof data === 'boolean') {
        result += this.parseBooleanValue(data);
      } else if (typeof data === 'string') {
        result += this.parseStringValue(data);
      } else if (data instanceof Array) {
        result += this.parseArray(data);
      } else {
        result += this.parseObject(data);
      }
      if (opts.hasNextSibling && !opts.holdComa) {
        result += '<span class="' + this.cssPrefix + 'punctuation hidden">,</span>';
      }
      this.mark('parse-end-' + this.__parseCallCounter);
      return result;
    };

    JSONViewer.prototype.parseNullValue = function() {
      var result = '';
      result += '<span class="' + this.cssPrefix + 'nullValue">';
      result += 'null';
      result += '</span>';
      return result;
    };

    JSONViewer.prototype.parseNumericValue = function(number) {
      var expectedNumber;
      if (number > 9007199254740991) { // IE doesn't support Number.MAX_SAFE_INTEGER
        var comp = String(number);
        comp = comp.substr(0, 16);
        var r = new RegExp(comp + '(\\d+),?', 'gim');
        if (comp in this._numberIndexes) {
          r.lastIndex = this._numberIndexes[comp];
        }
        var _result = r.exec(this.rawData);
        if (_result) {
          this._numberIndexes[comp] = _result.index;
          expectedNumber = comp + _result[1];
        }
      }

      var result = '';
      result += '<span class="' + this.cssPrefix + 'numeric">';
      if (expectedNumber) {
        result += '<js-max-number-error class="' + this.cssPrefix +
          'number-error" expected-number="' + expectedNumber + '">';
      }
      result += number + '';
      if (expectedNumber) {
        result += '</js-max-number-error>';
      }
      result += '</span>';
      return result;
    };

    JSONViewer.prototype.parseBooleanValue = function(bool) {
      var result = '';
      result += '<span class="' + this.cssPrefix + 'booleanValue">';
      if (bool !== null && bool !== undefined) {
        result += bool + '';
      } else {
        result += 'null';
      }
      result += '</span>';
      return result;
    };

    JSONViewer.prototype.parseStringValue = function(str) {
      var result = '';
      var value = str || '';
      if (value !== null && value !== undefined) {
        value = SafeHtmlUtils.htmlEscape(value);
        if (value.slice(0, 1) === '/' || value.substr(0, 4) === 'http') {
          value = '<a class="' + this.cssPrefix + '" title="Click to insert into URL field" ' +
            'response-anchor add-root-url href="' + value + '">' + value + '</a>';
        }
      } else {
        value = 'null';
      }
      result += '&quot;';
      result += '<span class="' + this.cssPrefix + 'stringValue">';
      result += value;
      result += '</span>';
      result += '&quot;';
      return result;
    };

    JSONViewer.prototype.parseObject = function(object) {
      var result = '';
      result += '{';
      result += '<div collapse-indicator class="' + this.cssPrefix + 'info-row">...</div>';
      Object.getOwnPropertyNames(object)
      .forEach(function(key, i, arr) {
        var value = object[key];
        var lastSibling = (i + 1) === arr.length;
        var parseOpts = {
          hasNextSibling: !lastSibling
        };
        if (value instanceof Array) {
          parseOpts.holdComa = true;
        }
        var elementNo = this.elementsCounter++;
        var data = this.parse(value, parseOpts);
        var hasManyChildren = this.elementsCounter - elementNo > 1;
        result += '<div data-element="' + elementNo + '" style="margin-left: 24px" class="' +
          this.cssPrefix + 'node">';
        var _nan = isNaN(key);
        if (_nan) {
          result += '&quot;';
        }
        result += this.parseKey(key);
        if (_nan) {
          result += '&quot;';
        }
        result += ': ' + data;
        if (hasManyChildren) {
          result += '<div data-toggle="' + elementNo + '" class="' + this.cssPrefix +
            'rootElementToggleButton"></div>';
        }
        result += '</div>';
      }, this);
      result += '}';
      return result;
    };

    JSONViewer.prototype.parseArray = function(array) {
      var cnt = array.length;
      var result = '';
      result += '<span class="' + this.cssPrefix + 'punctuation hidden">[</span>';
      result += '<span class="' + this.cssPrefix + 'array-counter brace punctuation" count="' +
        cnt + '"></span>';
      for (var i = 0; i < cnt; i++) {
        var elementNo = this.elementsCounter++;

        var lastSibling = (i + 1) === cnt;
        var data = this.parse(array[i], {
          hasNextSibling: !lastSibling
        });
        var hasManyChildren = this.elementsCounter - elementNo > 1;
        result += '<div data-element="' + elementNo +
          '" style="margin-left: 24px" class="' + this.cssPrefix + 'node">';
        result += '<span class="' + this.cssPrefix + 'array-key-number" index="' + i +
          '"> &nbsp;</span>';
        result += data;
        if (hasManyChildren) {
          result += '<div data-toggle="' + elementNo + '" class="' + this.cssPrefix +
            'rootElementToggleButton"></div>';
        }
        result += '</div>';
      }
      result += '<span class="' + this.cssPrefix + 'punctuation hidden">],</span>';
      return result;
    };

    JSONViewer.prototype.parseKey = function(key) {
      var result = '';
      result += '<span class="' + this.cssPrefix + 'key-name">' + key + '</span>';
      return result;
    };

    self.onmessage = function(e) {
      try {
        var parser = new JSONViewer(e.data);
        if (parser.latestError !== null) {
          self.postMessage({
            message: parser.latestError,
            error: true
          });
          return;
        }
        var html = parser.getHTML();
        var result = {
          message: html,
          error: false
        };
        if (e.data.debug) {
          result.measurement = parser.getMeasurements();
        }
        self.postMessage(result);
        parser = null;
      } catch (e) {
        self.postMessage({
          message: e.message,
          error: true
        });
      }
    };
    </script>
  </template>
  <script>
  Polymer({
    is: 'json-viewer',
    /**
     * Event called when the user click on the anchor in display area.
     *
     * @event action-link-change
     * @param {String} url The URL handled by this event.
     */
    /**
     * Fired when web worker finished work and the data are displayed.
     *
     * @event json-viewer-parsed
     */
    properties: {
      /**
       * JSON data to parse and display.
       * It can be either JS object (already parsed string) or string value.
       * If the passed object is a string then JSON.parse function will be
       * used to parse string.
       */
      json: {
        type: String,
        observer: '_changed'
      },
      /**
       * If it's possible, set this property to the JSON string.
       * It will help to handle big numbers that are not parsed correctly by
       * the JSON.parse function. The parser will try to locate the number
       * in the source string and display it in the correct form.
       *
       * P.S.
       * Calling JSON.stringify on a JS won't help here :) Must be source
       * string.
       */
      raw: String,
      /**
       * True if error ocurred when parsing the `json` data.
       * An error message will be displayed.
       */
      isError: {
        type: Boolean,
        readOnly: true,
        value: false,
        notify: true
      },
      /**
       * True when JSON is beeing parsed.
       */
      working: {
        type: Boolean,
        readOnly: true,
        value: false,
        notify: true
      },
      /**
       * True when output should be shown (JSON has been parsed without errors)
       */
      showOutput: {
        type: Boolean,
        readOnly: true,
        value: false,
        computed: '_computeShowOutput(working, isError, json)'
      },
      // A reference to the web worker object.
      _worker: Object,
      // function to be called when worker data are received
      _workerDataHandler: {
        type: Function,
        value: function() {
          return this._workerData.bind(this);
        }
      },
      // function to be called when worker error data are received
      _workerErrorHandler: {
        type: Function,
        value: function() {
          return this._workerError.bind(this);
        }
      },

      // An element which should be used for text search.
      _textSearch: {
        type: HTMLElement,
        value: function() {
          return this.$.output;
        }
      },
      /**
       * If set it will highlight each occurance of the query in the
       * JSON viewer.
       */
      query: {
        type: String,
        observer: '_queryChanged'
      },
      // If true then it prints the execution time to the console.
      debug: Boolean
    },

    behaviors: [
      ArcBehaviors.TextSearchBehavior
    ],

    detached: function() {
      if (this._worker) {
        this._worker.removeEventListener('message', this._workerDataHandler);
        this._worker.removeEventListener('error', this._workerErrorHandler);
        this._worker = undefined;
        // Created URL via URL.createObjectURL will be cleaned by the browser.
      }
    },

    ready: function() {
      this._isReady = true;
      if (this.json) {
        this._changed(this.json);
      }
    },

    // Called when `json` property changed. It starts parsing the data.
    _changed: function(json) {
      if (!this._isReady) {
        return;
      }
      this._setIsError(false);
      this.$.output.innerText = '';
      if (json === undefined) {
        return;
      }
      var html;
      if (json === null) {
        html = '<div class="prettyPrint"><span class="nullValue">null';
        html += '</span></div>';
        this.$.output.innerHTML = html;
        this.$.output.removeAttribute('hidden');
        return;
      }

      if (json === false) {
        html = '<div class="prettyPrint"><span class="booleanValue">false';
        html += '</span></div>';
        this.$.output.innerHTML = html;
        this._setShowOutput(true);
        return;
      }

      this._setWorking(true);
      if (!this._worker) {
        var blob = new Blob([this.$.jsonWorker.textContent], {
          type: 'text/javascript'
        });
        var worker = new Worker(window.URL.createObjectURL(blob));
        worker.addEventListener('message', this._workerDataHandler);
        worker.addEventListener('error', this._workerErrorHandler);
        this._worker = worker;
      }
      var debug = this.debug;
      var ua = navigator.userAgent;
      if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident') !== -1) {
        debug = false; // performance API is not available in web workers in IE....
      }
      this._worker.postMessage({
        json: json,
        raw: this.raw,
        cssPrefix: this.nodeName.toLowerCase() + ' style-scope ',
        debug: debug
      });
    },
    // Called when worker data received.
    _workerData: function(e) {
      var data = e.data;
      if (data.error) {
        this._setIsError(true);
        this.$.output.innerHTML = data.message;
      } else {
        this.$.output.innerHTML = data.message;
      }
      this._setWorking(false);
      if (this.debug) {
        if (data.measurement.items && data.measurement.items.length) {
          console.groupCollapsed('JSON viewer parse measurements');
          console.table(data.measurement.items);
          console.groupEnd();
        }
      }
      this.fire('json-viewer-parsed');
    },
    // Called when workr error received.
    _workerError: function() {
      this._setIsError(true);
      this._setWorking(false);
      this.fire('json-viewer-parsed');
    },
    // Compute if output should be shown.
    _computeShowOutput: function(working, isError, json) {
      if (working) {
        return false;
      }
      if (isError) {
        return true;
      }
      return !!json && json !== null && json !== false;
    },
    // Called when the user click on the display area. It will handle view toggle and links clicks.
    _handleDisplayClick: function(e) {
      if (!e.target) {
        return;
      }

      if (e.target.nodeName === 'A') {
        e.preventDefault();
        this.fire('action-link-change', {
          url: e.target.getAttribute('href')
        });
        return;
      }
      var toggleId = e.target.dataset.toggle;
      if (!toggleId) {
        return;
      }
      var parent = Polymer.dom(this.root)
        .querySelector('div[data-element="' + toggleId + '"]');
      if (!parent) {
        return;
      }
      var expanded = parent.dataset.expanded;
      if (!expanded || expanded === 'true') {
        parent.dataset.expanded = 'false';
      } else {
        parent.dataset.expanded = 'true';
      }
    },
    /**
     * Called automatically when the `query` property change.
     * It highlights word occurence in the JSON viewer.
     *
     * This function is called automatically when the `query` property change.
     *
     * @param {String} query Current `query` value.
     */
    _queryChanged: function(query) {
      if (!query) {
        this.cleanMarked();
        return;
      }
      this.mark(query);
    },
    /**
     * Computes CSS class for the actions pane.
     *
     * @param {Boolean} showOutput The `showOutput` propety value of the element.
     * @return CSS class names for the panel depending on state of the
     * `showOutput`property.
     */
    _computeActionsPanelClass: function(showOutput) {
      var clazz = 'actions-panel';
      if (!showOutput) {
        clazz += ' hidden';
      }
      return clazz;
    }
  });
  </script>
</dom-module>
<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><!--
@license
Copyright 2016 The Advanced REST Client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
--><script data-manual="">
/* **********************************************
     Begin prism-core.js
********************************************** */

var _self = (typeof window !== 'undefined')
	? window   // if in browser
	: (
		(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)
		? self // if in worker
		: {}   // if in node js
	);

/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */

var Prism = (function(){

// Private helper vars
var lang = /\blang(?:uage)?-(\w+)\b/i;
var uniqueId = 0;

var _ = _self.Prism = {
	util: {
		encode: function (tokens) {
			if (tokens instanceof Token) {
				return new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);
			} else if (_.util.type(tokens) === 'Array') {
				return tokens.map(_.util.encode);
			} else {
				return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\u00a0/g, ' ');
			}
		},

		type: function (o) {
			return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1];
		},

		objId: function (obj) {
			if (!obj['__id']) {
				Object.defineProperty(obj, '__id', { value: ++uniqueId });
			}
			return obj['__id'];
		},

		// Deep clone a language definition (e.g. to extend it)
		clone: function (o) {
			var type = _.util.type(o);

			switch (type) {
				case 'Object':
					var clone = {};

					for (var key in o) {
						if (o.hasOwnProperty(key)) {
							clone[key] = _.util.clone(o[key]);
						}
					}

					return clone;

				case 'Array':
					// Check for existence for IE8
					return o.map && o.map(function(v) { return _.util.clone(v); });
			}

			return o;
		}
	},

	languages: {
		extend: function (id, redef) {
			var lang = _.util.clone(_.languages[id]);

			for (var key in redef) {
				lang[key] = redef[key];
			}

			return lang;
		},

		/**
		 * Insert a token before another token in a language literal
		 * As this needs to recreate the object (we cannot actually insert before keys in object literals),
		 * we cannot just provide an object, we need anobject and a key.
		 * @param inside The key (or language id) of the parent
		 * @param before The key to insert before. If not provided, the function appends instead.
		 * @param insert Object with the key/value pairs to insert
		 * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.
		 */
		insertBefore: function (inside, before, insert, root) {
			root = root || _.languages;
			var grammar = root[inside];

			if (arguments.length == 2) {
				insert = arguments[1];

				for (var newToken in insert) {
					if (insert.hasOwnProperty(newToken)) {
						grammar[newToken] = insert[newToken];
					}
				}

				return grammar;
			}

			var ret = {};

			for (var token in grammar) {

				if (grammar.hasOwnProperty(token)) {

					if (token == before) {

						for (var newToken in insert) {

							if (insert.hasOwnProperty(newToken)) {
								ret[newToken] = insert[newToken];
							}
						}
					}

					ret[token] = grammar[token];
				}
			}

			// Update references in other language definitions
			_.languages.DFS(_.languages, function(key, value) {
				if (value === root[inside] && key != inside) {
					this[key] = ret;
				}
			});

			return root[inside] = ret;
		},

		// Traverse a language definition with Depth First Search
		DFS: function(o, callback, type, visited) {
			visited = visited || {};
			for (var i in o) {
				if (o.hasOwnProperty(i)) {
					callback.call(o, i, o[i], type || i);

					if (_.util.type(o[i]) === 'Object' && !visited[_.util.objId(o[i])]) {
						visited[_.util.objId(o[i])] = true;
						_.languages.DFS(o[i], callback, null, visited);
					}
					else if (_.util.type(o[i]) === 'Array' && !visited[_.util.objId(o[i])]) {
						visited[_.util.objId(o[i])] = true;
						_.languages.DFS(o[i], callback, i, visited);
					}
				}
			}
		}
	},
	plugins: {},

	highlightAll: function(async, callback) {
		var env = {
			callback: callback,
			selector: 'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'
		};

		_.hooks.run("before-highlightall", env);

		var elements = env.elements || document.querySelectorAll(env.selector);

		for (var i=0, element; element = elements[i++];) {
			_.highlightElement(element, async === true, env.callback);
		}
	},

	highlightElement: function(element, async, callback) {
		// Find language
		var language, grammar, parent = element;

		while (parent && !lang.test(parent.className)) {
			parent = parent.parentNode;
		}

		if (parent) {
			language = (parent.className.match(lang) || [,''])[1].toLowerCase();
			grammar = _.languages[language];
		}

		// Set language on the element, if not present
		element.className = element.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;

		// Set language on the parent, for styling
		parent = element.parentNode;

		if (/pre/i.test(parent.nodeName)) {
			parent.className = parent.className.replace(lang, '').replace(/\s+/g, ' ') + ' language-' + language;
		}

		var code = element.textContent;

		var env = {
			element: element,
			language: language,
			grammar: grammar,
			code: code
		};

		_.hooks.run('before-sanity-check', env);

		if (!env.code || !env.grammar) {
			if (env.code) {
				env.element.textContent = env.code;
			}
			_.hooks.run('complete', env);
			return;
		}

		_.hooks.run('before-highlight', env);

		if (async && _self.Worker) {
			var worker = new Worker(_.filename);

			worker.onmessage = function(evt) {
				env.highlightedCode = evt.data;

				_.hooks.run('before-insert', env);

				env.element.innerHTML = env.highlightedCode;

				callback && callback.call(env.element);
				_.hooks.run('after-highlight', env);
				_.hooks.run('complete', env);
			};

			worker.postMessage(JSON.stringify({
				language: env.language,
				code: env.code,
				immediateClose: true
			}));
		}
		else {
			env.highlightedCode = _.highlight(env.code, env.grammar, env.language);

			_.hooks.run('before-insert', env);

			env.element.innerHTML = env.highlightedCode;

			callback && callback.call(element);

			_.hooks.run('after-highlight', env);
			_.hooks.run('complete', env);
		}
	},

	highlight: function (text, grammar, language) {
		var tokens = _.tokenize(text, grammar);
		return Token.stringify(_.util.encode(tokens), language);
	},

	tokenize: function(text, grammar, language) {
		var Token = _.Token;

		var strarr = [text];

		var rest = grammar.rest;

		if (rest) {
			for (var token in rest) {
				grammar[token] = rest[token];
			}

			delete grammar.rest;
		}

		tokenloop: for (var token in grammar) {
			if(!grammar.hasOwnProperty(token) || !grammar[token]) {
				continue;
			}

			var patterns = grammar[token];
			patterns = (_.util.type(patterns) === "Array") ? patterns : [patterns];

			for (var j = 0; j < patterns.length; ++j) {
				var pattern = patterns[j],
					inside = pattern.inside,
					lookbehind = !!pattern.lookbehind,
					greedy = !!pattern.greedy,
					lookbehindLength = 0,
					alias = pattern.alias;

				if (greedy && !pattern.pattern.global) {
					// Without the global flag, lastIndex won't work
					var flags = pattern.pattern.toString().match(/[imuy]*$/)[0];
					pattern.pattern = RegExp(pattern.pattern.source, flags + "g");
				}

				pattern = pattern.pattern || pattern;

				// Don’t cache length as it changes during the loop
				for (var i=0, pos = 0; i<strarr.length; pos += strarr[i].length, ++i) {

					var str = strarr[i];

					if (strarr.length > text.length) {
						// Something went terribly wrong, ABORT, ABORT!
						break tokenloop;
					}

					if (str instanceof Token) {
						continue;
					}

					pattern.lastIndex = 0;

					var match = pattern.exec(str),
					    delNum = 1;

					// Greedy patterns can override/remove up to two previously matched tokens
					if (!match && greedy && i != strarr.length - 1) {
						pattern.lastIndex = pos;
						match = pattern.exec(text);
						if (!match) {
							break;
						}

						var from = match.index + (lookbehind ? match[1].length : 0),
						    to = match.index + match[0].length,
						    k = i,
						    p = pos;

						for (var len = strarr.length; k < len && p < to; ++k) {
							p += strarr[k].length;
							// Move the index i to the element in strarr that is closest to from
							if (from >= p) {
								++i;
								pos = p;
							}
						}

						/*
						 * If strarr[i] is a Token, then the match starts inside another Token, which is invalid
						 * If strarr[k - 1] is greedy we are in conflict with another greedy pattern
						 */
						if (strarr[i] instanceof Token || strarr[k - 1].greedy) {
							continue;
						}

						// Number of tokens to delete and replace with the new match
						delNum = k - i;
						str = text.slice(pos, p);
						match.index -= pos;
					}

					if (!match) {
						continue;
					}

					if(lookbehind) {
						lookbehindLength = match[1].length;
					}

					var from = match.index + lookbehindLength,
					    match = match[0].slice(lookbehindLength),
					    to = from + match.length,
					    before = str.slice(0, from),
					    after = str.slice(to);

					var args = [i, delNum];

					if (before) {
						args.push(before);
					}

					var wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias, match, greedy);

					args.push(wrapped);

					if (after) {
						args.push(after);
					}

					Array.prototype.splice.apply(strarr, args);
				}
			}
		}

		return strarr;
	},

	hooks: {
		all: {},

		add: function (name, callback) {
			var hooks = _.hooks.all;

			hooks[name] = hooks[name] || [];

			hooks[name].push(callback);
		},

		run: function (name, env) {
			var callbacks = _.hooks.all[name];

			if (!callbacks || !callbacks.length) {
				return;
			}

			for (var i=0, callback; callback = callbacks[i++];) {
				callback(env);
			}
		}
	}
};

var Token = _.Token = function(type, content, alias, matchedStr, greedy) {
	this.type = type;
	this.content = content;
	this.alias = alias;
	// Copy of the full string this token was created from
	this.length = (matchedStr || "").length|0;
	this.greedy = !!greedy;
};

Token.stringify = function(o, language, parent) {
	if (typeof o == 'string') {
		return o;
	}

	if (_.util.type(o) === 'Array') {
		return o.map(function(element) {
			return Token.stringify(element, language, o);
		}).join('');
	}

	var env = {
		type: o.type,
		content: Token.stringify(o.content, language, parent),
		tag: 'span',
		classes: ['token', o.type],
		attributes: {},
		language: language,
		parent: parent
	};

	if (env.type == 'comment') {
		env.attributes['spellcheck'] = 'true';
	}

	if (o.alias) {
		var aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];
		Array.prototype.push.apply(env.classes, aliases);
	}

	_.hooks.run('wrap', env);

	var attributes = Object.keys(env.attributes).map(function(name) {
		return name + '="' + (env.attributes[name] || '').replace(/"/g, '&quot;') + '"';
	}).join(' ');

	return '<' + env.tag + ' class="' + env.classes.join(' ') + '"' + (attributes ? ' ' + attributes : '') + '>' + env.content + '</' + env.tag + '>';

};

if (!_self.document) {
	if (!_self.addEventListener) {
		// in Node.js
		return _self.Prism;
	}
 	// In worker
	_self.addEventListener('message', function(evt) {
		var message = JSON.parse(evt.data),
		    lang = message.language,
		    code = message.code,
		    immediateClose = message.immediateClose;

		_self.postMessage(_.highlight(code, _.languages[lang], lang));
		if (immediateClose) {
			_self.close();
		}
	}, false);

	return _self.Prism;
}

//Get current script and highlight
var script = document.currentScript || [].slice.call(document.getElementsByTagName("script")).pop();

if (script) {
	_.filename = script.src;

	if (document.addEventListener && !script.hasAttribute('data-manual')) {
		if(document.readyState !== "loading") {
			if (window.requestAnimationFrame) {
				window.requestAnimationFrame(_.highlightAll);
			} else {
				window.setTimeout(_.highlightAll, 16);
			}
		}
		else {
			document.addEventListener('DOMContentLoaded', _.highlightAll);
		}
	}
}

return _self.Prism;

})();

if (typeof module !== 'undefined' && module.exports) {
	module.exports = Prism;
}

// hack for components to work correctly in node.js
if (typeof global !== 'undefined') {
	global.Prism = Prism;
}


/* **********************************************
     Begin prism-markup.js
********************************************** */

Prism.languages.markup = {
	'comment': /\x3c!--[\w\W]*?-- >/,
	'prolog': /<\?[\w\W]+?\?>/,
	'doctype': /<!DOCTYPE[\w\W]+?>/i,
	'cdata': /<!\[CDATA\[[\w\W]*?]]>/i,
	'tag': {
		pattern: /<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,
		inside: {
			'tag': {
				pattern: /^<\/?[^\s>\/]+/i,
				inside: {
					'punctuation': /^<\/?/,
					'namespace': /^[^\s>\/:]+:/
				}
			},
			'attr-value': {
				pattern: /=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,
				inside: {
					'punctuation': /[=>"']/
				}
			},
			'punctuation': /\/?>/,
			'attr-name': {
				pattern: /[^\s>\/]+/,
				inside: {
					'namespace': /^[^\s>\/:]+:/
				}
			}

		}
	},
	'entity': /&#?[\da-z]{1,8};/i
};

// Plugin to make entity title show the real entity, idea by Roman Komarov
Prism.hooks.add('wrap', function(env) {

	if (env.type === 'entity') {
		env.attributes['title'] = env.content.replace(/&amp;/, '&');
	}
});

Prism.languages.xml = Prism.languages.markup;
Prism.languages.html = Prism.languages.markup;
Prism.languages.mathml = Prism.languages.markup;
Prism.languages.svg = Prism.languages.markup;


/* **********************************************
     Begin prism-css.js
********************************************** */

Prism.languages.css = {
	'comment': /\/\*[\w\W]*?\*\//,
	'atrule': {
		pattern: /@[\w-]+?.*?(;|(?=\s*\{))/i,
		inside: {
			'rule': /@[\w-]+/
			// See rest below
		}
	},
	'url': /url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,
	'selector': /[^\{\}\s][^\{\};]*?(?=\s*\{)/,
	'string': {
		pattern: /("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,
		greedy: true
	},
	'property': /(\b|\B)[\w-]+(?=\s*:)/i,
	'important': /\B!important\b/i,
	'function': /[-a-z0-9]+(?=\()/i,
	'punctuation': /[(){};:]/
};

Prism.languages.css['atrule'].inside.rest = Prism.util.clone(Prism.languages.css);

if (Prism.languages.markup) {
	Prism.languages.insertBefore('markup', 'tag', {
		'style': {
			pattern: /(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,
			lookbehind: true,
			inside: Prism.languages.css,
			alias: 'language-css'
		}
	});
	
	Prism.languages.insertBefore('inside', 'attr-value', {
		'style-attr': {
			pattern: /\s*style=("|').*?\1/i,
			inside: {
				'attr-name': {
					pattern: /^\s*style/i,
					inside: Prism.languages.markup.tag.inside
				},
				'punctuation': /^\s*=\s*['"]|['"]\s*$/,
				'attr-value': {
					pattern: /.+/i,
					inside: Prism.languages.css
				}
			},
			alias: 'language-css'
		}
	}, Prism.languages.markup.tag);
}

/* **********************************************
     Begin prism-clike.js
********************************************** */

Prism.languages.clike = {
	'comment': [
		{
			pattern: /(^|[^\\])\/\*[\w\W]*?\*\//,
			lookbehind: true
		},
		{
			pattern: /(^|[^\\:])\/\/.*/,
			lookbehind: true
		}
	],
	'string': {
		pattern: /(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
		greedy: true
	},
	'class-name': {
		pattern: /((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,
		lookbehind: true,
		inside: {
			punctuation: /(\.|\\)/
		}
	},
	'keyword': /\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,
	'boolean': /\b(true|false)\b/,
	'function': /[a-z0-9_]+(?=\()/i,
	'number': /\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,
	'operator': /--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,
	'punctuation': /[{}[\];(),.:]/
};


/* **********************************************
     Begin prism-javascript.js
********************************************** */

Prism.languages.javascript = Prism.languages.extend('clike', {
	'keyword': /\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,
	'number': /\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,
	// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)
	'function': /[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,
	'operator': /--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/
});

Prism.languages.insertBefore('javascript', 'keyword', {
	'regex': {
		pattern: /(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,
		lookbehind: true,
		greedy: true
	}
});

Prism.languages.insertBefore('javascript', 'string', {
	'template-string': {
		pattern: /`(?:\\\\|\\?[^\\])*?`/,
		greedy: true,
		inside: {
			'interpolation': {
				pattern: /\$\{[^}]+\}/,
				inside: {
					'interpolation-punctuation': {
						pattern: /^\$\{|\}$/,
						alias: 'punctuation'
					},
					rest: Prism.languages.javascript
				}
			},
			'string': /[\s\S]+/
		}
	}
});

if (Prism.languages.markup) {
	Prism.languages.insertBefore('markup', 'tag', {
		'script': {
			pattern: /(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,
			lookbehind: true,
			inside: Prism.languages.javascript,
			alias: 'language-javascript'
		}
	});
}

Prism.languages.js = Prism.languages.javascript;

/* **********************************************
     Begin prism-file-highlight.js
********************************************** */

(function () {
	if (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {
		return;
	}

	self.Prism.fileHighlight = function() {

		var Extensions = {
			'js': 'javascript',
			'py': 'python',
			'rb': 'ruby',
			'ps1': 'powershell',
			'psm1': 'powershell',
			'sh': 'bash',
			'bat': 'batch',
			'h': 'c',
			'tex': 'latex'
		};

		if(Array.prototype.forEach) { // Check to prevent error in IE8
			Array.prototype.slice.call(document.querySelectorAll('pre[data-src]')).forEach(function (pre) {
				var src = pre.getAttribute('data-src');

				var language, parent = pre;
				var lang = /\blang(?:uage)?-(?!\*)(\w+)\b/i;
				while (parent && !lang.test(parent.className)) {
					parent = parent.parentNode;
				}

				if (parent) {
					language = (pre.className.match(lang) || [, ''])[1];
				}

				if (!language) {
					var extension = (src.match(/\.(\w+)$/) || [, ''])[1];
					language = Extensions[extension] || extension;
				}

				var code = document.createElement('code');
				code.className = 'language-' + language;

				pre.textContent = '';

				code.textContent = 'Loading…';

				pre.appendChild(code);

				var xhr = new XMLHttpRequest();

				xhr.open('GET', src, true);

				xhr.onreadystatechange = function () {
					if (xhr.readyState == 4) {

						if (xhr.status < 400 && xhr.responseText) {
							code.textContent = xhr.responseText;

							Prism.highlightElement(code);
						}
						else if (xhr.status >= 400) {
							code.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
						}
						else {
							code.textContent = '✖ Error: File does not exist or is empty';
						}
					}
				};

				xhr.send(null);
			});
		}

	};

	document.addEventListener('DOMContentLoaded', self.Prism.fileHighlight);

})();
</script>
<dom-module id="prism-styles" assetpath="bower_components/prism-highlight/">
  <template>
    <style>
    /**
     * prism.js default theme for JavaScript, CSS and HTML
     * Based on dabblet (http://dabblet.com)
     * @author Lea Verou
     */

    code[class*="language-"],
    pre[class*="language-"] {
      color: black;
      background: none;
      text-shadow: 0 1px white;
      font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
      direction: ltr;
      text-align: left;
      white-space: pre-wrap;
      word-spacing: normal;
      word-break: break-all;
      word-wrap: break-word;
      line-height: 1.5;
      -moz-tab-size: 4;
      -o-tab-size: 4;
      tab-size: 4;
      -webkit-hyphens: none;
      -moz-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
    }

    pre[class*="language-"]::-moz-selection,
    pre[class*="language-"]::-moz-selection,
    code[class*="language-"]::-moz-selection,
    code[class*="language-"]::-moz-selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    pre[class*="language-"]::selection,
    pre[class*="language-"]::selection,
    code[class*="language-"]::selection,
    code[class*="language-"]::selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    @media print {
      code[class*="language-"],
      pre[class*="language-"] {
        text-shadow: none;
      }
    }
    /* Code blocks */

    pre[class*="language-"] {
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
    }

    :not(pre) > code[class*="language-"],
    pre[class*="language-"] {
      background: #f5f2f0;
    }
    /* Inline code */

    :not(pre) > code[class*="language-"] {
      padding: .1em;
      border-radius: .3em;
      white-space: normal;
    }

    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
      color: slategray;
    }

    .token.punctuation {
      color: #999;
    }

    .namespace {
      opacity: .7;
    }

    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
      color: #905;
    }

    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
      color: #690;
    }

    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      color: #a67f59;
      background: hsla(0, 0%, 100%, .5);
    }

    .token.atrule,
    .token.attr-value,
    .token.keyword {
      color: #07a;
    }

    .token.function {
      color: #DD4A68;
    }

    .token.regex,
    .token.important,
    .token.variable {
      color: #e90;
    }

    .token.important,
    .token.bold {
      font-weight: bold;
    }

    .token.italic {
      font-style: italic;
    }

    .token.entity {
      cursor: help;
    }
    </style>
  </template>
</dom-module>
<!--
`<prism-highlight>` Syntax highlighting via Prism

### Example
```
<prism-highlight import-location="/bower_components/prism-highlight/"id="c1" lang="markdown"></prism-highlight>
<script>
  document.querySelector('#c1').code = '# Test highlight';
</script>
```

The `lang` attribute is required and the component will not start parsing data without it.

Changing the `lang` and `code` properties together, do it in less than 10 ms.
The element is set to commit changes after this persiod. Otherwise it may display
old and new code due to the asynchronius nature of the code highligter.

**Note** This element uses web workers with dependencies. It expect to find
workers files in current directory in the `workers` folder.
Your build process has to ensure that this files will be avaiable.

Also this element expects the prism scripts to be available in the same
root folder as this element is (like bower_components).

### Required scripts
- ../prism/prism.js
- ../prism/plugins/autolinker/prism-autolinker.min.js
- ../prism/components/*

### Styling
`<prism-highlight>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--prism-highlight` | Mixin applied to the element | `{}`
`--prism-highlight-code` | Mixin applied to the `<pre>` element | `{}`
`--prism-highlight-mark-selected` | Background color for the `<mark>` element when using custom search | `#ff9632`

@group UI Elements
@element prism-highlight
@demo demo/index.html
-->
<dom-module id="prism-highlight" assetpath="bower_components/prism-highlight/">
  <template>
    <style include="prism-styles">
     :host {
      display: block;
      @apply(--prism-highlight);
    }

    pre {
      -webkit-user-select: text;
      margin: 8px;
      @apply(--prism-highlight-code);
    }

    paper-progress {
      width: 100%;
    }

    .arc-search-mark.selected {
      background-color: var(--prism-highlight-mark-selected, #ff9632);
    }
    </style>
    <pre class="parsed-content"><code id="output" class="language-" on-tap="_handleLinks"></code></pre>
    <div hidden$="[[!hasMore]]">
      <paper-button raised="" on-tap="_loadNext">Show next [[maxRead]] lines</paper-button>
      <paper-button raised="" on-tap="_loadAll">Display all</paper-button>
    </div>
    <paper-progress indeterminate="" hidden$="[[!working]]"></paper-progress>
  </template>
  <script>
  (function() {
    'use strict';

    var importLocation = '';
    (function() {
      var url;
      if (window.currentImport && window.currentImport.URL) {
        url = window.currentImport.URL;
        if (window.currentImport._URL) {
          url = window.currentImport._URL;
        }
      } else if (window.currentImport._URL) {
        url = window.currentImport._URL;
      } else {
        url = window.location.href;
      }
      if (url === 'about:blank') {
        importLocation = '../';
        // in test cases for edge this will fail because it should be set to ../../
        // but right now I can't waste time to check how to check if this is the particular case.
      } else {
        var path = url.substr(url.indexOf('/', 8));
        path = path.substr(0, path.lastIndexOf('/') + 1);
        if (path.indexOf('/test') !== -1 || path.indexOf('/demo') !== -1) {
          path = path.substr(0, path.length - 1);
          path = path.substr(0, path.lastIndexOf('/') + 1);
        }
        importLocation = path;
      }
    })();
    Polymer({
      is: 'prism-highlight',
      /**
       * An event fired when the user clicked on any link in the response
       * panels or the headers
       *
       * @event url-change-action
       * @param {String} url An url value
       */
      properties: {
        /**
         * A data to be highlighted and dispayed.
         */
        code: String,
        /**
         * Prism supported language.
         */
        lang: String,
        /**
         * A list of tokenized code.
         * It's a result of calling `Prism.tokenize` function.
         */
        tokenized: {
          type: Array,
          readOnly: true
        },
        /**
         * True if not all data has been displayed in the display.
         */
        hasMore: {
          type: Boolean,
          readOnly: true,
          computed: '_computeHasMore(tokenized)'
        },
        /**
         * A number of lined to display at once.
         * After the limit is reached the display will show "load next
         * [maxRead] items" and "load all" buttons.
         */
        maxRead: {
          type: Number,
          value: 500
        },
        // True when parsing code or tokens to HTML code.
        working: {
          type: Boolean,
          value: false,
          readOnly: true
        },

        // An element which should be searched for text.
        textSearch: {
          type: HTMLElement,
          value: function() {
            return this.$.output;
          }
        },
        // Path to element's assets (workers folder). Default to current location
        importLocation: {
          type: String,
          value: function() {
            return importLocation;
          }
        }
      },

      observers: [
        '_highlight(code, lang)'
      ],

      detached: function() {
        if (this.worker) {
          this.worker.terminate();
          this.worker.onmessage = null;
          this.worker.onerror = null;
          this.worker = null;
        }
      },
      // Resets the state of the display to initial state.
      reset: function() {
        this._setTokenized(undefined);
        this._setWorking(false);
        this.$.output.innerHTML = '';
      },
      /**
       * Hightligt the code.
       * @param {String} data The code to be highlighted
       * @param {String} mime Mime type to be used to recognize the language.
       */
      _highlight: function() {
        this.reset();
        this.debounce('_highlight', function() {
          var message = {
            'language': this.lang,
            'code': this.code,
            'payload': 'tokenize'
          };
          this._runWorker(message);
        }, 10);
      },
      /**
       * Sends message to the hightligt worker if its already created.
       * If not, this will create worker and then post message.
       * @param {Objects} message An object to pass to the worker.
       */
      _runWorker: function(message) {
        this._setWorking(true);
        if (this.worker) {
          this.worker.postMessage(message);
          return;
        }
        this.worker = new Worker(this.importLocation + 'workers/prism-worker.js');
        this.worker.onmessage = this._onWorkerData.bind(this);
        this.worker.onerror = this._onWorkerError.bind(this);
        this.worker.postMessage(message);
      },

      _onWorkerData: function(e) {
        this._setWorking(false);
        switch (e.data.payload) {
          case 'tokenize':
            this._onTokenized(e.data.tokens);
            break;
          case 'stringify':
            this._display(e.data.html);
            this.fire('prism-highlight-parsed');
            break;
        }
      },

      _onWorkerError: function(e) {
        this._setWorking(false);

        var html = '<error-message><p>' + e.message + '</p></error-message>';
        this._display(html);

        this.fire('app-log', {
          message: e,
          level: 'error'
        });

        this.fire('error', {
          message: e.message
        });
        console.error('Highlight worker error', e);
      },
      /**
       * Handler for worker function after code tokenization.
       *
       * @param {Array} tokens An array of tokens returnet by Prism.
       */
      _onTokenized: function(tokens) {
        this._setTokenized(tokens);
        this._loadNext();
      },

      /**
       * Display next tokens from `this.tokenized` list - up to `this.maxRead`
       * elements. If after running this function the `this.tokenized`
       * array is empty it will be set to undefined.
       */
      _loadNext: function() {
        if (!this.tokenized || this.tokenized.length === 0) {
          return;
        }
        var tokens = this.splice('tokenized', 0, this.maxRead);
        var message = {
          'tokens': tokens,
          'payload': 'stringify'
        };
        this._runWorker(message);
        if (this.tokenized.length === 0) {
          this._setTokenized(undefined);
        }
      },

      _loadAll: function() {
        var tokens = this.tokenized;
        this._setTokenized(undefined);
        var message = {
          'tokens': tokens,
          'payload': 'stringify'
        };
        this._runWorker(message);
      },
      /**
       * Display a HTML code generated by Prism.
       * @param {String} html HTML code to be displayed.
       */
      _display: function(html) {
        this.$.output.innerHTML += html;
      },
      // Computes if the element has more data to display.
      _computeHasMore: function(tokenized) {
        if (!tokenized || tokenized.length === 0) {
          return false;
        }
        return true;
      },
      // Handler for links click.
      _handleLinks: function(e) {
        var el = e.target;
        if (el.nodeName !== 'A') {
          return;
        }
        e.preventDefault();
        var url = el.href;
        this.fire('url-change-action', {
          url: url
        });
      }
    });
  })();
  </script>
</dom-module>
<!--
An element that parses the HTTP response and displays highlighted result.

It splits the response by line (by default it's 500) and if the response has
more than that it shows only first 500 lines and the user can request to
display the rest or next 500 lines. This is to make the element work faster.
If the response is very long it may take some time to parse and tokenize it.
Control number of lines by setting the maxRead attribute.

### Example
```
<response-highlighter></response-highlighter>
```
```
var display = document.querySelector('response-highlighter');
display.responseText = someJsonResponse;
display.contentType = 'application/json';
```

## Content actions
By default the user can copy content of the code to clipboard. This action is
always visible.
You can add more actions in the actions bar by putting elements as a children
of this element.
### Example
```
<response-highlighter>
  <paper-icon-button title="Additional action" icon="arc:cached"></paper-icon-button>
  <paper-icon-button title="Clear the code" icon="arc:clear"></paper-icon-button>
</response-highlighter>
```

See demo for more information.

## Custom search
If the platform doesn't support native text search, this element implements
`ArcBehaviors.TextSearchBehavior` and exposes the `query` attribute.
Set any text to the `query` attribute and it will automatically highlight
occurance of the text.

## Content actions
The element can render a actions pane above the code view. Action pane is to
display content actions that is relevan in context of the response displayed
below the icon buttons. It should be icon buttons or just buttons added to this
view.
Buttons need to have `content-action` property set to be included to this view.
```
<json-viewer json='{"json": "test"}'>
  <paper-icon-button content-action title="Copy content to clipboard" icon="arc:content-copy"></paper-icon-button>
</json-viewer>
```

### Styling
`<response-highlighter>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-highlighter` | Mixin applied to the element | `{}`
`--response-highlighter-action-bar` | Mixin applied to the action bar above the highlighted code | `{}`
`--no-info-message` | Mixin applied to the "nothing to display" message (theme variable) | `{}`

See prism-highlight element for more styling options.

@group UI Elements
@element response-highlighter
@demo demo/index.html
-->
<dom-module id="response-highlighter" assetpath="bower_components/response-highlighter/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--response-highlighter);
    }

    .actions-panel {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--response-highlighter-action-bar);
    }

    .actions-panel.hidden {
      display: none;
    }

    .no-info {
      @apply(--no-info-message);
    }
    </style>
    <div class$="[[_computeActionsPanelClass(hasResponse)]]">
      <content select="[content-action]"></content>
    </div>
    <prism-highlight import-location="/bower_components/prism-highlight/" max-read="[[maxRead]]" hidden$="[[!hasResponse]]" id="prism" code="[[responseText]]" lang$="[[contentType]]"></prism-highlight>
    <p class="no-info" hidden$="[[hasResponse]]">Nothing to dispplay.</p>
  </template>
  <script>
  Polymer({
    is: 'response-highlighter',
    behaviors: [
      ArcBehaviors.TextSearchBehavior
    ],
    properties: {
      /**
       * The response text to display.
       */
      responseText: String,
      // Computed value, true if the responseText has text.
      hasResponse: {
        type: Boolean,
        value: false,
        computed: '_computeHasResponse(responseText)'
      },
      /**
       * Response content type.
       * It will be used to determine which syntaxt highlighter to use.
       */
      contentType: String,
      // An element that should be searched for the query.
      _textSearch: {
        type: HTMLElement,
        value: function() {
          return this.$.prism.$.output;
        }
      },
      /**
       * If set it will highlight each occurance of the query in the
       * XML viewer.
       */
      query: {
        type: String,
        observer: '_queryChanged'
      },
      // Attribute binded to the prism-highlight element.
      maxRead: Number
    },
    // Highlights the query in text.
    _queryChanged: function(query) {
      if (!query) {
        this.cleanMarked();
        return;
      }
      this.mark(query);
    },
    // Computes if the element has the response data.
    _computeHasResponse: function(responseText) {
      return !!responseText;
    },
    // Computes CSS class for the content actions pane.
    _computeActionsPanelClass: function(hasResponse) {
      var clazz = 'actions-panel';
      if (!hasResponse) {
        clazz += ' hidden';
      }
      return clazz;
    }
  });
  </script>
</dom-module>
<!--
`<response-body-view>` An element to display a HTTP response body.

The element will try to select best view for given `contentType`. It will
choose the JSON viewer for JSON response and XML viewer for XML responses.
Otherise it will display a syntax hagligter.

Note that the `contentType` property **must** be set in order to display any
view.

### Save content to file
The element will use web way of file saving. However, it will send the
`save-content-to-file` first to check if hosting application implements native
save functionality. See event description for more info.

### Example
```
<response-body-view import-location="/bower_components/response-body-view/"  response-text="I am the resposne"
  content-type="text/plain"></response-body-view>
```

### Styling
`<response-body-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-body-view` | Mixin applied to the element | `{}`

@group UI Elements
@element response-body-view
@demo demo/index.html
-->
<dom-module id="response-body-view" assetpath="bower_components/response-body-view/">
  <template>
    <style>
     :host {
      display: block;
      position: relative;
    }

    #webView {
      width: 100%;
      height: 100%;
      background-color: #fff;
      border: 0;
      margin-top: 12px;
    }

    #saveDialog {
      min-width: 320px;
    }

    .donnload-section {
      @apply(--layout-vertical);
      @apply(--layout-center);
    }

    .download-file-icon {
      width: 64px;
      height: 64px;
      color: var(--response-body-view-download-icon, --accent-color);
    }

    paper-icon-button[active] {
      background-color: var(--response-raw-viewer-button-active, #BDBDBD);
    }

    .close-preview {
      position: absolute;
      top: 8px;
      right: 12px;
      background: #fff;
      color: rgba(0,0,0,0.74);
    }
    </style>
    <iron-pages selected="{{activeView}}" hidden$="[[contentPreview]]">
      <section>
        <response-raw-viewer response-text="[[_raw]]" wrap-text$="[[rawTextWrap]]">
          <paper-icon-button content-action="" title="Copy content to clipboard" icon="arc:content-copy" on-tap="_copyToClipboard"></paper-icon-button>
          <paper-icon-button content-action="" title="Save content to file" icon="arc:archive" on-tap="_saveFile"></paper-icon-button>
          <paper-icon-button content-action="" title="View with highlighted syntax" icon="arc:code" toggles="" active="" on-tap="toggleViewSource"></paper-icon-button>
          <paper-icon-button content-action="" title="Preview response" icon="arc:visibility" toggles="" active="{{contentPreview}}"></paper-icon-button>
          <paper-icon-button content-action="" title="Wrap or unwrap text" icon="arc:wrap-text" toggles="" active="{{rawTextWrap}}"></paper-icon-button>
        </response-raw-viewer>
      </section>
      <section>
        <template is="dom-if" if="[[isParsed]]" restamp="true">
          <response-highlighter response-text="[[_raw]]" content-type="[[contentType]]">
            <paper-icon-button content-action="" title="Copy content to clipboard" icon="arc:content-copy" on-tap="_copyToClipboard"></paper-icon-button>
            <paper-icon-button content-action="" title="Save content to file" icon="arc:archive" on-tap="_saveFile"></paper-icon-button>
            <paper-icon-button content-action="" title="View raw response (without syntax highlighting)" icon="arc:code" on-tap="toggleViewSource"></paper-icon-button>
            <paper-icon-button content-action="" title="Preview response" icon="arc:visibility" toggles="" active="{{contentPreview}}"></paper-icon-button>
          </response-highlighter>
        </template>
      </section>
      <section>
        <template is="dom-if" if="[[isJson]]" restamp="true">
          <json-viewer json="[[_raw]]">
            <paper-icon-button content-action="" title="Copy content to clipboard" icon="arc:content-copy" on-tap="_copyToClipboard"></paper-icon-button>
            <paper-icon-button content-action="" title="Save content to file" icon="arc:archive" on-tap="_saveFile"></paper-icon-button>
            <paper-icon-button content-action="" title="View raw response (without syntax highlighting)" icon="arc:code" on-tap="toggleViewSource"></paper-icon-button>
            <paper-icon-button content-action="" title="View in a structured table" icon="arc:view-column" on-tap="toggleViewJsonTabble"></paper-icon-button>
          </json-viewer>
        </template>
      </section>
      <section>
        <template is="dom-if" if="[[isXml]]" restamp="true">
          <xml-viewer xml="[[_raw]]">
            <paper-icon-button content-action="" title="Copy content to clipboard" icon="arc:content-copy" on-tap="_copyToClipboard"></paper-icon-button>
            <paper-icon-button content-action="" title="Save content to file" icon="arc:archive" on-tap="_saveFile"></paper-icon-button>
            <paper-icon-button content-action="" title="View raw response (without syntax highlighting)" icon="arc:code" on-tap="toggleViewSource"></paper-icon-button>
          </xml-viewer>
        </template>
      </section>
      <section>
        <template is="dom-if" if="[[isJsonTable]]">
          <json-table json="[[_raw]]">
            <paper-icon-button content-action="" title="Copy content to clipboard" icon="arc:content-copy" on-tap="_copyToClipboard"></paper-icon-button>
            <paper-icon-button content-action="" title="Save content to file" icon="arc:archive" on-tap="_saveFile"></paper-icon-button>
            <paper-icon-button content-action="" title="View raw response (without syntax highlighting)" icon="arc:code" on-tap="toggleViewSource"></paper-icon-button>
            <paper-icon-button content-action="" title="View in a structured table" icon="arc:view-column" on-tap="toggleViewJsonTabble" toggles="" active=""></paper-icon-button>
          </json-table>
        </template>
      </section>
    </iron-pages>

    <iframe id="webView" hidden$="[[!contentPreview]]"></iframe>
    <paper-icon-button class="close-preview" title="Close the preview" icon="arc:close" on-tap="closePreview" hidden$="[[!contentPreview]]"></paper-icon-button>

    <paper-dialog id="saveDialog" on-iron-overlay-closed="_downloadDialogClose">
      <h2>Save to file</h2>
      <div>
        <p>Your file is ready to download. Click the icon below to save it to your local drive.</p>
        <div class="donnload-section">
          <a href$="[[downloadFileUrl]]" download$="[[downloadFileName]]" on-tap="_downloadIconTap" target="_blank">
            <paper-icon-button icon="arc:file-download" class="download-file-icon" title="Download file"></paper-icon-button>
          </a>
        </div>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss="" autofocus="">Close</paper-button>
      </div>
    </paper-dialog>

    <clipboard-copy content="[[_raw]]"></clipboard-copy>
    <paper-toast id="safariDownload" text="Safari doesn't support file download. Please, use other browser."></paper-toast>

    <script id="preview" type="text/html">
      <!DOCTYPE html><html><head><title>Advanced REST client - preview</title><style>
        body,html{overflow:auto;margin:0;padding:0}body{margin:16px;min-height:200px}
        </style></head><body></body></html>
    </script>
  </template>
  <script>
  (function() {
    'use strict';
    /* global webkitURL */
    window.URL = URL || webkitURL;
    Polymer({
      is: 'response-body-view',

      /**
       * Fired when the user click on save to file button.
       *
       * Application can handle this event if it has a way to natively implement
       * save to file functionality. In this case this event must be canceled
       * by calling `preventDefault()` on it. If the event is not canceled then
       * save to file dialog will appear with regular download link.
       *
       * @event save-content-to-file
       * @param {String} content A text to save in file.
       */
      /**
       * Fired when the `isJsonTable` property change to inform other elements to switch
       * corresponding view as well.
       *
       * @event json-table-state-changed
       * @param {Boolean} enabled If true then the view is enabled.
       */
      properties: {
        /**
         * Raw response as a response text.
         */
        responseText: {
          type: String,
          observer: '_responseTextChanged'
        },
        // A variable to be set after the `responseText` change
        _raw: String,
        /**
         * The response content type.
         */
        contentType: String,
        /**
         * If true then the conent preview will be visible instead of the code view
         */
        contentPreview: {
          type: Boolean,
          value: false,
          observer: '_contentPreviewChanged'
        },
        /**
         * Computed value, true if the parsed view can be displayed.
         * If false then the syntax highligter will be removed from the DOM
         * so it will not try to do the parsing job if it is not necessary.
         */
        isParsed: {
          type: Boolean,
          value: false,
          readOnly: true
        },
        /**
         * Computed value, true if the JSON view can be displayed.
         * If false then the syntax highligter will be removed from the DOM
         * so it will not try to do the parsing job if it is not necessary.
         */
        isJson: {
          type: Boolean,
          value: false,
          readOnly: true
        },
        /**
         * Computed value, true if the XML view can be displayed.
         * If false then the syntax highligter will be removed from the DOM
         */
        isXml: {
          type: Boolean,
          value: false,
          readOnly: true
        },
        /**
         * Selected view.
         */
        activeView: Number,
        /**
         * When saving a file this will be the download URL created by the
         * `URL.createObjectURL` function.
         */
        downloadFileUrl: {
          type: String,
          readOnly: true
        },
        /**
         * Autogenerated file name for the download file.
         */
        downloadFileName: {
          type: String,
          readOnly: true
        },
        // Is true then the text in "raw" preview will be wrapped.
        rawTextWrap: Boolean,
        // Computed value. True is current browser is Safari - the new IE.
        isSafari: {
          type: Boolean,
          value: function() {
            return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
          },
          readOnly: true
        },
        /**
         * If true then the JSON table view is active for the JSON viewer
         */
        isJsonTable: {
          type: Boolean,
          readOnly: true,
          observer: '_jsonTableChanged'
        }
      },

      observers: [
        '_contentTypeChanged(contentType, _raw)'
      ],

      attached: function() {
        this.listen(window, 'storage', '_onStorageChanged');
        this.listen(window, 'json-table-state-changed', '_onJsonTableStateChanged');

      },

      detached: function() {
        this.unlisten(window, 'storage', '_onStorageChanged');
        this.unlisten(window, 'json-table-state-changed', '_onJsonTableStateChanged');
        if (this.__previewUrl) {
          window.URL.revokeObjectURL(this.__previewUrl);
          this.__previewUrl = undefined;
        }
      },
      // The operation is async for performance reasons.
      _responseTextChanged: function(payload) {
        this._setIsXml(false);
        this._setIsJson(false);
        this._setIsParsed(false);

        if (payload === undefined) {
          return this.set('_raw', undefined);
        }
        if (payload === null || payload === false) {
          return this.set('_raw', payload);
        }

        this.set('_raw', undefined);

        if (!payload) {
          return;
        }

        this.debounce('set-raw', function() {
          this.set('_raw', this.responseText);
        }, 1);
      },

      _contentTypeChanged: function(contentType) {
        var parsed = false;
        var json = false;
        var xml = false;
        this.contentPreview = false;

        if (contentType) {
          if (contentType.indexOf('xml') !== -1) {
            this.activeView = 3;
            xml = true;
          } else if (contentType.indexOf('json') !== -1) {
            this.activeView = 2;
            json = true;
          } else {
            this.activeView = 1;
            parsed = true;
          }
        }
        this._setIsXml(xml);
        this._setIsJson(json);
        this._setIsParsed(parsed);

        if (json) {
          var isTable = this._localStorageValueToBoolean(localStorage.jsonTableEnabled);
          if (this.isJsonTable !== isTable) {
            this._setIsJsonTable(isTable);
          }
          if (this.isJsonTable) {
            this.activeView = 4;
          }
        }
      },

      // Handler for `this.contentPreview` change.
      _contentPreviewChanged: function(val) {
        if (!this.isAttached) {
          return;
        }
        if (val) {
          this._openResponsePreview();
        } else {
          this._closeResponsePreview();
        }
      },
      // Opens response preview in new layer
      _openResponsePreview: function() {
        if (!this.isAttached) {
          return;
        }
        var context = this;
        function onLoad() {
          context.$.webView.contentWindow.document.body.innerHTML = context._raw;
          context.async(function() {
            context._resizePreviewWindow(context.$.webView.contentWindow.document.body.clientHeight);
          }, 2);
        }
        if (!this.$.webView.src) {
          var blob = new Blob([this.$.preview.textContent], {type: 'text/html'});
          this.__previewUrl = window.URL.createObjectURL(blob);
          this.$.webView.src = this.__previewUrl;
          this.$.webView.addEventListener('load', function() {
            onLoad();
          });
        } else {
          onLoad();
        }
      },
      // Closes response preview
      _closeResponsePreview: function() {
        if (!this.isAttached) {
          return;
        }
        this.$.webView.contentWindow.document.body.innerHTML = '';
      },
      /**
       * Sets height for the preview iframe
       */
      _resizePreviewWindow: function(height) {
        if (!height) {
          this.$.webView.style.height = 'auto';
        } else {
          this.$.webView.style.height = height + 'px';
        }
      },
      /**
       * Coppies current response text value to clipboard.
       */
      _copyToClipboard: function(e) {
        var button = Polymer.dom(e).localTarget;
        var copy = this.$$('clipboard-copy');
        if (copy.copy()) {
          button.icon = 'arc:done';
        } else {
          button.icon = 'arc:error';
        }

        this.async(function() {
          this._resetCopyButtonState(button);
        }, 1000);
      },

      _resetCopyButtonState: function(button) {
        button.icon = 'arc:content-copy';
      },

      /**
       * Firest the `save-content-to-file` event. If the event is not canceled
       * then it will use default web implementation for file saving.
       */
      _saveFile: function() {
        var e = this.fire('save-content-to-file', {
          content: this._raw
        }, {
          cancelable: true
        });
        if (e.defaultPrevented) {
          return;
        }
        if (this.isSafari) {
          this.$.safariDownload.opened = true;
        } else {
          this.saveToFile();
        }
      },

      /**
       * Creates a file object form current response text and opens a dialog
       * with the link to a file.
       */
      saveToFile: function() {
        var ext = '.';
        if (this.isJson) {
          ext += 'json';
        } else if (this.isXml) {
          ext += 'xml';
        } else {
          ext += 'txt';
        }
        var ct = this.contentType || 'text/plain';
        var file = new Blob([this._raw], {
          type: ct
        });
        var fileName = 'response-' + new Date().toISOString() + ext;
        this._setDownloadFileUrl(URL.createObjectURL(file));
        this._setDownloadFileName(fileName);
        this.$.saveDialog.opened = true;
      },
      // Handler for download link click to prevent default and close the dialog.
      _downloadIconTap: function() {
        this.async(function() {
          this.$.saveDialog.opened = false;
        }, 250);
      },
      // Handler for file download dialog close.
      _downloadDialogClose: function() {
        URL.revokeObjectURL(this.downloadFileUrl);
        this._setDownloadFileUrl(undefined);
        this._setDownloadFileName(undefined);
      },
      /**
       * Toggles "view source" or raw message view.
       */
      toggleViewSource: function() {
        if (this.__parsedView) {
          this.activeView = this.__parsedView;
          this.__parsedView = undefined;
          if (this.activeView === 2 && this.isJsonTable) {
            this._setIsJsonTable(false);
          }
        } else {
          this.__parsedView = this.activeView;
          this.activeView = 0;
        }
      },

      toggleViewJsonTabble: function() {
        if (this.isJsonTable) {
          this.activeView = 2;
          this._setIsJsonTable(false);
        } else {
          this.activeView = 4;
          this._setIsJsonTable(true);
        }
      },
      // Handler to the isJsonTable change, fires corresponding event and sets local storage.
      _jsonTableChanged: function(state) {
        if (state === undefined) {
          return;
        }
        if (localStorage.jsonTableEnabled !== String(state)) {
          window.localStorage.setItem('jsonTableEnabled', state);
        }
        this.fire('json-table-state-changed', {
          enabled: state
        });
      },
      /**
       * Updates the value of the `isJsonTable` property when the corresponding localStorage
       * property change.
       */
      _onStorageChanged: function(e) {
        if (e.key !== 'jsonTableEnabled') {
          return;
        }
        if (!e.newValue) {
          return;
        }
        var v = this._localStorageValueToBoolean(e.newValue);
        if (this.isJsonTable !== v) {
          this._setIsJsonTable(v);
        }
      },
      /**
       * Reads the local value (always a string) as a boolean value.
       *
       * @param {String} value The value read from the local storage.
       * @return {Boolean} Boolean value read from the value.
       */
      _localStorageValueToBoolean: function(value) {
        if (!value) {
          return false;
        }
        if (value === 'true') {
          value = true;
        } else {
          value = false;
        }
        return value;
      },

      _onJsonTableStateChanged: function(e) {
        if (e.target === this) {
          return;
        }
        var enabled = e.detail.enabled;
        if (enabled !== this.isJsonTable) {
          this._setIsJsonTable(enabled);
        }
      },

      closePreview: function() {
        this.contentPreview = false;
      }
    });
  })();
  </script>
</dom-module>
<!--
`<response-view>` An element to display the HTTP response view.

It uses the Fetch API's objects to pass the
[Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) and
[Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) data. The element
import polyfils for the Promises API and for the Fetch API.

### Example
```
<response-view loading-time="200.123" is-xhr></response-view>
<script>
  var panel = document.querySelector('response-view');
  panel.request = request; // A Request class instance
  panel.response = response; // A Response class instance
  panel.responseError = undefined; // Clean if it was set previously.
</script>
```

If the transport can provide more details about the request like detailed
timings, redirects information or source message sent to the server you can
set corresponding attributes to display this information. Otherwise set `isXhr`
attribute to display a basic view.

To see detailed information about data format see the
[response-status-view](https://elements.advancedrestclient.com/elements/response-status-view)
element documentation.

## Request additional properties
The element will attempt to read the `rawMessage` on the `request` object.
If it's set and `isXhr` is not set then the source message will be displayed in
the `request headers` panel.
If this property is set but the app have this information, just set the
`sentHttpMessage` property.

### Styling
`<response-view>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--response-view` | Mixin applied to the element | `{}`
`--no-info-message` | Mixin applied to the information about lack of the response | `{}`

Use: `response-status-view`, `response-body-view` and `response-error-view`
styles to style this element.

@group UI Elements
@element response-view
@demo demo/index.html
-->
<dom-module id="response-view" assetpath="bower_components/response-view/">
  <template>
    <style>
    :host {
      display: block;
      @apply(--response-view);
    }

    .empty-info {
      @apply(--no-info-message);
    }
    </style>
    <response-status-view status-code="[[statusCode]]" status-message="[[statusMessage]]" request-headers="[[requestHeaders]]" response-headers="[[responseHeaders]]" loading-time="[[loadingTime]]" http-message="[[sentHttpMessage]]" redirects="[[redirects]]" redirect-timings="[[redirectTimings]]" timings="[[responseTimings]]" is-xhr="[[isXhr]]" request-url="[[requestUrl]]" request-method="[[requestMethod]]"></response-status-view>
    <template is="dom-if" if="[[hasResponse]]">
      <template is="dom-if" if="[[!isError]]">
        <response-body-view import-location="/bower_components/response-body-view/" response-text="[[responseBody]]" content-type="[[contentType]]"></response-body-view>
      </template>
      <template is="dom-if" if="[[isError]]">
        <response-error-view message="[[responseError.message]]"></response-error-view>
      </template>
    </template>
    <template is="dom-if" if="[[!hasResponse]]">
      <p class="empty-info">This response does not carry a payload.</p>
    </template>
  </template>
  <script>
  Polymer({
    is: 'response-view',
    properties: {
      /**
       * The `Response` object as defined in the Fetch API spec.
       *
       * This element will read the response body from it so it need to not
       * be read before setting this to this element. According to the Fetch
       * API the response can be read only once.
       *
       * The element will set a `responseBody` property which will be a String
       * of the response.
       *
       * This element imports a polyfill for the Fetch API.
       */
      response: {
        type: Response,
        observer: '_responseChanged'
      },
      /**
       * The `Request` object as defined in the Fetch API spec.
       * This element provides the polyfill for the Fetch API.
       *
       * This element will read the request body from it so it need to not
       * be read before setting this to this element. According to the Fetch
       * API the body can be read only once.
       *
       * Please, use the `Request.clone()` method and set a copy if you need
       * to read the body elsewhere.
       */
      request: {
        type: Request,
        observer: '_requestChanged'
      },
      /**
       * An Error object associated with the request if the response was errored.
       * It should have a `message` property set to the human readable explenation of the error.
       * If not set the default message will be displaed.
       */
      responseError: Object,
      /**
       * A response body read from the `resposne` object.
       * The element will throw an error if the response body was read before
       * passing it to this element.
       *
       * Please, use the `Response.clone()` method and set a copy if you need
       * to read the body elsewhere.
       */
      responseBody: {
        type: String,
        notify: true
      },
      /**
       * Returned status code.
       * Ths value will be computed from the `response` when set.
       */
      statusCode: Number,
      /**
       * Returned status message (if any).
       * Ths value will be computed from the `response` when set.
       */
      statusMessage: String,
      /**
       * Request headers sent to the server.
       */
      requestHeaders: String,
      /**
       * Returned from the server headers.
       * Ths value will be computed from the `response` when set.
       */
      responseHeaders: String,
      /**
       * The response content type header if present
       */
      contentType: String,
      /**
       * If available, the request / response timings as defined in HAR 1.2
       * spec.
       * It will be used to calculate the `loadingTime` property.
       */
      responseTimings: Object,
      /**
       * The total time of the request / response load.
       * It will be computed (and overwitted) if the `responseTimings`
       * object will be set.
       */
      loadingTime: Number,
      /**
       * If this information available, the source HTTP message sent to
       * the remote machine.
       * `socket-fetch` element sets this additional property on the
       * response object.
       */
      sentHttpMessage: String,
      /**
       * The list of the `Response` objects representing a redirection during
       * the request.
       * The list should be ordered list of redirections.
       */
      redirects: Array,
      /**
       * If timings stats are available for redirects, the list of the
       * `timings` object as defined in HAR 1.2 specification.
       * The list should be ordered list of redirections.
       */
      redirectTimings: Array,
      /**
       * Computed value, false if the response is set and it is a HEAD type
       * request (which can't have the response).
       */
      hasResponse: {
        type: Boolean,
        value: false,
        computed: '_computeHasResponse(request)'
      },
      // Computed value, true if the response has error object set.
      isError: {
        type: Boolean,
        value: false,
        computed: '_computeIsError(responseError)'
      },
      /**
       * If true it means that the request has been made by the basic
       * transport and advanced details of the request/response like
       * redirects, timings, source message are not available.
       * It this case it will hide unused tabs.
       */
      isXhr: {
        type: Boolean,
        value: false
      },
      // A request URL that has been used to make a request
      requestUrl: String,
      // A HTTP method used to make a request
      requestMethod: String
    },
    // resets the initial variables for the Response change handler.
    _reset: function() {
      this.set('statusCode', undefined);
      this.set('statusMessage', undefined);
      this.set('responseHeaders', undefined);
      this.set('responseBody', undefined);
      this.set('contentType', undefined);
    },

    _responseChanged: function(response) {
      this._reset();
      if (!response) {
        return;
      }
      this.set('statusCode', response.status);
      this.set('statusMessage', response.statusText);
      var headers = response.headers;
      var rsponseHeaders = '';
      headers.forEach(function(value, name) {
        if (rsponseHeaders) {
          rsponseHeaders += '\n';
        }
        rsponseHeaders += name + ': ' + value;
      });
      this.set('responseHeaders', rsponseHeaders);
      var content = this;
      response.text()
      .then(function(body) {
        content.set('responseBody', body);
        content.set('contentType', headers.get('content-type'));
      })
      .catch(function(e) {
        content.fire('app-log', {
          level: 'error',
          message: e
        });
      });
    },

    _resetRequestData: function() {
      this.set('requestHeaders', undefined);
      this.set('sentHttpMessage', undefined);
    },

    _requestChanged: function(request) {
      this._resetRequestData();
      if (!request) {
        return;
      }
      this.set('requestUrl', request.url);
      this.set('requestMethod', request.method);
      var headers = request.headers;
      var requestHeaders = '';
      headers.forEach(function(value, name) {
        if (requestHeaders) {
          requestHeaders += '\n';
        }
        requestHeaders += name + ': ' + value;
      });
      this.set('requestHeaders', requestHeaders);
      if (request.rawMessage) {
        this.set('sentHttpMessage', request.rawMessage);
        return;
      }
      var content = this;
      request.text()
      .then(function(body) {
        content.set('sentHttpMessage', body);
      })
      .catch(function(e) {
        content.fire('app-log', {
          level: 'error',
          message: e
        });
      });
    },
    // Computes if the response panel should be displayed.
    _computeHasResponse: function(request) {
      if (request && request.method === 'HEAD') {
        return false;
      }
      return true;
    },
    // Computes if the request object has an error
    _computeIsError: function(error) {
      return !!error;
    }
  });
  </script>
</dom-module>
</div>
  <app-location use-hash-as-path=""></app-location>
  <api-console></api-console>
  <script>
  /**
   * The following script will handle API console routing when using the console as a standalone
   * application.
   *
   * It uses native JavaScript APIs so it can be used outside Polymer scope.
   */
  (function() {
    'use strict';
    // API Console namespace.
    var apiconsole = {};
    // Namespace for standalone application.
    apiconsole.app = {};
    /**
     * Initialize event listeners for console's path and page properties and observers
     * router data change.
     */
    apiconsole.app.init = function() {
      apiconsole.app.setInitialRouteData();
      apiconsole.app.observeRouteEvents();
      var apiConsole = document.querySelector('api-console');
      apiConsole.raml = {"traits":{"results":{"queryParameters":[{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to include deleted items. If set, all replies, including deleted replies (with content stripped) will be returned.","key":"includeDeleted"},{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"The maximum number of replies to include in the response, used for paging. Acceptable values are 0 to 100, inclusive","minimum":0,"maximum":1000,"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for changes.\nThe continuation token, used to page through large result sets. To get the next page of results, set this parameter to the value of \"nextPageToken\" from the previous response.\n","key":"pageToken"}],"securedBy":["oauth_2_0"],"name":"results"},"visibility":{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"}],"securedBy":["oauth_2_0"],"name":"visibility"},"file":{"queryParameters":[{"name":"convert","displayName":"convert","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to convert this file to the corresponding Google Docs format. (Default: false)\n","key":"convert"},{"name":"ocr","displayName":"ocr","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to attempt OCR on .jpg, .png, .gif, or .pdf uploads. (Default: false)\n","key":"ocr"},{"name":"ocrLanguage","displayName":"ocrLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"If ocr is true, hints at the language to use. Valid values are BCP 47 codes.","key":"ocrLanguage"},{"name":"pinned","displayName":"pinned","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to pin the head revision of the uploaded file. A file can have a maximum of 200 pinned revisions. (Default: false)\n","key":"pinned"},{"name":"timedTextLanguage","displayName":"timedTextLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The language of the timed text.","key":"timedTextLanguage"},{"name":"timedTextTrackName","displayName":"timedTextTrackName","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The timed text track name.","key":"timedTextTrackName"}],"securedBy":["oauth_2_0"],"name":"file"}},"resourceTypes":{"standardRequest":{"securedBy":["oauth_2_0"],"name":"standardRequest","get":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"OAuth 2.0 token for the current user.\n\nOne possible way to provide an OAuth 2.0 token.\n","key":"access_token"},{"name":"callback","displayName":"callback","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Name of the JavaScript callback function that handles the response.\nUsed in JavaScript JSON-P requests.\n","key":"callback"},{"name":"fields","displayName":"fields","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Selector specifying a subset of fields to include in the response.\nFor more information, see the partial response section in the Performance Tips document.\nUse for better performance.\n","key":"fields"},{"name":"key","displayName":"key","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Required unless you provide an OAuth 2.0 token.\nYour API key identifies your project and provides you with API access, quota, and reports.\nObtain your project's API key from the Google API Console.\n","key":"key"},{"name":"prettyPrint","displayName":"prettyPrint","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Returns response with indentations and line breaks.\nWhen this is false, it can reduce the response payload size, which might lead to better performance in some environments.\n","key":"prettyPrint"},{"name":"quotaUser","displayName":"quotaUser","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Alternative to `userIp`.\nLets you enforce per-user quotas from a server-side application even in cases when the user's IP address is unknown. This can occur, for example, with applications that run cron jobs on App Engine on a user's behalf.\nYou can choose any arbitrary string that uniquely identifies a user, but it is limited to 40 characters.\nOverrides userIp if both are provided.\n","key":"quotaUser"},{"name":"userIp","displayName":"userIp","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"IP address of the end user for whom the API call is being made. Lets you enforce per-user quotas when calling the API from a server-side application.\n","key":"userIp"}],"securedBy":["oauth_2_0"],"method":"get"}}},"annotationTypes":{"DriveFile.Annotations.deprecated":{"name":"deprecated","displayName":"deprecated","typePropertyKind":"TYPE_EXPRESSION","type":"nil"}},"securitySchemes":{"oauth_2_0":{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}},"title":"Google Drive","version":"v2","baseUri":"https://www.googleapis.com/drive/{version}","baseUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"protocols":["HTTPS"],"mediaType":"application/json","securedBy":["oauth_2_0"],"resources":[{"methods":[{"queryParameters":[{"name":"uploadType","displayName":"uploadType","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The type of upload request to the /upload URI. Acceptable values are:\n\n- **media** - Simple upload. Upload the media only, without any metadata.\n- **multipart** - Multipart upload. Upload both the media and its metadata, in a single request.\n- **resumable** - Resumable upload. Upload the file in a resumable fashion, using a series of at least two requests where the first request includes the metadata.\n","examples":["multipart"],"key":"uploadType"},{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **DEFAULT**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **PRIVATE**: The new file will be visible to only the owner.\n","enum":["DEFAULT","PRIVATE"],"examples":["DEFAULT"],"key":"visibility"},{"name":"convert","displayName":"convert","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to convert this file to the corresponding Google Docs format. (Default: false)\n","key":"convert"},{"name":"ocr","displayName":"ocr","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to attempt OCR on .jpg, .png, .gif, or .pdf uploads. (Default: false)\n","key":"ocr"},{"name":"ocrLanguage","displayName":"ocrLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"If ocr is true, hints at the language to use. Valid values are BCP 47 codes.","key":"ocrLanguage"},{"name":"pinned","displayName":"pinned","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to pin the head revision of the uploaded file. A file can have a maximum of 200 pinned revisions. (Default: false)\n","key":"pinned"},{"name":"timedTextLanguage","displayName":"timedTextLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The language of the timed text.","key":"timedTextLanguage"},{"name":"timedTextTrackName","displayName":"timedTextTrackName","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The timed text track name.","key":"timedTextTrackName"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"X-Upload-Content-Type","displayName":"X-Upload-Content-Type","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"Set to the media MIME type of the upload data to be transferred in subsequent requests.\nDon't use it if `uploadType` queryParameter is set.\n","examples":["image/jpeg"],"key":"X-Upload-Content-Type"},{"name":"X-Upload-Content-Length","displayName":"X-Upload-Content-Length","typePropertyKind":"TYPE_EXPRESSION","type":"integer","required":true,"description":"Set to the number of bytes of upload data to be transferred in subsequent requests.  If the length is unknown at the time of this request, you can omit this header.","examples":["8000000"],"key":"X-Upload-Content-Length"},{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"201","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},{"type":"array","description":"The list of properties.","displayName":"properties","name":"properties","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"key":"properties"},{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"DriveFileCreate","displayName":"File","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A type to be used when a new file to be created.","properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"description"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"text"}],"key":"indexableText"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"title"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"boolean","description":"Whether writers can share the document with other users.","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"writersCanShare"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"mimeType"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"}],"examples":["{\n  \"id\": \"string\",\n  \"title\" : \"My file to insert\" ,\n  \"description\" : \"This is a test file to be inserted to my Google Drive folder\",\n  \"indexableText\": {\n    \"text\": \"Test upload\"\n  },\n  \"mimeType\": \"application/json\",\n  \"labels\" : {\n    \"starred\" : false,\n    \"hidden\" : false,\n    \"trashed\" : false,\n    \"restricted\" : false,\n    \"viewed\" : false\n  } ,\n  \"modifiedDate\" : \"2002-10-02T10:00:00-05:00\",\n  \"lastViewedByMeDate\" :\"2002-10-02T15:00:00Z\",\n  \"markedViewedByMeDate\" : \"2002-10-02T15:00:00.05Z\",\n  \"writersCanShare\" : false,\n  \"parents\" : [\n    {\n      \"kind\" : \"drive#parentReference\",\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"parentLink\" : \"string\" ,\n      \"isRoot\" : true\n    }\n  ]\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["file","visibility"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly"]}}],"description":"Insert a new file.\nThis method supports an /upload URI and accepts uploaded media with the following characteristics:\n\n- Maximum file size: 5120GB\n- Accepted Media MIME types: */*\n\nNote: Apps creating shortcuts with files.insert must specify the MIME type `application/vnd.google-apps.drive-sdk`.\n\nApps should specify a file extension in the title property when inserting files with the API. For example, an operation to insert a JPEG file should specify something like `\"title\": \"cat.jpg\"` in the metadata.\n\nSubsequent GET requests include the read-only fileExtension property populated with the extension originally specified in the title property. When a Google Drive user requests to download a file, or when the file is downloaded through the sync client, Drive builds a full filename (with extension) based on the title. In cases where the extension is missing, Google Drive attempts to determine the extension based on the file's MIME type.\n\n### HTTP request\n\nThis method provides media upload functionality through two separate URIs. For more details, see the document on media upload.\n\n- Upload URI, for media upload requests: `POST https://www.googleapis.com/upload/drive/v2/files`\n- Metadata URI, for metadata-only requests: `POST https://www.googleapis.com/drive/v2/files`\n","displayName":"Insert","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files"},{"queryParameters":[{"name":"corpus","displayName":"corpus","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The body of items (files/documents) to which the query applies.\n\nAcceptable values are:\n-**DEFAULT**: The items that the user has accessed.\n- **DOMAIN**: Items shared to the user's domain.\n","examples":["DOMAIN"],"key":"corpus"},{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"Maximum number of files to return. Acceptable values are `0` to `1000`, inclusive.\n(Default: 100)\n","minimum":0,"maximum":1000,"examples":["25"],"key":"maxResults"},{"name":"orderBy","displayName":"orderBy","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of sort keys.\nValid keys are `createdDate`, `folder`, `lastViewedByMeDate`, `modifiedByMeDate`, `modifiedDate`, `quotaBytesUsed`, `recency`, `sharedWithMeDate`, `starred`, and `title`.\nEach key sorts ascending by default, but may be reversed with the `desc` modifier.\nExample usage: `?orderBy=folder,modifiedDate desc,title`.\n\nPlease note that there is a current limitation for users with approximately one million files in which the requested sort order is ignored.\n","examples":["orderBy=folder,modifiedDate desc,title"],"key":"orderBy"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for files.","key":"pageToken"},{"name":"q","displayName":"q","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Query string for searching files.\nSee [Searching for files](docs/searching-for-files.md) for more information about supported fields and operations.\n","key":"q"},{"name":"spaces","displayName":"spaces","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of spaces to query. Supported values are `drive`, `appDataFolder` and `photos`.","key":"spaces"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"OAuth 2.0 token for the current user.\n\nOne possible way to provide an OAuth 2.0 token.\n","key":"access_token"},{"name":"callback","displayName":"callback","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Name of the JavaScript callback function that handles the response.\nUsed in JavaScript JSON-P requests.\n","key":"callback"},{"name":"fields","displayName":"fields","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Selector specifying a subset of fields to include in the response.\nFor more information, see the partial response section in the Performance Tips document.\nUse for better performance.\n","key":"fields"},{"name":"key","displayName":"key","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Required unless you provide an OAuth 2.0 token.\nYour API key identifies your project and provides you with API access, quota, and reports.\nObtain your project's API key from the Google API Console.\n","key":"key"},{"name":"prettyPrint","displayName":"prettyPrint","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Returns response with indentations and line breaks.\nWhen this is false, it can reduce the response payload size, which might lead to better performance in some environments.\n","key":"prettyPrint"},{"name":"quotaUser","displayName":"quotaUser","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Alternative to `userIp`.\nLets you enforce per-user quotas from a server-side application even in cases when the user's IP address is unknown. This can occur, for example, with applications that run cron jobs on App Engine on a user's behalf.\nYou can choose any arbitrary string that uniquely identifies a user, but it is limited to 40 characters.\nOverrides userIp if both are provided.\n","key":"quotaUser"},{"name":"userIp","displayName":"userIp","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"IP address of the end user for whom the API call is being made. Lets you enforce per-user quotas when calling the API from a server-side application.\n","key":"userIp"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"DriveFileList","displayName":"FileList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A response body for the files list","properties":[{"type":"string","description":"This is always drive#fileList.","enum":["drive#fileList"],"displayName":"kind","default":"drive#fileList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The page token for the next page of files.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},{"type":"string","description":"A link to the next page of files.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},{"type":"array","description":"The actual list of files.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},{"type":"array","description":"The list of properties.","displayName":"properties","name":"properties","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"key":"properties"},{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"additionalProperties":true,"displayName":"DriveFile","name":"DriveFile","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}],"examples":["{\n \"kind\": \"drive#fileList\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/lYHFMDTru-NiLn19p1PyG2bK2qw\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files?maxResults=1&orderBy=createdDate+desc\",\n \"nextPageToken\": \"V1*13|0|ABC123DEF456M1NseXNieUZfb2wzUGMxM0IxNFNqMXFnYjR3WnpWZElRck5CWRIHEILehuadKw\",\n \"nextLink\": \"https://www.googleapis.com/drive/v2/files?maxResults=1&orderBy=createdDate+desc&pageToken=V1*13%7C0%ABC123DEF456M1NseXNieUZfb2wzUGMxM0IxNFNqMXFnYjR3WnpWZElRck5CWRIHEILehuadKw\",\n \"items\": [\n  {\n   \"kind\": \"drive#file\",\n   \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n   \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n   \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n   \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n   \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n   },\n   \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n   \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n   \"title\": \"Dummy file\",\n   \"mimeType\": \"application/vnd.google-apps.document\",\n   \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n   },\n   \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n   \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n   \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n   \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n   \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n   \"version\": \"1341924\",\n   \"parents\": [\n    {\n     \"kind\": \"drive#parentReference\",\n     \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n     \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n     \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n     \"isRoot\": true\n    }\n   ],\n   \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n   },\n   \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n   },\n   \"quotaBytesUsed\": \"0\",\n   \"ownerNames\": [\n    \"John Doe\"\n   ],\n   \"owners\": [\n    {\n     \"kind\": \"drive#user\",\n     \"displayName\": \"John Doe\",\n     \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n     },\n     \"isAuthenticatedUser\": true,\n     \"permissionId\": \"91827364558604565116\",\n     \"emailAddress\": \"john.doe@gmail.com\"\n    }\n   ],\n   \"lastModifyingUserName\": \"John Doe\",\n   \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n     \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n   },\n   \"editable\": true,\n   \"copyable\": true,\n   \"writersCanShare\": true,\n   \"shared\": false,\n   \"explicitlyTrashed\": false,\n   \"appDataContents\": false\n  }\n ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists the user's files. Try it now or see an example.\n\nRequests with `files.list` accept the `q` parameter, which is a search query combining one or more search terms. For more information, see Search for files.\n\nNote: Note: This method returns all files by default. This includes files with trashed=true in the results. Use the trashed=false query parameter to filter these from the results.\n","displayName":"list","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"type":"standardRequest","securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/files","displayName":"Files","resources":[{"methods":[{"queryParameters":[{"name":"acknowledgeAbuse","displayName":"acknowledgeAbuse","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether the user is acknowledging the risk of downloading known malware or other abusive files. (Default: false)","examples":["false"],"key":"acknowledgeAbuse"},{"name":"projection","displayName":"projection","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"This parameter is deprecated and has no function.\n\nAcceptable values are:\n\"BASIC\": Deprecated\n\"FULL\": Deprecated\n","key":"projection"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Specifies the Revision ID that should be downloaded. Ignored unless alt=media is specified.","key":"revisionId"},{"name":"updateViewedDate","displayName":"updateViewedDate","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to update the view date after successfully retrieving the file. (Default: false)","examples":["true"],"key":"updateViewedDate"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"OAuth 2.0 token for the current user.\n\nOne possible way to provide an OAuth 2.0 token.\n","key":"access_token"},{"name":"callback","displayName":"callback","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Name of the JavaScript callback function that handles the response.\nUsed in JavaScript JSON-P requests.\n","key":"callback"},{"name":"fields","displayName":"fields","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Selector specifying a subset of fields to include in the response.\nFor more information, see the partial response section in the Performance Tips document.\nUse for better performance.\n","key":"fields"},{"name":"key","displayName":"key","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Required unless you provide an OAuth 2.0 token.\nYour API key identifies your project and provides you with API access, quota, and reports.\nObtain your project's API key from the Google API Console.\n","key":"key"},{"name":"prettyPrint","displayName":"prettyPrint","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Returns response with indentations and line breaks.\nWhen this is false, it can reduce the response payload size, which might lead to better performance in some environments.\n","key":"prettyPrint"},{"name":"quotaUser","displayName":"quotaUser","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Alternative to `userIp`.\nLets you enforce per-user quotas from a server-side application even in cases when the user's IP address is unknown. This can occur, for example, with applications that run cron jobs on App Engine on a user's behalf.\nYou can choose any arbitrary string that uniquely identifies a user, but it is limited to 40 characters.\nOverrides userIp if both are provided.\n","key":"quotaUser"},{"name":"userIp","displayName":"userIp","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"IP address of the end user for whom the API call is being made. Lets you enforce per-user quotas when calling the API from a server-side application.\n","key":"userIp"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a file's metadata by ID.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"addParents","displayName":"addParents","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Comma-separated list of parent IDs to add.","key":"addParents"},{"name":"modifiedDateBehavior","displayName":"modifiedDateBehavior","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Determines the behavior in which modifiedDate is updated. This overrides setModifiedDate.\n\nAcceptable values are:\n- \"fromBody\": Set modifiedDate to the value provided in the body of the request. No change if no value was provided.\n- \"fromBodyIfNeeded\": Set modifiedDate to the value provided in the body of the request depending on other contents of the update.\n- \"fromBodyOrNow\": Set modifiedDate to the value provided in the body of the request, or to the current time if no value was provided.\n- \"noChange\": Maintain the previous value of modifiedDate.\n- \"now\": Set modifiedDate to the current time.\n- \"nowIfNeeded\": Set modifiedDate to the current time depending on contents of the update.\n","key":"modifiedDateBehavior"},{"name":"newRevision","displayName":"newRevision","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether a blob upload should create a new revision. If false, the blob data in the current head revision is replaced. If true or not set, a new blob is created as head revision, and previous revisions are preserved (causing increased use of the user's data storage quota). (Default: true)","examples":["true"],"key":"newRevision"},{"name":"removeParents","displayName":"removeParents","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Comma-separated list of parent IDs to remove.","key":"removeParents"},{"name":"setModifiedDate","displayName":"setModifiedDate","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to set the modified date with the supplied modified date. (Default: false)","examples":["true"],"key":"setModifiedDate"},{"name":"updateViewedDate","displayName":"updateViewedDate","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to update the view date after successfully updating the file. (Default: true)","examples":["true"],"key":"updateViewedDate"},{"name":"convert","displayName":"convert","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to convert this file to the corresponding Google Docs format. (Default: false)\n","key":"convert"},{"name":"ocr","displayName":"ocr","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to attempt OCR on .jpg, .png, .gif, or .pdf uploads. (Default: false)\n","key":"ocr"},{"name":"ocrLanguage","displayName":"ocrLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"If ocr is true, hints at the language to use. Valid values are BCP 47 codes.","key":"ocrLanguage"},{"name":"pinned","displayName":"pinned","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to pin the head revision of the uploaded file. A file can have a maximum of 200 pinned revisions. (Default: false)\n","key":"pinned"},{"name":"timedTextLanguage","displayName":"timedTextLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The language of the timed text.","key":"timedTextLanguage"},{"name":"timedTextTrackName","displayName":"timedTextTrackName","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The timed text track name.","key":"timedTextTrackName"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"description":"By default, this responds with a Files resource in the response body.\nIf you provide the URL parameter alt=media, then it will respond with the file contents\nin the response body. Downloading content with alt=media only works if the content\nis stored in Drive, so it does not work for shortcuts. Also, it currently does\nnot support exporting Google Docs; use exportLinks from the Files resource instead.\nSee also Download Files.\n","key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["file"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates file metadata. This method supports patch semantics.","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"uploadType","displayName":"uploadType","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The type of upload request to the /upload URI. Acceptable values are:\nmedia - Simple upload. Upload the media only, without any metadata.\nmultipart - Multipart upload. Upload both the media and its metadata, in a single request.\nresumable - Resumable upload. Upload the file in a resumable fashion, using a series of at least two requests where the first request includes the metadata.\n","examples":["multipart"],"key":"uploadType"},{"name":"addParents","displayName":"addParents","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Comma-separated list of parent IDs to add.","key":"addParents"},{"name":"newRevision","displayName":"newRevision","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether a blob upload should create a new revision. If false, the blob data in the current head revision is replaced. If true or not set, a new blob is created as head revision, and previous revisions are preserved (causing increased use of the user's data storage quota). (Default: true)","examples":["true"],"key":"newRevision"},{"name":"removeParents","displayName":"removeParents","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Comma-separated list of parent IDs to remove.","key":"removeParents"},{"name":"setModifiedDate","displayName":"setModifiedDate","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to set the modified date with the supplied modified date. (Default: false)","examples":["true"],"key":"setModifiedDate"},{"name":"updateViewedDate","displayName":"updateViewedDate","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to update the view date after successfully updating the file. (Default: true)","examples":["true"],"key":"updateViewedDate"},{"name":"convert","displayName":"convert","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to convert this file to the corresponding Google Docs format. (Default: false)\n","key":"convert"},{"name":"ocr","displayName":"ocr","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to attempt OCR on .jpg, .png, .gif, or .pdf uploads. (Default: false)\n","key":"ocr"},{"name":"ocrLanguage","displayName":"ocrLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"If ocr is true, hints at the language to use. Valid values are BCP 47 codes.","key":"ocrLanguage"},{"name":"pinned","displayName":"pinned","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to pin the head revision of the uploaded file. A file can have a maximum of 200 pinned revisions. (Default: false)\n","key":"pinned"},{"name":"timedTextLanguage","displayName":"timedTextLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The language of the timed text.","key":"timedTextLanguage"},{"name":"timedTextTrackName","displayName":"timedTextTrackName","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The timed text track name.","key":"timedTextTrackName"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"X-Upload-Content-Type","displayName":"X-Upload-Content-Type","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"Set to the media MIME type of the upload data to be transferred in subsequent requests.","examples":["image/jpeg"],"key":"X-Upload-Content-Type"},{"name":"X-Upload-Content-Length","displayName":"X-Upload-Content-Length","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"Set to the number of bytes of upload data to be transferred in subsequent requests.  If the length is unknown at the time of this request, you can omit this header.","examples":["8000000"],"key":"X-Upload-Content-Length"},{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"DriveFileCreate","displayName":"File","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A type to be used when a new file to be created.","properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"description"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"text"}],"key":"indexableText"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"title"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"boolean","description":"Whether writers can share the document with other users.","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"writersCanShare"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"mimeType"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"}],"examples":["{\n  \"id\": \"string\",\n  \"title\" : \"My file to insert\" ,\n  \"description\" : \"This is a test file to be inserted to my Google Drive folder\",\n  \"indexableText\": {\n    \"text\": \"Test upload\"\n  },\n  \"mimeType\": \"application/json\",\n  \"labels\" : {\n    \"starred\" : false,\n    \"hidden\" : false,\n    \"trashed\" : false,\n    \"restricted\" : false,\n    \"viewed\" : false\n  } ,\n  \"modifiedDate\" : \"2002-10-02T10:00:00-05:00\",\n  \"lastViewedByMeDate\" :\"2002-10-02T15:00:00Z\",\n  \"markedViewedByMeDate\" : \"2002-10-02T15:00:00.05Z\",\n  \"writersCanShare\" : false,\n  \"parents\" : [\n    {\n      \"kind\" : \"drive#parentReference\",\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"parentLink\" : \"string\" ,\n      \"isRoot\" : true\n    }\n  ]\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["file"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates file metadata and/or content.","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}"},{"responses":[{"code":"200","description":"If successful, this method returns an empty response body.","key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"]}}],"description":"Permanently deletes a file by ID. Skips the trash. The currently authenticated user must own the file.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"type":"standardRequest","securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"relativeUri":"/{fileId}","displayName":"Get file","resources":[{"methods":[{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"},{"name":"convert","displayName":"convert","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to convert this file to the corresponding Google Docs format. (Default: false)\n","key":"convert"},{"name":"ocr","displayName":"ocr","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to attempt OCR on .jpg, .png, .gif, or .pdf uploads. (Default: false)\n","key":"ocr"},{"name":"ocrLanguage","displayName":"ocrLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"If ocr is true, hints at the language to use. Valid values are BCP 47 codes.","key":"ocrLanguage"},{"name":"pinned","displayName":"pinned","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to pin the head revision of the uploaded file. A file can have a maximum of 200 pinned revisions. (Default: false)\n","key":"pinned"},{"name":"timedTextLanguage","displayName":"timedTextLanguage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The language of the timed text.","key":"timedTextLanguage"},{"name":"timedTextTrackName","displayName":"timedTextTrackName","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The timed text track name.","key":"timedTextTrackName"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"201","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"description":"If successful, this method returns a Files resource in the response body.","key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"DriveFileCreate","displayName":"File","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A type to be used when a new file to be created.","properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"description"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"text"}],"key":"indexableText"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"title"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"boolean","description":"Whether writers can share the document with other users.","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"writersCanShare"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"mimeType"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"}],"examples":["{\n  \"id\": \"string\",\n  \"title\" : \"My file to insert\" ,\n  \"description\" : \"This is a test file to be inserted to my Google Drive folder\",\n  \"indexableText\": {\n    \"text\": \"Test upload\"\n  },\n  \"mimeType\": \"application/json\",\n  \"labels\" : {\n    \"starred\" : false,\n    \"hidden\" : false,\n    \"trashed\" : false,\n    \"restricted\" : false,\n    \"viewed\" : false\n  } ,\n  \"modifiedDate\" : \"2002-10-02T10:00:00-05:00\",\n  \"lastViewedByMeDate\" :\"2002-10-02T15:00:00Z\",\n  \"markedViewedByMeDate\" : \"2002-10-02T15:00:00.05Z\",\n  \"writersCanShare\" : false,\n  \"parents\" : [\n    {\n      \"kind\" : \"drive#parentReference\",\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"parentLink\" : \"string\" ,\n      \"isRoot\" : true\n    }\n  ]\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["visibility","file"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Creates a copy of the specified file.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/copy","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/copy","displayName":"/copy","relativeUriPathSegments":["copy"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/copy","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"application/json","displayName":"application/json","typePropertyKind":"TYPE_EXPRESSION","type":"object","description":"Do not supply a request body with this method.","key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Set the file's updated time to the current server time.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/touch","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/touch","displayName":"/touch","relativeUriPathSegments":["touch"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/touch","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"application/json","displayName":"application/json","typePropertyKind":"TYPE_EXPRESSION","type":"object","description":"Do not supply a request body with this method.","key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Moves a file to the trash. The currently authenticated user must own the file.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/trash","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/trash","displayName":"/trash","relativeUriPathSegments":["trash"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/trash","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"DriveFile","displayName":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"examples":["{\n  \"kind\": \"drive#file\",\n  \"id\": \"123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MTQ4NTQ2NzQwNzIwOA\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY\",\n  \"alternateLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"embedLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/preview\",\n  \"openWithLinks\": {\n    \"619683526622\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n    \"338347331578\": \"https://drive.google.com/file/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/view?usp=drivesdk\"\n  },\n  \"defaultOpenWithLink\": \"https://docs.google.com/document/d/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/edit?usp=drivesdk\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n  \"title\": \"Dummy file\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"labels\": {\n    \"starred\": false,\n    \"hidden\": false,\n    \"trashed\": false,\n    \"restricted\": false,\n    \"viewed\": true\n  },\n  \"createdDate\": \"2017-01-26T21:49:57.890Z\",\n  \"modifiedDate\": \"2017-01-26T21:50:07.208Z\",\n  \"modifiedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"lastViewedByMeDate\": \"2017-01-26T21:50:07.208Z\",\n  \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n  \"version\": \"1341924\",\n  \"parents\": [{\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0ADpy9PK_RiBOUk9PVA\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/parents/0ADpy9PK_RiBOUk9PVA\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0ADpy9PK_RiBOUk9PVA\",\n    \"isRoot\": true\n  }],\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&exportFormat=txt\"\n  },\n  \"userPermission\": {\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/49rcNZ38B0ih25Df2SiHRjHDrDU\\\"\",\n    \"id\": \"me\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/me\",\n    \"role\": \"owner\",\n    \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n    \"John Doe\"\n  ],\n  \"owners\": [{\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91827364558604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"capabilities\": {\n    \"canCopy\": true,\n    \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": true,\n  \"writersCanShare\": true,\n  \"shared\": false,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false,\n  \"spaces\": [\n    \"drive\"\n  ]\n}\n"],"key":"application/json"}],"description":"If successful, this method returns a Files resource in the response body.","key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly"]}}],"description":"Restores a file from the trash.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/untrash","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly"]}}],"relativeUri":"/untrash","displayName":"/untrash","relativeUriPathSegments":["untrash"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/untrash","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"ParentList","displayName":"ParentList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A list of Parents.","properties":[{"type":"string","description":"This is always drive#parentList.","enum":["drive#parentList"],"displayName":"kind","default":"drive#parentList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"array","description":"The actual list of parents.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\" : \"drive#parentList\" ,\n  \"etag\" : \"etag\" ,\n  \"selfLink\" : \"string\" ,\n  \"items\" : [\n    {\n      \"kind\" : \"drive#parentReference\" ,\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"parentLink\" : \"string\" ,\n      \"isRoot\" : \"boolean\"\n    }\n  ]\n}"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"application/json","displayName":"application/json","typePropertyKind":"TYPE_EXPRESSION","type":"object","description":"Do not supply a request body with this method.","key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Lists a file's parents.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"201","body":[{"name":"Parent","displayName":"Parent","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent.","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"string","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"examples":["{\n  \"kind\" : \"drive#parentReference\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"parentLink\" : \"string\" ,\n  \"isRoot\" : \"boolean\"\n}"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Parent","displayName":"Parent","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent.","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"string","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"examples":["{\n  \"kind\" : \"drive#parentReference\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"parentLink\" : \"string\" ,\n  \"isRoot\" : \"boolean\"\n}"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Adds a parent folder for a file.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"relativeUri":"/parents","displayName":"/parents","resources":[{"methods":[{"responses":[{"code":"200","body":[{"name":"Parent","displayName":"Parent","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent.","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"string","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"examples":["{\n  \"kind\" : \"drive#parentReference\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"parentLink\" : \"string\" ,\n  \"isRoot\" : \"boolean\"\n}"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a specific parent reference.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"parentId","displayName":"parentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the parent.","key":"parentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents/{parentId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Removes a parent from a file.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"parentId","displayName":"parentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the parent.","key":"parentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents/{parentId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"parentId","displayName":"parentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the parent.","key":"parentId"}],"relativeUri":"/{parentId}","displayName":"/{parentId}","relativeUriPathSegments":["{parentId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents/{parentId}","parentUrl":"/files/{fileId}/parents","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"parentId","displayName":"parentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the parent.","key":"parentId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["parents"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/parents","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"PermissionList","displayName":"PermissionList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#permissionList.","enum":["drive#permissionList"],"displayName":"kind","default":"drive#permissionList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"array","description":"The actual list of permissions.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\": \"drive#permissionList\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/MoUfb6FPjM-RROYNDTetfILYyGU\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions\",\n  \"items\": [{\n    \"kind\": \"drive#permission\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/yvUEdrglooOzkLQA04vr6yw-3oo\\\"\",\n    \"id\": \"99999999998604565116\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/permissions/99999999998604565116\",\n    \"name\": \"Paweł Psztyć\",\n    \"emailAddress\": \"jarrodek@gmail.com\",\n    \"domain\": \"gmail.com\",\n    \"role\": \"owner\",\n    \"type\": \"user\",\n    \"photoLink\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Lists a file's permissions.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"emailMessage","displayName":"emailMessage","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A custom message to include in notification emails.","key":"emailMessage"},{"name":"sendNotificationEmails","displayName":"sendNotificationEmails","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to send notification emails when sharing to users or groups. This parameter is ignored and an email is sent if the role is owner. (Default: true)","examples":["false"],"key":"sendNotificationEmails"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"201","body":[{"name":"Permission","displayName":"Permission","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"examples":["{\n  \"kind\" : \"drive#permission\" ,\n  \"etag\" : \"etag\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"name\" : \"string\" ,\n  \"emailAddress\" : \"string\" ,\n  \"domain\" : \"string\" ,\n  \"role\" : \"string\" ,\n  \"additionalRoles\" : [\n    \"string\"\n  ] ,\n  \"type\" : \"string\" ,\n  \"value\" : \"string\" ,\n  \"authKey\" : \"string\" ,\n  \"withLink\" : true ,\n  \"photoLink\" : \"string\"\n}\n"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"PermissionInsert","displayName":"PermissionInsert","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"Create a permission for a file.","properties":[{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"}],"examples":["{\n  \"role\": \"writer\",\n  \"type\": \"user\",\n  \"additionalRoles\": [\n    \"commenter\"\n  ],\n  \"value\": \"email@domain.com\",\n  \"withLink\": false\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Inserts a permission for a file.\n\nWarning: Concurrent permissions operations on the same file are not supported; only the last update is applied.\n","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"relativeUri":"/permissions","displayName":"/permissions","resources":[{"methods":[{"responses":[{"code":"200","body":[{"name":"Permission","displayName":"Permission","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"examples":["{\n  \"kind\" : \"drive#permission\" ,\n  \"etag\" : \"etag\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"name\" : \"string\" ,\n  \"emailAddress\" : \"string\" ,\n  \"domain\" : \"string\" ,\n  \"role\" : \"string\" ,\n  \"additionalRoles\" : [\n    \"string\"\n  ] ,\n  \"type\" : \"string\" ,\n  \"value\" : \"string\" ,\n  \"authKey\" : \"string\" ,\n  \"withLink\" : true ,\n  \"photoLink\" : \"string\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a permission by ID.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions/{permissionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"transferOwnership","displayName":"transferOwnership","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether changing a role to 'owner' should also downgrade the current owners to writers. (Default: false)","examples":["false"],"key":"transferOwnership"},{"name":"removeExpiration","displayName":"removeExpiration","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to remove the expiration date.","examples":["false"],"key":"removeExpiration"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Permission","displayName":"Permission","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"examples":["{\n  \"kind\" : \"drive#permission\" ,\n  \"etag\" : \"etag\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"name\" : \"string\" ,\n  \"emailAddress\" : \"string\" ,\n  \"domain\" : \"string\" ,\n  \"role\" : \"string\" ,\n  \"additionalRoles\" : [\n    \"string\"\n  ] ,\n  \"type\" : \"string\" ,\n  \"value\" : \"string\" ,\n  \"authKey\" : \"string\" ,\n  \"withLink\" : true ,\n  \"photoLink\" : \"string\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"PermissionInsert","displayName":"PermissionInsert","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"Create a permission for a file.","properties":[{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"}],"examples":["{\n  \"role\": \"writer\",\n  \"type\": \"user\",\n  \"additionalRoles\": [\n    \"commenter\"\n  ],\n  \"value\": \"email@domain.com\",\n  \"withLink\": false\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file"]}}],"description":"Updates a permission.\n\n**Warning**: Concurrent permissions operations on the same file are not supported; only the last update is applied.\n","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions/{permissionId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file"]}}],"description":"Deletes a permission from a file.\n\nWarning: Concurrent permissions operations on the same file are not supported; only the last update is applied.\n","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions/{permissionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"transferOwnership","displayName":"transferOwnership","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether changing a role to 'owner' should also downgrade the current owners to writers. (Default: false)","examples":["false"],"key":"transferOwnership"},{"name":"removeExpiration","displayName":"removeExpiration","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"Whether to remove the expiration date.","examples":["false"],"key":"removeExpiration"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Permission","displayName":"Permission","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"examples":["{\n  \"kind\" : \"drive#permission\" ,\n  \"etag\" : \"etag\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"name\" : \"string\" ,\n  \"emailAddress\" : \"string\" ,\n  \"domain\" : \"string\" ,\n  \"role\" : \"string\" ,\n  \"additionalRoles\" : [\n    \"string\"\n  ] ,\n  \"type\" : \"string\" ,\n  \"value\" : \"string\" ,\n  \"authKey\" : \"string\" ,\n  \"withLink\" : true ,\n  \"photoLink\" : \"string\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"PermissionInsert","displayName":"PermissionInsert","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"Create a permission for a file.","properties":[{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"}],"examples":["{\n  \"role\": \"writer\",\n  \"type\": \"user\",\n  \"additionalRoles\": [\n    \"commenter\"\n  ],\n  \"value\": \"email@domain.com\",\n  \"withLink\": false\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file"]}}],"description":"Updates a permission. This method supports patch semantics.\n\n**Warning**: Concurrent permissions operations on the same file are not supported; only the last update is applied.\n","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions/{permissionId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"relativeUri":"/{permissionId}","displayName":"/{permissionId}","relativeUriPathSegments":["{permissionId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions/{permissionId}","parentUrl":"/files/{fileId}/permissions","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"permissionId","displayName":"permissionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the permission.","key":"permissionId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["permissions"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/permissions","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"RevisionList","displayName":"RevisionList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#revisionList.","enum":["drive#revisionList"],"displayName":"kind","default":"drive#revisionList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"array","description":"The actual list of revisions.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\": \"drive#revisionList\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/3rG6hPU9Oh9jcNrEH-ycQsq5wdI\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions\",\n  \"items\": [{\n    \"kind\": \"drive#revision\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/Ins6tofAjfjdf2-GPE5UKvDlrK4\\\"\",\n    \"id\": \"1\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions/1\",\n    \"mimeType\": \"application/vnd.google-apps.document\",\n    \"modifiedDate\": \"2017-01-26T21:49:57.889Z\",\n    \"published\": false,\n    \"exportLinks\": {\n      \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=rtf\",\n      \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=odt\",\n      \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=html\",\n      \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=pdf\",\n      \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=epub\",\n      \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=zip\",\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=docx\",\n      \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=1&exportFormat=txt\"\n    },\n    \"lastModifyingUserName\": \"John Doe\",\n    \"lastModifyingUser\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true,\n      \"permissionId\": \"19000000008604565116\",\n      \"emailAddress\": \"john.doe@gmail.com\"\n    }\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Lists a file's revisions.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/revisions","displayName":"/revisions","resources":[{"methods":[{"responses":[{"code":"200","body":[{"name":"Revision","displayName":"Revision","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"},{"type":"string","description":"The size of the revision in bytes. This will only be populated on files with content stored in Drive.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\n\nKeys in the object is a mapping from export format to URL.\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this revision.","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"string","description":"A link back to this revision.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ETag of the revision.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"additionalProperties":true,"type":"object","description":"The last user to modify this revision.","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"string","description":"The ID of the revision.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#revision.","enum":["drive#revision"],"displayName":"kind","default":"drive#revision","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The MIME type of the revision.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"datetime","description":"Last time this revision was modified (formatted RFC 3339 timestamp).","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"Short term download URL for the file. This will only be populated on files with content stored in Drive.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this revision. This will only be populated on files with content stored in Drive.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"string","description":"A link to the published revision.","displayName":"publishedLink","name":"publishedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedLink"},{"type":"string","description":"The original filename when this revision was created. This will only be populated on files with content stored in Drive.","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"}],"examples":["{\n  \"kind\": \"drive#revision\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/fvpT5v9zqKx58VH7hDyyKEkeQYo\\\"\",\n  \"id\": \"5\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions/5\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"modifiedDate\": \"2017-01-26T21:50:08.573Z\",\n  \"published\": false,\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=txt\"\n  },\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"19000000008604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Gets a specific revision.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions/{revisionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Revision","displayName":"Revision","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"},{"type":"string","description":"The size of the revision in bytes. This will only be populated on files with content stored in Drive.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\n\nKeys in the object is a mapping from export format to URL.\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this revision.","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"string","description":"A link back to this revision.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ETag of the revision.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"additionalProperties":true,"type":"object","description":"The last user to modify this revision.","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"string","description":"The ID of the revision.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#revision.","enum":["drive#revision"],"displayName":"kind","default":"drive#revision","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The MIME type of the revision.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"datetime","description":"Last time this revision was modified (formatted RFC 3339 timestamp).","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"Short term download URL for the file. This will only be populated on files with content stored in Drive.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this revision. This will only be populated on files with content stored in Drive.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"string","description":"A link to the published revision.","displayName":"publishedLink","name":"publishedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedLink"},{"type":"string","description":"The original filename when this revision was created. This will only be populated on files with content stored in Drive.","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"}],"examples":["{\n  \"kind\": \"drive#revision\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/fvpT5v9zqKx58VH7hDyyKEkeQYo\\\"\",\n  \"id\": \"5\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions/5\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"modifiedDate\": \"2017-01-26T21:50:08.573Z\",\n  \"published\": false,\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=txt\"\n  },\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"19000000008604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"RevisionInsert","displayName":"RevisionInsert","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"An object used to create / update the revision resource.","properties":[{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"},{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"}],"examples":["{\n  \"pinned\": false,\n  \"published\": false,\n  \"publishAuto\": false,\n  \"publishedOutsideDomain\": false\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"]}}],"description":"Updates a revision.","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions/{revisionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"]}}],"description":"Removes a revision.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions/{revisionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Revision","displayName":"Revision","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"},{"type":"string","description":"The size of the revision in bytes. This will only be populated on files with content stored in Drive.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\n\nKeys in the object is a mapping from export format to URL.\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this revision.","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"string","description":"A link back to this revision.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ETag of the revision.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"additionalProperties":true,"type":"object","description":"The last user to modify this revision.","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"string","description":"The ID of the revision.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#revision.","enum":["drive#revision"],"displayName":"kind","default":"drive#revision","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The MIME type of the revision.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"datetime","description":"Last time this revision was modified (formatted RFC 3339 timestamp).","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"Short term download URL for the file. This will only be populated on files with content stored in Drive.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this revision. This will only be populated on files with content stored in Drive.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"string","description":"A link to the published revision.","displayName":"publishedLink","name":"publishedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedLink"},{"type":"string","description":"The original filename when this revision was created. This will only be populated on files with content stored in Drive.","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"}],"examples":["{\n  \"kind\": \"drive#revision\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/fvpT5v9zqKx58VH7hDyyKEkeQYo\\\"\",\n  \"id\": \"5\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions/5\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"modifiedDate\": \"2017-01-26T21:50:08.573Z\",\n  \"published\": false,\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=txt\"\n  },\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"19000000008604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Revision","displayName":"Revision","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"},{"type":"string","description":"The size of the revision in bytes. This will only be populated on files with content stored in Drive.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\n\nKeys in the object is a mapping from export format to URL.\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this revision.","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"string","description":"A link back to this revision.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ETag of the revision.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"additionalProperties":true,"type":"object","description":"The last user to modify this revision.","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"string","description":"The ID of the revision.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#revision.","enum":["drive#revision"],"displayName":"kind","default":"drive#revision","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The MIME type of the revision.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"datetime","description":"Last time this revision was modified (formatted RFC 3339 timestamp).","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"Short term download URL for the file. This will only be populated on files with content stored in Drive.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this revision. This will only be populated on files with content stored in Drive.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"string","description":"A link to the published revision.","displayName":"publishedLink","name":"publishedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedLink"},{"type":"string","description":"The original filename when this revision was created. This will only be populated on files with content stored in Drive.","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"}],"examples":["{\n  \"kind\": \"drive#revision\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/fvpT5v9zqKx58VH7hDyyKEkeQYo\\\"\",\n  \"id\": \"5\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/revisions/5\",\n  \"mimeType\": \"application/vnd.google-apps.document\",\n  \"modifiedDate\": \"2017-01-26T21:50:08.573Z\",\n  \"published\": false,\n  \"exportLinks\": {\n    \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=rtf\",\n    \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=odt\",\n    \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=html\",\n    \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=pdf\",\n    \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=epub\",\n    \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=zip\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=docx\",\n    \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY&revision=5&exportFormat=txt\"\n  },\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"19000000008604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  }\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"]}}],"description":"Updates a revision. This method supports patch semantics.","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions/{revisionId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"relativeUri":"/{revisionId}","displayName":"/{revisionId}","relativeUriPathSegments":["{revisionId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions/{revisionId}","parentUrl":"/files/{fileId}/revisions","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"revisionId","displayName":"revisionId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the revision.","key":"revisionId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["revisions"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/revisions","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"updatedMin","displayName":"updatedMin","typePropertyKind":"TYPE_EXPRESSION","type":"datetime","required":false,"description":"Only discussions that were updated after this timestamp will be returned. Formatted as an RFC 3339 timestamp.","key":"updatedMin"},{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to include deleted items. If set, all replies, including deleted replies (with content stripped) will be returned.","key":"includeDeleted"},{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"The maximum number of replies to include in the response, used for paging. Acceptable values are 0 to 100, inclusive","minimum":0,"maximum":1000,"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for changes.\nThe continuation token, used to page through large result sets. To get the next page of results, set this parameter to the value of \"nextPageToken\" from the previous response.\n","key":"pageToken"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"CommentList","displayName":"CommentList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#commentList.","enum":["drive#commentList"],"displayName":"kind","default":"drive#commentList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The token to use to request the next page of results.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"A link to the next page of comments.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextLink"},{"type":"array","description":"The actual list of comments.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"additionalProperties":true,"displayName":"Comment","name":"Comment","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}],"examples":["{\n  \"kind\": \"drive#commentList\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/comments\",\n  \"nextPageToken\": \"string\",\n  \"nextLink\": \"string\",\n  \"items\": [{\n    \"kind\": \"drive#comment\",\n    \"commentId\": \"AAAABGvGYkY\",\n    \"createdDate\": \"2017-01-26T22:27:04.655Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"Test comment\",\n    \"content\": \"Test comment\",\n    \"deleted\": false,\n    \"status\": \"open\",\n    \"context\": {\n      \"type\": \"text/html\",\n      \"value\": \"Hello\"\n    },\n    \"anchor\": \"kix.o11n7hdrivuh\",\n    \"fileId\": \"s7ggG6jZv5szIQL8Y5Ug-Iw\",\n    \"fileTitle\": \"Dummy file\",\n    \"replies\": [{\n      \"kind\": \"drive#commentReply\",\n      \"replyId\": \"AAAABGvGYkc\",\n      \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n      \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n      \"author\": {\n        \"kind\": \"drive#user\",\n        \"displayName\": \"John Doe\",\n        \"picture\": {\n          \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n        },\n        \"isAuthenticatedUser\": true\n      },\n      \"htmlContent\": \"This is the reply\",\n      \"content\": \"This is the reply\",\n      \"deleted\": false\n    }]\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"is":["results"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists a file's comments.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"201","body":[{"name":"Comment","displayName":"Comment","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"examples":["{\n  \"kind\": \"drive#comment\",\n  \"commentId\": \"AAAABGvGYkY\",\n  \"createdDate\": \"2017-01-26T22:27:04.655Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"Test comment\",\n  \"content\": \"Test comment\",\n  \"deleted\": false,\n  \"status\": \"open\",\n  \"context\": {\n    \"type\": \"text/html\",\n    \"value\": \"Hello\"\n  },\n  \"anchor\": \"kix.o11n7hdrivuh\",\n  \"fileId\": \"s7ggG6jZv5szIQL8Y5Ug-Iw\",\n  \"fileTitle\": \"Dummy file\",\n  \"replies\": [{\n    \"kind\": \"drive#commentReply\",\n    \"replyId\": \"AAAABGvGYkc\",\n    \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"This is the reply\",\n    \"content\": \"This is the reply\",\n    \"deleted\": false\n  }]\n}\n"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"CommentWritable","displayName":"CommentWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"}],"examples":["{\n  \"content\": \"Comment body\",\n  \"context\": {\n    \"type\": \"text/plain\",\n    \"value\": \"Comment body\"\n  }\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Creates a new comment on the given file.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/comments","displayName":"/comments","resources":[{"methods":[{"queryParameters":[{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"If set, this will succeed when retrieving a deleted comment, and will include any deleted replies. (Default: false)","examples":["true"],"key":"includeDeleted"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Comment","displayName":"Comment","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"examples":["{\n  \"kind\": \"drive#comment\",\n  \"commentId\": \"AAAABGvGYkY\",\n  \"createdDate\": \"2017-01-26T22:27:04.655Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"Test comment\",\n  \"content\": \"Test comment\",\n  \"deleted\": false,\n  \"status\": \"open\",\n  \"context\": {\n    \"type\": \"text/html\",\n    \"value\": \"Hello\"\n  },\n  \"anchor\": \"kix.o11n7hdrivuh\",\n  \"fileId\": \"s7ggG6jZv5szIQL8Y5Ug-Iw\",\n  \"fileTitle\": \"Dummy file\",\n  \"replies\": [{\n    \"kind\": \"drive#commentReply\",\n    \"replyId\": \"AAAABGvGYkc\",\n    \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"This is the reply\",\n    \"content\": \"This is the reply\",\n    \"deleted\": false\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a comment by ID.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Comment","displayName":"Comment","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"examples":["{\n  \"kind\": \"drive#comment\",\n  \"commentId\": \"AAAABGvGYkY\",\n  \"createdDate\": \"2017-01-26T22:27:04.655Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"Test comment\",\n  \"content\": \"Test comment\",\n  \"deleted\": false,\n  \"status\": \"open\",\n  \"context\": {\n    \"type\": \"text/html\",\n    \"value\": \"Hello\"\n  },\n  \"anchor\": \"kix.o11n7hdrivuh\",\n  \"fileId\": \"s7ggG6jZv5szIQL8Y5Ug-Iw\",\n  \"fileTitle\": \"Dummy file\",\n  \"replies\": [{\n    \"kind\": \"drive#commentReply\",\n    \"replyId\": \"AAAABGvGYkc\",\n    \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"This is the reply\",\n    \"content\": \"This is the reply\",\n    \"deleted\": false\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"CommentWritable","displayName":"CommentWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"}],"examples":["{\n  \"content\": \"Comment body\",\n  \"context\": {\n    \"type\": \"text/plain\",\n    \"value\": \"Comment body\"\n  }\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Deletes a comment.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Comment","displayName":"Comment","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"examples":["{\n  \"kind\": \"drive#comment\",\n  \"commentId\": \"AAAABGvGYkY\",\n  \"createdDate\": \"2017-01-26T22:27:04.655Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"Test comment\",\n  \"content\": \"Test comment\",\n  \"deleted\": false,\n  \"status\": \"open\",\n  \"context\": {\n    \"type\": \"text/html\",\n    \"value\": \"Hello\"\n  },\n  \"anchor\": \"kix.o11n7hdrivuh\",\n  \"fileId\": \"s7ggG6jZv5szIQL8Y5Ug-Iw\",\n  \"fileTitle\": \"Dummy file\",\n  \"replies\": [{\n    \"kind\": \"drive#commentReply\",\n    \"replyId\": \"AAAABGvGYkc\",\n    \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"This is the reply\",\n    \"content\": \"This is the reply\",\n    \"deleted\": false\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"CommentWritable","displayName":"CommentWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"}],"examples":["{\n  \"content\": \"Comment body\",\n  \"context\": {\n    \"type\": \"text/plain\",\n    \"value\": \"Comment body\"\n  }\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates an existing comment. This method supports patch semantics.","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"relativeUri":"/{commentId}","displayName":"/{commentId}","resources":[{"methods":[{"queryParameters":[{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to include deleted items. If set, all replies, including deleted replies (with content stripped) will be returned.","key":"includeDeleted"},{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"The maximum number of replies to include in the response, used for paging. Acceptable values are 0 to 100, inclusive","minimum":0,"maximum":1000,"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for changes.\nThe continuation token, used to page through large result sets. To get the next page of results, set this parameter to the value of \"nextPageToken\" from the previous response.\n","key":"pageToken"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"ReplyList","displayName":"ReplyList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#commentReplyList.","enum":["drive#commentReplyList"],"displayName":"kind","default":"drive#commentReplyList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The token to use to request the next page of results.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"A link to the next page of comments.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextLink"},{"type":"array","description":"The actual list of reply.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\": \"drive#commentReplyList\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/comments/AAAABGvGYkY/replies\",\n  \"items\": [{\n    \"kind\": \"drive#commentReply\",\n    \"replyId\": \"AAAABGvGYkc\",\n    \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n    \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n    \"author\": {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n        \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true\n    },\n    \"htmlContent\": \"This is the reply\",\n    \"content\": \"This is the reply\",\n    \"deleted\": false\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"is":["results"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists all of the replies to a comment.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"201","body":[{"name":"Reply","displayName":"Reply","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"},{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"}],"examples":["{\n  \"kind\": \"drive#commentReply\",\n  \"replyId\": \"AAAABGvGYkc\",\n  \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"This is the reply\",\n  \"content\": \"This is the reply\",\n  \"deleted\": false\n}\n"],"key":"application/json"}],"description":"","key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"ReplyWritable","displayName":"ReplyWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"}],"examples":["{\n  \"content\": \"Another replty\",\n  \"verb\": \"reopen\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Creates a new reply to the given comment.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/replies","displayName":"/replies","resources":[{"methods":[{"queryParameters":[{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":false,"required":false,"description":"If set, this will succeed when retrieving a deleted reply. (Default: false)","examples":["true"],"key":"includeDeleted"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Reply","displayName":"Reply","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"},{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"}],"examples":["{\n  \"kind\": \"drive#commentReply\",\n  \"replyId\": \"AAAABGvGYkc\",\n  \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"This is the reply\",\n  \"content\": \"This is the reply\",\n  \"deleted\": false\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a reply.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"},{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies/{replyId}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Reply","displayName":"Reply","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"},{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"}],"examples":["{\n  \"kind\": \"drive#commentReply\",\n  \"replyId\": \"AAAABGvGYkc\",\n  \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"This is the reply\",\n  \"content\": \"This is the reply\",\n  \"deleted\": false\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"ReplyWritable","displayName":"ReplyWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"}],"examples":["{\n  \"content\": \"Another replty\",\n  \"verb\": \"reopen\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates an existing reply.","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"},{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies/{replyId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Deletes a reply.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"},{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies/{replyId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"Reply","displayName":"Reply","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"},{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"}],"examples":["{\n  \"kind\": \"drive#commentReply\",\n  \"replyId\": \"AAAABGvGYkc\",\n  \"createdDate\": \"2017-01-26T22:27:31.702Z\",\n  \"modifiedDate\": \"2017-01-26T22:27:31.702Z\",\n  \"author\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"//lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr8Y/YmMhVu8Ol-I/s96-k-no/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true\n  },\n  \"htmlContent\": \"This is the reply\",\n  \"content\": \"This is the reply\",\n  \"deleted\": false\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"ReplyWritable","displayName":"ReplyWritable","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"}],"examples":["{\n  \"content\": \"Another replty\",\n  \"verb\": \"reopen\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates an existing reply. This method supports patch semantics.","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"},{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies/{replyId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"relativeUri":"/{replyId}","displayName":"/{replyId}","relativeUriPathSegments":["{replyId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies/{replyId}","parentUrl":"/files/{fileId}/comments/{commentId}/replies","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"},{"name":"replyId","displayName":"replyId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the reply.","key":"replyId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["replies"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}/replies","parentUrl":"/files/{fileId}/comments/{commentId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["{commentId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments/{commentId}","parentUrl":"/files/{fileId}/comments","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"commentId","displayName":"commentId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the comment.","key":"commentId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["comments"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/comments","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"revision","displayName":"revision","typePropertyKind":"TYPE_EXPRESSION","type":"integer","required":false,"description":"The revision of the Realtime API data model to export. Revisions start at 1 (the initial empty data model) and are incremented with each change. If this parameter is excluded, the most recent data model will be returned.","examples":["5"],"key":"revision"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"application/json","displayName":"application/json","typePropertyKind":"TYPE_EXPRESSION","type":"object","key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly"]}}],"description":"Exports the contents of the Realtime API data model associated with this file as JSON.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/realtime","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"uploadType","displayName":"uploadType","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The type of upload request to the /upload URI. Acceptable values are:\n\n- **media** - Simple upload. Upload the media data.\n- **resumable** - Resumable upload. Upload the file in a resumable fashion, using a series of at least two requests.\n","enum":["media","resumable"],"examples":["media"],"key":"uploadType"},{"name":"baseRevision","displayName":"baseRevision","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The revision of the model to diff the uploaded model against. If set, the uploaded model is diffed against the provided revision and those differences are merged with any changes made to the model after the provided revision. If not set, the uploaded model replaces the current model on the server.","key":"baseRevision"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly"]}}],"description":"Overwrites the Realtime API data model associated with this file with the provided JSON data model.\n\nThis method supports an /upload URI and accepts uploaded media with the following characteristics:\n\n- **Maximum file size**: 10MB\n- **Accepted Media MIME** types: */*\n","displayName":"update","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/realtime","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly"]}}],"relativeUri":"/realtime","displayName":"/realtime","relativeUriPathSegments":["realtime"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/realtime","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"PropertyList","displayName":"PropertyList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#propertyList.","displayName":"kind","default":"drive#propertyList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"array","description":"The list of properties.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}],"examples":["{\n  \"kind\": \"drive#propertyList\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9YXpHrwrvG9Q0Dxxvs1mrmtpsw8\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/properties\",\n  \"items\": [{\n    \"kind\": \"drive#property\",\n    \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/123dK-h456ysbyF_ol3Pc13B789j1qgb4wAbCdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n    \"key\": \"propertyKey\",\n    \"visibility\": \"PRIVATE\",\n    \"value\": \"property value\"\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists a file's properties.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"201","body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Adds a property to a file.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/properties","displayName":"/properties","resources":[{"methods":[{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"is":["visibility"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a property by its key.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties/{propertyKey}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["visibility"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates a property.","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties/{propertyKey}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"is":["visibility"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Deletes a property.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties/{propertyKey}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"visibility","displayName":"visibility","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"The visibility of the property.\nThe visibility of the new file. This parameter is only relevant when convert=false.\n\nAcceptable values are:\n- **\"DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n\nThe visibility of the new file. This parameter is only relevant when the source is not a native Google Doc and convert=false.\n\nAcceptable values are:\n- **DEFAULT\"**: The visibility of the new file is determined by the user's default visibility/sharing policies. (default)\n- **\"PRIVATE\"**: The new file will be visible to only the owner.\n","key":"visibility"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Property","displayName":"Property","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"examples":["{\n \"kind\": \"drive#property\",\n \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/9yGD9cs1TBjhL0-_UdlnJlKhQ6I\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/files/100dK-h3SlysbyF_ol3Pc13B14Sj1qgb4wZzVdIQrNBY/properties/propertyKey?visibility=PRIVATE\",\n \"key\": \"propertyKey\",\n \"visibility\": \"PRIVATE\",\n \"value\": \"property value\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"is":["visibility"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Updates a property. This method supports patch semantics.","method":"patch","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties/{propertyKey}","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"relativeUri":"/{propertyKey}","displayName":"/{propertyKey}","relativeUriPathSegments":["{propertyKey}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties/{propertyKey}","parentUrl":"/files/{fileId}/properties","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"},{"name":"propertyKey","displayName":"propertyKey","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The key of the property.","key":"propertyKey"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["properties"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}/properties","parentUrl":"/files/{fileId}","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["{fileId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{fileId}","parentUrl":"/files","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"fileId","displayName":"fileId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID for the file in question.","key":"fileId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Permanently deletes all of the user's trashed files.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/trash","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/trash","displayName":"/trash","relativeUriPathSegments":["trash"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/trash","parentUrl":"/files","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"201","body":[{"name":"Child","displayName":"Child","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A reference to a folder's child.","properties":[{"type":"string","description":"This is always drive#childReference.","enum":["drive#childReference"],"displayName":"kind","default":"drive#childReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the child.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the child.","displayName":"childLink","name":"childLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"childLink"}],"examples":["{\n  \"kind\" : \"drive#childReference\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"childLink\" : \"string\"\n}"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Child","displayName":"Child","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"A reference to a folder's child.","properties":[{"type":"string","description":"This is always drive#childReference.","enum":["drive#childReference"],"displayName":"kind","default":"drive#childReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the child.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the child.","displayName":"childLink","name":"childLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"childLink"}],"examples":["{\n  \"kind\" : \"drive#childReference\" ,\n  \"id\" : \"string\" ,\n  \"selfLink\" : \"string\" ,\n  \"childLink\" : \"string\"\n}"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Inserts a file into a folder.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"Maximum number of children to return. Acceptable values are 0 to 1000, inclusive. (Default: 100)","examples":["25"],"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for children.","key":"pageToken"},{"name":"q","displayName":"q","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Query string for searching children. See Searching for files for more information about supported fields and operations.","key":"q"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"ChildrenList","displayName":"ChildrenList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#childList.","enum":["drive#childList"],"displayName":"kind","default":"drive#childList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The page token for the next page of children.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},{"type":"string","description":"A link to the next page of children.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},{"type":"array","description":"The actual list of children.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\" : \"drive#childList\" ,\n  \"etag\" : \"etag\" ,\n  \"selfLink\" : \"string\" ,\n  \"nextPageToken\" : \"string\" ,\n  \"nextLink\" : \"string\" ,\n  \"items\" : [\n    {\n      \"kind\" : \"drive#childReference\" ,\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"childLink\" : \"string\"\n    }\n  ]\n}"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists a folder's children. To list all children of the root folder, use the alias root for the folderId value.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"}],"relativeUri":"/{folderId}/children","displayName":"/{folderId}/children","resources":[{"methods":[{"responses":[{"code":"204","key":"204"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Removes a child from a folder.","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"},{"name":"childId","displayName":"childId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"childId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children/{childId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"ChildrenList","displayName":"ChildrenList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#childList.","enum":["drive#childList"],"displayName":"kind","default":"drive#childList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The page token for the next page of children.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},{"type":"string","description":"A link to the next page of children.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},{"type":"array","description":"The actual list of children.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n  \"kind\" : \"drive#childList\" ,\n  \"etag\" : \"etag\" ,\n  \"selfLink\" : \"string\" ,\n  \"nextPageToken\" : \"string\" ,\n  \"nextLink\" : \"string\" ,\n  \"items\" : [\n    {\n      \"kind\" : \"drive#childReference\" ,\n      \"id\" : \"string\" ,\n      \"selfLink\" : \"string\" ,\n      \"childLink\" : \"string\"\n    }\n  ]\n}"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a specific child reference.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"},{"name":"childId","displayName":"childId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"childId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children/{childId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"childId","displayName":"childId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"childId"}],"relativeUri":"/{childId}","displayName":"/{childId}","relativeUriPathSegments":["{childId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children/{childId}","parentUrl":"/files/{folderId}/children","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"},{"name":"childId","displayName":"childId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"childId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["{folderId}","children"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files/{folderId}/children","parentUrl":"/files","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"folderId","displayName":"folderId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"key":"folderId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["files"],"absoluteUri":"https://www.googleapis.com/drive/{version}/files","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"includeSubscribed","displayName":"includeSubscribed","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"When calculating the number of remaining change IDs, whether to include public files the user has opened and shared files.\nWhen set to false, this counts only change IDs for owned files and any shared or public files that the user has explicitly\nadded to a folder they own. (Default: true)\n","examples":["true"],"key":"includeSubscribed"},{"name":"maxChangeIdCount","displayName":"maxChangeIdCount","typePropertyKind":"TYPE_EXPRESSION","type":"integer","required":false,"description":"Maximum number of remaining change IDs to count","examples":["700000"],"key":"maxChangeIdCount"},{"name":"startChangeId","displayName":"startChangeId","typePropertyKind":"TYPE_EXPRESSION","type":"integer","required":false,"description":"Change ID to start counting from when calculating number of remaining change IDs","examples":["700000"],"key":"startChangeId"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"About","displayName":"About","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"array","description":"List of additional features enabled on this account.","displayName":"features","name":"features","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The name of the feature.","displayName":"featureName","name":"featureName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"featureName"},{"type":"number","description":"The request limit rate for this feature, in queries per second.","displayName":"featureRate","name":"featureRate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"featureRate"}],"additionalProperties":true,"displayName":"Feature","name":"Feature","typePropertyKind":"TYPE_EXPRESSION"},"key":"features"},{"type":"string","description":"The total number of quota bytes.","displayName":"quotaBytesTotal","name":"quotaBytesTotal","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesTotal"},{"type":"boolean","description":"A boolean indicating whether the authenticated app is installed by the authenticated user.","displayName":"isCurrentAppInstalled","name":"isCurrentAppInstalled","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isCurrentAppInstalled"},{"type":"string","description":"The number of quota bytes used by trashed items.","displayName":"quotaBytesUsedInTrash","name":"quotaBytesUsedInTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsedInTrash"},{"type":"string","description":"The name of the current user.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The domain sharing policy for the current user. Possible values are:\n\n- **allowed**\n- **allowedWithWarning**\n- **incomingOnly**\n- **disallowed**\n","displayName":"domainSharingPolicy","name":"domainSharingPolicy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domainSharingPolicy"},{"type":"array","description":"The palette of allowable folder colors as RGB hex strings.","displayName":"folderColorPalette","name":"folderColorPalette","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"folderColorPalette"},{"type":"string","description":"The current user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"A link back to this item.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ETag of the item.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"The allowable export formats.","displayName":"exportFormats","name":"exportFormats","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"source"},{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"targets"}],"additionalProperties":true,"displayName":"ExportFormat","name":"ExportFormat","typePropertyKind":"TYPE_EXPRESSION"},"key":"exportFormats"},{"type":"string","description":"The type of the user's storage quota. Possible values are:\n\n- **LIMITED**\n- **UNLIMITED**\n","displayName":"quotaType","name":"quotaType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaType"},{"type":"array","displayName":"quotaBytesByService","name":"quotaBytesByService","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"quotaBytesByService"},{"type":"array","description":"List of max upload sizes for each file type. The most specific type takes precedence.","displayName":"maxUploadSizes","name":"maxUploadSizes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The file type.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The max upload size for this type.","displayName":"size","name":"size","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"size"}],"additionalProperties":true,"displayName":"UploadSize","name":"UploadSize","typePropertyKind":"TYPE_EXPRESSION"},"key":"maxUploadSizes"},{"type":"string","description":"The user's language or locale code, as defined by BCP 47, with some extensions from Unicode's LDML format (http://www.unicode.org/reports/tr35/).","displayName":"languageCode","name":"languageCode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"languageCode"},{"type":"string","description":"The number of remaining change ids.","displayName":"remainingChangeIds","name":"remainingChangeIds","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"remainingChangeIds"},{"type":"array","description":"Information about supported additional roles per file type. The most specific type takes precedence.","displayName":"additionalRoleInfo","name":"additionalRoleInfo","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The content type that this additional role info applies to.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"array","description":"The supported additional roles per primary role.","displayName":"roleSets","name":"roleSets","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"A primary permission role.","displayName":"primaryRole","name":"primaryRole","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"primaryRole"},{"type":"array","description":"The supported additional roles with the primary role.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"}],"additionalProperties":true,"displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION"},"key":"roleSets"}],"additionalProperties":true,"displayName":"AdditionalRoleInfo","name":"AdditionalRoleInfo","typePropertyKind":"TYPE_EXPRESSION"},"key":"additionalRoleInfo"},{"type":"string","description":"This is always drive#about.","enum":["drive#about"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The number of quota bytes used by Google Drive.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"The largest change id.","displayName":"largestChangeId","name":"largestChangeId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"largestChangeId"},{"type":"string","description":"The id of the root folder.","displayName":"rootFolderId","name":"rootFolderId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rootFolderId"},{"additionalProperties":true,"type":"object","description":"The authenticated user.","displayName":"user","name":"user","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"user"},{"type":"string","description":"The number of quota bytes used by all Google apps (Drive, Picasa, etc.).","displayName":"quotaBytesUsedAggregate","name":"quotaBytesUsedAggregate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsedAggregate"},{"type":"array","description":"The allowable import formats.","displayName":"importFormats","name":"importFormats","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The imported file's content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"source"},{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"targets"}],"additionalProperties":true,"displayName":"ImportFormat","name":"ImportFormat","typePropertyKind":"TYPE_EXPRESSION"},"key":"importFormats"}],"examples":["{\n  \"kind\": \"drive#about\",\n  \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/CJNorAI8wKpANsLwX5GAPdH9IPQ\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/about\",\n  \"name\": \"John Doe\",\n  \"user\": {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/BBBAAABCr5Y/YoMhXu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"91796993228604565116\",\n    \"emailAddress\": \"john.doe@gmail.com\"\n  },\n  \"quotaBytesTotal\": \"124554051584\",\n  \"quotaBytesUsed\": \"2064607222\",\n  \"quotaBytesUsedAggregate\": \"100222740716\",\n  \"quotaBytesUsedInTrash\": \"481018653\",\n  \"quotaType\": \"LIMITED\",\n  \"quotaBytesByService\": [{\n      \"serviceName\": \"DRIVE\",\n      \"bytesUsed\": \"2063190593\"\n    },\n    {\n      \"serviceName\": \"GMAIL\",\n      \"bytesUsed\": \"3334049823\"\n    },\n    {\n      \"serviceName\": \"PHOTOS\",\n      \"bytesUsed\": \"94824083671\"\n    }\n  ],\n  \"largestChangeId\": \"1360600\",\n  \"rootFolderId\": \"0ADpy9PK_RiBOUk9PVA\",\n  \"domainSharingPolicy\": \"allowed\",\n  \"permissionId\": \"91796993228604565116\",\n  \"importFormats\": [{\n      \"source\": \"application/x-vnd.oasis.opendocument.presentation\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"text/tab-separated-values\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"image/jpeg\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"image/bmp\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"image/gif\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-excel.sheet.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.template\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-powerpoint.presentation.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-word.template.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"image/pjpeg\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.script+text/plain\",\n      \"targets\": [\n        \"application/vnd.google-apps.script\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-excel\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.sun.xml.writer\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-word.document.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"text/rtf\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"text/plain\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.oasis.opendocument.spreadsheet\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/x-vnd.oasis.opendocument.spreadsheet\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"image/png\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/x-vnd.oasis.opendocument.text\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/msword\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/pdf\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/json\",\n      \"targets\": [\n        \"application/vnd.google-apps.script\"\n      ]\n    },\n    {\n      \"source\": \"application/x-msmetafile\",\n      \"targets\": [\n        \"application/vnd.google-apps.drawing\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.spreadsheetml.template\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-powerpoint\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-excel.template.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"image/x-bmp\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/rtf\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.presentationml.template\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"image/x-png\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"text/html\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.oasis.opendocument.text\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.script+json\",\n      \"targets\": [\n        \"application/vnd.google-apps.script\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.ms-powerpoint.template.macroenabled.12\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"text/csv\",\n      \"targets\": [\n        \"application/vnd.google-apps.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.oasis.opendocument.presentation\",\n      \"targets\": [\n        \"application/vnd.google-apps.presentation\"\n      ]\n    },\n    {\n      \"source\": \"image/jpg\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    },\n    {\n      \"source\": \"text/richtext\",\n      \"targets\": [\n        \"application/vnd.google-apps.document\"\n      ]\n    }\n  ],\n  \"exportFormats\": [{\n      \"source\": \"application/vnd.google-apps.form\",\n      \"targets\": [\n        \"application/zip\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.document\",\n      \"targets\": [\n        \"application/rtf\",\n        \"application/vnd.oasis.opendocument.text\",\n        \"text/html\",\n        \"application/pdf\",\n        \"application/epub+zip\",\n        \"application/zip\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        \"text/plain\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.drawing\",\n      \"targets\": [\n        \"image/svg+xml\",\n        \"image/png\",\n        \"application/pdf\",\n        \"image/jpeg\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.spreadsheet\",\n      \"targets\": [\n        \"application/x-vnd.oasis.opendocument.spreadsheet\",\n        \"text/tab-separated-values\",\n        \"application/pdf\",\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n        \"text/csv\",\n        \"application/zip\",\n        \"application/vnd.oasis.opendocument.spreadsheet\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.script\",\n      \"targets\": [\n        \"application/vnd.google-apps.script+json\"\n      ]\n    },\n    {\n      \"source\": \"application/vnd.google-apps.presentation\",\n      \"targets\": [\n        \"application/vnd.oasis.opendocument.presentation\",\n        \"application/pdf\",\n        \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n        \"text/plain\"\n      ]\n    }\n  ],\n  \"additionalRoleInfo\": [{\n      \"type\": \"application/vnd.google-apps.drawing\",\n      \"roleSets\": [{\n        \"primaryRole\": \"reader\",\n        \"additionalRoles\": [\n          \"commenter\"\n        ]\n      }]\n    },\n    {\n      \"type\": \"application/vnd.google-apps.document\",\n      \"roleSets\": [{\n        \"primaryRole\": \"reader\",\n        \"additionalRoles\": [\n          \"commenter\"\n        ]\n      }]\n    },\n    {\n      \"type\": \"application/vnd.google-apps.presentation\",\n      \"roleSets\": [{\n        \"primaryRole\": \"reader\",\n        \"additionalRoles\": [\n          \"commenter\"\n        ]\n      }]\n    },\n    {\n      \"type\": \"*\",\n      \"roleSets\": [{\n        \"primaryRole\": \"reader\",\n        \"additionalRoles\": [\n          \"commenter\"\n        ]\n      }]\n    },\n    {\n      \"type\": \"application/vnd.google-apps.spreadsheet\",\n      \"roleSets\": [{\n        \"primaryRole\": \"reader\",\n        \"additionalRoles\": [\n          \"commenter\"\n        ]\n      }]\n    },\n    {\n      \"type\": \"application/vnd.google-apps.*\",\n      \"roleSets\": []\n    }\n  ],\n  \"features\": [{\n      \"featureName\": \"ocr\"\n    },\n    {\n      \"featureName\": \"translation\",\n      \"featureRate\": 2.0\n    }\n  ],\n  \"maxUploadSizes\": [{\n      \"type\": \"application/vnd.google-apps.document\",\n      \"size\": \"10485760\"\n    },\n    {\n      \"type\": \"application/vnd.google-apps.spreadsheet\",\n      \"size\": \"104857600\"\n    },\n    {\n      \"type\": \"application/vnd.google-apps.presentation\",\n      \"size\": \"104857600\"\n    },\n    {\n      \"type\": \"application/vnd.google-apps.drawing\",\n      \"size\": \"2097152\"\n    },\n    {\n      \"type\": \"application/pdf\",\n      \"size\": \"5242880000000\"\n    },\n    {\n      \"type\": \"*\",\n      \"size\": \"5242880000000\"\n    }\n  ],\n  \"isCurrentAppInstalled\": true,\n  \"languageCode\": \"en-US\",\n  \"folderColorPalette\": [\n    \"#ac725e\",\n    \"#d06b64\",\n    \"#f83a22\",\n    \"#fa573c\",\n    \"#ff7537\",\n    \"#ffad46\",\n    \"#fad165\",\n    \"#fbe983\",\n    \"#b3dc6c\",\n    \"#7bd148\",\n    \"#16a765\",\n    \"#42d692\",\n    \"#92e1c0\",\n    \"#9fe1e7\",\n    \"#9fc6e7\",\n    \"#4986e7\",\n    \"#9a9cff\",\n    \"#b99aff\",\n    \"#a47ae2\",\n    \"#cd74e6\",\n    \"#f691b2\",\n    \"#cca6ac\",\n    \"#cabdbf\",\n    \"#8f8f8f\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Gets the information about the current user along with Drive API settings.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/about","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/about","displayName":"About","relativeUriPathSegments":["about"],"absoluteUri":"https://www.googleapis.com/drive/{version}/about","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"includeSubscribed","displayName":"includeSubscribed","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to include public files the user has opened and shared files.\nWhen set to false, the list only includes owned files plus any shared or public\nfiles the user has explicitly added to a folder they own.\n","examples":["true"],"key":"includeSubscribed"},{"name":"startChangeId","displayName":"startChangeId","typePropertyKind":"TYPE_EXPRESSION","type":"integer","required":false,"description":"Change ID to start listing changes from.","examples":["700000"],"key":"startChangeId"},{"name":"spaces","displayName":"spaces","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of spaces to query. Supported values are:\n\n- **drive**\n- **appDataFolder**\n- **photos**\n","key":"spaces"},{"name":"includeDeleted","displayName":"includeDeleted","typePropertyKind":"TYPE_EXPRESSION","type":"boolean","default":true,"required":false,"description":"Whether to include deleted items. If set, all replies, including deleted replies (with content stripped) will be returned.","key":"includeDeleted"},{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":100,"required":false,"description":"The maximum number of replies to include in the response, used for paging. Acceptable values are 0 to 100, inclusive","minimum":0,"maximum":1000,"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Page token for changes.\nThe continuation token, used to page through large result sets. To get the next page of results, set this parameter to the value of \"nextPageToken\" from the previous response.\n","key":"pageToken"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"ChangeList","displayName":"ChangeList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#changeList.","enum":["drive#changeList"],"displayName":"kind","default":"drive#changeList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The page token for the next page of changes.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},{"type":"string","description":"A link to the next page of changes.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},{"type":"string","description":"The current largest change ID.","displayName":"largestChangeId","name":"largestChangeId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"largestChangeId"},{"type":"array","description":"The actual list of changes.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}],"examples":["{\n \"kind\": \"drive#changeList\",\n \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/ag6e1lAP_iB5Won11XGl5SMdZJw\\\"\",\n \"selfLink\": \"https://www.googleapis.com/drive/v2/changes?maxResults=10\",\n \"nextPageToken\": \"74291\",\n \"nextLink\": \"https://www.googleapis.com/drive/v2/changes?maxResults=10&pageToken=74291\",\n \"largestChangeId\": \"1360609\",\n \"items\": [\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"19115\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2011-06-14T09:23:28.208Z\",\n   \"deleted\": false,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/19115\",\n   \"fileId\": \"0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n   \"file\": {\n    \"kind\": \"drive#file\",\n    \"id\": \"0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n    \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/MTMwNzg4OTMxNjYxMw\\\"\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n    \"alternateLink\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n    \"embedLink\": \"https://drive.google.com/embeddedfolderview?id=0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n    \"openWithLinks\": {\n     \"407408718192\": \"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&client_id=407408718192.apps.googleusercontent.com&response_type=code&access_type=offline&redirect_uri=https://developers.google.com/oauthplayground&user_id=113648393775261658002&state=%7B%22ids%22:%5B%220Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5%22%5D,%22action%22:%22open%22,%22userId%22:%22113648393775261658002%22%7D\",\n     \"1095523759147\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\"\n    },\n    \"defaultOpenWithLink\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n    \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_shared_collection_list_1.png\",\n    \"title\": \"File title\",\n    \"mimeType\": \"application/vnd.google-apps.folder\",\n    \"labels\": {\n     \"starred\": false,\n     \"hidden\": false,\n     \"trashed\": false,\n     \"restricted\": false,\n     \"viewed\": true\n    },\n    \"createdDate\": \"2011-06-12T14:32:49.377Z\",\n    \"modifiedDate\": \"2011-06-12T14:35:16.613Z\",\n    \"lastViewedByMeDate\": \"2011-06-12T14:32:49.753Z\",\n    \"markedViewedByMeDate\": \"2011-06-12T14:34:05.946Z\",\n    \"version\": \"19114\",\n    \"parents\": [\n     {\n      \"kind\": \"drive#parentReference\",\n      \"id\": \"0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n      \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5/parents/0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n      \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n      \"isRoot\": false\n     }\n    ],\n    \"userPermission\": {\n     \"kind\": \"drive#permission\",\n     \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/dWNdLtTomm45p40ScgKOq1gwjHk\\\"\",\n     \"id\": \"me\",\n     \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5/permissions/me\",\n     \"role\": \"owner\",\n     \"type\": \"user\"\n    },\n    \"quotaBytesUsed\": \"0\",\n    \"ownerNames\": [\n     \"John Doe\"\n    ],\n    \"owners\": [\n     {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n       \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true,\n      \"permissionId\": \"92796993228604565116\",\n      \"emailAddress\": \"author@gmail.com\"\n     }\n    ],\n    \"lastModifyingUserName\": \"John Doe\",\n    \"lastModifyingUser\": {\n     \"kind\": \"drive#user\",\n     \"displayName\": \"John Doe\",\n     \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n     },\n     \"isAuthenticatedUser\": true,\n     \"permissionId\": \"92796993228604565116\",\n     \"emailAddress\": \"author@gmail.com\"\n    },\n    \"capabilities\": {\n     \"canCopy\": false,\n     \"canEdit\": true\n    },\n    \"editable\": true,\n    \"copyable\": false,\n    \"writersCanShare\": true,\n    \"shared\": true,\n    \"explicitlyTrashed\": false,\n    \"appDataContents\": false\n   }\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"23423\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2011-09-15T11:20:17.108Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/23423\",\n   \"fileId\": \"1HyowKkIjANF4Z1Kvs1saPiC8xzE8vDUR9Bw8zvhzaqI\"\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"23424\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2011-09-15T11:21:19.877Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/23424\",\n   \"fileId\": \"0B4nUXhY0dFqkMmEwMWRhZDktMjQ1ZS00NjJlLTkxZmItMWEyNTE2OTRlMGVh\"\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"38269\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2011-11-08T01:47:06.888Z\",\n   \"deleted\": false,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/38269\",\n   \"fileId\": \"1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA\",\n   \"file\": {\n    \"kind\": \"drive#file\",\n    \"id\": \"1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA\",\n    \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/MTMxNDcwMzQ2NzI2Mw\\\"\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA\",\n    \"alternateLink\": \"https://docs.google.com/document/d/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/edit?usp=drivesdk\",\n    \"embedLink\": \"https://docs.google.com/document/d/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/preview\",\n    \"openWithLinks\": {\n     \"619683526622\": \"https://docs.google.com/document/d/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/edit?usp=drivesdk\",\n     \"338347331578\": \"https://drive.google.com/file/d/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/view?usp=drivesdk\"\n    },\n    \"defaultOpenWithLink\": \"https://docs.google.com/document/d/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/edit?usp=drivesdk\",\n    \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n    \"thumbnailLink\": \"https://docs.google.com/feeds/vt?gd=true&id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&v=9&s=AMedNnoAAAAAWNp-3m4vkCb9SV7FNNlcV-gyVOB2DO4U&sz=s220\",\n    \"title\": \"File title\",\n    \"mimeType\": \"application/vnd.google-apps.document\",\n    \"labels\": {\n     \"starred\": false,\n     \"hidden\": false,\n     \"trashed\": false,\n     \"restricted\": false,\n     \"viewed\": true\n    },\n    \"createdDate\": \"2011-08-27T12:13:30.075Z\",\n    \"modifiedDate\": \"2011-08-30T11:24:27.263Z\",\n    \"lastViewedByMeDate\": \"2011-10-01T09:35:32.959Z\",\n    \"markedViewedByMeDate\": \"2011-10-01T09:35:32.543Z\",\n    \"version\": \"38268\",\n    \"parents\": [\n     {\n      \"kind\": \"drive#parentReference\",\n      \"id\": \"0Bzpy9PK_RiBOODk1ZDEwMmQtZWM0OC00MGYzLTgzOTgtN2IwNWJkY2YzMDZi\",\n      \"selfLink\": \"https://www.googleapis.com/drive/v2/files/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/parents/0Bzpy9PK_RiBOODk1ZDEwMmQtZWM0OC00MGYzLTgzOTgtN2IwNWJkY2YzMDZi\",\n      \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0Bzpy9PK_RiBOODk1ZDEwMmQtZWM0OC00MGYzLTgzOTgtN2IwNWJkY2YzMDZi\",\n      \"isRoot\": false\n     }\n    ],\n    \"exportLinks\": {\n     \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=rtf\",\n     \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=odt\",\n     \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=html\",\n     \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=pdf\",\n     \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=epub\",\n     \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=zip\",\n     \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=docx\",\n     \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA&exportFormat=txt\"\n    },\n    \"userPermission\": {\n     \"kind\": \"drive#permission\",\n     \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/vTjlJ2yaeSz8GHllM0V__vRnBrs\\\"\",\n     \"id\": \"me\",\n     \"selfLink\": \"https://www.googleapis.com/drive/v2/files/1OLqg5fC_8FZbYv2HLo76DeYTkanVbHzqvf5LM-KLiLA/permissions/me\",\n     \"role\": \"owner\",\n     \"type\": \"user\"\n    },\n    \"quotaBytesUsed\": \"0\",\n    \"ownerNames\": [\n     \"John Doe\"\n    ],\n    \"owners\": [\n     {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"John Doe\",\n      \"picture\": {\n       \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": true,\n      \"permissionId\": \"92796993228604565116\",\n      \"emailAddress\": \"author@gmail.com\"\n     }\n    ],\n    \"lastModifyingUserName\": \"John Doe\",\n    \"lastModifyingUser\": {\n     \"kind\": \"drive#user\",\n     \"displayName\": \"John Doe\",\n     \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n     },\n     \"isAuthenticatedUser\": true,\n     \"permissionId\": \"92796993228604565116\",\n     \"emailAddress\": \"author@gmail.com\"\n    },\n    \"capabilities\": {\n     \"canCopy\": true,\n     \"canEdit\": true\n    },\n    \"editable\": true,\n    \"copyable\": true,\n    \"writersCanShare\": true,\n    \"shared\": false,\n    \"explicitlyTrashed\": false,\n    \"appDataContents\": false\n   }\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"50928\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2011-12-16T11:41:56.940Z\",\n   \"deleted\": false,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/50928\",\n   \"fileId\": \"17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM\",\n   \"file\": {\n    \"kind\": \"drive#file\",\n    \"id\": \"17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM\",\n    \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/MTMyMzg5Mzk0NzIzMw\\\"\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM\",\n    \"alternateLink\": \"https://docs.google.com/document/d/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/edit?usp=drivesdk\",\n    \"embedLink\": \"https://docs.google.com/document/d/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/preview\",\n    \"openWithLinks\": {\n     \"619683526622\": \"https://docs.google.com/document/d/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/edit?usp=drivesdk\",\n     \"338347331578\": \"https://drive.google.com/file/d/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/view?usp=drivesdk\"\n    },\n    \"defaultOpenWithLink\": \"https://docs.google.com/document/d/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/edit?usp=drivesdk\",\n    \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png\",\n    \"thumbnailLink\": \"https://docs.google.com/feeds/vt?gd=true&id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&v=1&s=AMedNnoAAAAAWNp-3pBG7_oCmQVGpsn3mMVMOdMgs0zM&sz=s220\",\n    \"title\": \"Notes: talk.google.com/gtugpl hangout\",\n    \"mimeType\": \"application/vnd.google-apps.document\",\n    \"labels\": {\n     \"starred\": false,\n     \"hidden\": false,\n     \"trashed\": false,\n     \"restricted\": false,\n     \"viewed\": true\n    },\n    \"createdDate\": \"2011-12-14T20:19:06.223Z\",\n    \"modifiedDate\": \"2011-12-14T20:19:07.233Z\",\n    \"lastViewedByMeDate\": \"2011-12-14T21:56:15.874Z\",\n    \"markedViewedByMeDate\": \"1970-01-01T00:00:00.000Z\",\n    \"version\": \"687255\",\n    \"parents\": [],\n    \"exportLinks\": {\n     \"application/rtf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=rtf\",\n     \"application/vnd.oasis.opendocument.text\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=odt\",\n     \"text/html\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=html\",\n     \"application/pdf\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=pdf\",\n     \"application/epub+zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=epub\",\n     \"application/zip\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=zip\",\n     \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=docx\",\n     \"text/plain\": \"https://docs.google.com/feeds/download/documents/export/Export?id=17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM&exportFormat=txt\"\n    },\n    \"userPermission\": {\n     \"kind\": \"drive#permission\",\n     \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/TC3DOxagWhff1q460kWUzQyVUvU\\\"\",\n     \"id\": \"me\",\n     \"selfLink\": \"https://www.googleapis.com/drive/v2/files/17phSS8LADSVMxm_wFfedPMLUlXkR6vWRP82ZmWHN3WM/permissions/me\",\n     \"role\": \"writer\",\n     \"type\": \"user\"\n    },\n    \"quotaBytesUsed\": \"0\",\n    \"ownerNames\": [\n     \"Other Author\"\n    ],\n    \"owners\": [\n     {\n      \"kind\": \"drive#user\",\n      \"displayName\": \"Other Author\",\n      \"picture\": {\n       \"url\": \"https://lh6.googleusercontent.com/-OtJfP7K94zY/AAAAAAAAAAI/AAAAAAABhMA/IRhn-88lDWX/s64/photo.jpg\"\n      },\n      \"isAuthenticatedUser\": false,\n      \"permissionId\": \"07042341848164379300\",\n      \"emailAddress\": \"author@gmail.com\"\n     }\n    ],\n    \"lastModifyingUserName\": \"Other Author\",\n    \"lastModifyingUser\": {\n     \"kind\": \"drive#user\",\n     \"displayName\": \"Other Author\",\n     \"picture\": {\n      \"url\": \"https://lh6.googleusercontent.com/-OtJfP7K94zY/AAAAAAAAAAI/AAAAAAABhMA/IRhn-88lDWX/s64/photo.jpg\"\n     },\n     \"isAuthenticatedUser\": false,\n     \"permissionId\": \"07042341848164379300\",\n     \"emailAddress\": \"author@gmail.com\"\n    },\n    \"capabilities\": {\n     \"canCopy\": true,\n     \"canEdit\": true\n    },\n    \"editable\": true,\n    \"copyable\": true,\n    \"writersCanShare\": true,\n    \"shared\": true,\n    \"explicitlyTrashed\": false,\n    \"appDataContents\": false\n   }\n },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"74243\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2012-04-12T13:01:27.364Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/74243\",\n   \"fileId\": \"1AqCvbyNwKl4vJRW1R8lWUZv1ljjbn1lf4Y6jVaiuMM0\"\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"74287\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2012-04-12T13:01:27.364Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/74287\",\n   \"fileId\": \"0ATpy9PK_RiBOZGQ5dmo1OXFfM2s2Y3M4d2s5\"\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"74288\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2012-04-12T13:01:27.364Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/74288\",\n   \"fileId\": \"0ATpy9PK_RiBOZGQ5dmo1OXFfNWR6ZGM2Nmd0\"\n  },\n  {\n   \"kind\": \"drive#change\",\n   \"id\": \"74290\",\n   \"type\": \"file\",\n   \"modificationDate\": \"2012-04-12T13:01:27.497Z\",\n   \"deleted\": true,\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/74290\",\n   \"fileId\": \"1ISOLzdpBxaFd_XPahANNT5LJ72JDfvivypAaZAJ9dO0\"\n  }\n ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"is":["results"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Lists the changes for a user.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"relativeUri":"/changes","displayName":"Changes","resources":[{"methods":[{"responses":[{"code":"200","body":[{"name":"Change","displayName":"Change","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"boolean","description":"Whether the file has been deleted.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"deleted"},{"additionalProperties":true,"type":"object","displayName":"teamDrive","name":"teamDrive","typePropertyKind":"INPLACE","description":"The updated state of the Team Drive. Present if the type is teamDrive, the user is still a member of the Team Drive, and the Team Drive has not been deleted.","required":false,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"teamDrive"},{"additionalProperties":true,"type":"object","displayName":"file","name":"file","typePropertyKind":"TYPE_EXPRESSION","description":"The updated state of the file. Present if the file has not been deleted.","required":false,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},{"type":"array","description":"The list of properties.","displayName":"properties","name":"properties","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"key":"properties"},{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"key":"file"},{"type":"string","description":"A link back to this change.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The type of the change. Possible values are `file` and `teamDrive`.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"datetime","description":"The time of this modification.","displayName":"modificationDate","name":"modificationDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modificationDate"},{"type":"string","description":"The ID of the Team Drive associated with this change.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The ID of the change.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#change.","enum":["drive#change"],"displayName":"kind","default":"drive#change","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the file associated with this change.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"examples":["{\n \"kind\": \"drive#change\",\n \"id\": \"19115\",\n \"type\": \"file\",\n \"modificationDate\": \"2011-06-14T09:23:28.208Z\",\n \"deleted\": false,\n \"selfLink\": \"https://www.googleapis.com/drive/v2/changes/19115\",\n \"fileId\": \"0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n \"file\": {\n  \"kind\": \"drive#file\",\n  \"id\": \"0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n  \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/MTMwNzg4OTMxNjYxMw\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n  \"alternateLink\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n  \"embedLink\": \"https://drive.google.com/embeddedfolderview?id=0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n  \"openWithLinks\": {\n   \"407408718192\": \"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&client_id=407408718192.apps.googleusercontent.com&response_type=code&access_type=offline&redirect_uri=https://developers.google.com/oauthplayground&user_id=113648393775261658002&state=%7B%22ids%22:%5B%220Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5%22%5D,%22action%22:%22open%22,%22userId%22:%22113648393775261658002%22%7D\",\n   \"1095523759147\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\"\n  },\n  \"defaultOpenWithLink\": \"https://drive.google.com/drive/folders/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5\",\n  \"iconLink\": \"https://ssl.gstatic.com/docs/doclist/images/icon_11_shared_collection_list_1.png\",\n  \"title\": \"File title\",\n  \"mimeType\": \"application/vnd.google-apps.folder\",\n  \"labels\": {\n   \"starred\": false,\n   \"hidden\": false,\n   \"trashed\": false,\n   \"restricted\": false,\n   \"viewed\": true\n  },\n  \"createdDate\": \"2011-06-12T14:32:49.377Z\",\n  \"modifiedDate\": \"2011-06-12T14:35:16.613Z\",\n  \"lastViewedByMeDate\": \"2011-06-12T14:32:49.753Z\",\n  \"markedViewedByMeDate\": \"2011-06-12T14:34:05.946Z\",\n  \"version\": \"19114\",\n  \"parents\": [\n   {\n    \"kind\": \"drive#parentReference\",\n    \"id\": \"0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n    \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5/parents/0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n    \"parentLink\": \"https://www.googleapis.com/drive/v2/files/0Bzpy9PK_RiBOOWE4YTc5YzgtODI1NS00YjEyLWIxYjUtMGJhMTc0YjE0YTI2\",\n    \"isRoot\": false\n   }\n  ],\n  \"userPermission\": {\n   \"kind\": \"drive#permission\",\n   \"etag\": \"\\\"CHXJyqSTqQN6k2cni3iCrLmxCRE/dWNdLtTomm45p40ScgKOq1gwjHk\\\"\",\n   \"id\": \"me\",\n   \"selfLink\": \"https://www.googleapis.com/drive/v2/files/0Bzey9RO_RiBOY2IwZjIxNWMtNTQ0Zi00ZDJiLWEyOT3tZmJkMmRjNTJhYTg5/permissions/me\",\n   \"role\": \"owner\",\n   \"type\": \"user\"\n  },\n  \"quotaBytesUsed\": \"0\",\n  \"ownerNames\": [\n   \"John Doe\"\n  ],\n  \"owners\": [\n   {\n    \"kind\": \"drive#user\",\n    \"displayName\": \"John Doe\",\n    \"picture\": {\n     \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n    },\n    \"isAuthenticatedUser\": true,\n    \"permissionId\": \"92796993228604565116\",\n    \"emailAddress\": \"author@gmail.com\"\n   }\n  ],\n  \"lastModifyingUserName\": \"John Doe\",\n  \"lastModifyingUser\": {\n   \"kind\": \"drive#user\",\n   \"displayName\": \"John Doe\",\n   \"picture\": {\n    \"url\": \"https://lh6.googleusercontent.com/-veehGFoGpso/AAAAAAAAAAI/AAAAAAACr7Z/YmMhVu8Ol-I/s64/photo.jpg\"\n   },\n   \"isAuthenticatedUser\": true,\n   \"permissionId\": \"92796993228604565116\",\n   \"emailAddress\": \"author@gmail.com\"\n  },\n  \"capabilities\": {\n   \"canCopy\": false,\n   \"canEdit\": true\n  },\n  \"editable\": true,\n  \"copyable\": false,\n  \"writersCanShare\": true,\n  \"shared\": true,\n  \"explicitlyTrashed\": false,\n  \"appDataContents\": false\n }\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a specific change.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"changeId","displayName":"changeId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the change.","key":"changeId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes/{changeId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"changeId","displayName":"changeId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the change.","key":"changeId"}],"relativeUri":"/{changeId}","displayName":"/{changeId}","relativeUriPathSegments":["{changeId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes/{changeId}","parentUrl":"/changes","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"changeId","displayName":"changeId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the change.","key":"changeId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"spaces","displayName":"spaces","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of spaces to query. Supported values are:\n\n- **drive**\n- **appDataFolder**\n- **photos**\n","key":"spaces"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"201","body":[{"name":"WatchResponse","displayName":"WatchResponse","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"Identifies this as a notification channel used to watch for changes to a resource. Value: the fixed string api#channel.\n","enum":["api#channel"],"displayName":"kind","default":"api#channel","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A UUID or similar unique string that identifies this channel.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"An opaque ID that identifies the resource being watched on this channel. Stable across different API versions.","displayName":"resourceId","name":"resourceId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"resourceId"},{"type":"string","description":"A version-specific identifier for the watched resource.","displayName":"resourceUri","name":"resourceUri","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"resourceUri"},{"type":"string","description":"An arbitrary string delivered to the target address with each notification delivered over this channel. Optional.","displayName":"token","name":"token","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"token"},{"type":"number","description":"Date and time of notification channel expiration, expressed as a Unix timestamp, in milliseconds. Optional.","displayName":"expiration","name":"expiration","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"expiration"}],"examples":["{\n  \"kind\": \"api#channel\",\n  \"id\": \"01234567-89ab-cdef-0123456789ab\",\n  \"resourceId\": \"o3hgv1538sdjfh\",\n  \"resourceUri\": \"https://www.googleapis.com/drive/v2/files/o3hgv1538sdjfh\",\n  \"token\": \"target=myApp-myFilesChannelDest\",\n  \"expiration\": 1426325213000\n}\n"],"key":"application/json"}],"key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"Watch","displayName":"Watch","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"A UUID or similar unique string that identifies this channel.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"An arbitrary string delivered to the target address with each notification delivered over this channel. Optional.","displayName":"expiration","name":"expiration","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"expiration"},{"type":"string","description":"Date and time of notification channel expiration, expressed as a Unix timestamp, in milliseconds. Optional.","displayName":"token","name":"token","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"token"},{"type":"string","description":"The type of delivery mechanism used for this channel.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The address where notifications are delivered for this channel.","displayName":"address","name":"address","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"address"}],"examples":["{\n  \"id\" : \"01234567-89ab-cdef-0123456789ab\" ,\n  \"expiration\" : \"1426325213000\" ,\n  \"token\" : \"a2a3rf342\" ,\n  \"type\" : \"web_hook\" ,\n  \"address\" : \"https://mydomain.com/notifications\"\n}\n"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Watch for all changes to a user's Drive.","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes/watch","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/watch","displayName":"/watch","relativeUriPathSegments":["watch"],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes/watch","parentUrl":"/changes","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["changes"],"absoluteUri":"https://www.googleapis.com/drive/{version}/changes","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"200","body":[{"name":"PermissionId","displayName":"PermissionId","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#permissionId.","enum":["drive#permissionId"],"displayName":"kind","default":"drive#permissionId","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The permission ID.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"}],"examples":["{\n  \"kind\": \"drive#permissionId\",\n  \"id\": \"127124699322860456\"\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.photos.readonly"]}}],"description":"Returns the permission ID for an email address.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"email","displayName":"email","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The email address for which to return a permission ID","key":"email"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/permissionIds/{email}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"email","displayName":"email","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The email address for which to return a permission ID","key":"email"}],"relativeUri":"/permissionIds/{email}","displayName":"/permissionIds/{email}","relativeUriPathSegments":["permissionIds","{email}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/permissionIds/{email}","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"email","displayName":"email","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The email address for which to return a permission ID","key":"email"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"appFilterExtensions","displayName":"appFilterExtensions","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of file extensions for open with filtering. All apps within the given app query scope which can open any of the given file extensions will be included in the response. If appFilterMimeTypes are provided as well, the result is a union of the two resulting app lists.","key":"appFilterExtensions"},{"name":"appFilterMimeTypes","displayName":"appFilterMimeTypes","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A comma-separated list of MIME types for open with filtering. All apps within the given app query scope which can open any of the given MIME types will be included in the response. If appFilterExtensions are provided as well, the result is a union of the two resulting app lists.","key":"appFilterMimeTypes"},{"name":"languageCode","displayName":"languageCode","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"A language or locale code, as defined by BCP 47, with some extensions from the Unicode LDML format.","examples":["fr"],"key":"languageCode"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"AppList","displayName":"AppList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"description":"Resource returned by the API when requesting list of files.","properties":[{"type":"string","description":"This is always drive#appList.","enum":["drive#appList"],"displayName":"kind","default":"drive#appList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"array","description":"The actual list of apps.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"array","description":"The list of primary file extensions.","displayName":"primaryFileExtensions","name":"primaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryFileExtensions"},{"type":"array","description":"The list of secondary file extensions.","displayName":"secondaryFileExtensions","name":"secondaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryFileExtensions"},{"type":"boolean","description":"Whether the app is authorized to access data on the user's Drive.","displayName":"authorized","name":"authorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authorized"},{"type":"string","description":"A link to the product listing for this app.","displayName":"productUrl","name":"productUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productUrl"},{"type":"string","description":"The name of the app.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"boolean","description":"Whether this app supports creating new objects.","displayName":"supportsCreate","name":"supportsCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsCreate"},{"type":"string","description":"The template url for opening files with this app. The template will contain\n`{ids}` and/or `{exportIds}` to be replaced by the actual file ids.\nSee Open Files for the full documentation.\n","displayName":"openUrlTemplate","name":"openUrlTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"openUrlTemplate"},{"type":"boolean","description":"Whether this app supports creating new files when offline","displayName":"supportsOfflineCreate","name":"supportsOfflineCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsOfflineCreate"},{"type":"array","description":"The list of secondary mime types.","displayName":"secondaryMimeTypes","name":"secondaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryMimeTypes"},{"type":"boolean","description":"Whether this app supports importing Google Docs.","displayName":"supportsImport","name":"supportsImport","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsImport"},{"type":"string","description":"The ID of the product listing for this app.","displayName":"productId","name":"productId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productId"},{"type":"array","description":"The various icons for the app.","displayName":"icons","name":"icons","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"App's icon","properties":[{"description":"Category of the icon. Allowed values are:\n\n- **application** - icon for the application\n- **document** - icon for a file associated with the app\n- **documentShared** - icon for a shared file associated with the app\n","enum":["application","document","documentShared"],"displayName":"category","name":"category","type":"string","typePropertyKind":"TYPE_EXPRESSION","required":true,"examples":["application"],"key":"category"},{"type":"integer","description":"Size of the icon. Represented as the maximum of the width and height.","displayName":"size","name":"size","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"size"},{"type":"string","description":"URL for the icon.","displayName":"iconUrl","name":"iconUrl","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"iconUrl"}],"additionalProperties":true,"displayName":"Icon","name":"Icon","typePropertyKind":"TYPE_EXPRESSION"},"key":"icons"},{"type":"string","description":"A short description of the app.","displayName":"shortDescription","name":"shortDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shortDescription"},{"type":"string","description":"The type of object this app creates (e.g. Chart). If empty, the app name should be used instead.","displayName":"objectType","name":"objectType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"objectType"},{"type":"array","description":"The list of primary mime types.","displayName":"primaryMimeTypes","name":"primaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryMimeTypes"},{"type":"boolean","description":"Whether this app supports opening more than one file.","displayName":"supportsMultiOpen","name":"supportsMultiOpen","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsMultiOpen"},{"type":"string","description":"The template url to create a new file with this app in a given folder.\nThe template will contain `{folderId}` to be replaced by the folder to create the new file in.\n","displayName":"createInFolderTemplate","name":"createInFolderTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createInFolderTemplate"},{"type":"string","description":"The ID of the app.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#app.","enum":["drive#app"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The url to create a new file with this app.","displayName":"createUrl","name":"createUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createUrl"},{"type":"string","description":"A long description of the app.","displayName":"longDescription","name":"longDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longDescription"},{"type":"boolean","description":"Whether the app is installed.","displayName":"installed","name":"installed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"installed"},{"type":"boolean","description":"Whether the app is selected as the default handler for the types it supports.","displayName":"useByDefault","name":"useByDefault","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"useByDefault"},{"type":"boolean","description":"Whether the app has drive-wide scope. An app with drive-wide scope can access all files in the user's drive.","displayName":"hasDriveWideScope","name":"hasDriveWideScope","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasDriveWideScope"}],"additionalProperties":true,"displayName":"App","name":"App","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"},{"type":"array","description":"List of app IDs that the user has specified to use by default. The list is in reverse-priority order (lowest to highest).","displayName":"defaultAppIds","name":"defaultAppIds","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"defaultAppIds"}],"examples":["{\n  \"kind\": \"drive#appList\",\n  \"etag\": \"\\\"LbWe7Ybz7gmJtEmo4LFBfsRw3MM/SCYWICRJlGoSQyVoGTWoC9oTI14\\\"\",\n  \"selfLink\": \"https://www.googleapis.com/drive/v2/apps\",\n  \"items\": [{\n    \"kind\": \"drive#app\",\n    \"id\": \"663457040646\",\n    \"name\": \"AcmeSecure\",\n    \"shortDescription\": \"AcmeSecure is a cloud security application\",\n    \"longDescription\": \"AcmeSecure is a cloud security application\",\n    \"supportsCreate\": false,\n    \"supportsImport\": false,\n    \"supportsMultiOpen\": false,\n    \"supportsOfflineCreate\": false,\n    \"installed\": true,\n    \"authorized\": false,\n    \"hasDriveWideScope\": false,\n    \"useByDefault\": true,\n    \"openUrlTemplate\": \"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&client_id=9113457040646-5h4513jevjto2b32220om89in7atpn2p.apps.googleusercontent.com&response_type=code&access_type=offline&redirect_uri=https://app.acmesecure.com&user_id=9213844278236899253889&state=%7B%22ids%22:%5B%22{ids}%22%5D,%22exportIds%22:%5B%22{exportIds}%22%5D,%22action%22:%22open%22,%22userId%22:%9213844278236899253889%22%7D\",\n    \"primaryMimeTypes\": [\n      \"application/vnd.google-apps.drive-sdk.1234567\"\n    ],\n    \"icons\": [{\n      \"category\": \"application\",\n      \"size\": 16,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"application\",\n      \"size\": 32,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"application\",\n      \"size\": 48,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"application\",\n      \"size\": 64,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"application\",\n      \"size\": 128,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"application\",\n      \"size\": 256,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 10,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s10-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 16,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 32,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 48,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 64,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 128,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"document\",\n      \"size\": 256,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 10,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s10-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 16,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 32,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 48,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 64,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 128,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n    }, {\n      \"category\": \"documentShared\",\n      \"size\": 256,\n      \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n    }]\n  }],\n  \"defaultAppIds\": [\n    \"663457040646\"\n  ]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Lists a user's installed apps.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/apps","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/apps","displayName":"Apps","resources":[{"methods":[{"responses":[{"code":"200","body":[{"name":"App","displayName":"App","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"array","description":"The list of primary file extensions.","displayName":"primaryFileExtensions","name":"primaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryFileExtensions"},{"type":"array","description":"The list of secondary file extensions.","displayName":"secondaryFileExtensions","name":"secondaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryFileExtensions"},{"type":"boolean","description":"Whether the app is authorized to access data on the user's Drive.","displayName":"authorized","name":"authorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authorized"},{"type":"string","description":"A link to the product listing for this app.","displayName":"productUrl","name":"productUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productUrl"},{"type":"string","description":"The name of the app.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"boolean","description":"Whether this app supports creating new objects.","displayName":"supportsCreate","name":"supportsCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsCreate"},{"type":"string","description":"The template url for opening files with this app. The template will contain\n`{ids}` and/or `{exportIds}` to be replaced by the actual file ids.\nSee Open Files for the full documentation.\n","displayName":"openUrlTemplate","name":"openUrlTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"openUrlTemplate"},{"type":"boolean","description":"Whether this app supports creating new files when offline","displayName":"supportsOfflineCreate","name":"supportsOfflineCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsOfflineCreate"},{"type":"array","description":"The list of secondary mime types.","displayName":"secondaryMimeTypes","name":"secondaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryMimeTypes"},{"type":"boolean","description":"Whether this app supports importing Google Docs.","displayName":"supportsImport","name":"supportsImport","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsImport"},{"type":"string","description":"The ID of the product listing for this app.","displayName":"productId","name":"productId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productId"},{"type":"array","description":"The various icons for the app.","displayName":"icons","name":"icons","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"App's icon","properties":[{"description":"Category of the icon. Allowed values are:\n\n- **application** - icon for the application\n- **document** - icon for a file associated with the app\n- **documentShared** - icon for a shared file associated with the app\n","enum":["application","document","documentShared"],"displayName":"category","name":"category","type":"string","typePropertyKind":"TYPE_EXPRESSION","required":true,"examples":["application"],"key":"category"},{"type":"integer","description":"Size of the icon. Represented as the maximum of the width and height.","displayName":"size","name":"size","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"size"},{"type":"string","description":"URL for the icon.","displayName":"iconUrl","name":"iconUrl","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"iconUrl"}],"additionalProperties":true,"displayName":"Icon","name":"Icon","typePropertyKind":"TYPE_EXPRESSION"},"key":"icons"},{"type":"string","description":"A short description of the app.","displayName":"shortDescription","name":"shortDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shortDescription"},{"type":"string","description":"The type of object this app creates (e.g. Chart). If empty, the app name should be used instead.","displayName":"objectType","name":"objectType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"objectType"},{"type":"array","description":"The list of primary mime types.","displayName":"primaryMimeTypes","name":"primaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryMimeTypes"},{"type":"boolean","description":"Whether this app supports opening more than one file.","displayName":"supportsMultiOpen","name":"supportsMultiOpen","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsMultiOpen"},{"type":"string","description":"The template url to create a new file with this app in a given folder.\nThe template will contain `{folderId}` to be replaced by the folder to create the new file in.\n","displayName":"createInFolderTemplate","name":"createInFolderTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createInFolderTemplate"},{"type":"string","description":"The ID of the app.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#app.","enum":["drive#app"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The url to create a new file with this app.","displayName":"createUrl","name":"createUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createUrl"},{"type":"string","description":"A long description of the app.","displayName":"longDescription","name":"longDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longDescription"},{"type":"boolean","description":"Whether the app is installed.","displayName":"installed","name":"installed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"installed"},{"type":"boolean","description":"Whether the app is selected as the default handler for the types it supports.","displayName":"useByDefault","name":"useByDefault","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"useByDefault"},{"type":"boolean","description":"Whether the app has drive-wide scope. An app with drive-wide scope can access all files in the user's drive.","displayName":"hasDriveWideScope","name":"hasDriveWideScope","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasDriveWideScope"}],"examples":["{\n  \"kind\": \"drive#app\",\n  \"id\": \"663457040646\",\n  \"name\": \"AcmeSecure\",\n  \"shortDescription\": \"AcmeSecure is a cloud security application\",\n  \"longDescription\": \"AcmeSecure is a cloud security application\",\n  \"supportsCreate\": false,\n  \"supportsImport\": false,\n  \"supportsMultiOpen\": false,\n  \"supportsOfflineCreate\": false,\n  \"installed\": true,\n  \"authorized\": false,\n  \"hasDriveWideScope\": false,\n  \"useByDefault\": true,\n  \"openUrlTemplate\": \"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&client_id=9113457040646-5h4513jevjto2b32220om89in7atpn2p.apps.googleusercontent.com&response_type=code&access_type=offline&redirect_uri=https://app.acmesecure.com&user_id=9213844278236899253889&state=%7B%22ids%22:%5B%22{ids}%22%5D,%22exportIds%22:%5B%22{exportIds}%22%5D,%22action%22:%22open%22,%22userId%22:%9213844278236899253889%22%7D\",\n  \"primaryMimeTypes\": [\n    \"application/vnd.google-apps.drive-sdk.1234567\"\n  ],\n  \"icons\": [{\n    \"category\": \"application\",\n    \"size\": 16,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"application\",\n    \"size\": 32,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"application\",\n    \"size\": 48,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"application\",\n    \"size\": 64,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"application\",\n    \"size\": 128,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"application\",\n    \"size\": 256,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 10,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s10-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 16,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 32,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 48,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 64,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 128,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"document\",\n    \"size\": 256,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 10,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s10-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 16,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s16-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 32,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s32-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 48,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s48-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 64,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s64-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 128,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s128-c-k/16x16-icon.png\"\n  }, {\n    \"category\": \"documentShared\",\n    \"size\": 256,\n    \"iconUrl\": \"https://lh3.googleusercontent.com/-J8g82t6tCm0/U7jswfoh01I/AAAAAAAAAGE/Rr2XCvulsSQ/s256-c-k/16x16-icon.png\"\n  }]\n}\n"],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Gets a specific app.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"appId","displayName":"appId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the app.","key":"appId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/apps/{appId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"appId","displayName":"appId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the app.","key":"appId"}],"relativeUri":"/{appId}","displayName":"/{appId}","relativeUriPathSegments":["{appId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/apps/{appId}","parentUrl":"/apps","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"appId","displayName":"appId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the app.","key":"appId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["apps"],"absoluteUri":"https://www.googleapis.com/drive/{version}/apps","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"responses":[{"code":"201","key":"201"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"application/json","displayName":"application/json","typePropertyKind":"INPLACE","type":{"name":"type","displayName":"type","typePropertyKind":"TYPE_EXPRESSION","type":"object","description":"The request body for Channels/stop","properties":[{"name":"id","displayName":"id","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"A UUID or similar unique string that identifies this channel.","key":"id"},{"name":"resourceId","displayName":"resourceId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"An opaque ID that identifies the resource being watched on this channel. Stable across different API versions.","key":"resourceId"}]},"examples":["{\n  \"id\" : \"string\" ,\n  \"resourceId\" : \"string\"\n}"],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"description":"Stop watching for changes to a resource.\nIf successful, this method returns an empty response body.\n","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/channels/stop","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/channels/stop","displayName":"/channels/stop","relativeUriPathSegments":["channels","stop"],"absoluteUri":"https://www.googleapis.com/drive/{version}/channels/stop","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"methods":[{"queryParameters":[{"name":"requestId","displayName":"requestId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"An ID, such as a random UUID, which uniquely identifies this user's request for idempotent creation of a Team Drive.\nA repeated request by the same user and with the same request ID will avoid creating duplicates by attempting to create the same Team Drive.\nIf the Team Drive already exists a 409 error will be returned.\n","key":"requestId"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"TeamDrive","displayName":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"},{"code":"409","description":"If the Team Drive already exists.","key":"409"}],"body":[{"name":"TeamDrive","displayName":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive"]}}],"description":"Creates a new Team Drive.","displayName":"insert","method":"post","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"queryParameters":[{"name":"maxResults","displayName":"maxResults","typePropertyKind":"TYPE_EXPRESSION","type":"integer","default":10,"required":true,"description":"Maximum number of Team Drives to return.","minimum":1,"maximum":100,"key":"maxResults"},{"name":"pageToken","displayName":"pageToken","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"Page token for Team Drives.","key":"pageToken"},{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"responses":[{"code":"200","body":[{"name":"TeamDriveList","displayName":"TeamDriveList","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDriveList","displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The page token for the next page of Team Drives.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},{"type":"array","description":"The list of Team Drives","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"additionalProperties":true,"displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.readonly"]}}],"description":"Lists the user's Team Drives.","displayName":"list","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives","headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"relativeUri":"/teamdrives","displayName":"Teamdrives","resources":[{"methods":[{"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive"]}}],"description":"Permanently deletes a Team Drive for which the user is an organizer. The Team Drive cannot contain any untrashed items.\n","method":"delete","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"teamDriveId","displayName":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the Team Drive","key":"teamDriveId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives/{teamDriveId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},{"responses":[{"code":"200","body":[{"name":"TeamDrive","displayName":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.readonly"]}}],"description":"Gets a Team Drive's metadata by ID.","method":"get","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"teamDriveId","displayName":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the Team Drive","key":"teamDriveId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives/{teamDriveId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]},{"responses":[{"code":"200","body":[{"name":"TeamDrive","displayName":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"application/json"}],"key":"200"},{"code":"401","description":"Authorization error.\n"}],"body":[{"name":"TeamDrive","displayName":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","type":"object","additionalProperties":true,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"application/json"}],"protocols":["HTTPS"],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive"]}}],"description":"Updates a Team Drive's metadata","method":"put","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"teamDriveId","displayName":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the Team Drive","key":"teamDriveId"}],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives/{teamDriveId}","queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}]}],"securedBy":[{"name":"oauth_2_0","type":"OAuth 2.0","description":"Google recommend using OAuth 2.0 to authorize requests.\n","describedBy":{"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]},"settings":{"accessTokenUri":"https://accounts.google.com/o/oauth2/token","authorizationUri":"https://accounts.google.com/o/oauth2/auth","authorizationGrants":["implicit","authorization_code"],"scopes":["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.scripts","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.metadata"]}}],"uriParameters":[{"name":"teamDriveId","displayName":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the Team Drive","key":"teamDriveId"}],"relativeUri":"/{teamDriveId}","displayName":"/{teamDriveId}","relativeUriPathSegments":["{teamDriveId}"],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives/{teamDriveId}","parentUrl":"/teamdrives","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"},{"name":"teamDriveId","displayName":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"description":"The ID of the Team Drive","key":"teamDriveId"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"relativeUriPathSegments":["teamdrives"],"absoluteUri":"https://www.googleapis.com/drive/{version}/teamdrives","parentUrl":"","allUriParameters":[{"name":"version","displayName":"version","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":true,"enum":["v2"],"key":"version"}],"queryParameters":[{"name":"access_token","displayName":"access_token","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `Authorization` header.\n","key":"access_token"}],"headers":[{"name":"Authorization","displayName":"Authorization","typePropertyKind":"TYPE_EXPRESSION","type":"string","required":false,"description":"Used to send a valid OAuth 2 access token. Don't use it with `access_token` query parameter.\n","key":"Authorization"}],"responses":[{"code":"401","description":"Authorization error.\n"}]}],"documentation":[{"title":"Headline","content":"Google Drive is a file storage and synchronization service created and managed by Google. It allows users to store documents in the cloud, share files, and edit documents with collaborators. Google Drive encompasses Google Docs, Sheets and Slides, an office suite that permits collaborative editing of documents, spreadsheets, presentations, drawings, forms, and more."},{"title":"Upload files","content":"# Upload Files\n\nThe Drive API allows you to upload file data when creating or updating a File resource.\n\n## Upload options\n\nThe Drive API allows you to upload certain types of binary data, or media. The specific characteristics of the data you can upload are specified on the reference page for any method that supports media uploads:\n\n- **Maximum upload file size**: The maximum amount of data you can store with this method.\n- **Accepted media MIME types**: The types of binary data you can store using this method.\n\nYou can make upload requests in any of the following ways. Specify the method you are using with the uploadType request parameter.\n\nSimple upload: uploadType=media. For quick transfer of smaller files, for example, 5 MB or less.\nMultipart upload: uploadType=multipart. For quick transfer of smaller files and metadata; transfers the file along with metadata that describes it, all in a single request.\nResumable upload: uploadType=resumable. For reliable transfer, especially important with larger files. With this method, you use a session initiating request, which optionally can include metadata. This is a good strategy to use for most applications, since it also works for smaller files at the cost of one additional HTTP request per upload.\nWhen you upload media, you use a special URI. In fact, methods that support media uploads have two URI endpoints:\n\n- **The /upload URI, for the media**. The format of the upload endpoint is the standard resource URI with an `/upload` prefix. Use this URI when transferring the media data itself. Example: `POST /upload/drive/v2/files`.\n- **The standard resource URI, for the metadata**. If the resource contains any data fields, those fields are used to store metadata describing the uploaded file. You can use this URI when creating or updating metadata values. Example: `POST /drive/v2/files`.\n\n\n## Simple upload\n\nThe most straightforward method for uploading a file is by making a simple upload request. This option is a good choice when:\n\n- The file is small enough to upload again in its entirety if the connection fails.\n- There is no metadata to send. This might be true if you plan to send metadata for this resource in a separate request, or if no metadata is supported or available.\n\n\nTo use simple upload, make a `POST` or `PUT` request to the method's **/upload** URI and add the query parameter `uploadType=media`. For example:\n\n```\nPOST https://www.googleapis.com/upload/drive/v2/files?uploadType=media\n```\n\nThe HTTP headers to use when making a simple upload request include:\n\n- `Content-Type`. Set to one of the method's accepted upload media data types, specified in the API reference.\n- `Content-Length`. Set to the number of bytes you are uploading. Not required if you are using chunked transfer encoding.\n\n\n### Example: Simple upload\n\nThe following example shows the use of a simple upload request for the Drive API.\n```\nPOST /upload/drive/v2/files?uploadType=media HTTP/1.1\nHost: www.googleapis.com\nContent-Type: image/jpeg\nContent-Length: number_of_bytes_in_file\nAuthorization: Bearer your_auth_token\n\nJPEG data\n```\n\nIf the request succeeds, the server returns the HTTP 200 OK status code along with any metadata:\n\n```\nHTTP/1.1 200\nContent-Type: application/json\n\n{\n  \"title\": \"My File\"\n}\n```\n\n### Multipart upload\n\nIf you have metadata that you want to send along with the data to upload, you can make a single multipart/related request. This is a good choice if the data you are sending is small enough to upload again in its entirety if the connection fails.\n\nTo use multipart upload, make a POST or PUT request to the method's **/upload** URI and add the query parameter `uploadType=multipart`, for example:\n```\nPOST https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart\n```\n\nThe top-level HTTP headers to use when making a multipart upload request include:\n\n- `Content-Type`. Set to multipart/related and include the boundary string you're using to identify the parts of the request.\n- `Content-Length`. Set to the total number of bytes in the request body. The media portion of the request must be less than the maximum file size specified for this method.\n\nThe body of the request is formatted as a multipart/related content type [RFC2387] and contains exactly two parts. The parts are identified by a boundary string, and the final boundary string is followed by two hyphens.\n\nEach part of the multipart request needs an additional Content-Type header:\n\n- **Metadata part**: Must come first, and Content-Type must match one of the accepted metadata formats.\n- **Media part**: Must come second, and Content-Type must match one the method's accepted media MIME types.\n\nSee the API reference for each method's list of accepted media MIME types and size limits for uploaded files.\n\n\nNote: To create or update the metadata portion only, without uploading the associated data, simply send a `POST` or `PUT` request to the standard resource endpoint: `https://www.googleapis.com/drive/v2/files`\n\n\n#### Example: Multipart upload\n\nThe example below shows a multipart upload request for the Drive API.\n\n```\nPOST /upload/drive/v2/files?uploadType=multipart HTTP/1.1\nHost: www.googleapis.com\nAuthorization: Bearer your_auth_token\nContent-Type: multipart/related; boundary=foo_bar_baz\nContent-Length: number_of_bytes_in_entire_request_body\n\n--foo_bar_baz\nContent-Type: application/json; charset=UTF-8\n\n{\n  \"title\": \"My File\"\n}\n\n--foo_bar_baz\nContent-Type: image/jpeg\n\nJPEG data\n--foo_bar_baz--\n```\n\nIf the request succeeds, the server returns the HTTP 200 OK status code along with any metadata:\n```\nHTTP/1.1 200\nContent-Type: application/json\n\n{\n  \"title\": \"My File\"\n}\n```\n\n#### Resumable upload\n\nTo upload data files more reliably, you can use the resumable upload protocol. This protocol allows you to resume an upload operation after a communication failure has interrupted the flow of data. It is especially useful if you are transferring large files and the likelihood of a network interruption or some other transmission failure is high, for example, when uploading from a mobile client app. It can also reduce your bandwidth usage in the event of network failures because you don't have to restart large file uploads from the beginning.\n\nThe steps for using resumable upload include:\n\n- Start a resumable session. Make an initial request to the upload URI that includes the metadata, if any.\n- Save the resumable session URI. Save the session URI returned in the response of the initial request; you'll use it for the remaining requests in this session.\n- Upload the file. Send the media file to the resumable session URI.\n\nIn addition, apps that use resumable upload need to have code to resume an interrupted upload. If an upload is interrupted, find out how much data was successfully received, and then resume the upload starting from that point.\n\nNote: An upload URI expires after one week.\n\n\n##### Step 1: Start a resumable session\n\nTo initiate a resumable upload, make a POST or PUT request to the method's */upload* URI and add the query parameter uploadType=resumable, for example:\n```\nPOST https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable\n```\n\nFor this initiating request, the body is either empty or it contains the metadata only; you'll transfer the actual contents of the file you want to upload in subsequent requests.\n\nUse the following HTTP headers with the initial request:\n\n- `X-Upload-Content-Type`. Set to the media MIME type of the upload data to be transferred in subsequent requests.\n- `X-Upload-Content-Length`. Set to the number of bytes of upload data to be transferred in subsequent requests.  If the length is unknown at the time of this request, you can omit this header.\n- If providing metadata: `Content-Type`. Set according to the metadata's data type.\n- `Content-Length`. Set to the number of bytes provided in the body of this initial request. Not required if you are using chunked transfer encoding.\n\nSee the API reference for each method's list of accepted media MIME types and size limits for uploaded files.\n\n###### Example: Resumable session initiation request\n\nThe following example shows how to initiate a resumable session for the Drive API.\n\n```\nPOST /upload/drive/v2/files?uploadType=resumable HTTP/1.1\nHost: www.googleapis.com\nAuthorization: Bearer your_auth_token\nContent-Length: 38\nContent-Type: application/json; charset=UTF-8\nX-Upload-Content-Type: image/jpeg\nX-Upload-Content-Length: 2000000\n\n{\n  \"title\": \"My File\"\n}\n```\n\nNote: For an initial resumable update request without metadata, leave the body of the request empty, and set the Content-Length header to 0.\n\nThe next section describes how to handle the response.\n\n##### Step 2: Save the resumable session URI\n\nIf the session initiation request succeeds, the API server responds with a 200 OK HTTP status code. In addition, it provides a Location header that specifies your resumable session URI. The Location header, shown in the example below, includes an upload_id query parameter portion that gives the unique upload ID to use for this session.\n\n###### Example: Resumable session initiation response\n\nHere is the response to the request in Step 1:\n```\nHTTP/1.1 200 OK\nLocation: https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable&upload_id=xa298sd_sdlkj2\nContent-Length: 0\n```\nThe value of the Location header, as shown in the above example response, is the session URI you'll use as the HTTP endpoint for doing the actual file upload or querying the upload status.\n\nCopy and save the session URI so you can use it for subsequent requests.\n\n##### Step 3: Upload the file\n\nTo upload the file, send a PUT request to the upload URI that you obtained in the previous step. The format of the upload request is:\n\n```\nPUT session_uri\n```\n\nThe HTTP headers to use when making the resumable file upload requests includes Content-Length. Set this to the number of bytes you are uploading in this request, which is generally the upload file size.\n\n###### Example: Resumable file upload request\n\nHere is a resumable request to upload the entire 2,000,000 byte JPEG file for the current example.\n```\nPUT https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable&upload_id=xa298sd_sdlkj2 HTTP/1.1\nContent-Length: 2000000\nContent-Type: image/jpeg\n\nbytes 0-1999999\n```\n\nIf the request succeeds, the server responds with an HTTP `201 Created`, along with any metadata associated with this resource. If the initial request of the resumable session had been a PUT, to update an existing resource, the success response would be `200 OK`, along with any metadata associated with this resource.\n\nIf the upload request is interrupted or if you receive an `HTTP 503 Service Unavailable` or any other `5xx` response from the server, follow the procedure outlined in resume an interrupted upload.  \n\n###### Uploading the file in chunks\n\nWith resumable uploads, you can break a file into chunks and send a series of requests to upload each chunk in sequence. This is not the preferred approach since there are performance costs associated with the additional requests, and it is generally not needed. However, you might need to use chunking to reduce the amount of data transferred in any single request. This is helpful when there is a fixed time limit for individual requests, as is true for certain classes of Google App Engine requests. It also lets you do things like providing upload progress indications for legacy browsers that don't have upload progress support by default.\n\n#### Resume an interrupted upload\n\nIf an upload request is terminated before receiving a response or if you receive an HTTP 503 Service Unavailable response from the server, then you need to resume the interrupted upload. To do this:\n\n1) **Request status**. Query the current status of the upload by issuing an empty PUT request to the upload URI. For this request, the HTTP headers should include a Content-Range header indicating that the current position in the file is unknown.  For example, set the Content-Range to `*/2000000` if your total file length is 2,000,000. If you don't know the full size of the file, set the Content-Range to `*/*`.\n\nNote: You can request the status between chunks, not just if the upload is interrupted. This is useful, for example, if you want to show upload progress indications for legacy browsers.\n2) **Get number of bytes uploaded**. Process the response from the status query. The server uses the Range header in its response to specify which bytes it has received so far.  For example, a Range header of `0-299999` indicates that the first `300,000` bytes of the file have been received.\n3) **Upload remaining data**. Finally, now that you know where to resume the request, send the remaining data or current chunk. Note that you need to treat the remaining data as a separate chunk in either case, so you need to send the Content-Range header when you resume the upload.\n\n##### Example: Resuming an interrupted upload\n\n###### Request the upload status.\nThe following request uses the Content-Range header to indicate that the current position in the 2,000,000 byte file is unknown.\n```\nPUT {session_uri} HTTP/1.1\nContent-Length: 0\nContent-Range: bytes */2000000\n```\n\n###### Extract the number of bytes uploaded so far from the response.\nThe server's response uses the Range header to indicate that it has received the first 43 bytes of the file so far. Use the upper value of the Range header to determine where to start the resumed upload.\n\n```\nHTTP/1.1 308 Resume Incomplete\nContent-Length: 0\nRange: 0-42\n```\n\nNote: It is possible that the status response could be 201 Created or 200 OK if the upload is complete. This could happen if the connection broke after all bytes were uploaded but before the client received a response from the server.\n\n###### Resume the upload from the point where it left off.\nThe following request resumes the upload by sending the remaining bytes of the file, starting at byte 43.\n```\nPUT {session_uri} HTTP/1.1\nContent-Length: 1999957\nContent-Range: bytes 43-1999999/2000000\n\nbytes 43-1999999\n```\n"},{"title":"Search for file","content":"# Search for Files\n\nYou can search or filter files with the `files.list` or `children.list` methods of the Drive API. These methods accept the `q` parameter which is a search query combining one or more search clauses. Each search clause is made up of three parts.\n\n- **Field** Attribute of the file that is searched, e.g., the attribute `title` of the file.\n- **Operator** Test that is performed on the data to provide a match, e.g., `contains`.\n- **Value**  The content of the attribute that is tested, e.g. the title of the file `My cool document`.\n\n\nCombine clauses with the conjunction `and`, and negate the query with `not`.\n\n## Fields\n\nField | Value Type | Operators | Description\n--- | --- | --- | ---\ntitle | string | contains, =, != | Title of the file.\nfullText | string | contains | Full text of the file including title, description, content, and indexable text.\nmimeType | string | contains, =, !=\t | MIME type of the file.\nmodifiedDate | date | <=, <, =, !=, >, >= | Date of the last modification of the file.\nlastViewedByMeDate | date | <=, <, =, !=, >, >= | Date that the user last viewed a file.\ntrashed | boolean | =, != | Whether the file is in the trash or not.\nstarred | boolean | =, != | Whether the file is starred or not.\nparents | collection | in | Whether the parents collection contains the specified ID.\nowners | collection | in | Users who own the file.\nwriters | collection | in | Users who have permission to modify the file.\nreaders | collection | in | Users who have permission to read the file.\nsharedWithMe | boolean | =, != | Files that have been shared with the authorized user.\nproperties | collection | has | Custom file properties.\n\n1) The contains operator only performs prefix matching for a title. For example, the title \"HelloWorld\" would match for title contains 'Hello' but not title contains 'World'.\n\n2) The contains operator only performs matching on entire string tokens for fullText. For example, if the full text of a doc contains the string \"HelloWorld\" only the query fullText contains 'HelloWorld' returns a result. Queries such as fullText contains 'Hello' do not return results in this scenario.\n\n3) The contains operator will match on an exact alphanumeric phrase if it is surrounded by double quotes. For example, if the fullText of a doc contains the string \"Hello there world\", then the query fullText contains '\"Hello there\"' will return a result, but the query fullText contains '\"Hello world\"' will not. Furthermore, since the search is alphanumeric, if the fullText of a doc contains the string \"Hello_world\", then the query fullText contains '\"Hello world\"' will return a result.\n\n4) Fields of type date are not currently comparable to each other, only to constant dates.\n\n\n## Value types\n\nValue Type | Notes\n--- | ---\nString | Surround with single quotes `'`. Escape single quotes in queries with `\\'`, e.g., `'Valentine\\'s Day'`.\nBoolean | `true` or `false`.\nDate | [RFC 3339](http://tools.ietf.org/html/rfc3339) format, default timezone is UTC, e.g., `2012-06-04T12:00:00-08:00.`\n\n## Operators\n\nOperator | Notes\n--- | ---\n`contains` | The content of one string is present in the other.\n`=` | The content of a string or boolean is equal to the other.\n`!=` | The content of a string or boolean is not equal to the other.\n`<` | A date is earlier than another.\n`<=` | A date is earlier than or equal to another.\n`>` | A date is later than another.\n`>=` | A date is later than or equal to another.\n`in` | An element is contained within a collection.\n`and` | Return files that match both clauses.\n`or` | Return files that match either clause.\n`not` | Negates a search clause.\n`has` | A collection contains an element matching the parameters.\n\nFor compound clauses, you can use parentheses to group clauses together. For example:\n\n```\nmodifiedDate > '2012-06-04T12:00:00' and (mimeType contains 'image/' or mimeType contains 'video/')\n```\n\nThis search returns all files with an image or video MIME type that were last modified after June 4, 2012. Because and and or operators are evaluated from left to right, without parentheses the above example would return only images modified after June 4, 2012, but would return all videos, even those before June 4, 2012.\n\n### Examples\n\nAll examples on this page show the unencoded q parameter, where title = 'hello' is encoded as title+%3d+%27hello%27. Client libraries handle this encoding automatically.\n\n\nSearch for files with the title \"hello\"\n\n```\ntitle = 'hello'\n```\n\nSearch for folders using the folder-specific MIME type\n\n```\nmimeType = 'application/vnd.google-apps.folder'\n```\n\nSearch for files that are not folders\n\n```\nmimeType != 'application/vnd.google-apps.folder'\n```\n\nSearch for files with a title containing the words \"hello\" and \"goodbye\"\n\n```\ntitle contains 'hello' and title contains 'goodbye'\n```\n\nSearch for files with a title that does not contain the word \"hello\"\n\n```\nnot title contains 'hello'\n```\n\nSearch for files containing the word \"hello\" in the content\n\n```\nfullText contains 'hello'\n```\n\nSearch for files not containing the word \"hello\" in the content\n\nnot fullText contains 'hello'\nSearch for files containing the exact phrase \"hello world\" in the content\n\n```\nfullText contains '\"hello world\"'\nfullText contains '\"hello_world\"'\n```\n\nSearch for files with a query containing the \\ character (e.g., \\authors)\n\n```\nfullText contains '\\\\authors'\n```\n\nSearch for files writeable by the user \"test@example.org\"\n\n```\n'test@example.org' in writers\n```\n\nSearch for the ID 1234567 in the parents collection. This finds all files and folders located directly in the folder whose ID is 1234567.\n\n```\n'1234567' in parents\n```\n\nSearch for the alias ID appfolder in the parents collection. This finds all files and folders located directly under the Application Data folder.\n\n```\n'appfolder' in parents\n```\n\nSearch for files writeable by the users \"test@example.org\" and \"test2@example.org\"\n\n```\n'test@example.org' in writers and 'test2@example.org' in writers\n```\n\nSearch for files containing the text \"important\" which are in the trash\n\n```\nfullText contains 'important' and trashed = true\n```\n\nSearch for files modified after June 4th 2012\n\n```\nmodifiedDate > '2012-06-04T12:00:00'    // default time zone is UTC\nmodifiedDate > '2012-06-04T12:00:00-08:00'\n```\n\nSearch for files shared with the authorized user with \"hello\" in the title\n\n```\nsharedWithMe and title contains 'hello'\n```\n\nSearch for files with a custom file property named additionalID with the value 8e8aceg2af2ge72e78.\n\n```\nproperties has { key='additionalID' and value='8e8aceg2af2ge72e78' and visibility='PRIVATE' }\n```\n"}],"types":{"TeamDrive":{"additionalProperties":true,"type":"object","displayName":"TeamDrive","name":"TeamDrive","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"id":{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},"name":{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},"capabilities":{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}}},"TeamDriveList":{"additionalProperties":true,"type":"object","displayName":"TeamDriveList","name":"TeamDriveList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#teamDriveList","displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"nextPageToken":{"type":"string","description":"The page token for the next page of Team Drives.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},"items":{"type":"array","description":"The list of Team Drives","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"additionalProperties":true,"displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}}},"AboutLib.User":{"additionalProperties":true,"type":"object","description":"A representation of a user in Google Drive.","displayName":"User","name":"User","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true},"displayName":{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false},"picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"isAuthenticatedUser":{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"]},"permissionId":{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false},"emailAddress":{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"AboutLib.ImportFormat":{"additionalProperties":true,"type":"object","displayName":"ImportFormat","name":"ImportFormat","typePropertyKind":"TYPE_EXPRESSION","properties":{"source":{"type":"string","description":"The imported file's content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true},"targets":{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"}}}},"AboutLib.ExportFormat":{"additionalProperties":true,"type":"object","displayName":"ExportFormat","name":"ExportFormat","typePropertyKind":"TYPE_EXPRESSION","properties":{"source":{"type":"string","description":"The content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true},"targets":{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"}}}},"AboutLib.AdditionalRoleInfo":{"additionalProperties":true,"type":"object","displayName":"AdditionalRoleInfo","name":"AdditionalRoleInfo","typePropertyKind":"TYPE_EXPRESSION","properties":{"type":{"type":"string","description":"The content type that this additional role info applies to.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false},"roleSets":{"type":"array","description":"The supported additional roles per primary role.","displayName":"roleSets","name":"roleSets","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":{"primaryRole":{"type":"string","description":"A primary permission role.","displayName":"primaryRole","name":"primaryRole","typePropertyKind":"TYPE_EXPRESSION","required":false},"additionalRoles":{"type":"array","description":"The supported additional roles with the primary role.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"}}},"additionalProperties":true,"displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION"}}}},"AboutLib.Feature":{"additionalProperties":true,"type":"object","displayName":"Feature","name":"Feature","typePropertyKind":"TYPE_EXPRESSION","properties":{"featureName":{"type":"string","description":"The name of the feature.","displayName":"featureName","name":"featureName","typePropertyKind":"TYPE_EXPRESSION","required":false},"featureRate":{"type":"number","description":"The request limit rate for this feature, in queries per second.","displayName":"featureRate","name":"featureRate","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"AboutLib.UploadSize":{"additionalProperties":true,"type":"object","displayName":"UploadSize","name":"UploadSize","typePropertyKind":"TYPE_EXPRESSION","properties":{"type":{"type":"string","description":"The file type.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false},"size":{"type":"string","description":"The max upload size for this type.","displayName":"size","name":"size","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"AboutLib.ServiceQuota":{"additionalProperties":true,"type":"object","displayName":"ServiceQuota","name":"ServiceQuota","typePropertyKind":"TYPE_EXPRESSION","properties":{"serviceName":{"type":"string","description":"The service's name, e.g. DRIVE, GMAIL, or PHOTOS.","displayName":"serviceName","name":"serviceName","typePropertyKind":"TYPE_EXPRESSION","required":true},"bytesUsed":{"type":"string","description":"The storage quota bytes used by the service.","displayName":"bytesUsed","name":"bytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":true}}},"AboutLib.About":{"additionalProperties":true,"type":"object","displayName":"About","name":"About","typePropertyKind":"TYPE_EXPRESSION","properties":{"features":{"type":"array","description":"List of additional features enabled on this account.","displayName":"features","name":"features","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The name of the feature.","displayName":"featureName","name":"featureName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"featureName"},{"type":"number","description":"The request limit rate for this feature, in queries per second.","displayName":"featureRate","name":"featureRate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"featureRate"}],"additionalProperties":true,"displayName":"Feature","name":"Feature","typePropertyKind":"TYPE_EXPRESSION"},"key":"features"},"quotaBytesTotal":{"type":"string","description":"The total number of quota bytes.","displayName":"quotaBytesTotal","name":"quotaBytesTotal","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesTotal"},"isCurrentAppInstalled":{"type":"boolean","description":"A boolean indicating whether the authenticated app is installed by the authenticated user.","displayName":"isCurrentAppInstalled","name":"isCurrentAppInstalled","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isCurrentAppInstalled"},"quotaBytesUsedInTrash":{"type":"string","description":"The number of quota bytes used by trashed items.","displayName":"quotaBytesUsedInTrash","name":"quotaBytesUsedInTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsedInTrash"},"name":{"type":"string","description":"The name of the current user.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},"domainSharingPolicy":{"type":"string","description":"The domain sharing policy for the current user. Possible values are:\n\n- **allowed**\n- **allowedWithWarning**\n- **incomingOnly**\n- **disallowed**\n","displayName":"domainSharingPolicy","name":"domainSharingPolicy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domainSharingPolicy"},"folderColorPalette":{"type":"array","description":"The palette of allowable folder colors as RGB hex strings.","displayName":"folderColorPalette","name":"folderColorPalette","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"folderColorPalette"},"permissionId":{"type":"string","description":"The current user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},"selfLink":{"type":"string","description":"A link back to this item.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"etag":{"type":"string","description":"The ETag of the item.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"exportFormats":{"type":"array","description":"The allowable export formats.","displayName":"exportFormats","name":"exportFormats","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"source"},{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"targets"}],"additionalProperties":true,"displayName":"ExportFormat","name":"ExportFormat","typePropertyKind":"TYPE_EXPRESSION"},"key":"exportFormats"},"quotaType":{"type":"string","description":"The type of the user's storage quota. Possible values are:\n\n- **LIMITED**\n- **UNLIMITED**\n","displayName":"quotaType","name":"quotaType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaType"},"quotaBytesByService":{"type":"array","displayName":"quotaBytesByService","name":"quotaBytesByService","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"quotaBytesByService"},"maxUploadSizes":{"type":"array","description":"List of max upload sizes for each file type. The most specific type takes precedence.","displayName":"maxUploadSizes","name":"maxUploadSizes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The file type.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The max upload size for this type.","displayName":"size","name":"size","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"size"}],"additionalProperties":true,"displayName":"UploadSize","name":"UploadSize","typePropertyKind":"TYPE_EXPRESSION"},"key":"maxUploadSizes"},"languageCode":{"type":"string","description":"The user's language or locale code, as defined by BCP 47, with some extensions from Unicode's LDML format (http://www.unicode.org/reports/tr35/).","displayName":"languageCode","name":"languageCode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"languageCode"},"remainingChangeIds":{"type":"string","description":"The number of remaining change ids.","displayName":"remainingChangeIds","name":"remainingChangeIds","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"remainingChangeIds"},"additionalRoleInfo":{"type":"array","description":"Information about supported additional roles per file type. The most specific type takes precedence.","displayName":"additionalRoleInfo","name":"additionalRoleInfo","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The content type that this additional role info applies to.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"array","description":"The supported additional roles per primary role.","displayName":"roleSets","name":"roleSets","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"A primary permission role.","displayName":"primaryRole","name":"primaryRole","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"primaryRole"},{"type":"array","description":"The supported additional roles with the primary role.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"}],"additionalProperties":true,"displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION"},"key":"roleSets"}],"additionalProperties":true,"displayName":"AdditionalRoleInfo","name":"AdditionalRoleInfo","typePropertyKind":"TYPE_EXPRESSION"},"key":"additionalRoleInfo"},"kind":{"type":"string","description":"This is always drive#about.","enum":["drive#about"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"quotaBytesUsed":{"type":"string","description":"The number of quota bytes used by Google Drive.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},"largestChangeId":{"type":"string","description":"The largest change id.","displayName":"largestChangeId","name":"largestChangeId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"largestChangeId"},"rootFolderId":{"type":"string","description":"The id of the root folder.","displayName":"rootFolderId","name":"rootFolderId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rootFolderId"},"user":{"additionalProperties":true,"type":"object","description":"The authenticated user.","displayName":"user","name":"user","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"user"},"quotaBytesUsedAggregate":{"type":"string","description":"The number of quota bytes used by all Google apps (Drive, Picasa, etc.).","displayName":"quotaBytesUsedAggregate","name":"quotaBytesUsedAggregate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsedAggregate"},"importFormats":{"type":"array","description":"The allowable import formats.","displayName":"importFormats","name":"importFormats","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"The imported file's content type to convert from.","displayName":"source","name":"source","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"source"},{"type":"array","description":"The possible content types to convert to.","displayName":"targets","name":"targets","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"targets"}],"additionalProperties":true,"displayName":"ImportFormat","name":"ImportFormat","typePropertyKind":"TYPE_EXPRESSION"},"key":"importFormats"}}},"AppLib.Icon":{"additionalProperties":true,"type":"object","description":"App's icon","displayName":"Icon","name":"Icon","typePropertyKind":"TYPE_EXPRESSION","properties":{"category":{"description":"Category of the icon. Allowed values are:\n\n- **application** - icon for the application\n- **document** - icon for a file associated with the app\n- **documentShared** - icon for a shared file associated with the app\n","enum":["application","document","documentShared"],"displayName":"category","name":"category","type":"string","typePropertyKind":"TYPE_EXPRESSION","required":true,"examples":["application"]},"size":{"type":"integer","description":"Size of the icon. Represented as the maximum of the width and height.","displayName":"size","name":"size","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":true},"iconUrl":{"type":"string","description":"URL for the icon.","displayName":"iconUrl","name":"iconUrl","typePropertyKind":"TYPE_EXPRESSION","required":true}}},"AppLib.App":{"additionalProperties":true,"type":"object","displayName":"App","name":"App","typePropertyKind":"TYPE_EXPRESSION","properties":{"primaryFileExtensions":{"type":"array","description":"The list of primary file extensions.","displayName":"primaryFileExtensions","name":"primaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryFileExtensions"},"secondaryFileExtensions":{"type":"array","description":"The list of secondary file extensions.","displayName":"secondaryFileExtensions","name":"secondaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryFileExtensions"},"authorized":{"type":"boolean","description":"Whether the app is authorized to access data on the user's Drive.","displayName":"authorized","name":"authorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authorized"},"productUrl":{"type":"string","description":"A link to the product listing for this app.","displayName":"productUrl","name":"productUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productUrl"},"name":{"type":"string","description":"The name of the app.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},"supportsCreate":{"type":"boolean","description":"Whether this app supports creating new objects.","displayName":"supportsCreate","name":"supportsCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsCreate"},"openUrlTemplate":{"type":"string","description":"The template url for opening files with this app. The template will contain\n`{ids}` and/or `{exportIds}` to be replaced by the actual file ids.\nSee Open Files for the full documentation.\n","displayName":"openUrlTemplate","name":"openUrlTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"openUrlTemplate"},"supportsOfflineCreate":{"type":"boolean","description":"Whether this app supports creating new files when offline","displayName":"supportsOfflineCreate","name":"supportsOfflineCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsOfflineCreate"},"secondaryMimeTypes":{"type":"array","description":"The list of secondary mime types.","displayName":"secondaryMimeTypes","name":"secondaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryMimeTypes"},"supportsImport":{"type":"boolean","description":"Whether this app supports importing Google Docs.","displayName":"supportsImport","name":"supportsImport","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsImport"},"productId":{"type":"string","description":"The ID of the product listing for this app.","displayName":"productId","name":"productId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productId"},"icons":{"type":"array","description":"The various icons for the app.","displayName":"icons","name":"icons","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"App's icon","properties":[{"description":"Category of the icon. Allowed values are:\n\n- **application** - icon for the application\n- **document** - icon for a file associated with the app\n- **documentShared** - icon for a shared file associated with the app\n","enum":["application","document","documentShared"],"displayName":"category","name":"category","type":"string","typePropertyKind":"TYPE_EXPRESSION","required":true,"examples":["application"],"key":"category"},{"type":"integer","description":"Size of the icon. Represented as the maximum of the width and height.","displayName":"size","name":"size","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"size"},{"type":"string","description":"URL for the icon.","displayName":"iconUrl","name":"iconUrl","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"iconUrl"}],"additionalProperties":true,"displayName":"Icon","name":"Icon","typePropertyKind":"TYPE_EXPRESSION"},"key":"icons"},"shortDescription":{"type":"string","description":"A short description of the app.","displayName":"shortDescription","name":"shortDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shortDescription"},"objectType":{"type":"string","description":"The type of object this app creates (e.g. Chart). If empty, the app name should be used instead.","displayName":"objectType","name":"objectType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"objectType"},"primaryMimeTypes":{"type":"array","description":"The list of primary mime types.","displayName":"primaryMimeTypes","name":"primaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryMimeTypes"},"supportsMultiOpen":{"type":"boolean","description":"Whether this app supports opening more than one file.","displayName":"supportsMultiOpen","name":"supportsMultiOpen","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsMultiOpen"},"createInFolderTemplate":{"type":"string","description":"The template url to create a new file with this app in a given folder.\nThe template will contain `{folderId}` to be replaced by the folder to create the new file in.\n","displayName":"createInFolderTemplate","name":"createInFolderTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createInFolderTemplate"},"id":{"type":"string","description":"The ID of the app.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"kind":{"type":"string","description":"This is always drive#app.","enum":["drive#app"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"createUrl":{"type":"string","description":"The url to create a new file with this app.","displayName":"createUrl","name":"createUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createUrl"},"longDescription":{"type":"string","description":"A long description of the app.","displayName":"longDescription","name":"longDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longDescription"},"installed":{"type":"boolean","description":"Whether the app is installed.","displayName":"installed","name":"installed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"installed"},"useByDefault":{"type":"boolean","description":"Whether the app is selected as the default handler for the types it supports.","displayName":"useByDefault","name":"useByDefault","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"useByDefault"},"hasDriveWideScope":{"type":"boolean","description":"Whether the app has drive-wide scope. An app with drive-wide scope can access all files in the user's drive.","displayName":"hasDriveWideScope","name":"hasDriveWideScope","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasDriveWideScope"}}},"AppLib.AppList":{"additionalProperties":true,"type":"object","description":"Resource returned by the API when requesting list of files.","displayName":"AppList","name":"AppList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#appList.","enum":["drive#appList"],"displayName":"kind","default":"drive#appList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"items":{"type":"array","description":"The actual list of apps.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"array","description":"The list of primary file extensions.","displayName":"primaryFileExtensions","name":"primaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryFileExtensions"},{"type":"array","description":"The list of secondary file extensions.","displayName":"secondaryFileExtensions","name":"secondaryFileExtensions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryFileExtensions"},{"type":"boolean","description":"Whether the app is authorized to access data on the user's Drive.","displayName":"authorized","name":"authorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authorized"},{"type":"string","description":"A link to the product listing for this app.","displayName":"productUrl","name":"productUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productUrl"},{"type":"string","description":"The name of the app.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"boolean","description":"Whether this app supports creating new objects.","displayName":"supportsCreate","name":"supportsCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsCreate"},{"type":"string","description":"The template url for opening files with this app. The template will contain\n`{ids}` and/or `{exportIds}` to be replaced by the actual file ids.\nSee Open Files for the full documentation.\n","displayName":"openUrlTemplate","name":"openUrlTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"openUrlTemplate"},{"type":"boolean","description":"Whether this app supports creating new files when offline","displayName":"supportsOfflineCreate","name":"supportsOfflineCreate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsOfflineCreate"},{"type":"array","description":"The list of secondary mime types.","displayName":"secondaryMimeTypes","name":"secondaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"secondaryMimeTypes"},{"type":"boolean","description":"Whether this app supports importing Google Docs.","displayName":"supportsImport","name":"supportsImport","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsImport"},{"type":"string","description":"The ID of the product listing for this app.","displayName":"productId","name":"productId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"productId"},{"type":"array","description":"The various icons for the app.","displayName":"icons","name":"icons","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"App's icon","properties":[{"description":"Category of the icon. Allowed values are:\n\n- **application** - icon for the application\n- **document** - icon for a file associated with the app\n- **documentShared** - icon for a shared file associated with the app\n","enum":["application","document","documentShared"],"displayName":"category","name":"category","type":"string","typePropertyKind":"TYPE_EXPRESSION","required":true,"examples":["application"],"key":"category"},{"type":"integer","description":"Size of the icon. Represented as the maximum of the width and height.","displayName":"size","name":"size","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"size"},{"type":"string","description":"URL for the icon.","displayName":"iconUrl","name":"iconUrl","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"iconUrl"}],"additionalProperties":true,"displayName":"Icon","name":"Icon","typePropertyKind":"TYPE_EXPRESSION"},"key":"icons"},{"type":"string","description":"A short description of the app.","displayName":"shortDescription","name":"shortDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shortDescription"},{"type":"string","description":"The type of object this app creates (e.g. Chart). If empty, the app name should be used instead.","displayName":"objectType","name":"objectType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"objectType"},{"type":"array","description":"The list of primary mime types.","displayName":"primaryMimeTypes","name":"primaryMimeTypes","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"primaryMimeTypes"},{"type":"boolean","description":"Whether this app supports opening more than one file.","displayName":"supportsMultiOpen","name":"supportsMultiOpen","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"supportsMultiOpen"},{"type":"string","description":"The template url to create a new file with this app in a given folder.\nThe template will contain `{folderId}` to be replaced by the folder to create the new file in.\n","displayName":"createInFolderTemplate","name":"createInFolderTemplate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createInFolderTemplate"},{"type":"string","description":"The ID of the app.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#app.","enum":["drive#app"],"displayName":"kind","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The url to create a new file with this app.","displayName":"createUrl","name":"createUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createUrl"},{"type":"string","description":"A long description of the app.","displayName":"longDescription","name":"longDescription","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longDescription"},{"type":"boolean","description":"Whether the app is installed.","displayName":"installed","name":"installed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"installed"},{"type":"boolean","description":"Whether the app is selected as the default handler for the types it supports.","displayName":"useByDefault","name":"useByDefault","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"useByDefault"},{"type":"boolean","description":"Whether the app has drive-wide scope. An app with drive-wide scope can access all files in the user's drive.","displayName":"hasDriveWideScope","name":"hasDriveWideScope","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasDriveWideScope"}],"additionalProperties":true,"displayName":"App","name":"App","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"},"defaultAppIds":{"type":"array","description":"List of app IDs that the user has specified to use by default. The list is in reverse-priority order (lowest to highest).","displayName":"defaultAppIds","name":"defaultAppIds","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"any"},"key":"defaultAppIds"}}},"ChildLib.Child":{"additionalProperties":true,"type":"object","description":"A reference to a folder's child.","displayName":"Child","name":"Child","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#childReference.","enum":["drive#childReference"],"displayName":"kind","default":"drive#childReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"id":{"type":"string","description":"The ID of the child.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"selfLink":{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"childLink":{"type":"string","description":"A link to the child.","displayName":"childLink","name":"childLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"childLink"}}},"ChildLib.ChildrenList":{"additionalProperties":true,"type":"object","displayName":"ChildrenList","name":"ChildrenList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#childList.","enum":["drive#childList"],"displayName":"kind","default":"drive#childList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"nextPageToken":{"type":"string","description":"The page token for the next page of children.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},"nextLink":{"type":"string","description":"A link to the next page of children.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},"items":{"type":"array","description":"The actual list of children.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"CommentLib.User":{"additionalProperties":true,"type":"object","description":"A representation of a user in Google Drive.","displayName":"User","name":"User","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true},"displayName":{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false},"picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"isAuthenticatedUser":{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"]},"permissionId":{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false},"emailAddress":{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"CommentLib.ReplyWritable":{"additionalProperties":true,"type":"object","displayName":"ReplyWritable","name":"ReplyWritable","typePropertyKind":"TYPE_EXPRESSION","properties":{"content":{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},"verb":{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"}}},"CommentLib.Reply":{"additionalProperties":true,"type":"object","displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION","properties":{"htmlContent":{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},"deleted":{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},"verb":{"type":"string","description":"The action this reply performed to the parent comment. When creating a new reply this is the action to be perform to the parent comment. Possible values are:\n\n- **resolve** - To resolve a comment.\n- **reopen** - To reopen (un-resolve) a comment.\n","displayName":"verb","name":"verb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"verb"},"content":{"type":"string","description":"The plain text content used to create this reply.\nThis is not HTML safe and should only be used as a starting point to make edits to a\nreply's content. This field is required on inserts if no verb is specified (resolve/reopen).\n","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"content"},"author":{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},"replyId":{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},"kind":{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"modifiedDate":{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},"createdDate":{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"}}},"CommentLib.CommentWritable":{"additionalProperties":true,"type":"object","displayName":"CommentWritable","name":"CommentWritable","typePropertyKind":"TYPE_EXPRESSION","properties":{"content":{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},"context":{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"}}},"CommentLib.Comment":{"additionalProperties":true,"type":"object","displayName":"Comment","name":"Comment","typePropertyKind":"TYPE_EXPRESSION","properties":{"htmlContent":{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},"deleted":{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},"fileTitle":{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},"content":{"type":"string","description":"The plain text content used to create this comment. This is not HTML safe and should only be used as a starting point to make edits to a comment's content.","displayName":"content","name":"content","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"content"},"selfLink":{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"commentId":{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},"author":{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},"replies":{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},"status":{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},"kind":{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"context":{"additionalProperties":true,"type":"object","description":"The context of the file which is being commented on.","displayName":"context","name":"context","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"The MIME type of the context snippet.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},{"type":"string","description":"Data representation of the segment of the file being commented on. In the case of a text file for example, this would be the actual text that the comment is about.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"key":"context"},"modifiedDate":{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},"createdDate":{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},"anchor":{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},"fileId":{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}}},"CommentLib.CommentList":{"additionalProperties":true,"type":"object","displayName":"CommentList","name":"CommentList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#commentList.","enum":["drive#commentList"],"displayName":"kind","default":"drive#commentList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"nextPageToken":{"type":"string","description":"The token to use to request the next page of results.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"nextLink":{"type":"string","description":"A link to the next page of comments.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextLink"},"items":{"type":"array","description":"The actual list of comments.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"HTML formatted content for this comment.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this comment has been deleted. If a comment has been deleted the content will be cleared and this will only represent a comment that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"},{"type":"string","description":"The title of the file which this comment is addressing.","displayName":"fileTitle","name":"fileTitle","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileTitle"},{"type":"string","description":"A link back to this comment.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The ID of the comment.","displayName":"commentId","name":"commentId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"commentId"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"array","description":"Replies to this post.","displayName":"replies","name":"replies","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#commentReply.","enum":["drive#commentReply"],"displayName":"kind","default":"drive#commentReply","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of the reply.","displayName":"replyId","name":"replyId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"replyId"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"additionalProperties":true,"type":"object","description":"The user who wrote this comment.","displayName":"author","name":"author","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"author"},{"type":"string","description":"HTML formatted content for this reply.","displayName":"htmlContent","name":"htmlContent","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"htmlContent"},{"type":"boolean","description":"Whether this reply has been deleted. If a reply has been deleted the content will be cleared and this will only represent a reply that once existed.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"deleted"}],"additionalProperties":true,"displayName":"Reply","name":"Reply","typePropertyKind":"TYPE_EXPRESSION"},"key":"replies"},{"type":"string","description":"The status of this comment. Status can be changed by posting a reply to a comment with the desired status.\n\n- **open** - The comment is still open.\n- **resolved** - The comment has been resolved by one of its replies.\n","displayName":"status","name":"status","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"status"},{"type":"string","description":"This is always drive#comment.","enum":["drive#comment"],"displayName":"kind","default":"drive#comment","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"datetime","description":"The date when this comment or any of its replies were last modified.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},{"type":"datetime","description":"The date when this comment was first created.","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"createdDate"},{"type":"string","description":"A region of the document represented as a JSON string. See anchor documentation for details on how to define and interpret anchor properties.","displayName":"anchor","name":"anchor","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"anchor"},{"type":"string","description":"The file which this comment is addressing.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}],"additionalProperties":true,"displayName":"Comment","name":"Comment","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}}},"CommentLib.ReplyList":{"additionalProperties":true,"type":"object","displayName":"ReplyList","name":"ReplyList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#commentReplyList.","enum":["drive#commentReplyList"],"displayName":"kind","default":"drive#commentReplyList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"nextPageToken":{"type":"string","description":"The token to use to request the next page of results.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextPageToken"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"nextLink":{"type":"string","description":"A link to the next page of comments.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"nextLink"},"items":{"type":"array","description":"The actual list of reply.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"DriveFile.Thumbnail":{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"Thumbnail","name":"Thumbnail","typePropertyKind":"TYPE_EXPRESSION","properties":{"image":{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false},"mimeType":{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.FileLabels":{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"Labels","name":"FileLabels","typePropertyKind":"TYPE_EXPRESSION","properties":{"starred":{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"]},"hidden":{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":{"DriveFile.Annotations.deprecated":{"name":"DriveFile.Annotations.deprecated"}},"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"]},"trashed":{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"]},"restricted":{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"]},"viewed":{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"]}}},"DriveFile.User":{"additionalProperties":true,"type":"object","description":"A representation of a user in Google Drive.","displayName":"User","name":"User","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true},"displayName":{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false},"picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"isAuthenticatedUser":{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"]},"permissionId":{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false},"emailAddress":{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.Resource":{"additionalProperties":true,"type":"object","description":"A reference to a file's parent.","displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false},"id":{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false},"selfLink":{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false},"parentLink":{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false},"isRoot":{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.Owners":{"additionalProperties":true,"type":"object","description":"The owner(s) of a file.","displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false},"displayName":{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"]},"picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"isAuthenticatedUser":{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false},"permissionId":{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false},"emailAddress":{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.Picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"Picture","name":"Picture","typePropertyKind":"TYPE_EXPRESSION","properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.FileCapabilities":{"additionalProperties":true,"type":"object","displayName":"FileCapabilities","name":"FileCapabilities","typePropertyKind":"TYPE_EXPRESSION","properties":{"canDelete":{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false},"canTrash":{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false},"canCopy":{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false},"canDownload":{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false},"canReadTeamDrive":{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false},"canUntrash":{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false},"canListChildren":{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false},"canRename":{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false},"canReadRevisions":{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false},"canMoveItemIntoTeamDrive":{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false},"canEdit":{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false},"canComment":{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false},"canRemoveChildren":{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false},"canAddChildren":{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false},"canShare":{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false},"canMoveTeamDriveItem":{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"DriveFile.Property":{"additionalProperties":true,"type":"object","displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true},"etag":{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true},"selfLink":{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true},"key":{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true},"visibility":{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true},"value":{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true}}},"DriveFile.DriveFile":{"additionalProperties":true,"type":"object","displayName":"DriveFile","name":"DriveFile","typePropertyKind":"TYPE_EXPRESSION","properties":{"description":{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},"properties":["array","The list of properties.","properties","properties","TYPE_EXPRESSION",false,{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"properties"],"isAppAuthorized":{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},"capabilities":{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},"labels":{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},"fileSize":{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},"markedViewedByMeDate":{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},"imageMediaMetadata":{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},"trashedDate":{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},"indexableText":{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},"openWithLinks":{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},"defaultOpenWithLink":{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},"permissions":{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},"lastViewedByMeDate":{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},"owners":{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},"headRevisionId":{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},"editable":{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},"exportLinks":{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},"lastModifyingUserName":{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},"copyable":{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},"userPermission":{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},"selfLink":{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"etag":{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"iconLink":{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},"shareable":{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},"teamDriveId":{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},"title":{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},"embedLink":{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},"hasThumbnail":{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},"lastModifyingUser":{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},"ownerNames":{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},"thumbnailVersion":{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},"folderColorRgb":{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},"thumbnail":{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},"canReadRevisions":{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},"spaces":{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},"fileExtension":{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},"id":{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"thumbnailLink":{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},"writersCanShare":{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},"explicitlyTrashed":{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},"kind":{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"appDataContents":{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},"parents":{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},"canComment":{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},"mimeType":{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},"alternateLink":{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},"trashingUser":{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},"shared":{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},"sharedWithMeDate":{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},"sharingUser":{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},"modifiedDate":{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},"downloadUrl":{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},"md5Checksum":{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},"createdDate":{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},"hasAugmentedPermissions":{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},"modifiedByMeDate":{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},"quotaBytesUsed":{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},"version":{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},"originalFilename":{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},"webViewLink":{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},"videoMediaMetadata":{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},"ownedByMe":{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},"webContentLink":{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}}},"DriveFile.DriveFileCreate":{"additionalProperties":true,"type":"object","description":"A type to be used when a new file to be created.","displayName":"File","name":"DriveFileCreate","typePropertyKind":"TYPE_EXPRESSION","properties":{"description":{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"description"},"labels":{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},"markedViewedByMeDate":{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},"indexableText":{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"text"}],"key":"indexableText"},"lastViewedByMeDate":{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},"title":{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"title"},"id":{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},"writersCanShare":{"type":"boolean","description":"Whether writers can share the document with other users.","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"writersCanShare"},"parents":{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},"mimeType":{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"mimeType"},"modifiedDate":{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modifiedDate"},"originalFilename":{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"}}},"DriveFile.DriveFileList":{"additionalProperties":true,"type":"object","description":"A response body for the files list","displayName":"FileList","name":"DriveFileList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#fileList.","enum":["drive#fileList"],"displayName":"kind","default":"drive#fileList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"nextPageToken":{"type":"string","description":"The page token for the next page of files.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},"nextLink":{"type":"string","description":"A link to the next page of files.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},"items":{"type":"array","description":"The actual list of files.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},{"type":"array","description":"The list of properties.","displayName":"properties","name":"properties","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"key":"properties"},{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"additionalProperties":true,"displayName":"DriveFile","name":"DriveFile","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}}},"ParentLib.Parent":{"additionalProperties":true,"type":"object","description":"A reference to a file's parent.","displayName":"Parent","name":"Parent","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"id":{"type":"string","description":"The ID of the parent.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"selfLink":{"type":"string","description":"A link back to this reference.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"parentLink":{"type":"string","description":"A link to the parent.","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},"isRoot":{"type":"string","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}}},"ParentLib.ParentList":{"additionalProperties":true,"type":"object","description":"A list of Parents.","displayName":"ParentList","name":"ParentList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#parentList.","enum":["drive#parentList"],"displayName":"kind","default":"drive#parentList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"items":{"type":"array","description":"The actual list of parents.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"PermissionLib.Permission":{"additionalProperties":true,"type":"object","description":"A permission for a file.","displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION","properties":{"role":{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},"authKey":{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},"name":{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},"emailAddress":{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},"value":{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},"selfLink":{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"type":{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},"etag":{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"additionalRoles":{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},"id":{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"kind":{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"domain":{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},"withLink":{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},"photoLink":{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}}},"PermissionLib.PermissionInsert":{"additionalProperties":true,"type":"object","description":"Create a permission for a file.","displayName":"PermissionInsert","name":"PermissionInsert","typePropertyKind":"TYPE_EXPRESSION","properties":{"id":{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"role":{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},"additionalRoles":{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},"type":{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},"value":{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},"withLink":{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"}}},"PermissionLib.PermissionList":{"additionalProperties":true,"type":"object","displayName":"PermissionList","name":"PermissionList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#permissionList.","enum":["drive#permissionList"],"displayName":"kind","default":"drive#permissionList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"items":{"type":"array","description":"The actual list of permissions.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"PermissionLib.PermissionId":{"additionalProperties":true,"type":"object","displayName":"PermissionId","name":"PermissionId","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#permissionId.","enum":["drive#permissionId"],"displayName":"kind","default":"drive#permissionId","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"id":{"type":"string","description":"The permission ID.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"}}},"Properties.Property":{"additionalProperties":true,"type":"object","displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"etag":{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"key":{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},"visibility":{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},"value":{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}}},"Properties.PropertyList":{"additionalProperties":true,"type":"object","displayName":"PropertyList","name":"PropertyList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"The type of file. This is always drive#propertyList.","displayName":"kind","default":"drive#propertyList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},"etag":{"type":"string","description":"ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},"items":{"type":"array","description":"The list of properties.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","properties":[{"type":"string","description":"The type of file. This is always drive#property.","displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"A link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION"},"key":"items"}}},"RevisionLib.User":{"additionalProperties":true,"type":"object","description":"A representation of a user in Google Drive.","displayName":"User","name":"User","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true},"displayName":{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false},"picture":{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":{"url":{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"isAuthenticatedUser":{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"]},"permissionId":{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false},"emailAddress":{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"RevisionLib.RevisionBase":{"additionalProperties":true,"type":"object","displayName":"RevisionBase","name":"RevisionBase","typePropertyKind":"TYPE_EXPRESSION","properties":{"pinned":{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false},"published":{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false},"publishAuto":{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false},"publishedOutsideDomain":{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false}}},"RevisionLib.Revision":{"additionalProperties":true,"type":"object","displayName":"Revision","name":"Revision","typePropertyKind":"TYPE_EXPRESSION","properties":{"publishedOutsideDomain":{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"},"fileSize":{"type":"string","description":"The size of the revision in bytes. This will only be populated on files with content stored in Drive.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},"publishAuto":{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},"pinned":{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},"exportLinks":{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\n\nKeys in the object is a mapping from export format to URL.\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},"lastModifyingUserName":{"type":"string","description":"Name of the last user to modify this revision.","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},"selfLink":{"type":"string","description":"A link back to this revision.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"etag":{"type":"string","description":"The ETag of the revision.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"lastModifyingUser":{"additionalProperties":true,"type":"object","description":"The last user to modify this revision.","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"lastModifyingUser"},"id":{"type":"string","description":"The ID of the revision.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"kind":{"type":"string","description":"This is always drive#revision.","enum":["drive#revision"],"displayName":"kind","default":"drive#revision","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"mimeType":{"type":"string","description":"The MIME type of the revision.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},"modifiedDate":{"type":"datetime","description":"Last time this revision was modified (formatted RFC 3339 timestamp).","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},"downloadUrl":{"type":"string","description":"Short term download URL for the file. This will only be populated on files with content stored in Drive.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},"md5Checksum":{"type":"string","description":"An MD5 checksum for the content of this revision. This will only be populated on files with content stored in Drive.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},"publishedLink":{"type":"string","description":"A link to the published revision.","displayName":"publishedLink","name":"publishedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedLink"},"originalFilename":{"type":"string","description":"The original filename when this revision was created. This will only be populated on files with content stored in Drive.","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},"published":{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"}}},"RevisionLib.RevisionInsert":{"additionalProperties":true,"type":"object","displayName":"RevisionInsert","name":"RevisionInsert","typePropertyKind":"TYPE_EXPRESSION","description":"An object used to create / update the revision resource.","properties":{"pinned":{"type":"boolean","description":"Whether this revision is pinned to prevent automatic purging.\nThis will only be populated and can only be modified on files with content stored in\nDrive which are not Google Docs. Revisions can also be pinned when they are created\nthrough the drive.files.insert/update/copy by using the pinned query parameter.\n","displayName":"pinned","name":"pinned","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"pinned"},"published":{"type":"boolean","description":"Whether this revision is published. This is only populated and can only be modified for Google Docs.","displayName":"published","name":"published","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"published"},"publishAuto":{"type":"boolean","description":"Whether subsequent revisions will be automatically republished. This is only populated and can only be modified for Google Docs.","displayName":"publishAuto","name":"publishAuto","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishAuto"},"publishedOutsideDomain":{"type":"boolean","description":"Whether this revision is published outside the domain. This is only populated and can only be modified for Google Docs.","displayName":"publishedOutsideDomain","name":"publishedOutsideDomain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"publishedOutsideDomain"}}},"RevisionLib.RevisionList":{"additionalProperties":true,"type":"object","displayName":"RevisionList","name":"RevisionList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#revisionList.","enum":["drive#revisionList"],"displayName":"kind","default":"drive#revisionList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"items":{"type":"array","description":"The actual list of revisions.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"WatchLib.Change":{"additionalProperties":true,"type":"object","displayName":"Change","name":"Change","typePropertyKind":"TYPE_EXPRESSION","properties":{"deleted":{"type":"boolean","description":"Whether the file has been deleted.","displayName":"deleted","name":"deleted","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"deleted"},"teamDrive":{"additionalProperties":true,"type":"object","displayName":"teamDrive","name":"teamDrive","typePropertyKind":"INPLACE","description":"The updated state of the Team Drive. Present if the type is teamDrive, the user is still a member of the Team Drive, and the Team Drive has not been deleted.","required":false,"properties":[{"type":"string","description":"This is always drive#teamDrive","enum":["drive#teamDrive"],"displayName":"kind","default":"drive#teamDrive","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"The ID of this Team Drive which is also the ID of the top level folder for this Team Drive.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"id"},{"type":"string","description":"The name of this Team Drive.","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"name"},{"additionalProperties":true,"type":"object","description":"Capabilities the current user has on this Team Drive.","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"boolean","description":"Whether files in this Team Drive can be copied by the current user.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canCopy"},{"type":"boolean","description":"Whether the current user can add members to this Team Drive or remove them or change their role.","displayName":"canManageMembers","name":"canManageMembers","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canManageMembers"},{"type":"boolean","description":"Whether files in this Team Drive can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDownload"},{"type":"boolean","description":"Whether this Team Drive can be deleted by the current user.","displayName":"canDeleteTeamDrive","name":"canDeleteTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canDeleteTeamDrive"},{"type":"boolean","description":"Whether the current user can list the children of folders in this Team Drive.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canListChildren"},{"type":"boolean","description":"Whether files or folders in this Team Drive can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRename"},{"type":"boolean","description":"Whether this Team Drive can be renamed by the current user.","displayName":"canRenameTeamDrive","name":"canRenameTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRenameTeamDrive"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of files in this Team Drive.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canReadRevisions"},{"type":"boolean","description":"Whether files in this Team Drive can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on files in this Team Drive.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from folders in this Team Drive.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to folders in this Team Drive.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canAddChildren"},{"type":"boolean","description":"Whether the current user can share files or folders in this Team Drive.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"canShare"}],"key":"capabilities"}],"key":"teamDrive"},"file":{"additionalProperties":true,"type":"object","displayName":"file","name":"file","typePropertyKind":"TYPE_EXPRESSION","description":"The updated state of the file. Present if the file has not been deleted.","required":false,"properties":[{"type":"string","description":"A short description of the file.","displayName":"description","name":"description","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"description"},{"type":"array","description":"The list of properties.","displayName":"properties","name":"properties","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","properties":[{"type":"string","description":"This is always drive#property.","enum":["drive#property"],"displayName":"kind","default":"drive#property","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"ETag of the property.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"etag"},{"type":"string","description":"The link back to this property.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"selfLink"},{"type":"string","description":"The key of this property.","displayName":"key","name":"key","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"key"},{"type":"string","description":"The visibility of this property.","displayName":"visibility","name":"visibility","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"visibility"},{"type":"string","description":"The value of this property.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"value"}],"additionalProperties":true,"displayName":"Property","name":"Property","typePropertyKind":"TYPE_EXPRESSION","key":"items"},"key":"properties"},{"type":"boolean","description":"Whether the file was created or opened by the requesting app.","displayName":"isAppAuthorized","name":"isAppAuthorized","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAppAuthorized"},{"additionalProperties":true,"type":"object","displayName":"capabilities","name":"capabilities","typePropertyKind":"TYPE_EXPRESSION","description":"Capabilities the current user has on the file. Each capability corresponds to a fine-grained action that a user may take.","required":false,"properties":[{"type":"boolean","description":"Whether the file can be deleted by the current user.","displayName":"canDelete","name":"canDelete","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDelete"},{"type":"boolean","description":"Whether the file can be trashed by the current user.","displayName":"canTrash","name":"canTrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canTrash"},{"type":"boolean","description":"Whether the file can be copied by the current user. For a Team Drive item, whether non-folder descendants of this item, or this item itself if it is not a folder, can be copied.","displayName":"canCopy","name":"canCopy","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canCopy"},{"type":"boolean","description":"Whether the file can be downloaded by the current user.","displayName":"canDownload","name":"canDownload","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canDownload"},{"type":"boolean","description":"Whether the current user has read access to the Team Drive to which this file belongs. Only populated for Team Drive files.","displayName":"canReadTeamDrive","name":"canReadTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadTeamDrive"},{"type":"boolean","description":"Whether the file can be restored from the trash by the current user.","displayName":"canUntrash","name":"canUntrash","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canUntrash"},{"type":"boolean","description":"Whether the current user can list the children of this folder. This is always false when the item is not a folder.","displayName":"canListChildren","name":"canListChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canListChildren"},{"type":"boolean","description":"Whether the file can be renamed by the current user.","displayName":"canRename","name":"canRename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRename"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file. For a Team Drive item, whether revisions of non-folder descendants of this item, or this item itself if it is not a folder, can be read.","displayName":"canReadRevisions","name":"canReadRevisions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"boolean","description":"Whether the current user can move this item into a Team Drive. If the item is in a Team Drive, this field is equivalent to canMoveTeamDriveItem.","displayName":"canMoveItemIntoTeamDrive","name":"canMoveItemIntoTeamDrive","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveItemIntoTeamDrive"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"canEdit","name":"canEdit","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canEdit"},{"type":"boolean","description":"Whether the current user can comment on the file.","displayName":"canComment","name":"canComment","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"boolean","description":"Whether the current user can remove children from this folder. This is always false when the item is not a folder.","displayName":"canRemoveChildren","name":"canRemoveChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canRemoveChildren"},{"type":"boolean","description":"Whether the current user can add children to this folder. This is always false when the item is not a folder.","displayName":"canAddChildren","name":"canAddChildren","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canAddChildren"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.","displayName":"canShare","name":"canShare","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canShare"},{"type":"boolean","description":"Whether the current user can move this Team Drive item by changing its parent. Note that a request to change the parent for this item may still fail depending on the new parent that is being added. Only populated for Team Drive files.","displayName":"canMoveTeamDriveItem","name":"canMoveTeamDriveItem","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canMoveTeamDriveItem"}],"key":"capabilities"},{"additionalProperties":true,"type":"object","description":"A group of labels for the file.","displayName":"labels","name":"labels","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"boolean","description":"Whether this file is starred by the user","displayName":"starred","name":"starred","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"starred"},{"description":"Deprecated","displayName":"hidden","name":"hidden","type":"boolean","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"hidden"},{"type":"boolean","description":"Whether this file has been trashed. This label applies to all users accessing the file; however, only owners are allowed to see and untrash files.","displayName":"trashed","name":"trashed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"trashed"},{"type":"boolean","description":"Whether viewers and commenters are prevented from downloading, printing, and copying this file.","displayName":"restricted","name":"restricted","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"restricted"},{"type":"boolean","description":"Whether this file has been viewed by this user.","displayName":"viewed","name":"viewed","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["true"],"key":"viewed"}],"key":"labels"},{"type":"integer","description":"The size of the file in bytes. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileSize","name":"fileSize","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileSize"},{"type":"datetime","description":"Deprecated","displayName":"markedViewedByMeDate","name":"markedViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"markedViewedByMeDate"},{"additionalProperties":true,"type":"object","description":"Metadata about image media. This will only be present for image types, and its contents will depend on what can be parsed from the image content.","displayName":"imageMediaMetadata","name":"imageMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The focal length used to create the photo, in millimeters.","displayName":"focalLength","name":"focalLength","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"focalLength"},{"type":"datetime","description":"The date and time the photo was taken (EXIF format timestamp).","displayName":"date","name":"date","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"date"},{"type":"number","description":"The aperture used to create the photo (f-number).","displayName":"aperture","name":"aperture","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"aperture"},{"type":"integer","description":"The rotation in clockwise degrees from the image's original orientation.","displayName":"rotation","name":"rotation","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"rotation"},{"type":"number","description":"The exposure bias of the photo (APEX value).","displayName":"exposureBias","name":"exposureBias","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureBias"},{"type":"boolean","description":"Whether a flash was used to create the photo.","displayName":"flashUsed","name":"flashUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"flashUsed"},{"type":"number","description":"The smallest f-number of the lens at the focal length used to create the photo (APEX value).","displayName":"maxApertureValue","name":"maxApertureValue","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"maxApertureValue"},{"type":"string","description":"The color space of the photo.","displayName":"colorSpace","name":"colorSpace","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"colorSpace"},{"type":"integer","description":"The width of the image in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"string","description":"The lens used to create the photo.","displayName":"lens","name":"lens","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lens"},{"type":"string","description":"The exposure mode used to create the photo.","displayName":"exposureMode","name":"exposureMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureMode"},{"type":"string","description":"The model of the camera used to create the photo.","displayName":"cameraModel","name":"cameraModel","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraModel"},{"type":"string","description":"The make of the camera used to create the photo.","displayName":"cameraMake","name":"cameraMake","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"cameraMake"},{"type":"string","description":"The white balance mode used to create the photo.","displayName":"whiteBalance","name":"whiteBalance","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"whiteBalance"},{"type":"number","description":"The length of the exposure, in seconds.","displayName":"exposureTime","name":"exposureTime","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"exposureTime"},{"type":"integer","description":"The distance to the subject of the photo, in meters.","displayName":"subjectDistance","name":"subjectDistance","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"subjectDistance"},{"type":"string","description":"The metering mode used to create the photo.","displayName":"meteringMode","name":"meteringMode","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"meteringMode"},{"type":"integer","description":"The ISO speed used to create the photo.","displayName":"isoSpeed","name":"isoSpeed","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isoSpeed"},{"additionalProperties":true,"type":"object","description":"Geographic location information stored in the image.","displayName":"location","name":"location","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"number","description":"The latitude stored in the image.","displayName":"latitude","name":"latitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"latitude"},{"type":"number","description":"The longitude stored in the image.","displayName":"longitude","name":"longitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"longitude"},{"type":"number","description":"The altitude stored in the image.","displayName":"altitude","name":"altitude","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"altitude"}],"key":"location"},{"type":"integer","description":"The height of the image in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"string","description":"The type of sensor used to create the photo.","displayName":"sensor","name":"sensor","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sensor"}],"key":"imageMediaMetadata"},{"type":"datetime","description":"The time that the item was trashed (formatted RFC 3339 timestamp). Only populated for Team Drive files.","displayName":"trashedDate","name":"trashedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"trashedDate"},{"additionalProperties":true,"type":"object","description":"Indexable text attributes for the file. This property can only be written, and is not returned by files.get. For more information, see Custom thumbnails and indexable text.","displayName":"indexableText","name":"indexableText","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The text to be indexed for this file.","displayName":"text","name":"text","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"text"}],"key":"indexableText"},{"additionalProperties":true,"type":"object","description":"A map of the id of each of the user's apps to a link to open this file with that app.\nOnly populated when the drive.apps.readonly scope is used.\n","displayName":"openWithLinks","name":"openWithLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"openWithLinks"},{"type":"string","description":"A link to open this file with the user's default app for this file. Only populated when the drive.apps.readonly scope is used.","displayName":"defaultOpenWithLink","name":"defaultOpenWithLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"defaultOpenWithLink"},{"type":"array","description":"The permissions for the authenticated user on this file.","displayName":"permissions","name":"permissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"A permission for a file.","properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"additionalProperties":true,"displayName":"Permission","name":"Permission","typePropertyKind":"TYPE_EXPRESSION"},"key":"permissions"},{"type":"datetime","description":"Last time this file was viewed by the user (formatted RFC 3339 timestamp).","displayName":"lastViewedByMeDate","name":"lastViewedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastViewedByMeDate"},{"type":"array","description":"The owner(s) of this file.","displayName":"owners","name":"owners","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"object","description":"The owner(s) of a file.","properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["Owner display name"],"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"INPLACE","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"additionalProperties":true,"displayName":"Owners","name":"Owners","typePropertyKind":"TYPE_EXPRESSION"},"key":"owners"},{"type":"string","description":"The ID of the file's head revision. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"headRevisionId","name":"headRevisionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"headRevisionId"},{"type":"boolean","description":"Whether the file can be edited by the current user.","displayName":"editable","name":"editable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"editable"},{"additionalProperties":true,"type":"object","description":"Links for exporting Google Docs to specific formats.\nThe key in the object is a mapping from export format to URL\n","displayName":"exportLinks","name":"exportLinks","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[],"key":"exportLinks"},{"type":"string","description":"Name of the last user to modify this file","displayName":"lastModifyingUserName","name":"lastModifyingUserName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"lastModifyingUserName"},{"type":"boolean","description":"Whether the file can be copied by the current user.","displayName":"copyable","name":"copyable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"copyable"},{"additionalProperties":true,"type":"object","description":"The permissions for the authenticated user on this file.","displayName":"userPermission","name":"userPermission","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The primary role for this user. Allowed values are:\n- owner\n- reader\n- writer\n","displayName":"role","name":"role","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"role"},{"type":"string","description":"The authkey parameter required for this permission.","displayName":"authKey","name":"authKey","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"authKey"},{"type":"string","description":"The name for this permission","displayName":"name","name":"name","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"name"},{"type":"string","description":"The email address of the user or group this permission refers to. This is an output-only field which is present when the permission type is `user` or `group`.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"},{"type":"string","description":"The email address or domain name for the entity. This is used during inserts and is not populated in responses. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified.","displayName":"value","name":"value","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"value"},{"type":"string","description":"A link back to this permission.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"The account type. Allowed values are:\n- user\n- group\n- domain\n- anyone\n","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},{"type":"string","description":"The ETag of the permission","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"array","description":"Additional roles for this user. Only `commenter` is currently allowed.","displayName":"additionalRoles","name":"additionalRoles","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"additionalRoles"},{"type":"string","description":"The ID of the user this permission refers to, and identical to the `permissionId` in the About and Files resources. When making a `drive.permissions.insert` request, exactly one of the `id` or `value` fields must be specified","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"This is always drive#permission.","enum":["drive#permission"],"displayName":"kind","default":"drive#permission","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"he domain name of the entity this permission refers to. This is an output-only field which is present when the permission type is `user`, `group` or `domain`.","displayName":"domain","name":"domain","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"domain"},{"type":"boolean","description":"Whether the link is required for this permission","displayName":"withLink","name":"withLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"withLink"},{"type":"string","description":"A link to the profile photo, if available.","displayName":"photoLink","name":"photoLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"photoLink"}],"key":"userPermission"},{"type":"string","description":"A link back to this file.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"ETag of the file.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},{"type":"string","description":"A link to the file's icon","displayName":"iconLink","name":"iconLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"iconLink"},{"type":"boolean","description":"Whether the file's sharing settings can be modified by the current user.\n\n**Deprecated: use capabilities/canShare.**\n","displayName":"shareable","name":"shareable","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"shareable"},{"type":"string","description":"ID of the Team Drive the file resides in.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},{"type":"string","description":"The title of the file. Used to identify file or folder name.","displayName":"title","name":"title","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"title"},{"type":"string","description":"A link for embedding the file.","displayName":"embedLink","name":"embedLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"embedLink"},{"type":"boolean","description":"Whether this file has a thumbnail.","displayName":"hasThumbnail","name":"hasThumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasThumbnail"},{"additionalProperties":true,"type":"object","description":"The last user to modify this file","displayName":"lastModifyingUser","name":"lastModifyingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":true,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"permissionId"},{"type":"string","description":"The email address of the user. This field is returned only if the last modifying user is an owner of the file, the requesting user is an owner or can modify the file, or if the last modifying user's email address is visible.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"emailAddress"}],"key":"lastModifyingUser"},{"type":"array","description":"Name(s) of the owner(s) of this file.","displayName":"ownerNames","name":"ownerNames","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"ownerNames"},{"type":"string","description":"The thumbnail version for use in thumbnail cache invalidation.\nThe actual type is long but in the API is represented as a string.\n","displayName":"thumbnailVersion","name":"thumbnailVersion","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailVersion"},{"type":"string","description":"Folder color as an RGB hex string if the file is a folder. The list of supported colors is available in the folderColorPalette field of the About resource. If an unsupported color is specified, it will be changed to the closest color in the palette.","displayName":"folderColorRgb","name":"folderColorRgb","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"folderColorRgb"},{"additionalProperties":true,"type":"object","description":"Thumbnail for the file. Only accepted on upload and for files that are not already thumbnailed by Google.","displayName":"thumbnail","name":"thumbnail","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"The URL-safe Base64 encoded bytes of the thumbnail image. It should conform to RFC 4648 section 5.","displayName":"image","name":"image","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"image"},{"type":"string","description":"The MIME type of the thumbnail.","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"}],"key":"thumbnail"},{"type":"boolean","description":"Whether the current user has read access to the Revisions resource of the file.\n\n**Deprecated: use capabilities/canReadRevisions.**\n","displayName":"canReadRevisions","name":"canReadRevisions","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canReadRevisions"},{"type":"array","description":"The list of spaces which contain the file.\nSupported values are `drive`, `appDataFolder` and `photos`.\n","displayName":"spaces","name":"spaces","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"spaces"},{"type":"string","description":"The final component of fullFileExtension with trailing text that does not appear to be part of the extension removed. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"fileExtension","name":"fileExtension","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"fileExtension"},{"type":"string","description":"The ID of the file.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A short-lived link to the file's thumbnail. Typically lasts on the order of hours.","displayName":"thumbnailLink","name":"thumbnailLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"thumbnailLink"},{"type":"boolean","description":"Whether writers can share the document with other users","displayName":"writersCanShare","name":"writersCanShare","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"writersCanShare"},{"type":"boolean","description":"Whether this file has been explicitly trashed, as opposed to recursively trashed.","displayName":"explicitlyTrashed","name":"explicitlyTrashed","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"explicitlyTrashed"},{"type":"string","description":"The type of file. This is always drive#file.","displayName":"kind","default":"drive#file","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"boolean","description":"Whether this file is in the Application Data folder.","displayName":"appDataContents","name":"appDataContents","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"appDataContents"},{"type":"array","displayName":"parents","name":"parents","typePropertyKind":"TYPE_EXPRESSION","required":true,"items":{"type":"object","description":"A reference to a file's parent.","properties":[{"type":"string","description":"This is always drive#parentReference.","enum":["drive#parentReference"],"displayName":"kind","default":"drive#parentReference","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},{"type":"string","description":"The ID of the parent","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},{"type":"string","description":"A link back to this reference","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},{"type":"string","description":"A link to the parent","displayName":"parentLink","name":"parentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"parentLink"},{"type":"boolean","description":"Whether or not the parent is the root folder.","displayName":"isRoot","name":"isRoot","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"isRoot"}],"additionalProperties":true,"displayName":"Resource","name":"Resource","typePropertyKind":"TYPE_EXPRESSION"},"key":"parents"},{"type":"boolean","description":"Whether the current user can comment on the file.\n\n**Deprecated: use capabilities/canComment.**\n","displayName":"canComment","name":"canComment","annotations":[{"name":"DriveFile.Annotations.deprecated","key":"DriveFile.Annotations.deprecated"}],"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"canComment"},{"type":"string","description":"The MIME type of the file. This is only mutable on update when uploading new content.\nThis field can be left blank, and the mimetype will be determined from the uploaded content's MIME type.\n","displayName":"mimeType","name":"mimeType","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"mimeType"},{"type":"string","description":"A link for opening the file in a relevant Google editor or viewer.","displayName":"alternateLink","name":"alternateLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"alternateLink"},{"additionalProperties":true,"type":"object","description":"If the file has been explicitly trashed, the user who trashed it. Only populated for Team Drive files.","displayName":"trashingUser","name":"trashingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"trashingUser"},{"type":"boolean","description":"Whether the file has been shared","displayName":"shared","name":"shared","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"shared"},{"type":"datetime","description":"Time at which this file was shared with the user (formatted RFC 3339 timestamp).","displayName":"sharedWithMeDate","name":"sharedWithMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"sharedWithMeDate"},{"additionalProperties":true,"type":"object","description":"User that shared the item with the current user, if available.","displayName":"SharingUser","name":"sharingUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"This is always drive#user.","enum":["drive#user"],"displayName":"kind","default":"drive#user","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"kind"},{"type":"string","description":"A plain text displayable name for this user.","displayName":"displayName","name":"displayName","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"displayName"},{"additionalProperties":true,"type":"object","description":"The user's profile picture.","displayName":"picture","name":"picture","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"string","description":"A URL that points to a profile picture of this user.","displayName":"url","name":"url","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"url"}],"key":"picture"},{"type":"boolean","description":"Whether this user is the same as the authenticated user for whom the request was made.","displayName":"isAuthenticatedUser","name":"isAuthenticatedUser","typePropertyKind":"TYPE_EXPRESSION","required":false,"examples":["false"],"key":"isAuthenticatedUser"},{"type":"string","description":"The user's ID as visible in the permissions collection.","displayName":"permissionId","name":"permissionId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"permissionId"},{"type":"string","description":"The email address of the user.","displayName":"emailAddress","name":"emailAddress","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"emailAddress"}],"key":"sharingUser"},{"type":"datetime","description":"Last time this file was modified by anyone (formatted RFC 3339 timestamp). This is only mutable on update when the setModifiedDate parameter is set.","displayName":"modifiedDate","name":"modifiedDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedDate"},{"type":"string","description":"An URL to download the content of the file.","displayName":"downloadUrl","name":"downloadUrl","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"downloadUrl"},{"type":"string","description":"An MD5 checksum for the content of this file. This field is only populated for files with content stored in Drive; it is not populated for Google Docs or shortcut files.","displayName":"md5Checksum","name":"md5Checksum","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"md5Checksum"},{"type":"datetime","description":"Create time for this file (formatted RFC 3339 timestamp)","displayName":"createdDate","name":"createdDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"createdDate"},{"type":"boolean","description":"Whether any users are granted file access directly on this file.\nThis field is only populated for Team Drive files.\n","displayName":"hasAugmentedPermissions","name":"hasAugmentedPermissions","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"hasAugmentedPermissions"},{"type":"datetime","description":"Last time this file was modified by the user (formatted RFC 3339 timestamp). Note that setting modifiedDate will also update the modifiedByMe date for the user which set the date.","displayName":"modifiedByMeDate","name":"modifiedByMeDate","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"modifiedByMeDate"},{"type":"string","description":"The number of quota bytes used by this file.","displayName":"quotaBytesUsed","name":"quotaBytesUsed","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"quotaBytesUsed"},{"type":"string","description":"A monotonically increasing version number for the file. This reflects every change made to the file on the server, even those not visible to the requesting user.","displayName":"version","name":"version","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"version"},{"type":"string","description":"The original filename of the uploaded content if available, or else the original value of the title field. `This is only available for files with binary content in Drive.`","displayName":"originalFilename","name":"originalFilename","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"originalFilename"},{"type":"string","description":"A link only available on public folders for viewing their static web assets (HTML, CSS, JS, etc)\nvia Google Drive's Website Hosting.\n","displayName":"webViewLink","name":"webViewLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webViewLink"},{"additionalProperties":true,"type":"object","description":"Metadata about video media. This will only be present for video types.","displayName":"videoMediaMetadata","name":"videoMediaMetadata","typePropertyKind":"TYPE_EXPRESSION","required":false,"properties":[{"type":"integer","description":"The width of the video in pixels.","displayName":"width","name":"width","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"width"},{"type":"integer","description":"The height of the video in pixels.","displayName":"height","name":"height","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"height"},{"type":"number","description":"The duration of the video in milliseconds.","displayName":"durationMillis","name":"durationMillis","minimum":0,"typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"durationMillis"}],"key":"videoMediaMetadata"},{"type":"boolean","description":"Whether the file is owned by the current user. Not populated for Team Drive files.","displayName":"ownedByMe","name":"ownedByMe","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"ownedByMe"},{"type":"string","description":"A link for downloading the content of the file in a browser using cookie based authentication.\nIn cases where the content is shared publicly, the content can be downloaded without any credentials.\n","displayName":"webContentLink","name":"webContentLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"webContentLink"}],"key":"file"},"selfLink":{"type":"string","description":"A link back to this change.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"type":{"type":"string","description":"The type of the change. Possible values are `file` and `teamDrive`.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"type"},"modificationDate":{"type":"datetime","description":"The time of this modification.","displayName":"modificationDate","name":"modificationDate","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"modificationDate"},"teamDriveId":{"type":"string","description":"The ID of the Team Drive associated with this change.","displayName":"teamDriveId","name":"teamDriveId","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"teamDriveId"},"id":{"type":"string","description":"The ID of the change.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"kind":{"type":"string","description":"This is always drive#change.","enum":["drive#change"],"displayName":"kind","default":"drive#change","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"fileId":{"type":"string","description":"The ID of the file associated with this change.","displayName":"fileId","name":"fileId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"fileId"}}},"WatchLib.ChangeList":{"additionalProperties":true,"type":"object","displayName":"ChangeList","name":"ChangeList","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"This is always drive#changeList.","enum":["drive#changeList"],"displayName":"kind","default":"drive#changeList","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"etag":{"type":"string","description":"The ETag of the list.","displayName":"etag","name":"etag","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"etag"},"selfLink":{"type":"string","description":"A link back to this list.","displayName":"selfLink","name":"selfLink","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"selfLink"},"nextPageToken":{"type":"string","description":"The page token for the next page of changes.","displayName":"nextPageToken","name":"nextPageToken","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextPageToken"},"nextLink":{"type":"string","description":"A link to the next page of changes.","displayName":"nextLink","name":"nextLink","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"nextLink"},"largestChangeId":{"type":"string","description":"The current largest change ID.","displayName":"largestChangeId","name":"largestChangeId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"largestChangeId"},"items":{"type":"array","description":"The actual list of changes.","displayName":"items","name":"items","typePropertyKind":"TYPE_EXPRESSION","required":false,"items":{"type":"any"},"key":"items"}}},"WatchLib.Watch":{"additionalProperties":true,"type":"object","displayName":"Watch","name":"Watch","typePropertyKind":"TYPE_EXPRESSION","properties":{"id":{"type":"string","description":"A UUID or similar unique string that identifies this channel.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"expiration":{"type":"string","description":"An arbitrary string delivered to the target address with each notification delivered over this channel. Optional.","displayName":"expiration","name":"expiration","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"expiration"},"token":{"type":"string","description":"Date and time of notification channel expiration, expressed as a Unix timestamp, in milliseconds. Optional.","displayName":"token","name":"token","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"token"},"type":{"type":"string","description":"The type of delivery mechanism used for this channel.","displayName":"type","name":"type","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"type"},"address":{"type":"string","description":"The address where notifications are delivered for this channel.","displayName":"address","name":"address","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"address"}}},"WatchLib.WatchResponse":{"additionalProperties":true,"type":"object","displayName":"WatchResponse","name":"WatchResponse","typePropertyKind":"TYPE_EXPRESSION","properties":{"kind":{"type":"string","description":"Identifies this as a notification channel used to watch for changes to a resource. Value: the fixed string api#channel.\n","enum":["api#channel"],"displayName":"kind","default":"api#channel","name":"kind","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"kind"},"id":{"type":"string","description":"A UUID or similar unique string that identifies this channel.","displayName":"id","name":"id","typePropertyKind":"TYPE_EXPRESSION","required":false,"key":"id"},"resourceId":{"type":"string","description":"An opaque ID that identifies the resource being watched on this channel. Stable across different API versions.","displayName":"resourceId","name":"resourceId","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"resourceId"},"resourceUri":{"type":"string","description":"A version-specific identifier for the watched resource.","displayName":"resourceUri","name":"resourceUri","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"resourceUri"},"token":{"type":"string","description":"An arbitrary string delivered to the target address with each notification delivered over this channel. Optional.","displayName":"token","name":"token","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"token"},"expiration":{"type":"number","description":"Date and time of notification channel expiration, expressed as a Unix timestamp, in milliseconds. Optional.","displayName":"expiration","name":"expiration","typePropertyKind":"TYPE_EXPRESSION","required":true,"key":"expiration"}}}}};
      if (apiconsole.app.__initialPage && apiconsole.app.__initialPage !== apiConsole.page) {
        apiconsole.app.pageChanged(apiconsole.app.__initialPage);
        apiconsole.app.__initialPage = undefined;
      }
      if (apiconsole.app.__initialPath && apiconsole.app.__initialPath !== apiConsole.path) {
        apiconsole.app.pathChanged(apiconsole.app.__initialPath);
        apiconsole.app.__initialPath = undefined;
      }
    };

    apiconsole.app.setInitialRouteData = function() {
      // sets the initial path for routing from external source.
      // The API console sets default path to `summary` after RAML change.
      var location = document.querySelector('app-location');
      var locationPath = location.path;
      if (!locationPath) {
        return;
      }
      var parsedPath = locationPath.replace(/\-/g, '.');
      if (parsedPath[0] === '/') {
        parsedPath = parsedPath.substr(1);
      }
      var _route = parsedPath.split('/');
      var page = _route[0];
      var path = _route[1];

      apiconsole.app.__initialPage = page;
      apiconsole.app.__initialPath = path;
    };
    /**
     * Adds event listeres to elements that are related to the routing:
     * app-location, app-route and api-console.
     */
    apiconsole.app.observeRouteEvents = function() {
      var apiConsole = document.querySelector('api-console');
      var location = document.querySelector('app-location');

      apiConsole.addEventListener('path-changed', apiconsole.app._pathChanged);
      apiConsole.addEventListener('page-changed', apiconsole.app._pageChanged);
      location.addEventListener('route-changed', apiconsole.app._routeChanged);
    };
    // Event handler for the path change.
    apiconsole.app._pathChanged = function(e) {
      apiconsole.app.pathChanged(e.detail.value);
    };
    // Called when path changed from the api-console.
    apiconsole.app.pathChanged = function(path) {
      if (!path) {
        return;
      }
      var location = document.querySelector('app-location');
      var parsedPath = path.replace(/\./g, '-');
      var newPath = '/docs/' + parsedPath;
      if (newPath !== location.path) {
        location.set('path', newPath);
      }
    };
    // Event handler for the page change.
    apiconsole.app._pageChanged = function(e) {
      apiconsole.app.pageChanged(e.detail.value);
    };
    // Called when page change.
    apiconsole.app.pageChanged = function(page) {
      var apiConsole = document.querySelector('api-console');
      if (apiConsole.page !== page) {
        apiConsole.page = page;
      }
    };
    // Event handler for the route change.
    apiconsole.app._routeChanged = function(e) {
      apiconsole.app.routeChanged(e.detail.value);
    };
    // Updates api console path if different than curent URL
    apiconsole.app.routeChanged = function(route) {
      var locationPath = route.path;
      if (!locationPath || locationPath === '/') {
        document.querySelector('app-location').set('path', '/docs');
        return;
      }
      var parsedPath = locationPath.replace(/\-/g, '.');
      if (parsedPath[0] === '/') {
        parsedPath = parsedPath.substr(1);
      }
      var _route = parsedPath.split('/');
      var page = _route[0];
      var path = _route[1];
      var apiConsole = document.querySelector('api-console');
      if (apiConsole.page !== page) {
        apiConsole.page = page;
      }
      if (apiConsole.path !== path) {
        apiConsole.path = path;
      }
    };
    /**
     * Reads page name and the path from location path.
     *
     * @param {String} locationPath Current path read from path change event or read fomr the
     * `app-location` element.
     */
    apiconsole.app._readPagePath = function(locationPath) {
      var parsedPath = locationPath.replace(/\-/g, '.');
      if (parsedPath[0] === '/') {
        parsedPath = parsedPath.substr(1);
      }
      var _route = parsedPath.split('/');
      var page = _route[0];
      var path = _route[1];
      return {
        page: page,
        path: path
      };
    };

    // Notifys user when something went wrong...
    apiconsole.app.notifyInitError = function(message) {
      window.alert('Cannot initialize API console. ' + message);
    };
    // Components are already loaded and attached at this point.
    apiconsole.app.init();
  })();
  </script>


</body></html>