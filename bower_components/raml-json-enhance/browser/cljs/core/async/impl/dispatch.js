goog.provide("cljs.core.async.impl.dispatch"),goog.require("cljs.core"),goog.require("cljs.core.async.impl.buffers"),goog.require("goog.async.nextTick"),cljs.core.async.impl.dispatch.tasks=cljs.core.async.impl.buffers.ring_buffer(32),cljs.core.async.impl.dispatch.running_QMARK_=!1,cljs.core.async.impl.dispatch.queued_QMARK_=!1,cljs.core.async.impl.dispatch.TASK_BATCH_SIZE=1024,cljs.core.async.impl.dispatch.process_messages=function(){cljs.core.async.impl.dispatch.running_QMARK_=!0,cljs.core.async.impl.dispatch.queued_QMARK_=!1;for(var c=0;;){var s=cljs.core.async.impl.dispatch.tasks.pop();if(null==s);else if(s.cljs$core$IFn$_invoke$arity$0?s.cljs$core$IFn$_invoke$arity$0():s.call(null),c<cljs.core.async.impl.dispatch.TASK_BATCH_SIZE){var e=c+1;c=e;continue}break}return cljs.core.async.impl.dispatch.running_QMARK_=!1,cljs.core.async.impl.dispatch.tasks.length>0?cljs.core.async.impl.dispatch.queue_dispatcher.cljs$core$IFn$_invoke$arity$0?cljs.core.async.impl.dispatch.queue_dispatcher.cljs$core$IFn$_invoke$arity$0():cljs.core.async.impl.dispatch.queue_dispatcher.call(null):null},cljs.core.async.impl.dispatch.queue_dispatcher=function(){return cljs.core.truth_(function(){var c=cljs.core.async.impl.dispatch.queued_QMARK_;return cljs.core.truth_(c)?cljs.core.async.impl.dispatch.running_QMARK_:c}())?null:(cljs.core.async.impl.dispatch.queued_QMARK_=!0,goog.async.nextTick(cljs.core.async.impl.dispatch.process_messages))},cljs.core.async.impl.dispatch.run=function(c){return cljs.core.async.impl.dispatch.tasks.unbounded_unshift(c),cljs.core.async.impl.dispatch.queue_dispatcher()},cljs.core.async.impl.dispatch.queue_delay=function(c,s){return setTimeout(c,s)};