!function(){"use strict";CodeMirror.modeURL="/bower_components/codemirror/mode/%N/%N.js",Polymer({is:"code-mirror",properties:{_pendingOptions:{type:Array,value:[]},value:{type:String,notify:!0,observer:"_valueChanged"},mode:{type:String,value:"htmlmixed",observer:"_modeChanged"},lineSeparator:{type:String,observer:"_lineSeparatorChanged"},theme:{type:String,value:"xq-light",observer:"_themeChanged"},tabSize:{type:Number,observer:"_tabSizeChanged"},lineNumbers:{type:Boolean,observer:"_lineNumbersChanged"},smartIndent:{type:Boolean,observer:"_smartIndentChanged"},keyMap:{type:String,observer:"_keyMapChanged"},lineWrapping:{type:Boolean,observer:"_lineWrappingChanged"},readOnly:{type:Boolean,observer:"_readOnlyChanged"},showCursorWhenSelecting:{type:Boolean,observer:"_showCursorWhenSelectingChanged"},lineWiseCopyCut:{type:Boolean,observer:"_lineWiseCopyCutChanged"},undoDepth:{type:Number,observer:"_undoDepthChanged"},historyEventDelay:{type:Number,observer:"_historyEventDelayChanged"},autofocus:{type:Boolean,observer:"_autofocusChanged"},editor:{type:Object,readOnly:!0},_changeHandler:{value:function(){return this._onChangeEvent.bind(this)}},_beforeChangeHandler:{value:function(){return this._onBeforeChangeEvent.bind(this)}},_settingInternal:Boolean},ready:function(){this.value||(this.value=this.textContent.trim());try{var e=CodeMirror(this.$.wrapper,{value:this.value,mode:this.mode,theme:this.theme});this._setEditor(e),this._pendingOptions.forEach(function(e){if(this.setOption(e.option,e.value),e.post)try{e.post()}catch(e){}},this)}catch(e){console.error("Unable to initialize CodeMirror.",e),this.fire("error",e)}},attached:function(){this.editor&&(this.editor.on("change",this._changeHandler),this.editor.on("beforeChange",this._beforeChangeHandler),this.editor.refresh(),this.focus())},detached:function(){this.editor&&(this.editor.off("change",this._changeHandler),this.editor.off("beforeChange",this._beforeChangeHandler))},focus:function(){this.editor&&this.editor.focus()},setOption:function(e,t){return this.editor?void this.editor.setOption(e,t):void this._pendingOptions.push({option:e,value:t})},_valueChanged:function(){this.editor&&this.editor.getValue()!==this.value&&void 0!==this.value&&null!==this.value&&this.editor.setValue(this.value)},_modeChanged:function(){var e,t,n,i=this.mode,o=/.+\.([^.]+)$/.exec(i);return o?(n=CodeMirror.findModeByExtension(o[1]),n&&(e=n.mode,t=n.mime)):/\//.test(i)?(n=CodeMirror.findModeByMIME(i),n&&(e=n.mode,t=i)):e=t=i,this.editor?e?(this.setOption("mode",t),void CodeMirror.autoLoadMode(this.editor,e)):void this.setOption("mode",null):void this._pendingOptions.push({option:"mode",value:e,post:function(){CodeMirror.autoLoadMode(this.editor,e)}.bind(this)})},_themeChanged:function(e){e=e||"xq-light";var t=Polymer.dom(this.root),n=t.querySelector("[data-theme]");n&&t.removeChild(n);var i=document.createElement("style","custom-style");i.include=e,i.dataset.theme=e,t.appendChild(i),this.setOption("theme",e),this.updateStyles()},_tabSizeChanged:function(){this.setOption("tabSize",this.tabSize)},_lineNumbersChanged:function(){this.setOption("lineNumbers",this.lineNumbers)},_lineSeparatorChanged:function(){this.setOption("lineSeparator",this.lineSeparator)},_smartIndentChanged:function(){this.setOption("smartIndent",this.smartIndent)},_keyMapChanged:function(){this.setOption("keyMap",this.keyMap)},_lineWrappingChanged:function(){this.setOption("lineWrapping",this.lineWrapping)},_readOnlyChanged:function(){this.setOption("readOnly",this.readOnly)},_showCursorWhenSelectingChanged:function(){this.setOption("showCursorWhenSelecting",this.showCursorWhenSelecting)},_lineWiseCopyCutChanged:function(){this.setOption("lineWiseCopyCut",this.lineWiseCopyCut)},_undoDepthChanged:function(){this.setOption("undoDepth",this.undoDepth)},_historyEventDelayChanged:function(){this.setOption("historyEventDelay",this.historyEventDelay)},_autofocusChanged:function(){this.setOption("autofocus",this.autofocus)},_onChangeEvent:function(e,t){this.set("value",this.editor.getValue()),this.fire("change",{change:t})},_onBeforeChangeEvent:function(e,t){var n=this.fire("before-change",{change:t});n.detail.change.canceled&&this.set("value",this.editor.getValue())}})}();