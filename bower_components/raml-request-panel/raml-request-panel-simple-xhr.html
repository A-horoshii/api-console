<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../promise-polyfill/promise-polyfill-lite.html">
<link rel="import" href="../fetch-polyfill/fetch-polyfill.html">

<script>Polymer({is:"raml-request-panel-simple-xhr",properties:{loading:{type:Boolean,notify:!0,readOnly:!0,value:!1},request:Object,response:Object,error:Object,loadingTime:Number},execute:function(e){this._setLoading(!0),this.error=void 0,this.response=void 0,this.request=this._createRequest(e);var r=performance.now();fetch(this.request).then(function(e){this.loadingTime=performance.now()-r,this.response=e,e.ok||(this.error=new Error("Resource is unavailable")),this._finishRequest()}.bind(this)).catch(function(e){this.loadingTime=performance.now()-r,this.response=Response.error(),this.error=e,this._finishRequest()}.bind(this))},_finishRequest:function(){var e={request:this.request,response:this.response,loadingTime:this.loadingTime,isXhr:!0};this.error&&(e.error=this.error);var r=new CustomEvent("api-console-response",{cancelable:!1,bubbles:!0,composed:!0,detail:e});this.dispatchEvent(r)},_createRequest:function(e){var r={method:e.method,mode:"cors"};if(e.headers){var s=new Headers;e.headers.split("\n").map(function(e){var r=e.split(":"),s=r[0],t=r[1];return s=s?s.trim():null,t=t?t.trim():null,s&&t?{name:s,value:t}:null}).filter(function(e){return!!e}).forEach(function(e){s.append(e.name,e.value)}),r.headers=s}return-1!==["GET","HEAD"].indexOf(e.method)?e.payload=void 0:e.payload&&(r.body=e.payload),new Request(e.url,r)}});</script>
</head><body></body></html>