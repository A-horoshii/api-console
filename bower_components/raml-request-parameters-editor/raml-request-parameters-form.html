<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../paper-styles/paper-styles.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../marked-element/marked-element.html">
<link rel="import" href="../markdown-styles/markdown-styles.html">
<link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../arc-icons/arc-icons.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">

</head><body><dom-module id="raml-request-parameters-form">
  <template strip-whitespace="">
    <style include="markdown-styles"></style>
    <style>
     :host {
      display: block;
      @apply(--raml-request-parameters-form);

      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-input-label-color, rgba(0, 0, 0, 0.48));
      }
    }

    .required paper-input {
      --paper-input-container-label: {
        color: var(--raml-request-parameters-editor-required-input-label-color, rgba(0, 0, 0, 0.72));
      }
    }

    .param-value {
      @apply(--raml-request-parameters-editor-row);

    }

    .param-value.optional {
      display: none;
    }

    .param-value.required {
    }

    .param-value.optional.with-optional {
      display: block;
    }

    .param-value .input {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
    }

    .docs {
      @apply(--paper-font-common-base);
      font-size: 13px !important;
      font-weight: 200;
      line-height: 24px;
      color: var(--inline-documentation-color, rgba(0, 0, 0, 0.87));
    }

    .markdown-html * {
      font-size: 13px !important;
    }

    .markdown-html p:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    .markdown-html p:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .help-icon {
      color: var(--accent-color, rgba(0, 0, 0, 0.74));
      transition: opacity 0.2s ease-in-out;
      opacity: 0.54;
    }

    .help-icon:hover {
      opacity: 0.74;
    }

    .value-input {
      @apply(--layout-horizontal);
      @apply(--layout-center);
      @apply(--layout-flex);
    }

    .value-input paper-dropdown-menu,
    .value-input paper-input {
      @apply(--layout-flex);
    }

    .optional-toggle-button {
      font-size: 13px;
      @apply(--raml-request-parameters-form-optional-toggle-button);
    }
    </style>
    <form is="iron-form" id="form">
      <template is="dom-repeat" items="{{parameters}}">
        <div class$="[[_computeRowClass(item, optionalOpened)]]">
          <div class="value-input">
            <template is="dom-if" if="[[_computeIsEnum(item.enum)]]">
                <paper-dropdown-menu label="[[_computeInputLabel(item.*)]]" name="[[item.name]]" required="" id="rrpv-[[index]]">
                  <paper-listbox class="dropdown-content" attr-for-selected="data-value" selected="{{item.value}}">
                    <template is="dom-repeat" items="[[item.enum]]">
                      <paper-item data-value="[[item]]">[[item]]</paper-item>
                    </template>
                    <paper-item label=" ">(empty value)</paper-item>
                  </paper-listbox>
                </paper-dropdown-menu>
                <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!hasValue(item.description)]]" on-tap="_openDocs"></paper-icon-button>
            </template>
            <template is="dom-if" if="[[!_computeIsEnum(item.enum)]]">
              <div class="input">
                <paper-input label="[[_computeInputLabel(item.*)]]" id="rrpv-[[index]]" value="{{item.value}}" required="[[item.required]]" pattern="[[item.pattern]]" name="[[item.name]]" auto-validate="" type="[[_computeInputType(item.type)]]" min="[[item.minimum]]" max="[[item.maximum]]" maxlength="[[item.maxLength]]" always-float-label="[[_computeFloatLabel(item.*)]]" placeholder="[[_computePlacdeholder(item.*)]]">
                </paper-input>
              </div>
              <paper-icon-button title="Display documentation" class="help-icon" suffix="" icon="arc:help" hidden$="[[!hasValue(item.description)]]" on-tap="_openDocs"></paper-icon-button>
            </template>
          </div>
          <div class="docs" hidden$="[[!hasValue(item.description)]]">
            <iron-collapse>
              <marked-element markdown="[[item.description]]">
                <div class="markdown-html markdown-body"></div>
              </marked-element>
            </iron-collapse>
          </div>
        </div>
      </template>
    </form>
  </template>
  <script>Polymer({is:"raml-request-parameters-form",behaviors:[Polymer.IronValidatableBehavior],properties:{parameters:Array,optionalOpened:{type:Boolean,value:!1}},_computeIsEnum:function(e){return!(!e||!e.length)},_computeInputType:function(e){if(!e||"text"===e)return"text";switch(e){case"number":case"integer":case"float":return"number";default:return"text"}},_computeInputLabel:function(e){var t=e.base;if(t){var r=t.displayName||t.name;return t.required&&(r+="*"),r}},hasValue:function(e){return"number"==typeof e&&0===e||("boolean"==typeof e||!!e)},_getValidity:function(){return this.$.form.validate()},serialize:function(){return this.$.form.serialize()},_openDocs:function(e){var t=e.model,r=this.$.form.querySelector(".param-value:nth-child("+(t.index+1)+") iron-collapse");r&&(r.opened=!r.opened)},_computePlacdeholder:function(e){var t=e.base;if(t&&t.examples&&t.examples.length&&t.examples[0]){var r=t.examples[0];return r.indexOf&&-1!==r.indexOf(t.name+"=")&&(r=r.substr(t.name.length+1)),"Example: "+r}},_computeFloatLabel:function(e){return!!this._computePlacdeholder(e)},_computeRowClass:function(e,t){var r="param-value";return e.required?r+=" required":r+=" optional",t&&(r+=" with-optional"),r},toggleOptionalParams:function(){this.optionalOpened=!this.optionalOpened}});</script>
</dom-module>
</body></html>