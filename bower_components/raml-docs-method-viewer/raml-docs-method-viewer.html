<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../raml-behaviors/raml-behavior.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../docs-parameters-table/docs-parameters-table.html">
<link rel="import" href="../docs-parameters-table/docs-headers-table.html">
<link rel="import" href="../docs-parameters-table/docs-body-table.html">
<link rel="import" href="../docs-parameters-table/docs-body-parameters-table.html">
<link rel="import" href="../raml-docs-response-panel/raml-docs-response-panel.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../marked-element/marked-element.html">
<link rel="import" href="../markdown-styles/markdown-styles.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../arc-icons/arc-icons.html">


</head><body><dom-module id="raml-docs-method-viewer">
  <template>
    <style include="markdown-styles"></style>
    <style>
    :host {
      display: block;
      @apply(--raml-docs-method-viewer);
    }

    :host([hidden]) {
      display: none !important;
    }

    h1 {
      @apply(--arc-font-headline);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h1);
    }

    h2 {
      @apply(--arc-font-title);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h2);
    }

    h3 {
      @apply(--arc-font-subhead);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-h3);
    }

    .method-name {
      font-weight: var(--raml-docs-method-viewer-title-method-font-weight, 500);
    }

    .method-value {
      text-transform: uppercase;
      font-weight: var(--raml-docs-method-viewer-http-method-font-weight, 500);
    }

    .title-area {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .title {
      @apply(--layout-flex);
    }

    .method-desc {
      margin-bottom: 28px;
      color: rgba(0,0,0,0.74);
      @apply(--arc-font-body1);
      @apply(--raml-docs-method-viewer-content-section);
      @apply(--raml-docs-item-description);
    }

    .url-area {
      @apply(--layout-horizontal);
      @apply(--arc-font-body1);
      font-size: 16px;
      margin-bottom: 40px;
      color: var(--raml-docs-method-viewer-url-color, --accent-color);
      @apply(--raml-docs-method-viewer-content-section);
    }

    .url-value {
      font-style: var(--raml-docs-method-viewer-url-font-style, italic);
      margin-left: 12px;
      word-break: break-all;
      @apply(--raml-docs-method-viewer-url);
    }

    .body-selector {
      margin: 0 12px;
    }

    .action-button {
      background-color: var(--primary-color);
      color: var(--primary-action-color, #fff);
      @apply(--action-button);
    }

    :host([no-tryit]) .action {
      display: none !important;
    }

    .bottom.action {
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
    }

    :host([narrow]) .container {
      max-width: var(--raml-docs-method-viewer-narrow-container-width, calc(100vw - 32px));
      overflow: auto;
    }
    :host([narrow]) docs-parameters-table,
    :host([narrow]) docs-headers-table,
    :host([narrow]) docs-body-parameters-table,
    :host([narrow]) raml-docs-response-panel {
      max-width: var(--raml-docs-method-viewer-narrow-container-width, calc(100vw - 32px));
      overflow: auto;
    }

    :host([narrow]) .title-area {
      margin-bottom: 24px;
      /*@apply(--layout-start);*/
    }
    :host([narrow]) h1 {
      font-size: 20px;
      margin: 0;
    }

    :host([narrow]) h2 {
      font-size: 18px;
    }

    :host([narrow]) h3 {
      font-size: 17px;
    }

    .section-title-area {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .section-title-area h3 {
      @apply(--layout-flex);
    }

    .toggle-button {
      color: var(--arc-toggle-view-icon-color, rgba(0, 0, 0, 0.54));
      transition: color 0.25s linear;
    }

    .toggle-icon {
      transform: rotateZ(0deg);
      transition: transform 0.3s linear;
    }

    .toggle-icon.opened {
      transform: rotateZ(-180deg);
    }

    .toggle-button:hover {
      color: var(--arc-toggle-view-icon-hover-color, rgba(0, 0, 0, 0.78));
    }
    </style>
    <iron-media-query query="(max-width: [[narrowWidth]])" query-matches="{{narrow}}"></iron-media-query>
    <section class="container">
      <div class="title-area">
        <h1 class="title">
          <span>[[parentName]]</span>
          <span hidden$="[[!parentName]]">:</span>
          <span class="method-name">[[methodName]]</span>
        </h1>
        <div class="action">
          <paper-button class="action-button" on-tap="_tryIt">Try it</paper-button>
        </div>
      </div>

      <div hidden$="[[_computeHideMethodDesc(raml.description)]]" class="method-desc">
        <marked-element markdown="[[raml.description]]">
          <div class="markdown-html markdown-body"></div>
        </marked-element>
      </div>

      <section class="request-doc">
        <h2>Request</h2>

        <div class="url-area">
          <div class="method-value">[[raml.method]]</div>
          <div class="url-value">[[raml.absoluteUri]]</div>
        </div>

        <section hidden$="[[!hasParameters]]">
          <div class="section-title-area">
            <h3>Parameters</h3>
            <div class="title-area-actions">
              <paper-button data-section="parameters" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle parameters details">
                [[_computeToggleActionLabel(parametersOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(parametersOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[parametersOpened]]">
            <docs-parameters-table uri-parameters="[[raml.allUriParameters]]" query-parameters="[[raml.queryParameters]]" has-query-parameteres="{{hasQueryParameteres}}" has-uri-parameteres="{{hasUriParameteres}}" narrow="[[narrow]]" auto-hide=""></docs-parameters-table>
          </iron-collapse>
        </section>

        <section hidden$="[[!hasHeaders]]">
          <div class="section-title-area">
            <h3>Headers</h3>
            <div class="title-area-actions">
              <paper-button data-section="headers" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle headers details">
                [[_computeToggleActionLabel(headersOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(headersOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[headersOpened]]">
            <docs-headers-table has-headers="{{hasHeaders}}" headers="[[raml.headers]]" narrow="[[narrow]]" auto-hide=""></docs-headers-table>
          </iron-collapse>
        </section>

        <section hidden$="[[!hasBody]]">
          <div class="section-title-area">
            <h3>Body</h3>
            <div class="title-area-actions">
              <paper-button data-section="body" on-tap="toggleCollapseSection" class="toggle-button" title="Toogle body details">
                [[_computeToggleActionLabel(bodyOpened)]]
                <iron-icon icon="arc:expand-more" class$="[[_computeToggleIconClass(bodyOpened)]]"></iron-icon>
              </paper-button>
            </div>
          </div>
          <iron-collapse opened="[[bodyOpened]]">
            <docs-body-parameters-table body="[[raml.body]]" narrow="[[narrow]]"></docs-body-parameters-table>
          </iron-collapse>
        </section>
      </section>

      <section class="response-doc" hidden$="[[!hasResponses]]">
        <h2>Response</h2>
        <raml-docs-response-panel has-responses="{{hasResponses}}" responses="[[raml.responses]]" narrow="[[narrow]]"></raml-docs-response-panel>
      </section>

      <div class="bottom action">
        <paper-button class="action-button" on-tap="_tryIt">Try it</paper-button>
      </div>
    </section>
  </template>
  <script>Polymer({is:"raml-docs-method-viewer",properties:{parentEndpoint:{type:Object,value:!1},hasBody:{value:!1,type:Boolean,computed:"_computeHasBody(raml.body)"},parentName:{type:String,value:null,computed:"_computeParentName(parentEndpoint.*)"},methodName:{type:String,computed:"_computeMethodName(raml.*)"},hasUriParameteres:Boolean,hasQueryParameteres:Boolean,hasParameters:{value:!1,type:Boolean,computed:"_computeHasParameters(hasUriParameteres,hasQueryParameteres)"},hasResponses:Boolean,autoHide:{type:Boolean,value:!1,observer:"_autoHideChanged"},hidden:{type:Boolean,value:!1,reflectToAttribute:!0},noTryit:{type:Boolean,value:!1,reflectToAttribute:!0},narrow:{type:Boolean,notify:!0,reflectToAttribute:!0},narrowWidth:{type:String,value:"768px"},parametersOpened:{type:Boolean,value:!0},headersOpened:{type:Boolean,value:!0},bodyOpened:{type:Boolean,value:!0}},observers:["_objectChanged(raml.*)"],attached:function(){this._eventTarget=Polymer.dom(this).host||document,this.autoHide&&this._attacheListeners()},_autoHideChanged:function(e){e?this._attacheListeners():this._detachListeners()},_attacheListeners:function(){return this._eventTarget?(this._detachListeners(),this.listen(this._eventTarget,"raml-is-method-changed","_isMethodHandler"),this.listen(this._eventTarget,"raml-selected-object-changed","_selectedChangeHandler"),void this.listen(this._eventTarget,"raml-selected-parent-changed","_selectedParentChangeHandler")):void(this.hidden=!0)},_detachListeners:function(){this._eventTarget&&(this.unlisten(this._eventTarget,"raml-is-method-changed","_isMethodHandler"),this.unlisten(this._eventTarget,"raml-selected-object-changed","_selectedChangeHandler"),this.unlisten(this._eventTarget,"raml-selected-parent-changed","_selectedParentChangeHandler"))},clear:function(){this.hasUriParameteres=void 0,this.hasQueryParameteres=void 0},_objectChanged:function(){this.clear(),!this.raml},_computeMethodName:function(){var e=this.raml;return e?e.displayName||e.method:""},_computeHideMethodDesc:function(e){return!e},_computeHasParameters:function(e,t){return e||t},_computeHasBody:function(e){return!!(e&&e.length>0)},_isMethodHandler:function(e,t){var a=t.state;this.hidden=!a},_selectedChangeHandler:function(e,t){return this.hidden?void(this.raml=void 0):void(this.raml=t.selectedObject)},_selectedParentChangeHandler:function(e,t){return this.hidden?void(this.parentEndpoint=void 0):void(this.parentEndpoint=t.selectedParent)},_tryIt:function(){this.fire("tryit-requested")},_computeParentName:function(){var e=this.parentEndpoint;return e?e.displayName||e.relativeUri:""},toggleCollapseSection:function(e){var t=Polymer.dom(e).localTarget.dataset.section;if(!t)return console.warn("Toggle section not fond in path ",e.path);var a=t+"Opened";this[a]=!this[a]},_computeToggleIconClass:function(e){var t="toggle-icon";return e&&(t+=" opened"),t},_computeToggleActionLabel:function(e){return e?"Hide":"Show"}});</script>
</dom-module>
</body></html>