<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="json-table-behavior.html">
<link rel="import" href="json-table-array.html">


</head><body><dom-module id="json-table-object">
  <template>
    <style>
      :host {
        display: block;
      }

      .item {
        @apply(--layout-horizontal);
        min-height: 24px;
        padding: 8px 0;
        border-bottom: 1px var(--json-table-item-border-bottom-color, rgba(0, 0, 0, 0.12)) solid;
      }

      .item.array,
      .item.object {
        @apply(--layout-vertical);
      }

      .item:last-of-type {
        border-bottom: none;
      }

      .property-name {
        width: var(--json-table-list-property-name-width, 160px);
        min-width: var(--json-table-list-property-name-width, 160px);
        color: var(--json-table-list-property-name-color, rgba(0,0,0,0.54));
        word-break: break-all;
        margin-right: 12px;
        padding-right: 12px;
      }

      .property-value {
        @apply(--layout-flex);
        word-wrap: normal;
        overflow: auto;
      }

      .object .property-value,
      .array .property-value {
        overflow: visible;
        margin-left: var(--json-table-indent-size, 12px);
      }

      .object .property-name,
      .array .property-name  {
        font-weight: 500;
      }

      json-table-object,
      json-table-array {
        overflow: auto;
      }

      .enum-value {
        display: block;
      }
    </style>
    <template is="dom-repeat" items="[[display]]">
      <div class$="item [[_computeItemClass(item.*)]]">
        <div class="property-name">
          [[item.key]]
          <template is="dom-if" if="[[_isEnumOrArray(item.*)]]">
            ([[_computeArraySize(item.*)]])
          </template>
        </div>
        <div class="property-value">
          <template is="dom-if" if="[[item.isObject]]" restamp="true">
            <json-table-object json="[[item.value]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-object>
          </template>
          <template is="dom-if" if="[[item.isEnum]]" restamp="true">
            <template is="dom-repeat" items="[[item.value]]">
              <span class="enum-value">[[item]]</span>
            </template>
          </template>
          <template is="dom-if" if="[[item.isArray]]" restamp="true">
            <div class="array-wrapper">
              <json-table-array json="[[item.value]]" paginate="[[paginate]]" page="[[page]]" items-per-page="[[itemsPerPage]]"></json-table-array>
            </div>
          </template>
          <template is="dom-if" if="[[item.isPrimitive]]" restamp="true">
            <span class="primitive-value">[[item.value]]</span>
          </template>
        </div>
      </div>
    </template>
  </template>
  <script>Polymer({is:"json-table-object",behaviors:[ArcBehaviors.JsonTableBehavior],properties:{json:{type:Object,observer:"_jsonChanged"},display:{type:Array,readOnly:!0}},_jsonChanged:function(e){if(!e)return this._setDisplay(void 0);var s=Object.keys(e),r=s.map(function(s){return this.getPropertyModel(s,e[s])},this);this._setDisplay(r)},_computeItemClass:function(e){if(e&&e.base){var s=e.base;return s.isArray||s.isEnum?"array":s.isObject?"object":void 0}}});</script>
</dom-module>
</body></html>