function XMLViewer(s){this.xml=null,this.latestError=null,this.cssPrefix=s.cssPrefix||"";var e=new DOMImplementation;e.errorChecking=!1;try{this.xml=e.loadXML(s.xml)}catch(s){throw new Error(e.translateErrCode(s.code))}}importScripts("tinyxmlsax.js"),importScripts("tinyxmlw3cdom.js");var SafeHtmlUtils={AMP_RE:new RegExp(/&/g),GT_RE:new RegExp(/>/g),LT_RE:new RegExp(/</g),SQUOT_RE:new RegExp(/'/g),QUOT_RE:new RegExp(/"/g),htmlEscape:function(s){return-1!==s.indexOf("&")&&(s=s.replace(SafeHtmlUtils.AMP_RE,"&amp;")),-1!==s.indexOf("<")&&(s=s.replace(SafeHtmlUtils.LT_RE,"&lt;")),-1!==s.indexOf(">")&&(s=s.replace(SafeHtmlUtils.GT_RE,"&gt;")),-1!==s.indexOf('"')&&(s=s.replace(SafeHtmlUtils.QUOT_RE,"&quot;")),-1!==s.indexOf("'")&&(s=s.replace(SafeHtmlUtils.SQUOT_RE,"&#39;")),s}};XMLViewer.prototype={getHTML:function(){var s=this.xml.childNodes,e=s.length;if(0===e)return"no xml";for(var t='<div class="'+this.cssPrefix+'prettyPrint" data-expanded="true">',a=0;a<e;a++)t+=this.parse(s.item(a));return t+="</div>"},parse:function(s){var e="";switch(s.nodeType){case 1:e+=this._parseElement(s);break;case 3:var t=s.nodeValue;if(""===(t=SafeHtmlUtils.htmlEscape(t)))return"";e+=this._parseValue(t);break;case 4:e+='<span colapse-marker="true" class="'+this.cssPrefix+'"><iron-icon more icon="arc:expand-more" class="'+this.cssPrefix+'"></iron-icon><iron-icon less icon="arc:expand-less" class="'+this.cssPrefix+'"></iron-icon></span>',e+='<span class="'+this.cssPrefix+'cdata">&lt;![CDATA[</span>',e+='<div collapsible class="'+this.cssPrefix+'">',e+=SafeHtmlUtils.htmlEscape(s.nodeValue),e+='</div><span class="'+this.cssPrefix+'cdata">]]&gt;</span>';break;case 7:e+='<div class="'+this.cssPrefix+'processing">&lt;?xml '+s.nodeValue+" ?&gt;</div>";break;case 8:e+='<div class="'+this.cssPrefix+'comment">&lt;--',e+=s.nodeValue,e+="--&gt</div>"}return e='<div class="'+this.cssPrefix+'node">'+e+"</div>"},_parseValue:function(s){s=s.trim();var e="value";return isNaN(s)?"true"===s||"false"===s?e+=" boolean":"null"===s&&(e+=" null"):e+=" number",s='<span class="'+this.cssPrefix+e+'">'+s+"</span>"},_parseElement:function(s){var e=s.childNodes.length,t="",a=!1;if((e>1||this._childIsCDATA(s))&&(t+='<span colapse-marker="true" class="'+this.cssPrefix+'"><iron-icon more icon="arc:expand-more" class="'+this.cssPrefix+'"></iron-icon><iron-icon less icon="arc:expand-less" class="'+this.cssPrefix+'"></iron-icon></span>',a=!0),t+='<span class="'+this.cssPrefix+'punctuation">&lt;</span>',t+='<span class="'+this.cssPrefix+'tagname">'+s.nodeName+"</span>",t+=this.parseAttributes(s),e>0){var i=s.childNodes;t+='<span class="'+this.cssPrefix+'punctuation">&gt;</span>';var r=!1;1===e&&3===i.item(0).getNodeType()&&(r=!0),r?t+='<div class="'+this.cssPrefix+'inline">':(t+='<div collapse-indicator colapse-marker="true" class="'+this.cssPrefix+'collapseIndicator">...</div>',t+='<div collapsible class="'+this.cssPrefix+'nodeMargin">');for(var n=0;n<e;n++)t+=this.parse(i.item(n));t+="</div>",a&&(t+='<span arrowEmpty class="'+this.cssPrefix+'arrowEmpty">&nbsp;</span>'),t+='<span class="'+this.cssPrefix+'punctuation end">&lt;/</span>',t+='<span class="'+this.cssPrefix+'tagname end">'+s.nodeName+"</span>",t+='<span class="'+this.cssPrefix+'punctuation">&gt;</span>'}else t+='<span class="'+this.cssPrefix+'punctuation"> /&gt;</span>';return t},_childIsCDATA:function(s){return s.firstChild instanceof DOMCDATASection},parseAttributes:function(s){var e="",t=s.attributes;if(null!==t&&t.length>0)for(var a=0;a<t.length;a++)e+=" "+this.getAttributesString(t.item(a));return e},getAttributesString:function(s){var e='<span class="'+this.cssPrefix+'attname">',t=s.getName();t=SafeHtmlUtils.htmlEscape(t),e+=t,e+="</span>",e+='<span class="'+this.cssPrefix+'punctuation">=</span>',e+='<span class="'+this.cssPrefix+'attribute">&quot;';var a=s.getValue();return a=SafeHtmlUtils.htmlEscape(a),e+=a,e+="&quot;</span>"},urlify:function(s){return s.replace(/([^"\s&;]*:\/\/[^"\s]*)(&quot;)?/gim,'<a class="'+this.cssPrefix+'" response-anchor href="$1">$1</a>')}},self.onmessage=function(s){var e=s.data,t="";try{var a=new XMLViewer(e);t=a.getHTML(),a=null}catch(s){throw new Error(s.message)}self.postMessage(t)};