<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-masked-input/paper-masked-input.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../arc-icons/arc-icons.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="auth-methods-behavior.html">
<link rel="import" href="auth-methods-styles.html">

</head><body><dom-module id="auth-method-basic">
  <template>
    <style include="auth-methods-styles">
     :host {
      display: block;
      @apply(--auth-method-panel);
      @apply(--auth-method-basic);
    }
    </style>
    <div class="row">
      <div class="stepper">
        <span class="step">[[_computeStep(stepStartIndex, 1)]]</span>
        <span class="step-header">
          <span class="step-title">Set authorization data</span>
        </span>
      </div>
      <div class="step-content">
        <div class="line"></div>
        <form is="iron-form" id="form" autocomplete="on">
          <paper-input label="User name" value="{{username}}" type="text" required="" auto-validate="" autocomplete="on">
            <paper-icon-button suffix="" on-tap="clearUsername" icon="arc:clear" alt="Clear input icon" title="Clear input"></paper-icon-button>
          </paper-input>
          <paper-masked-input label="Password" value="{{password}}" auto-validate="" autocomplete="on"></paper-masked-input>
        </form>
      </div>
    </div>
  </template>
  <script>Polymer({is:"auth-method-basic",behaviors:[ArcBehaviors.AuthMethodsBehavior],properties:{hash:{type:String,notify:!0},password:{type:String,notify:!0,value:""},username:{type:String,notify:!0,value:""}},attached:function(){this.listen(window,"auth-settings-changed","_onAuthSettings")},detached:function(){this.unlisten(window,"auth-settings-changed","_onAuthSettings")},get settings(){return this._getSettings()},validate:function(t){return t?this.$.form.checkValidity():this.$.form.validate()},observers:["_hashChanged(hash)","_userInputChanged(username, password)","_settingsChanged(hash)"],_settingsChanged:function(){var t=this.$.form.validate(),e=this._getSettings(),s={settings:e,type:"basic",valid:t};this.fire("auth-settings-changed",s)},_getSettings:function(){return{hash:this.hash,password:this.password,username:this.username}},_hashChanged:function(t){if(!this._internalHashChange&&t){var e;try{e=atob(t);var s=e.split(":");s.length&&(this.username=s[0],s[1]&&(this.password=s[1]))}catch(t){console.warn(t),this.fire("error",{error:t})}}},_userInputChanged:function(t,e){t||(t=""),e||(e="");var s=t+":"+e,i=btoa(s);this._internalHashChange=!0,this.set("hash",i),this._internalHashChange=!1},clearUsername:function(){this.username=""},_onAuthSettings:function(t){if(this._initialized){var e=Polymer.dom(t);if(e.rootTarget!==this&&"basic"===t.detail.type){var s=t.detail.settings;for(var i in s)this[i]!==s[i]&&(this[i]=s[i])}}}});</script>
</dom-module>
</body></html>